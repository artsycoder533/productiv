/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={155:t=>{var e,n,s=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&d())}function d(){if(!u){var t=o(h);u=!0;for(var e=c.length;e;){for(a=c,c=[];++l<e;)a&&a[l].run();l=-1,e=c.length}a=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},917:(t,e,n)=>{"use strict";t.exports=n.p+"6d4b16957e06b7a61672.png"}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})();var s={};(()=>{"use strict";n.d(s,{I:()=>Ip});const t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let e=0;e<t.length;e+=3){const i=t[e],r=e+1<t.length,o=r?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(h=64)),s.push(n[u],n[l],n[h],n[d])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&s+1<t.length&&56320==(64512&t.charCodeAt(s+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++s)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((31&i)<<6|63&r)}else if(i>239&&i<365){const r=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[s++]=String.fromCharCode(55296+(r>>10)),e[s++]=String.fromCharCode(56320+(1023&r))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],r=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==r||null==o||null==a)throw Error();const c=i<<2|r>>4;if(s.push(c),64!==o){const t=r<<4&240|o>>2;if(s.push(t),64!==a){const t=o<<6&192|a;s.push(t)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function i(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function r(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(i())}function o(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function a(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function c(){const t=i();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}class u extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l.prototype.create)}}class l{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,i=this.errors[t],r=i?function(t,e){return t.replace(h,((t,n)=>{const s=e[n];return null!=s?String(s):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${r} (${s}).`;return new u(s,o,n)}}const h=/\{\$([^}]+)}/g;function d(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const n=t[i],r=e[i];if(f(n)&&f(r)){if(!d(n,r))return!1}else if(n!==r)return!1}for(const t of s)if(!n.includes(t))return!1;return!0}function f(t){return null!==t&&"object"==typeof t}function p(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function m(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,s]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(s)}})),e}function g(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class y{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let s;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");s=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===s.next&&(s.next=v),void 0===s.error&&(s.error=v),void 0===s.complete&&(s.complete=v);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch(t){}})),this.observers.push(s),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function v(){}function w(t){return t&&t._delegate?t._delegate:t}class E{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const b="[DEFAULT]";class I{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const t=new e;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const e=this.getOrInitializeService({instanceIdentifier:n});e&&t.resolve(e)}catch(t){}}return this.instancesDeferred.get(n).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),s=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(s)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:b})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(s);return s}onInit(t,e){var n;const s=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===b?void 0:s),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var s;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:b:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class T{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new I(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const _=[];var S,k;(k=S||(S={}))[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT";const C={debug:S.DEBUG,verbose:S.VERBOSE,info:S.INFO,warn:S.WARN,error:S.ERROR,silent:S.SILENT},A=S.INFO,N={[S.DEBUG]:"log",[S.VERBOSE]:"log",[S.INFO]:"info",[S.WARN]:"warn",[S.ERROR]:"error"},R=(t,e,...n)=>{if(e<t.logLevel)return;const s=(new Date).toISOString(),i=N[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${s}]  ${t.name}:`,...n)};class L{constructor(t){this.name=t,this._logLevel=A,this._logHandler=R,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in S))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?C[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,S.DEBUG,...t),this._logHandler(this,S.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,S.VERBOSE,...t),this._logHandler(this,S.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,S.INFO,...t),this._logHandler(this,S.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,S.WARN,...t),this._logHandler(this,S.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,S.ERROR,...t),this._logHandler(this,S.ERROR,...t)}}class D{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const O="@firebase/app",P="0.7.12",x=new L("@firebase/app"),M={[O]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},U=new Map,F=new Map;function V(t,e){try{t.container.addComponent(e)}catch(n){x.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function q(t){const e=t.name;if(F.has(e))return x.debug(`There were multiple attempts to register component ${e}.`),!1;F.set(e,t);for(const e of U.values())V(e,t);return!0}function j(t,e){return t.container.getProvider(e)}const B=new l("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class H{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new E("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw B.create("app-deleted",{appName:this._name})}}const $="9.6.2";function K(t="[DEFAULT]"){const e=U.get(t);if(!e)throw B.create("no-app",{appName:t});return e}function z(t,e,n){var s;let i=null!==(s=M[t])&&void 0!==s?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const t=[`Unable to register library "${i}" with version "${e}":`];return r&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void x.warn(t.join(" "))}q(new E(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}function G(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]])}return n}q(new E("platform-logger",(t=>new D(t)),"PRIVATE")),z(O,P,""),z(O,P,"esm2017"),z("fire-js",""),Object.create,Object.create;const W=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},J=new l("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Q=new L("@firebase/auth");function X(t,...e){Q.logLevel<=S.ERROR&&Q.error(`Auth (9.6.2): ${t}`,...e)}function Y(t,...e){throw tt(t,...e)}function Z(t,...e){return tt(t,...e)}function tt(t,...e){if("string"!=typeof t){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return J.create(t,...e)}function et(t,e,...n){if(!t)throw tt(e,...n)}function nt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw X(e),new Error(e)}function st(t,e){t||nt(e)}const it=new Map;function rt(t){st(t instanceof Function,"Expected a class definition");let e=it.get(t);return e?(st(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,it.set(t,e),e)}function ot(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function at(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class ct{constructor(t,e){this.shortDelay=t,this.longDelay=e,st(e>t,"Short delay should be less than long delay!"),this.isMobile=r()||a()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===at()||"https:"===at()||o()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ut(t,e){st(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class lt{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dt=new ct(3e4,6e4);function ft(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pt(t,e,n,s,i={}){return mt(t,i,(async()=>{let i={},r={};s&&("GET"===e?r=s:i={body:JSON.stringify(s)});const o=p(Object.assign({key:t.config.apiKey},r)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),lt.fetch()(yt(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},i))}))}async function mt(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},ht),e);try{const e=new vt(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const r=await i.json();if("needConfirmation"in r)throw wt(t,"account-exists-with-different-credential",r);if(i.ok&&!("errorMessage"in r))return r;{const e=i.ok?r.errorMessage:r.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw wt(t,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw wt(t,"email-already-in-use",r);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const s=Object.assign(Object.assign({},W()),{[e]:n});return new l("auth","Firebase",s).create(e,{appName:t.name})}(t,a,o);Y(t,a)}}catch(e){if(e instanceof u)throw e;Y(t,"network-request-failed")}}async function gt(t,e,n,s,i={}){const r=await pt(t,e,n,s,i);return"mfaPendingCredential"in r&&Y(t,"multi-factor-auth-required",{_serverResponse:r}),r}function yt(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?ut(t.config,i):`${t.config.apiScheme}://${i}`}class vt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Z(this.auth,"timeout"))),dt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function wt(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Z(t,e,s);return i.customData._tokenResponse=n,i}function Et(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function bt(t){return 1e3*Number(t)}function It(e){const[n,s,i]=e.split(".");if(void 0===n||void 0===s||void 0===i)return X("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return t.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(s);return e?JSON.parse(e):(X("Failed to decode base64 JWT payload"),null)}catch(t){return X("Caught error parsing JWT payload as JSON",t),null}}async function Tt(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof u&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class _t{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class St{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Et(this.lastLoginAt),this.creationTime=Et(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kt(t){var e;const n=t.auth,s=await t.getIdToken(),i=await Tt(t,async function(t,e){return pt(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:s}));et(null==i?void 0:i.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(null===(e=r.providerUserInfo)||void 0===e?void 0:e.length)?r.providerUserInfo.map((t=>{var{providerId:e}=t,n=G(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,u=o,[...c.filter((t=>!u.some((e=>e.providerId===t.providerId)))),...u]);var c,u;const l=t.isAnonymous,h=!(t.email&&r.passwordHash||(null==a?void 0:a.length)),d=!!l&&h,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new St(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){et(t.idToken,"internal-error"),et(void 0!==t.idToken,"internal-error"),et(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=It(t);return et(e,"internal-error"),et(void 0!==e.exp,"internal-error"),et(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return et(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:s,expiresIn:i}=await async function(t,e){const n=await mt(t,{},(async()=>{const n=p({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,r=yt(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",lt.fetch()(r,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:s,expirationTime:i}=e,r=new Ct;return n&&(et("string"==typeof n,"internal-error",{appName:t}),r.refreshToken=n),s&&(et("string"==typeof s,"internal-error",{appName:t}),r.accessToken=s),i&&(et("number"==typeof i,"internal-error",{appName:t}),r.expirationTime=i),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return nt("not implemented")}}function At(t,e){et("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Nt{constructor(t){var{uid:e,auth:n,stsTokenManager:s}=t,i=G(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new _t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new St(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await Tt(this,this.stsTokenManager.getToken(this.auth,t));return et(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=w(t),s=await n.getIdToken(e),i=It(s);et(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r="object"==typeof i.firebase?i.firebase:void 0,o=null==r?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Et(bt(i.auth_time)),issuedAtTime:Et(bt(i.iat)),expirationTime:Et(bt(i.exp)),signInProvider:o||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=w(t);await kt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new Nt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await kt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Tt(this,async function(t,e){return pt(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,s,i,r,o,a,c,u;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(s=e.email)&&void 0!==s?s:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(r=e.photoURL)&&void 0!==r?r:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(u=e.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:E,providerData:b,stsTokenManager:I}=e;et(v&&I,t,"internal-error");const T=Ct.fromJSON(this.name,I);et("string"==typeof v,t,"internal-error"),At(l,t.name),At(h,t.name),et("boolean"==typeof w,t,"internal-error"),et("boolean"==typeof E,t,"internal-error"),At(d,t.name),At(f,t.name),At(p,t.name),At(m,t.name),At(g,t.name),At(y,t.name);const _=new Nt({uid:v,auth:t,email:h,emailVerified:w,displayName:l,isAnonymous:E,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(_.providerData=b.map((t=>Object.assign({},t)))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(t,e,n=!1){const s=new Ct;s.updateFromServerResponse(e);const i=new Nt({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:n});return await kt(i),i}}class Rt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Rt.type="NONE";const Lt=Rt;function Dt(t,e,n){return`firebase:${t}:${e}:${n}`}class Ot{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Dt(this.userKey,s.apiKey,i),this.fullPersistenceKey=Dt("persistence",s.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Nt._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Ot(rt(Lt),t,n);const s=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=s[0]||rt(Lt);const r=Dt(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(r);if(e){const s=Nt._fromJSON(t,e);n!==i&&(o=s),i=n;break}}catch(t){}const a=s.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(r,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(r)}catch(t){}}))),new Ot(i,t,n)):new Ot(i,t,n)}}function Pt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ft(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qt(e))return"Blackberry";if(jt(e))return"Webos";if(Mt(e))return"Safari";if((e.includes("chrome/")||Ut(e))&&!e.includes("edge/"))return"Chrome";if(Vt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function xt(t=i()){return/firefox\//i.test(t)}function Mt(t=i()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ut(t=i()){return/crios\//i.test(t)}function Ft(t=i()){return/iemobile/i.test(t)}function Vt(t=i()){return/android/i.test(t)}function qt(t=i()){return/blackberry/i.test(t)}function jt(t=i()){return/webos/i.test(t)}function Bt(t=i()){return/iphone|ipad|ipod/i.test(t)}function Ht(t=i()){return Bt(t)||Vt(t)||jt(t)||qt(t)||/windows phone/i.test(t)||Ft(t)}function $t(t,e=[]){let n;switch(t){case"Browser":n=Pt(i());break;case"Worker":n=`${Pt(i())}-${t}`;break;default:n=t}return`${n}/JsCore/9.6.2/${e.length?e.join(","):"FirebaseCore-web"}`}class Kt{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gt(this),this.idTokenSubscription=new Gt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=rt(e)),this._initializationPromise=this.queue((async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Ot.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,i=null==n?void 0:n._redirectEventId,r=await this.tryRedirectSignIn(t);s&&s!==i||!(null==r?void 0:r.user)||(n=r.user)}return n?n._redirectEventId?(et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await kt(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?w(t):null;return e&&et(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(rt(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new l("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&rt(t)||this._popupRedirectResolver;et(e,this,"argument-error"),this.redirectPersistenceManager=await Ot.create(this,[rt(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,s){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e),r=this._isInitialized?Promise.resolve():this._initializationPromise;return et(r,this,"internal-error"),r.then((()=>i(this.currentUser))),"function"==typeof e?t.addObserver(e,n,s):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=$t(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),t}}function zt(t){return w(t)}class Gt{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new y(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Wt{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return nt("not implemented")}_getIdTokenResponse(t){return nt("not implemented")}_linkToIdToken(t,e){return nt("not implemented")}_getReauthenticationResolver(t){return nt("not implemented")}}class Jt extends Wt{constructor(t,e,n,s=null){super("password",n),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new Jt(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Jt(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return gt(t,"POST","/v1/accounts:signInWithPassword",ft(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return gt(t,"POST","/v1/accounts:signInWithEmailLink",ft(t,e))}(t,{email:this._email,oobCode:this._password});default:Y(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return pt(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return gt(t,"POST","/v1/accounts:signInWithEmailLink",ft(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Y(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Qt(t,e){return gt(t,"POST","/v1/accounts:signInWithIdp",ft(t,e))}class Xt extends Wt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Xt(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Y("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:s}=e,i=G(e,["providerId","signInMethod"]);if(!n||!s)return null;const r=new Xt(n,s);return r.idToken=i.idToken||void 0,r.accessToken=i.accessToken||void 0,r.secret=i.secret,r.nonce=i.nonce,r.pendingToken=i.pendingToken||null,r}_getIdTokenResponse(t){return Qt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Qt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Qt(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=p(e)}return t}}const Yt={USER_NOT_FOUND:"user-not-found"};class Zt extends Wt{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Zt({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Zt({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return gt(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await gt(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,e));if(n.temporaryProof)throw wt(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return gt(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Yt)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:s}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:s,temporaryProof:i}=t;return n||e||s||i?new Zt({verificationId:e,verificationCode:n,phoneNumber:s,temporaryProof:i}):null}}class te{constructor(t){var e,n,s,i,r,o;const a=m(g(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=a.mode)&&void 0!==s?s:null);et(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(r=a.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=m(g(t)).link,n=e?m(g(e)).deep_link_id:null,s=m(g(t)).deep_link_id;return(s?m(g(s)).link:null)||s||n||e||t}(t);try{return new te(e)}catch(t){return null}}}class ee{constructor(){this.providerId=ee.PROVIDER_ID}static credential(t,e){return Jt._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=te.parseLink(e);return et(n,"argument-error"),Jt._fromEmailAndCode(t,n.code,n.tenantId)}}ee.PROVIDER_ID="password",ee.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ee.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ne{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class se extends ne{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ie extends se{constructor(){super("facebook.com")}static credential(t){return Xt._fromParams({providerId:ie.PROVIDER_ID,signInMethod:ie.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ie.credentialFromTaggedObject(t)}static credentialFromError(t){return ie.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ie.credential(t.oauthAccessToken)}catch(t){return null}}}ie.FACEBOOK_SIGN_IN_METHOD="facebook.com",ie.PROVIDER_ID="facebook.com";class re extends se{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Xt._fromParams({providerId:re.PROVIDER_ID,signInMethod:re.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return re.credentialFromTaggedObject(t)}static credentialFromError(t){return re.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return re.credential(e,n)}catch(t){return null}}}re.GOOGLE_SIGN_IN_METHOD="google.com",re.PROVIDER_ID="google.com";class oe extends se{constructor(){super("github.com")}static credential(t){return Xt._fromParams({providerId:oe.PROVIDER_ID,signInMethod:oe.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return oe.credentialFromTaggedObject(t)}static credentialFromError(t){return oe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return oe.credential(t.oauthAccessToken)}catch(t){return null}}}oe.GITHUB_SIGN_IN_METHOD="github.com",oe.PROVIDER_ID="github.com";class ae extends se{constructor(){super("twitter.com")}static credential(t,e){return Xt._fromParams({providerId:ae.PROVIDER_ID,signInMethod:ae.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ae.credentialFromTaggedObject(t)}static credentialFromError(t){return ae.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return ae.credential(e,n)}catch(t){return null}}}ae.TWITTER_SIGN_IN_METHOD="twitter.com",ae.PROVIDER_ID="twitter.com";class ce{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,s=!1){const i=await Nt._fromIdTokenResponse(t,n,s),r=ue(n);return new ce({user:i,providerId:r,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const s=ue(n);return new ce({user:t,providerId:s,_tokenResponse:n,operationType:e})}}function ue(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class le extends u{constructor(t,e,n,s){var i;super(e.code,e.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,le.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,s){return new le(t,e,n,s)}}function he(t,e,n,s){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw le._fromErrorAndOperation(t,n,e,s);throw n}))}async function de(t,e,n=!1){const s="signIn",i=await he(t,s,e),r=await ce._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}new WeakMap;const fe="__sak";class pe{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(fe,"1"),this.storage.removeItem(fe),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class me extends pe{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=i();return Mt(t)||Bt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Ht(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),s=this.localCache[e];n!==s&&t(e,s,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(n);if(t.newValue!==s)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const s=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);c()&&10===document.documentMode&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,10):s()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}me.type="LOCAL";const ge=me;class ye extends pe{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}ye.type="SESSION";const ve=ye;class we{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new we(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:s,data:i}=e.data,r=this.handlersMap[s];if(!(null==r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(r).map((async t=>t(e.origin,i))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ee(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}we.receivers=[];class be{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,r;return new Promise(((o,a)=>{const c=Ee("",20);s.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:s,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(r),s.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[s.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function Ie(){return window}function Te(){return void 0!==Ie().WorkerGlobalScope&&"function"==typeof Ie().importScripts}const _e="firebaseLocalStorageDb",Se="firebaseLocalStorage",ke="fbase_key";class Ce{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function Ae(t,e){return t.transaction([Se],e?"readwrite":"readonly").objectStore(Se)}function Ne(){const t=indexedDB.open(_e,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Se,{keyPath:ke})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Se)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(_e);return new Ce(t).toPromise()}(),e(await Ne()))}))}))}async function Re(t,e,n){const s=Ae(t,!0).put({[ke]:e,value:n});return new Ce(s).toPromise()}function Le(t,e){const n=Ae(t,!0).delete(e);return new Ce(n).toPromise()}class De{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ne()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Te()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=we._getInstance(Te()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new be(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}var e}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ne();return await Re(t,fe,"1"),await Le(t,fe),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Re(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=Ae(t,!1).get(e),s=await new Ce(n).toPromise();return void 0===s?null:s.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Le(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=Ae(t,!1).getAll();return new Ce(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:s,value:i}of t)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),e.push(s));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}De.type="LOCAL";const Oe=De;function Pe(t){return`__${t}${Math.floor(1e6*Math.random())}`}Pe("rcb"),new ct(3e4,6e4);class xe{constructor(t){this.providerId=xe.PROVIDER_ID,this.auth=zt(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var s;const i=await n.verify();try{let r;if(et("string"==typeof i,t,"argument-error"),et("recaptcha"===n.type,t,"argument-error"),r="string"==typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){et("enroll"===e.type,t,"internal-error");const n=await function(t,e){return pt(t,"POST","/v2/accounts/mfaEnrollment:start",ft(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{et("signin"===e.type,t,"internal-error");const n=(null===(s=r.multiFactorHint)||void 0===s?void 0:s.uid)||r.multiFactorUid;et(n,t,"missing-multi-factor-info");const o=await function(t,e){return pt(t,"POST","/v2/accounts/mfaSignIn:start",ft(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return pt(t,"POST","/v1/accounts:sendVerificationCode",ft(t,e))}(t,{phoneNumber:r.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}}(this.auth,t,w(e))}static credential(t,e){return Zt._fromVerification(t,e)}static credentialFromResult(t){const e=t;return xe.credentialFromTaggedObject(e)}static credentialFromError(t){return xe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Zt._fromTokenResponse(e,n):null}}xe.PROVIDER_ID="phone",xe.PHONE_SIGN_IN_METHOD="phone";class Me extends Wt{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Qt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Qt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Ue(t){return de(t.auth,new Me(t),t.bypassAuthState)}function Fe(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),async function(t,e,n=!1){const{auth:s}=t,i="reauthenticate";try{const r=await Tt(t,he(s,i,e,t),n);et(r.idToken,s,"internal-error");const o=It(r.idToken);et(o,s,"internal-error");const{sub:a}=o;return et(t.uid===a,s,"user-mismatch"),ce._forOperation(t,i,r)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Y(s,"user-mismatch"),t}}(n,new Me(t),t.bypassAuthState)}async function Ve(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),async function(t,e,n=!1){const s=await Tt(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ce._forOperation(t,"link",s)}(n,new Me(t),t.bypassAuthState)}class qe{constructor(t,e,n,s,i=!1){this.auth=t,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:s,tenantId:i,error:r,type:o}=t;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ue;case"linkViaPopup":case"linkViaRedirect":return Ve;case"reauthViaPopup":case"reauthViaRedirect":return Fe;default:Y(this.auth,"internal-error")}}resolve(t){st(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){st(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const je=new ct(2e3,1e4);class Be extends qe{constructor(t,e,n,s,i){super(t,e,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Be.currentPopupAction&&Be.currentPopupAction.cancel(),Be.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return et(t,this.auth,"internal-error"),t}async onExecution(){st(1===this.filter.length,"Popup operations only handle one event");const t=Ee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Z(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Z(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Be.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Z(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,je.get())};t()}}Be.currentPopupAction=null;const He=new Map;class $e extends qe{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=He.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return Dt("pendingRedirect",t.config.apiKey,t.name)}(e),s=function(t){return rt(t._redirectPersistence)}(t);if(!await s._isAvailable())return!1;const i="true"===await s._get(n);return await s._remove(n),i}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}He.set(this.auth._key(),t)}return this.bypassAuthState||He.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Ke(t,e,n=!1){const s=zt(t),i=function(t,e){return e?rt(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(s,e),r=new $e(s,i,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}class ze{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return We(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!We(t)){const s=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Z(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ge(t))}saveEventToCache(t){this.cachedEventUids.add(Ge(t)),this.lastProcessedEventTime=Date.now()}}function Ge(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function We({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Je=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qe=/^https?/;function Xe(t){const e=ot(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===s?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===s}if(!Qe.test(n))return!1;if(Je.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}const Ye=new ct(3e4,6e4);function Ze(){const t=Ie().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let tn=null;function en(t){return tn=tn||function(t){return new Promise(((e,n)=>{var s,i,r,o;function a(){Ze(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ze(),n(Z(t,"network-request-failed"))},timeout:Ye.get()})}if(null===(i=null===(s=Ie().gapi)||void 0===s?void 0:s.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(r=Ie().gapi)||void 0===r?void 0:r.load)){const e=Pe("iframefcb");return Ie()[e]=()=>{gapi.load?a():n(Z(t,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise(((t,e)=>{const n=document.createElement("script");var s,i;n.setAttribute("src",o),n.onload=t,n.onerror=t=>{const n=Z("internal-error");n.customData=t,e(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(i=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==i?i:document).appendChild(n)}))).catch((t=>n(t)))}a()}})).catch((t=>{throw tn=null,t}))}(t),tn}const nn=new ct(5e3,15e3),sn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function on(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ut(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,s={apiKey:e.apiKey,appName:t.name,v:$},i=rn.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${p(s).slice(1)}`}const an={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cn{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function un(t,e,n,s,i,r){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:$,eventId:i};if(e instanceof ne){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(r||{}))o[t]=e}if(e instanceof se){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];return`${function({config:t}){return t.emulator?ut(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${p(a).slice(1)}`}const ln="webStorageSupport",hn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ve,this._completeRedirectFn=Ke}async _openPopup(t,e,n,s){var r;return st(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,s=500,r=600){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=Object.assign(Object.assign({},an),{width:s.toString(),height:r.toString(),top:o,left:a}),l=i().toLowerCase();n&&(c=Ut(l)?"_blank":n),xt(l)&&(e=e||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=i()){var e;return Bt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==c)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}(e||"",c),new cn(null);const d=window.open(e||"",c,h);et(d,t,"popup-blocked");try{d.focus()}catch(t){}return new cn(d)}(t,un(t,e,n,ot(),s),Ee())}async _openRedirect(t,e,n,s){var i;return await this._originValidation(t),i=un(t,e,n,ot(),s),Ie().location.href=i,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(st(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await en(t),n=Ie().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:on(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sn,dontclear:!0},(e=>new Promise((async(n,s)=>{await e.restyle({setHideOnLeave:!1});const i=Z(t,"network-request-failed"),r=Ie().setTimeout((()=>{s(i)}),nn.get());function o(){Ie().clearTimeout(r),n(e)}e.ping(o).then(o,(()=>{s(i)}))}))))}(t),n=new ze(t);return e.register("authEvent",(e=>(et(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(ln,{type:ln},(n=>{var s;const i=null===(s=null==n?void 0:n[0])||void 0===s?void 0:s.webStorageSupport;void 0!==i&&e(!!i),Y(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return pt(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(Xe(t))return}catch(t){}Y(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Ht()||Mt()||Bt()}};var dn,fn="@firebase/auth",pn="0.19.5";class mn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gn(){const t=new Date,e=t.getFullYear();let n=t.getMonth()+1;n<10&&(n=`0${n}`);let s=t.getDate();return s<10&&(s=`0${s}`),`${e}-${n}-${s}`}function yn(){const t=document.querySelector(".modal"),e=document.querySelector(".modal__form");t.classList.toggle("showModal"),e.reset()}function vn(t,e){const n=document.createElement(t);return n.classList.add(e),n}function wn(t,e,n){const s=document.createElement(t);return s.classList.add(e),s.textContent=n,s}function En(t,e,n,s){const i=document.createElement(t);return i.className=e,i.setAttribute(n,s),i}function bn(t,e,n,s,i,r){const o=vn("div","todo__container");o.setAttribute("data-id",r);const a=vn("article","todo"),c=vn("div","todo__date"),u=wn("small","date",n);c.appendChild(u);const l=wn("div","todo__project",i);c.appendChild(l),a.appendChild(c);const h=vn("div","todo__content"),d=wn("div","todo__title",t),f=vn("div","todo__priority"),p=wn("small","priority",s);"high"===s?p.classList.add("high"):p.classList.add("normal"),f.appendChild(p),h.appendChild(d),h.appendChild(f);const m=vn("div","todo__buttons"),g=En("button","todo__more","id","more"),y=vn("i","fas");y.classList.add("fa-caret-down"),y.addEventListener("click",In),g.appendChild(y),m.appendChild(g);const v=En("button","todo__edit","id","edit"),w=vn("i","fas");w.classList.add("fa-edit"),w.addEventListener("click",_n),v.appendChild(w),m.appendChild(v);const E=En("button","todo__delete","id","delete"),b=vn("i","fas");b.classList.add("fa-trash-alt"),b.addEventListener("click",Tn),E.appendChild(b),m.appendChild(E),h.append(m),a.appendChild(h),o.appendChild(a);const I=vn("div","todo__details"),T=vn("p","description");T.textContent=e;const _=vn("p","fulltitle");return _.textContent=t,I.appendChild(_),I.appendChild(T),o.appendChild(I),o}function In(t){t.currentTarget.parentElement.parentElement.parentElement.parentElement.nextElementSibling.classList.toggle("showDetails")}function Tn(t){const e=document.querySelector(".todos"),n=t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement;var s;e.removeChild(n),s=n.dataset.id,Zf.forEach(((t,e)=>{console.log(t),t.id===s&&(Zf.splice(e,1),console.log("here"),async function(t){const e=pf(Yf,`${Gn()}tasks`,t);(await function(t){t=cf(t,hf);const e=cf(t.firestore,gf);return function(t,e,n={}){const s=new ba;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,i){const r=new Jd({next:r=>{e.enqueueAndForget((()=>vd(t,o)));const a=r.docs.has(n);!a&&r.fromCache?i.reject(new Ea(wa.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&s&&"server"===s.source?i.reject(new Ea(wa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(r)},error:t=>i.reject(t)}),o=new Id(Fc(n.path),r,{includeMetadataChanges:!0,wo:!0});return yd(t,o)}(await Zd(t),t.asyncQueue,e,n,s))),s.promise}(yf(e),t._key).then((n=>function(t,e,n){const s=n.docs.get(e._key),i=new Jf(t);return new Kf(t,i,e._key,s,new $f(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}(e)).exists()&&function(t){Qf(cf(t.firestore,gf),[new _u(t._key,hu.none())])}(e)}(s))}))}function _n(t){const e=document.getElementById("form");document.querySelector(".form__heading").textContent="Edit Task";const n=function(t){const e=[];return Zf.forEach((n=>{console.log(typeof n.id,typeof t),n.id==t&&e.push(n)})),e[0]}(t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement.dataset.id);console.log(n),document.querySelector(".modal"),yn(),e.elements.namedItem("title").value=n.title,e.elements.namedItem("description").value=n.description,e.elements.namedItem("priority").value=n.priority,e.elements.namedItem("project").value=n.project,e.elements.namedItem("date").value=n.dueDate,document.getElementById("create").classList.add("hide");const s=document.getElementById("update");s.classList.remove("hide"),s.addEventListener("click",(()=>{const t=document.querySelector(".project__title");if(console.log(t),t&&e.elements.namedItem("project").value===t.textContent)return console.log(n),Sn(n),void yn();Sn(n);const s=document.getElementById("miscellaneous"),i=document.getElementById("home"),r=document.getElementById("work"),o=e.elements.namedItem("title").value,a=e.elements.namedItem("description").value,c=e.elements.namedItem("priority").value,u=e.elements.namedItem("project").value,l=e.elements.namedItem("date").value;"work"===u&&(op(o,a,l,c,u,n.id,n.status),yn(),r.click()),"home"===u&&(op(o,a,l,c,u,n.id,n.status),yn(),i.click()),"miscellaneous"===u&&(op(o,a,l,c,u,n.id,n.status),yn(),s.click())}))}function Sn(t){const e=document.getElementById("form"),n=e.elements.namedItem("title").value,s=e.elements.namedItem("description").value,i=e.elements.namedItem("priority").value,r=e.elements.namedItem("project").value,o=e.elements.namedItem("date").value;console.log(n,s,i,r,o),document.querySelector(".todo__title").textContent=n,document.querySelector(".description").textContent=s,document.querySelector(".priority").textContent=i,"normal"===i?(document.querySelector(".priority").classList.remove("high"),document.querySelector(".priority").classList.add("normal")):"high"===i&&(document.querySelector(".priority").classList.remove("normal"),document.querySelector(".priority").classList.add("high")),document.querySelector(".todo__date").textContent=o,document.querySelector(".description").textContent=s,console.log(t.id),op(n,s,o,i,r,t.id,t.status)}dn="Browser",q(new E("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:s,authDomain:i}=n.options;return(t=>{et(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),et(!(null==i?void 0:i.includes(":")),"argument-error",{appName:t.name});const n={apiKey:s,authDomain:i,clientPlatform:dn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$t(dn)},r=new Kt(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(rt);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,null==e?void 0:e.popupRedirectResolver)}(r,e),r})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),q(new E("auth-internal",(t=>(t=>new mn(t))(zt(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),z(fn,pn,void 0),z(fn,pn,"esm2017"),vn("section","todos");const kn=document.querySelector(".container");function Cn(){[...kn.children].forEach((t=>{t.remove()}))}const An=document.querySelector(".container");function Nn(t){[...An.children].forEach((t=>{t.remove()}));const e=vn("h2","task__title");e.textContent="today"===t?"Due Today":t;const n=document.querySelector(".container"),s=vn("section","todos");n.appendChild(e),n.appendChild(s)}function Rn(t){t.map((t=>{const{title:e,description:n,dueDate:s,priority:i,project:r,id:o}=t,a=document.querySelector(".todos");a.appendChild(bn(e,n,s,i,r,o)),An.appendChild(a)}))}let Ln=0;function Dn(t){Pn();const e=document.querySelector(".container"),n=wn("h2","inbox__title","Inbox");if(e.appendChild(n),0===t.length){const t=wn("p","inbox__status","Your inbox is empty");return e.appendChild(n),e.appendChild(t),e}t.map((t=>{const n=vn("div","inbox");n.setAttribute("data-id",t.id);const s=vn("p","inbox__subject");t.dueDate===gn()?s.textContent="You have a task that's due today":t.dueDate<gn()&&(s.textContent="You have a task that's overdue!");const i=En("button","todo__delete","id","delete"),r=vn("i","fas");r.classList.add("fa-trash-alt"),i.addEventListener("click",(function(e){On(t.id,e.currentTarget.parentElement)})),i.appendChild(r),"unread"===t.status&&s.classList.add("bold"),"read"===t.status&&s.classList.remove("bold");const o=function(t,e,n,s){const i=document.createElement("input");return i.setAttribute("type","checkbox"),i.setAttribute("name","checkbox"),i.setAttribute("id","checkbox"),i}();o.classList.add("checkbox"),s.addEventListener("click",(function(){!function(t,e,n){Pn();const s=document.querySelector(".container"),i=vn("div","message__container"),r=wn("h3","message__subject",e),o=wn("p","message__title",t.title),a=wn("p","message__priority",t.priority),c=wn("p","message__date",t.dueDate),u=wn("p","message__description",t.description),l=wn("button","inbox__button","Back To Inbox");l.classList.add("button"),l.addEventListener("click",(function(){ap()})),i.appendChild(r),i.appendChild(o),i.appendChild(a),i.appendChild(c),i.appendChild(u),i.appendChild(l),s.appendChild(i),xn("subtract"),t.status="read",ep(t.title,t.description,t.dueDate,t.priority,t.project,String(t.id),t.status),console.log(t)}(t,s.textContent)})),n.appendChild(o),n.appendChild(s),n.appendChild(i),e.appendChild(n)}));const s=wn("button","inbox__button","Delete Selected");return s.addEventListener("click",(function(){!function(t){const e=document.querySelector(".container").children;Array.from(e).forEach(((t,e)=>{t.children[0]&&t.children[0].checked&&(On(t.dataset.id,t),t.children[1].classList.contains("bold")&&xn("subtract")),ap()}))}()})),e.appendChild(s),e}function On(t,e){document.querySelector(".container"),document.querySelector(".inbox"),e.remove(),function(t){Xf.forEach(((e,n)=>{e.id===t&&Xf.splice(n,1)}))}(t),ap()}function Pn(){[...document.querySelector(".container").children].forEach((t=>{t.remove()}))}function xn(t){const e=document.getElementById("number"),n=document.getElementById("count");"add"===t?(Ln++,n.textContent=Ln,e.classList.add("number")):"subtract"===t&&(Ln--,Ln<1?(n.textContent="",e.classList.remove("number")):n.textContent=Ln)}var Mn=n(917);function Un(t){console.log(t),document.querySelector(".header__username").textContent=t}function Fn(){const t=document.querySelector(".sidebar");t.classList.contains("hide")?t.classList.remove("hide"):t.classList.add("hide")}function Vn(){document.querySelector(".header__upload").classList.toggle("visible")}function qn(){const t=document.getElementById("profile"),e=document.querySelector(".header__image");if(this.files){const e=new FileReader;e.readAsDataURL(this.files[0]),e.addEventListener("load",(()=>{t.src=e.result,console.log(t.src)}))}e.click()}const jn=document.querySelector(".container");function Bn(){return console.log("dashboard clicked"),[...jn.children].forEach((t=>{t.remove()})),jn.innerHTML=`\n    <div class="dashboard-wrapper">\n  <p class="greeting">Hello <span class="username-greeting">${Gn()}</span>,</p>\n  <section class="quote-container">\n    <div class="quote">\n      <p class="motivation">Quote of the Day: </p>\n      <blockquote>Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia incidunt ullam saepe officia illo doloremque vel vero minus deserunt dolore?</blockquote>\n      <span class="author">-author name</span>\n    </div>\n  </section>\n  <section class="dashboard">\n  <div class="dashboard-tasks">\n    <i class="fas fa-tasks"></i>\n    <span class="tasks-count">\n        ${function(){let t;return tp(Gn()),t=Zf.length>0?Zf.length:0,t}()}\n    </span>\n    <span>total tasks</span>\n  </div>\n  <div class="dashboard-unread">\n    <i class="far fa-envelope"></i>\n    <span class="unread-count">\n      ${function(){let t;tp(Gn());const e=Zf.filter((t=>t.dueDate>gn()));return t=e.length>0?e.length:0,t}()}\n    </span>\n    <span>upcoming tasks</span>\n  </div>\n  <div class="dashboard-overdue">\n    <i class="fas fa-exclamation-triangle"></i>\n    <span class="overdue-count">\n      ${function(){let t;tp(Gn()),console.log("overdue todos",Zf);const e=Zf.filter((t=>(console.log(t.dueDate<gn()),t.dueDate<gn())));return console.log("overdue tasks",e),t=e.length>0?e.length:0,t}()}\n    </span>\n    <span>overdue tasks</span>\n  </div>\n  <div class="dashboard-today">\n    <i class="fas fa-calendar-day"></i>\n    <span class="today-count">\n      ${function(){let t;tp(Gn()),console.log("todos",Zf.length);const e=Zf.filter((t=>t.dueDate===gn()));return t=e.length>0?e.length:0,t}()}\n    </span>\n    <span>tasks due today</span>\n  </div>\n</section>\n</div>\n    `,jn}const Hn=document.querySelector(".container"),$n=document.getElementById("dashboard");let Kn=!1;function zn(){const t=document.querySelector(".sidebar"),e=document.querySelector(".header"),n=document.querySelector(".add__button");t.classList.remove("hide"),e.classList.remove("hide"),n.classList.remove("hide")}function Gn(){return document.querySelector(".header__username").textContent}function Wn(){[...document.querySelector(".container").children].forEach((t=>{t.remove()}))}function Jn(t){Kn=t}var Qn,Xn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Yn={},Zn=Zn||{},ts=Xn||self;function es(){}function ns(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ss(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var is="closure_uid_"+(1e9*Math.random()>>>0),rs=0;function os(t,e,n){return t.call.apply(t.bind,arguments)}function as(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function cs(t,e,n){return(cs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?os:as).apply(null,arguments)}function us(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ls(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,s){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return e.prototype[n].apply(t,i)}}function hs(){this.s=this.s,this.o=this.o}var ds={};hs.prototype.s=!1,hs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,is)&&t[is]||(t[is]=++rs)}(this);delete ds[t]}},hs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fs=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ps=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const s=t.length,i="string"==typeof t?t.split(""):t;for(let r=0;r<s;r++)r in i&&e.call(n,i[r],r,t)};function ms(t){return Array.prototype.concat.apply([],arguments)}function gs(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function ys(t){return/^[\s\xa0]*$/.test(t)}var vs,ws=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Es(t,e){return-1!=t.indexOf(e)}function bs(t,e){return t<e?-1:t>e?1:0}t:{var Is=ts.navigator;if(Is){var Ts=Is.userAgent;if(Ts){vs=Ts;break t}}vs=""}function _s(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function Ss(t){const e={};for(const n in t)e[n]=t[n];return e}var ks="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cs(t,e){let n,s;for(let e=1;e<arguments.length;e++){for(n in s=arguments[e],s)t[n]=s[n];for(let e=0;e<ks.length;e++)n=ks[e],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function As(t){return As[" "](t),t}As[" "]=es;var Ns,Rs,Ls=Es(vs,"Opera"),Ds=Es(vs,"Trident")||Es(vs,"MSIE"),Os=Es(vs,"Edge"),Ps=Os||Ds,xs=Es(vs,"Gecko")&&!(Es(vs.toLowerCase(),"webkit")&&!Es(vs,"Edge"))&&!(Es(vs,"Trident")||Es(vs,"MSIE"))&&!Es(vs,"Edge"),Ms=Es(vs.toLowerCase(),"webkit")&&!Es(vs,"Edge");function Us(){var t=ts.document;return t?t.documentMode:void 0}t:{var Fs="",Vs=(Rs=vs,xs?/rv:([^\);]+)(\)|;)/.exec(Rs):Os?/Edge\/([\d\.]+)/.exec(Rs):Ds?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Rs):Ms?/WebKit\/(\S+)/.exec(Rs):Ls?/(?:Version)[ \/]?(\S+)/.exec(Rs):void 0);if(Vs&&(Fs=Vs?Vs[1]:""),Ds){var qs=Us();if(null!=qs&&qs>parseFloat(Fs)){Ns=String(qs);break t}}Ns=Fs}var js,Bs={};function Hs(){return t=Bs,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=ws(String(Ns)).split("."),n=ws("9").split("."),s=Math.max(e.length,n.length);for(let o=0;0==t&&o<s;o++){var i=e[o]||"",r=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==i[0].length&&0==r[0].length)break;t=bs(0==i[1].length?0:parseInt(i[1],10),0==r[1].length?0:parseInt(r[1],10))||bs(0==i[2].length,0==r[2].length)||bs(i[2],r[2]),i=i[3],r=r[3]}while(0==t)}return 0<=t}();var t}ts.document&&Ds?js=Us()||parseInt(Ns,10)||void 0:js=void 0;var $s=js,Ks=function(){if(!ts.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ts.addEventListener("test",es,e),ts.removeEventListener("test",es,e)}catch(t){}return t}();function zs(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Gs(t,e){if(zs.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xs){t:{try{As(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ws[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gs.Z.h.call(this)}}zs.prototype.h=function(){this.defaultPrevented=!0},ls(Gs,zs);var Ws={2:"touch",3:"pen",4:"mouse"};Gs.prototype.h=function(){Gs.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Js="closure_listenable_"+(1e6*Math.random()|0),Qs=0;function Xs(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ia=i,this.key=++Qs,this.ca=this.fa=!1}function Ys(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Zs(t){this.src=t,this.g={},this.h=0}function ti(t,e){var n=e.type;if(n in t.g){var s,i=t.g[n],r=fs(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Ys(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ei(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.ca&&r.listener==e&&r.capture==!!n&&r.ia==s)return i}return-1}Zs.prototype.add=function(t,e,n,s,i){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=ei(t,e,s,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Xs(e,this.src,r,!!s,i)).fa=n,t.push(e)),e};var ni="closure_lm_"+(1e6*Math.random()|0),si={};function ii(t,e,n,s,i){if(s&&s.once)return oi(t,e,n,s,i);if(Array.isArray(e)){for(var r=0;r<e.length;r++)ii(t,e[r],n,s,i);return null}return n=fi(n),t&&t[Js]?t.N(e,n,ss(s)?!!s.capture:!!s,i):ri(t,e,n,!1,s,i)}function ri(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var o=ss(i)?!!i.capture:!!i,a=hi(t);if(a||(t[ni]=a=new Zs(t)),(n=a.add(e,n,s,o,r)).proxy)return n;if(s=function(){var t=li;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)Ks||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent(ui(e.toString()),s);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(s)}return n}function oi(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)oi(t,e[r],n,s,i);return null}return n=fi(n),t&&t[Js]?t.O(e,n,ss(s)?!!s.capture:!!s,i):ri(t,e,n,!0,s,i)}function ai(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)ai(t,e[r],n,s,i);else s=ss(s)?!!s.capture:!!s,n=fi(n),t&&t[Js]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ei(r=t.g[e],n,s,i))&&(Ys(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--))):t&&(t=hi(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ei(e,n,s,i)),(n=-1<t?e[t]:null)&&ci(n))}function ci(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Js])ti(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(ui(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=hi(e))?(ti(n,t),0==n.h&&(n.src=null,e[ni]=null)):Ys(t)}}}function ui(t){return t in si?si[t]:si[t]="on"+t}function li(t,e){if(t.ca)t=!0;else{e=new Gs(e,this);var n=t.listener,s=t.ia||t.src;t.fa&&ci(t),t=n.call(s,e)}return t}function hi(t){return(t=t[ni])instanceof Zs?t:null}var di="__closure_events_fn_"+(1e9*Math.random()>>>0);function fi(t){return"function"==typeof t?t:(t[di]||(t[di]=function(e){return t.handleEvent(e)}),t[di])}function pi(){hs.call(this),this.i=new Zs(this),this.P=this,this.I=null}function mi(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,"string"==typeof e)e=new zs(e,t);else if(e instanceof zs)e.target=e.target||t;else{var i=e;Cs(e=new zs(s,t),i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=gi(o,s,!0,e)&&i}if(i=gi(o=e.g=t,s,!0,e)&&i,i=gi(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)i=gi(o=e.g=n[r],s,!1,e)&&i}function gi(t,e,n,s){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ti(t.i,o),i=!1!==a.call(c,s)&&i}}return i&&!s.defaultPrevented}ls(pi,hs),pi.prototype[Js]=!0,pi.prototype.removeEventListener=function(t,e,n,s){ai(this,t,e,n,s)},pi.prototype.M=function(){if(pi.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)Ys(n[s]);delete e.g[t],e.h--}}this.I=null},pi.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)},pi.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};var yi=ts.JSON.stringify;function vi(){var t=Si;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var wi,Ei=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new bi),(t=>t.reset()));class bi{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Ii(t){ts.setTimeout((()=>{throw t}),0)}function Ti(t,e){wi||function(){var t=ts.Promise.resolve(void 0);wi=function(){t.then(ki)}}(),_i||(wi(),_i=!0),Si.add(t,e)}var _i=!1,Si=new class{constructor(){this.h=this.g=null}add(t,e){const n=Ei.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function ki(){for(var t;t=vi();){try{t.h.call(t.g)}catch(t){Ii(t)}var e=Ei;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_i=!1}function Ci(t,e){pi.call(this),this.h=t||1,this.g=e||ts,this.j=cs(this.kb,this),this.l=Date.now()}function Ai(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ni(t,e,n){if("function"==typeof t)n&&(t=cs(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=cs(t.handleEvent,t)}return 2147483647<Number(e)?-1:ts.setTimeout(t,e||0)}function Ri(t){t.g=Ni((()=>{t.g=null,t.i&&(t.i=!1,Ri(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ls(Ci,pi),(Qn=Ci.prototype).da=!1,Qn.S=null,Qn.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mi(this,"tick"),this.da&&(Ai(this),this.start()))}},Qn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qn.M=function(){Ci.Z.M.call(this),Ai(this),delete this.g};class Li extends hs{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ri(this)}M(){super.M(),this.g&&(ts.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Di(t){hs.call(this),this.h=t,this.g={}}ls(Di,hs);var Oi=[];function Pi(t,e,n,s){Array.isArray(n)||(n&&(Oi[0]=n.toString()),n=Oi);for(var i=0;i<n.length;i++){var r=ii(e,n[i],s||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function xi(t){_s(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ci(t)}),t),t.g={}}function Mi(){this.g=!0}function Ui(t,e,n,s){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return yi(n)}catch(t){return e}}(t,n)+(s?" "+s:"")}))}Di.prototype.M=function(){Di.Z.M.call(this),xi(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mi.prototype.Aa=function(){this.g=!1},Mi.prototype.info=function(){};var Fi={},Vi=null;function qi(){return Vi=Vi||new pi}function ji(t){zs.call(this,Fi.Ma,t)}function Bi(t){const e=qi();mi(e,new ji(e,t))}function Hi(t,e){zs.call(this,Fi.STAT_EVENT,t),this.stat=e}function $i(t){const e=qi();mi(e,new Hi(e,t))}function Ki(t,e){zs.call(this,Fi.Na,t),this.size=e}function zi(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ts.setTimeout((function(){t()}),e)}Fi.Ma="serverreachability",ls(ji,zs),Fi.STAT_EVENT="statevent",ls(Hi,zs),Fi.Na="timingevent",ls(Ki,zs);var Gi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ji(){}function Qi(t){return t.h||(t.h=t.i())}function Xi(){}Ji.prototype.h=null;var Yi,Zi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tr(){zs.call(this,"d")}function er(){zs.call(this,"c")}function nr(){}function sr(t,e,n,s){this.l=t,this.j=e,this.m=n,this.X=s||1,this.V=new Di(this),this.P=rr,t=Ps?125:void 0,this.W=new Ci(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}ls(tr,zs),ls(er,zs),ls(nr,Ji),nr.prototype.g=function(){return new XMLHttpRequest},nr.prototype.i=function(){return{}},Yi=new nr;var rr=45e3,or={},ar={};function cr(t,e,n){t.K=1,t.v=Lr(Sr(e)),t.s=n,t.U=!0,ur(t,null)}function ur(t,e){t.F=Date.now(),fr(t),t.A=Sr(t.v);var n=t.A,s=t.X;Array.isArray(s)||(s=[String(s)]),$r(n.h,"t",s),t.C=0,n=t.l.H,t.h=new ir,t.g=Ko(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Li(cs(t.Ia,t,t.g),t.O)),Pi(t.V,t.g,"readystatechange",t.gb),e=t.H?Ss(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Bi(1),function(t,e,n,s,i,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function lr(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function hr(t,e,n){let s,i=!0;for(;!t.I&&t.C<n.length;){if(s=dr(t,n),s==ar){4==e&&(t.o=4,$i(14),i=!1),Ui(t.j,t.m,null,"[Incomplete Response]");break}if(s==or){t.o=4,$i(15),Ui(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Ui(t.j,t.m,s,null),vr(t,s)}lr(t)&&s!=ar&&s!=or&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,$i(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uo(e),e.L=!0,$i(11))):(Ui(t.j,t.m,n,"[Invalid Chunked Response]"),yr(t),gr(t))}function dr(t,e){var n=t.C,s=e.indexOf("\n",n);return-1==s?ar:(n=Number(e.substring(n,s)),isNaN(n)?or:(s+=1)+n>e.length?ar:(e=e.substr(s,n),t.C=s+n,e))}function fr(t){t.Y=Date.now()+t.P,pr(t,t.P)}function pr(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=zi(cs(t.eb,t),e)}function mr(t){t.B&&(ts.clearTimeout(t.B),t.B=null)}function gr(t){0==t.l.G||t.I||qo(t.l,t)}function yr(t){mr(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ai(t.W),xi(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function vr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Qr(n.i,t)))if(n.I=t.N,!t.J&&Qr(n.i,t)&&3==n.G){try{var s=n.Ca.g.parse(e)}catch(t){s=null}if(Array.isArray(s)&&3==s.length){var i=s;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Vo(n),Ao(n)}Mo(n),$i(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=zi(cs(n.ab,n),6e3));if(1>=Jr(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Bo(n,11)}else if((t.J||n.g==t)&&Vo(n),!ys(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const e=u[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(s=1.5*l,n.K=s,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=s.i;!r.g&&(Es(t,"spdy")||Es(t,"quic")||Es(t,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(Xr(r,r.h),r.h=null))}if(s.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(s.sa=t,Rr(s.F,s.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((s=n).oa=$o(s,s.H?s.la:null,s.W),o.J){Yr(s.i,o);var a=o,c=s.K;c&&a.setTimeout(c),a.B&&(mr(a),fr(a)),s.g=o}else xo(s);0<n.l.length&&Lo(n)}else"stop"!=u[0]&&"close"!=u[0]||Bo(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Bo(n,7):Co(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}Bi(4)}catch(t){}}function wr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ns(t)||"string"==typeof t)ps(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ns(t)||"string"==typeof t){n=[];for(var s=t.length,i=0;i<s;i++)n.push(i)}else for(i in n=[],s=0,t)n[s++]=i;s=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ns(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}for(s in e=[],n=0,t)e[n++]=t[s];return e}(t),i=s.length;for(var r=0;r<i;r++)e.call(void 0,s[r],n&&n[r],t)}}function Er(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(t)if(t instanceof Er)for(n=t.T(),s=0;s<n.length;s++)this.set(n[s],t.get(n[s]));else for(s in t)this.set(s,t[s])}function br(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var s=t.g[e];Ir(t.h,s)&&(t.g[n++]=s),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Ir(i,s=t.g[e])||(t.g[n++]=s,i[s]=1),e++;t.g.length=n}}function Ir(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Qn=sr.prototype).setTimeout=function(t){this.P=t},Qn.gb=function(t){t=t.target;const e=this.L;e&&3==Io(t)?e.l():this.Ia(t)},Qn.Ia=function(t){try{if(t==this.g)t:{const l=Io(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||Ps||this.g&&(this.h.h||this.g.ga()||To(this.g)))){this.I||4!=l||7==e||Bi(8==e||0>=h?3:2),mr(this);var n=this.g.ba();this.N=n;e:if(lr(this)){var s=To(this.g);t="";var i=s.length,r=4==Io(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){yr(this),gr(this);var o="";break e}this.h.i=new ts.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:r&&e==i-1});s.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,s,i,r,o){t.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ys(a)){var u=a;break e}}u=null}if(!(n=u)){this.i=!1,this.o=3,$i(12),yr(this),gr(this);break t}Ui(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vr(this,n)}this.U?(hr(this,l,o),Ps&&this.i&&3==l&&(Pi(this.V,this.W,"tick",this.fb),this.W.start())):(Ui(this.j,this.m,o,null),vr(this,o)),4==l&&yr(this),this.i&&!this.I&&(4==l?qo(this.l,this):(this.i=!1,fr(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,$i(12)):(this.o=0,$i(13)),yr(this),gr(this)}}}catch(t){}},Qn.fb=function(){if(this.g){var t=Io(this.g),e=this.g.ga();this.C<e.length&&(mr(this),hr(this,t,e),this.i&&4!=t&&fr(this))}},Qn.cancel=function(){this.I=!0,yr(this)},Qn.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Bi(3),$i(17)),yr(this),this.o=2,gr(this)):pr(this,this.Y-t)},(Qn=Er.prototype).R=function(){br(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Qn.T=function(){return br(this),this.g.concat()},Qn.get=function(t,e){return Ir(this.h,t)?this.h[t]:e},Qn.set=function(t,e){Ir(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Qn.forEach=function(t,e){for(var n=this.T(),s=0;s<n.length;s++){var i=n[s],r=this.get(i);t.call(e,r,i,this)}};var Tr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _r(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof _r){this.g=void 0!==e?e:t.g,kr(this,t.j),this.s=t.s,Cr(this,t.i),Ar(this,t.m),this.l=t.l,e=t.h;var n=new qr;n.i=e.i,e.g&&(n.g=new Er(e.g),n.h=e.h),Nr(this,n),this.o=t.o}else t&&(n=String(t).match(Tr))?(this.g=!!e,kr(this,n[1]||"",!0),this.s=Dr(n[2]||""),Cr(this,n[3]||"",!0),Ar(this,n[4]),this.l=Dr(n[5]||"",!0),Nr(this,n[6]||"",!0),this.o=Dr(n[7]||"")):(this.g=!!e,this.h=new qr(null,this.g))}function Sr(t){return new _r(t)}function kr(t,e,n){t.j=n?Dr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Cr(t,e,n){t.i=n?Dr(e,!0):e}function Ar(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Nr(t,e,n){e instanceof qr?(t.h=e,function(t,e){e&&!t.j&&(jr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Br(this,e),$r(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Or(e,Fr)),t.h=new qr(e,t.g))}function Rr(t,e,n){t.h.set(e,n)}function Lr(t){return Rr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Dr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Or(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Pr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Pr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}_r.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Or(e,xr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Or(e,xr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Or(n,"/"==n.charAt(0)?Ur:Mr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Or(n,Vr)),t.join("")};var xr=/[#\/\?@]/g,Mr=/[#\?:]/g,Ur=/[#\?]/g,Fr=/[#\?@]/g,Vr=/#/g;function qr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function jr(t){t.g||(t.g=new Er,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Br(t,e){jr(t),e=Kr(t,e),Ir(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Ir((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&br(t)))}function Hr(t,e){return jr(t),e=Kr(t,e),Ir(t.g.h,e)}function $r(t,e,n){Br(t,e),0<n.length&&(t.i=null,t.g.set(Kr(t,e),gs(n)),t.h+=n.length)}function Kr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function zr(t){this.l=t||Gr,t=ts.PerformanceNavigationTiming?0<(t=ts.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ts.g&&ts.g.Ea&&ts.g.Ea()&&ts.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qn=qr.prototype).add=function(t,e){jr(this),this.i=null,t=Kr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Qn.forEach=function(t,e){jr(this),this.g.forEach((function(n,s){ps(n,(function(n){t.call(e,n,s,this)}),this)}),this)},Qn.T=function(){jr(this);for(var t=this.g.R(),e=this.g.T(),n=[],s=0;s<e.length;s++)for(var i=t[s],r=0;r<i.length;r++)n.push(e[s]);return n},Qn.R=function(t){jr(this);var e=[];if("string"==typeof t)Hr(this,t)&&(e=ms(e,this.g.get(Kr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ms(e,t[n])}return e},Qn.set=function(t,e){return jr(this),this.i=null,Hr(this,t=Kr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Qn.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Qn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var s=e[n],i=encodeURIComponent(String(s));s=this.R(s);for(var r=0;r<s.length;r++){var o=i;""!==s[r]&&(o+="="+encodeURIComponent(String(s[r]))),t.push(o)}}return this.i=t.join("&")};var Gr=10;function Wr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Jr(t){return t.h?1:t.g?t.g.size:0}function Qr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Xr(t,e){t.g?t.g.add(e):t.h=e}function Yr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Zr(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return gs(t.i)}function to(){}function eo(){this.g=new to}function no(t,e,n){const s=n||"";try{wr(t,(function(t,n){let i=t;ss(t)&&(i=yi(t)),e.push(s+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}function so(t,e,n,s,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(s)}catch(t){}}function io(t){this.l=t.$b||null,this.j=t.ib||!1}function ro(t,e){pi.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=oo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zr.prototype.cancel=function(){if(this.i=Zr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},to.prototype.stringify=function(t){return ts.JSON.stringify(t,void 0)},to.prototype.parse=function(t){return ts.JSON.parse(t,void 0)},ls(io,Ji),io.prototype.g=function(){return new ro(this.l,this.j)},io.prototype.i=function(t){return function(){return t}}({}),ls(ro,pi);var oo=0;function ao(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function co(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uo(t)}function uo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Qn=ro.prototype).open=function(t,e){if(this.readyState!=oo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uo(this)},Qn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ts).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Qn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,co(this)),this.readyState=oo},Qn.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ts.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ao(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Qn.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?co(this):uo(this),3==this.readyState&&ao(this)}},Qn.Ua=function(t){this.g&&(this.response=this.responseText=t,co(this))},Qn.Ta=function(t){this.g&&(this.response=t,co(this))},Qn.ha=function(){this.g&&co(this)},Qn.setRequestHeader=function(t,e){this.v.append(t,e)},Qn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Qn.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ro.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var lo=ts.JSON.parse;function ho(t){pi.call(this),this.headers=new Er,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fo,this.K=this.L=!1}ls(ho,pi);var fo="",po=/^https?$/i,mo=["POST","PUT"];function go(t){return"content-type"==t.toLowerCase()}function yo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,vo(t),Eo(t)}function vo(t){t.D||(t.D=!0,mi(t,"complete"),mi(t,"error"))}function wo(t){if(t.h&&void 0!==Zn&&(!t.C[1]||4!=Io(t)||2!=t.ba()))if(t.v&&4==Io(t))Ni(t.Fa,0,t);else if(mi(t,"readystatechange"),4==Io(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===a){var i=String(t.H).match(Tr)[1]||null;if(!i&&ts.self&&ts.self.location){var r=ts.self.location.protocol;i=r.substr(0,r.length-1)}s=!po.test(i?i.toLowerCase():"")}n=s}if(n)mi(t,"complete"),mi(t,"success");else{t.m=6;try{var o=2<Io(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",vo(t)}}finally{Eo(t)}}}function Eo(t,e){if(t.g){bo(t);const n=t.g,s=t.C[0]?es:null;t.g=null,t.C=null,e||mi(t,"ready");try{n.onreadystatechange=s}catch(t){}}}function bo(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ts.clearTimeout(t.A),t.A=null)}function Io(t){return t.g?t.g.readyState:0}function To(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case fo:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function _o(t,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=function(t){let e="";return _s(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Rr(t,e,n))}function So(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ko(t){this.za=0,this.l=[],this.h=new Mi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=So("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=So("baseRetryDelayMs",5e3,t),this.$a=So("retryDelaySeedMs",1e4,t),this.Ya=So("forwardChannelMaxRetries",2,t),this.ra=So("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new zr(t&&t.concurrentRequestLimit),this.Ca=new eo,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Co(t){if(No(t),3==t.G){var e=t.V++,n=Sr(t.F);Rr(n,"SID",t.J),Rr(n,"RID",e),Rr(n,"TYPE","terminate"),Oo(t,n),(e=new sr(t,t.h,e,void 0)).K=2,e.v=Lr(Sr(n)),n=!1,ts.navigator&&ts.navigator.sendBeacon&&(n=ts.navigator.sendBeacon(e.v.toString(),"")),!n&&ts.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ko(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fr(e)}Ho(t)}function Ao(t){t.g&&(Uo(t),t.g.cancel(),t.g=null)}function No(t){Ao(t),t.u&&(ts.clearTimeout(t.u),t.u=null),Vo(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ts.clearTimeout(t.m),t.m=null)}function Ro(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&Lo(t)}function Lo(t){Wr(t.i)||t.m||(t.m=!0,Ti(t.Ha,t),t.C=0)}function Do(t,e){var n;n=e?e.m:t.V++;const s=Sr(t.F);Rr(s,"SID",t.J),Rr(s,"RID",n),Rr(s,"AID",t.U),Oo(t,s),t.o&&t.s&&_o(s,t.o,t.s),n=new sr(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Po(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Xr(t.i,n),cr(n,s,e)}function Oo(t,e){t.j&&wr({},(function(t,n){Rr(e,n,t)}))}function Po(t,e,n){n=Math.min(t.l.length,n);var s=t.j?cs(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let r=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),r=!1;else try{no(a,t,"req"+n+"_")}catch(t){s&&s(a)}}if(r){s=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,s}function xo(t){t.g||t.u||(t.Y=1,Ti(t.Ga,t),t.A=0)}function Mo(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=zi(cs(t.Ga,t),jo(t,t.A)),t.A++,0))}function Uo(t){null!=t.B&&(ts.clearTimeout(t.B),t.B=null)}function Fo(t){t.g=new sr(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Sr(t.oa);Rr(e,"RID","rpc"),Rr(e,"SID",t.J),Rr(e,"CI",t.N?"0":"1"),Rr(e,"AID",t.U),Oo(t,e),Rr(e,"TYPE","xmlhttp"),t.o&&t.s&&_o(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Lr(Sr(e)),n.s=null,n.U=!0,ur(n,t)}function Vo(t){null!=t.v&&(ts.clearTimeout(t.v),t.v=null)}function qo(t,e){var n=null;if(t.g==e){Vo(t),Uo(t),t.g=null;var s=2}else{if(!Qr(t.i,e))return;n=e.D,Yr(t.i,e),s=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;mi(s=qi(),new Ki(s,n,e,i)),Lo(t)}else xo(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==s&&function(t,e){return!(Jr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=zi(cs(t.Ha,t,e),jo(t,t.C)),t.C++,0)))}(t,e)||2==s&&Mo(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Bo(t,5);break;case 4:Bo(t,10);break;case 3:Bo(t,6);break;default:Bo(t,2)}}function jo(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Bo(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var s=cs(t.jb,t);n||(n=new _r("//www.google.com/images/cleardot.gif"),ts.location&&"http"==ts.location.protocol||kr(n,"https"),Lr(n)),function(t,e){const n=new Mi;if(ts.Image){const s=new Image;s.onload=us(so,n,s,"TestLoadImage: loaded",!0,e),s.onerror=us(so,n,s,"TestLoadImage: error",!1,e),s.onabort=us(so,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=us(so,n,s,"TestLoadImage: timeout",!1,e),ts.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=t}else e(!1)}(n.toString(),s)}else $i(2);t.G=0,t.j&&t.j.va(e),Ho(t),No(t)}function Ho(t){t.G=0,t.I=-1,t.j&&(0==Zr(t.i).length&&0==t.l.length||(t.i.i.length=0,gs(t.l),t.l.length=0),t.j.ua())}function $o(t,e,n){let s=function(t){return t instanceof _r?Sr(t):new _r(t,void 0)}(n);if(""!=s.i)e&&Cr(s,e+"."+s.i),Ar(s,s.m);else{const t=ts.location;s=function(t,e,n,s){var i=new _r(null,void 0);return t&&kr(i,t),e&&Cr(i,e),n&&Ar(i,n),s&&(i.l=s),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&_s(t.aa,(function(t,e){Rr(s,e,t)})),e=t.D,n=t.sa,e&&n&&Rr(s,e,n),Rr(s,"VER",t.ma),Oo(t,s),s}function Ko(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new ho(new io({ib:!0})):new ho(t.qa)).L=t.H,e}function zo(){}function Go(){if(Ds&&!(10<=Number($s)))throw Error("Environmental error: no available transport.")}function Wo(t,e){pi.call(this),this.g=new ko(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ys(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ys(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Xo(this)}function Jo(t){tr.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Qo(){er.call(this),this.status=1}function Xo(t){this.g=t}(Qn=ho.prototype).ea=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Yi.g(),this.C=this.u?Qi(this.u):Qi(Yi),this.g.onreadystatechange=cs(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void yo(this,t)}t=n||"";const i=new Er(this.headers);s&&wr(s,(function(t,e){i.set(e,t)})),s=function(t){t:{var e=go;const n=t.length,s="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in s&&e.call(void 0,s[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=ts.FormData&&t instanceof ts.FormData,!(0<=fs(mo,e))||s||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bo(this),0<this.B&&((this.K=function(t){return Ds&&Hs()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cs(this.pa,this)):this.A=Ni(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){yo(this,t)}},Qn.pa=function(){void 0!==Zn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mi(this,"timeout"),this.abort(8))},Qn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mi(this,"complete"),mi(this,"abort"),Eo(this))},Qn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eo(this,!0)),ho.Z.M.call(this)},Qn.Fa=function(){this.s||(this.F||this.v||this.l?wo(this):this.cb())},Qn.cb=function(){wo(this)},Qn.ba=function(){try{return 2<Io(this)?this.g.status:-1}catch(t){return-1}},Qn.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Qn.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),lo(e)}},Qn.Da=function(){return this.m},Qn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qn=ko.prototype).ma=8,Qn.G=1,Qn.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Qn.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new sr(this,this.h,t,void 0);let r=this.s;if(this.P&&(r?(r=Ss(r),Cs(r,this.P)):r=this.P),null===this.o&&(i.H=r),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var s=this.l[n];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Po(this,i,e),Rr(n=Sr(this.F),"RID",t),Rr(n,"CVER",22),this.D&&Rr(n,"X-HTTP-Session-Id",this.D),Oo(this,n),this.o&&r&&_o(n,this.o,r),Xr(this.i,i),this.Ra&&Rr(n,"TYPE","init"),this.ja?(Rr(n,"$req",e),Rr(n,"SID","null"),i.$=!0,cr(i,n,null)):cr(i,n,e),this.G=2}}else 3==this.G&&(t?Do(this,t):0==this.l.length||Wr(this.i)||Do(this))},Qn.Ga=function(){if(this.u=null,Fo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=zi(cs(this.bb,this),t)}},Qn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$i(10),Ao(this),Fo(this))},Qn.ab=function(){null!=this.v&&(this.v=null,Ao(this),Mo(this),$i(19))},Qn.jb=function(t){t?(this.h.info("Successfully pinged google.com"),$i(2)):(this.h.info("Failed to ping google.com"),$i(1))},(Qn=zo.prototype).xa=function(){},Qn.wa=function(){},Qn.va=function(){},Qn.ua=function(){},Qn.Oa=function(){},Go.prototype.g=function(t,e){return new Wo(t,e)},ls(Wo,pi),Wo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ti(cs(t.hb,t,e))),$i(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=$o(t,null,t.W),Lo(t)},Wo.prototype.close=function(){Co(this.g)},Wo.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Ro(this.g,e)}else this.v?((e={}).__data__=yi(t),Ro(this.g,e)):Ro(this.g,t)},Wo.prototype.M=function(){this.g.j=null,delete this.j,Co(this.g),delete this.g,Wo.Z.M.call(this)},ls(Jo,tr),ls(Qo,er),ls(Xo,zo),Xo.prototype.xa=function(){mi(this.g,"a")},Xo.prototype.wa=function(t){mi(this.g,new Jo(t))},Xo.prototype.va=function(t){mi(this.g,new Qo(t))},Xo.prototype.ua=function(){mi(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Wo.prototype.send=Wo.prototype.u,Wo.prototype.open=Wo.prototype.m,Wo.prototype.close=Wo.prototype.close,Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,Wi.COMPLETE="complete",Xi.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",pi.prototype.listen=pi.prototype.N,ho.prototype.listenOnce=ho.prototype.O,ho.prototype.getLastError=ho.prototype.La,ho.prototype.getLastErrorCode=ho.prototype.Da,ho.prototype.getStatus=ho.prototype.ba,ho.prototype.getResponseJson=ho.prototype.Qa,ho.prototype.getResponseText=ho.prototype.ga,ho.prototype.send=ho.prototype.ea;var Yo=Yn.createWebChannelTransport=function(){return new Go},Zo=Yn.getStatEventTarget=function(){return qi()},ta=Yn.ErrorCode=Gi,ea=Yn.EventType=Wi,na=Yn.Event=Fi,sa=Yn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ia=Yn.FetchXmlHttpFactory=io,ra=Yn.WebChannel=Xi,oa=Yn.XhrIo=ho;n(155);const aa="@firebase/firestore";class ca{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ca.UNAUTHENTICATED=new ca(null),ca.GOOGLE_CREDENTIALS=new ca("google-credentials-uid"),ca.FIRST_PARTY=new ca("first-party-uid"),ca.MOCK_USER=new ca("mock-user");let ua="9.6.2";const la=new L("@firebase/firestore");function ha(){return la.logLevel}function da(t,...e){if(la.logLevel<=S.DEBUG){const n=e.map(ma);la.debug(`Firestore (${ua}): ${t}`,...n)}}function fa(t,...e){if(la.logLevel<=S.ERROR){const n=e.map(ma);la.error(`Firestore (${ua}): ${t}`,...n)}}function pa(t,...e){if(la.logLevel<=S.WARN){const n=e.map(ma);la.warn(`Firestore (${ua}): ${t}`,...n)}}function ma(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function ga(t="Unexpected state"){const e=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: `+t;throw fa(e),new Error(e)}function ya(t,e){t||ga()}function va(t,e){return t}const wa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ea extends u{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ba{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Ia{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ta{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ca.UNAUTHENTICATED)))}shutdown(){}}class _a{constructor(t){this.t=t,this.currentUser=ca.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const s=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ba,t.enqueueRetryable((()=>s(this.currentUser)))};const r=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await s(this.currentUser)}))},o=t=>{da("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(da("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ba)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(da("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ya("string"==typeof e.accessToken),new Ia(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ya(null===t||"string"==typeof t),new ca(t)}}class Sa{constructor(t,e,n){this.type="FirstParty",this.user=ca.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const s=t.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class ka{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Sa(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(ca.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ca{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Aa{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,e){this.o=n=>{t.enqueueRetryable((()=>(t=>(null!=t.error&&da("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`),e(t.token)))(n)))};const n=t=>{da("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>n(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?n(t):da("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(ya("string"==typeof t.token),new Ca(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Na{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.p(t),this.T=t=>e.writeSequenceNumber(t))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function Ra(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}Na.I=-1;class La{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const s=Ra(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<e&&(n+=t.charAt(s[i]%t.length))}return n}}function Da(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n){return t.length===e.length&&t.every(((t,s)=>n(t,e[s])))}class Pa{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ea(wa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ea(wa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ea(wa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ea(wa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Pa.fromMillis(Date.now())}static fromDate(t){return Pa.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Pa(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Da(this.nanoseconds,t.nanoseconds):Da(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xa{constructor(t){this.timestamp=t}static fromTimestamp(t){return new xa(t)}static min(){return new xa(new Pa(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ma(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ua(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fa(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Va{constructor(t,e,n){void 0===e?e=0:e>t.length&&ga(),void 0===n?n=t.length-e:n>t.length-e&&ga(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Va.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Va?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const n=t.get(s),i=e.get(s);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class qa extends Va{construct(t,e,n){return new qa(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ea(wa.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new qa(e)}static emptyPath(){return new qa([])}}const ja=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ba extends Va{construct(t,e,n){return new Ba(t,e,n)}static isValidIdentifier(t){return ja.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ba.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ba(["__name__"])}static fromServerFormat(t){const e=[];let n="",s=0;const i=()=>{if(0===n.length)throw new Ea(wa.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;s<t.length;){const e=t[s];if("\\"===e){if(s+1===t.length)throw new Ea(wa.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[s+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ea(wa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,s+=2}else"`"===e?(r=!r,s++):"."!==e||r?(n+=e,s++):(i(),s++)}if(i(),r)throw new Ea(wa.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ba(e)}static emptyPath(){return new Ba([])}}class Ha{constructor(t){this.fields=t,t.sort(Ba.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Oa(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class $a{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new $a(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new $a(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Da(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$a.EMPTY_BYTE_STRING=new $a("");const Ka=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(t){if(ya(!!t),"string"==typeof t){let e=0;const n=Ka.exec(t);if(ya(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ga(t.seconds),nanos:Ga(t.nanos)}}function Ga(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wa(t){return"string"==typeof t?$a.fromBase64String(t):$a.fromUint8Array(t)}function Ja(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qa(t){const e=t.mapValue.fields.__previous_value__;return Ja(e)?Qa(e):e}function Xa(t){const e=za(t.mapValue.fields.__local_write_time__.timestampValue);return new Pa(e.seconds,e.nanos)}function Ya(t){return null==t}function Za(t){return 0===t&&1/t==-1/0}class tc{constructor(t){this.path=t}static fromPath(t){return new tc(qa.fromString(t))}static fromName(t){return new tc(qa.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===qa.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return qa.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new tc(new qa(t.slice()))}}function ec(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ja(t)?4:10:ga()}function nc(t,e){if(t===e)return!0;const n=ec(t);if(n!==ec(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xa(t).isEqual(Xa(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=za(t.timestampValue),s=za(e.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Wa(t.bytesValue).isEqual(Wa(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ga(t.geoPointValue.latitude)===Ga(e.geoPointValue.latitude)&&Ga(t.geoPointValue.longitude)===Ga(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ga(t.integerValue)===Ga(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ga(t.doubleValue),s=Ga(e.doubleValue);return n===s?Za(n)===Za(s):isNaN(n)&&isNaN(s)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],nc);case 10:return function(t,e){const n=t.mapValue.fields||{},s=e.mapValue.fields||{};if(Ma(n)!==Ma(s))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===s[t]||!nc(n[t],s[t])))return!1;return!0}(t,e);default:return ga()}}function sc(t,e){return void 0!==(t.values||[]).find((t=>nc(t,e)))}function ic(t,e){if(t===e)return 0;const n=ec(t),s=ec(e);if(n!==s)return Da(n,s);switch(n){case 0:return 0;case 1:return Da(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ga(t.integerValue||t.doubleValue),s=Ga(e.integerValue||e.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(t,e);case 3:return rc(t.timestampValue,e.timestampValue);case 4:return rc(Xa(t),Xa(e));case 5:return Da(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Wa(t),s=Wa(e);return n.compareTo(s)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),s=e.split("/");for(let t=0;t<n.length&&t<s.length;t++){const e=Da(n[t],s[t]);if(0!==e)return e}return Da(n.length,s.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Da(Ga(t.latitude),Ga(e.latitude));return 0!==n?n:Da(Ga(t.longitude),Ga(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],s=e.values||[];for(let t=0;t<n.length&&t<s.length;++t){const e=ic(n[t],s[t]);if(e)return e}return Da(n.length,s.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},s=Object.keys(n),i=e.fields||{},r=Object.keys(i);s.sort(),r.sort();for(let t=0;t<s.length&&t<r.length;++t){const e=Da(s[t],r[t]);if(0!==e)return e;const o=ic(n[s[t]],i[r[t]]);if(0!==o)return o}return Da(s.length,r.length)}(t.mapValue,e.mapValue);default:throw ga()}}function rc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Da(t,e);const n=za(t),s=za(e),i=Da(n.seconds,s.seconds);return 0!==i?i:Da(n.nanos,s.nanos)}function oc(t){return ac(t)}function ac(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=za(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Wa(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,tc.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const s of t.values||[])n?n=!1:e+=",",e+=ac(s);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",s=!0;for(const i of e)s?s=!1:n+=",",n+=`${i}:${ac(t.fields[i])}`;return n+"}"}(t.mapValue):ga();var e,n}function cc(t){return!!t&&"integerValue"in t}function uc(t){return!!t&&"arrayValue"in t}function lc(t){return!!t&&"nullValue"in t}function hc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dc(t){return!!t&&"mapValue"in t}function fc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ua(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=fc(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(t.arrayValue.values[n]);return e}return Object.assign({},t)}class pc{constructor(t){this.value=t}static empty(){return new pc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!dc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=fc(e)}setAll(t){let e=Ba.emptyPath(),n={},s=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,s),n={},s=[],e=i.popLast()}t?n[i.lastSegment()]=fc(t):s.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,s)}delete(t){const e=this.field(t.popLast());dc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return nc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];dc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){Ua(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new pc(fc(this.value))}}function mc(t){const e=[];return Ua(t.fields,((t,n)=>{const s=new Ba([t]);if(dc(n)){const t=mc(n.mapValue).fields;if(0===t.length)e.push(s);else for(const n of t)e.push(s.child(n))}else e.push(s)})),new Ha(e)}class gc{constructor(t,e,n,s,i){this.key=t,this.documentType=e,this.version=n,this.data=s,this.documentState=i}static newInvalidDocument(t){return new gc(t,0,xa.min(),pc.empty(),0)}static newFoundDocument(t,e,n){return new gc(t,1,e,n,0)}static newNoDocument(t,e){return new gc(t,2,e,pc.empty(),0)}static newUnknownDocument(t,e){return new gc(t,3,e,pc.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof gc&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gc(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yc{constructor(t,e=null,n=[],s=[],i=null,r=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=r,this.endAt=o,this.R=null}}function vc(t,e=null,n=[],s=[],i=null,r=null,o=null){return new yc(t,e,n,s,i,r,o)}function wc(t){const e=va(t);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+oc(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Ya(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Dc(e.startAt)),e.endAt&&(t+="|ub:",t+=Dc(e.endAt)),e.R=t}return e.R}function Ec(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],s=e.filters[i],n.op!==s.op||!n.field.isEqual(s.field)||!nc(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mc(t.startAt,e.startAt)&&Mc(t.endAt,e.endAt)}function bc(t){return tc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ic extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,n):new Tc(t,e,n):"array-contains"===e?new Cc(t,n):"in"===e?new Ac(t,n):"not-in"===e?new Nc(t,n):"array-contains-any"===e?new Rc(t,n):new Ic(t,e,n)}static P(t,e,n){return"in"===e?new _c(t,n):new Sc(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(ic(e,this.value)):null!==e&&ec(this.value)===ec(e)&&this.v(ic(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ga()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Tc extends Ic{constructor(t,e,n){super(t,e,n),this.key=tc.fromName(n.referenceValue)}matches(t){const e=tc.comparator(t.key,this.key);return this.v(e)}}class _c extends Ic{constructor(t,e){super(t,"in",e),this.keys=kc(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Sc extends Ic{constructor(t,e){super(t,"not-in",e),this.keys=kc(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function kc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>tc.fromName(t.referenceValue)))}class Cc extends Ic{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return uc(e)&&sc(e.arrayValue,this.value)}}class Ac extends Ic{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&sc(this.value.arrayValue,e)}}class Nc extends Ic{constructor(t,e){super(t,"not-in",e)}matches(t){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!sc(this.value.arrayValue,e)}}class Rc extends Ic{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!uc(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>sc(this.value.arrayValue,t)))}}class Lc{constructor(t,e){this.position=t,this.before=e}}function Dc(t){return`${t.before?"b":"a"}:${t.position.map((t=>oc(t))).join(",")}`}class Oc{constructor(t,e="asc"){this.field=t,this.dir=e}}function Pc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function xc(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(s=r.field.isKeyField()?tc.comparator(tc.fromName(o.referenceValue),n.key):ic(o,n.data.field(r.field)),"desc"===r.dir&&(s*=-1),0!==s)break}return t.before?s<=0:s<0}function Mc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nc(t.position[n],e.position[n]))return!1;return!0}class Uc{constructor(t,e=null,n=[],s=[],i=null,r="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=r,this.startAt=o,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function Fc(t){return new Uc(t)}function Vc(t){return!Ya(t.limit)&&"F"===t.limitType}function qc(t){return!Ya(t.limit)&&"L"===t.limitType}function jc(t){const e=va(t);if(null===e.S){e.S=[];const t=function(t){for(const e of t.filters)if(e.V())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.S.push(new Oc(t)),e.S.push(new Oc(Ba.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.S.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Oc(Ba.keyField(),t))}}}return e.S}function Bc(t){const e=va(t);if(!e.D)if("F"===e.limitType)e.D=vc(e.path,e.collectionGroup,jc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of jc(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Oc(n.field,e))}const n=e.endAt?new Lc(e.endAt.position,!e.endAt.before):null,s=e.startAt?new Lc(e.startAt.position,!e.startAt.before):null;e.D=vc(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}return e.D}function Hc(t,e){return Ec(Bc(t),Bc(e))&&t.limitType===e.limitType}function $c(t){return`${wc(Bc(t))}|lt:${t.limitType}`}function Kc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${oc(e.value)}`;var e})).join(", ")}]`),Ya(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+Dc(t.startAt)),t.endAt&&(e+=", endAt: "+Dc(t.endAt)),`Target(${e})`}(Bc(t))}; limitType=${t.limitType})`}function zc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):tc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!xc(t.startAt,jc(t),e)||t.endAt&&xc(t.endAt,jc(t),e))}(t,e)}function Gc(t){return(e,n)=>{let s=!1;for(const i of jc(t)){const t=Wc(i,e,n);if(0!==t)return t;s=s||i.field.isKeyField()}return 0}}function Wc(t,e,n){const s=t.field.isKeyField()?tc.comparator(e.key,n.key):function(t,e,n){const s=e.data.field(t),i=n.data.field(t);return null!==s&&null!==i?ic(s,i):ga()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ga()}}function Jc(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Za(e)?"-0":e}}function Qc(t){return{integerValue:""+t}}function Xc(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Za(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Qc(e):Jc(t,e)}class Yc{constructor(){this._=void 0}}function Zc(t,e,n){return t instanceof nu?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof su?iu(t,e):t instanceof ru?ou(t,e):function(t,e){const n=eu(t,e),s=cu(n)+cu(t.N);return cc(n)&&cc(t.N)?Qc(s):Jc(t.k,s)}(t,e)}function tu(t,e,n){return t instanceof su?iu(t,e):t instanceof ru?ou(t,e):n}function eu(t,e){return t instanceof au?cc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class nu extends Yc{}class su extends Yc{constructor(t){super(),this.elements=t}}function iu(t,e){const n=uu(e);for(const e of t.elements)n.some((t=>nc(t,e)))||n.push(e);return{arrayValue:{values:n}}}class ru extends Yc{constructor(t){super(),this.elements=t}}function ou(t,e){let n=uu(e);for(const e of t.elements)n=n.filter((t=>!nc(t,e)));return{arrayValue:{values:n}}}class au extends Yc{constructor(t,e){super(),this.k=t,this.N=e}}function cu(t){return Ga(t.integerValue||t.doubleValue)}function uu(t){return uc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class lu{constructor(t,e){this.version=t,this.transformResults=e}}class hu{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new hu}static exists(t){return new hu(void 0,t)}static updateTime(t){return new hu(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function du(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class fu{}function pu(t,e,n){t instanceof wu?function(t,e,n){const s=t.value.clone(),i=Iu(t.fieldTransforms,e,n.transformResults);s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):t instanceof Eu?function(t,e,n){if(!du(t.precondition,e))return void e.convertToUnknownDocument(n.version);const s=Iu(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(bu(t)),i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n){t instanceof wu?function(t,e,n){if(!du(t.precondition,e))return;const s=t.value.clone(),i=Tu(t.fieldTransforms,n,e);s.setAll(i),e.convertToFoundDocument(vu(e),s).setHasLocalMutations()}(t,e,n):t instanceof Eu?function(t,e,n){if(!du(t.precondition,e))return;const s=Tu(t.fieldTransforms,n,e),i=e.data;i.setAll(bu(t)),i.setAll(s),e.convertToFoundDocument(vu(e),i).setHasLocalMutations()}(t,e,n):function(t,e){du(t.precondition,e)&&e.convertToNoDocument(xa.min())}(t,e)}function gu(t,e){let n=null;for(const s of t.fieldTransforms){const t=e.data.field(s.field),i=eu(s.transform,t||null);null!=i&&(null==n&&(n=pc.empty()),n.set(s.field,i))}return n||null}function yu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Oa(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof su&&e instanceof su||t instanceof ru&&e instanceof ru?Oa(t.elements,e.elements,nc):t instanceof au&&e instanceof au?nc(t.N,e.N):t instanceof nu&&e instanceof nu}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function vu(t){return t.isFoundDocument()?t.version:xa.min()}class wu extends fu{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}}class Eu extends fu{constructor(t,e,n,s,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}}function bu(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Iu(t,e,n){const s=new Map;ya(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,tu(o,a,n[i]))}return s}function Tu(t,e,n){const s=new Map;for(const i of t){const t=i.transform,r=n.data.field(i.field);s.set(i.field,Zc(t,r,e))}return s}class _u extends fu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Su extends fu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class ku{constructor(t){this.count=t}}var Cu,Au;function Nu(t){if(void 0===t)return fa("GRPC error has no .code"),wa.UNKNOWN;switch(t){case Cu.OK:return wa.OK;case Cu.CANCELLED:return wa.CANCELLED;case Cu.UNKNOWN:return wa.UNKNOWN;case Cu.DEADLINE_EXCEEDED:return wa.DEADLINE_EXCEEDED;case Cu.RESOURCE_EXHAUSTED:return wa.RESOURCE_EXHAUSTED;case Cu.INTERNAL:return wa.INTERNAL;case Cu.UNAVAILABLE:return wa.UNAVAILABLE;case Cu.UNAUTHENTICATED:return wa.UNAUTHENTICATED;case Cu.INVALID_ARGUMENT:return wa.INVALID_ARGUMENT;case Cu.NOT_FOUND:return wa.NOT_FOUND;case Cu.ALREADY_EXISTS:return wa.ALREADY_EXISTS;case Cu.PERMISSION_DENIED:return wa.PERMISSION_DENIED;case Cu.FAILED_PRECONDITION:return wa.FAILED_PRECONDITION;case Cu.ABORTED:return wa.ABORTED;case Cu.OUT_OF_RANGE:return wa.OUT_OF_RANGE;case Cu.UNIMPLEMENTED:return wa.UNIMPLEMENTED;case Cu.DATA_LOSS:return wa.DATA_LOSS;default:return ga()}}(Au=Cu||(Cu={}))[Au.OK=0]="OK",Au[Au.CANCELLED=1]="CANCELLED",Au[Au.UNKNOWN=2]="UNKNOWN",Au[Au.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Au[Au.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Au[Au.NOT_FOUND=5]="NOT_FOUND",Au[Au.ALREADY_EXISTS=6]="ALREADY_EXISTS",Au[Au.PERMISSION_DENIED=7]="PERMISSION_DENIED",Au[Au.UNAUTHENTICATED=16]="UNAUTHENTICATED",Au[Au.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Au[Au.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Au[Au.ABORTED=10]="ABORTED",Au[Au.OUT_OF_RANGE=11]="OUT_OF_RANGE",Au[Au.UNIMPLEMENTED=12]="UNIMPLEMENTED",Au[Au.INTERNAL=13]="INTERNAL",Au[Au.UNAVAILABLE=14]="UNAVAILABLE",Au[Au.DATA_LOSS=15]="DATA_LOSS";class Ru{constructor(t,e){this.comparator=t,this.root=e||Du.EMPTY}insert(t,e){return new Ru(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Du.BLACK,null,null))}remove(t){return new Ru(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Du.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(0===s)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Lu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Lu(this.root,t,this.comparator,!1)}getReverseIterator(){return new Lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Lu(this.root,t,this.comparator,!0)}}class Lu{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Du{constructor(t,e,n,s,i){this.key=t,this.value=e,this.color=null!=n?n:Du.RED,this.left=null!=s?s:Du.EMPTY,this.right=null!=i?i:Du.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,i){return new Du(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const i=n(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,e,n),null):0===i?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Du.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===e(t,s.key)){if(s.right.isEmpty())return Du.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Du.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Du.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ga();if(this.right.isRed())throw ga();const t=this.left.check();if(t!==this.right.check())throw ga();return t+(this.isRed()?0:1)}}Du.EMPTY=null,Du.RED=!0,Du.BLACK=!1,Du.EMPTY=new class{constructor(){this.size=0}get key(){throw ga()}get value(){throw ga()}get color(){throw ga()}get left(){throw ga()}get right(){throw ga()}copy(t,e,n,s,i){return this}insert(t,e,n){return new Du(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ou{constructor(t){this.comparator=t,this.data=new Ru(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Pu(this.data.getIterator())}getIteratorFrom(t){return new Pu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ou))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(0!==this.comparator(t,s))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ou(this.comparator);return e.data=t,e}}class Pu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const xu=new Ru(tc.comparator);function Mu(){return xu}const Uu=new Ru(tc.comparator);function Fu(){return Uu}const Vu=new Ru(tc.comparator);const qu=new Ou(tc.comparator);function ju(...t){let e=qu;for(const n of t)e=e.add(n);return e}const Bu=new Ou(Da);function Hu(){return Bu}class $u{constructor(t,e,n,s,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,Ku.createSynthesizedTargetChangeForCurrentChange(t,e)),new $u(xa.min(),n,Hu(),Mu(),ju())}}class Ku{constructor(t,e,n,s,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Ku($a.EMPTY_BYTE_STRING,e,ju(),ju(),ju())}}class zu{constructor(t,e,n,s){this.$=t,this.removedTargetIds=e,this.key=n,this.O=s}}class Gu{constructor(t,e){this.targetId=t,this.F=e}}class Wu{constructor(t,e,n=$a.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class Ju{constructor(){this.M=0,this.L=Yu(),this.B=$a.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=ju(),e=ju(),n=ju();return this.L.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:ga()}})),new Ku(this.B,this.U,t,e,n)}H(){this.q=!1,this.L=Yu()}J(t,e){this.q=!0,this.L=this.L.insert(t,e)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Qu{constructor(t){this.et=t,this.nt=new Map,this.st=Mu(),this.it=Xu(),this.rt=new Ou(Da)}ot(t){for(const e of t.$)t.O&&t.O.isFoundDocument()?this.at(e,t.O):this.ct(e,t.key,t.O);for(const e of t.removedTargetIds)this.ct(e,t.key,t.O)}ut(t){this.forEachTarget(t,(e=>{const n=this.ht(e);switch(t.state){case 0:this.lt(e)&&n.W(t.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(t.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(e);break;case 3:this.lt(e)&&(n.tt(),n.W(t.resumeToken));break;case 4:this.lt(e)&&(this.ft(e),n.W(t.resumeToken));break;default:ga()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach(((t,n)=>{this.lt(n)&&e(n)}))}dt(t){const e=t.targetId,n=t.F.count,s=this.wt(e);if(s){const t=s.target;if(bc(t))if(0===n){const n=new tc(t.path);this.ct(e,n,gc.newNoDocument(n,xa.min()))}else ya(1===n);else this._t(e)!==n&&(this.ft(e),this.rt=this.rt.add(e))}}gt(t){const e=new Map;this.nt.forEach(((n,s)=>{const i=this.wt(s);if(i){if(n.current&&bc(i.target)){const e=new tc(i.target.path);null!==this.st.get(e)||this.yt(s,e)||this.ct(s,e,gc.newNoDocument(e,t))}n.j&&(e.set(s,n.G()),n.H())}}));let n=ju();this.it.forEach(((t,e)=>{let s=!0;e.forEachWhile((t=>{const e=this.wt(t);return!e||2===e.purpose||(s=!1,!1)})),s&&(n=n.add(t))}));const s=new $u(t,e,this.rt,this.st,n);return this.st=Mu(),this.it=Xu(),this.rt=new Ou(Da),s}at(t,e){if(!this.lt(t))return;const n=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,n),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,n){if(!this.lt(t))return;const s=this.ht(t);this.yt(t,e)?s.J(e,1):s.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),n&&(this.st=this.st.insert(e,n))}removeTarget(t){this.nt.delete(t)}_t(t){const e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let e=this.nt.get(t);return e||(e=new Ju,this.nt.set(t,e)),e}Tt(t){let e=this.it.get(t);return e||(e=new Ou(Da),this.it=this.it.insert(t,e)),e}lt(t){const e=null!==this.wt(t);return e||da("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new Ju),this.et.getRemoteKeysForTarget(t).forEach((e=>{this.ct(t,e,null)}))}yt(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}function Xu(){return new Ru(tc.comparator)}function Yu(){return new Ru(tc.comparator)}const Zu={asc:"ASCENDING",desc:"DESCENDING"},tl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class el{constructor(t,e){this.databaseId=t,this.C=e}}function nl(t,e){return t.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sl(t,e){return t.C?e.toBase64():e.toUint8Array()}function il(t,e){return nl(t,e.toTimestamp())}function rl(t){return ya(!!t),xa.fromTimestamp(function(t){const e=za(t);return new Pa(e.seconds,e.nanos)}(t))}function ol(t,e){return function(t){return new qa(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function al(t){const e=qa.fromString(t);return ya(Cl(e)),e}function cl(t,e){return ol(t.databaseId,e.path)}function ul(t,e){const n=al(e);if(n.get(1)!==t.databaseId.projectId)throw new Ea(wa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ea(wa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tc(dl(n))}function ll(t,e){return ol(t.databaseId,e)}function hl(t){return new qa(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dl(t){return ya(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function fl(t,e,n){return{name:cl(t,e),fields:n.value.mapValue.fields}}function pl(t,e){return{documents:[ll(t,e.path)]}}function ml(t,e){const n={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(n.parent=ll(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ll(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(hc(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NAN"}};if(lc(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(hc(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NAN"}};if(lc(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Il(t.field),op:bl(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const r=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Il(t.field),direction:El(t.dir)}}(t)))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(t,e){return t.C||Ya(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=vl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=vl(e.endAt)),n}function gl(t){let e=function(t){const e=al(t);return 4===e.length?qa.emptyPath():dl(e)}(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){ya(1===s);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=yl(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Oc(Tl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Ya(e)?null:e}(n.limit));let c=null;n.startAt&&(c=wl(n.startAt));let u=null;return n.endAt&&(u=wl(n.endAt)),function(t,e,n,s,i,r,o,a){return new Uc(t,e,n,s,i,r,o,a)}(e,i,o,r,a,"F",c,u)}function yl(t){return t?void 0!==t.unaryFilter?[Sl(t)]:void 0!==t.fieldFilter?[_l(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>yl(t))).reduce(((t,e)=>t.concat(e))):ga():[]}function vl(t){return{before:t.before,values:t.position}}function wl(t){const e=!!t.before,n=t.values||[];return new Lc(n,e)}function El(t){return Zu[t]}function bl(t){return tl[t]}function Il(t){return{fieldPath:t.canonicalString()}}function Tl(t){return Ba.fromServerFormat(t.fieldPath)}function _l(t){return Ic.create(Tl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ga()}}(t.fieldFilter.op),t.fieldFilter.value)}function Sl(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Tl(t.unaryFilter.field);return Ic.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Tl(t.unaryFilter.field);return Ic.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tl(t.unaryFilter.field);return Ic.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Tl(t.unaryFilter.field);return Ic.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ga()}}function kl(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Cl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Al(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rl(e)),e=Nl(t.get(n),e);return Rl(e)}function Nl(t,e){let n=e;const s=t.length;for(let e=0;e<s;e++){const s=t.charAt(e);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Rl(t){return t+""}class Ll{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}Ll.store="owner",Ll.key="owner";class Dl{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}Dl.store="mutationQueues",Dl.keyPath="userId";class Ol{constructor(t,e,n,s,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=s,this.mutations=i}}Ol.store="mutations",Ol.keyPath="batchId",Ol.userMutationsIndex="userMutationsIndex",Ol.userMutationsKeyPath=["userId","batchId"];class Pl{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,Al(e)]}static key(t,e,n){return[t,Al(e),n]}}Pl.store="documentMutations",Pl.PLACEHOLDER=new Pl;class xl{constructor(t,e,n,s,i,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=s,this.readTime=i,this.parentPath=r}}xl.store="remoteDocuments",xl.readTimeIndex="readTimeIndex",xl.readTimeIndexPath="readTime",xl.collectionReadTimeIndex="collectionReadTimeIndex",xl.collectionReadTimeIndexPath=["parentPath","readTime"];class Ml{constructor(t){this.byteSize=t}}Ml.store="remoteDocumentGlobal",Ml.key="remoteDocumentGlobalKey";class Ul{constructor(t,e,n,s,i,r,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=s,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=r,this.query=o}}Ul.store="targets",Ul.keyPath="targetId",Ul.queryTargetsIndexName="queryTargetsIndex",Ul.queryTargetsKeyPath=["canonicalId","targetId"];class Fl{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Fl.store="targetDocuments",Fl.keyPath=["targetId","path"],Fl.documentTargetsIndex="documentTargetsIndex",Fl.documentTargetsKeyPath=["path","targetId"];class Vl{constructor(t,e,n,s){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=s}}Vl.key="targetGlobalKey",Vl.store="targetGlobal";class ql{constructor(t,e){this.collectionId=t,this.parent=e}}ql.store="collectionParents",ql.keyPath=["collectionId","parent"];class jl{constructor(t,e,n,s){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=s}}jl.store="clientMetadata",jl.keyPath="clientId";class Bl{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}Bl.store="bundles",Bl.keyPath="bundleId";class Hl{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}Hl.store="namedQueries",Hl.keyPath="name",Dl.store,Ol.store,Pl.store,xl.store,Ul.store,Ll.store,Vl.store,Fl.store,jl.store,Ml.store,ql.store,Bl.store,Hl.store;class $l{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ga(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $l(((n,s)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,s)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof $l?e:$l.resolve(e)}catch(t){return $l.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):$l.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):$l.reject(e)}static resolve(t){return new $l(((e,n)=>{e(t)}))}static reject(t){return new $l(((e,n)=>{n(t)}))}static waitFor(t){return new $l(((e,n)=>{let s=0,i=0,r=!1;t.forEach((t=>{++s,t.next((()=>{++i,r&&i===s&&e()}),(t=>n(t)))})),r=!0,i===s&&e()}))}static or(t){let e=$l.resolve(!1);for(const n of t)e=e.next((t=>t?$l.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,s)=>{n.push(e.call(this,t,s))})),this.waitFor(n)}}function Kl(t){return"IndexedDbTransactionError"===t.name}class zl{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const s=this.mutations[e];s.key.isEqual(t.key)&&pu(s,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&mu(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&mu(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),s=n;this.applyToLocalView(s),n.isValidDocument()||s.convertToNoDocument(xa.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ju())}isEqual(t){return this.batchId===t.batchId&&Oa(this.mutations,t.mutations,((t,e)=>yu(t,e)))&&Oa(this.baseMutations,t.baseMutations,((t,e)=>yu(t,e)))}}class Gl{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){ya(t.mutations.length===n.length);let s=Vu;const i=t.mutations;for(let t=0;t<i.length;t++)s=s.insert(i[t].key,n[t].version);return new Gl(t,e,n,s)}}class Wl{constructor(t,e,n,s,i=xa.min(),r=xa.min(),o=$a.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(t){return new Wl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Jl{constructor(t){this.Gt=t}}function Ql(t){const e=gl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new Uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class Xl{constructor(){this.zt=new Yl}addToCollectionParentIndex(t,e){return this.zt.add(e),$l.resolve()}getCollectionParents(t,e){return $l.resolve(this.zt.getEntries(e))}}class Yl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new Ou(qa.comparator),i=!s.has(n);return this.index[e]=s.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new Ou(qa.comparator)).toArray()}}class Zl{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Zl(t,Zl.DEFAULT_COLLECTION_PERCENTILE,Zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Zl.DEFAULT_COLLECTION_PERCENTILE=10,Zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zl.DEFAULT=new Zl(41943040,Zl.DEFAULT_COLLECTION_PERCENTILE,Zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zl.DISABLED=new Zl(-1,0,0);class th{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new th(0)}static re(){return new th(-1)}}async function eh(t){if(t.code!==wa.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;da("LocalStore","Unexpectedly lost primary lease")}class nh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,s]of n)if(this.equalsFn(e,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(void 0!==s){for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],t))return void(s[n]=[t,e]);s.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return 1===n.length?delete this.inner[e]:n.splice(s,1),!0;return!1}forEach(t){Ua(this.inner,((e,n)=>{for(const[e,s]of n)t(e,s)}))}isEmpty(){return Fa(this.inner)}}class sh{constructor(t,e,n){this.Je=t,this.An=e,this.Jt=n}Rn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.bn(t,e,n)))}bn(t,e,n){return this.Je.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}Pn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}vn(t,e){return this.Je.getEntries(t,e).next((e=>this.Vn(t,e).next((()=>e))))}Vn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.Pn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return tc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Sn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Dn(t,e,n):this.Cn(t,e,n)}Sn(t,e){return this.Rn(t,new tc(e)).next((t=>{let e=Fu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Dn(t,e,n){const s=e.collectionGroup;let i=Fu();return this.Jt.getCollectionParents(t,s).next((r=>$l.forEach(r,(r=>{const o=function(t,e){return new Uc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,r.child(s));return this.Cn(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}Cn(t,e,n){let s,i;return this.Je.getDocumentsMatchingQuery(t,e,n).next((n=>(s=n,this.An.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(i=e,this.Nn(t,i,s).next((t=>{s=t;for(const t of i)for(const e of t.mutations){const n=e.key;let i=s.get(n);null==i&&(i=gc.newInvalidDocument(n),s=s.insert(n,i)),mu(e,i,t.localWriteTime),i.isFoundDocument()||(s=s.remove(n))}}))))).next((()=>(s.forEach(((t,n)=>{zc(e,n)||(s=s.remove(t))})),s)))}Nn(t,e,n){let s=ju();for(const t of e)for(const e of t.mutations)e instanceof Eu&&null===n.get(e.key)&&(s=s.add(e.key));let i=n;return this.Je.getEntries(t,s).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))})),i)))}}class ih{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.kn=n,this.xn=s}static $n(t,e){let n=ju(),s=ju();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:s=s.add(t.doc.key)}return new ih(t,e.fromCache,n,s)}}class rh{On(t){this.Fn=t}getDocumentsMatchingQuery(t,e,n,s){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(xa.min())?this.Mn(t,e):this.Fn.vn(t,s).next((i=>{const r=this.Ln(e,i);return(Vc(e)||qc(e))&&this.Bn(e.limitType,r,s,n)?this.Mn(t,e):(ha()<=S.DEBUG&&da("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Kc(e)),this.Fn.getDocumentsMatchingQuery(t,e,n).next((t=>(r.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Ln(t,e){let n=new Ou(Gc(t));return e.forEach(((e,s)=>{zc(t,s)&&(n=n.add(s))})),n}Bn(t,e,n,s){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Mn(t,e){return ha()<=S.DEBUG&&da("QueryEngine","Using full collection scan to execute query:",Kc(e)),this.Fn.getDocumentsMatchingQuery(t,e,xa.min())}}class oh{constructor(t,e,n,s){this.persistence=t,this.Un=e,this.k=s,this.qn=new Ru(Da),this.Kn=new nh((t=>wc(t)),Ec),this.jn=xa.min(),this.An=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new sh(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.qn)))}}async function ah(t,e){const n=va(t);let s=n.An,i=n.Wn;const r=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.An.getAllMutationBatches(t).next((o=>(r=o,s=n.persistence.getMutationQueue(e),i=new sh(n.Qn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(t)))).next((e=>{const n=[],s=[];let o=ju();for(const t of r){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.vn(t,o).next((t=>({Gn:t,removedBatchIds:n,addedBatchIds:s})))}))}));return n.An=s,n.Wn=i,n.Un.On(n.Wn),r}function ch(t){const e=va(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.He.getLastRemoteSnapshotVersion(t)))}function uh(t,e){const n=va(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.An.getNextMutationBatchAfterBatchId(t,e))))}async function lh(t,e,n){const s=va(t),i=s.qn.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(t=>s.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!Kl(t))throw t;da("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}s.qn=s.qn.remove(e),s.Kn.delete(i.target)}function hh(t,e,n){const s=va(t);let i=xa.min(),r=ju();return s.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const s=va(t),i=s.Kn.get(n);return void 0!==i?$l.resolve(s.qn.get(i)):s.He.getTargetData(e,n)}(s,t,Bc(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>s.Un.getDocumentsMatchingQuery(t,e,n?i:xa.min(),n?r:ju()))).next((t=>({documents:t,zn:r})))))}class dh{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,e){return $l.resolve(this.Xn.get(e))}saveBundleMetadata(t,e){var n;return this.Xn.set(e.id,{id:(n=e).id,version:n.version,createTime:rl(n.createTime)}),$l.resolve()}getNamedQuery(t,e){return $l.resolve(this.Zn.get(e))}saveNamedQuery(t,e){return this.Zn.set(e.name,function(t){return{name:t.name,query:Ql(t.bundledQuery),readTime:rl(t.readTime)}}(e)),$l.resolve()}}class fh{constructor(){this.ts=new Ou(ph.es),this.ns=new Ou(ph.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,e){const n=new ph(t,e);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.os(new ph(t,e))}cs(t,e){t.forEach((t=>this.removeReference(t,e)))}us(t){const e=new tc(new qa([])),n=new ph(e,t),s=new ph(e,t+1),i=[];return this.ns.forEachInRange([n,s],(t=>{this.os(t),i.push(t.key)})),i}hs(){this.ts.forEach((t=>this.os(t)))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const e=new tc(new qa([])),n=new ph(e,t),s=new ph(e,t+1);let i=ju();return this.ns.forEachInRange([n,s],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new ph(t,0),n=this.ts.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class ph{constructor(t,e){this.key=t,this.fs=e}static es(t,e){return tc.comparator(t.key,e.key)||Da(t.fs,e.fs)}static ss(t,e){return Da(t.fs,e.fs)||tc.comparator(t.key,e.key)}}class mh{constructor(t,e){this.Jt=t,this.referenceDelegate=e,this.An=[],this.ds=1,this.ws=new Ou(ph.es)}checkEmpty(t){return $l.resolve(0===this.An.length)}addMutationBatch(t,e,n,s){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const r=new zl(i,e,n,s);this.An.push(r);for(const e of s)this.ws=this.ws.add(new ph(e.key,i)),this.Jt.addToCollectionParentIndex(t,e.key.path.popLast());return $l.resolve(r)}lookupMutationBatch(t,e){return $l.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.gs(n),i=s<0?0:s;return $l.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return $l.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(t){return $l.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new ph(e,0),s=new ph(e,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,s],(t=>{const e=this._s(t.fs);i.push(e)})),$l.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ou(Da);return e.forEach((t=>{const e=new ph(t,0),s=new ph(t,Number.POSITIVE_INFINITY);this.ws.forEachInRange([e,s],(t=>{n=n.add(t.fs)}))})),$l.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let i=n;tc.isDocumentKey(i)||(i=i.child(""));const r=new ph(new tc(i),0);let o=new Ou(Da);return this.ws.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===s&&(o=o.add(t.fs)),!0)}),r),$l.resolve(this.ys(o))}ys(t){const e=[];return t.forEach((t=>{const n=this._s(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){ya(0===this.ps(e.batchId,"removed")),this.An.shift();let n=this.ws;return $l.forEach(e.mutations,(s=>{const i=new ph(s.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.ws=n}))}ee(t){}containsKey(t,e){const n=new ph(e,0),s=this.ws.firstAfterOrEqual(n);return $l.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.An.length,$l.resolve()}ps(t,e){return this.gs(t)}gs(t){return 0===this.An.length?0:t-this.An[0].batchId}_s(t){const e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}class gh{constructor(t,e){this.Jt=t,this.Ts=e,this.docs=new Ru(tc.comparator),this.size=0}addEntry(t,e,n){const s=e.key,i=this.docs.get(s),r=i?i.size:0,o=this.Ts(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:o,readTime:n}),this.size+=o-r,this.Jt.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return $l.resolve(n?n.document.mutableCopy():gc.newInvalidDocument(e))}getEntries(t,e){let n=Mu();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():gc.newInvalidDocument(t))})),$l.resolve(n)}getDocumentsMatchingQuery(t,e,n){let s=Mu();const i=new tc(e.path.child("")),r=this.docs.getIteratorFrom(i);for(;r.hasNext();){const{key:t,value:{document:i,readTime:o}}=r.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||zc(e,i)&&(s=s.insert(i.key,i.mutableCopy()))}return $l.resolve(s)}Es(t,e){return $l.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new yh(this)}getSize(t){return $l.resolve(this.size)}}class yh extends class{constructor(){this.changes=new nh((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:xa.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:gc.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?$l.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}{constructor(t){super(),this.De=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.document.isValidDocument()?e.push(this.De.addEntry(t,s.document,this.getReadTime(n))):this.De.removeEntry(n)})),$l.waitFor(e)}getFromCache(t,e){return this.De.getEntry(t,e)}getAllFromCache(t,e){return this.De.getEntries(t,e)}}class vh{constructor(t){this.persistence=t,this.Is=new nh((t=>wc(t)),Ec),this.lastRemoteSnapshotVersion=xa.min(),this.highestTargetId=0,this.As=0,this.Rs=new fh,this.targetCount=0,this.bs=th.ie()}forEachTarget(t,e){return this.Is.forEach(((t,n)=>e(n))),$l.resolve()}getLastRemoteSnapshotVersion(t){return $l.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $l.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.bs.next(),$l.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.As&&(this.As=e),$l.resolve()}ce(t){this.Is.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.bs=new th(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,$l.resolve()}updateTargetData(t,e){return this.ce(e),$l.resolve()}removeTargetData(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,$l.resolve()}removeTargets(t,e,n){let s=0;const i=[];return this.Is.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Is.delete(r),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)})),$l.waitFor(i).next((()=>s))}getTargetCount(t){return $l.resolve(this.targetCount)}getTargetData(t,e){const n=this.Is.get(e)||null;return $l.resolve(n)}addMatchingKeys(t,e,n){return this.Rs.rs(e,n),$l.resolve()}removeMatchingKeys(t,e,n){this.Rs.cs(e,n);const s=this.persistence.referenceDelegate,i=[];return s&&e.forEach((e=>{i.push(s.markPotentiallyOrphaned(t,e))})),$l.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Rs.us(e),$l.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Rs.ls(e);return $l.resolve(n)}containsKey(t,e){return $l.resolve(this.Rs.containsKey(e))}}class wh{constructor(t,e){this.Ps={},this.Be=new Na(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new vh(this),this.Jt=new Xl,this.Je=function(t,e){return new gh(t,e)}(this.Jt,(t=>this.referenceDelegate.vs(t))),this.k=new Jl(e),this.Ye=new dh(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let e=this.Ps[t.toKey()];return e||(e=new mh(this.Jt,this.referenceDelegate),this.Ps[t.toKey()]=e),e}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,e,n){da("MemoryPersistence","Starting transaction:",t);const s=new Eh(this.Be.next());return this.referenceDelegate.Vs(),n(s).next((t=>this.referenceDelegate.Ss(s).next((()=>t)))).toPromise().then((t=>(s.raiseOnCommittedEvent(),t)))}Ds(t,e){return $l.or(Object.values(this.Ps).map((n=>()=>n.containsKey(t,e))))}}class Eh extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}{constructor(t){super(),this.currentSequenceNumber=t}}class bh{constructor(t){this.persistence=t,this.Cs=new fh,this.Ns=null}static ks(t){return new bh(t)}get xs(){if(this.Ns)return this.Ns;throw ga()}addReference(t,e,n){return this.Cs.addReference(n,e),this.xs.delete(n.toString()),$l.resolve()}removeReference(t,e,n){return this.Cs.removeReference(n,e),this.xs.add(n.toString()),$l.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),$l.resolve()}removeTarget(t,e){this.Cs.us(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Vs(){this.Ns=new Set}Ss(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $l.forEach(this.xs,(n=>{const s=tc.fromPath(n);return this.$s(t,s).next((t=>{t||e.removeEntry(s)}))})).next((()=>(this.Ns=null,e.apply(t))))}updateLimboDocument(t,e){return this.$s(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}vs(t){return 0}$s(t,e){return $l.or([()=>$l.resolve(this.Cs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ds(t,e)])}}class Ih{constructor(){this.activeTargetIds=Hu()}Ms(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Fs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Th{constructor(){this.pi=new Ih,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}updateQueryState(t,e,n){this.Ti[t]=e}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new Ih,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class _h{Ei(t){}shutdown(){}}class Sh{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(t){this.Pi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){da("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Pi)t(0)}bi(){da("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Pi)t(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Ch{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Oi(t){this.ki(t)}Fi(t){this.xi(t)}}class Ah extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Mi=e+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,e,n,s,i){const r=this.Ui(t,e);da("RestConnection","Sending: ",r,n);const o={};return this.qi(o,s,i),this.Ki(t,r,o,n).then((t=>(da("RestConnection","Received: ",t),t)),(e=>{throw pa("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}ji(t,e,n,s,i){return this.Bi(t,e,n,s,i)}qi(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ua,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Ui(t,e){const n=kh[t];return`${this.Mi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,e,n,s){return new Promise(((i,r)=>{const o=new oa;o.listenOnce(ea.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case ta.NO_ERROR:const e=o.getResponseJson();da("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ta.TIMEOUT:da("Connection",'RPC "'+t+'" timed out'),r(new Ea(wa.DEADLINE_EXCEEDED,"Request time out"));break;case ta.HTTP_ERROR:const n=o.getStatus();if(da("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(wa).indexOf(e)>=0?e:wa.UNKNOWN}(t.status);r(new Ea(e,t.message))}else r(new Ea(wa.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new Ea(wa.UNAVAILABLE,"Connection failed."));break;default:ga()}}finally{da("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(s);o.send(e,"POST",a,n,15)}))}Qi(t,e,n){const s=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=Yo(),l=Zo(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new ia({})),this.qi(h.initMessageHeaders,e,n),r()||a()||i().indexOf("Electron/")>=0||c()||i().indexOf("MSAppHost/")>=0||o()||(h.httpHeadersOverwriteParam="$httpHeaders");const d=s.join("");da("Connection","Creating WebChannel: "+d,h);const f=u.createWebChannel(d,h);let p=!1,m=!1;const g=new Ch({Vi:t=>{m?da("Connection","Not sending because WebChannel is closed:",t):(p||(da("Connection","Opening WebChannel transport."),f.open(),p=!0),da("Connection","WebChannel sending:",t),f.send(t))},Si:()=>f.close()}),y=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return y(f,ra.EventType.OPEN,(()=>{m||da("Connection","WebChannel transport opened.")})),y(f,ra.EventType.CLOSE,(()=>{m||(m=!0,da("Connection","WebChannel transport closed"),g.Oi())})),y(f,ra.EventType.ERROR,(t=>{m||(m=!0,pa("Connection","WebChannel transport errored:",t),g.Oi(new Ea(wa.UNAVAILABLE,"The operation could not be completed")))})),y(f,ra.EventType.MESSAGE,(t=>{var e;if(!m){const n=t.data[0];ya(!!n);const s=n,i=s.error||(null===(e=s[0])||void 0===e?void 0:e.error);if(i){da("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=Cu[t];if(void 0!==e)return Nu(e)}(t),n=i.message;void 0===e&&(e=wa.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),m=!0,g.Oi(new Ea(e,n)),f.close()}else da("Connection","WebChannel received:",n),g.Fi(n)}})),y(l,na.STAT_EVENT,(t=>{t.stat===sa.PROXY?da("Connection","Detected buffering proxy"):t.stat===sa.NOPROXY&&da("Connection","Detected no buffering proxy")})),setTimeout((()=>{g.$i()}),0),g}}function Nh(){return"undefined"!=typeof document?document:null}function Rh(t){return new el(t,!0)}class Lh{constructor(t,e,n=1e3,s=1.5,i=6e4){this.Fe=t,this.timerId=e,this.Wi=n,this.Gi=s,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const e=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),s=Math.max(0,e-n);s>0&&da("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Hi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ji=this.Fe.enqueueAfterDelay(this.timerId,s,(()=>(this.Yi=Date.now(),t()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Dh{constructor(t,e,n,s,i,r,o,a){this.Fe=t,this.nr=n,this.sr=s,this.ir=i,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Lh(t,e)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Fe.enqueueAfterDelay(this.nr,6e4,(()=>this.mr())))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,e){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():e&&e.code===wa.RESOURCE_EXHAUSTED?(fa(e.toString()),fa("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):e&&e.code===wa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(e)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),e=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.rr===e&&this.Ir(t,n)}),(e=>{t((()=>{const t=new Ea(wa.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ar(t)}))}))}Ir(t,e){const n=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di((()=>{n((()=>(this.state=2,this.cr=this.Fe.enqueueAfterDelay(this.sr,1e4,(()=>(this.lr()&&(this.state=3),Promise.resolve()))),this.listener.Di())))})),this.stream.Ni((t=>{n((()=>this.Ar(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}dr(){this.state=5,this.ur.Zi((async()=>{this.state=0,this.start()}))}Ar(t){return da("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return e=>{this.Fe.enqueueAndForget((()=>this.rr===t?e():(da("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Oh extends Dh{constructor(t,e,n,s,i,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,r),this.k=i}Rr(t,e){return this.ir.Qi("Listen",t,e)}onMessage(t){this.ur.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ga()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(t,e){return t.C?(ya(void 0===e||"string"==typeof e),$a.fromBase64String(e||"")):(ya(void 0===e||e instanceof Uint8Array),$a.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?wa.UNKNOWN:Nu(t.code);return new Ea(e,t.message||"")}(o);n=new Wu(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=ul(t,s.document.name),r=rl(s.document.updateTime),o=new pc({mapValue:{fields:s.document.fields}}),a=gc.newFoundDocument(i,r,o),c=s.targetIds||[],u=s.removedTargetIds||[];n=new zu(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=ul(t,s.document),r=s.readTime?rl(s.readTime):xa.min(),o=gc.newNoDocument(i,r),a=s.removedTargetIds||[];n=new zu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=ul(t,s.document),r=s.removedTargetIds||[];n=new zu([],r,i,null)}else{if(!("filter"in e))return ga();{e.filter;const t=e.filter;t.targetId;const s=t.count||0,i=new ku(s),r=t.targetId;n=new Gu(r,i)}}return n}(this.k,t),n=function(t){if(!("targetChange"in t))return xa.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?xa.min():e.readTime?rl(e.readTime):xa.min()}(t);return this.listener.br(e,n)}Pr(t){const e={};e.database=hl(this.k),e.addTarget=function(t,e){let n;const s=e.target;return n=bc(s)?{documents:pl(t,s)}:{query:ml(t,s)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=sl(t,e.resumeToken):e.snapshotVersion.compareTo(xa.min())>0&&(n.readTime=nl(t,e.snapshotVersion.toTimestamp())),n}(this.k,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ga()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,t);n&&(e.labels=n),this.gr(e)}vr(t){const e={};e.database=hl(this.k),e.removeTarget=t,this.gr(e)}}class Ph extends Dh{constructor(t,e,n,s,i,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,r),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,e){return this.ir.Qi("Write",t,e)}onMessage(t){if(ya(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const e=function(t,e){return t&&t.length>0?(ya(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?rl(t.updateTime):rl(e);return n.isEqual(xa.min())&&(n=rl(e)),new lu(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=rl(t.commitTime);return this.listener.Cr(n,e)}return ya(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=hl(this.k),this.gr(t)}Dr(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof wu)n={update:fl(t,e.key,e.value)};else if(e instanceof _u)n={delete:cl(t,e.key)};else if(e instanceof Eu)n={update:fl(t,e.key,e.data),updateMask:kl(e.fieldMask)};else{if(!(e instanceof Su))return ga();n={verify:cl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof nu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof su)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ru)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof au)return{fieldPath:e.field.canonicalString(),increment:n.N};throw ga()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:il(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ga()}(t,e.precondition)),n}(this.k,t)))};this.gr(e)}}class xh extends class{}{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.ir=n,this.k=s,this.$r=!1}Or(){if(this.$r)throw new Ea(wa.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,e,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.Bi(t,e,n,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===wa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ea(wa.UNKNOWN,t.toString())}))}ji(t,e,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.ji(t,e,n,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===wa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ea(wa.UNKNOWN,t.toString())}))}terminate(){this.$r=!0}}class Mh{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Fr=0,this.Mr=null,this.Lr=!0}Br(){0===this.Fr&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve()))))}Kr(t){"Online"===this.state?this.Ur("Unknown"):(this.Fr++,this.Fr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Fr=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(fa(e),this.Lr=!1):da("OnlineStateTracker",e)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Uh{constructor(t,e,n,s,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei((t=>{n.enqueueAndForget((async()=>{zh(this)&&(da("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=va(t);e.Gr.add(4),await Vh(e),e.Jr.set("Unknown"),e.Gr.delete(4),await Fh(e)}(this))}))})),this.Jr=new Mh(n,s)}}async function Fh(t){if(zh(t))for(const e of t.zr)await e(!0)}async function Vh(t){for(const e of t.zr)await e(!1)}function qh(t,e){const n=va(t);n.Wr.has(e.targetId)||(n.Wr.set(e.targetId,e),Kh(n)?$h(n):cd(n).lr()&&Bh(n,e))}function jh(t,e){const n=va(t),s=cd(n);n.Wr.delete(e),s.lr()&&Hh(n,e),0===n.Wr.size&&(s.lr()?s._r():zh(n)&&n.Jr.set("Unknown"))}function Bh(t,e){t.Yr.X(e.targetId),cd(t).Pr(e)}function Hh(t,e){t.Yr.X(e),cd(t).vr(e)}function $h(t){t.Yr=new Qu({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Wr.get(e)||null}),cd(t).start(),t.Jr.Br()}function Kh(t){return zh(t)&&!cd(t).hr()&&t.Wr.size>0}function zh(t){return 0===va(t).Gr.size}function Gh(t){t.Yr=void 0}async function Wh(t){t.Wr.forEach(((e,n)=>{Bh(t,e)}))}async function Jh(t,e){Gh(t),Kh(t)?(t.Jr.Kr(e),$h(t)):t.Jr.set("Unknown")}async function Qh(t,e,n){if(t.Jr.set("Online"),e instanceof Wu&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const s of e.targetIds)t.Wr.has(s)&&(await t.remoteSyncer.rejectListen(s,n),t.Wr.delete(s),t.Yr.removeTarget(s))}(t,e)}catch(n){da("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Xh(t,n)}else if(e instanceof zu?t.Yr.ot(e):e instanceof Gu?t.Yr.dt(e):t.Yr.ut(e),!n.isEqual(xa.min()))try{const e=await ch(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Yr.gt(e);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Wr.get(s);i&&t.Wr.set(s,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.Wr.get(e);if(!n)return;t.Wr.set(e,n.withResumeToken($a.EMPTY_BYTE_STRING,n.snapshotVersion)),Hh(t,e);const s=new Wl(n.target,e,1,n.sequenceNumber);Bh(t,s)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){da("RemoteStore","Failed to raise snapshot:",e),await Xh(t,e)}}async function Xh(t,e,n){if(!Kl(e))throw e;t.Gr.add(1),await Vh(t),t.Jr.set("Offline"),n||(n=()=>ch(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{da("RemoteStore","Retrying IndexedDB access"),await n(),t.Gr.delete(1),await Fh(t)}))}function Yh(t,e){return e().catch((n=>Xh(t,n,e)))}async function Zh(t){const e=va(t),n=ud(e);let s=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;td(e);)try{const t=await uh(e.localStore,s);if(null===t){0===e.Qr.length&&n._r();break}s=t.batchId,ed(e,t)}catch(t){await Xh(e,t)}nd(e)&&sd(e)}function td(t){return zh(t)&&t.Qr.length<10}function ed(t,e){t.Qr.push(e);const n=ud(t);n.lr()&&n.Sr&&n.Dr(e.mutations)}function nd(t){return zh(t)&&!ud(t).hr()&&t.Qr.length>0}function sd(t){ud(t).start()}async function id(t){ud(t).kr()}async function rd(t){const e=ud(t);for(const n of t.Qr)e.Dr(n.mutations)}async function od(t,e,n){const s=t.Qr.shift(),i=Gl.from(s,e,n);await Yh(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Zh(t)}async function ad(t,e){e&&ud(t).Sr&&await async function(t,e){if(function(t){switch(t){default:return ga();case wa.CANCELLED:case wa.UNKNOWN:case wa.DEADLINE_EXCEEDED:case wa.RESOURCE_EXHAUSTED:case wa.INTERNAL:case wa.UNAVAILABLE:case wa.UNAUTHENTICATED:return!1;case wa.INVALID_ARGUMENT:case wa.NOT_FOUND:case wa.ALREADY_EXISTS:case wa.PERMISSION_DENIED:case wa.FAILED_PRECONDITION:case wa.ABORTED:case wa.OUT_OF_RANGE:case wa.UNIMPLEMENTED:case wa.DATA_LOSS:return!0}}(n=e.code)&&n!==wa.ABORTED){const n=t.Qr.shift();ud(t).wr(),await Yh(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Zh(t)}var n}(t,e),nd(t)&&sd(t)}function cd(t){return t.Xr||(t.Xr=function(t,e,n){const s=va(t);return s.Or(),new Oh(e,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(t.datastore,t.asyncQueue,{Di:Wh.bind(null,t),Ni:Jh.bind(null,t),br:Qh.bind(null,t)}),t.zr.push((async e=>{e?(t.Xr.wr(),Kh(t)?$h(t):t.Jr.set("Unknown")):(await t.Xr.stop(),Gh(t))}))),t.Xr}function ud(t){return t.Zr||(t.Zr=function(t,e,n){const s=va(t);return s.Or(),new Ph(e,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(t.datastore,t.asyncQueue,{Di:id.bind(null,t),Ni:ad.bind(null,t),Nr:rd.bind(null,t),Cr:od.bind(null,t)}),t.zr.push((async e=>{e?(t.Zr.wr(),await Zh(t)):(await t.Zr.stop(),t.Qr.length>0&&(da("RemoteStore",`Stopping write stream with ${t.Qr.length} pending writes`),t.Qr=[]))}))),t.Zr}class ld{constructor(t,e,n,s,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,s,i){const r=Date.now()+n,o=new ld(t,e,r,s,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ea(wa.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hd(t,e){if(fa("AsyncQueue",`${e}: ${t}`),Kl(t))return new Ea(wa.UNAVAILABLE,`${e}: ${t}`);throw t}class dd{constructor(t){this.comparator=t?(e,n)=>t(e,n)||tc.comparator(e.key,n.key):(t,e)=>tc.comparator(t.key,e.key),this.keyedMap=Fu(),this.sortedSet=new Ru(this.comparator)}static emptySet(t){return new dd(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof dd))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(!t.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new dd;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class fd{constructor(){this.eo=new Ru(tc.comparator)}track(t){const e=t.doc.key,n=this.eo.get(e);n?0!==t.type&&3===n.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==n.type?this.eo=this.eo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.eo=this.eo.remove(e):1===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):ga():this.eo=this.eo.insert(e,t)}no(){const t=[];return this.eo.inorderTraversal(((e,n)=>{t.push(n)})),t}}class pd{constructor(t,e,n,s,i,r,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,s){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new pd(t,e,dd.emptySet(e),i,n,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class md{constructor(){this.so=void 0,this.listeners=[]}}class gd{constructor(){this.queries=new nh((t=>$c(t)),Hc),this.onlineState="Unknown",this.io=new Set}}async function yd(t,e){const n=va(t),s=e.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new md),i)try{r.so=await n.onListen(s)}catch(t){const n=hd(t,`Initialization of query '${Kc(e.query)}' failed`);return void e.onError(n)}n.queries.set(s,r),r.listeners.push(e),e.ro(n.onlineState),r.so&&e.oo(r.so)&&bd(n)}async function vd(t,e){const n=va(t),s=e.query;let i=!1;const r=n.queries.get(s);if(r){const t=r.listeners.indexOf(e);t>=0&&(r.listeners.splice(t,1),i=0===r.listeners.length)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function wd(t,e){const n=va(t);let s=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.oo(t)&&(s=!0);i.so=t}}s&&bd(n)}function Ed(t,e,n){const s=va(t),i=s.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);s.queries.delete(e)}function bd(t){t.io.forEach((t=>{t.next()}))}class Id{constructor(t,e,n){this.query=t,this.ao=e,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new pd(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.ho(t)&&(this.ao.next(t),e=!0):this.lo(t,this.onlineState)&&(this.fo(t),e=!0),this.uo=t,e}onError(t){this.ao.error(t)}ro(t){this.onlineState=t;let e=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}lo(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.wo&&n||t.docs.isEmpty()&&"Offline"!==e)}ho(t){if(t.docChanges.length>0)return!0;const e=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}fo(t){t=pd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}class Td{constructor(t){this.key=t}}class _d{constructor(t){this.key=t}}class Sd{constructor(t,e){this.query=t,this.To=e,this.Eo=null,this.current=!1,this.Io=ju(),this.mutatedKeys=ju(),this.Ao=Gc(t),this.Ro=new dd(this.Ao)}get bo(){return this.To}Po(t,e){const n=e?e.vo:new fd,s=e?e.Ro:this.Ro;let i=e?e.mutatedKeys:this.mutatedKeys,r=s,o=!1;const a=Vc(this.query)&&s.size===this.query.limit?s.last():null,c=qc(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((t,e)=>{const u=s.get(t),l=zc(this.query,e)?e:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Vo(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Ao(l,a)>0||c&&this.Ao(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(r=r.add(l),i=d?i.add(t):i.delete(t)):(r=r.delete(t),i=i.delete(t)))})),Vc(this.query)||qc(this.query))for(;r.size>this.query.limit;){const t=Vc(this.query)?r.last():r.first();r=r.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ro:r,vo:n,Bn:o,mutatedKeys:i}}Vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const s=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const i=t.vo.no();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ga()}};return n(t)-n(e)}(t.type,e.type)||this.Ao(t.doc,e.doc))),this.So(n);const r=e?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new pd(this.query,t.Ro,s,i,t.mutatedKeys,0===o,a,!1),Co:r}:{Co:r}}ro(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new fd,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach((t=>this.To=this.To.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.To=this.To.delete(t))),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=ju(),this.Ro.forEach((t=>{this.No(t.key)&&(this.Io=this.Io.add(t.key))}));const e=[];return t.forEach((t=>{this.Io.has(t)||e.push(new _d(t))})),this.Io.forEach((n=>{t.has(n)||e.push(new Td(n))})),e}ko(t){this.To=t.zn,this.Io=ju();const e=this.Po(t.documents);return this.applyChanges(e,!0)}xo(){return pd.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class kd{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Cd{constructor(t){this.key=t,this.$o=!1}}class Ad{constructor(t,e,n,s,i,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=r,this.Oo={},this.Fo=new nh((t=>$c(t)),Hc),this.Mo=new Map,this.Lo=new Set,this.Bo=new Ru(tc.comparator),this.Uo=new Map,this.qo=new fh,this.Ko={},this.jo=new Map,this.Qo=th.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function Nd(t,e){const n=function(t){const e=va(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ld.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Od.bind(null,e),e.Oo.br=wd.bind(null,e.eventManager),e.Oo.zo=Ed.bind(null,e.eventManager),e}(t);let s,i;const r=n.Fo.get(e);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.xo();else{const t=await function(t,e){const n=va(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let s;return n.He.getTargetData(t,e).next((i=>i?(s=i,$l.resolve(s)):n.He.allocateTargetId(t).next((i=>(s=new Wl(e,i,0,t.currentSequenceNumber),n.He.addTargetData(t,s).next((()=>s)))))))})).then((t=>{const s=n.qn.get(t.targetId);return(null===s||t.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qn=n.qn.insert(t.targetId,t),n.Kn.set(e,t.targetId)),t}))}(n.localStore,Bc(e)),r=n.sharedClientState.addLocalQueryTarget(t.targetId);s=t.targetId,i=await async function(t,e,n,s){t.Go=(e,n,s)=>async function(t,e,n,s){let i=e.view.Po(n);i.Bn&&(i=await hh(t.localStore,e.query,!1).then((({documents:t})=>e.view.Po(t,i))));const r=s&&s.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,r);return qd(t,e.targetId,o.Co),o.snapshot}(t,e,n,s);const i=await hh(t.localStore,e,!0),r=new Sd(e,i.zn),o=r.Po(i.documents),a=Ku.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==t.onlineState),c=r.applyChanges(o,t.isPrimaryClient,a);qd(t,n,c.Co);const u=new kd(e,n,r);return t.Fo.set(e,u),t.Mo.has(n)?t.Mo.get(n).push(e):t.Mo.set(n,[e]),c.snapshot}(n,e,s,"current"===r),n.isPrimaryClient&&qh(n.remoteStore,t)}return i}async function Rd(t,e){const n=va(t),s=n.Fo.get(e),i=n.Mo.get(s.targetId);if(i.length>1)return n.Mo.set(s.targetId,i.filter((t=>!Hc(t,e)))),void n.Fo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await lh(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),jh(n.remoteStore,s.targetId),Fd(n,s.targetId)})).catch(eh)):(Fd(n,s.targetId),await lh(n.localStore,s.targetId,!0))}async function Ld(t,e){const n=va(t);try{const t=await function(t,e){const n=va(t),s=e.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];e.targetChanges.forEach(((r,a)=>{const c=i.get(a);if(!c)return;o.push(n.He.removeMatchingKeys(t,r.removedDocuments,a).next((()=>n.He.addMatchingKeys(t,r.addedDocuments,a))));let u=c.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?u=u.withResumeToken($a.EMPTY_BYTE_STRING,xa.min()).withLastLimboFreeSnapshotVersion(xa.min()):r.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(r.resumeToken,s)),i=i.insert(a,u),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,r)&&o.push(n.He.updateTargetData(t,u))}));let a=Mu();if(e.documentUpdates.forEach(((s,i)=>{e.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,s))})),o.push(function(t,e,n,s,i){let r=ju();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Mu();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==i?void 0:i.get(n))||s;o.isNoDocument()&&o.version.isEqual(xa.min())?(e.removeEntry(n,c),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),r=r.insert(n,o)):da("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),r}))}(t,r,e.documentUpdates,s,void 0).next((t=>{a=t}))),!s.isEqual(xa.min())){const e=n.He.getLastRemoteSnapshotVersion(t).next((e=>n.He.setTargetsMetadata(t,t.currentSequenceNumber,s)));o.push(e)}return $l.waitFor(o).next((()=>r.apply(t))).next((()=>n.Wn.Vn(t,a))).next((()=>a))})).then((t=>(n.qn=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const s=n.Uo.get(e);s&&(ya(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?s.$o=!0:t.modifiedDocuments.size>0?ya(s.$o):t.removedDocuments.size>0&&(ya(s.$o),s.$o=!1))})),await Hd(n,t,e)}catch(t){await eh(t)}}function Dd(t,e,n){const s=va(t);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const t=[];s.Fo.forEach(((n,s)=>{const i=s.view.ro(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=va(t);n.onlineState=e;let s=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.ro(e)&&(s=!0)})),s&&bd(n)}(s.eventManager,e),t.length&&s.Oo.br(t),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Od(t,e,n){const s=va(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Uo.get(e),r=i&&i.key;if(r){let t=new Ru(tc.comparator);t=t.insert(r,gc.newNoDocument(r,xa.min()));const n=ju().add(r),i=new $u(xa.min(),new Map,new Ou(Da),t,n);await Ld(s,i),s.Bo=s.Bo.remove(r),s.Uo.delete(e),Bd(s)}else await lh(s.localStore,e,!1).then((()=>Fd(s,e,n))).catch(eh)}async function Pd(t,e){const n=va(t),s=e.batch.batchId;try{const t=await function(t,e){const n=va(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const s=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,s){const i=n.batch,r=i.keys();let o=$l.resolve();return r.forEach((t=>{o=o.next((()=>s.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);ya(null!==r),e.version.compareTo(r)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&s.addEntry(e,n.commitVersion))}))})),o.next((()=>t.An.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.An.performConsistencyCheck(t))).next((()=>n.Wn.vn(t,s)))}))}(n.localStore,e);Ud(n,s,null),Md(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Hd(n,t)}catch(t){await eh(t)}}async function xd(t,e,n){const s=va(t);try{const t=await function(t,e){const n=va(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let s;return n.An.lookupMutationBatch(t,e).next((e=>(ya(null!==e),s=e.keys(),n.An.removeMutationBatch(t,e)))).next((()=>n.An.performConsistencyCheck(t))).next((()=>n.Wn.vn(t,s)))}))}(s.localStore,e);Ud(s,e,n),Md(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Hd(s,t)}catch(n){await eh(n)}}function Md(t,e){(t.jo.get(e)||[]).forEach((t=>{t.resolve()})),t.jo.delete(e)}function Ud(t,e,n){const s=va(t);let i=s.Ko[s.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),s.Ko[s.currentUser.toKey()]=i}}function Fd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Mo.get(e))t.Fo.delete(s),n&&t.Oo.zo(s,n);t.Mo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach((e=>{t.qo.containsKey(e)||Vd(t,e)}))}function Vd(t,e){t.Lo.delete(e.path.canonicalString());const n=t.Bo.get(e);null!==n&&(jh(t.remoteStore,n),t.Bo=t.Bo.remove(e),t.Uo.delete(n),Bd(t))}function qd(t,e,n){for(const s of n)s instanceof Td?(t.qo.addReference(s.key,e),jd(t,s)):s instanceof _d?(da("SyncEngine","Document no longer in limbo: "+s.key),t.qo.removeReference(s.key,e),t.qo.containsKey(s.key)||Vd(t,s.key)):ga()}function jd(t,e){const n=e.key,s=n.path.canonicalString();t.Bo.get(n)||t.Lo.has(s)||(da("SyncEngine","New document in limbo: "+n),t.Lo.add(s),Bd(t))}function Bd(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){const e=t.Lo.values().next().value;t.Lo.delete(e);const n=new tc(qa.fromString(e)),s=t.Qo.next();t.Uo.set(s,new Cd(n)),t.Bo=t.Bo.insert(n,s),qh(t.remoteStore,new Wl(Bc(Fc(n.path)),s,2,Na.I))}}async function Hd(t,e,n){const s=va(t),i=[],r=[],o=[];s.Fo.isEmpty()||(s.Fo.forEach(((t,a)=>{o.push(s.Go(a,e,n).then((t=>{if(t){s.isPrimaryClient&&s.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=ih.$n(a.targetId,t);r.push(e)}})))})),await Promise.all(o),s.Oo.br(i),await async function(t,e){const n=va(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>$l.forEach(e,(e=>$l.forEach(e.kn,(s=>n.persistence.referenceDelegate.addReference(t,e.targetId,s))).next((()=>$l.forEach(e.xn,(s=>n.persistence.referenceDelegate.removeReference(t,e.targetId,s)))))))))}catch(t){if(!Kl(t))throw t;da("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.qn.get(e),s=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(s);n.qn=n.qn.insert(e,i)}}}(s.localStore,r))}async function $d(t,e){const n=va(t);if(!n.currentUser.isEqual(e)){da("SyncEngine","User change. New user:",e.toKey());const t=await ah(n.localStore,e);n.currentUser=e,function(t,e){t.jo.forEach((t=>{t.forEach((t=>{t.reject(new Ea(wa.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.jo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Hd(n,t.Gn)}}function Kd(t,e){const n=va(t),s=n.Uo.get(e);if(s&&s.$o)return ju().add(s.key);{let t=ju();const s=n.Mo.get(e);if(!s)return t;for(const e of s){const s=n.Fo.get(e);t=t.unionWith(s.view.bo)}return t}}function zd(t){const e=va(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xd.bind(null,e),e}class Gd{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=Rh(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return function(t,e,n,s){return new oh(t,e,n,s)}(this.persistence,new rh,t.initialUser,this.k)}Yo(t){return new wh(bh.ks,this.k)}Jo(t){return new Th}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Wd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Dd(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=$d.bind(null,this.syncEngine),await async function(t,e){const n=va(t);e?(n.Gr.delete(2),await Fh(n)):e||(n.Gr.add(2),await Vh(n),n.Jr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new gd}createDatastore(t){const e=Rh(t.databaseInfo.databaseId),n=(s=t.databaseInfo,new Ah(s));var s;return function(t,e,n,s){return new xh(t,e,n,s)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,s=t.asyncQueue,i=t=>Dd(this.syncEngine,t,0),r=Sh.Pt()?new Sh:new _h,new Uh(e,n,s,i,r);var e,n,s,i,r}createSyncEngine(t,e){return function(t,e,n,s,i,r,o){const a=new Ad(t,e,n,s,i,r);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=va(t);da("RemoteStore","RemoteStore shutting down."),e.Gr.add(5),await Vh(e),e.Hr.shutdown(),e.Jr.set("Unknown")}(this.remoteStore)}}class Jd{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ea(this.observer.next,t)}error(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}na(){this.muted=!0}ea(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Qd{constructor(t,e,n,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=ca.UNAUTHENTICATED,this.clientId=La.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{da("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(()=>Promise.resolve()))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ea(wa.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=hd(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Xd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(da("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),da("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async t=>{s.isEqual(t)||(await ah(e.localStore,t),s=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new Gd)),t.offlineComponents}(t);da("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener((t=>async function(t,e){const n=va(t);n.asyncQueue.verifyOperationInProgress(),da("RemoteStore","RemoteStore received new credentials");const s=zh(n);n.Gr.add(3),await Vh(n),s&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Gr.delete(3),await Fh(n)}(e.remoteStore,t))),t.onlineComponents=e}async function Yd(t){return t.onlineComponents||(da("FirestoreClient","Using default OnlineComponentProvider"),await Xd(t,new Wd)),t.onlineComponents}async function Zd(t){const e=await Yd(t),n=e.eventManager;return n.onListen=Nd.bind(null,e.syncEngine),n.onUnlisten=Rd.bind(null,e.syncEngine),n}class tf{constructor(t,e,n,s,i,r,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class ef{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ef&&t.projectId===this.projectId&&t.database===this.database}}const nf=new Map;function sf(t,e,n){if(!n)throw new Ea(wa.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rf(t){if(!tc.isDocumentKey(t))throw new Ea(wa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function of(t){if(tc.isDocumentKey(t))throw new Ea(wa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function af(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ga()}function cf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ea(wa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=af(t);throw new Ea(wa.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class uf{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ea(wa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ea(wa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,s){if(!0===e&&!0===s)throw new Ea(wa.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class lf{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uf({}),this._settingsFrozen=!1,t instanceof ef?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ea(wa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ef(t.options.projectId)}(t))}get app(){if(!this._app)throw new Ea(wa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ea(wa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uf(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Ta;switch(t.type){case"gapi":const e=t.client;return ya(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ka(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ea(wa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=nf.get(t);e&&(da("ComponentProvider","Removing Datastore"),nf.delete(t),e.terminate())}(this),Promise.resolve()}}class hf{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ff(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hf(this.firestore,t,this._key)}}class df{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new df(this.firestore,t,this._query)}}class ff extends df{constructor(t,e,n){super(t,e,Fc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hf(this.firestore,null,new tc(t))}withConverter(t){return new ff(this.firestore,t,this._path)}}function pf(t,e,...n){if(t=w(t),1===arguments.length&&(e=La.A()),sf("doc","path",e),t instanceof lf){const s=qa.fromString(e,...n);return rf(s),new hf(t,null,new tc(s))}{if(!(t instanceof hf||t instanceof ff))throw new Ea(wa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(qa.fromString(e,...n));return rf(s),new hf(t.firestore,t instanceof ff?t.converter:null,new tc(s))}}class mf{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Lh(this,"async_queue_retry"),this.Ra=()=>{const t=Nh();t&&da("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const t=Nh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ba(),this.Pa(t)}enterRestrictedMode(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;const e=Nh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ra)}}enqueue(t){if(this.ba(),this.ya)return new Promise((()=>{}));const e=new ba;return this.Pa((()=>this.ya&&this.Ia?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.ga.push(t),this.va())))}async va(){if(0!==this.ga.length){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(t){if(!Kl(t))throw t;da("AsyncQueue","Operation failed with retryable error: "+t)}this.ga.length>0&&this.ur.Zi((()=>this.va()))}}Pa(t){const e=this.ma.then((()=>(this.Ea=!0,t().catch((t=>{this.Ta=t,this.Ea=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw fa("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Ea=!1,t))))));return this.ma=e,e}enqueueAfterDelay(t,e,n){this.ba(),this.Aa.indexOf(t)>-1&&(e=0);const s=ld.createAndSchedule(this,t,e,n,(t=>this.Va(t)));return this.pa.push(s),s}ba(){this.Ta&&ga()}verifyOperationInProgress(){}async Sa(){let t;do{t=this.ma,await t}while(t!==this.ma)}Da(t){for(const e of this.pa)if(e.timerId===t)return!0;return!1}Ca(t){return this.Sa().then((()=>{this.pa.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.pa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sa()}))}Na(t){this.Aa.push(t)}Va(t){const e=this.pa.indexOf(t);this.pa.splice(e,1)}}class gf extends lf{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new mf,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||vf(this),this._firestoreClient.terminate()}}function yf(t){return t._firestoreClient||vf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vf(t){var e;const n=t._freezeSettings(),s=function(t,e,n,s){return new tf(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Qd(t._authCredentials,t._appCheckCredentials,t._queue,s)}class wf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ea(wa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ba(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ef{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ef($a.fromBase64String(t))}catch(t){throw new Ea(wa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ef($a.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class bf{constructor(t){this._methodName=t}}class If{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ea(wa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ea(wa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Da(this._lat,t._lat)||Da(this._long,t._long)}}const Tf=/^__.*__$/;class _f{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Eu(t,this.data,this.fieldMask,e,this.fieldTransforms):new wu(t,this.data,e,this.fieldTransforms)}}class Sf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Eu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function kf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ga()}}class Cf{constructor(t,e,n,s,i,r){this.settings=t,this.databaseId=e,this.k=n,this.ignoreUndefinedProperties=s,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=r||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(t){return new Cf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oa(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.$a({path:n,Fa:!1});return s.Ma(t),s}La(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.$a({path:n,Fa:!1});return s.ka(),s}Ba(t){return this.$a({path:void 0,Fa:!0})}Ua(t){return Vf(t,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ka(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ma(this.path.get(t))}Ma(t){if(0===t.length)throw this.Ua("Document fields must not be empty");if(kf(this.xa)&&Tf.test(t))throw this.Ua('Document fields cannot begin and end with "__"')}}class Af{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.k=n||Rh(t)}ja(t,e,n,s=!1){return new Cf({xa:t,methodName:e,Ka:n,path:Ba.emptyPath(),Fa:!1,qa:s},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Nf(t){const e=t._freezeSettings(),n=Rh(t._databaseId);return new Af(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rf(t,e,n,s,i,r={}){const o=t.ja(r.merge||r.mergeFields?2:0,e,n,i);xf("Data must be an object, but it was:",o,s);const a=Of(s,o);let c,u;if(r.merge)c=new Ha(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const s of r.mergeFields){const i=Mf(e,s,n);if(!o.contains(i))throw new Ea(wa.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);qf(t,i)||t.push(i)}c=new Ha(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new _f(new pc(a),c,u)}class Lf extends bf{_toFieldTransform(t){if(2!==t.xa)throw 1===t.xa?t.Ua(`${this._methodName}() can only appear at the top level of your update data`):t.Ua(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Lf}}function Df(t,e){if(Pf(t=w(t)))return xf("Unsupported field value:",e,t),Of(t,e);if(t instanceof bf)return function(t,e){if(!kf(e.xa))throw e.Ua(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Ua(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,e){const n=[];let s=0;for(const i of t){let t=Df(i,e.Ba(s));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),s++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=w(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xc(e.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Pa.fromDate(t);return{timestampValue:nl(e.k,n)}}if(t instanceof Pa){const n=new Pa(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nl(e.k,n)}}if(t instanceof If)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ef)return{bytesValue:sl(e.k,t._byteString)};if(t instanceof hf){const n=e.databaseId,s=t.firestore._databaseId;if(!s.isEqual(n))throw e.Ua(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ol(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Ua(`Unsupported field value: ${af(t)}`)}(t,e)}function Of(t,e){const n={};return Fa(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(t,((t,s)=>{const i=Df(s,e.Oa(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Pf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Pa||t instanceof If||t instanceof Ef||t instanceof hf||t instanceof bf)}function xf(t,e,n){if(!Pf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const s=af(n);throw"an object"===s?e.Ua(t+" a custom object"):e.Ua(t+" "+s)}}function Mf(t,e,n){if((e=w(e))instanceof wf)return e._internalPath;if("string"==typeof e)return Ff(t,e);throw Vf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const Uf=new RegExp("[~\\*/\\[\\]]");function Ff(t,e,n){if(e.search(Uf)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wf(...e.split("."))._internalPath}catch(s){throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vf(t,e,n,s,i){const r=s&&!s.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new Ea(wa.INVALID_ARGUMENT,a+t+c)}function qf(t,e){return t.some((t=>t.isEqual(e)))}class jf{constructor(t,e,n,s,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Hf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Bf extends jf{data(){return super.data()}}function Hf(t,e){return"string"==typeof e?Ff(t,e):e instanceof wf?e._internalPath:e._delegate._internalPath}class $f{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Kf extends jf{constructor(t,e,n,s,i,r){super(t,e,n,s,r),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Hf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class zf extends Kf{data(t={}){return super.data(t)}}class Gf{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new $f(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new zf(this._firestore,this._userDataWriter,n.key,n,new $f(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ea(wa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new zf(t._firestore,t._userDataWriter,n.doc.key,n.doc,new $f(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const s=new zf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new $f(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,r=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:Wf(e.type),doc:s,oldIndex:i,newIndex:r}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Wf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ga()}}class Jf extends class{convertValue(t,e="none"){switch(ec(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ga(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Wa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ga()}}convertObject(t,e){const n={};return Ua(t.fields,((t,s)=>{n[t]=this.convertValue(s,e)})),n}convertGeoPoint(t){return new If(Ga(t.latitude),Ga(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Qa(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Xa(t));default:return null}}convertTimestamp(t){const e=za(t);return new Pa(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=qa.fromString(t);ya(Cl(n));const s=new ef(n.get(1),n.get(3)),i=new tc(n.popFirst(5));return s.isEqual(e)||fa(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ef(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new hf(this.firestore,null,e)}}function Qf(t,e){return function(t,e){const n=new ba;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const s=zd(t);try{const t=await function(t,e){const n=va(t),s=Pa.now(),i=e.reduce(((t,e)=>t.add(e.key)),ju());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Wn.vn(t,i).next((i=>{r=i;const o=[];for(const t of e){const e=gu(t,r.get(t.key));null!=e&&o.push(new Eu(t.key,e,mc(e.value.mapValue),hu.exists(!0)))}return n.An.addMutationBatch(t,s,o,e)})))).then((t=>(t.applyToLocalDocumentSet(r),{batchId:t.batchId,changes:r})))}(s.localStore,e);s.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let s=t.Ko[t.currentUser.toKey()];s||(s=new Ru(Da)),s=s.insert(e,n),t.Ko[t.currentUser.toKey()]=s}(s,t.batchId,n),await Hd(s,t.changes),await Zh(s.remoteStore)}catch(t){const e=hd(t,"Failed to persist write");n.reject(e)}}(await function(t){return Yd(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(yf(t),e)}!function(t,e=!0){ua="9.6.2",q(new E("firestore",((t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=new gf(s,new _a(t.getProvider("auth-internal")),new Aa(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i}),"PUBLIC")),z(aa,"3.4.2",t),z(aa,"3.4.2","esm2017")}(),z("firebase","9.6.2","app");let Xf=[];!function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw B.create("bad-app-name",{appName:String(s)});const i=U.get(s);if(i){if(d(t,i.options)&&d(n,i.config))return i;throw B.create("duplicate-app",{appName:s})}const r=new T(s);for(const t of F.values())r.addComponent(t);const o=new H(t,n,r);U.set(s,o)}({apiKey:"AIzaSyBPwH-PsSrwzFjr6v8LUMwbZkbFs8x7Uac",authDomain:"productiv-932c9.firebaseapp.com",projectId:"productiv-932c9",storageBucket:"productiv-932c9.appspot.com",messagingSenderId:"232110405285",appId:"1:232110405285:web:d37d1437bc93f077c13f4c",measurementId:"G-CR193YXW7R"});const Yf=function(t=K()){return j(t,"firestore").getImmediate()}();let Zf=[];async function tp(t){console.log("get all data called",t);const e=await function(t){t=cf(t,df);const e=cf(t.firestore,gf),n=yf(e),s=new Jf(e);return function(t){if(qc(t)&&0===t.explicitOrderBy.length)throw new Ea(wa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const s=new ba;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,i){const r=new Jd({next:n=>{e.enqueueAndForget((()=>vd(t,o))),n.fromCache&&"server"===s.source?i.reject(new Ea(wa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Id(n,r,{includeMetadataChanges:!0,wo:!0});return yd(t,o)}(await Zd(t),t.asyncQueue,e,n,s))),s.promise}(n,t._query).then((n=>new Gf(e,s,t,n)))}(function(t,e,...n){if(t=w(t),sf("collection","path",e),t instanceof lf){const s=qa.fromString(e,...n);return of(s),new ff(t,null,s)}{if(!(t instanceof hf||t instanceof ff))throw new Ea(wa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(qa.fromString(e,...n));return of(s),new ff(t.firestore,null,s)}}(Yf,`${t}tasks`));console.log(e),Xf=[],Zf=[],function(){const t=document.getElementById("number"),e=document.getElementById("count");Ln=0,e.textContent=Ln,t.classList.remove("number")}(),e.forEach((t=>{t.data().dueDate<=gn()&&"unread"===t.data().status&&(Xf.push(t.data()),xn("add")),Zf.push(t.data())})),!0===Kn&&(console.log("first login"),$n.click(),Jn(!1))}async function ep(t,e,n,s,i,r,o){const a=pf(Yf,`${Gn()}tasks`,String(r));await function(t,e,n,...s){t=cf(t,hf);const i=cf(t.firestore,gf),r=Nf(i);let o;return o="string"==typeof(e=w(e))||e instanceof wf?function(t,e,n,s,i,r){const o=t.ja(1,e,n),a=[Mf(e,s,n)],c=[i];if(r.length%2!=0)throw new Ea(wa.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<r.length;t+=2)a.push(Mf(e,r[t])),c.push(r[t+1]);const u=[],l=pc.empty();for(let t=a.length-1;t>=0;--t)if(!qf(u,a[t])){const e=a[t];let n=c[t];n=w(n);const s=o.La(e);if(n instanceof Lf)u.push(e);else{const t=Df(n,s);null!=t&&(u.push(e),l.set(e,t))}}const h=new Ha(u);return new Sf(l,h,o.fieldTransforms)}(r,"updateDoc",t._key,e,n,s):function(t,e,n,s){const i=t.ja(1,e,n);xf("Data must be an object, but it was:",i,s);const r=[],o=pc.empty();Ua(s,((t,s)=>{const a=Ff(e,t,n);s=w(s);const c=i.La(a);if(s instanceof Lf)r.push(a);else{const t=Df(s,c);null!=t&&(r.push(a),o.set(a,t))}}));const a=new Ha(r);return new Sf(o,a,i.fieldTransforms)}(r,"updateDoc",t._key,e),Qf(i,[o.toMutation(t._key,hu.exists(!0))])}(a,{title:t,description:e,dueDate:n,priority:s,project:i,id:r,status:o})}class np{constructor(t,e,n,s,i,r,o){this.title=t,this.description=e,this.dueDate=n,this.priority=s,this.project=i,this.id=r,this.status=o}getTitle(){return this.title}setTitle(t){this.title=t}getDescription(){return this.description}setDescription(t){this.description=t}getDueDate(){return this.dueDate}setDueDate(t){this.dueDate=t}getPriority(){return this.priority}setPriority(t){this.priority=t}getId(){return this.id}getProject(){return this.project}setProject(t){this.project=t}setId(t){this.id=t}getStatus(){return this.status}setStatus(t){this.status=t}}function sp(t){Fn();const e=Zf.filter((e=>{for(const n in e)if(e[n]===t.currentTarget.id)return e}));!function(t){Cn();const e=vn("h2","project__title");e.textContent=t;const n=document.querySelector(".container"),s=vn("section","todos");n.appendChild(e),n.appendChild(s)}(t.currentTarget.id),e.map((t=>{const e=document.querySelector(".todos");e.appendChild(bn(t.title,t.description,t.dueDate,t.priority,t.project,t.id)),kn.appendChild(e)}))}function ip(t){Fn();let e=[];"today"===t.currentTarget.id?e=Zf.filter((t=>t.dueDate===gn())):"overdue"===t.currentTarget.id?e=Zf.filter((t=>t.dueDate<gn())):"upcoming"===t.currentTarget.id&&(e=Zf.filter((t=>t.dueDate>gn()))),Nn(t.currentTarget.id),Rn(e)}function rp(t){Fn(),Nn(t.currentTarget.id),Rn(Zf)}function op(t,e,n,s,i,r,o){Zf.forEach((a=>{console.log(a.id,r),a.id===r&&(a.title=t,a.description=e,a.dueDate=n,a.priority=s,a.project=i,a.status=o),console.log(a)})),console.log(t,e,n,s,i,r,o),console.log(Zf),ep(t,e,n,s,i,r,o)}function ap(){Fn(),Dn(Xf)}const cp=document.querySelector(".container");function up(){[...cp.children].forEach((t=>{t.remove()})),Fn();const t=vn("div","calc__wrapper"),e=wn("div","calc__container");e.innerHTML='\n        <div class="container2">\n        <div class="display-wrapper">\n            <p class="display calc"></p>\n            <h1 class="display keyPressDisplay">0</h1>\n        </div>\n        <div class="buttons">\n            <button class="btn clear">AC</button>\n            <button class="btn backspace">&#8592;</button>\n            <button class="btn negative">+/-</button>\n            <button class="btn divide">/</button>\n            <button class="btn seven">7</button>\n            <button class="btn eight">8</button>\n            <button class="btn nine">9</button>\n            <button class="btn multiply">x</button>\n            <button class="btn four">4</button>\n            <button class="btn five">5</button>\n            <button class="btn six">6</button>\n            <button class="btn subtract">-</button>\n            <button class="btn one">1</button>\n            <button class="btn two">2</button>\n            <button class="btn three">3</button>\n            <button class="btn add">+</button>\n            <button class="btn zero">0</button>\n            <button class="btn decimal">.</button>\n            <button class="btn equals">=</button>\n        </div>\n    </div>\n    ',t.appendChild(e),cp.appendChild(t),function(){const t=[];let e="",n="";const s=document.querySelector(".keyPressDisplay"),i=document.querySelector(".calc"),r=document.querySelector(".one"),o=document.querySelector(".two"),a=document.querySelector(".three"),c=document.querySelector(".four"),u=document.querySelector(".five"),l=document.querySelector(".six"),h=document.querySelector(".seven"),d=document.querySelector(".eight"),f=document.querySelector(".nine"),p=document.querySelector(".zero"),m=document.querySelector(".decimal"),g=document.querySelector(".add"),y=document.querySelector(".subtract"),v=document.querySelector(".multiply"),w=document.querySelector(".divide"),E=document.querySelector(".equals"),b=document.querySelector(".clear"),I=document.querySelector(".backspace"),T=document.querySelector(".negative");function _(r,o,a){let c=0;if("+"===o?c=function(t,e){return parseFloat(t)+parseFloat(e)}(r,a):"-"===o?c=function(t,e){return parseFloat(t)-parseFloat(e)}(r,a):"*"===o?c=function(t,e){return parseFloat(t)*parseFloat(e)}(r,a):"/"===o&&(c=function(t,e){return 0==e?"ERROR":parseFloat(t)/parseFloat(e)}(r,a)),4===t.length&&"string"==typeof t[3]){let r="";return r+=c,r+=t[3],i.textContent=r,t.shift(),t.shift(),t.shift(),t.unshift(c),s.textContent=c,n="",e="",c}return 3===t.length?(t.length=0,t.push(c),t.shift(),s.textContent=c,i.textContent="",n="",e="",c):c}function S(r){switch("0"===s.textContent.charAt(0)&&(s.textContent=""),r){case"+":case"-":case"*":case"/":if(0===e.length)break;n+=r,n="",i.textContent+=r,t.push(e),e="",s.textContent="",t.push(r);break;case"+/-":if(0===e.length)break;if(e=parseFloat(-1*e),s.textContent=parseFloat(-1*s.textContent),n=parseFloat(-1*n),t.length>0){i.textContent=t[0]+t[1]+n;break}i.textContent=n;break;case"=":if(t.length<3&&"string"!=typeof t[1])break;t.push(e),_(t[0],t[1],t[2]);break;case".":if(e.includes("."))break;n+=r,i.textContent+=r,e+=r;break;default:i.textContent+=r,3===t.length&&"string"==typeof t[1]||2===t.length&&"string"==typeof t[1]?s.textContent="":4===t.length&&"number"==typeof t[1]&&t.shift(),e.length<10&&(e+=r,s.textContent=e,n+=r)}4===t.length&&_(t[0],t[1],t[2])}r.addEventListener("click",(()=>{S(1)})),o.addEventListener("click",(()=>{S(2)})),a.addEventListener("click",(()=>{S(3)})),c.addEventListener("click",(()=>{S(4)})),u.addEventListener("click",(()=>{S(5)})),l.addEventListener("click",(()=>{S(6)})),h.addEventListener("click",(()=>{S(7)})),d.addEventListener("click",(()=>{S(8)})),f.addEventListener("click",(()=>{S(9)})),p.addEventListener("click",(()=>{S(0)})),m.addEventListener("click",(()=>{S(".")})),g.addEventListener("click",(()=>{S("+")})),y.addEventListener("click",(()=>{S("-")})),v.addEventListener("click",(()=>{S("*")})),w.addEventListener("click",(()=>{S("/")})),E.addEventListener("click",(()=>{S("=")})),b.addEventListener("click",(()=>{n="",e="",i.textContent="",s.textContent="0",t.length=0})),I.addEventListener("click",(function(){1===s.textContent.length?(s.textContent="0",i.textContent=i.textContent.slice(0,-1),e=""):s.textContent.length>1&&(s.textContent=s.textContent.slice(0,-1),i.textContent=i.textContent.slice(0,-1),e=e.slice(0,-1))})),T.addEventListener("click",(()=>{S("+/-")}))}()}const lp=document.querySelector(".container");let hp=25,dp=60*hp,fp=0;function pp(){Fn(),[...lp.children].forEach((t=>{t.remove()}));const t=wn("h2","pomodoro__title","Pomodoro");lp.appendChild(t);const e=vn("div","pomodoro__container"),n=vn("div","pomodoro"),s=wn("span","pomodoro__timer","25:00");s.setAttribute("id","timer"),n.appendChild(s),e.appendChild(n);const i=vn("div","pomodoro__buttons"),r=wn("button","pomodoro__button","Start"),o=wn("button","pomodoro__button","Stop");o.setAttribute("id","stop");const a=wn("button","pomodoro__button","Reset");return a.setAttribute("id","reset"),r.addEventListener("click",mp),a.addEventListener("click",yp),i.appendChild(r),i.appendChild(o),i.appendChild(a),e.appendChild(i),lp.appendChild(e),lp}function mp(){const t=document.querySelector(".pomodoro"),e=document.getElementById("timer"),n=document.getElementById("stop"),s=setInterval((function(){let n=Math.floor(dp/60);n=n<10?"0"+n:n;let i=dp%60;if(i=i<10?"0"+i:i,e.textContent=`${n}:${i}`,n<1&&i<1){gp(s),fp++,hp=fp>0?5:25,fp--,5===hp?t.classList.add("end"):t.classList.remove("end"),dp=60*hp;let n=Math.floor(dp/60),i=dp%60;n=n<10?`0${n}`:n,i=i<10?`0${i}`:i,e.textContent=`${n}:${i}`}dp--}),1e3);n.addEventListener("click",(function(){gp(s)}))}function gp(t){clearInterval(t)}function yp(){const t=document.getElementById("timer"),e=document.querySelector(".pomodoro");5===hp?e.classList.add("end"):e.classList.remove("end"),5!==hp&&(hp=25),dp=60*hp;let n=Math.floor(dp/60),s=dp%60;n=n<10?`0${n}`:n,s=s<10?`0${s}`:s,t.textContent=`${n}:${s}`}document.querySelector(".container");const vp=[...document.querySelectorAll(".sidebar__link")],wp=document.getElementById("work"),Ep=document.getElementById("home"),bp=document.getElementById("miscellaneous");const Ip=function(t=K()){const e=j(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=j(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(d(n.getOptions(),null!=e?e:{}))return t;Y(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:hn,persistence:[Oe,ge,ve]})}();document.body.appendChild(function t(){!function(){const t=document.querySelector(".sidebar"),e=document.querySelector(".header"),n=document.querySelector(".add__button");t.classList.add("hide"),e.classList.add("hide"),n.classList.add("hide")}();const e=vn("div","login__container");return e.innerHTML='\n        <div class="form__container">\n    <form action="" class="form">\n    <h2 class="login__title"><i class="fas fa-business-time"> Productiv</i></h2>\n      <div class="form__wrapper">\n        <div class="form__signup ">Sign Up</div>\n        <div class="form__login">Login</div>\n        <div class="form__cover"></div>\n      </div>\n      <div class="form2">\n        <div class="form__section signup">\n        <div class="form__group">\n          <input id="signup__email" type="text" class="form__input" placeholder="">\n          <label class="form__label" for="email">Email</label>\n        </div>\n        <div class="form__group">\n            <input id="signup__password" type="password" class="form__input" placeholder="">\n            <label class="form__label" for="password">Password</label>\n         </div>\n        <div class="form__group">\n            <input id="username" type="text" class="form__input" placeholder="">\n            <label class="form__label" for="username">Username</label>\n        </div>\n        <button type="submit" id="signup" class="form__button">Sign-Up</button>\n        \n      </div>\n        \n       <div class="form__section login hide">\n        <div class="form__group">\n          <input id="login__email" type="text" class="form__input" placeholder="">\n          <label class="form__label" for="email">Email</label>\n        </div>\n        <div class="form__group">\n            <input id="login__password" type="password" class="form__input" placeholder="">\n            <label class="form__label" for="password">Password</label>\n         </div>\n        <button type="submit" id="login" class="form__button">Login</button>\n        <button type="submit" id="demo" class="form__button">Login As Demo User</button>\n      </div>\n      </div>\n      </div>\n    </form>\n  </div>\n    ',Hn.appendChild(e),function(){const e=document.querySelector(".form"),n=document.querySelector(".form__signup"),s=document.querySelector(".form__login"),i=document.querySelector(".form__cover"),r=document.querySelector(".signup"),o=document.querySelector(".login"),a=document.getElementById("login"),c=document.getElementById("signup"),u=document.getElementById("logout"),l=(document.querySelector(".login__container"),document.getElementById("sidebar__logout")),h=document.getElementById("demo");let d="signup";function f(){(function(t){return w(t).signOut()})(Ip).then((()=>{console.log("user signed out"),t(),e.reset(),Jn(!1),document.location.reload()})).catch((t=>{console.log(t.message)}))}(function(t,e,n,s){w(t).onAuthStateChanged((t=>{t&&(console.log("auth state changed"),Un(t.displayName),zn(),Wn(),tp(t.displayName))}),void 0,void 0)})(Ip),s.addEventListener("click",(function(){console.log("login clicked"),i.classList.add("moveRight"),i.classList.remove("moveLeft"),o.classList.remove("hide"),r.classList.add("hide"),d="login"})),n.addEventListener("click",(function(){console.log("signup clicked"),i.classList.add("moveLeft"),i.classList.remove("moveRight"),r.classList.remove("hide"),o.classList.add("hide"),d="signup"})),a.addEventListener("click",(function(t){t.preventDefault();const e=document.getElementById("login__email").value,n=document.getElementById("login__password").value;(function(t,e,n){return async function(t,e){return de(zt(t),e)}(w(t),ee.credential(e,n))})(Ip,e,n).then((t=>{console.log("user logged in",t.user.displayName),Un(t.user.displayName),t.user.photoURL&&(document.getElementById("profile").src=t.user.photoURL),zn(),Wn(),console.log("user loggin in"),Jn(!0)})).catch((t=>{console.log(t.message)}))})),c.addEventListener("click",(function(t){t.preventDefault;const n=document.getElementById("signup__email").value,s=document.getElementById("signup__password").value,i=document.getElementById("username").value;console.log(i),async function(t,e,n){const s=zt(t),i=await async function(t,e){return gt(t,"POST","/v1/accounts:signUp",ft(t,e))}(s,{returnSecureToken:!0,email:e,password:n}),r=await ce._fromIdTokenResponse(s,"signIn",i);return await s._updateCurrentUser(r.user),r}(Ip,n,s).then((t=>{console.log(t.user),async function(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const s=w(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},r=await Tt(s,async function(t,e){return pt(t,"POST","/v1/accounts:update",e)}(s.auth,i));s.displayName=r.displayName||null,s.photoURL=r.photoUrl||null;const o=s.providerData.find((({providerId:t})=>"password"===t));o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(r)}(Ip.currentUser,{displayName:i}),Un(i),zn(),console.log("user siged up"),Jn(!0)})).catch((t=>{console.log(t.message)})),e.reset()})),u.addEventListener("click",f),l.addEventListener("click",f),h.addEventListener("click",(function(t){t.preventDefault();const e=document.getElementById("login__email"),n=document.getElementById("login__password");e.value="demo@email.com",n.value="demo1234"}))}(),Hn}()),window.addEventListener("DOMContentLoaded",(()=>{(function(){const t=document.getElementById("all"),e=document.getElementById("today"),n=document.getElementById("upcoming"),s=document.getElementById("overdue");t.addEventListener("click",rp),e.addEventListener("click",ip),n.addEventListener("click",ip),s.addEventListener("click",ip),wp.addEventListener("click",sp),Ep.addEventListener("click",sp),bp.addEventListener("click",sp),document.getElementById("inbox").addEventListener("click",ap),document.getElementById("calculator").addEventListener("click",up),document.getElementById("pomodoro").addEventListener("click",pp),document.getElementById("dashboard").addEventListener("click",(function(){Bn()})),vp.map((t=>{t.addEventListener("click",(t=>{!function(t){document.querySelector(".header__display").textContent=t.currentTarget.dataset.id,vp.map((t=>{t.classList.remove("active")})),[...document.querySelectorAll(".sidebar__sublinks")].map((t=>{t.classList.contains("showSub")||t.classList.remove("showSub")})),t.currentTarget.nextElementSibling?(t.currentTarget.classList.toggle("active"),t.currentTarget.nextElementSibling.classList.toggle("showSub")):t.currentTarget.classList.add("active")}(t)}))}))})(),function(){const t=document.getElementById("hamburger"),e=document.querySelector(".header__image"),n=document.getElementById("imgUpload");!function(t){t.children[0].src=Mn}(e),t.addEventListener("click",Fn),n.addEventListener("change",qn),e.addEventListener("click",Vn)}(),function(){const t=document.getElementById("add"),e=document.getElementById("create");t.addEventListener("click",(function(){document.querySelector(".form__heading").textContent="Add Task",yn()}));const n=document.getElementById("close");document.getElementById("cancel").addEventListener("click",yn),n.addEventListener("click",yn),e.addEventListener("click",(t=>{!function(t){t.preventDefault();const e=document.getElementById("title").value,n=(document.getElementById("description").value,document.getElementById("date").value),s=(document.getElementById("priority").value,document.getElementById("project").value,document.querySelector(".title__error")),i=document.querySelector(".date__error");""===e.trim()&&(s.textContent="Title must not be blank",setTimeout((function(){s.textContent=" "}),2e3)),""===n&&(i.textContent="Please select a date",setTimeout((function(){i.textContent=" "}),2e3)),n<gn()?(console.log(n,gn()),i.textContent="Date must not be in the past",setTimeout((function(){i.textContent=" "}),3e3)):function(t){t.preventDefault();const e=document.getElementById("title").value,n=document.getElementById("description").value,s=document.getElementById("date").value,i=document.getElementById("priority").value,r=document.getElementById("project").value,o=Math.random(),a=new np(e,n,s,i,r,o,"unread");Zf.push(a),async function(t,e,n,s,i,r,o){const a=pf(Yf,`${Gn()}tasks`,String(r));await function(t,e,n){t=cf(t,hf);const s=cf(t.firestore,gf),i=function(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}(t.converter,e,n);return Qf(s,[Rf(Nf(s),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,hu.none())])}(a,{title:t,description:e,dueDate:n,priority:s,project:i,id:r,status:"unread"})}(e,n,s,i,r,o),s===gn()&&(Xf.unshift(a),xn("add")),yn(),"Inbox"===document.querySelector(".header__display").textContent&&Dn(Xf)}(t)}(t),function(){const t=document.querySelector(".header__display"),e=document.getElementById("dashboard"),n=document.getElementById("inbox"),s=document.getElementById("projects"),i=document.getElementById("tasks"),r=document.getElementById("widgets");"Dashboard"===t.textContent?e.click():"Inbox"===t.textContent?n.click():"Projects"===t.textContent?s.click():"Tasks"===t.textContent?i.click():"Widgets"===t.textContent&&r.click()}()}))}()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Byb2R1Y3Rpdi93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2luZGV4LTE2NzlhMmIyLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL21vZGFsLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL2NyZWF0ZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vc3JjL3NjcmlwdHMvcmVuZGVyVG9kby5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy90b2RvLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy90YXNrcy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9pbmJveC5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vc3JjL3NjcmlwdHMvZGFzaGJvYXJkLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL2F1dGguanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXIvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vc3JjL3NjcmlwdHMvY2FsY3VsYXRvci5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9wb21vZG9yby5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9zaWRlYmFyLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cclxuICovXHJcbmNvbnN0IENPTlNUQU5UUyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXHJcbiAgICAgKi9cclxuICAgIFNES19WRVJTSU9OOiAnJHtKU0NPUkVfVkVSU0lPTn0nXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHByb3ZpZGVkIGFzc2VydGlvbiBpcyBmYWxzeVxyXG4gKi9cclxuY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cclxuICovXHJcbmNvbnN0IGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHBvcyA9IDAsIGMgPSAwO1xyXG4gICAgd2hpbGUgKHBvcyA8IGJ5dGVzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDIzOSAmJiBjMSA8IDM2NSkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGM0ID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cclxuICAgICAgICAgICAgICAgIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQuam9pbignJyk7XHJcbn07XHJcbi8vIFdlIGRlZmluZSBpdCBhcyBhbiBvYmplY3QgbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY2xhc3MgYmVjYXVzZSBhIGNsYXNzIGNvbXBpbGVkIGRvd24gdG8gZXM1IGNhbid0XHJcbi8vIGJlIHRyZWVzaGFrZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy8xNjkxXHJcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXHJcbmNvbnN0IGJhc2U2NCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byBjaGFyYWN0ZXJzLlxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cclxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcclxuICAgICAqL1xyXG4gICAgRU5DT0RFRF9WQUxTX0JBU0U6ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXHJcbiAgICAgKiBzdGFydGVkIGF0IE1vemlsbGEgYnV0IGlzIG5vdyBpbXBsZW1lbnRlZCBieSBtYW55IGJyb3dzZXJzLiBXZSB1c2UgdGhlXHJcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcclxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxyXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gaW5wdXRbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgKyAyIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGU0ID0gYnl0ZTMgJiAweDNmO1xyXG4gICAgICAgICAgICBpZiAoIWhhdmVCeXRlMykge1xyXG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcclxuICAgICAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChieXRlVG9DaGFyTWFwW291dEJ5dGUxXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLCBieXRlVG9DaGFyTWFwW291dEJ5dGU0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbignJyk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBJZiB0cnVlLCB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkkMShpbnB1dCksIHdlYlNhZmUpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxyXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxyXG4gICAgICogYmUgYSBtdWx0aXBsZSBvZiA0LlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcclxuICAgICAqIHBhZGRpbmcgd2lsbCBiZSBpbmZlcnJlZC4gIElmIHRoZSBncm91cCBoYXMgb25lIG9yIHR3byBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzXHJcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgY2hhclRvQnl0ZU1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXHJcbiAqL1xyXG5jb25zdCBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheSQxKHN0cik7XHJcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nICh3aXRob3V0IFwiLlwiIHBhZGRpbmcgaW4gdGhlIGVuZCkuXHJcbiAqIGUuZy4gVXNlZCBpbiBKU09OIFdlYiBUb2tlbiAoSldUKSBwYXJ0cy5cclxuICovXHJcbmNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVXNlIGJhc2U2NHVybCBlbmNvZGluZyBhbmQgcmVtb3ZlIHBhZGRpbmcgaW4gdGhlIGVuZCAoZG90IGNoYXJhY3RlcnMpLlxyXG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShzdHIpLnJlcGxhY2UoL1xcLi9nLCAnJyk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbmNvbnN0IGJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XHJcbn1cclxuLyoqXHJcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cclxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxyXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXHJcbiAqIChhbmQgcmV0dXJuZWQpLlxyXG4gKlxyXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cclxuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXHJcbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXHJcbiAqXHJcbiAqIE5vdGU6IHdlIGRvbid0IG1lcmdlIF9fcHJvdG9fXyB0byBwcmV2ZW50IHByb3RvdHlwZSBwb2xsdXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlID0gc291cmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgY2FzZSBPYmplY3Q6XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBBcnJheTpcclxuICAgICAgICAgICAgLy8gQWx3YXlzIGNvcHkgdGhlIGFycmF5IHNvdXJjZSBhbmQgb3ZlcndyaXRlIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgICAgIHRhcmdldCA9IFtdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcclxuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcclxuICAgICAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSB8fCAhaXNWYWxpZEtleShwcm9wKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XHJcbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XHJcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XHJcbiAqIGlmIGVycm9ycyBvY2N1ciBkdXJpbmcgdGhlIGRhdGFiYXNlIG9wZW4gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XHJcbiAqIHByaXZhdGUgYnJvd3NpbmcpXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBEQl9DSEVDS19OQU1FID0gJ3ZhbGlkYXRlLWJyb3dzZXItY29udGV4dC1mb3ItaW5kZXhlZGRiLWFuYWx5dGljcy1tb2R1bGUnO1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRhdGFiYXNlIG9ubHkgd2hlbiBpdCBkb2Vzbid0IHByZS1leGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3QuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlKSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3Mgd2hldGhlciBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqL1xyXG5mdW5jdGlvbiBhcmVDb29raWVzRW5hYmxlZCgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHRoZSBgZ2xvYmFsVGhpc2Agb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKGUuY29kZSA9PT0gJ3NlcnZpY2UvZmlsZS1ub3QtZm91bmQnKSB7XHJcbiAqICAgICAgIGNvbnNvbGUubG9nKFwiQ291bGQgbm90IHJlYWQgZmlsZTogXCIgKyBlWydmaWxlJ10pO1xyXG4gKiAgICAgfVxyXG4gKiAgIH1cclxuICovXHJcbmNvbnN0IEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjQ3VzdG9tX0Vycm9yX1R5cGVzXHJcbmNsYXNzIEZpcmViYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgIC8qKiBUaGUgZXJyb3IgY29kZSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGNvZGUsIG1lc3NhZ2UsIFxyXG4gICAgLyoqIEN1c3RvbSBkYXRhIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0gY3VzdG9tRGF0YTtcclxuICAgICAgICAvKiogVGhlIGN1c3RvbSBuYW1lIGZvciBhbGwgRmlyZWJhc2VFcnJvcnMuICovXHJcbiAgICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcclxuICAgICAgICAvLyBGaXggRm9yIEVTNVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jbGFzcyBFcnJvckZhY3Rvcnkge1xyXG4gICAgY29uc3RydWN0b3Ioc2VydmljZSwgc2VydmljZU5hbWUsIGVycm9ycykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKGNvZGUsIC4uLmRhdGEpIHtcclxuICAgICAgICBjb25zdCBjdXN0b21EYXRhID0gZGF0YVswXSB8fCB7fTtcclxuICAgICAgICBjb25zdCBmdWxsQ29kZSA9IGAke3RoaXMuc2VydmljZX0vJHtjb2RlfWA7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgJHt0aGlzLnNlcnZpY2VOYW1lfTogJHttZXNzYWdlfSAoJHtmdWxsQ29kZX0pLmA7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIChfLCBrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGRhdGFba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IFN0cmluZyh2YWx1ZSkgOiBgPCR7a2V5fT8+YDtcclxuICAgIH0pO1xyXG59XHJcbmNvbnN0IFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXHJcbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cclxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGxldCBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgICAgICBoZWFkZXIgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMF0pIHx8ICcnKTtcclxuICAgICAgICBjbGFpbXMgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMV0pIHx8ICcnKTtcclxuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcclxuICAgICAgICBkYXRhID0gY2xhaW1zWydkJ10gfHwge307XHJcbiAgICAgICAgZGVsZXRlIGNsYWltc1snZCddO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICB9O1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyB0aW1lLWJhc2VkIGNsYWltcy4gV2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGVcclxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBjb25zdCBub3cgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICBsZXQgdmFsaWRTaW5jZSA9IDAsIHZhbGlkVW50aWwgPSAwO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnbmJmJykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgMjRoIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCEhbm93ICYmXHJcbiAgICAgICAgISF2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgISF2YWxpZFVudGlsICYmXHJcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcclxuICAgICAgICBub3cgPD0gdmFsaWRVbnRpbCk7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIHJldHVybnMgaXRzIGlzc3VlZCBhdCB0aW1lIGlmIHZhbGlkLCBudWxsIG90aGVyd2lzZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBudWxsIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUodG9rZW4pLCBjbGFpbXMgPSBkZWNvZGVkLmNsYWltcztcclxuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xyXG59O1xyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltc1snYWRtaW4nXSA9PT0gdHJ1ZTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xyXG59XHJcbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICBjb25zdCByZXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJlc1trZXldID0gZm4uY2FsbChjb250ZXh0T2JqLCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuLyoqXHJcbiAqIERlZXAgZXF1YWwgdHdvIG9iamVjdHMuIFN1cHBvcnQgQXJyYXlzIGFuZCBPYmplY3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcclxuICAgIGZvciAoY29uc3QgayBvZiBhS2V5cykge1xyXG4gICAgICAgIGlmICghYktleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhUHJvcCA9IGFba107XHJcbiAgICAgICAgY29uc3QgYlByb3AgPSBiW2tdO1xyXG4gICAgICAgIGlmIChpc09iamVjdChhUHJvcCkgJiYgaXNPYmplY3QoYlByb3ApKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGFQcm9wLCBiUHJvcCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgayBvZiBiS2V5cykge1xyXG4gICAgICAgIGlmICghYUtleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGlzT2JqZWN0KHRoaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNzdWVkQXRUaW1lLCBqc29uRXZhbCwgbWFwLCBvcmRpbmFsLCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIExBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBzZXRVc2VyTG9nSGFuZGxlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBkZWVwRXF1YWwgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLztcclxufVxuXG5jb25zdCBuYW1lJG8gPSBcIkBmaXJlYmFzZS9hcHBcIjtcbmNvbnN0IHZlcnNpb24kMSA9IFwiMC43LjEyXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuNi4yXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xyXG5jb25zdCBQTEFURk9STV9MT0dfU1RSSU5HID0ge1xyXG4gICAgW25hbWUkb106ICdmaXJlLWNvcmUnLFxyXG4gICAgW25hbWUkbl06ICdmaXJlLWNvcmUtY29tcGF0JyxcclxuICAgIFtuYW1lJGxdOiAnZmlyZS1hbmFseXRpY3MnLFxyXG4gICAgW25hbWUkbV06ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxyXG4gICAgW25hbWUkal06ICdmaXJlLWFwcC1jaGVjaycsXHJcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRpXTogJ2ZpcmUtYXV0aCcsXHJcbiAgICBbbmFtZSRoXTogJ2ZpcmUtYXV0aC1jb21wYXQnLFxyXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGInLFxyXG4gICAgW25hbWUkZl06ICdmaXJlLXJ0ZGItY29tcGF0JyxcclxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbicsXHJcbiAgICBbbmFtZSRkXTogJ2ZpcmUtZm4tY29tcGF0JyxcclxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQnLFxyXG4gICAgW25hbWUkYl06ICdmaXJlLWlpZC1jb21wYXQnLFxyXG4gICAgW25hbWUkYV06ICdmaXJlLWZjbScsXHJcbiAgICBbbmFtZSQ5XTogJ2ZpcmUtZmNtLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ4XTogJ2ZpcmUtcGVyZicsXHJcbiAgICBbbmFtZSQ3XTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxyXG4gICAgW25hbWUkNl06ICdmaXJlLXJjJyxcclxuICAgIFtuYW1lJDVdOiAnZmlyZS1yYy1jb21wYXQnLFxyXG4gICAgW25hbWUkNF06ICdmaXJlLWdjcycsXHJcbiAgICBbbmFtZSQzXTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQyXTogJ2ZpcmUtZnN0JyxcclxuICAgIFtuYW1lJDFdOiAnZmlyZS1mc3QtY29tcGF0JyxcclxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLFxyXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IF9hcHBzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmNvbnN0IF9jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGFwcC5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwICR7YXBwLm5hbWV9YCwgZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyXHJcbiAqIEByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBpZiAoX2NvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xyXG4gICAgZm9yIChjb25zdCBhcHAgb2YgX2FwcHMudmFsdWVzKCkpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICpcclxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xyXG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShhcHAsIG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0IG9ubHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xyXG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBOT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBGaXJlYmFzZSBBcHAuaW5pdGlhbGl6ZUFwcCgpJyxcclxuICAgIFtcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqL106IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixcclxuICAgIFtcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgb3IgY29uZmlnXCIsXHJcbiAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqL106ICdGaXJzdCBhcmd1bWVudCB0byBgb25Mb2dgIG11c3QgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLidcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FwcCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBjb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPVxyXG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXBwJywgKCkgPT4gdGhpcywgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChvcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi8pKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgaGFuZGxlciBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZyhsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXHJcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsb2dMZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG4iLCJpbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBFcXVhbCwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIEZpcmViYXNlRXJyb3IsIHF1ZXJ5c3RyaW5nLCBnZXRNb2R1bGFySW5zdGFuY2UsIGJhc2U2NERlY29kZSwgZ2V0VUEsIGlzSUUsIGNyZWF0ZVN1YnNjcmliZSwgcXVlcnlzdHJpbmdEZWNvZGUsIGV4dHJhY3RRdWVyeXN0cmluZywgaXNFbXB0eSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFNES19WRVJTSU9OLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBnZXRBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IF9fcmVzdCB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gZW51bSBvZiBmYWN0b3JzIHRoYXQgbWF5IGJlIHVzZWQgZm9yIG11bHRpZmFjdG9yIGF1dGhlbnRpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBGYWN0b3JJZCA9IHtcclxuICAgIC8qKiBQaG9uZSBhcyBzZWNvbmQgZmFjdG9yICovXHJcbiAgICBQSE9ORTogJ3Bob25lJ1xyXG59O1xyXG4vKipcclxuICogRW51bWVyYXRpb24gb2Ygc3VwcG9ydGVkIHByb3ZpZGVycy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgUHJvdmlkZXJJZCA9IHtcclxuICAgIC8qKiBGYWNlYm9vayBwcm92aWRlciBJRCAqL1xyXG4gICAgRkFDRUJPT0s6ICdmYWNlYm9vay5jb20nLFxyXG4gICAgLyoqIEdpdEh1YiBwcm92aWRlciBJRCAqL1xyXG4gICAgR0lUSFVCOiAnZ2l0aHViLmNvbScsXHJcbiAgICAvKiogR29vZ2xlIHByb3ZpZGVyIElEICovXHJcbiAgICBHT09HTEU6ICdnb29nbGUuY29tJyxcclxuICAgIC8qKiBQYXNzd29yZCBwcm92aWRlciAqL1xyXG4gICAgUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogUGhvbmUgcHJvdmlkZXIgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgcHJvdmlkZXIgSUQgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBzaWduLWluIG1ldGhvZHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNpZ25Jbk1ldGhvZCA9IHtcclxuICAgIC8qKiBFbWFpbCBsaW5rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBFTUFJTF9MSU5LOiAnZW1haWxMaW5rJyxcclxuICAgIC8qKiBFbWFpbC9wYXNzd29yZCBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogRmFjZWJvb2sgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGhvbmUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBvcGVyYXRpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IE9wZXJhdGlvblR5cGUgPSB7XHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyBsaW5raW5nIGFuIGFkZGl0aW9uYWwgcHJvdmlkZXIgdG8gYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIExJTks6ICdsaW5rJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHVzaW5nIGEgcHJvdmlkZXIgdG8gcmVhdXRoZW50aWNhdGUgYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIFJFQVVUSEVOVElDQVRFOiAncmVhdXRoZW50aWNhdGUnLFxyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgc2lnbmluZyBpbiBhIHVzZXIuICovXHJcbiAgICBTSUdOX0lOOiAnc2lnbkluJ1xyXG59O1xyXG4vKipcclxuICogQW4gZW51bWVyYXRpb24gb2YgdGhlIHBvc3NpYmxlIGVtYWlsIGFjdGlvbiB0eXBlcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQWN0aW9uQ29kZU9wZXJhdGlvbiA9IHtcclxuICAgIC8qKiBUaGUgZW1haWwgbGluayBzaWduLWluIGFjdGlvbi4gKi9cclxuICAgIEVNQUlMX1NJR05JTjogJ0VNQUlMX1NJR05JTicsXHJcbiAgICAvKiogVGhlIHBhc3N3b3JkIHJlc2V0IGFjdGlvbi4gKi9cclxuICAgIFBBU1NXT1JEX1JFU0VUOiAnUEFTU1dPUkRfUkVTRVQnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCByZXZvY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFJFQ09WRVJfRU1BSUw6ICdSRUNPVkVSX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb24gZW1haWwgYWN0aW9uLiAqL1xyXG4gICAgUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT046ICdSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTicsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOiAnVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCB2ZXJpZmljYXRpb24gYWN0aW9uLiAqL1xyXG4gICAgVkVSSUZZX0VNQUlMOiAnVkVSSUZZX0VNQUlMJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZGVidWdFcnJvck1hcCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgW1wiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyByZXN0cmljdGVkIHRvIGFkbWluaXN0cmF0b3JzIG9ubHkuJyxcclxuICAgICAgICBbXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovXTogJycsXHJcbiAgICAgICAgW1wiYXBwLW5vdC1hdXRob3JpemVkXCIgLyogQVBQX05PVF9BVVRIT1JJWkVEICovXTogXCJUaGlzIGFwcCwgaWRlbnRpZmllZCBieSB0aGUgZG9tYWluIHdoZXJlIGl0J3MgaG9zdGVkLCBpcyBub3QgXCIgK1xyXG4gICAgICAgICAgICAnYXV0aG9yaXplZCB0byB1c2UgRmlyZWJhc2UgQXV0aGVudGljYXRpb24gd2l0aCB0aGUgcHJvdmlkZWQgQVBJIGtleS4gJyArXHJcbiAgICAgICAgICAgICdSZXZpZXcgeW91ciBrZXkgY29uZmlndXJhdGlvbiBpbiB0aGUgR29vZ2xlIEFQSSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wiYXBwLW5vdC1pbnN0YWxsZWRcIiAvKiBBUFBfTk9UX0lOU1RBTExFRCAqL106ICdUaGUgcmVxdWVzdGVkIG1vYmlsZSBhcHBsaWNhdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBpZGVudGlmaWVyICgnICtcclxuICAgICAgICAgICAgJ0FuZHJvaWQgcGFja2FnZSBuYW1lIG9yIGlPUyBidW5kbGUgSUQpIHByb3ZpZGVkIGlzIG5vdCBpbnN0YWxsZWQgb24gJyArXHJcbiAgICAgICAgICAgICd0aGlzIGRldmljZS4nLFxyXG4gICAgICAgIFtcImNhcHRjaGEtY2hlY2stZmFpbGVkXCIgLyogQ0FQVENIQV9DSEVDS19GQUlMRUQgKi9dOiAnVGhlIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBwcm92aWRlZCBpcyBlaXRoZXIgaW52YWxpZCwgZXhwaXJlZCwgJyArXHJcbiAgICAgICAgICAgICdhbHJlYWR5IHVzZWQgb3IgdGhlIGRvbWFpbiBhc3NvY2lhdGVkIHdpdGggaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGxpc3QgJyArXHJcbiAgICAgICAgICAgICdvZiB3aGl0ZWxpc3RlZCBkb21haW5zLicsXHJcbiAgICAgICAgW1wiY29kZS1leHBpcmVkXCIgLyogQ09ERV9FWFBJUkVEICovXTogJ1RoZSBTTVMgY29kZSBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlLXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRyeSAnICtcclxuICAgICAgICAgICAgJ2FnYWluLicsXHJcbiAgICAgICAgW1wiY29yZG92YS1ub3QtcmVhZHlcIiAvKiBDT1JET1ZBX05PVF9SRUFEWSAqL106ICdDb3Jkb3ZhIGZyYW1ld29yayBpcyBub3QgcmVhZHkuJyxcclxuICAgICAgICBbXCJjb3JzLXVuc3VwcG9ydGVkXCIgLyogQ09SU19VTlNVUFBPUlRFRCAqL106ICdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZC4nLFxyXG4gICAgICAgIFtcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovXTogJ1RoaXMgY3JlZGVudGlhbCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIGRpZmZlcmVudCB1c2VyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovXTogJ1RoZSBjdXN0b20gdG9rZW4gY29ycmVzcG9uZHMgdG8gYSBkaWZmZXJlbnQgYXVkaWVuY2UuJyxcclxuICAgICAgICBbXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgc2Vuc2l0aXZlIGFuZCByZXF1aXJlcyByZWNlbnQgYXV0aGVudGljYXRpb24uIExvZyBpbiAnICtcclxuICAgICAgICAgICAgJ2FnYWluIGJlZm9yZSByZXRyeWluZyB0aGlzIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nLFxyXG4gICAgICAgIFtcImR5bmFtaWMtbGluay1ub3QtYWN0aXZhdGVkXCIgLyogRFlOQU1JQ19MSU5LX05PVF9BQ1RJVkFURUQgKi9dOiAnUGxlYXNlIGFjdGl2YXRlIER5bmFtaWMgTGlua3MgaW4gdGhlIEZpcmViYXNlIENvbnNvbGUgYW5kIGFncmVlIHRvIHRoZSB0ZXJtcyBhbmQgJyArXHJcbiAgICAgICAgICAgICdjb25kaXRpb25zLicsXHJcbiAgICAgICAgW1wiZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvblwiIC8qIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT04gKi9dOiAnTXVsdGktZmFjdG9yIHVzZXJzIG11c3QgYWx3YXlzIGhhdmUgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogRU1BSUxfRVhJU1RTICovXTogJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcImVtdWxhdG9yLWNvbmZpZy1mYWlsZWRcIiAvKiBFTVVMQVRPUl9DT05GSUdfRkFJTEVEICovXTogJ0F1dGggaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIG1ha2UgYSBuZXR3b3JrIGNhbGwuIEF1dGggY2FuICcgK1xyXG4gICAgICAgICAgICAnbm8gbG9uZ2VyIGJlIGNvbmZpZ3VyZWQgdG8gdXNlIHRoZSBlbXVsYXRvci4gVHJ5IGNhbGxpbmcgJyArXHJcbiAgICAgICAgICAgICdcImNvbm5lY3RBdXRoRW11bGF0b3IoKVwiIHNvb25lci4nLFxyXG4gICAgICAgIFtcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImNhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0XCIgLyogRVhQSVJFRF9QT1BVUF9SRVFVRVNUICovXTogJ1RoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBkdWUgdG8gYW5vdGhlciBjb25mbGljdGluZyBwb3B1cCBiZWluZyBvcGVuZWQuJyxcclxuICAgICAgICBbXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwcC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9BUFBfQ1JFREVOVElBTCAqL106ICdUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgY29udGFpbnMgYW4gaW52YWxpZCBhcHBsaWNhdGlvbiB2ZXJpZmllci4nICtcclxuICAgICAgICAgICAgJyBUaGUgcmVDQVBUQ0hBIHRva2VuIHJlc3BvbnNlIGlzIGVpdGhlciBpbnZhbGlkIG9yIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwcC1pZFwiIC8qIElOVkFMSURfQVBQX0lEICovXTogJ1RoZSBtb2JpbGUgYXBwIGlkZW50aWZpZXIgaXMgbm90IHJlZ2lzdGVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC11c2VyLXRva2VuXCIgLyogSU5WQUxJRF9BVVRIICovXTogXCJUaGlzIHVzZXIncyBjcmVkZW50aWFsIGlzbid0IHZhbGlkIGZvciB0aGlzIHByb2plY3QuIFRoaXMgY2FuIGhhcHBlbiBcIiArXHJcbiAgICAgICAgICAgIFwiaWYgdGhlIHVzZXIncyB0b2tlbiBoYXMgYmVlbiB0YW1wZXJlZCB3aXRoLCBvciBpZiB0aGUgdXNlciBpc24ndCBmb3IgXCIgK1xyXG4gICAgICAgICAgICAndGhlIHByb2plY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgQVBJIGtleS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIElOVkFMSURfQVVUSF9FVkVOVCAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24tY29kZVwiIC8qIElOVkFMSURfQ09ERSAqL106ICdUaGUgU01TIHZlcmlmaWNhdGlvbiBjb2RlIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgJyArXHJcbiAgICAgICAgICAgICdpbnZhbGlkLiBQbGVhc2UgcmVzZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSBzbXMgYW5kIGJlIHN1cmUgdG8gdXNlIHRoZSAnICtcclxuICAgICAgICAgICAgJ3ZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBJTlZBTElEX0NPTlRJTlVFX1VSSSAqL106ICdUaGUgY29udGludWUgVVJMIHByb3ZpZGVkIGluIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovXTogJ1RoZSBmb2xsb3dpbmcgQ29yZG92YSBwbHVnaW5zIG11c3QgYmUgaW5zdGFsbGVkIHRvIGVuYWJsZSBPQXV0aCBzaWduLWluOiAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWJ1aWxkaW5mbywgY29yZG92YS11bml2ZXJzYWwtbGlua3MtcGx1Z2luLCAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWIsIGNvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3NlciBhbmQgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1jdXN0b211cmxzY2hlbWUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWN1c3RvbS10b2tlblwiIC8qIElOVkFMSURfQ1VTVE9NX1RPS0VOICovXTogJ1RoZSBjdXN0b20gdG9rZW4gZm9ybWF0IGlzIGluY29ycmVjdC4gUGxlYXNlIGNoZWNrIHRoZSBkb2N1bWVudGF0aW9uLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOICovXTogJ1RoZSBwcm92aWRlZCBkeW5hbWljIGxpbmsgZG9tYWluIGlzIG5vdCBjb25maWd1cmVkIG9yIGF1dGhvcml6ZWQgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWVtYWlsXCIgLyogSU5WQUxJRF9FTUFJTCAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBiYWRseSBmb3JtYXR0ZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWVtdWxhdG9yLXNjaGVtZVwiIC8qIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FICovXTogJ0VtdWxhdG9yIFVSTCBtdXN0IHN0YXJ0IHdpdGggYSB2YWxpZCBzY2hlbWUgKGh0dHA6Ly8gb3IgaHR0cHM6Ly8pLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovXTogJ1lvdXIgQVBJIGtleSBpcyBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91IGhhdmUgY29waWVkIGl0IGNvcnJlY3RseS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY2VydC1oYXNoXCIgLyogSU5WQUxJRF9DRVJUX0hBU0ggKi9dOiAnVGhlIFNIQS0xIGNlcnRpZmljYXRlIGhhc2ggcHJvdmlkZWQgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovXTogJ1RoZSBzdXBwbGllZCBhdXRoIGNyZWRlbnRpYWwgaXMgbWFsZm9ybWVkIG9yIGhhcyBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1tZXNzYWdlLXBheWxvYWRcIiAvKiBJTlZBTElEX01FU1NBR0VfUEFZTE9BRCAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgaW4gaXRzIG1lc3NhZ2UuICcgK1xyXG4gICAgICAgICAgICAnUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBJTlZBTElEX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1wcm92aWRlclwiIC8qIElOVkFMSURfT0FVVEhfUFJPVklERVIgKi9dOiAnRW1haWxBdXRoUHJvdmlkZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBvcGVyYXRpb24uIFRoaXMgb3BlcmF0aW9uICcgK1xyXG4gICAgICAgICAgICAnb25seSBzdXBwb3J0cyBPQXV0aCBwcm92aWRlcnMuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW9hdXRoLWNsaWVudC1pZFwiIC8qIElOVkFMSURfT0FVVEhfQ0xJRU5UX0lEICovXTogJ1RoZSBPQXV0aCBjbGllbnQgSUQgcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQgb3IgZG9lcyBub3QgbWF0Y2ggdGhlICcgK1xyXG4gICAgICAgICAgICAnc3BlY2lmaWVkIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogSU5WQUxJRF9PUklHSU4gKi9dOiAnVGhpcyBkb21haW4gaXMgbm90IGF1dGhvcml6ZWQgZm9yIE9BdXRoIG9wZXJhdGlvbnMgZm9yIHlvdXIgRmlyZWJhc2UgJyArXHJcbiAgICAgICAgICAgICdwcm9qZWN0LiBFZGl0IHRoZSBsaXN0IG9mIGF1dGhvcml6ZWQgZG9tYWlucyBmcm9tIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hY3Rpb24tY29kZVwiIC8qIElOVkFMSURfT09CX0NPREUgKi9dOiAnVGhlIGFjdGlvbiBjb2RlIGlzIGludmFsaWQuIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29kZSBpcyBtYWxmb3JtZWQsICcgK1xyXG4gICAgICAgICAgICAnZXhwaXJlZCwgb3IgaGFzIGFscmVhZHkgYmVlbiB1c2VkLicsXHJcbiAgICAgICAgW1wid3JvbmctcGFzc3dvcmRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBpcyBpbnZhbGlkIG9yIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIElOVkFMSURfUEVSU0lTVEVOQ0UgKi9dOiAnVGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlIGlzIGludmFsaWQuIEl0IGNhbiBvbmx5IGJlIGxvY2FsLCBzZXNzaW9uIG9yIG5vbmUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXBob25lLW51bWJlclwiIC8qIElOVkFMSURfUEhPTkVfTlVNQkVSICovXTogJ1RoZSBmb3JtYXQgb2YgdGhlIHBob25lIG51bWJlciBwcm92aWRlZCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBlbnRlciB0aGUgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXIgaW4gYSBmb3JtYXQgdGhhdCBjYW4gYmUgcGFyc2VkIGludG8gRS4xNjQgZm9ybWF0LiBFLjE2NCAnICtcclxuICAgICAgICAgICAgJ3Bob25lIG51bWJlcnMgYXJlIHdyaXR0ZW4gaW4gdGhlIGZvcm1hdCBbK11bY291bnRyeSBjb2RlXVtzdWJzY3JpYmVyICcgK1xyXG4gICAgICAgICAgICAnbnVtYmVyIGluY2x1ZGluZyBhcmVhIGNvZGVdLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1wcm92aWRlci1pZFwiIC8qIElOVkFMSURfUFJPVklERVJfSUQgKi9dOiAnVGhlIHNwZWNpZmllZCBwcm92aWRlciBJRCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZWNpcGllbnQtZW1haWxcIiAvKiBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTCAqL106ICdUaGUgZW1haWwgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBmYWlsZWQgdG8gc2VuZCBhcyB0aGUgcHJvdmlkZWQgJyArXHJcbiAgICAgICAgICAgICdyZWNpcGllbnQgZW1haWwgYWRkcmVzcyBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1zZW5kZXJcIiAvKiBJTlZBTElEX1NFTkRFUiAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBhbiBpbnZhbGlkIHNlbmRlciBlbWFpbCBvciBuYW1lLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovXTogJ1RoZSB2ZXJpZmljYXRpb24gSUQgdXNlZCB0byBjcmVhdGUgdGhlIHBob25lIGF1dGggY3JlZGVudGlhbCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC10ZW5hbnQtaWRcIiAvKiBJTlZBTElEX1RFTkFOVF9JRCAqL106IFwiVGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSUQgaXMgaW52YWxpZC5cIixcclxuICAgICAgICBbXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovXTogJ0FuIEFuZHJvaWQgUGFja2FnZSBOYW1lIG11c3QgYmUgcHJvdmlkZWQgaWYgdGhlIEFuZHJvaWQgQXBwIGlzIHJlcXVpcmVkIHRvIGJlIGluc3RhbGxlZC4nLFxyXG4gICAgICAgIFtcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi9dOiAnQmUgc3VyZSB0byBpbmNsdWRlIGF1dGhEb21haW4gd2hlbiBjYWxsaW5nIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKSwgJyArXHJcbiAgICAgICAgICAgICdieSBmb2xsb3dpbmcgdGhlIGluc3RydWN0aW9ucyBpbiB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctYXBwLWNyZWRlbnRpYWxcIiAvKiBNSVNTSU5HX0FQUF9DUkVERU5USUFMICovXTogJ1RoZSBwaG9uZSB2ZXJpZmljYXRpb24gcmVxdWVzdCBpcyBtaXNzaW5nIGFuIGFwcGxpY2F0aW9uIHZlcmlmaWVyICcgK1xyXG4gICAgICAgICAgICAnYXNzZXJ0aW9uLiBBIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBuZWVkcyB0byBiZSBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBNSVNTSU5HX0NPREUgKi9dOiAnVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IFNNUyB2ZXJpZmljYXRpb24gY29kZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctY29udGludWUtdXJpXCIgLyogTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiAnQSBjb250aW51ZSBVUkwgbXVzdCBiZSBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaWZyYW1lLXN0YXJ0XCIgLyogTUlTU0lOR19JRlJBTUVfU1RBUlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIE1JU1NJTkdfSU9TX0JVTkRMRV9JRCAqL106ICdBbiBpT1MgQnVuZGxlIElEIG11c3QgYmUgcHJvdmlkZWQgaWYgYW4gQXBwIFN0b3JlIElEIGlzIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1vci1pbnZhbGlkLW5vbmNlXCIgLyogTUlTU0lOR19PUl9JTlZBTElEX05PTkNFICovXTogJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBub25jZS4gVGhpcyBjYW4gb2NjdXIgaWYgdGhlICcgK1xyXG4gICAgICAgICAgICAnU0hBLTI1NiBoYXNoIG9mIHRoZSBwcm92aWRlZCByYXcgbm9uY2UgZG9lcyBub3QgbWF0Y2ggdGhlIGhhc2hlZCBub25jZSAnICtcclxuICAgICAgICAgICAgJ2luIHRoZSBJRCB0b2tlbiBwYXlsb2FkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi9dOiAnTm8gc2Vjb25kIGZhY3RvciBpZGVudGlmaWVyIGlzIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIE1JU1NJTkdfTUZBX1NFU1NJT04gKi9dOiAnVGhlIHJlcXVlc3QgaXMgbWlzc2luZyBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1waG9uZS1udW1iZXJcIiAvKiBNSVNTSU5HX1BIT05FX05VTUJFUiAqL106ICdUbyBzZW5kIHZlcmlmaWNhdGlvbiBjb2RlcywgcHJvdmlkZSBhIHBob25lIG51bWJlciBmb3IgdGhlIHJlY2lwaWVudC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIgLyogTUlTU0lOR19TRVNTSU9OX0lORk8gKi9dOiAnVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IHZlcmlmaWNhdGlvbiBJRC4nLFxyXG4gICAgICAgIFtcImFwcC1kZWxldGVkXCIgLyogTU9EVUxFX0RFU1RST1lFRCAqL106ICdUaGlzIGluc3RhbmNlIG9mIEZpcmViYXNlQXBwIGhhcyBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBNRkFfSU5GT19OT1RfRk9VTkQgKi9dOiAnVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHNlY29uZCBmYWN0b3IgbWF0Y2hpbmcgdGhlIGlkZW50aWZpZXIgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqL106ICdQcm9vZiBvZiBvd25lcnNoaXAgb2YgYSBzZWNvbmQgZmFjdG9yIGlzIHJlcXVpcmVkIHRvIGNvbXBsZXRlIHNpZ24taW4uJyxcclxuICAgICAgICBbXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi9dOiAnQW4gYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3MgYnV0IGRpZmZlcmVudCAnICtcclxuICAgICAgICAgICAgJ3NpZ24taW4gY3JlZGVudGlhbHMuIFNpZ24gaW4gdXNpbmcgYSBwcm92aWRlciBhc3NvY2lhdGVkIHdpdGggdGhpcyAnICtcclxuICAgICAgICAgICAgJ2VtYWlsIGFkZHJlc3MuJyxcclxuICAgICAgICBbXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqL106ICdBIG5ldHdvcmsgQXV0aEVycm9yIChzdWNoIGFzIHRpbWVvdXQsIGludGVycnVwdGVkIGNvbm5lY3Rpb24gb3IgdW5yZWFjaGFibGUgaG9zdCkgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibm8tYXV0aC1ldmVudFwiIC8qIE5PX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm5vLXN1Y2gtcHJvdmlkZXJcIiAvKiBOT19TVUNIX1BST1ZJREVSICovXTogJ1VzZXIgd2FzIG5vdCBsaW5rZWQgdG8gYW4gYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcIm51bGwtdXNlclwiIC8qIE5VTExfVVNFUiAqL106ICdBIG51bGwgdXNlciBvYmplY3Qgd2FzIHByb3ZpZGVkIGFzIHRoZSBhcmd1bWVudCBmb3IgYW4gb3BlcmF0aW9uIHdoaWNoICcgK1xyXG4gICAgICAgICAgICAncmVxdWlyZXMgYSBub24tbnVsbCB1c2VyIG9iamVjdC4nLFxyXG4gICAgICAgIFtcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIE9QRVJBVElPTl9OT1RfQUxMT1dFRCAqL106ICdUaGUgZ2l2ZW4gc2lnbi1pbiBwcm92aWRlciBpcyBkaXNhYmxlZCBmb3IgdGhpcyBGaXJlYmFzZSBwcm9qZWN0LiAnICtcclxuICAgICAgICAgICAgJ0VuYWJsZSBpdCBpbiB0aGUgRmlyZWJhc2UgY29uc29sZSwgdW5kZXIgdGhlIHNpZ24taW4gbWV0aG9kIHRhYiBvZiB0aGUgJyArXHJcbiAgICAgICAgICAgICdBdXRoIHNlY3Rpb24uJyxcclxuICAgICAgICBbXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGUgZW52aXJvbm1lbnQgdGhpcyBhcHBsaWNhdGlvbiBpcyAnICtcclxuICAgICAgICAgICAgJ3J1bm5pbmcgb24uIFwibG9jYXRpb24ucHJvdG9jb2xcIiBtdXN0IGJlIGh0dHAsIGh0dHBzIG9yIGNocm9tZS1leHRlbnNpb24nICtcclxuICAgICAgICAgICAgJyBhbmQgd2ViIHN0b3JhZ2UgbXVzdCBiZSBlbmFibGVkLicsXHJcbiAgICAgICAgW1wicG9wdXAtYmxvY2tlZFwiIC8qIFBPUFVQX0JMT0NLRUQgKi9dOiAnVW5hYmxlIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgcG9wdXAuIEl0IG1heSBoYXZlIGJlZW4gYmxvY2tlZCBieSB0aGUgYnJvd3Nlci4nLFxyXG4gICAgICAgIFtcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi9dOiAnVGhlIHBvcHVwIGhhcyBiZWVuIGNsb3NlZCBieSB0aGUgdXNlciBiZWZvcmUgZmluYWxpemluZyB0aGUgb3BlcmF0aW9uLicsXHJcbiAgICAgICAgW1wicHJvdmlkZXItYWxyZWFkeS1saW5rZWRcIiAvKiBQUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL106ICdVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcInF1b3RhLWV4Y2VlZGVkXCIgLyogUVVPVEFfRVhDRUVERUQgKi9dOiBcIlRoZSBwcm9qZWN0J3MgcXVvdGEgZm9yIHRoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGV4Y2VlZGVkLlwiLFxyXG4gICAgICAgIFtcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCIgLyogUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVIgKi9dOiAnVGhlIHJlZGlyZWN0IG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcuJyxcclxuICAgICAgICBbXCJyZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZ1wiIC8qIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HICovXTogJ0EgcmVkaXJlY3Qgc2lnbi1pbiBvcGVyYXRpb24gaXMgYWxyZWFkeSBwZW5kaW5nLicsXHJcbiAgICAgICAgW1wicmVqZWN0ZWQtY3JlZGVudGlhbFwiIC8qIFJFSkVDVEVEX0NSRURFTlRJQUwgKi9dOiAnVGhlIHJlcXVlc3QgY29udGFpbnMgbWFsZm9ybWVkIG9yIG1pc21hdGNoaW5nIGNyZWRlbnRpYWxzLicsXHJcbiAgICAgICAgW1wic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqL106ICdUaGUgc2Vjb25kIGZhY3RvciBpcyBhbHJlYWR5IGVucm9sbGVkIG9uIHRoaXMgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcIm1heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiAnVGhlIG1heGltdW0gYWxsb3dlZCBudW1iZXIgb2Ygc2Vjb25kIGZhY3RvcnMgb24gYSB1c2VyIGhhcyBiZWVuIGV4Y2VlZGVkLicsXHJcbiAgICAgICAgW1widGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovXTogXCJUaGUgcHJvdmlkZWQgdGVuYW50IElEIGRvZXMgbm90IG1hdGNoIHRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEXCIsXHJcbiAgICAgICAgW1widGltZW91dFwiIC8qIFRJTUVPVVQgKi9dOiAnVGhlIG9wZXJhdGlvbiBoYXMgdGltZWQgb3V0LicsXHJcbiAgICAgICAgW1widXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqL106IFwiVGhlIHVzZXIncyBjcmVkZW50aWFsIGlzIG5vIGxvbmdlciB2YWxpZC4gVGhlIHVzZXIgbXVzdCBzaWduIGluIGFnYWluLlwiLFxyXG4gICAgICAgIFtcInRvby1tYW55LXJlcXVlc3RzXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovXTogJ1dlIGhhdmUgYmxvY2tlZCBhbGwgcmVxdWVzdHMgZnJvbSB0aGlzIGRldmljZSBkdWUgdG8gdW51c3VhbCBhY3Rpdml0eS4gJyArXHJcbiAgICAgICAgICAgICdUcnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqL106ICdUaGUgZG9tYWluIG9mIHRoZSBjb250aW51ZSBVUkwgaXMgbm90IHdoaXRlbGlzdGVkLiAgUGxlYXNlIHdoaXRlbGlzdCAnICtcclxuICAgICAgICAgICAgJ3RoZSBkb21haW4gaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJ1bnN1cHBvcnRlZC1maXJzdC1mYWN0b3JcIiAvKiBVTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1IgKi9dOiAnRW5yb2xsaW5nIGEgc2Vjb25kIGZhY3RvciBvciBzaWduaW5nIGluIHdpdGggYSBtdWx0aS1mYWN0b3IgYWNjb3VudCByZXF1aXJlcyBzaWduLWluIHdpdGggYSBzdXBwb3J0ZWQgZmlyc3QgZmFjdG9yLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBjdXJyZW50IGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgdGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvblwiIC8qIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT04gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBhIG11bHRpLXRlbmFudCBjb250ZXh0LicsXHJcbiAgICAgICAgW1widW52ZXJpZmllZC1lbWFpbFwiIC8qIFVOVkVSSUZJRURfRU1BSUwgKi9dOiAnVGhlIG9wZXJhdGlvbiByZXF1aXJlcyBhIHZlcmlmaWVkIGVtYWlsLicsXHJcbiAgICAgICAgW1widXNlci1jYW5jZWxsZWRcIiAvKiBVU0VSX0NBTkNFTExFRCAqL106ICdUaGUgdXNlciBkaWQgbm90IGdyYW50IHlvdXIgYXBwbGljYXRpb24gdGhlIHBlcm1pc3Npb25zIGl0IHJlcXVlc3RlZC4nLFxyXG4gICAgICAgIFtcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovXTogJ1RoZXJlIGlzIG5vIHVzZXIgcmVjb3JkIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBpZGVudGlmaWVyLiBUaGUgdXNlciBtYXkgJyArXHJcbiAgICAgICAgICAgICdoYXZlIGJlZW4gZGVsZXRlZC4nLFxyXG4gICAgICAgIFtcInVzZXItZGlzYWJsZWRcIiAvKiBVU0VSX0RJU0FCTEVEICovXTogJ1RoZSB1c2VyIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgYW4gYWRtaW5pc3RyYXRvci4nLFxyXG4gICAgICAgIFtcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovXTogJ1RoZSBzdXBwbGllZCBjcmVkZW50aWFscyBkbyBub3QgY29ycmVzcG9uZCB0byB0aGUgcHJldmlvdXNseSBzaWduZWQgaW4gdXNlci4nLFxyXG4gICAgICAgIFtcInVzZXItc2lnbmVkLW91dFwiIC8qIFVTRVJfU0lHTkVEX09VVCAqL106ICcnLFxyXG4gICAgICAgIFtcIndlYWstcGFzc3dvcmRcIiAvKiBXRUFLX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBtdXN0IGJlIDYgY2hhcmFjdGVycyBsb25nIG9yIG1vcmUuJyxcclxuICAgICAgICBbXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiIC8qIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEICovXTogJ1RoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkIG9yIDNyZCBwYXJ0eSBjb29raWVzIGFuZCBkYXRhIG1heSBiZSBkaXNhYmxlZC4nLFxyXG4gICAgICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBdXRoKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgJ2RpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVBdXRoKCkgd2l0aCB0aGUgJyArXHJcbiAgICAgICAgICAgICdzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0QXV0aCgpIHRvIHJldHVybiB0aGUnICtcclxuICAgICAgICAgICAgJyBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLidcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gX3Byb2RFcnJvck1hcCgpIHtcclxuICAgIC8vIFdlIHdpbGwgaW5jbHVkZSB0aGlzIG9uZSBtZXNzYWdlIGluIHRoZSBwcm9kIGVycm9yIG1hcCBzaW5jZSBieSB0aGUgdmVyeVxyXG4gICAgLy8gbmF0dXJlIG9mIHRoaXMgZXJyb3IsIGRldmVsb3BlcnMgd2lsbCBuZXZlciBiZSBhYmxlIHRvIHNlZSB0aGUgbWVzc2FnZVxyXG4gICAgLy8gdXNpbmcgdGhlIGRlYnVnRXJyb3JNYXAgKHdoaWNoIGlzIGluc3RhbGxlZCBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbikuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi9dOiAnQW5vdGhlciBGaXJlYmFzZSBTREsgd2FzIGluaXRpYWxpemVkIGFuZCBpcyB0cnlpbmcgdG8gdXNlIEF1dGggYmVmb3JlIEF1dGggaXMgJyArXHJcbiAgICAgICAgICAgICdpbml0aWFsaXplZC4gUGxlYXNlIGJlIHN1cmUgdG8gY2FsbCBgaW5pdGlhbGl6ZUF1dGhgIG9yIGBnZXRBdXRoYCBiZWZvcmUgJyArXHJcbiAgICAgICAgICAgICdzdGFydGluZyBhbnkgb3RoZXIgRmlyZWJhc2UgU0RLLidcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIEEgdmVyYm9zZSBlcnJvciBtYXAgd2l0aCBkZXRhaWxlZCBkZXNjcmlwdGlvbnMgZm9yIG1vc3QgZXJyb3IgY29kZXMuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGRlYnVnRXJyb3JNYXAgPSBfZGVidWdFcnJvck1hcDtcclxuLyoqXHJcbiAqIEEgbWluaW1hbCBlcnJvciBtYXAgd2l0aCBhbGwgdmVyYm9zZSBlcnJvciBtZXNzYWdlcyBzdHJpcHBlZC5cclxuICpcclxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgcHJvZEVycm9yTWFwID0gX3Byb2RFcnJvck1hcDtcclxuY29uc3QgX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIF9wcm9kRXJyb3JNYXAoKSk7XHJcbi8qKlxyXG4gKiBBIG1hcCBvZiBwb3RlbnRpYWwgYEF1dGhgIGVycm9yIGNvZGVzLCBmb3IgZWFzaWVyIGNvbXBhcmlzb24gd2l0aCBlcnJvcnNcclxuICogdGhyb3duIGJ5IHRoZSBTREsuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE5vdGUgdGhhdCB5b3UgY2FuJ3QgdHJlZS1zaGFrZSBpbmRpdmlkdWFsIGtleXNcclxuICogaW4gdGhlIG1hcCwgc28gYnkgdXNpbmcgdGhlIG1hcCB5b3UgbWlnaHQgc3Vic3RhbnRpYWxseSBpbmNyZWFzZSB5b3VyXHJcbiAqIGJ1bmRsZSBzaXplLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBBVVRIX0VSUk9SX0NPREVTX01BUF9ET19OT1RfVVNFX0lOVEVSTkFMTFkgPSB7XHJcbiAgICBBRE1JTl9PTkxZX09QRVJBVElPTjogJ2F1dGgvYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb24nLFxyXG4gICAgQVJHVU1FTlRfRVJST1I6ICdhdXRoL2FyZ3VtZW50LWVycm9yJyxcclxuICAgIEFQUF9OT1RfQVVUSE9SSVpFRDogJ2F1dGgvYXBwLW5vdC1hdXRob3JpemVkJyxcclxuICAgIEFQUF9OT1RfSU5TVEFMTEVEOiAnYXV0aC9hcHAtbm90LWluc3RhbGxlZCcsXHJcbiAgICBDQVBUQ0hBX0NIRUNLX0ZBSUxFRDogJ2F1dGgvY2FwdGNoYS1jaGVjay1mYWlsZWQnLFxyXG4gICAgQ09ERV9FWFBJUkVEOiAnYXV0aC9jb2RlLWV4cGlyZWQnLFxyXG4gICAgQ09SRE9WQV9OT1RfUkVBRFk6ICdhdXRoL2NvcmRvdmEtbm90LXJlYWR5JyxcclxuICAgIENPUlNfVU5TVVBQT1JURUQ6ICdhdXRoL2NvcnMtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRTogJ2F1dGgvY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBDUkVERU5USUFMX01JU01BVENIOiAnYXV0aC9jdXN0b20tdG9rZW4tbWlzbWF0Y2gnLFxyXG4gICAgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOOiAnYXV0aC9yZXF1aXJlcy1yZWNlbnQtbG9naW4nLFxyXG4gICAgREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIOiAnYXV0aC9kZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoJyxcclxuICAgIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEOiAnYXV0aC9keW5hbWljLWxpbmstbm90LWFjdGl2YXRlZCcsXHJcbiAgICBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OOiAnYXV0aC9lbWFpbC1jaGFuZ2UtbmVlZHMtdmVyaWZpY2F0aW9uJyxcclxuICAgIEVNQUlMX0VYSVNUUzogJ2F1dGgvZW1haWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgRU1VTEFUT1JfQ09ORklHX0ZBSUxFRDogJ2F1dGgvZW11bGF0b3ItY29uZmlnLWZhaWxlZCcsXHJcbiAgICBFWFBJUkVEX09PQl9DT0RFOiAnYXV0aC9leHBpcmVkLWFjdGlvbi1jb2RlJyxcclxuICAgIEVYUElSRURfUE9QVVBfUkVRVUVTVDogJ2F1dGgvY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3QnLFxyXG4gICAgSU5URVJOQUxfRVJST1I6ICdhdXRoL2ludGVybmFsLWVycm9yJyxcclxuICAgIElOVkFMSURfQVBJX0tFWTogJ2F1dGgvaW52YWxpZC1hcGkta2V5JyxcclxuICAgIElOVkFMSURfQVBQX0NSRURFTlRJQUw6ICdhdXRoL2ludmFsaWQtYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9BUFBfSUQ6ICdhdXRoL2ludmFsaWQtYXBwLWlkJyxcclxuICAgIElOVkFMSURfQVVUSDogJ2F1dGgvaW52YWxpZC11c2VyLXRva2VuJyxcclxuICAgIElOVkFMSURfQVVUSF9FVkVOVDogJ2F1dGgvaW52YWxpZC1hdXRoLWV2ZW50JyxcclxuICAgIElOVkFMSURfQ0VSVF9IQVNIOiAnYXV0aC9pbnZhbGlkLWNlcnQtaGFzaCcsXHJcbiAgICBJTlZBTElEX0NPREU6ICdhdXRoL2ludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGUnLFxyXG4gICAgSU5WQUxJRF9DT05USU5VRV9VUkk6ICdhdXRoL2ludmFsaWQtY29udGludWUtdXJpJyxcclxuICAgIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OOiAnYXV0aC9pbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvbicsXHJcbiAgICBJTlZBTElEX0NVU1RPTV9UT0tFTjogJ2F1dGgvaW52YWxpZC1jdXN0b20tdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOOiAnYXV0aC9pbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW4nLFxyXG4gICAgSU5WQUxJRF9FTUFJTDogJ2F1dGgvaW52YWxpZC1lbWFpbCcsXHJcbiAgICBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRTogJ2F1dGgvaW52YWxpZC1lbXVsYXRvci1zY2hlbWUnLFxyXG4gICAgSU5WQUxJRF9JRFBfUkVTUE9OU0U6ICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCcsXHJcbiAgICBJTlZBTElEX01FU1NBR0VfUEFZTE9BRDogJ2F1dGgvaW52YWxpZC1tZXNzYWdlLXBheWxvYWQnLFxyXG4gICAgSU5WQUxJRF9NRkFfU0VTU0lPTjogJ2F1dGgvaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBJTlZBTElEX09BVVRIX0NMSUVOVF9JRDogJ2F1dGgvaW52YWxpZC1vYXV0aC1jbGllbnQtaWQnLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9QUk9WSURFUjogJ2F1dGgvaW52YWxpZC1vYXV0aC1wcm92aWRlcicsXHJcbiAgICBJTlZBTElEX09PQl9DT0RFOiAnYXV0aC9pbnZhbGlkLWFjdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfT1JJR0lOOiAnYXV0aC91bmF1dGhvcml6ZWQtZG9tYWluJyxcclxuICAgIElOVkFMSURfUEFTU1dPUkQ6ICdhdXRoL3dyb25nLXBhc3N3b3JkJyxcclxuICAgIElOVkFMSURfUEVSU0lTVEVOQ0U6ICdhdXRoL2ludmFsaWQtcGVyc2lzdGVuY2UtdHlwZScsXHJcbiAgICBJTlZBTElEX1BIT05FX05VTUJFUjogJ2F1dGgvaW52YWxpZC1waG9uZS1udW1iZXInLFxyXG4gICAgSU5WQUxJRF9QUk9WSURFUl9JRDogJ2F1dGgvaW52YWxpZC1wcm92aWRlci1pZCcsXHJcbiAgICBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTDogJ2F1dGgvaW52YWxpZC1yZWNpcGllbnQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9TRU5ERVI6ICdhdXRoL2ludmFsaWQtc2VuZGVyJyxcclxuICAgIElOVkFMSURfU0VTU0lPTl9JTkZPOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1pZCcsXHJcbiAgICBJTlZBTElEX1RFTkFOVF9JRDogJ2F1dGgvaW52YWxpZC10ZW5hbnQtaWQnLFxyXG4gICAgTUZBX0lORk9fTk9UX0ZPVU5EOiAnYXV0aC9tdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmQnLFxyXG4gICAgTUZBX1JFUVVJUkVEOiAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcsXHJcbiAgICBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FOiAnYXV0aC9taXNzaW5nLWFuZHJvaWQtcGtnLW5hbWUnLFxyXG4gICAgTUlTU0lOR19BUFBfQ1JFREVOVElBTDogJ2F1dGgvbWlzc2luZy1hcHAtY3JlZGVudGlhbCcsXHJcbiAgICBNSVNTSU5HX0FVVEhfRE9NQUlOOiAnYXV0aC9hdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19DT0RFOiAnYXV0aC9taXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIE1JU1NJTkdfQ09OVElOVUVfVVJJOiAnYXV0aC9taXNzaW5nLWNvbnRpbnVlLXVyaScsXHJcbiAgICBNSVNTSU5HX0lGUkFNRV9TVEFSVDogJ2F1dGgvbWlzc2luZy1pZnJhbWUtc3RhcnQnLFxyXG4gICAgTUlTU0lOR19JT1NfQlVORExFX0lEOiAnYXV0aC9taXNzaW5nLWlvcy1idW5kbGUtaWQnLFxyXG4gICAgTUlTU0lOR19PUl9JTlZBTElEX05PTkNFOiAnYXV0aC9taXNzaW5nLW9yLWludmFsaWQtbm9uY2UnLFxyXG4gICAgTUlTU0lOR19NRkFfSU5GTzogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mbycsXHJcbiAgICBNSVNTSU5HX01GQV9TRVNTSU9OOiAnYXV0aC9taXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uJyxcclxuICAgIE1JU1NJTkdfUEhPTkVfTlVNQkVSOiAnYXV0aC9taXNzaW5nLXBob25lLW51bWJlcicsXHJcbiAgICBNSVNTSU5HX1NFU1NJT05fSU5GTzogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgTU9EVUxFX0RFU1RST1lFRDogJ2F1dGgvYXBwLWRlbGV0ZWQnLFxyXG4gICAgTkVFRF9DT05GSVJNQVRJT046ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnLFxyXG4gICAgTkVUV09SS19SRVFVRVNUX0ZBSUxFRDogJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcsXHJcbiAgICBOVUxMX1VTRVI6ICdhdXRoL251bGwtdXNlcicsXHJcbiAgICBOT19BVVRIX0VWRU5UOiAnYXV0aC9uby1hdXRoLWV2ZW50JyxcclxuICAgIE5PX1NVQ0hfUFJPVklERVI6ICdhdXRoL25vLXN1Y2gtcHJvdmlkZXInLFxyXG4gICAgT1BFUkFUSU9OX05PVF9BTExPV0VEOiAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnLFxyXG4gICAgT1BFUkFUSU9OX05PVF9TVVBQT1JURUQ6ICdhdXRoL29wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnQnLFxyXG4gICAgUE9QVVBfQkxPQ0tFRDogJ2F1dGgvcG9wdXAtYmxvY2tlZCcsXHJcbiAgICBQT1BVUF9DTE9TRURfQllfVVNFUjogJ2F1dGgvcG9wdXAtY2xvc2VkLWJ5LXVzZXInLFxyXG4gICAgUFJPVklERVJfQUxSRUFEWV9MSU5LRUQ6ICdhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkJyxcclxuICAgIFFVT1RBX0VYQ0VFREVEOiAnYXV0aC9xdW90YS1leGNlZWRlZCcsXHJcbiAgICBSRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUjogJ2F1dGgvcmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXInLFxyXG4gICAgUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkc6ICdhdXRoL3JlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nJyxcclxuICAgIFJFSkVDVEVEX0NSRURFTlRJQUw6ICdhdXRoL3JlamVjdGVkLWNyZWRlbnRpYWwnLFxyXG4gICAgU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEOiAnYXV0aC9zZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQ6ICdhdXRoL21heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZCcsXHJcbiAgICBURU5BTlRfSURfTUlTTUFUQ0g6ICdhdXRoL3RlbmFudC1pZC1taXNtYXRjaCcsXHJcbiAgICBUSU1FT1VUOiAnYXV0aC90aW1lb3V0JyxcclxuICAgIFRPS0VOX0VYUElSRUQ6ICdhdXRoL3VzZXItdG9rZW4tZXhwaXJlZCcsXHJcbiAgICBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVI6ICdhdXRoL3Rvby1tYW55LXJlcXVlc3RzJyxcclxuICAgIFVOQVVUSE9SSVpFRF9ET01BSU46ICdhdXRoL3VuYXV0aG9yaXplZC1jb250aW51ZS11cmknLFxyXG4gICAgVU5TVVBQT1JURURfRklSU1RfRkFDVE9SOiAnYXV0aC91bnN1cHBvcnRlZC1maXJzdC1mYWN0b3InLFxyXG4gICAgVU5TVVBQT1JURURfUEVSU0lTVEVOQ0U6ICdhdXRoL3Vuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTjogJ2F1dGgvdW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvbicsXHJcbiAgICBVTlZFUklGSUVEX0VNQUlMOiAnYXV0aC91bnZlcmlmaWVkLWVtYWlsJyxcclxuICAgIFVTRVJfQ0FOQ0VMTEVEOiAnYXV0aC91c2VyLWNhbmNlbGxlZCcsXHJcbiAgICBVU0VSX0RFTEVURUQ6ICdhdXRoL3VzZXItbm90LWZvdW5kJyxcclxuICAgIFVTRVJfRElTQUJMRUQ6ICdhdXRoL3VzZXItZGlzYWJsZWQnLFxyXG4gICAgVVNFUl9NSVNNQVRDSDogJ2F1dGgvdXNlci1taXNtYXRjaCcsXHJcbiAgICBVU0VSX1NJR05FRF9PVVQ6ICdhdXRoL3VzZXItc2lnbmVkLW91dCcsXHJcbiAgICBXRUFLX1BBU1NXT1JEOiAnYXV0aC93ZWFrLXBhc3N3b3JkJyxcclxuICAgIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEOiAnYXV0aC93ZWItc3RvcmFnZS11bnN1cHBvcnRlZCcsXHJcbiAgICBBTFJFQURZX0lOSVRJQUxJWkVEOiAnYXV0aC9hbHJlYWR5LWluaXRpYWxpemVkJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dDbGllbnQgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXV0aCcpO1xyXG5mdW5jdGlvbiBfbG9nRXJyb3IobXNnLCAuLi5hcmdzKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XHJcbiAgICAgICAgbG9nQ2xpZW50LmVycm9yKGBBdXRoICgke1NES19WRVJTSU9OfSk6ICR7bXNnfWAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9mYWlsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUVycm9yKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHJldHVybiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcm9kRXJyb3JNYXAoKSksIHsgW2NvZGVdOiBtZXNzYWdlIH0pO1xyXG4gICAgY29uc3QgZmFjdG9yeSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBlcnJvck1hcCk7XHJcbiAgICByZXR1cm4gZmFjdG9yeS5jcmVhdGUoY29kZSwge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIF9hc3NlcnRJbnN0YW5jZU9mKGF1dGgsIG9iamVjdCwgaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IGNvbnN0cnVjdG9ySW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9ySW5zdGFuY2UpKSB7XHJcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9ySW5zdGFuY2UubmFtZSAhPT0gb2JqZWN0LmNvbnN0cnVjdG9yLm5hbWUpIHtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UoYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovLCBgVHlwZSBvZiAke29iamVjdC5jb25zdHJ1Y3Rvci5uYW1lfSBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBpbnN0YW5jZS5gICtcclxuICAgICAgICAgICAgYERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEF1dGggU0RLP2ApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKHR5cGVvZiBhdXRoT3JDb2RlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSByZXN0WzBdO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXJhbXMgPSBbLi4ucmVzdC5zbGljZSgxKV07XHJcbiAgICAgICAgaWYgKGZ1bGxQYXJhbXNbMF0pIHtcclxuICAgICAgICAgICAgZnVsbFBhcmFtc1swXS5hcHBOYW1lID0gYXV0aE9yQ29kZS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXV0aE9yQ29kZS5fZXJyb3JGYWN0b3J5LmNyZWF0ZShjb2RlLCAuLi5mdWxsUGFyYW1zKTtcclxuICAgIH1cclxuICAgIHJldHVybiBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkuY3JlYXRlKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9hc3NlcnQoYXNzZXJ0aW9uLCBhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gaW50ZXJuYWwgZXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cclxuICpcclxuICogQHBhcmFtIGZhaWx1cmUgdHlwZSBvZiBmYWlsdXJlIGVuY291bnRlcmVkXHJcbiAqIEB0aHJvd3MgRXJyb3JcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnRmFpbChmYWlsdXJlKSB7XHJcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXHJcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgZmFpbHVyZTtcclxuICAgIF9sb2dFcnJvcihtZXNzYWdlKTtcclxuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlYmFzZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcclxuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXHJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcbi8qKlxyXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcclxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhc3NlcnRpb25cclxuICogQHBhcmFtIG1lc3NhZ2VcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnQXNzZXJ0KGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICBkZWJ1Z0ZhaWwobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VDYWNoZSA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gX2dldEluc3RhbmNlKGNscykge1xyXG4gICAgZGVidWdBc3NlcnQoY2xzIGluc3RhbmNlb2YgRnVuY3Rpb24sICdFeHBlY3RlZCBhIGNsYXNzIGRlZmluaXRpb24nKTtcclxuICAgIGxldCBpbnN0YW5jZSA9IGluc3RhbmNlQ2FjaGUuZ2V0KGNscyk7XHJcbiAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydChpbnN0YW5jZSBpbnN0YW5jZW9mIGNscywgJ0luc3RhbmNlIHN0b3JlZCBpbiBjYWNoZSBtaXNtYXRjaGVkIHdpdGggY2xhc3MnKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICBpbnN0YW5jZSA9IG5ldyBjbHMoKTtcclxuICAgIGluc3RhbmNlQ2FjaGUuc2V0KGNscywgaW5zdGFuY2UpO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplcyBhbiB7QGxpbmsgQXV0aH0gaW5zdGFuY2Ugd2l0aCBmaW5lLWdyYWluZWQgY29udHJvbCBvdmVyXHJcbiAqIHtAbGluayBEZXBlbmRlbmNpZXN9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyBtb3JlIGNvbnRyb2wgb3ZlciB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRoYW5cclxuICoge0BsaW5rIGdldEF1dGh9LiBgZ2V0QXV0aGAgdXNlcyBwbGF0Zm9ybS1zcGVjaWZpYyBkZWZhdWx0cyB0byBzdXBwbHlcclxuICogdGhlIHtAbGluayBEZXBlbmRlbmNpZXN9LiBJbiBnZW5lcmFsLCBgZ2V0QXV0aGAgaXMgdGhlIGVhc2llc3Qgd2F5IHRvXHJcbiAqIGluaXRpYWxpemUgQXV0aCBhbmQgd29ya3MgZm9yIG1vc3QgdXNlIGNhc2VzLiBVc2UgYGluaXRpYWxpemVBdXRoYCBpZiB5b3VcclxuICogbmVlZCBjb250cm9sIG92ZXIgd2hpY2ggcGVyc2lzdGVuY2UgbGF5ZXIgaXMgdXNlZCwgb3IgdG8gbWluaW1pemUgYnVuZGxlXHJcbiAqIHNpemUgaWYgeW91J3JlIG5vdCB1c2luZyBlaXRoZXIgYHNpZ25JbldpdGhQb3B1cGAgb3IgYHNpZ25JbldpdGhSZWRpcmVjdGAuXHJcbiAqXHJcbiAqIEZvciBleGFtcGxlLCBpZiB5b3VyIGFwcCBvbmx5IHVzZXMgYW5vbnltb3VzIGFjY291bnRzIGFuZCB5b3Ugb25seSB3YW50XHJcbiAqIGFjY291bnRzIHNhdmVkIGZvciB0aGUgY3VycmVudCBzZXNzaW9uLCBpbml0aWFsaXplIGBBdXRoYCB3aXRoOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBjb25zdCBhdXRoID0gaW5pdGlhbGl6ZUF1dGgoYXBwLCB7XHJcbiAqICAgcGVyc2lzdGVuY2U6IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsXHJcbiAqICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiB1bmRlZmluZWQsXHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUF1dGgoYXBwLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxPcHRpb25zID0gcHJvdmlkZXIuZ2V0T3B0aW9ucygpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwoaW5pdGlhbE9wdGlvbnMsIGRlcHMgIT09IG51bGwgJiYgZGVwcyAhPT0gdm9pZCAwID8gZGVwcyA6IHt9KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGggPSBwcm92aWRlci5pbml0aWFsaXplKHsgb3B0aW9uczogZGVwcyB9KTtcclxuICAgIHJldHVybiBhdXRoO1xyXG59XHJcbmZ1bmN0aW9uIF9pbml0aWFsaXplQXV0aEluc3RhbmNlKGF1dGgsIGRlcHMpIHtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gKGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5wZXJzaXN0ZW5jZSkgfHwgW107XHJcbiAgICBjb25zdCBoaWVyYXJjaHkgPSAoQXJyYXkuaXNBcnJheShwZXJzaXN0ZW5jZSkgPyBwZXJzaXN0ZW5jZSA6IFtwZXJzaXN0ZW5jZV0pLm1hcChfZ2V0SW5zdGFuY2UpO1xyXG4gICAgaWYgKGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5lcnJvck1hcCkge1xyXG4gICAgICAgIGF1dGguX3VwZGF0ZUVycm9yTWFwKGRlcHMuZXJyb3JNYXApO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBwcm9taXNlIGlzIGludGVuZGVkIHRvIGZsb2F0OyBhdXRoIGluaXRpYWxpemF0aW9uIGhhcHBlbnMgaW4gdGhlXHJcbiAgICAvLyBiYWNrZ3JvdW5kLCBtZWFud2hpbGUgdGhlIGF1dGggb2JqZWN0IG1heSBiZSB1c2VkIGJ5IHRoZSBhcHAuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICBhdXRoLl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKGhpZXJhcmNoeSwgZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLnBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEN1cnJlbnRVcmwoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhyZWYpKSB8fCAnJztcclxufVxyXG5mdW5jdGlvbiBfaXNIdHRwT3JIdHRwcygpIHtcclxuICAgIHJldHVybiBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cDonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwczonO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkpIHx8IG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBicm93c2VyIGlzIHdvcmtpbmcgb25saW5lXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNPbmxpbmUoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBuYXZpZ2F0b3IgJiZcclxuICAgICAgICAnb25MaW5lJyBpbiBuYXZpZ2F0b3IgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm9uTGluZSA9PT0gJ2Jvb2xlYW4nICYmXHJcbiAgICAgICAgLy8gQXBwbHkgb25seSBmb3IgdHJhZGl0aW9uYWwgd2ViIGFwcHMgYW5kIENocm9tZSBleHRlbnNpb25zLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSB0cnVlIGZvciBDb3Jkb3ZhIGFwcHMgd2hpY2ggaGF2ZSB1bnJlbGlhYmxlXHJcbiAgICAgICAgLy8gbmF2aWdhdG9yLm9uTGluZSBiZWhhdmlvciB1bmxlc3MgY29yZG92YS1wbHVnaW4tbmV0d29yay1pbmZvcm1hdGlvbiBpc1xyXG4gICAgICAgIC8vIGluc3RhbGxlZCB3aGljaCBvdmVyd3JpdGVzIHRoZSBuYXRpdmUgbmF2aWdhdG9yLm9uTGluZSB2YWx1ZSBhbmRcclxuICAgICAgICAvLyBkZWZpbmVzIG5hdmlnYXRvci5jb25uZWN0aW9uLlxyXG4gICAgICAgIChfaXNIdHRwT3JIdHRwcygpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8ICdjb25uZWN0aW9uJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5vbkxpbmU7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIHN0YXRlLCBhc3N1bWUgaXQgaXMgb25saW5lLlxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gX2dldFVzZXJMYW5ndWFnZSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmF2aWdhdG9yTGFuZ3VhZ2UgPSBuYXZpZ2F0b3I7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgLy8gTW9zdCByZWxpYWJsZSwgYnV0IG9ubHkgc3VwcG9ydGVkIGluIENocm9tZS9GaXJlZm94LlxyXG4gICAgKG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlcyAmJiBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXNbMF0pIHx8XHJcbiAgICAgICAgLy8gU3VwcG9ydGVkIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCByZXR1cm5zIHRoZSBsYW5ndWFnZSBvZiB0aGUgYnJvd3NlclxyXG4gICAgICAgIC8vIFVJLCBub3QgdGhlIGxhbmd1YWdlIHNldCBpbiBicm93c2VyIHNldHRpbmdzLlxyXG4gICAgICAgIG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlIHx8XHJcbiAgICAgICAgLy8gQ291bGRuJ3QgZGV0ZXJtaW5lIGxhbmd1YWdlLlxyXG4gICAgICAgIG51bGwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHN0cnVjdHVyZSB0byBoZWxwIHBpY2sgYmV0d2VlbiBhIHJhbmdlIG9mIGxvbmcgYW5kIHNob3J0IGRlbGF5IGR1cmF0aW9uc1xyXG4gKiBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuIEluIGdlbmVyYWwsIHRoZSBsb25nIGRlbGF5IGlzIHVzZWQgZm9yXHJcbiAqIG1vYmlsZSBlbnZpcm9ubWVudHMgd2hlcmVhcyBzaG9ydCBkZWxheXMgYXJlIHVzZWQgZm9yIGRlc2t0b3AgZW52aXJvbm1lbnRzLlxyXG4gKi9cclxuY2xhc3MgRGVsYXkge1xyXG4gICAgY29uc3RydWN0b3Ioc2hvcnREZWxheSwgbG9uZ0RlbGF5KSB7XHJcbiAgICAgICAgdGhpcy5zaG9ydERlbGF5ID0gc2hvcnREZWxheTtcclxuICAgICAgICB0aGlzLmxvbmdEZWxheSA9IGxvbmdEZWxheTtcclxuICAgICAgICAvLyBJbnRlcm5hbCBlcnJvciB3aGVuIGltcHJvcGVybHkgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgZGVidWdBc3NlcnQobG9uZ0RlbGF5ID4gc2hvcnREZWxheSwgJ1Nob3J0IGRlbGF5IHNob3VsZCBiZSBsZXNzIHRoYW4gbG9uZyBkZWxheSEnKTtcclxuICAgICAgICB0aGlzLmlzTW9iaWxlID0gaXNNb2JpbGVDb3Jkb3ZhKCkgfHwgaXNSZWFjdE5hdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0KCkge1xyXG4gICAgICAgIGlmICghX2lzT25saW5lKCkpIHtcclxuICAgICAgICAgICAgLy8gUGljayB0aGUgc2hvcnRlciB0aW1lb3V0LlxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oNTAwMCAvKiBPRkZMSU5FICovLCB0aGlzLnNob3J0RGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBydW5uaW5nIGluIGEgbW9iaWxlIGVudmlyb25tZW50LCByZXR1cm4gdGhlIGxvbmcgZGVsYXksIG90aGVyd2lzZVxyXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2hvcnQgZGVsYXkuXHJcbiAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBpbXByb3ZlZCBpbiB0aGUgZnV0dXJlIHRvIGR5bmFtaWNhbGx5IGNoYW5nZSBiYXNlZCBvbiBvdGhlclxyXG4gICAgICAgIC8vIHZhcmlhYmxlcyBpbnN0ZWFkIG9mIGp1c3QgcmVhZGluZyB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHRoaXMubG9uZ0RlbGF5IDogdGhpcy5zaG9ydERlbGF5O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9lbXVsYXRvclVybChjb25maWcsIHBhdGgpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNvbmZpZy5lbXVsYXRvciwgJ0VtdWxhdG9yIHNob3VsZCBhbHdheXMgYmUgc2V0IGhlcmUnKTtcclxuICAgIGNvbnN0IHsgdXJsIH0gPSBjb25maWcuZW11bGF0b3I7XHJcbiAgICBpZiAoIXBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0ke3BhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGh9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGZXRjaFByb3ZpZGVyIHtcclxuICAgIHN0YXRpYyBpbml0aWFsaXplKGZldGNoSW1wbCwgaGVhZGVyc0ltcGwsIHJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hJbXBsID0gZmV0Y2hJbXBsO1xyXG4gICAgICAgIGlmIChoZWFkZXJzSW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNJbXBsID0gaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUltcGwgPSByZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGZldGNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZldGNoSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2ZldGNoJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIGZldGNoIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGhlYWRlcnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ0hlYWRlcnMnIGluIHNlbGYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuSGVhZGVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBIZWFkZXJzIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHJlc3BvbnNlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ1Jlc3BvbnNlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLlJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIFJlc3BvbnNlIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXAgZnJvbSBlcnJvcnMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciB0byBlcnJvcnMgdG8gZGV2ZWxvcGVyIHZpc2libGUgZXJyb3JzXHJcbiAqL1xyXG5jb25zdCBTRVJWRVJfRVJST1JfTUFQID0ge1xyXG4gICAgLy8gQ3VzdG9tIHRva2VuIGVycm9ycy5cclxuICAgIFtcIkNSRURFTlRJQUxfTUlTTUFUQ0hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovXTogXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19DVVNUT01fVE9LRU5cIiAvKiBNSVNTSU5HX0NVU1RPTV9UT0tFTiAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIENyZWF0ZSBBdXRoIFVSSSBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0lERU5USUZJRVJcIiAvKiBJTlZBTElEX0lERU5USUZJRVIgKi9dOiBcImludmFsaWQtZW1haWxcIiAvKiBJTlZBTElEX0VNQUlMICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19DT05USU5VRV9VUklcIiAvKiBNSVNTSU5HX0NPTlRJTlVFX1VSSSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNpZ24gaW4gd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzIChzb21lIGFwcGx5IHRvIHNpZ24gdXAgdG9vKS5cclxuICAgIFtcIklOVkFMSURfUEFTU1dPUkRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovXTogXCJ3cm9uZy1wYXNzd29yZFwiIC8qIElOVkFMSURfUEFTU1dPUkQgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX1BBU1NXT1JEXCIgLyogTUlTU0lOR19QQVNTV09SRCAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNpZ24gdXAgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzLlxyXG4gICAgW1wiRU1BSUxfRVhJU1RTXCIgLyogRU1BSUxfRVhJU1RTICovXTogXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqLyxcclxuICAgIFtcIlBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEXCIgLyogUEFTU1dPUkRfTE9HSU5fRElTQUJMRUQgKi9dOiBcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIE9QRVJBVElPTl9OT1RfQUxMT1dFRCAqLyxcclxuICAgIC8vIFZlcmlmeSBhc3NlcnRpb24gZm9yIHNpZ24gaW4gd2l0aCBjcmVkZW50aWFsIGVycm9yczpcclxuICAgIFtcIklOVkFMSURfSURQX1JFU1BPTlNFXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiSU5WQUxJRF9QRU5ESU5HX1RPS0VOXCIgLyogSU5WQUxJRF9QRU5ESU5HX1RPS0VOICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi9dOiBcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19SRVFfVFlQRVwiIC8qIE1JU1NJTkdfUkVRX1RZUEUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTZW5kIFBhc3N3b3JkIHJlc2V0IGVtYWlsIGVycm9yczpcclxuICAgIFtcIkVNQUlMX05PVF9GT1VORFwiIC8qIEVNQUlMX05PVF9GT1VORCAqL106IFwidXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi8sXHJcbiAgICBbXCJSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVRcIiAvKiBSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVQgKi9dOiBcInRvby1tYW55LXJlcXVlc3RzXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovLFxyXG4gICAgW1wiRVhQSVJFRF9PT0JfQ09ERVwiIC8qIEVYUElSRURfT09CX0NPREUgKi9dOiBcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovLFxyXG4gICAgW1wiSU5WQUxJRF9PT0JfQ09ERVwiIC8qIElOVkFMSURfT09CX0NPREUgKi9dOiBcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19PT0JfQ09ERVwiIC8qIE1JU1NJTkdfT09CX0NPREUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBPcGVyYXRpb25zIHRoYXQgcmVxdWlyZSBJRCB0b2tlbiBpbiByZXF1ZXN0OlxyXG4gICAgW1wiQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi8sXHJcbiAgICBbXCJJTlZBTElEX0lEX1RPS0VOXCIgLyogSU5WQUxJRF9JRF9UT0tFTiAqL106IFwiaW52YWxpZC11c2VyLXRva2VuXCIgLyogSU5WQUxJRF9BVVRIICovLFxyXG4gICAgW1wiVE9LRU5fRVhQSVJFRFwiIC8qIFRPS0VOX0VYUElSRUQgKi9dOiBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8sXHJcbiAgICBbXCJVU0VSX05PVF9GT1VORFwiIC8qIFVTRVJfTk9UX0ZPVU5EICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgZXJyb3JzLlxyXG4gICAgW1wiVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIC8vIFBob25lIEF1dGggcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0NPREVcIiAvKiBJTlZBTElEX0NPREUgKi9dOiBcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBJTlZBTElEX0NPREUgKi8sXHJcbiAgICBbXCJJTlZBTElEX1NFU1NJT05fSU5GT1wiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovLFxyXG4gICAgW1wiSU5WQUxJRF9URU1QT1JBUllfUFJPT0ZcIiAvKiBJTlZBTElEX1RFTVBPUkFSWV9QUk9PRiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJNSVNTSU5HX1NFU1NJT05fSU5GT1wiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovLFxyXG4gICAgW1wiU0VTU0lPTl9FWFBJUkVEXCIgLyogU0VTU0lPTl9FWFBJUkVEICovXTogXCJjb2RlLWV4cGlyZWRcIiAvKiBDT0RFX0VYUElSRUQgKi8sXHJcbiAgICAvLyBPdGhlciBhY3Rpb24gY29kZSBlcnJvcnMgd2hlbiBhZGRpdGlvbmFsIHNldHRpbmdzIHBhc3NlZC5cclxuICAgIC8vIE1JU1NJTkdfQ09OVElOVUVfVVJJIGlzIGdldHRpbmcgbWFwcGVkIHRvIElOVEVSTkFMX0VSUk9SIGFib3ZlLlxyXG4gICAgLy8gVGhpcyBpcyBPSyBhcyB0aGlzIGVycm9yIHdpbGwgYmUgY2F1Z2h0IGJ5IGNsaWVudCBzaWRlIHZhbGlkYXRpb24uXHJcbiAgICBbXCJNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106IFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqLyxcclxuICAgIFtcIlVOQVVUSE9SSVpFRF9ET01BSU5cIiAvKiBVTkFVVEhPUklaRURfRE9NQUlOICovXTogXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqLyxcclxuICAgIC8vIGdldFByb2plY3RDb25maWcgZXJyb3JzIHdoZW4gY2xpZW50SWQgaXMgcGFzc2VkLlxyXG4gICAgW1wiSU5WQUxJRF9PQVVUSF9DTElFTlRfSURcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqL106IFwiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqLyxcclxuICAgIC8vIFVzZXIgYWN0aW9ucyAoc2lnbi11cCBvciBkZWxldGlvbikgZGlzYWJsZWQgZXJyb3JzLlxyXG4gICAgW1wiQURNSU5fT05MWV9PUEVSQVRJT05cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqL106IFwiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqLyxcclxuICAgIC8vIE11bHRpIGZhY3RvciByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIklOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIElOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwiaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIElOVkFMSURfTUZBX1NFU1NJT04gKi8sXHJcbiAgICBbXCJNRkFfRU5ST0xMTUVOVF9OT1RfRk9VTkRcIiAvKiBNRkFfRU5ST0xMTUVOVF9OT1RfRk9VTkQgKi9dOiBcIm11bHRpLWZhY3Rvci1pbmZvLW5vdC1mb3VuZFwiIC8qIE1GQV9JTkZPX05PVF9GT1VORCAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX0VOUk9MTE1FTlRfSURcIiAvKiBNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEICovXTogXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogTUlTU0lOR19NRkFfSU5GTyAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIE1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIE1JU1NJTkdfTUZBX1NFU1NJT04gKi8sXHJcbiAgICBbXCJTRUNPTkRfRkFDVE9SX0VYSVNUU1wiIC8qIFNFQ09ORF9GQUNUT1JfRVhJU1RTICovXTogXCJzZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlXCIgLyogU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiBcIm1heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi8sXHJcbiAgICAvLyBCbG9ja2luZyBmdW5jdGlvbnMgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJCTE9DS0lOR19GVU5DVElPTl9FUlJPUl9SRVNQT05TRVwiIC8qIEJMT0NLSU5HX0ZVTkNUSU9OX0VSUk9SX1JFU1BPTlNFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0FQSV9USU1FT1VUX01TID0gbmV3IERlbGF5KDMwMDAwLCA2MDAwMCk7XHJcbmZ1bmN0aW9uIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBpZiAoYXV0aC50ZW5hbnRJZCAmJiAhcmVxdWVzdC50ZW5hbnRJZCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3QpLCB7IHRlbmFudElkOiBhdXRoLnRlbmFudElkIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXAgPSB7fSkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCBjdXN0b21FcnJvck1hcCwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxldCBib2R5ID0ge307XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHt9O1xyXG4gICAgICAgIGlmIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiR0VUXCIgLyogR0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSByZXF1ZXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9keSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5c3RyaW5nKE9iamVjdC5hc3NpZ24oeyBrZXk6IGF1dGguY29uZmlnLmFwaUtleSB9LCBwYXJhbXMpKS5zbGljZSgxKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgYXV0aC5fZ2V0QWRkaXRpb25hbEhlYWRlcnMoKTtcclxuICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCIgLyogQ09OVEVOVF9UWVBFICovXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcclxuICAgICAgICBpZiAoYXV0aC5sYW5ndWFnZUNvZGUpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtTG9jYWxlXCIgLyogWF9GSVJFQkFTRV9MT0NBTEUgKi9dID0gYXV0aC5sYW5ndWFnZUNvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBGZXRjaFByb3ZpZGVyLmZldGNoKCkoX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGF1dGguY29uZmlnLmFwaUhvc3QsIHBhdGgsIHF1ZXJ5KSwgT2JqZWN0LmFzc2lnbih7IG1ldGhvZCxcclxuICAgICAgICAgICAgaGVhZGVycywgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicgfSwgYm9keSkpO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIGN1c3RvbUVycm9yTWFwLCBmZXRjaEZuKSB7XHJcbiAgICBhdXRoLl9jYW5Jbml0RW11bGF0b3IgPSBmYWxzZTtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBTRVJWRVJfRVJST1JfTUFQKSwgY3VzdG9tRXJyb3JNYXApO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IG5ldyBOZXR3b3JrVGltZW91dChhdXRoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgICAgIGZldGNoRm4oKSxcclxuICAgICAgICAgICAgbmV0d29ya1RpbWVvdXQucHJvbWlzZVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhpcyBwb2ludCwgdGhlIGZldGNoIHN1Y2NlZWRlZCBhbmQgdGhlIG5ldHdvcmtUaW1lb3V0XHJcbiAgICAgICAgLy8gZGlkbid0IHRocm93OyBjbGVhciB0aGUgbmV0d29yayB0aW1lb3V0IGRlbGF5IHNvIHRoYXQgTm9kZSB3b24ndCBoYW5nXHJcbiAgICAgICAgbmV0d29ya1RpbWVvdXQuY2xlYXJOZXR3b3JrVGltZW91dCgpO1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgaWYgKCduZWVkQ29uZmlybWF0aW9uJyBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi8sIGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2sgJiYgISgnZXJyb3JNZXNzYWdlJyBpbiBqc29uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm9rID8ganNvbi5lcnJvck1lc3NhZ2UgOiBqc29uLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IFtzZXJ2ZXJFcnJvckNvZGUsIHNlcnZlckVycm9yTWVzc2FnZV0gPSBlcnJvck1lc3NhZ2Uuc3BsaXQoJyA6ICcpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkVNQUlMX0VYSVNUU1wiIC8qIEVNQUlMX0VYSVNUUyAqLykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogRU1BSUxfRVhJU1RTICovLCBqc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBhdXRoRXJyb3IgPSBlcnJvck1hcFtzZXJ2ZXJFcnJvckNvZGVdIHx8XHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvckNvZGVcclxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bX1xcc10rL2csICctJyk7XHJcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJFcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIGF1dGhFcnJvciwgc2VydmVyRXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIGF1dGhFcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfZmFpbChhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCA9IHt9KSB7XHJcbiAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCkpO1xyXG4gICAgaWYgKCdtZmFQZW5kaW5nQ3JlZGVudGlhbCcgaW4gc2VydmVyUmVzcG9uc2UpIHtcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovLCB7XHJcbiAgICAgICAgICAgIF9zZXJ2ZXJSZXNwb25zZTogc2VydmVyUmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZXJ2ZXJSZXNwb25zZTtcclxufVxyXG5mdW5jdGlvbiBfZ2V0RmluYWxUYXJnZXQoYXV0aCwgaG9zdCwgcGF0aCwgcXVlcnkpIHtcclxuICAgIGNvbnN0IGJhc2UgPSBgJHtob3N0fSR7cGF0aH0/JHtxdWVyeX1gO1xyXG4gICAgaWYgKCFhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgJHthdXRoLmNvbmZpZy5hcGlTY2hlbWV9Oi8vJHtiYXNlfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGF1dGguY29uZmlnLCBiYXNlKTtcclxufVxyXG5jbGFzcyBOZXR3b3JrVGltZW91dCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgYXJlIGZ1bmRhbWVudGFsbHkgaW5jb21wYXRpYmxlLCBidXQgd2VcclxuICAgICAgICAvLyBkb24ndCBjYXJlIGFib3V0IHRoZSB2YWx1ZSBoZXJlXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJ0aW1lb3V0XCIgLyogVElNRU9VVCAqLykpO1xyXG4gICAgICAgICAgICB9LCBERUZBVUxUX0FQSV9USU1FT1VUX01TLmdldCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsZWFyTmV0d29ya1RpbWVvdXQoKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgY29kZSwgcmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGVycm9yUGFyYW1zID0ge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZVxyXG4gICAgfTtcclxuICAgIGlmIChyZXNwb25zZS5lbWFpbCkge1xyXG4gICAgICAgIGVycm9yUGFyYW1zLmVtYWlsID0gcmVzcG9uc2UuZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzcG9uc2UucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lTnVtYmVyO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXJyb3IgPSBfY3JlYXRlRXJyb3IoYXV0aCwgY29kZSwgZXJyb3JQYXJhbXMpO1xyXG4gICAgLy8gV2Uga25vdyBjdXN0b21EYXRhIGlzIGRlZmluZWQgb24gZXJyb3IgYmVjYXVzZSBlcnJvclBhcmFtcyBpcyBkZWZpbmVkXHJcbiAgICBlcnJvci5jdXN0b21EYXRhLl90b2tlblJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQWNjb3VudChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmRlbGV0ZVwiIC8qIERFTEVURV9BQ0NPVU5UICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVMaW5rZWRBY2NvdW50cyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6bG9va3VwXCIgLyogR0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHV0Y1RpbWVzdGFtcCkge1xyXG4gICAgaWYgKCF1dGNUaW1lc3RhbXApIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBDb252ZXJ0IHRvIGRhdGUgb2JqZWN0LlxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShOdW1iZXIodXRjVGltZXN0YW1wKSk7XHJcbiAgICAgICAgLy8gVGVzdCBkYXRlIGlzIHZhbGlkLlxyXG4gICAgICAgIGlmICghaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gVVRDIGRhdGUgc3RyaW5nLlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZy4gdW5kZWZpbmVkIHdpbGwgYmUgcmV0dXJuZWQuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgSlNPTiBXZWIgVG9rZW4gKEpXVCkgdXNlZCB0byBpZGVudGlmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldElkVG9rZW4odXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgZGVzZXJpYWxpemVkIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpdGZ5IHRoZSB1c2VyIHRvIGEgRmlyZWJhc2Ugc2VydmljZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBpZiBpdCBoYXMgbm90IGV4cGlyZWQgb3IgaWYgaXQgd2lsbCBub3QgZXhwaXJlIGluIHRoZSBuZXh0IGZpdmVcclxuICogbWludXRlcy4gT3RoZXJ3aXNlLCB0aGlzIHdpbGwgcmVmcmVzaCB0aGUgdG9rZW4gYW5kIHJldHVybiBhIG5ldyBvbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBGb3JjZSByZWZyZXNoIHJlZ2FyZGxlc3Mgb2YgdG9rZW4gZXhwaXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWRUb2tlblJlc3VsdCh1c2VyLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG4gICAgY29uc3QgY2xhaW1zID0gX3BhcnNlVG9rZW4odG9rZW4pO1xyXG4gICAgX2Fzc2VydChjbGFpbXMgJiYgY2xhaW1zLmV4cCAmJiBjbGFpbXMuYXV0aF90aW1lICYmIGNsYWltcy5pYXQsIHVzZXJJbnRlcm5hbC5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgY29uc3QgZmlyZWJhc2UgPSB0eXBlb2YgY2xhaW1zLmZpcmViYXNlID09PSAnb2JqZWN0JyA/IGNsYWltcy5maXJlYmFzZSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3Byb3ZpZGVyJ107XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICB0b2tlbixcclxuICAgICAgICBhdXRoVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuYXV0aF90aW1lKSksXHJcbiAgICAgICAgaXNzdWVkQXRUaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKGNsYWltcy5pYXQpKSxcclxuICAgICAgICBleHBpcmF0aW9uVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuZXhwKSksXHJcbiAgICAgICAgc2lnbkluUHJvdmlkZXI6IHNpZ25JblByb3ZpZGVyIHx8IG51bGwsXHJcbiAgICAgICAgc2lnbkluU2Vjb25kRmFjdG9yOiAoZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3NlY29uZF9mYWN0b3InXSkgfHwgbnVsbFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoc2Vjb25kcykge1xyXG4gICAgcmV0dXJuIE51bWJlcihzZWNvbmRzKSAqIDEwMDA7XHJcbn1cclxuZnVuY3Rpb24gX3BhcnNlVG9rZW4odG9rZW4pIHtcclxuICAgIGNvbnN0IFthbGdvcml0aG0sIHBheWxvYWQsIHNpZ25hdHVyZV0gPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgaWYgKGFsZ29yaXRobSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgcGF5bG9hZCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgc2lnbmF0dXJlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0pXVCBtYWxmb3JtZWQsIGNvbnRhaW5lZCBmZXdlciB0aGFuIDMgc2VjdGlvbnMnKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGJhc2U2NERlY29kZShwYXlsb2FkKTtcclxuICAgICAgICBpZiAoIWRlY29kZWQpIHtcclxuICAgICAgICAgICAgX2xvZ0Vycm9yKCdGYWlsZWQgdG8gZGVjb2RlIGJhc2U2NCBKV1QgcGF5bG9hZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIF9sb2dFcnJvcignQ2F1Z2h0IGVycm9yIHBhcnNpbmcgSldUIHBheWxvYWQgYXMgSlNPTicsIGUpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IGV4cGlyZXNJbiBUVEwgZnJvbSBhIHRva2VuIGJ5IHN1YnRyYWN0aW5nIHRoZSBleHBpcmF0aW9uIGZyb20gdGhlIGlzc3VhbmNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3Rva2VuRXhwaXJlc0luKHRva2VuKSB7XHJcbiAgICBjb25zdCBwYXJzZWRUb2tlbiA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQocGFyc2VkVG9rZW4sIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBwYXJzZWRUb2tlbi5leHAgIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uaWF0ICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBOdW1iZXIocGFyc2VkVG9rZW4uZXhwKSAtIE51bWJlcihwYXJzZWRUb2tlbi5pYXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIHByb21pc2UsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAoYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiYgaXNVc2VySW52YWxpZGF0ZWQoZSkpIHtcclxuICAgICAgICAgICAgaWYgKHVzZXIuYXV0aC5jdXJyZW50VXNlciA9PT0gdXNlcikge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXNlci5hdXRoLnNpZ25PdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzVXNlckludmFsaWRhdGVkKHsgY29kZSB9KSB7XHJcbiAgICByZXR1cm4gKGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLWRpc2FibGVkXCIgLyogVVNFUl9ESVNBQkxFRCAqL31gIHx8XHJcbiAgICAgICAgY29kZSA9PT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi99YCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUHJvYWN0aXZlUmVmcmVzaCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSAzMDAwMCAvKiBSRVRSWV9CQUNLT0ZGX01JTiAqLztcclxuICAgIH1cclxuICAgIF9zdGFydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xyXG4gICAgfVxyXG4gICAgX3N0b3AoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRJbnRlcnZhbCh3YXNFcnJvcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAod2FzRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmVycm9yQmFja29mZjtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSBNYXRoLm1pbih0aGlzLmVycm9yQmFja29mZiAqIDIsIDk2MDAwMCAvKiBSRVRSWV9CQUNLT0ZGX01BWCAqLyk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBlcnJvciBiYWNrb2ZmXHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cFRpbWUgPSAoX2EgPSB0aGlzLnVzZXIuc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IGV4cFRpbWUgLSBEYXRlLm5vdygpIC0gMzAwMDAwIC8qIE9GRlNFVCAqLztcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzY2hlZHVsZSh3YXNFcnJvciA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICAvLyBKdXN0IGluIGNhc2UuLi5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRoaXMuZ2V0SW50ZXJ2YWwod2FzRXJyb3IpO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZXJhdGlvbigpO1xyXG4gICAgICAgIH0sIGludGVydmFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGl0ZXJhdGlvbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gT25seSByZXRyeSBvbiBuZXR3b3JrIGVycm9yc1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlID09PSBgYXV0aC8ke1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSgvKiB3YXNFcnJvciAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyTWV0YWRhdGEge1xyXG4gICAgY29uc3RydWN0b3IoY3JlYXRlZEF0LCBsYXN0TG9naW5BdCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xyXG4gICAgICAgIHRoaXMubGFzdExvZ2luQXQgPSBsYXN0TG9naW5BdDtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplVGltZSgpO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVUaW1lKCkge1xyXG4gICAgICAgIHRoaXMubGFzdFNpZ25JblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5sYXN0TG9naW5BdCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGlvblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5jcmVhdGVkQXQpO1xyXG4gICAgfVxyXG4gICAgX2NvcHkobWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IG1ldGFkYXRhLmNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbWV0YWRhdGEubGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdDogdGhpcy5sYXN0TG9naW5BdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aCA9IHVzZXIuYXV0aDtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgZ2V0QWNjb3VudEluZm8oYXV0aCwgeyBpZFRva2VuIH0pKTtcclxuICAgIF9hc3NlcnQocmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3BvbnNlLnVzZXJzLmxlbmd0aCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGNvcmVBY2NvdW50ID0gcmVzcG9uc2UudXNlcnNbMF07XHJcbiAgICB1c2VyLl9ub3RpZnlSZWxvYWRMaXN0ZW5lcihjb3JlQWNjb3VudCk7XHJcbiAgICBjb25zdCBuZXdQcm92aWRlckRhdGEgPSAoKF9hID0gY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aClcclxuICAgICAgICA/IGV4dHJhY3RQcm92aWRlckRhdGEoY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbylcclxuICAgICAgICA6IFtdO1xyXG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gbWVyZ2VQcm92aWRlckRhdGEodXNlci5wcm92aWRlckRhdGEsIG5ld1Byb3ZpZGVyRGF0YSk7XHJcbiAgICAvLyBQcmVzZXJ2ZXMgdGhlIG5vbi1ub255bW91cyBzdGF0dXMgb2YgdGhlIHN0b3JlZCB1c2VyLCBldmVuIGlmIG5vIG1vcmVcclxuICAgIC8vIGNyZWRlbnRpYWxzIChmZWRlcmF0ZWQgb3IgZW1haWwvcGFzc3dvcmQpIGFyZSBsaW5rZWQgdG8gdGhlIHVzZXIuIElmXHJcbiAgICAvLyB0aGUgdXNlciB3YXMgcHJldmlvdXNseSBhbm9ueW1vdXMsIHRoZW4gdXNlIHByb3ZpZGVyIGRhdGEgdG8gdXBkYXRlLlxyXG4gICAgLy8gT24gdGhlIG90aGVyIGhhbmQsIGlmIGl0IHdhcyBub3QgYW5vbnltb3VzIGJlZm9yZSwgaXQgc2hvdWxkIG5ldmVyIGJlXHJcbiAgICAvLyBjb25zaWRlcmVkIGFub255bW91cyBub3cuXHJcbiAgICBjb25zdCBvbGRJc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCBuZXdJc0Fub255bW91cyA9ICEodXNlci5lbWFpbCAmJiBjb3JlQWNjb3VudC5wYXNzd29yZEhhc2gpICYmICEocHJvdmlkZXJEYXRhID09PSBudWxsIHx8IHByb3ZpZGVyRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvdmlkZXJEYXRhLmxlbmd0aCk7XHJcbiAgICBjb25zdCBpc0Fub255bW91cyA9ICFvbGRJc0Fub255bW91cyA/IGZhbHNlIDogbmV3SXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCB1cGRhdGVzID0ge1xyXG4gICAgICAgIHVpZDogY29yZUFjY291bnQubG9jYWxJZCxcclxuICAgICAgICBkaXNwbGF5TmFtZTogY29yZUFjY291bnQuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICBwaG90b1VSTDogY29yZUFjY291bnQucGhvdG9VcmwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbDogY29yZUFjY291bnQuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbFZlcmlmaWVkOiBjb3JlQWNjb3VudC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlLFxyXG4gICAgICAgIHBob25lTnVtYmVyOiBjb3JlQWNjb3VudC5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgIHRlbmFudElkOiBjb3JlQWNjb3VudC50ZW5hbnRJZCB8fCBudWxsLFxyXG4gICAgICAgIHByb3ZpZGVyRGF0YSxcclxuICAgICAgICBtZXRhZGF0YTogbmV3IFVzZXJNZXRhZGF0YShjb3JlQWNjb3VudC5jcmVhdGVkQXQsIGNvcmVBY2NvdW50Lmxhc3RMb2dpbkF0KSxcclxuICAgICAgICBpc0Fub255bW91c1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5hc3NpZ24odXNlciwgdXBkYXRlcyk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbG9hZHMgdXNlciBhY2NvdW50IGRhdGEsIGlmIHNpZ25lZCBpbi5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVsb2FkKHVzZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXJJbnRlcm5hbCk7XHJcbiAgICAvLyBFdmVuIHRob3VnaCB0aGUgY3VycmVudCB1c2VyIGhhc24ndCBjaGFuZ2VkLCB1cGRhdGVcclxuICAgIC8vIGN1cnJlbnQgdXNlciB3aWxsIHRyaWdnZXIgYSBwZXJzaXN0ZW5jZSB1cGRhdGUgdy8gdGhlXHJcbiAgICAvLyBuZXcgaW5mby5cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgdXNlckludGVybmFsLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlUHJvdmlkZXJEYXRhKG9yaWdpbmFsLCBuZXdEYXRhKSB7XHJcbiAgICBjb25zdCBkZWR1cGVkID0gb3JpZ2luYWwuZmlsdGVyKG8gPT4gIW5ld0RhdGEuc29tZShuID0+IG4ucHJvdmlkZXJJZCA9PT0gby5wcm92aWRlcklkKSk7XHJcbiAgICByZXR1cm4gWy4uLmRlZHVwZWQsIC4uLm5ld0RhdGFdO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RQcm92aWRlckRhdGEocHJvdmlkZXJzKSB7XHJcbiAgICByZXR1cm4gcHJvdmlkZXJzLm1hcCgoX2EpID0+IHtcclxuICAgICAgICB2YXIgeyBwcm92aWRlcklkIH0gPSBfYSwgcHJvdmlkZXIgPSBfX3Jlc3QoX2EsIFtcInByb3ZpZGVySWRcIl0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHVpZDogcHJvdmlkZXIucmF3SWQgfHwgJycsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwcm92aWRlci5kaXNwbGF5TmFtZSB8fCBudWxsLFxyXG4gICAgICAgICAgICBlbWFpbDogcHJvdmlkZXIuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHByb3ZpZGVyLnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob3RvVVJMOiBwcm92aWRlci5waG90b1VybCB8fCBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RTdHNUb2tlbihhdXRoLCByZWZyZXNoVG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIHt9LCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHF1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsXHJcbiAgICAgICAgICAgICdyZWZyZXNoX3Rva2VuJzogcmVmcmVzaFRva2VuXHJcbiAgICAgICAgfSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgeyB0b2tlbkFwaUhvc3QsIGFwaUtleSB9ID0gYXV0aC5jb25maWc7XHJcbiAgICAgICAgY29uc3QgdXJsID0gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIHRva2VuQXBpSG9zdCwgXCIvdjEvdG9rZW5cIiAvKiBUT0tFTiAqLywgYGtleT0ke2FwaUtleX1gKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgYXV0aC5fZ2V0QWRkaXRpb25hbEhlYWRlcnMoKTtcclxuICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCIgLyogQ09OVEVOVF9UWVBFICovXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xyXG4gICAgICAgIHJldHVybiBGZXRjaFByb3ZpZGVyLmZldGNoKCkodXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIgLyogUE9TVCAqLyxcclxuICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgYm9keVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyBUaGUgcmVzcG9uc2UgY29tZXMgYmFjayBpbiBzbmFrZV9jYXNlLiBDb252ZXJ0IHRvIGNhbWVsOlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhY2Nlc3NUb2tlbjogcmVzcG9uc2UuYWNjZXNzX3Rva2VuLFxyXG4gICAgICAgIGV4cGlyZXNJbjogcmVzcG9uc2UuZXhwaXJlc19pbixcclxuICAgICAgICByZWZyZXNoVG9rZW46IHJlc3BvbnNlLnJlZnJlc2hfdG9rZW5cclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFdlIG5lZWQgdG8gbWFyayB0aGlzIGNsYXNzIGFzIGludGVybmFsIGV4cGxpY2l0bHkgdG8gZXhjbHVkZSBpdCBpbiB0aGUgcHVibGljIHR5cGluZ3MsIGJlY2F1c2VcclxuICogaXQgcmVmZXJlbmNlcyBBdXRoSW50ZXJuYWwgd2hpY2ggaGFzIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSB3aXRoIFVzZXJJbnRlcm5hbC5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jbGFzcyBTdHNUb2tlbk1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRXhwaXJlZCgpIHtcclxuICAgICAgICByZXR1cm4gKCF0aGlzLmV4cGlyYXRpb25UaW1lIHx8XHJcbiAgICAgICAgICAgIERhdGUubm93KCkgPiB0aGlzLmV4cGlyYXRpb25UaW1lIC0gMzAwMDAgLyogVE9LRU5fUkVGUkVTSCAqLyk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmlkVG9rZW4sIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVzcG9uc2UuaWRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVzcG9uc2UucmVmcmVzaFRva2VuICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBleHBpcmVzSW4gPSAnZXhwaXJlc0luJyBpbiByZXNwb25zZSAmJiB0eXBlb2YgcmVzcG9uc2UuZXhwaXJlc0luICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgICAgICA/IE51bWJlcihyZXNwb25zZS5leHBpcmVzSW4pXHJcbiAgICAgICAgICAgIDogX3Rva2VuRXhwaXJlc0luKHJlc3BvbnNlLmlkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihyZXNwb25zZS5pZFRva2VuLCByZXNwb25zZS5yZWZyZXNoVG9rZW4sIGV4cGlyZXNJbik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRUb2tlbihhdXRoLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMuYWNjZXNzVG9rZW4gfHwgdGhpcy5yZWZyZXNoVG9rZW4sIGF1dGgsIFwidXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqLyk7XHJcbiAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgdGhpcy5hY2Nlc3NUb2tlbiAmJiAhdGhpcy5pc0V4cGlyZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goYXV0aCwgdGhpcy5yZWZyZXNoVG9rZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjbGVhclJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZWZyZXNoKGF1dGgsIG9sZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBleHBpcmVzSW4gfSA9IGF3YWl0IHJlcXVlc3RTdHNUb2tlbihhdXRoLCBvbGRUb2tlbik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIE51bWJlcihleHBpcmVzSW4pKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24oYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luU2VjKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gRGF0ZS5ub3coKSArIGV4cGlyZXNJblNlYyAqIDEwMDA7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZnJvbUpTT04oYXBwTmFtZSwgb2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWZyZXNoVG9rZW4sIGFjY2Vzc1Rva2VuLCBleHBpcmF0aW9uVGltZSB9ID0gb2JqZWN0O1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XHJcbiAgICAgICAgaWYgKHJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZWZyZXNoVG9rZW4gPT09ICdzdHJpbmcnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgYWNjZXNzVG9rZW4gPT09ICdzdHJpbmcnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV4cGlyYXRpb25UaW1lKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIGV4cGlyYXRpb25UaW1lID09PSAnbnVtYmVyJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmV4cGlyYXRpb25UaW1lID0gZXhwaXJhdGlvblRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogdGhpcy5yZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZTogdGhpcy5leHBpcmF0aW9uVGltZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBfYXNzaWduKHN0c1Rva2VuTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuO1xyXG4gICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBzdHNUb2tlbk1hbmFnZXIuZXhwaXJhdGlvblRpbWU7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IFN0c1Rva2VuTWFuYWdlcigpLCB0aGlzLnRvSlNPTigpKTtcclxuICAgIH1cclxuICAgIF9wZXJmb3JtUmVmcmVzaCgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChhc3NlcnRpb24sIGFwcE5hbWUpIHtcclxuICAgIF9hc3NlcnQodHlwZW9mIGFzc2VydGlvbiA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGFzc2VydGlvbiA9PT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG59XHJcbmNsYXNzIFVzZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKF9hKSB7XHJcbiAgICAgICAgdmFyIHsgdWlkLCBhdXRoLCBzdHNUb2tlbk1hbmFnZXIgfSA9IF9hLCBvcHQgPSBfX3Jlc3QoX2EsIFtcInVpZFwiLCBcImF1dGhcIiwgXCJzdHNUb2tlbk1hbmFnZXJcIl0pO1xyXG4gICAgICAgIC8vIEZvciB0aGUgdXNlciBvYmplY3QsIHByb3ZpZGVyIGlzIGFsd2F5cyBGaXJlYmFzZS5cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBcImZpcmViYXNlXCIgLyogRklSRUJBU0UgKi87XHJcbiAgICAgICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoID0gbmV3IFByb2FjdGl2ZVJlZnJlc2godGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRVc2VySW5mbyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51aWQgPSB1aWQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnN0c1Rva2VuTWFuYWdlciA9IHN0c1Rva2VuTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBvcHQuZGlzcGxheU5hbWUgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmVtYWlsID0gb3B0LmVtYWlsIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gb3B0LmVtYWlsVmVyaWZpZWQgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IG9wdC5waG9uZU51bWJlciB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMucGhvdG9VUkwgPSBvcHQucGhvdG9VUkwgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmlzQW5vbnltb3VzID0gb3B0LmlzQW5vbnltb3VzIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBvcHQudGVuYW50SWQgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IFVzZXJNZXRhZGF0YShvcHQuY3JlYXRlZEF0IHx8IHVuZGVmaW5lZCwgb3B0Lmxhc3RMb2dpbkF0IHx8IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRJZFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcywgdGhpcy5zdHNUb2tlbk1hbmFnZXIuZ2V0VG9rZW4odGhpcy5hdXRoLCBmb3JjZVJlZnJlc2gpKTtcclxuICAgICAgICBfYXNzZXJ0KGFjY2Vzc1Rva2VuLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4gIT09IGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcclxuICAgIH1cclxuICAgIGdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldElkVG9rZW5SZXN1bHQodGhpcywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIHJlbG9hZCgpIHtcclxuICAgICAgICByZXR1cm4gcmVsb2FkKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfYXNzZXJ0KHRoaXMudWlkID09PSB1c2VyLnVpZCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSB1c2VyLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMucGhvdG9VUkwgPSB1c2VyLnBob3RvVVJMO1xyXG4gICAgICAgIHRoaXMuZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IHVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gdXNlci5waG9uZU51bWJlcjtcclxuICAgICAgICB0aGlzLmlzQW5vbnltb3VzID0gdXNlci5pc0Fub255bW91cztcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gdXNlci50ZW5hbnRJZDtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IHVzZXIucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YS5fY29weSh1c2VyLm1ldGFkYXRhKTtcclxuICAgICAgICB0aGlzLnN0c1Rva2VuTWFuYWdlci5fYXNzaWduKHVzZXIuc3RzVG9rZW5NYW5hZ2VyKTtcclxuICAgIH1cclxuICAgIF9jbG9uZShhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VySW1wbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMpLCB7IGF1dGgsIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Nsb25lKCkgfSkpO1xyXG4gICAgfVxyXG4gICAgX29uUmVsb2FkKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gVGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUgbGlzdGVuZXIsIGFuZCB0aGF0IGlzIGEgc2luZ2xlIGluc3RhbmNlIG9mIE11bHRpRmFjdG9yVXNlclxyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMucmVsb2FkTGlzdGVuZXIsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyID0gY2FsbGJhY2s7XHJcbiAgICAgICAgaWYgKHRoaXMucmVsb2FkVXNlckluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5fbm90aWZ5UmVsb2FkTGlzdGVuZXIodGhpcy5yZWxvYWRVc2VySW5mbyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9ub3RpZnlSZWxvYWRMaXN0ZW5lcih1c2VySW5mbykge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIodXNlckluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gbGlzdGVuZXIgaXMgc3Vic2NyaWJlZCB5ZXQsIHNhdmUgdGhlIHJlc3VsdCBzbyBpdCdzIGF2YWlsYWJsZSB3aGVuIHRoZXkgZG8gc3Vic2NyaWJlXHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSB1c2VySW5mbztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaC5fc3RhcnQoKTtcclxuICAgIH1cclxuICAgIF9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0b3AoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgcmVsb2FkID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQgdG9rZW5zUmVmcmVzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmlkVG9rZW4gJiZcclxuICAgICAgICAgICAgcmVzcG9uc2UuaWRUb2tlbiAhPT0gdGhpcy5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIudXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgdG9rZW5zUmVmcmVzaGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbG9hZCkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICBpZiAodG9rZW5zUmVmcmVzaGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy5nZXRJZFRva2VuKCk7XHJcbiAgICAgICAgYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcywgZGVsZXRlQWNjb3VudCh0aGlzLmF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuY2xlYXJSZWZyZXNoVG9rZW4oKTtcclxuICAgICAgICAvLyBUT0RPOiBEZXRlcm1pbmUgaWYgY2FuY2VsbGFibGUtcHJvbWlzZXMgYXJlIG5lY2Vzc2FyeSB0byB1c2UgaW4gdGhpcyBjbGFzcyBzbyB0aGF0IGRlbGV0ZSgpXHJcbiAgICAgICAgLy8gICAgICAgY2FuY2VscyBwZW5kaW5nIGFjdGlvbnMuLi5cclxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoLnNpZ25PdXQoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgdWlkOiB0aGlzLnVpZCwgZW1haWw6IHRoaXMuZW1haWwgfHwgdW5kZWZpbmVkLCBlbWFpbFZlcmlmaWVkOiB0aGlzLmVtYWlsVmVyaWZpZWQsIGRpc3BsYXlOYW1lOiB0aGlzLmRpc3BsYXlOYW1lIHx8IHVuZGVmaW5lZCwgaXNBbm9ueW1vdXM6IHRoaXMuaXNBbm9ueW1vdXMsIHBob3RvVVJMOiB0aGlzLnBob3RvVVJMIHx8IHVuZGVmaW5lZCwgcGhvbmVOdW1iZXI6IHRoaXMucGhvbmVOdW1iZXIgfHwgdW5kZWZpbmVkLCB0ZW5hbnRJZDogdGhpcy50ZW5hbnRJZCB8fCB1bmRlZmluZWQsIHByb3ZpZGVyRGF0YTogdGhpcy5wcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKSwgc3RzVG9rZW5NYW5hZ2VyOiB0aGlzLnN0c1Rva2VuTWFuYWdlci50b0pTT04oKSwgXHJcbiAgICAgICAgICAgIC8vIFJlZGlyZWN0IGV2ZW50IElEIG11c3QgYmUgbWFpbnRhaW5lZCBpbiBjYXNlIHRoZXJlIGlzIGEgcGVuZGluZ1xyXG4gICAgICAgICAgICAvLyByZWRpcmVjdCBldmVudC5cclxuICAgICAgICAgICAgX3JlZGlyZWN0RXZlbnRJZDogdGhpcy5fcmVkaXJlY3RFdmVudElkIH0sIHRoaXMubWV0YWRhdGEudG9KU09OKCkpLCB7IFxyXG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBsZWdhY3kgU0RLIChnby9maXJlYmFzZS1hdXRoLXNkay1wZXJzaXN0ZW5jZS1wYXJzaW5nKTpcclxuICAgICAgICAgICAgYXBpS2V5OiB0aGlzLmF1dGguY29uZmlnLmFwaUtleSwgYXBwTmFtZTogdGhpcy5hdXRoLm5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW4gfHwgJyc7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21KU09OKGF1dGgsIG9iamVjdCkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSAoX2EgPSBvYmplY3QuZGlzcGxheU5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBlbWFpbCA9IChfYiA9IG9iamVjdC5lbWFpbCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob25lTnVtYmVyID0gKF9jID0gb2JqZWN0LnBob25lTnVtYmVyKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcGhvdG9VUkwgPSAoX2QgPSBvYmplY3QucGhvdG9VUkwpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IChfZSA9IG9iamVjdC50ZW5hbnRJZCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IF9yZWRpcmVjdEV2ZW50SWQgPSAoX2YgPSBvYmplY3QuX3JlZGlyZWN0RXZlbnRJZCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IChfZyA9IG9iamVjdC5jcmVhdGVkQXQpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBsYXN0TG9naW5BdCA9IChfaCA9IG9iamVjdC5sYXN0TG9naW5BdCkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHsgdWlkLCBlbWFpbFZlcmlmaWVkLCBpc0Fub255bW91cywgcHJvdmlkZXJEYXRhLCBzdHNUb2tlbk1hbmFnZXI6IHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyIH0gPSBvYmplY3Q7XHJcbiAgICAgICAgX2Fzc2VydCh1aWQgJiYgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gU3RzVG9rZW5NYW5hZ2VyLmZyb21KU09OKHRoaXMubmFtZSwgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHVpZCA9PT0gJ3N0cmluZycsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoZGlzcGxheU5hbWUsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoZW1haWwsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgZW1haWxWZXJpZmllZCA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGlzQW5vbnltb3VzID09PSAnYm9vbGVhbicsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvbmVOdW1iZXIsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvdG9VUkwsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQodGVuYW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoX3JlZGlyZWN0RXZlbnRJZCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChjcmVhdGVkQXQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQobGFzdExvZ2luQXQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZCxcclxuICAgICAgICAgICAgYXV0aCxcclxuICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBpc0Fub255bW91cyxcclxuICAgICAgICAgICAgcGhvdG9VUkwsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZCxcclxuICAgICAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIGxhc3RMb2dpbkF0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyRGF0YSAmJiBBcnJheS5pc0FycmF5KHByb3ZpZGVyRGF0YSkpIHtcclxuICAgICAgICAgICAgdXNlci5wcm92aWRlckRhdGEgPSBwcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYSBVc2VyIGZyb20gYW4gaWRUb2tlbiBzZXJ2ZXIgcmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSBhdXRoXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlblJlc3BvbnNlXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzdHNUb2tlbk1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XHJcbiAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIEZpcmViYXNlIEF1dGggdXNlci5cclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbXBsKHtcclxuICAgICAgICAgICAgdWlkOiBpZFRva2VuUmVzcG9uc2UubG9jYWxJZCxcclxuICAgICAgICAgICAgYXV0aCxcclxuICAgICAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLFxyXG4gICAgICAgICAgICBpc0Fub255bW91c1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZXMgdGhlIHVzZXIgaW5mbyBhbmQgZGF0YSBhbmQgcmVzb2x2ZXMgd2l0aCBhIHVzZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcik7XHJcbiAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgSW5NZW1vcnlQZXJzaXN0ZW5jZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBcIk5PTkVcIiAvKiBOT05FICovO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHt9O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlW2tleV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXldO1xyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgaW4tbWVtb3J5IHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93cy93b3JrZXJzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgaW4tbWVtb3J5IHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93cy93b3JrZXJzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59XHJcbkluTWVtb3J5UGVyc2lzdGVuY2UudHlwZSA9ICdOT05FJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSAnTk9ORScuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGluTWVtb3J5UGVyc2lzdGVuY2UgPSBJbk1lbW9yeVBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfcGVyc2lzdGVuY2VLZXlOYW1lKGtleSwgYXBpS2V5LCBhcHBOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7XCJmaXJlYmFzZVwiIC8qIFBFUlNJU1RFTkNFICovfToke2tleX06JHthcGlLZXl9OiR7YXBwTmFtZX1gO1xyXG59XHJcbmNsYXNzIFBlcnNpc3RlbmNlVXNlck1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IocGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnVzZXJLZXkgPSB1c2VyS2V5O1xyXG4gICAgICAgIGNvbnN0IHsgY29uZmlnLCBuYW1lIH0gPSB0aGlzLmF1dGg7XHJcbiAgICAgICAgdGhpcy5mdWxsVXNlcktleSA9IF9wZXJzaXN0ZW5jZUtleU5hbWUodGhpcy51c2VyS2V5LCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmZ1bGxQZXJzaXN0ZW5jZUtleSA9IF9wZXJzaXN0ZW5jZUtleU5hbWUoXCJwZXJzaXN0ZW5jZVwiIC8qIFBFUlNJU1RFTkNFX1VTRVIgKi8sIGNvbmZpZy5hcGlLZXksIG5hbWUpO1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSBhdXRoLl9vblN0b3JhZ2VFdmVudC5iaW5kKGF1dGgpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX2FkZExpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc2V0Q3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9zZXQodGhpcy5mdWxsVXNlcktleSwgdXNlci50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRDdXJyZW50VXNlcigpIHtcclxuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5fZ2V0KHRoaXMuZnVsbFVzZXJLZXkpO1xyXG4gICAgICAgIHJldHVybiBibG9iID8gVXNlckltcGwuX2Zyb21KU09OKHRoaXMuYXV0aCwgYmxvYikgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQ3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZSh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgIH1cclxuICAgIHNhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9zZXQodGhpcy5mdWxsUGVyc2lzdGVuY2VLZXksIHRoaXMucGVyc2lzdGVuY2UudHlwZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzZXRQZXJzaXN0ZW5jZShuZXdQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbmNlID09PSBuZXdQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgdGhpcy5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVtb3ZlQ3VycmVudFVzZXIoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gbmV3UGVyc2lzdGVuY2U7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldEN1cnJlbnRVc2VyKGN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5fcmVtb3ZlTGlzdGVuZXIodGhpcy5mdWxsVXNlcktleSwgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlKGF1dGgsIHBlcnNpc3RlbmNlSGllcmFyY2h5LCB1c2VyS2V5ID0gXCJhdXRoVXNlclwiIC8qIEFVVEhfVVNFUiAqLykge1xyXG4gICAgICAgIGlmICghcGVyc2lzdGVuY2VIaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSksIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFbGltaW5hdGUgYW55IHBlcnNpc3RlbmNlcyB0aGF0IGFyZSBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlUGVyc2lzdGVuY2VzID0gKGF3YWl0IFByb21pc2UuYWxsKHBlcnNpc3RlbmNlSGllcmFyY2h5Lm1hcChhc3luYyAocGVyc2lzdGVuY2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKGF3YWl0IHBlcnNpc3RlbmNlLl9pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9KSkpLmZpbHRlcihwZXJzaXN0ZW5jZSA9PiBwZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHRoZSBmaXJzdCBwZXJzaXN0ZW5jZSBsaXN0ZWQsIG9yIGluIG1lbW9yeSBpZiBub25lIGF2YWlsYWJsZVxyXG4gICAgICAgIGxldCBzZWxlY3RlZFBlcnNpc3RlbmNlID0gYXZhaWxhYmxlUGVyc2lzdGVuY2VzWzBdIHx8XHJcbiAgICAgICAgICAgIF9nZXRJbnN0YW5jZShpbk1lbW9yeVBlcnNpc3RlbmNlKTtcclxuICAgICAgICBjb25zdCBrZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHVzZXJLZXksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxuICAgICAgICAvLyBQdWxsIG91dCB0aGUgZXhpc3RpbmcgdXNlciwgc2V0dGluZyB0aGUgY2hvc2VuIHBlcnNpc3RlbmNlIHRvIHRoYXRcclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSBpZiB0aGUgdXNlciBleGlzdHMuXHJcbiAgICAgICAgbGV0IHVzZXJUb01pZ3JhdGUgPSBudWxsO1xyXG4gICAgICAgIC8vIE5vdGUsIGhlcmUgd2UgY2hlY2sgZm9yIGEgdXNlciBpbiBfYWxsXyBwZXJzaXN0ZW5jZXMsIG5vdCBqdXN0IHRoZVxyXG4gICAgICAgIC8vIG9uZXMgZGVlbWVkIGF2YWlsYWJsZS4gSWYgd2UgY2FuIG1pZ3JhdGUgYSB1c2VyIG91dCBvZiBhIGJyb2tlblxyXG4gICAgICAgIC8vIHBlcnNpc3RlbmNlLCB3ZSB3aWxsIChidXQgb25seSBpZiB0aGF0IHBlcnNpc3RlbmNlIHN1cHBvcnRzIG1pZ3JhdGlvbikuXHJcbiAgICAgICAgZm9yIChjb25zdCBwZXJzaXN0ZW5jZSBvZiBwZXJzaXN0ZW5jZUhpZXJhcmNoeSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmIChibG9iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IFVzZXJJbXBsLl9mcm9tSlNPTihhdXRoLCBibG9iKTsgLy8gdGhyb3dzIGZvciB1bnBhcnNhYmxlIGJsb2IgKHdyb25nIGZvcm1hdClcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGVuY2UgIT09IHNlbGVjdGVkUGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlclRvTWlncmF0ZSA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB3ZSBmaW5kIHRoZSB1c2VyIGluIGEgcGVyc2lzdGVuY2UgdGhhdCBkb2VzIHN1cHBvcnQgbWlncmF0aW9uLCB1c2VcclxuICAgICAgICAvLyB0aGF0IG1pZ3JhdGlvbiBwYXRoIChvZiBvbmx5IHBlcnNpc3RlbmNlcyB0aGF0IHN1cHBvcnQgbWlncmF0aW9uKVxyXG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvbkhpZXJhcmNoeSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlcy5maWx0ZXIocCA9PiBwLl9zaG91bGRBbGxvd01pZ3JhdGlvbik7XHJcbiAgICAgICAgLy8gSWYgdGhlIHBlcnNpc3RlbmNlIGRvZXMgX25vdF8gYWxsb3cgbWlncmF0aW9uLCBqdXN0IGZpbmlzaCBvZmYgaGVyZVxyXG4gICAgICAgIGlmICghc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2hvdWxkQWxsb3dNaWdyYXRpb24gfHxcclxuICAgICAgICAgICAgIW1pZ3JhdGlvbkhpZXJhcmNoeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyKHNlbGVjdGVkUGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gbWlncmF0aW9uSGllcmFyY2h5WzBdO1xyXG4gICAgICAgIGlmICh1c2VyVG9NaWdyYXRlKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgbm9ybWFsbHkgc2hvdWxkbid0IHRocm93IHNpbmNlIGNob3NlblBlcnNpc3RlbmNlLmlzQXZhaWxhYmxlKCkgaXMgdHJ1ZSwgYnV0IGlmIGl0IGRvZXNcclxuICAgICAgICAgICAgLy8gd2UnbGwganVzdCBsZXQgaXQgYnViYmxlIHRvIHN1cmZhY2UgdGhlIGVycm9yLlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxlY3RlZFBlcnNpc3RlbmNlLl9zZXQoa2V5LCB1c2VyVG9NaWdyYXRlLnRvSlNPTigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBjbGVhciB0aGUga2V5IGluIG90aGVyIHBlcnNpc3RlbmNlcyBidXQgaWdub3JlIGVycm9ycy4gVGhpcyBoZWxwcyBwcmV2ZW50IGlzc3Vlc1xyXG4gICAgICAgIC8vIHN1Y2ggYXMgdXNlcnMgZ2V0dGluZyBzdHVjayB3aXRoIGEgcHJldmlvdXMgYWNjb3VudCBhZnRlciBzaWduaW5nIG91dCBhbmQgcmVmcmVzaGluZyB0aGUgdGFiLlxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHBlcnNpc3RlbmNlSGllcmFyY2h5Lm1hcChhc3luYyAocGVyc2lzdGVuY2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RlbmNlLl9yZW1vdmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyKHNlbGVjdGVkUGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgdGhlIGJyb3dzZXIgZm9yIHRoZSBwdXJwb3NlcyBvZiByZXBvcnRpbmcgdXNhZ2UgdG8gdGhlIEFQSVxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEJyb3dzZXJOYW1lKHVzZXJBZ2VudCkge1xyXG4gICAgY29uc3QgdWEgPSB1c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmICh1YS5pbmNsdWRlcygnb3BlcmEvJykgfHwgdWEuaW5jbHVkZXMoJ29wci8nKSB8fCB1YS5pbmNsdWRlcygnb3Bpb3MvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJPcGVyYVwiIC8qIE9QRVJBICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzSUVNb2JpbGUodWEpKSB7XHJcbiAgICAgICAgLy8gV2luZG93cyBwaG9uZSBJRU1vYmlsZSBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIklFTW9iaWxlXCIgLyogSUVNT0JJTEUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnbXNpZScpIHx8IHVhLmluY2x1ZGVzKCd0cmlkZW50LycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSUVcIiAvKiBJRSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRWRnZVwiIC8qIEVER0UgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIkZpcmVmb3hcIiAvKiBGSVJFRk9YICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ3NpbGsvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJTaWxrXCIgLyogU0lMSyAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0JsYWNrQmVycnkodWEpKSB7XHJcbiAgICAgICAgLy8gQmxhY2tiZXJyeSBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIkJsYWNrYmVycnlcIiAvKiBCTEFDS0JFUlJZICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzV2ViT1ModWEpKSB7XHJcbiAgICAgICAgLy8gV2ViT1MgZGVmYXVsdCBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIldlYm9zXCIgLyogV0VCT1MgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNTYWZhcmkodWEpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2FmYXJpXCIgLyogU0FGQVJJICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHVhLmluY2x1ZGVzKCdjaHJvbWUvJykgfHwgX2lzQ2hyb21lSU9TKHVhKSkgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2VkZ2UvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJDaHJvbWVcIiAvKiBDSFJPTUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNBbmRyb2lkKHVhKSkge1xyXG4gICAgICAgIC8vIEFuZHJvaWQgc3RvY2sgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJBbmRyb2lkXCIgLyogQU5EUk9JRCAqLztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIE1vc3QgbW9kZXJuIGJyb3dzZXJzIGhhdmUgbmFtZS92ZXJzaW9uIGF0IGVuZCBvZiB1c2VyIGFnZW50IHN0cmluZy5cclxuICAgICAgICBjb25zdCByZSA9IC8oW2EtekEtWlxcZFxcLl0rKVxcL1thLXpBLVpcXGRcXC5dKiQvO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB1c2VyQWdlbnQubWF0Y2gocmUpO1xyXG4gICAgICAgIGlmICgobWF0Y2hlcyA9PT0gbnVsbCB8fCBtYXRjaGVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXRjaGVzLmxlbmd0aCkgPT09IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiT3RoZXJcIiAvKiBPVEhFUiAqLztcclxufVxyXG5mdW5jdGlvbiBfaXNGaXJlZm94KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9maXJlZm94XFwvL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzU2FmYXJpKHVzZXJBZ2VudCA9IGdldFVBKCkpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICByZXR1cm4gKHVhLmluY2x1ZGVzKCdzYWZhcmkvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2Nocm9tZS8nKSAmJlxyXG4gICAgICAgICF1YS5pbmNsdWRlcygnY3Jpb3MvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2FuZHJvaWQnKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQ2hyb21lSU9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9jcmlvc1xcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFTW9iaWxlKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9pZW1vYmlsZS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0FuZHJvaWQodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2FuZHJvaWQvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNCbGFja0JlcnJ5KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9ibGFja2JlcnJ5L2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzV2ViT1ModWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL3dlYm9zL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9pcGhvbmV8aXBhZHxpcG9kL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TN09yOCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAoLyhpUGFkfGlQaG9uZXxpUG9kKS4qT1MgN19cXGQvaS50ZXN0KHVhKSB8fFxyXG4gICAgICAgIC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDhfXFxkL2kudGVzdCh1YSkpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPU1N0YW5kYWxvbmUodWEgPSBnZXRVQSgpKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gX2lzSU9TKHVhKSAmJiAhISgoX2EgPSB3aW5kb3cubmF2aWdhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RhbmRhbG9uZSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSUUxMCgpIHtcclxuICAgIHJldHVybiBpc0lFKCkgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID09PSAxMDtcclxufVxyXG5mdW5jdGlvbiBfaXNNb2JpbGVCcm93c2VyKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgLy8gVE9ETzogaW1wbGVtZW50IGdldEJyb3dzZXJOYW1lIGVxdWl2YWxlbnQgZm9yIE9TLlxyXG4gICAgcmV0dXJuIChfaXNJT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQW5kcm9pZCh1YSkgfHxcclxuICAgICAgICBfaXNXZWJPUyh1YSkgfHxcclxuICAgICAgICBfaXNCbGFja0JlcnJ5KHVhKSB8fFxyXG4gICAgICAgIC93aW5kb3dzIHBob25lL2kudGVzdCh1YSkgfHxcclxuICAgICAgICBfaXNJRU1vYmlsZSh1YSkpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lmcmFtZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgY3VycmVudCB3aW5kb3cgaXMgbm90IHRoZSB0b3Agd2luZG93LlxyXG4gICAgICAgIC8vIElmIHNvLCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICByZXR1cm4gISEod2luZG93ICYmIHdpbmRvdyAhPT0gd2luZG93LnRvcCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKlxyXG4gKiBEZXRlcm1pbmUgdGhlIFNESyB2ZXJzaW9uIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gX2dldENsaWVudFZlcnNpb24oY2xpZW50UGxhdGZvcm0sIGZyYW1ld29ya3MgPSBbXSkge1xyXG4gICAgbGV0IHJlcG9ydGVkUGxhdGZvcm07XHJcbiAgICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICAgICAgY2FzZSBcIkJyb3dzZXJcIiAvKiBCUk9XU0VSICovOlxyXG4gICAgICAgICAgICAvLyBJbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQsIHJlcG9ydCB0aGUgYnJvd3NlciBuYW1lLlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gX2dldEJyb3dzZXJOYW1lKGdldFVBKCkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiV29ya2VyXCIgLyogV09SS0VSICovOlxyXG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSBhIHdvcmtlciBydW5zIGZyb20gYSBicm93c2VyIGJ1dCB3ZSBuZWVkIHRvIGRpZmZlcmVudGlhdGUgYVxyXG4gICAgICAgICAgICAvLyB3b3JrZXIgZnJvbSBhIGJyb3dzZXIuXHJcbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOiBDaHJvbWUtV29ya2VyL0pzQ29yZS80LjkuMS9GaXJlYmFzZUNvcmUtd2ViLlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gYCR7X2dldEJyb3dzZXJOYW1lKGdldFVBKCkpfS0ke2NsaWVudFBsYXRmb3JtfWA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJlcG9ydGVkUGxhdGZvcm0gPSBjbGllbnRQbGF0Zm9ybTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlcG9ydGVkRnJhbWV3b3JrcyA9IGZyYW1ld29ya3MubGVuZ3RoXHJcbiAgICAgICAgPyBmcmFtZXdvcmtzLmpvaW4oJywnKVxyXG4gICAgICAgIDogJ0ZpcmViYXNlQ29yZS13ZWInOyAvKiBkZWZhdWx0IHZhbHVlIGlmIG5vIG90aGVyIGZyYW1ld29yayBpcyB1c2VkICovXHJcbiAgICByZXR1cm4gYCR7cmVwb3J0ZWRQbGF0Zm9ybX0vJHtcIkpzQ29yZVwiIC8qIENPUkUgKi99LyR7U0RLX1ZFUlNJT059LyR7cmVwb3J0ZWRGcmFtZXdvcmtzfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQXV0aEltcGwge1xyXG4gICAgY29uc3RydWN0b3IoYXBwLCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVtdWxhdG9yQ29uZmlnID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gQW55IG5ldHdvcmsgY2FsbHMgd2lsbCBzZXQgdGhpcyB0byB0cnVlIGFuZCBwcmV2ZW50IHN1YnNlcXVlbnQgZW11bGF0b3JcclxuICAgICAgICAvLyBpbml0aWFsaXphdGlvblxyXG4gICAgICAgIHRoaXMuX2NhbkluaXRFbXVsYXRvciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZO1xyXG4gICAgICAgIC8vIFRyYWNrcyB0aGUgbGFzdCBub3RpZmllZCBVSUQgZm9yIHN0YXRlIGNoYW5nZSBsaXN0ZW5lcnMgdG8gcHJldmVudFxyXG4gICAgICAgIC8vIHJlcGVhdGVkIGNhbGxzIHRvIHRoZSBjYWxsYmFja3MuIFVuZGVmaW5lZCBtZWFucyBpdCdzIG5ldmVyIGJlZW5cclxuICAgICAgICAvLyBjYWxsZWQsIHdoZXJlYXMgbnVsbCBtZWFucyBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYSBzaWduZWQgb3V0IHVzZXJcclxuICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nOiBmYWxzZSB9O1xyXG4gICAgICAgIHRoaXMuZnJhbWV3b3JrcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IGNvbmZpZy5zZGtDbGllbnRWZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UocGVyc2lzdGVuY2VIaWVyYXJjaHksIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyID0gX2dldEluc3RhbmNlKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEhhdmUgdG8gY2hlY2sgZm9yIGFwcCBkZWxldGlvbiB0aHJvdWdob3V0IGluaXRpYWxpemF0aW9uIChhZnRlciBlYWNoXHJcbiAgICAgICAgLy8gcHJvbWlzZSByZXNvbHV0aW9uKVxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZSA9IHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgcGVyc2lzdGVuY2VIaWVyYXJjaHkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc29sdmVyIGVhcmx5IGlmIG5lY2Vzc2FyeSAob25seSBhcHBsaWNhYmxlIHRvIHdlYjpcclxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGNhdXNlIHRoZSBpZnJhbWUgdG8gbG9hZCBpbW1lZGlhdGVseSBpbiBjZXJ0YWluIGNhc2VzKVxyXG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3Nob3VsZEluaXRQcm9hY3RpdmVseSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscywgZG9uJ3QgaGFsdCBhdXRoIGxvYWRpbmdcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgLyogSWdub3JlIHRoZSBlcnJvciAqLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSAoKF9iID0gdGhpcy5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVpZCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgcGVyc2lzdGVuY2UgaXMgY2hhbmdlZCBpbiBhbm90aGVyIHdpbmRvdywgdGhlIHVzZXIgbWFuYWdlciB3aWxsIGxldCB1cyBrbm93XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9vblN0b3JhZ2VFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFVzZXIgJiYgIXVzZXIpIHtcclxuICAgICAgICAgICAgLy8gTm8gY2hhbmdlLCBkbyBub3RoaW5nICh3YXMgc2lnbmVkIG91dCBhbmQgcmVtYWluZWQgc2lnbmVkIG91dCkuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIHNhbWUgdXNlciBpcyB0byBiZSBzeW5jaHJvbml6ZWQuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnVpZCA9PT0gdXNlci51aWQpIHtcclxuICAgICAgICAgICAgLy8gRGF0YSB1cGRhdGUsIHNpbXBseSBjb3B5IGRhdGEgY2hhbmdlcy5cclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX2Fzc2lnbih1c2VyKTtcclxuICAgICAgICAgICAgLy8gSWYgdG9rZW5zIGNoYW5nZWQgZnJvbSBwcmV2aW91cyB1c2VyIHRva2VucywgdGhpcyB3aWxsIHRyaWdnZXJcclxuICAgICAgICAgICAgLy8gbm90aWZ5QXV0aExpc3RlbmVyc18uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3VycmVudFVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IEF1dGggc3RhdGUuIEVpdGhlciBhIG5ldyBsb2dpbiBvciBsb2dvdXQuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcGVuZGluZyByZWRpcmVjdCBldmVudC5cclxuICAgICAgICBsZXQgc3RvcmVkVXNlciA9IChhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKSk7XHJcbiAgICAgICAgaWYgKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVc2VyRXZlbnRJZCA9IChfYSA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVXNlckV2ZW50SWQgPSBzdG9yZWRVc2VyID09PSBudWxsIHx8IHN0b3JlZFVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0b3JlZFVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50cnlSZWRpcmVjdFNpZ25Jbihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgc3RvcmVkIHVzZXIgKGkuZS4gdGhlIG9sZCBcImN1cnJlbnRVc2VyXCIpIGhhcyBhIHJlZGlyZWN0SWQgdGhhdFxyXG4gICAgICAgICAgICAvLyBtYXRjaGVzIHRoZSByZWRpcmVjdCB1c2VyLCB0aGVuIHdlIHdhbnQgdG8gaW5pdGlhbGx5IHNpZ24gaW4gd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gbmV3IHVzZXIgb2JqZWN0IGZyb20gcmVzdWx0LlxyXG4gICAgICAgICAgICAvLyBUT0RPKHNhbWdobyk6IE1vcmUgdGhvcm91Z2hseSB0ZXN0IGFsbCBvZiB0aGlzXHJcbiAgICAgICAgICAgIGlmICgoIXJlZGlyZWN0VXNlckV2ZW50SWQgfHwgcmVkaXJlY3RVc2VyRXZlbnRJZCA9PT0gc3RvcmVkVXNlckV2ZW50SWQpICYmXHJcbiAgICAgICAgICAgICAgICAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LnVzZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9yZWRVc2VyID0gcmVzdWx0LnVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgbm8gdXNlciBpbiBwZXJzaXN0ZW5jZSwgdGhlcmUgaXMgbm8gY3VycmVudCB1c2VyLiBTZXQgdG8gbnVsbC5cclxuICAgICAgICBpZiAoIXN0b3JlZFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpc24ndCBhIHJlZGlyZWN0IHVzZXIsIHdlIGNhbiByZWxvYWQgYW5kIGJhaWxcclxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGFsc28gY2F0Y2ggdGhlIHJlZGlyZWN0ZWQgdXNlciwgaWYgYXZhaWxhYmxlLCBhcyB0aGF0IG1ldGhvZFxyXG4gICAgICAgICAgICAvLyBzdHJpcHMgdGhlIF9yZWRpcmVjdEV2ZW50SWRcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHN0b3JlZFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfYXNzZXJ0KHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHVzZXIncyBldmVudCBJRCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBldmVudCBJRCxcclxuICAgICAgICAvLyBETyBOT1QgcmVsb2FkIHRoZSBjdXJyZW50IHVzZXIsIG90aGVyd2lzZSB0aGV5J2xsIGJlIGNsZWFyZWQgZnJvbSBzdG9yYWdlLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgaW1wb3J0YW50IGZvciB0aGUgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QoKSBmbG93LlxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0VXNlciAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXNlci5fcmVkaXJlY3RFdmVudElkID09PSBzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihzdG9yZWRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHN0b3JlZFVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdHJ5UmVkaXJlY3RTaWduSW4ocmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIC8vIFRoZSByZWRpcmVjdCB1c2VyIG5lZWRzIHRvIGJlIGNoZWNrZWQgKGFuZCBzaWduZWQgaW4gaWYgYXZhaWxhYmxlKVxyXG4gICAgICAgIC8vIGR1cmluZyBhdXRoIGluaXRpYWxpemF0aW9uLiBBbGwgb2YgdGhlIG5vcm1hbCBzaWduIGluIGFuZCBsaW5rL3JlYXV0aFxyXG4gICAgICAgIC8vIGZsb3dzIGNhbGwgYmFjayBpbnRvIGF1dGggYW5kIHB1c2ggdGhpbmdzIG9udG8gdGhlIHByb21pc2UgcXVldWUuIFdlXHJcbiAgICAgICAgLy8gbmVlZCB0byBhd2FpdCB0aGUgcmVzdWx0IG9mIHRoZSByZWRpcmVjdCBzaWduIGluICppbnNpZGUgdGhlIHByb21pc2VcclxuICAgICAgICAvLyBxdWV1ZSouIFRoaXMgcHJlc2VudHMgYSBwcm9ibGVtOiB3ZSBydW4gaW50byBkZWFkbG9jay4gU2VlOlxyXG4gICAgICAgIC8vICAgIOKUjD4gW0luaXRpYWxpemF0aW9uXSDilIDilIDilIDilIDilIDilJBcclxuICAgICAgICAvLyAgICDilIw+IFs8b3RoZXIgcXVldWUgdGFza3M+XSDilIJcclxuICAgICAgICAvLyAgICDilJTilIAgW2dldFJlZGlyZWN0UmVzdWx0XSA84pSA4pSYXHJcbiAgICAgICAgLy8gICAgd2hlcmUgW10gYXJlIHRhc2tzIG9uIHRoZSBxdWV1ZSBhbmQgYXJyb3dzIGRlbm90ZSBhd2FpdHNcclxuICAgICAgICAvLyBJbml0aWFsaXphdGlvbiB3aWxsIG5ldmVyIGNvbXBsZXRlIGJlY2F1c2UgaXQncyB3YWl0aW5nIG9uIHNvbWV0aGluZ1xyXG4gICAgICAgIC8vIHRoYXQncyB3YWl0aW5nIGZvciBpbml0aWFsaXphdGlvbiB0byBjb21wbGV0ZSFcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIEluc3RlYWQsIHRoaXMgbWV0aG9kIGNhbGxzIGdldFJlZGlyZWN0UmVzdWx0KCkgKHN0b3JlZCBpblxyXG4gICAgICAgIC8vIF9jb21wbGV0ZVJlZGlyZWN0Rm4pIHdpdGggYW4gb3B0aW9uYWwgcGFyYW1ldGVyIHRoYXQgaW5zdHJ1Y3RzIGFsbCBvZlxyXG4gICAgICAgIC8vIHRoZSB1bmRlcmx5aW5nIGF1dGggb3BlcmF0aW9ucyB0byBza2lwIGFueXRoaW5nIHRoYXQgbXV0YXRlcyBhdXRoIHN0YXRlLlxyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGtub3cgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyIGlzIHNldCBzaW5jZSByZWRpcmVjdFJlc29sdmVyXHJcbiAgICAgICAgICAgIC8vIGlzIHBhc3NlZCBpbi4gVGhlIF9jb21wbGV0ZVJlZGlyZWN0Rm4gZXhwZWN0cyB0aGUgdW53cmFwcGVkIGV4dGVybi5cclxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9jb21wbGV0ZVJlZGlyZWN0Rm4odGhpcywgcmVkaXJlY3RSZXNvbHZlciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIFN3YWxsb3cgYW55IGVycm9ycyBoZXJlOyB0aGUgY29kZSBjYW4gcmV0cmlldmUgdGhlbSBpblxyXG4gICAgICAgICAgICAvLyBnZXRSZWRpcmVjdFJlc3VsdCgpLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIodXNlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlICE9PSBgYXV0aC8ke1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZXRoaW5nJ3Mgd3Jvbmcgd2l0aCB0aGUgdXNlcidzIHRva2VuLiBMb2cgdGhlbSBvdXQgYW5kIHJlbW92ZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbSBmcm9tIHN0b3JhZ2VcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKTtcclxuICAgIH1cclxuICAgIHVzZURldmljZUxhbmd1YWdlKCkge1xyXG4gICAgICAgIHRoaXMubGFuZ3VhZ2VDb2RlID0gX2dldFVzZXJMYW5ndWFnZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2RlbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVwZGF0ZUN1cnJlbnRVc2VyKHVzZXJFeHRlcm4pIHtcclxuICAgICAgICAvLyBUaGUgcHVibGljIHVwZGF0ZUN1cnJlbnRVc2VyIG1ldGhvZCBuZWVkcyB0byBtYWtlIGEgY29weSBvZiB0aGUgdXNlcixcclxuICAgICAgICAvLyBhbmQgYWxzbyBjaGVjayB0aGF0IHRoZSBwcm9qZWN0IG1hdGNoZXNcclxuICAgICAgICBjb25zdCB1c2VyID0gdXNlckV4dGVyblxyXG4gICAgICAgICAgICA/IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyRXh0ZXJuKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh1c2VyLmF1dGguY29uZmlnLmFwaUtleSA9PT0gdGhpcy5jb25maWcuYXBpS2V5LCB0aGlzLCBcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcih1c2VyICYmIHVzZXIuX2Nsb25lKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHRoaXMudGVuYW50SWQgPT09IHVzZXIudGVuYW50SWQsIHRoaXMsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2lnbk91dCgpIHtcclxuICAgICAgICAvLyBDbGVhciB0aGUgcmVkaXJlY3QgdXNlciB3aGVuIHNpZ25PdXQgaXMgY2FsbGVkXHJcbiAgICAgICAgaWYgKHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIgfHwgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NldFJlZGlyZWN0VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgfVxyXG4gICAgc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5zZXRQZXJzaXN0ZW5jZShfZ2V0SW5zdGFuY2UocGVyc2lzdGVuY2UpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9nZXRQZXJzaXN0ZW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnBlcnNpc3RlbmNlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlRXJyb3JNYXAoZXJyb3JNYXApIHtcclxuICAgICAgICB0aGlzLl9lcnJvckZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXAoKSk7XHJcbiAgICB9XHJcbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgIH1cclxuICAgIG9uSWRUb2tlbkNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5jb25maWcuYXBpS2V5LFxyXG4gICAgICAgICAgICBhdXRoRG9tYWluOiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluLFxyXG4gICAgICAgICAgICBhcHBOYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VyOiAoX2EgPSB0aGlzLl9jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvSlNPTigpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXRSZWRpcmVjdFVzZXIodXNlciwgcG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgY29uc3QgcmVkaXJlY3RNYW5hZ2VyID0gYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyID09PSBudWxsXHJcbiAgICAgICAgICAgID8gcmVkaXJlY3RNYW5hZ2VyLnJlbW92ZUN1cnJlbnRVc2VyKClcclxuICAgICAgICAgICAgOiByZWRpcmVjdE1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSAocG9wdXBSZWRpcmVjdFJlc29sdmVyICYmIF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyO1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc29sdmVyLCB0aGlzLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgW19nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSldLCBcInJlZGlyZWN0VXNlclwiIC8qIFJFRElSRUNUX1VTRVIgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXNlciA9XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlZGlyZWN0VXNlckZvcklkKGlkKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UndmUgY2xlYXJlZCBhbnkgcGVuZGluZyBwZXJzaXN0ZW5jZSBhY3Rpb25zIGlmIHdlJ3JlIG5vdCBpblxyXG4gICAgICAgIC8vIHRoZSBpbml0aWFsaXplclxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucXVldWUoYXN5bmMgKCkgPT4geyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQpID09PSBpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9iID0gdGhpcy5yZWRpcmVjdFVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5fcmVkaXJlY3RFdmVudElkKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3RVc2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyKSB7XHJcbiAgICAgICAgaWYgKHVzZXIgPT09IHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogTm90aWZpZXMgbGlzdGVuZXJzIG9ubHkgaWYgdGhlIHVzZXIgaXMgY3VycmVudCAqL1xyXG4gICAgX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh1c2VyKSB7XHJcbiAgICAgICAgaWYgKHVzZXIgPT09IHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlBdXRoTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2tleSgpIHtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWcuYXV0aERvbWFpbn06JHt0aGlzLmNvbmZpZy5hcGlLZXl9OiR7dGhpcy5uYW1lfWA7XHJcbiAgICB9XHJcbiAgICBfc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyB0aGUgY3VycmVudCB1c2VyIGNhc3QgYXMgdGhlIGludGVybmFsIHR5cGUgKi9cclxuICAgIGdldCBfY3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXI7XHJcbiAgICB9XHJcbiAgICBub3RpZnlBdXRoTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVpZCA9IChfYiA9IChfYSA9IHRoaXMuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdE5vdGlmaWVkVWlkICE9PSBjdXJyZW50VWlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gY3VycmVudFVpZDtcclxuICAgICAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24ubmV4dCh0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZWdpc3RlclN0YXRlTGlzdGVuZXIoc3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNiID0gdHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgID8gbmV4dE9yT2JzZXJ2ZXJcclxuICAgICAgICAgICAgOiBuZXh0T3JPYnNlcnZlci5uZXh0LmJpbmQobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9pc0luaXRpYWxpemVkXHJcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgOiB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgX2Fzc2VydChwcm9taXNlLCB0aGlzLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIFRoZSBjYWxsYmFjayBuZWVkcyB0byBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkgcGVyIHRoZSBzcGVjLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4gY2IodGhpcy5jdXJyZW50VXNlcikpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmFkZE9ic2VydmVyKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVucHJvdGVjdGVkIChmcm9tIHJhY2UgY29uZGl0aW9ucykgbWV0aG9kIHRvIHNldCB0aGUgY3VycmVudCB1c2VyLiBUaGlzXHJcbiAgICAgKiBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYSBxdWV1ZWQgY2FsbGJhY2suIFRoaXMgaXMgbmVjZXNzYXJ5XHJcbiAgICAgKiBiZWNhdXNlIHRoZSBxdWV1ZSBzaG91bGRuJ3QgcmVseSBvbiBhbm90aGVyIHF1ZXVlZCBjYWxsYmFjay5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlciAhPT0gdXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICAgICAgaWYgKHVzZXIgJiYgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UucmVtb3ZlQ3VycmVudFVzZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBxdWV1ZShhY3Rpb24pIHtcclxuICAgICAgICAvLyBJbiBjYXNlIHNvbWV0aGluZyBlcnJvcnMsIHRoZSBjYWxsYmFjayBzdGlsbCBzaG91bGQgYmUgY2FsbGVkIGluIG9yZGVyXHJcbiAgICAgICAgLy8gdG8ga2VlcCB0aGUgcHJvbWlzZSBjaGFpbiBhbGl2ZVxyXG4gICAgICAgIHRoaXMub3BlcmF0aW9ucyA9IHRoaXMub3BlcmF0aW9ucy50aGVuKGFjdGlvbiwgYWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFzc2VydGVkUGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfbG9nRnJhbWV3b3JrKGZyYW1ld29yaykge1xyXG4gICAgICAgIGlmICghZnJhbWV3b3JrIHx8IHRoaXMuZnJhbWV3b3Jrcy5pbmNsdWRlcyhmcmFtZXdvcmspKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnB1c2goZnJhbWV3b3JrKTtcclxuICAgICAgICAvLyBTb3J0IGFscGhhYmV0aWNhbGx5IHNvIHRoYXQgXCJGaXJlYmFzZUNvcmUtd2ViLEZpcmViYXNlVUktd2ViXCIgYW5kXHJcbiAgICAgICAgLy8gXCJGaXJlYmFzZVVJLXdlYixGaXJlYmFzZUNvcmUtd2ViXCIgYXJlbid0IHZpZXdlZCBhcyBkaWZmZXJlbnQuXHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnNvcnQoKTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBfZ2V0Q2xpZW50VmVyc2lvbih0aGlzLmNvbmZpZy5jbGllbnRQbGF0Zm9ybSwgdGhpcy5fZ2V0RnJhbWV3b3JrcygpKTtcclxuICAgIH1cclxuICAgIF9nZXRGcmFtZXdvcmtzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1ld29ya3M7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0QWRkaXRpb25hbEhlYWRlcnMoKSB7XHJcbiAgICAgICAgLy8gQWRkaXRpb25hbCBoZWFkZXJzIG9uIGV2ZXJ5IHJlcXVlc3RcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgICAgICAgICBbXCJYLUNsaWVudC1WZXJzaW9uXCIgLyogWF9DTElFTlRfVkVSU0lPTiAqL106IHRoaXMuY2xpZW50VmVyc2lvbixcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmFwcC5vcHRpb25zLmFwcElkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbXCJYLUZpcmViYXNlLWdtcGlkXCIgLyogWF9GSVJFQkFTRV9HTVBJRCAqL10gPSB0aGlzLmFwcC5vcHRpb25zLmFwcElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVycztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogTWV0aG9kIHRvIGJlIHVzZWQgdG8gY2FzdCBkb3duIHRvIG91ciBwcml2YXRlIGltcGxtZW50YXRpb24gb2YgQXV0aC5cclxuICogSXQgd2lsbCBhbHNvIGhhbmRsZSB1bndyYXBwaW5nIGZyb20gdGhlIGNvbXBhdCB0eXBlIGlmIG5lY2Vzc2FyeVxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCBBdXRoIG9iamVjdCBwYXNzZWQgaW4gZnJvbSBkZXZlbG9wZXJcclxuICovXHJcbmZ1bmN0aW9uIF9jYXN0QXV0aChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG59XHJcbi8qKiBIZWxwZXIgY2xhc3MgdG8gd3JhcCBzdWJzY3JpYmVyIGxvZ2ljICovXHJcbmNsYXNzIFN1YnNjcmlwdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFkZE9ic2VydmVyID0gY3JlYXRlU3Vic2NyaWJlKG9ic2VydmVyID0+ICh0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXIpKTtcclxuICAgIH1cclxuICAgIGdldCBuZXh0KCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5vYnNlcnZlciwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVyLm5leHQuYmluZCh0aGlzLm9ic2VydmVyKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQ2hhbmdlcyB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIEZpcmViYXNlIEF1dGggRW11bGF0b3IsIGluc3RlYWQgb2YgcHJvZHVjdGlvblxyXG4gKiBGaXJlYmFzZSBBdXRoIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG11c3QgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgaW1tZWRpYXRlbHkgZm9sbG93aW5nIHRoZSBmaXJzdCBjYWxsIHRvXHJcbiAqIHtAbGluayBpbml0aWFsaXplQXV0aH0uICBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscyBhcyBlbXVsYXRvclxyXG4gKiB0cmFmZmljIGlzIG5vdCBlbmNyeXB0ZWQuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCAnaHR0cDovLzEyNy4wLjAuMTo5MDk5JywgeyBkaXNhYmxlV2FybmluZ3M6IHRydWUgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIGF0IHdoaWNoIHRoZSBlbXVsYXRvciBpcyBydW5uaW5nIChlZywgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5OScpLlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsLiBgb3B0aW9ucy5kaXNhYmxlV2FybmluZ3NgIGRlZmF1bHRzIHRvIGBmYWxzZWAuIFNldCBpdCB0b1xyXG4gKiBgdHJ1ZWAgdG8gZGlzYWJsZSB0aGUgd2FybmluZyBiYW5uZXIgYXR0YWNoZWQgdG8gdGhlIERPTS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCB1cmwsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnQoYXV0aEludGVybmFsLl9jYW5Jbml0RW11bGF0b3IsIGF1dGhJbnRlcm5hbCwgXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogRU1VTEFUT1JfQ09ORklHX0ZBSUxFRCAqLyk7XHJcbiAgICBfYXNzZXJ0KC9eaHR0cHM/OlxcL1xcLy8udGVzdCh1cmwpLCBhdXRoSW50ZXJuYWwsIFwiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqLyk7XHJcbiAgICBjb25zdCBkaXNhYmxlV2FybmluZ3MgPSAhIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGlzYWJsZVdhcm5pbmdzKTtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCB7IGhvc3QsIHBvcnQgfSA9IGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpO1xyXG4gICAgY29uc3QgcG9ydFN0ciA9IHBvcnQgPT09IG51bGwgPyAnJyA6IGA6JHtwb3J0fWA7XHJcbiAgICAvLyBBbHdheXMgcmVwbGFjZSBwYXRoIHdpdGggXCIvXCIgKGV2ZW4gaWYgaW5wdXQgdXJsIGhhZCBubyBwYXRoIGF0IGFsbCwgb3IgaGFkIGEgZGlmZmVyZW50IG9uZSkuXHJcbiAgICBhdXRoSW50ZXJuYWwuY29uZmlnLmVtdWxhdG9yID0geyB1cmw6IGAke3Byb3RvY29sfS8vJHtob3N0fSR7cG9ydFN0cn0vYCB9O1xyXG4gICAgYXV0aEludGVybmFsLnNldHRpbmdzLmFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZyA9IHRydWU7XHJcbiAgICBhdXRoSW50ZXJuYWwuZW11bGF0b3JDb25maWcgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICBob3N0LFxyXG4gICAgICAgIHBvcnQsXHJcbiAgICAgICAgcHJvdG9jb2w6IHByb3RvY29sLnJlcGxhY2UoJzonLCAnJyksXHJcbiAgICAgICAgb3B0aW9uczogT2JqZWN0LmZyZWV6ZSh7IGRpc2FibGVXYXJuaW5ncyB9KVxyXG4gICAgfSk7XHJcbiAgICBpZiAoIWRpc2FibGVXYXJuaW5ncykge1xyXG4gICAgICAgIGVtaXRFbXVsYXRvcldhcm5pbmcoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBleHRyYWN0UHJvdG9jb2wodXJsKSB7XHJcbiAgICBjb25zdCBwcm90b2NvbEVuZCA9IHVybC5pbmRleE9mKCc6Jyk7XHJcbiAgICByZXR1cm4gcHJvdG9jb2xFbmQgPCAwID8gJycgOiB1cmwuc3Vic3RyKDAsIHByb3RvY29sRW5kICsgMSk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEhvc3RBbmRQb3J0KHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2wgPSBleHRyYWN0UHJvdG9jb2wodXJsKTtcclxuICAgIGNvbnN0IGF1dGhvcml0eSA9IC8oXFwvXFwvKT8oW14/Iy9dKykvLmV4ZWModXJsLnN1YnN0cihwcm90b2NvbC5sZW5ndGgpKTsgLy8gQmV0d2VlbiAvLyBhbmQgLywgPyBvciAjLlxyXG4gICAgaWYgKCFhdXRob3JpdHkpIHtcclxuICAgICAgICByZXR1cm4geyBob3N0OiAnJywgcG9ydDogbnVsbCB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgaG9zdEFuZFBvcnQgPSBhdXRob3JpdHlbMl0uc3BsaXQoJ0AnKS5wb3AoKSB8fCAnJzsgLy8gU3RyaXAgb3V0IFwidXNlcm5hbWU6cGFzc3dvcmRAXCIuXHJcbiAgICBjb25zdCBicmFja2V0ZWRJUHY2ID0gL14oXFxbW15cXF1dK1xcXSkoOnwkKS8uZXhlYyhob3N0QW5kUG9ydCk7XHJcbiAgICBpZiAoYnJhY2tldGVkSVB2Nikge1xyXG4gICAgICAgIGNvbnN0IGhvc3QgPSBicmFja2V0ZWRJUHY2WzFdO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChob3N0QW5kUG9ydC5zdWJzdHIoaG9zdC5sZW5ndGggKyAxKSkgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IFtob3N0LCBwb3J0XSA9IGhvc3RBbmRQb3J0LnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdCwgcG9ydDogcGFyc2VQb3J0KHBvcnQpIH07XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcGFyc2VQb3J0KHBvcnRTdHIpIHtcclxuICAgIGlmICghcG9ydFN0cikge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcG9ydCA9IE51bWJlcihwb3J0U3RyKTtcclxuICAgIGlmIChpc05hTihwb3J0KSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBvcnQ7XHJcbn1cclxuZnVuY3Rpb24gZW1pdEVtdWxhdG9yV2FybmluZygpIHtcclxuICAgIGZ1bmN0aW9uIGF0dGFjaEJhbm5lcigpIHtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgICAgICBjb25zdCBzdHkgPSBlbC5zdHlsZTtcclxuICAgICAgICBlbC5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICAnUnVubmluZyBpbiBlbXVsYXRvciBtb2RlLiBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscy4nO1xyXG4gICAgICAgIHN0eS5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgICAgICAgc3R5LndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIHN0eS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmZmZmZic7XHJcbiAgICAgICAgc3R5LmJvcmRlciA9ICcuMWVtIHNvbGlkICMwMDAwMDAnO1xyXG4gICAgICAgIHN0eS5jb2xvciA9ICcjYjUwMDAwJztcclxuICAgICAgICBzdHkuYm90dG9tID0gJzBweCc7XHJcbiAgICAgICAgc3R5LmxlZnQgPSAnMHB4JztcclxuICAgICAgICBzdHkubWFyZ2luID0gJzBweCc7XHJcbiAgICAgICAgc3R5LnpJbmRleCA9ICcxMDAwMCc7XHJcbiAgICAgICAgc3R5LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2ZpcmViYXNlLWVtdWxhdG9yLXdhcm5pbmcnKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUuaW5mbyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnV0FSTklORzogWW91IGFyZSB1c2luZyB0aGUgQXV0aCBFbXVsYXRvciwnICtcclxuICAgICAgICAgICAgJyB3aGljaCBpcyBpbnRlbmRlZCBmb3IgbG9jYWwgdGVzdGluZyBvbmx5LiAgRG8gbm90IHVzZSB3aXRoJyArXHJcbiAgICAgICAgICAgICcgcHJvZHVjdGlvbiBjcmVkZW50aWFscy4nKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYXR0YWNoQmFubmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF0dGFjaEJhbm5lcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgcmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIEF1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcGxlbWVudGF0aW9ucyBzcGVjaWZ5IHRoZSBkZXRhaWxzIGFib3V0IGVhY2ggYXV0aCBwcm92aWRlcidzIGNyZWRlbnRpYWwgcmVxdWlyZW1lbnRzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyIElEIGZvciB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGV4YW1wbGUsICdmYWNlYm9vay5jb20nLCBvciAnZ29vZ2xlLmNvbScuXHJcbiAgICAgKi9cclxuICAgIHByb3ZpZGVySWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXV0aGVudGljYXRpb24gc2lnbiBpbiBtZXRob2QgZm9yIHRoZSBjcmVkZW50aWFsLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQsIG9yXHJcbiAgICAgKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSBzaWduLWluIG1ldGhvZFxyXG4gICAgICogaWRlbnRpZmllciBhcyByZXR1cm5lZCBpbiB7QGxpbmsgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWx9LlxyXG4gICAgICovXHJcbiAgICBzaWduSW5NZXRob2QpIHtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMuc2lnbkluTWV0aG9kID0gc2lnbkluTWV0aG9kO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShfYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oX2F1dGgsIF9pZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKF9hdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVzZXRQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnJlc2V0UGFzc3dvcmRcIiAvKiBSRVNFVF9QQVNTV09SRCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlBY3Rpb25Db2RlJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQYXNzd29yZFwiIC8qIFNJR05fSU5fV0lUSF9QQVNTV09SRCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRPb2JDb2RlXCIgLyogU0VORF9PT0JfQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kRW1haWxWZXJpZmljYXRpb24kMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kU2lnbkluTGlua1RvRW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QW5kQ2hhbmdlRW1haWwoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmskMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhFbWFpbExpbmtcIiAvKiBTSUdOX0lOX1dJVEhfRU1BSUxfTElOSyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhFbWFpbExpbmtcIiAvKiBTSUdOX0lOX1dJVEhfRU1BSUxfTElOSyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgcmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSBmb3JcclxuICoge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JEXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIENvdmVycyBib3RoIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JEIGFuZFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBFbWFpbEF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZW1haWwsIFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3Bhc3N3b3JkLCBzaWduSW5NZXRob2QsIFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3RlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLywgc2lnbkluTWV0aG9kKTtcclxuICAgICAgICB0aGlzLl9lbWFpbCA9IF9lbWFpbDtcclxuICAgICAgICB0aGlzLl9wYXNzd29yZCA9IF9wYXNzd29yZDtcclxuICAgICAgICB0aGlzLl90ZW5hbnRJZCA9IF90ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbWFpbEF1dGhDcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCwgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVtYWlsQW5kQ29kZShlbWFpbCwgb29iQ29kZSwgdGVuYW50SWQgPSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbWFpbEF1dGhDcmVkZW50aWFsKGVtYWlsLCBvb2JDb2RlLCBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi8sIHRlbmFudElkKTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkLFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGhpcy5fdGVuYW50SWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEVpdGhlciBgb2JqZWN0YCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC4gV2hlbiBzdHJpbmcgaXNcclxuICAgICAqIHByb3ZpZGVkLCBgSlNPTi5wYXJzZWAgd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGlmICgob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLmVtYWlsKSAmJiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLnBhc3N3b3JkKSkge1xyXG4gICAgICAgICAgICBpZiAob2JqLnNpZ25Jbk1ldGhvZCA9PT0gXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUVtYWlsQW5kUGFzc3dvcmQob2JqLmVtYWlsLCBvYmoucGFzc3dvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZENvZGUob2JqLmVtYWlsLCBvYmoucGFzc3dvcmQsIG9iai50ZW5hbnRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBhc3luYyBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbExpbmskMShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9vYkNvZGU6IHRoaXMuX3Bhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9vYkNvZGU6IHRoaXMuX3Bhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldElkVG9rZW5SZXNwb25zZShhdXRoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aElkcFwiIC8qIFNJR05fSU5fV0lUSF9JRFAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJJDEgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBPQXV0aCBjcmVkZW50aWFscyByZXR1cm5lZCBieSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcGxlbWVudGF0aW9ucyBzcGVjaWZ5IHRoZSBkZXRhaWxzIGFib3V0IGVhY2ggYXV0aCBwcm92aWRlcidzIGNyZWRlbnRpYWwgcmVxdWlyZW1lbnRzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBPQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Rva2VuID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVBhcmFtcyhwYXJhbXMpIHtcclxuICAgICAgICBjb25zdCBjcmVkID0gbmV3IE9BdXRoQ3JlZGVudGlhbChwYXJhbXMucHJvdmlkZXJJZCwgcGFyYW1zLnNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAyIGFuZCBlaXRoZXIgSUQgdG9rZW4gb3IgYWNjZXNzIHRva2VuLlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuaWRUb2tlbiA9IHBhcmFtcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuYWNjZXNzVG9rZW4gPSBwYXJhbXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIG5vbmNlIGlmIGF2YWlsYWJsZSBhbmQgbm8gcGVuZGluZ1Rva2VuIGlzIHByZXNlbnQuXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMubm9uY2UgJiYgIXBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQubm9uY2UgPSBwYXJhbXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQucGVuZGluZ1Rva2VuID0gcGFyYW1zLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwYXJhbXMub2F1dGhUb2tlbiAmJiBwYXJhbXMub2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAxIGFuZCBPQXV0aCB0b2tlbiB3aXRoIHRva2VuIHNlY3JldFxyXG4gICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLm9hdXRoVG9rZW47XHJcbiAgICAgICAgICAgIGNyZWQuc2VjcmV0ID0gcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlZDtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZFRva2VuOiB0aGlzLmlkVG9rZW4sXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICBzZWNyZXQ6IHRoaXMuc2VjcmV0LFxyXG4gICAgICAgICAgICBub25jZTogdGhpcy5ub25jZSxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW5cclxuICAgICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gSW5wdXQgY2FuIGJlIGVpdGhlciBPYmplY3Qgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuXHJcbiAgICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kIH0gPSBvYmosIHJlc3QgPSBfX3Jlc3Qob2JqLCBbXCJwcm92aWRlcklkXCIsIFwic2lnbkluTWV0aG9kXCJdKTtcclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQgfHwgIXNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kKTtcclxuICAgICAgICBjcmVkLmlkVG9rZW4gPSByZXN0LmlkVG9rZW4gfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGNyZWQuYWNjZXNzVG9rZW4gPSByZXN0LmFjY2Vzc1Rva2VuIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjcmVkLnNlY3JldCA9IHJlc3Quc2VjcmV0O1xyXG4gICAgICAgIGNyZWQubm9uY2UgPSByZXN0Lm5vbmNlO1xyXG4gICAgICAgIGNyZWQucGVuZGluZ1Rva2VuID0gcmVzdC5wZW5kaW5nVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICByZXR1cm4gY3JlZDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmF1dG9DcmVhdGUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIGJ1aWxkUmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkkkMSxcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LnBlbmRpbmdUb2tlbiA9IHRoaXMucGVuZGluZ1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgcG9zdEJvZHkgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ2lkX3Rva2VuJ10gPSB0aGlzLmlkVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydhY2Nlc3NfdG9rZW4nXSA9IHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VjcmV0KSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnb2F1dGhfdG9rZW5fc2VjcmV0J10gPSB0aGlzLnNlY3JldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwb3N0Qm9keVsncHJvdmlkZXJJZCddID0gdGhpcy5wcm92aWRlcklkO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub25jZSAmJiAhdGhpcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5Wydub25jZSddID0gdGhpcy5ub25jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXF1ZXN0LnBvc3RCb2R5ID0gcXVlcnlzdHJpbmcocG9zdEJvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2VuZFZlcmlmaWNhdGlvbkNvZGVcIiAvKiBTRU5EX1ZFUklGSUNBVElPTl9DT0RFICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQaG9uZU51bWJlciQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxuICAgIGlmIChyZXNwb25zZS50ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi8sIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZTtcclxufVxyXG5jb25zdCBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfID0ge1xyXG4gICAgW1wiVVNFUl9OT1RfRk9VTkRcIiAvKiBVU0VSX05PVF9GT1VORCAqL106IFwidXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi9cclxufTtcclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBjb25zdCBhcGlSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBvcGVyYXRpb246ICdSRUFVVEgnIH0pO1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGhvbmVOdW1iZXJcIiAvKiBTSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgYXBpUmVxdWVzdCksIFZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZUF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovLCBcInBob25lXCIgLyogUEhPTkUgKi8pO1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21Ub2tlblJlc3BvbnNlKHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbGlua1dpdGhQaG9uZU51bWJlciQxKGF1dGgsIE9iamVjdC5hc3NpZ24oeyBpZFRva2VuIH0sIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGVtcG9yYXJ5UHJvb2YsIHBob25lTnVtYmVyLCB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSB9ID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgaWYgKHRlbXBvcmFyeVByb29mICYmIHBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHRlbXBvcmFyeVByb29mLCBwaG9uZU51bWJlciB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXNzaW9uSW5mbzogdmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIGNvZGU6IHZlcmlmaWNhdGlvbkNvZGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWRcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5waG9uZU51bWJlcikge1xyXG4gICAgICAgICAgICBvYmoucGhvbmVOdW1iZXIgPSB0aGlzLnBhcmFtcy5waG9uZU51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIG9iai50ZW1wb3JhcnlQcm9vZiA9IHRoaXMucGFyYW1zLnRlbXBvcmFyeVByb29mO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgICAgICBvYmoudmVyaWZpY2F0aW9uQ29kZSA9IHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbkNvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25JZCkge1xyXG4gICAgICAgICAgICBvYmoudmVyaWZpY2F0aW9uSWQgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25JZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIC8qKiBHZW5lcmF0ZXMgYSBwaG9uZSBjcmVkZW50aWFsIGJhc2VkIG9uIGEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmcuICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoanNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUsIHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9ID0ganNvbjtcclxuICAgICAgICBpZiAoIXZlcmlmaWNhdGlvbkNvZGUgJiZcclxuICAgICAgICAgICAgIXZlcmlmaWNhdGlvbklkICYmXHJcbiAgICAgICAgICAgICFwaG9uZU51bWJlciAmJlxyXG4gICAgICAgICAgICAhdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVtcG9yYXJ5UHJvb2ZcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwcyB0aGUgbW9kZSBzdHJpbmcgaW4gYWN0aW9uIGNvZGUgVVJMIHRvIEFjdGlvbiBDb2RlIEluZm8gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gbW9kZVxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VNb2RlKG1vZGUpIHtcclxuICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICAgIGNhc2UgJ3JlY292ZXJFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlJFQ09WRVJfRU1BSUxcIiAvKiBSRUNPVkVSX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3Jlc2V0UGFzc3dvcmQnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJQQVNTV09SRF9SRVNFVFwiIC8qIFBBU1NXT1JEX1JFU0VUICovO1xyXG4gICAgICAgIGNhc2UgJ3NpZ25Jbic6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLztcclxuICAgICAgICBjYXNlICd2ZXJpZnlFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlZFUklGWV9FTUFJTFwiIC8qIFZFUklGWV9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICd2ZXJpZnlBbmRDaGFuZ2VFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAncmV2ZXJ0U2Vjb25kRmFjdG9yQWRkaXRpb24nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OICovO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gcGFyc2UgRkRMIGxpbmtzXHJcbiAqXHJcbiAqIEBwYXJhbSB1cmxcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlRGVlcExpbmsodXJsKSB7XHJcbiAgICBjb25zdCBsaW5rID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkpWydsaW5rJ107XHJcbiAgICAvLyBEb3VibGUgbGluayBjYXNlIChhdXRvbWF0aWMgcmVkaXJlY3QpLlxyXG4gICAgY29uc3QgZG91YmxlRGVlcExpbmsgPSBsaW5rXHJcbiAgICAgICAgPyBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcobGluaykpWydkZWVwX2xpbmtfaWQnXVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIC8vIGlPUyBjdXN0b20gc2NoZW1lIGxpbmtzLlxyXG4gICAgY29uc3QgaU9TRGVlcExpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbJ2RlZXBfbGlua19pZCddO1xyXG4gICAgY29uc3QgaU9TRG91YmxlRGVlcExpbmsgPSBpT1NEZWVwTGlua1xyXG4gICAgICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGlPU0RlZXBMaW5rKSlbJ2xpbmsnXVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIHJldHVybiBpT1NEb3VibGVEZWVwTGluayB8fCBpT1NEZWVwTGluayB8fCBkb3VibGVEZWVwTGluayB8fCBsaW5rIHx8IHVybDtcclxufVxyXG4vKipcclxuICogQSB1dGlsaXR5IGNsYXNzIHRvIHBhcnNlIGVtYWlsIGFjdGlvbiBVUkxzIHN1Y2ggYXMgcGFzc3dvcmQgcmVzZXQsIGVtYWlsIHZlcmlmaWNhdGlvbixcclxuICogZW1haWwgbGluayBzaWduIGluLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEFjdGlvbkNvZGVVUkwge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uTGluayAtIFRoZSBsaW5rIGZyb20gd2hpY2ggdG8gZXh0cmFjdCB0aGUgVVJMLlxyXG4gICAgICogQHJldHVybnMgVGhlIHtAbGluayBBY3Rpb25Db2RlVVJMfSBvYmplY3QsIG9yIG51bGwgaWYgdGhlIGxpbmsgaXMgaW52YWxpZC5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9uTGluaykge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhhY3Rpb25MaW5rKSk7XHJcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gKF9hID0gc2VhcmNoUGFyYW1zW1wiYXBpS2V5XCIgLyogQVBJX0tFWSAqL10pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGw7XHJcbiAgICAgICAgY29uc3QgY29kZSA9IChfYiA9IHNlYXJjaFBhcmFtc1tcIm9vYkNvZGVcIiAvKiBDT0RFICovXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBwYXJzZU1vZGUoKF9jID0gc2VhcmNoUGFyYW1zW1wibW9kZVwiIC8qIE1PREUgKi9dKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBudWxsKTtcclxuICAgICAgICAvLyBWYWxpZGF0ZSBBUEkga2V5LCBjb2RlIGFuZCBtb2RlLlxyXG4gICAgICAgIF9hc3NlcnQoYXBpS2V5ICYmIGNvZGUgJiYgb3BlcmF0aW9uLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jb250aW51ZVVybCA9IChfZCA9IHNlYXJjaFBhcmFtc1tcImNvbnRpbnVlVXJsXCIgLyogQ09OVElOVUVfVVJMICovXSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogbnVsbDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IChfZSA9IHNlYXJjaFBhcmFtc1tcImxhbmd1YWdlQ29kZVwiIC8qIExBTkdVQUdFX0NPREUgKi9dKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSAoX2YgPSBzZWFyY2hQYXJhbXNbXCJ0ZW5hbnRJZFwiIC8qIFRFTkFOVF9JRCAqL10pICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyB0aGUgZW1haWwgYWN0aW9uIGxpbmsgc3RyaW5nIGFuZCByZXR1cm5zIGFuIHtAbGluayBBY3Rpb25Db2RlVVJMfSBpZiB0aGUgbGluayBpcyB2YWxpZCxcclxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxpbmsgIC0gVGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZy5cclxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcGFyc2VMaW5rKGxpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25MaW5rID0gcGFyc2VEZWVwTGluayhsaW5rKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFjdGlvbkNvZGVVUkwoYWN0aW9uTGluayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFBhcnNlcyB0aGUgZW1haWwgYWN0aW9uIGxpbmsgc3RyaW5nIGFuZCByZXR1cm5zIGFuIHtAbGluayBBY3Rpb25Db2RlVVJMfSBpZlxyXG4gKiB0aGUgbGluayBpcyB2YWxpZCwgb3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VBY3Rpb25Db2RlVVJMKGxpbmspIHtcclxuICAgIHJldHVybiBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhsaW5rKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcge0BsaW5rIEVtYWlsQXV0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBFbWFpbEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRCwgZXZlbiBmb3IgZW1haWwgbGluay5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBFbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHVzaW5nIGFuIGVtYWlsIGFuZCBwYXNzd29yZC5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZW1haWwgLSBFbWFpbCBhZGRyZXNzLlxyXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIC0gVXNlciBhY2NvdW50IHBhc3N3b3JkLlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgYW4gZW1haWwgbGluayBhZnRlciBhIHNpZ24gaW4gd2l0aFxyXG4gICAgICogZW1haWwgbGluayBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsIGVtYWlsKTtcclxuICAgICAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHVzZWQgdG8gdmVyaWZ5IHRoZSBsaW5rLlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBlbWFpbExpbmsgLSBTaWduLWluIGVtYWlsIGxpbmsuXHJcbiAgICAgKiBAcmV0dXJucyAtIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsV2l0aExpbmsoZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbkNvZGVVcmwgPSBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhlbWFpbExpbmspO1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVVybCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gRW1haWxBdXRoQ3JlZGVudGlhbC5fZnJvbUVtYWlsQW5kQ29kZShlbWFpbCwgYWN0aW9uQ29kZVVybC5jb2RlLCBhY3Rpb25Db2RlVXJsLnRlbmFudElkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5FTUFJTF9QQVNTV09SRF9TSUdOX0lOX01FVEhPRCA9IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QgPSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIEZlZGVyYXRlZCBwcm92aWRlcnMgKE9BdXRoIChpbmNsdWRpbmcgT0lEQyksIFNBTUwpLlxyXG4gKlxyXG4gKiBUaGlzIGNsYXNzIGlzIG5vdCBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIGZvciBnZW5lcmljIE9BdXRoIHByb3ZpZGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFByb3ZpZGVyIGZvciB3aGljaCBjcmVkZW50aWFscyBzaG91bGQgYmUgZ2VuZXJhdGVkLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICAvKiogQGludGVybmFsICovXHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlID0gbnVsbDtcclxuICAgICAgICAvKiogQGludGVybmFsICovXHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbGFuZ3VhZ2UgZ29kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VDb2RlIC0gbGFuZ3VhZ2UgY29kZVxyXG4gICAgICovXHJcbiAgICBzZXREZWZhdWx0TGFuZ3VhZ2UobGFuZ3VhZ2VDb2RlKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VDb2RlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBPQXV0aCBjdXN0b20gcGFyYW1ldGVycyB0byBwYXNzIGluIGFuIE9BdXRoIHJlcXVlc3QgZm9yIHBvcHVwIGFuZCByZWRpcmVjdCBzaWduLWluXHJcbiAgICAgKiBvcGVyYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgYSBkZXRhaWxlZCBsaXN0LCBjaGVjayB0aGUgcmVzZXJ2ZWQgcmVxdWlyZWQgT0F1dGggMi4wIHBhcmFtZXRlcnMgc3VjaCBhcyBgY2xpZW50X2lkYCxcclxuICAgICAqIGByZWRpcmVjdF91cmlgLCBgc2NvcGVgLCBgcmVzcG9uc2VfdHlwZWAsIGFuZCBgc3RhdGVgIGFyZSBub3QgYWxsb3dlZCBhbmQgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdXN0b21PQXV0aFBhcmFtZXRlcnMgLSBUaGUgY3VzdG9tIE9BdXRoIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiB0aGUgT0F1dGggcmVxdWVzdC5cclxuICAgICAqL1xyXG4gICAgc2V0Q3VzdG9tUGFyYW1ldGVycyhjdXN0b21PQXV0aFBhcmFtZXRlcnMpIHtcclxuICAgICAgICB0aGlzLmN1c3RvbVBhcmFtZXRlcnMgPSBjdXN0b21PQXV0aFBhcmFtZXRlcnM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2Yge0BsaW5rIEN1c3RvbVBhcmFtZXRlcnN9LlxyXG4gICAgICovXHJcbiAgICBnZXRDdXN0b21QYXJhbWV0ZXJzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVBhcmFtZXRlcnM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbW1vbiBjb2RlIHRvIGFsbCBPQXV0aCBwcm92aWRlcnMuIFRoaXMgaXMgc2VwYXJhdGUgZnJvbSB0aGVcclxuICoge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHNvIHRoYXQgY2hpbGQgcHJvdmlkZXJzIChsaWtlXHJcbiAqIHtAbGluayBHb29nbGVBdXRoUHJvdmlkZXJ9KSBkb24ndCBpbmhlcml0IHRoZSBgY3JlZGVudGlhbGAgaW5zdGFuY2UgbWV0aG9kLlxyXG4gKiBJbnN0ZWFkLCB0aGV5IHJlbHkgb24gYSBzdGF0aWMgYGNyZWRlbnRpYWxgIG1ldGhvZC5cclxuICovXHJcbmNsYXNzIEJhc2VPQXV0aFByb3ZpZGVyIGV4dGVuZHMgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuc2NvcGVzID0gW107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhbiBPQXV0aCBzY29wZSB0byB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2NvcGUgLSBQcm92aWRlciBPQXV0aCBzY29wZSB0byBhZGQuXHJcbiAgICAgKi9cclxuICAgIGFkZFNjb3BlKHNjb3BlKSB7XHJcbiAgICAgICAgLy8gSWYgbm90IGFscmVhZHkgYWRkZWQsIGFkZCBzY29wZSB0byBsaXN0LlxyXG4gICAgICAgIGlmICghdGhpcy5zY29wZXMuaW5jbHVkZXMoc2NvcGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzLnB1c2goc2NvcGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGN1cnJlbnQgbGlzdCBvZiBPQXV0aCBzY29wZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFNjb3BlcygpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuc2NvcGVzXTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgZ2VuZXJpYyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2dvb2dsZS5jb20nKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2dvb2dsZS5jb20nKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgT0F1dGggQWNjZXNzIFRva2VuIGZvciB0aGUgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBPQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBKU09OIHN0cmluZyBvciBhIHBsYWluIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBqc29uIC0gQSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBfYXNzZXJ0KCdwcm92aWRlcklkJyBpbiBvYmogJiYgJ3NpZ25Jbk1ldGhvZCcgaW4gb2JqLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMob2JqKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBnZW5lcmljIE9BdXRoIHByb3ZpZGVyJ3MgYWNjZXNzIHRva2VuIG9yIElEIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGUgcmF3IG5vbmNlIGlzIHJlcXVpcmVkIHdoZW4gYW4gSUQgdG9rZW4gd2l0aCBhIG5vbmNlIGZpZWxkIGlzIHByb3ZpZGVkLiBUaGUgU0hBLTI1NiBoYXNoIG9mXHJcbiAgICAgKiB0aGUgcmF3IG5vbmNlIG11c3QgbWF0Y2ggdGhlIG5vbmNlIGZpZWxkIGluIHRoZSBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGdvb2dsZVVzZXJgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIC8vIEluaXRpYWxpemUgYSBnZW5lcmF0ZSBPQXV0aCBwcm92aWRlciB3aXRoIGEgYGdvb2dsZS5jb21gIHByb3ZpZGVySWQuXHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbCh7XHJcbiAgICAgKiAgIGlkVG9rZW46IGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4sXHJcbiAgICAgKiB9KTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtcyAtIEVpdGhlciB0aGUgb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyB0aGUgSUQgdG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgcmF3IG5vbmNlXHJcbiAgICAgKiBvciB0aGUgSUQgdG9rZW4gc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBjcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVkZW50aWFsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBub25jZTogcGFyYW1zLnJhd05vbmNlIH0pKTtcclxuICAgIH1cclxuICAgIC8qKiBBbiBpbnRlcm5hbCBjcmVkZW50aWFsIG1ldGhvZCB0aGF0IGFjY2VwdHMgbW9yZSBwZXJtaXNzaXZlIG9wdGlvbnMgKi9cclxuICAgIF9jcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIF9hc3NlcnQocGFyYW1zLmlkVG9rZW4gfHwgcGFyYW1zLmFjY2Vzc1Rva2VuLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIEZvciBPQXV0aENyZWRlbnRpYWwsIHNpZ24gaW4gbWV0aG9kIGlzIHNhbWUgYXMgcHJvdmlkZXJJZC5cclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZDogdGhpcy5wcm92aWRlcklkIH0pKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBPQXV0aFByb3ZpZGVyLm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aFByb3ZpZGVyLm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBvYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQsIHBlbmRpbmdUb2tlbiwgbm9uY2UsIHByb3ZpZGVySWQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuICYmXHJcbiAgICAgICAgICAgICFvYXV0aFRva2VuU2VjcmV0ICYmXHJcbiAgICAgICAgICAgICFvYXV0aElkVG9rZW4gJiZcclxuICAgICAgICAgICAgIXBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9BdXRoUHJvdmlkZXIocHJvdmlkZXJJZCkuX2NyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBub25jZSxcclxuICAgICAgICAgICAgICAgIHBlbmRpbmdUb2tlblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkZBQ0VCT09LLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRmFjZWJvb2tBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEZhY2Vib29rLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiAvLyBgZXZlbnRgIGZyb20gdGhlIEZhY2Vib29rIGF1dGguYXV0aFJlc3BvbnNlQ2hhbmdlIGNhbGxiYWNrLlxyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZXZlbnQuYXV0aFJlc3BvbnNlLmFjY2Vzc1Rva2VuKTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gRmFjZWJvb2sgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBGYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBGYWNlYm9va0F1dGhQcm92aWRlci5GQUNFQk9PS19TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlIHx8ICEoJ29hdXRoQWNjZXNzVG9rZW4nIGluIHRva2VuUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5GQUNFQk9PSy4gKi9cclxuRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QgPSBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uR09PR0xFLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHb29nbGVBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi8pO1xyXG4gICAgICAgIHRoaXMuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdvb2dsZS4gQXQgbGVhc3Qgb25lIG9mIElEIHRva2VuIGFuZCBhY2Nlc3MgdG9rZW4gaXMgcmVxdWlyZWQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIFxcYGdvb2dsZVVzZXJcXGAgZnJvbSB0aGUgb25zdWNjZXNzIEdvb2dsZSBTaWduIEluIGNhbGxiYWNrLlxyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlbiAtIEdvb2dsZSBJRCB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdvb2dsZSBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGlkVG9rZW4sIGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4gfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aElkVG9rZW4gJiYgIW9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBhbiBvYXV0aCAxIGNyZWRlbnRpYWwgb3IgYSBwaG9uZSBjcmVkZW50aWFsXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QgPSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uR0lUSFVCLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBHaXRIdWIgcmVxdWlyZXMgYW4gT0F1dGggMi4wIHJlZGlyZWN0LCBzbyB5b3UgY2FuIGVpdGhlciBoYW5kbGUgdGhlIHJlZGlyZWN0IGRpcmVjdGx5LCBvciB1c2VcclxuICogdGhlIHtAbGluayBzaWduSW5XaXRoUG9wdXB9IGhhbmRsZXI6XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR2l0aHViQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdyZXBvJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHaXRodWJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgR2l0aHViLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdpdGh1YiBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHaXRodWJBdXRoUHJvdmlkZXIuR0lUSFVCX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLkdJVEhVQl9TSUdOX0lOX01FVEhPRCA9IFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJRFBfUkVRVUVTVF9VUkkgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBTQU1MQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICBzdXBlcihwcm92aWRlcklkLCBwcm92aWRlcklkKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IHBlbmRpbmdUb2tlbjtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmF1dG9DcmVhdGUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhblxyXG4gICAgICoge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBJbnB1dCBjYW4gYmUgZWl0aGVyIE9iamVjdCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC5cclxuICAgICAqIFdoZW4gc3RyaW5nIGlzIHByb3ZpZGVkLCBKU09OLnBhcnNlIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgY29uc3QgeyBwcm92aWRlcklkLCBzaWduSW5NZXRob2QsIHBlbmRpbmdUb2tlbiB9ID0gb2JqO1xyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCB8fFxyXG4gICAgICAgICAgICAhc2lnbkluTWV0aG9kIHx8XHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4gfHxcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCAhPT0gc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFNBTUxBdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgc3RhdGljIG1ldGhvZCB0byBhdm9pZCBleHBvc2luZyB0aGUgY29uc3RydWN0b3IgdG8gZW5kIHVzZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNBTUxBdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgYnVpbGRSZXF1ZXN0KCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IElEUF9SRVFVRVNUX1VSSSxcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFNBTUxfUFJPVklERVJfUFJFRklYID0gJ3NhbWwuJztcclxuLyoqXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGZvciBTQU1MLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBTQU1MQXV0aFByb3ZpZGVyIGV4dGVuZHMgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IuIFRoZSBwcm92aWRlcklkIG11c3Qgc3RhcnQgd2l0aCBcInNhbWwuXCJcclxuICAgICAqIEBwYXJhbSBwcm92aWRlcklkIC0gU0FNTCBwcm92aWRlciBJRC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIF9hc3NlcnQocHJvdmlkZXJJZC5zdGFydHNXaXRoKFNBTUxfUFJPVklERVJfUFJFRklYKSwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBzdXBlcihwcm92aWRlcklkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0gYWZ0ZXIgYVxyXG4gICAgICogc3VjY2Vzc2Z1bCBTQU1MIGZsb3cgY29tcGxldGVzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogRm9yIGV4YW1wbGUsIHRvIGdldCBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9LCB5b3UgY291bGQgd3JpdGUgdGhlXHJcbiAgICAgKiBmb2xsb3dpbmcgY29kZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgc2FtbFByb3ZpZGVyKTtcclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFNBTUxBdXRoUHJvdmlkZXIuc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IFNBTUxBdXRoQ3JlZGVudGlhbC5mcm9tSlNPTihqc29uKTtcclxuICAgICAgICBfYXNzZXJ0KGNyZWRlbnRpYWwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwZW5kaW5nVG9rZW4sIHByb3ZpZGVySWQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFwZW5kaW5nVG9rZW4gfHwgIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogICBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBUd2l0dGVyIEFjY2VzcyBUb2tlbiBhbmQgU2VjcmV0LlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVHdpdHRlckF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIFR3aXR0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRva2VuIC0gVHdpdHRlciBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKiBAcGFyYW0gc2VjcmV0IC0gVHdpdHRlciBzZWNyZXQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKHRva2VuLCBzZWNyZXQpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBUd2l0dGVyQXV0aFByb3ZpZGVyLlRXSVRURVJfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIG9hdXRoVG9rZW46IHRva2VuLFxyXG4gICAgICAgICAgICBvYXV0aFRva2VuU2VjcmV0OiBzZWNyZXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0IH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiB8fCAhb2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5UV0lUVEVSLiAqL1xyXG5Ud2l0dGVyQXV0aFByb3ZpZGVyLlRXSVRURVJfU0lHTl9JTl9NRVRIT0QgPSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnblVwKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnblVwXCIgLyogU0lHTl9VUCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyQ3JlZGVudGlhbEltcGwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gcGFyYW1zLnVzZXI7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcGFyYW1zLnByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5SZXNwb25zZSA9IHBhcmFtcy5fdG9rZW5SZXNwb25zZTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBwYXJhbXMub3BlcmF0aW9uVHlwZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBvcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlckltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyk7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJJZCA9IHByb3ZpZGVySWRGb3JSZXNwb25zZShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJDcmVkID0gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIF90b2tlblJlc3BvbnNlOiBpZFRva2VuUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdXNlckNyZWQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zvck9wZXJhdGlvbih1c2VyLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSkge1xyXG4gICAgICAgIGF3YWl0IHVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlLCAvKiByZWxvYWQgKi8gdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJJZCA9IHByb3ZpZGVySWRGb3JSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogcmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgIGlmIChyZXNwb25zZS5wcm92aWRlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb3ZpZGVySWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoJ3Bob25lTnVtYmVyJyBpbiByZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBcInBob25lXCIgLyogUEhPTkUgKi87XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gYXMgYW4gYW5vbnltb3VzIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZXJlIGlzIGFscmVhZHkgYW4gYW5vbnltb3VzIHVzZXIgc2lnbmVkIGluLCB0aGF0IHVzZXIgd2lsbCBiZSByZXR1cm5lZDsgb3RoZXJ3aXNlLCBhXHJcbiAqIG5ldyBhbm9ueW1vdXMgdXNlciBpZGVudGl0eSB3aWxsIGJlIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbkFub255bW91c2x5KGF1dGgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgaWYgKChfYSA9IGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzQW5vbnltb3VzKSB7XHJcbiAgICAgICAgLy8gSWYgYW4gYW5vbnltb3VzIHVzZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4sIG5vIG5lZWQgdG8gc2lnbiB0aGVtIGluIGFnYWluLlxyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcjogYXV0aEludGVybmFsLmN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBudWxsLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlOiBcInNpZ25JblwiIC8qIFNJR05fSU4gKi9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnblVwKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSwgdHJ1ZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9yRXJyb3IgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHN1cGVyKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9IG9wZXJhdGlvblR5cGU7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBNdWx0aUZhY3RvckVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0ge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiAoX2EgPSBhdXRoLnRlbmFudElkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIF9zZXJ2ZXJSZXNwb25zZTogZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGUsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbUVycm9yQW5kT3BlcmF0aW9uKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvckVycm9yKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCwgdXNlcikge1xyXG4gICAgY29uc3QgaWRUb2tlblByb3ZpZGVyID0gb3BlcmF0aW9uVHlwZSA9PT0gXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovXHJcbiAgICAgICAgPyBjcmVkZW50aWFsLl9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aClcclxuICAgICAgICA6IGNyZWRlbnRpYWwuX2dldElkVG9rZW5SZXNwb25zZShhdXRoKTtcclxuICAgIHJldHVybiBpZFRva2VuUHJvdmlkZXIuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBgYXV0aC8ke1wibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBNRkFfUkVRVUlSRUQgKi99YCkge1xyXG4gICAgICAgICAgICB0aHJvdyBNdWx0aUZhY3RvckVycm9yLl9mcm9tRXJyb3JBbmRPcGVyYXRpb24oYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUYWtlcyBhIHNldCBvZiBVc2VySW5mbyBwcm92aWRlciBkYXRhIGFuZCBjb252ZXJ0cyBpdCB0byBhIHNldCBvZiBuYW1lc1xyXG4gKi9cclxuZnVuY3Rpb24gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlckRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgU2V0KHByb3ZpZGVyRGF0YVxyXG4gICAgICAgIC5tYXAoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkKVxyXG4gICAgICAgIC5maWx0ZXIocGlkID0+ICEhcGlkKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVubGlua3MgYSBwcm92aWRlciBmcm9tIGEgdXNlciBhY2NvdW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFRoZSBwcm92aWRlciB0byB1bmxpbmsuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVubGluayh1c2VyLCBwcm92aWRlcklkKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKHRydWUsIHVzZXJJbnRlcm5hbCwgcHJvdmlkZXJJZCk7XHJcbiAgICBjb25zdCB7IHByb3ZpZGVyVXNlckluZm8gfSA9IGF3YWl0IGRlbGV0ZUxpbmtlZEFjY291bnRzKHVzZXJJbnRlcm5hbC5hdXRoLCB7XHJcbiAgICAgICAgaWRUb2tlbjogYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKSxcclxuICAgICAgICBkZWxldGVQcm92aWRlcjogW3Byb3ZpZGVySWRdXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHByb3ZpZGVyc0xlZnQgPSBwcm92aWRlckRhdGFBc05hbWVzKHByb3ZpZGVyVXNlckluZm8gfHwgW10pO1xyXG4gICAgdXNlckludGVybmFsLnByb3ZpZGVyRGF0YSA9IHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEuZmlsdGVyKHBkID0+IHByb3ZpZGVyc0xlZnQuaGFzKHBkLnByb3ZpZGVySWQpKTtcclxuICAgIGlmICghcHJvdmlkZXJzTGVmdC5oYXMoXCJwaG9uZVwiIC8qIFBIT05FICovKSkge1xyXG4gICAgICAgIHVzZXJJbnRlcm5hbC5waG9uZU51bWJlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxuICAgIHJldHVybiB1c2VySW50ZXJuYWw7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2xpbmskMSh1c2VyLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBjcmVkZW50aWFsLl9saW5rVG9JZFRva2VuKHVzZXIuYXV0aCwgYXdhaXQgdXNlci5nZXRJZFRva2VuKCkpLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIFwibGlua1wiIC8qIExJTksgKi8sIHJlc3BvbnNlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfYXNzZXJ0TGlua2VkU3RhdHVzKGV4cGVjdGVkLCB1c2VyLCBwcm92aWRlcikge1xyXG4gICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcik7XHJcbiAgICBjb25zdCBwcm92aWRlcklkcyA9IHByb3ZpZGVyRGF0YUFzTmFtZXModXNlci5wcm92aWRlckRhdGEpO1xyXG4gICAgY29uc3QgY29kZSA9IGV4cGVjdGVkID09PSBmYWxzZVxyXG4gICAgICAgID8gXCJwcm92aWRlci1hbHJlYWR5LWxpbmtlZFwiIC8qIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEICovXHJcbiAgICAgICAgOiBcIm5vLXN1Y2gtcHJvdmlkZXJcIiAvKiBOT19TVUNIX1BST1ZJREVSICovO1xyXG4gICAgX2Fzc2VydChwcm92aWRlcklkcy5oYXMocHJvdmlkZXIpID09PSBleHBlY3RlZCwgdXNlci5hdXRoLCBjb2RlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGUodXNlciwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHsgYXV0aCB9ID0gdXNlcjtcclxuICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi87XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwsIHVzZXIpLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBwYXJzZWQgPSBfcGFyc2VUb2tlbihyZXNwb25zZS5pZFRva2VuKTtcclxuICAgICAgICBfYXNzZXJ0KHBhcnNlZCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCB7IHN1YjogbG9jYWxJZCB9ID0gcGFyc2VkO1xyXG4gICAgICAgIF9hc3NlcnQodXNlci51aWQgPT09IGxvY2FsSWQsIGF1dGgsIFwidXNlci1taXNtYXRjaFwiIC8qIFVTRVJfTUlTTUFUQ0ggKi8pO1xyXG4gICAgICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbih1c2VyLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdXNlciBkZWxldGVkIGVycm9yIGludG8gdXNlciBtaXNtYXRjaFxyXG4gICAgICAgIGlmICgoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNvZGUpID09PSBgYXV0aC8ke1widXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi99YCkge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBcInNpZ25JblwiIC8qIFNJR05fSU4gKi87XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsKTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKTtcclxuICAgIGlmICghYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgYXdhaXQgYXV0aC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIFRoZSBhdXRoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWwpIHtcclxuICAgIHJldHVybiBfc2lnbkluV2l0aENyZWRlbnRpYWwoX2Nhc3RBdXRoKGF1dGgpLCBjcmVkZW50aWFsKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHVzZXIgYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhDcmVkZW50aWFsKHVzZXIsIGNyZWRlbnRpYWwpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgY3JlZGVudGlhbC5wcm92aWRlcklkKTtcclxuICAgIHJldHVybiBfbGluayQxKHVzZXJJbnRlcm5hbCwgY3JlZGVudGlhbCk7XHJcbn1cclxuLyoqXHJcbiAqIFJlLWF1dGhlbnRpY2F0ZXMgYSB1c2VyIHVzaW5nIGEgZnJlc2ggY3JlZGVudGlhbC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVXNlIGJlZm9yZSBvcGVyYXRpb25zIHN1Y2ggYXMge0BsaW5rIHVwZGF0ZVBhc3N3b3JkfSB0aGF0IHJlcXVpcmUgdG9rZW5zIGZyb20gcmVjZW50IHNpZ24taW5cclxuICogYXR0ZW1wdHMuIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIHJlY292ZXIgZnJvbSBhIGBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU5gIGVycm9yLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIFRoZSBhdXRoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZShnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbiQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aEN1c3RvbVRva2VuXCIgLyogU0lHTl9JTl9XSVRIX0NVU1RPTV9UT0tFTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBjdXN0b20gdG9rZW4uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEN1c3RvbSB0b2tlbnMgYXJlIHVzZWQgdG8gaW50ZWdyYXRlIEZpcmViYXNlIEF1dGggd2l0aCBleGlzdGluZyBhdXRoIHN5c3RlbXMsIGFuZCBtdXN0XHJcbiAqIGJlIGdlbmVyYXRlZCBieSBhbiBhdXRoIGJhY2tlbmQgdXNpbmcgdGhlXHJcbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9yZWZlcmVuY2UvYWRtaW4vbm9kZS9hZG1pbi5hdXRoLkF1dGgjY3JlYXRlY3VzdG9tdG9rZW4gfCBjcmVhdGVDdXN0b21Ub2tlbn1cclxuICogbWV0aG9kIGluIHRoZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYXV0aC9hZG1pbiB8IEFkbWluIFNES30gLlxyXG4gKlxyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSB0b2tlbiBpcyBpbnZhbGlkLCBleHBpcmVkLCBvciBub3QgYWNjZXB0ZWQgYnkgdGhlIEZpcmViYXNlIEF1dGggc2VydmljZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY3VzdG9tVG9rZW4gLSBUaGUgY3VzdG9tIHRva2VuIHRvIHNpZ24gaW4gd2l0aC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEN1c3RvbVRva2VuKGF1dGgsIGN1c3RvbVRva2VuKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25JbldpdGhDdXN0b21Ub2tlbiQxKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHRva2VuOiBjdXN0b21Ub2tlbixcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVkID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKGNyZWQudXNlcik7XHJcbiAgICByZXR1cm4gY3JlZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvckluZm9JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkLCByZXNwb25zZSkge1xyXG4gICAgICAgIHRoaXMuZmFjdG9ySWQgPSBmYWN0b3JJZDtcclxuICAgICAgICB0aGlzLnVpZCA9IHJlc3BvbnNlLm1mYUVucm9sbG1lbnRJZDtcclxuICAgICAgICB0aGlzLmVucm9sbG1lbnRUaW1lID0gbmV3IERhdGUocmVzcG9uc2UuZW5yb2xsZWRBdCkudG9VVENTdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgaWYgKCdwaG9uZUluZm8nIGluIGVucm9sbG1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBob25lTXVsdGlGYWN0b3JJbmZvLl9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JJbmZvIGV4dGVuZHMgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLywgcmVzcG9uc2UpO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZUluZm87XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShfYXV0aCwgZW5yb2xsbWVudCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckluZm8oZW5yb2xsbWVudCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIHZhciBfYTtcclxuICAgIF9hc3NlcnQoKChfYSA9IGFjdGlvbkNvZGVTZXR0aW5ncy51cmwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpID4gMCwgYXV0aCwgXCJpbnZhbGlkLWNvbnRpbnVlLXVyaVwiIC8qIElOVkFMSURfQ09OVElOVUVfVVJJICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbiA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW4ubGVuZ3RoID4gMCwgYXV0aCwgXCJpbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW5cIiAvKiBJTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU4gKi8pO1xyXG4gICAgcmVxdWVzdC5jb250aW51ZVVybCA9IGFjdGlvbkNvZGVTZXR0aW5ncy51cmw7XHJcbiAgICByZXF1ZXN0LmR5bmFtaWNMaW5rRG9tYWluID0gYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluO1xyXG4gICAgcmVxdWVzdC5jYW5IYW5kbGVDb2RlSW5BcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwO1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQubGVuZ3RoID4gMCwgYXV0aCwgXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIiAvKiBNSVNTSU5HX0lPU19CVU5ETEVfSUQgKi8pO1xyXG4gICAgICAgIHJlcXVlc3QuaU9TQnVuZGxlSWQgPSBhY3Rpb25Db2RlU2V0dGluZ3MuaU9TLmJ1bmRsZUlkO1xyXG4gICAgfVxyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkKSB7XHJcbiAgICAgICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5wYWNrYWdlTmFtZS5sZW5ndGggPiAwLCBhdXRoLCBcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi8pO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZEluc3RhbGxBcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5pbnN0YWxsQXBwO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSA9XHJcbiAgICAgICAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLm1pbmltdW1WZXJzaW9uO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZFBhY2thZ2VOYW1lID0gYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNlbmRzIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG8gdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGNvbXBsZXRlIHRoZSBwYXNzd29yZCByZXNldCwgY2FsbCB7QGxpbmsgY29uZmlybVBhc3N3b3JkUmVzZXR9IHdpdGggdGhlIGNvZGUgc3VwcGxpZWQgaW5cclxuICogdGhlIGVtYWlsIHNlbnQgdG8gdGhlIHVzZXIsIGFsb25nIHdpdGggdGhlIG5ldyBwYXNzd29yZCBzcGVjaWZpZWQgYnkgdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB1c2VyLlxyXG4gKiBhd2FpdCBjb25maXJtUGFzc3dvcmRSZXNldCgndXNlckBleGFtcGxlLmNvbScsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlBBU1NXT1JEX1JFU0VUXCIgLyogUEFTU1dPUkRfUkVTRVQgKi8sXHJcbiAgICAgICAgZW1haWxcclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoTW9kdWxhciwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoTW9kdWxhciwgcmVxdWVzdCk7XHJcbn1cclxuLyoqXHJcbiAqIENvbXBsZXRlcyB0aGUgcGFzc3dvcmQgcmVzZXQgcHJvY2VzcywgZ2l2ZW4gYSBjb25maXJtYXRpb24gY29kZSBhbmQgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSBjb25maXJtYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3UGFzc3dvcmQgLSBUaGUgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjb25maXJtUGFzc3dvcmRSZXNldChhdXRoLCBvb2JDb2RlLCBuZXdQYXNzd29yZCkge1xyXG4gICAgYXdhaXQgcmVzZXRQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHtcclxuICAgICAgICBvb2JDb2RlLFxyXG4gICAgICAgIG5ld1Bhc3N3b3JkXHJcbiAgICB9KTtcclxuICAgIC8vIERvIG5vdCByZXR1cm4gdGhlIGVtYWlsLlxyXG59XHJcbi8qKlxyXG4gKiBBcHBsaWVzIGEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZShhdXRoLCBvb2JDb2RlKSB7XHJcbiAgICBhd2FpdCBhcHBseUFjdGlvbkNvZGUkMShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHsgb29iQ29kZSB9KTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEByZXR1cm5zIG1ldGFkYXRhIGFib3V0IHRoZSBjb2RlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjaGVja0FjdGlvbkNvZGUoYXV0aCwgb29iQ29kZSkge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc2V0UGFzc3dvcmQoYXV0aE1vZHVsYXIsIHsgb29iQ29kZSB9KTtcclxuICAgIC8vIEVtYWlsIGNvdWxkIGJlIGVtcHR5IG9ubHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpcyBFTUFJTF9TSUdOSU4gb3JcclxuICAgIC8vIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLlxyXG4gICAgLy8gTmV3IGVtYWlsIHNob3VsZCBub3QgYmUgZW1wdHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpc1xyXG4gICAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXHJcbiAgICAvLyBNdWx0aS1mYWN0b3IgaW5mbyBjb3VsZCBub3QgYmUgZW1wdHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpc1xyXG4gICAgLy8gUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04uXHJcbiAgICBjb25zdCBvcGVyYXRpb24gPSByZXNwb25zZS5yZXF1ZXN0VHlwZTtcclxuICAgIF9hc3NlcnQob3BlcmF0aW9uLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgY2FzZSBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLzpcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi86XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UubmV3RW1haWwsIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT05cIiAvKiBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTiAqLzpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5tZmFJbmZvLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBmYWxsIHRocm91Z2hcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmVtYWlsLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIC8vIFRoZSBtdWx0aS1mYWN0b3IgaW5mbyBmb3IgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb25cclxuICAgIGxldCBtdWx0aUZhY3RvckluZm8gPSBudWxsO1xyXG4gICAgaWYgKHJlc3BvbnNlLm1mYUluZm8pIHtcclxuICAgICAgICBtdWx0aUZhY3RvckluZm8gPSBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoX2Nhc3RBdXRoKGF1dGhNb2R1bGFyKSwgcmVzcG9uc2UubWZhSW5mbyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgZW1haWw6IChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovXHJcbiAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLm5ld0VtYWlsXHJcbiAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLmVtYWlsKSB8fCBudWxsLFxyXG4gICAgICAgICAgICBwcmV2aW91c0VtYWlsOiAocmVzcG9uc2UucmVxdWVzdFR5cGUgPT09IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqL1xyXG4gICAgICAgICAgICAgICAgPyByZXNwb25zZS5lbWFpbFxyXG4gICAgICAgICAgICAgICAgOiByZXNwb25zZS5uZXdFbWFpbCkgfHwgbnVsbCxcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JJbmZvXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcGVyYXRpb25cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBhIHBhc3N3b3JkIHJlc2V0IGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcyBpZiB2YWxpZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUoYXV0aCwgY29kZSkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBjaGVja0FjdGlvbkNvZGUoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCBjb2RlKTtcclxuICAgIC8vIEVtYWlsIHNob3VsZCBhbHdheXMgYmUgcHJlc2VudCBzaW5jZSBhIGNvZGUgd2FzIHNlbnQgdG8gaXRcclxuICAgIHJldHVybiBkYXRhLmVtYWlsO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IHVzZXIgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogT24gc3VjY2Vzc2Z1bCBjcmVhdGlvbiBvZiB0aGUgdXNlciBhY2NvdW50LCB0aGlzIHVzZXIgd2lsbCBhbHNvIGJlIHNpZ25lZCBpbiB0byB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBVc2VyIGFjY291bnQgY3JlYXRpb24gY2FuIGZhaWwgaWYgdGhlIGFjY291bnQgYWxyZWFkeSBleGlzdHMgb3IgdGhlIHBhc3N3b3JkIGlzIGludmFsaWQuXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSBlbWFpbCBhZGRyZXNzIGFjdHMgYXMgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgYW5kIGVuYWJsZXMgYW4gZW1haWwtYmFzZWRcclxuICogcGFzc3dvcmQgcmVzZXQuIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdXNlciBhY2NvdW50IGFuZCBzZXQgdGhlIGluaXRpYWwgdXNlciBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBwYXNzd29yZCAtIFRoZSB1c2VyJ3MgY2hvc2VuIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcChhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBwYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZCBkbyBub3QgbWF0Y2guXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSB1c2VyJ3MgcGFzc3dvcmQgaXMgTk9UIHRoZSBwYXNzd29yZCB1c2VkIHRvIGFjY2VzcyB0aGUgdXNlcidzIGVtYWlsIGFjY291bnQuIFRoZVxyXG4gKiBlbWFpbCBhZGRyZXNzIHNlcnZlcyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciwgYW5kIHRoZSBwYXNzd29yZCBpcyB1c2VkIHRvIGFjY2Vzc1xyXG4gKiB0aGUgdXNlcidzIGFjY291bnQgaW4geW91ciBGaXJlYmFzZSBwcm9qZWN0LiBTZWUgYWxzbzoge0BsaW5rIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXJzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBwYXNzd29yZCAtIFRoZSB1c2VycyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gc2lnbkluV2l0aENyZWRlbnRpYWwoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZW5kcyBhIHNpZ24taW4gZW1haWwgbGluayB0byB0aGUgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQgZW1haWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSBzaWduLWluIG9wZXJhdGlvbiBoYXMgdG8gYWx3YXlzIGJlIGNvbXBsZXRlZCBpbiB0aGUgYXBwIHVubGlrZSBvdGhlciBvdXQgb2YgYmFuZCBlbWFpbFxyXG4gKiBhY3Rpb25zIChwYXNzd29yZCByZXNldCBhbmQgZW1haWwgdmVyaWZpY2F0aW9ucykuIFRoaXMgaXMgYmVjYXVzZSwgYXQgdGhlIGVuZCBvZiB0aGUgZmxvdyxcclxuICogdGhlIHVzZXIgaXMgZXhwZWN0ZWQgdG8gYmUgc2lnbmVkIGluIGFuZCB0aGVpciBBdXRoIHN0YXRlIHBlcnNpc3RlZCB3aXRoaW4gdGhlIGFwcC5cclxuICpcclxuICogVG8gY29tcGxldGUgc2lnbiBpbiB3aXRoIHRoZSBlbWFpbCBsaW5rLCBjYWxsIHtAbGluayBzaWduSW5XaXRoRW1haWxMaW5rfSB3aXRoIHRoZSBlbWFpbFxyXG4gKiBhZGRyZXNzIGFuZCB0aGUgZW1haWwgbGluayBzdXBwbGllZCBpbiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB0aGUgdXNlci5cclxuICogaWYoaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykpIHtcclxuICogICBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKCd1c2VyQGV4YW1wbGUuY29tJywgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aEludGVybmFsIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLyxcclxuICAgICAgICBlbWFpbFxyXG4gICAgfTtcclxuICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmhhbmRsZUNvZGVJbkFwcCwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoTW9kdWxhciwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbCQxKGF1dGhNb2R1bGFyLCByZXF1ZXN0KTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGlmIGFuIGluY29taW5nIGxpbmsgaXMgYSBzaWduLWluIHdpdGggZW1haWwgbGluayBzdWl0YWJsZSBmb3Ige0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbExpbmsgLSBUaGUgbGluayBzZW50IHRvIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYWN0aW9uQ29kZVVybCA9IEFjdGlvbkNvZGVVUkwucGFyc2VMaW5rKGVtYWlsTGluayk7XHJcbiAgICByZXR1cm4gKGFjdGlvbkNvZGVVcmwgPT09IG51bGwgfHwgYWN0aW9uQ29kZVVybCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWN0aW9uQ29kZVVybC5vcGVyYXRpb24pID09PSBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLztcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHNpZ24taW4gZW1haWwgbGluay5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgbm8gbGluayBpcyBwYXNzZWQsIHRoZSBsaW5rIGlzIGluZmVycmVkIGZyb20gdGhlIGN1cnJlbnQgVVJMLlxyXG4gKlxyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQgb3IgT1RQIGluIGVtYWlsIGxpbmsgZXhwaXJlcy5cclxuICpcclxuICogTm90ZTogQ29uZmlybSB0aGUgbGluayBpcyBhIHNpZ24taW4gZW1haWwgbGluayBiZWZvcmUgY2FsbGluZyB0aGlzIG1ldGhvZCBmaXJlYmFzZS5hdXRoLkF1dGguaXNTaWduSW5XaXRoRW1haWxMaW5rLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHRoZSB1c2VyLlxyXG4gKiBpZihpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSkge1xyXG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoJ3VzZXJAZXhhbXBsZS5jb20nLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gZW1haWxMaW5rIC0gVGhlIGxpbmsgc2VudCB0byB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBjcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmsgfHwgX2dldEN1cnJlbnRVcmwoKSk7XHJcbiAgICAvLyBDaGVjayBpZiB0aGUgdGVuYW50IElEIGluIHRoZSBlbWFpbCBsaW5rIG1hdGNoZXMgdGhlIHRlbmFudCBJRCBvbiBBdXRoXHJcbiAgICAvLyBpbnN0YW5jZS5cclxuICAgIF9hc3NlcnQoY3JlZGVudGlhbC5fdGVuYW50SWQgPT09IChhdXRoTW9kdWxhci50ZW5hbnRJZCB8fCBudWxsKSwgYXV0aE1vZHVsYXIsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoTW9kdWxhciwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXV0aFVyaShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmNyZWF0ZUF1dGhVcmlcIiAvKiBDUkVBVEVfQVVUSF9VUkkgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEdldHMgdGhlIGxpc3Qgb2YgcG9zc2libGUgc2lnbiBpbiBtZXRob2RzIGZvciB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VmdWwgdG8gZGlmZmVyZW50aWF0ZSBtZXRob2RzIG9mIHNpZ24taW4gZm9yIHRoZSBzYW1lIHByb3ZpZGVyLCBlZy5cclxuICoge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aGljaCBoYXMgMiBtZXRob2RzIG9mIHNpZ24taW4sXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JEIGFuZFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoYXV0aCwgZW1haWwpIHtcclxuICAgIC8vIGNyZWF0ZUF1dGhVcmkgcmV0dXJucyBhbiBlcnJvciBpZiBjb250aW51ZSBVUkkgaXMgbm90IGh0dHAgb3IgaHR0cHMuXHJcbiAgICAvLyBGb3IgZW52aXJvbm1lbnRzIGxpa2UgQ29yZG92YSwgQ2hyb21lIGV4dGVuc2lvbnMsIG5hdGl2ZSBmcmFtZXdvcmtzLCBmaWxlXHJcbiAgICAvLyBzeXN0ZW1zLCBldGMsIHVzZSBodHRwOi8vbG9jYWxob3N0IGFzIGNvbnRpbnVlIFVSTC5cclxuICAgIGNvbnN0IGNvbnRpbnVlVXJpID0gX2lzSHR0cE9ySHR0cHMoKSA/IF9nZXRDdXJyZW50VXJsKCkgOiAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkZW50aWZpZXI6IGVtYWlsLFxyXG4gICAgICAgIGNvbnRpbnVlVXJpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgeyBzaWduaW5NZXRob2RzIH0gPSBhd2FpdCBjcmVhdGVBdXRoVXJpKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgcmVxdWVzdCk7XHJcbiAgICByZXR1cm4gc2lnbmluTWV0aG9kcyB8fCBbXTtcclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgdmVyaWZpY2F0aW9uIHByb2Nlc3MgaXMgY29tcGxldGVkIGJ5IGNhbGxpbmcge0BsaW5rIGFwcGx5QWN0aW9uQ29kZX0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kRW1haWxWZXJpZmljYXRpb24odXNlciwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJWRVJJRllfRU1BSUxcIiAvKiBWRVJJRllfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlblxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHVzZXIncyBlbWFpbCB3aWxsIGJlIHVwZGF0ZWQgdG8gdGhlIG5ldyBvbmUgYWZ0ZXIgYmVpbmcgdmVyaWZpZWQuXHJcbiAqXHJcbiAqIElmIHlvdSBoYXZlIGEgY3VzdG9tIGVtYWlsIGFjdGlvbiBoYW5kbGVyLCB5b3UgY2FuIGNvbXBsZXRlIHRoZSB2ZXJpZmljYXRpb24gcHJvY2VzcyBieSBjYWxsaW5nXHJcbiAqIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodXNlciwgJ25ld2VtYWlsQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzIHRvIGJlIHZlcmlmaWVkIGJlZm9yZSB1cGRhdGUuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqLyxcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIG5ld0VtYWlsXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBhd2FpdCB2ZXJpZnlBbmRDaGFuZ2VFbWFpbCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCk7XHJcbiAgICBpZiAoZW1haWwgIT09IHVzZXIuZW1haWwpIHtcclxuICAgICAgICAvLyBJZiB0aGUgbG9jYWwgY29weSBvZiB0aGUgZW1haWwgb24gdXNlciBpcyBvdXRkYXRlZCwgcmVsb2FkIHRoZVxyXG4gICAgICAgIC8vIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBkYXRlcyBhIHVzZXIncyBwcm9maWxlIGRhdGEuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm9maWxlIC0gVGhlIHByb2ZpbGUncyBgZGlzcGxheU5hbWVgIGFuZCBgcGhvdG9VUkxgIHRvIHVwZGF0ZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSh1c2VyLCB7IGRpc3BsYXlOYW1lLCBwaG90b1VSTDogcGhvdG9VcmwgfSkge1xyXG4gICAgaWYgKGRpc3BsYXlOYW1lID09PSB1bmRlZmluZWQgJiYgcGhvdG9VcmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcHJvZmlsZVJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICBwaG90b1VybCxcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlckludGVybmFsLCB1cGRhdGVQcm9maWxlJDEodXNlckludGVybmFsLmF1dGgsIHByb2ZpbGVSZXF1ZXN0KSk7XHJcbiAgICB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZSB8fCBudWxsO1xyXG4gICAgdXNlckludGVybmFsLnBob3RvVVJMID0gcmVzcG9uc2UucGhvdG9VcmwgfHwgbnVsbDtcclxuICAgIC8vIFVwZGF0ZSB0aGUgcGFzc3dvcmQgcHJvdmlkZXIgYXMgd2VsbFxyXG4gICAgY29uc3QgcGFzc3dvcmRQcm92aWRlciA9IHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEuZmluZCgoeyBwcm92aWRlcklkIH0pID0+IHByb3ZpZGVySWQgPT09IFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLyk7XHJcbiAgICBpZiAocGFzc3dvcmRQcm92aWRlcikge1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIuZGlzcGxheU5hbWUgPSB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgcGFzc3dvcmRQcm92aWRlci5waG90b1VSTCA9IHVzZXJJbnRlcm5hbC5waG90b1VSTDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4gZW1haWwgd2lsbCBiZSBzZW50IHRvIHRoZSBvcmlnaW5hbCBlbWFpbCBhZGRyZXNzIChpZiBpdCB3YXMgc2V0KSB0aGF0IGFsbG93cyB0byByZXZva2UgdGhlXHJcbiAqIGVtYWlsIGFkZHJlc3MgY2hhbmdlLCBpbiBvcmRlciB0byBwcm90ZWN0IHRoZW0gZnJvbSBhY2NvdW50IGhpamFja2luZy5cclxuICpcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVFbWFpbCh1c2VyLCBuZXdFbWFpbCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG5ld0VtYWlsLCBudWxsKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcclxuICogaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3UGFzc3dvcmQgLSBUaGUgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVQYXNzd29yZCh1c2VyLCBuZXdQYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG51bGwsIG5ld1Bhc3N3b3JkKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQodXNlciwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgICByZXF1ZXN0LmVtYWlsID0gZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocGFzc3dvcmQpIHtcclxuICAgICAgICByZXF1ZXN0LnBhc3N3b3JkID0gcGFzc3dvcmQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkpO1xyXG4gICAgYXdhaXQgdXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIC8qIHJlbG9hZCAqLyB0cnVlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUGFyc2UgdGhlIGBBZGRpdGlvbmFsVXNlckluZm9gIGZyb20gdGhlIElEIHRva2VuIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gX2Zyb21JZFRva2VuUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgaWYgKCFpZFRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgcHJvdmlkZXJJZCB9ID0gaWRUb2tlblJlc3BvbnNlO1xyXG4gICAgY29uc3QgcHJvZmlsZSA9IGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mb1xyXG4gICAgICAgID8gSlNPTi5wYXJzZShpZFRva2VuUmVzcG9uc2UucmF3VXNlckluZm8pXHJcbiAgICAgICAgOiB7fTtcclxuICAgIGNvbnN0IGlzTmV3VXNlciA9IGlkVG9rZW5SZXNwb25zZS5pc05ld1VzZXIgfHxcclxuICAgICAgICBpZFRva2VuUmVzcG9uc2Uua2luZCA9PT0gXCJpZGVudGl0eXRvb2xraXQjU2lnbnVwTmV3VXNlclJlc3BvbnNlXCIgLyogU2lnbnVwTmV3VXNlciAqLztcclxuICAgIGlmICghcHJvdmlkZXJJZCAmJiAoaWRUb2tlblJlc3BvbnNlID09PSBudWxsIHx8IGlkVG9rZW5SZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRUb2tlblJlc3BvbnNlLmlkVG9rZW4pKSB7XHJcbiAgICAgICAgY29uc3Qgc2lnbkluUHJvdmlkZXIgPSAoX2IgPSAoX2EgPSBfcGFyc2VUb2tlbihpZFRva2VuUmVzcG9uc2UuaWRUb2tlbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maXJlYmFzZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iWydzaWduX2luX3Byb3ZpZGVyJ107XHJcbiAgICAgICAgaWYgKHNpZ25JblByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUHJvdmlkZXJJZCA9IHNpZ25JblByb3ZpZGVyICE9PSBcImFub255bW91c1wiIC8qIEFOT05ZTU9VUyAqLyAmJlxyXG4gICAgICAgICAgICAgICAgc2lnbkluUHJvdmlkZXIgIT09IFwiY3VzdG9tXCIgLyogQ1VTVE9NICovXHJcbiAgICAgICAgICAgICAgICA/IHNpZ25JblByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgIC8vIFVzZXMgZ2VuZXJpYyBjbGFzcyBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIGxlZ2FjeSBTREsuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIGZpbHRlcmVkUHJvdmlkZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBjYXNlIFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlLCBpZFRva2VuUmVzcG9uc2Uuc2NyZWVuTmFtZSB8fCBudWxsKTtcclxuICAgICAgICBjYXNlIFwiY3VzdG9tXCIgLyogQ1VTVE9NICovOlxyXG4gICAgICAgIGNhc2UgXCJhbm9ueW1vdXNcIiAvKiBBTk9OWU1PVVMgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIG51bGwpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlID0ge30pIHtcclxuICAgICAgICB0aGlzLmlzTmV3VXNlciA9IGlzTmV3VXNlcjtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUsIHVzZXJuYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcclxuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLywgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovLCBwcm9maWxlLCB0eXBlb2YgKHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbikgPT09ICdzdHJpbmcnID8gcHJvZmlsZSA9PT0gbnVsbCB8fCBwcm9maWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9maWxlLmxvZ2luIDogbnVsbCk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLywgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUsIHNjcmVlbk5hbWUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovLCBwcm9maWxlLCBzY3JlZW5OYW1lKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdHMgcHJvdmlkZXIgc3BlY2lmaWMge0BsaW5rIEFkZGl0aW9uYWxVc2VySW5mb30gZm9yIHRoZSBnaXZlbiBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBZGRpdGlvbmFsVXNlckluZm8odXNlckNyZWRlbnRpYWwpIHtcclxuICAgIGNvbnN0IHsgdXNlciwgX3Rva2VuUmVzcG9uc2UgfSA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgaWYgKHVzZXIuaXNBbm9ueW1vdXMgJiYgIV90b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gSGFuZGxlIHRoZSBzcGVjaWFsIGNhc2Ugd2hlcmUgc2lnbkluQW5vbnltb3VzbHkoKSBnZXRzIGNhbGxlZCB0d2ljZS5cclxuICAgICAgICAvLyBObyBuZXR3b3JrIGNhbGwgaXMgbWFkZSBzbyB0aGVyZSdzIG5vdGhpbmcgdG8gYWN0dWFsbHkgZmlsbCB0aGlzIGluXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgaXNOZXdVc2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgcHJvZmlsZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2Zyb21JZFRva2VuUmVzcG9uc2UoX3Rva2VuUmVzcG9uc2UpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIE5vbi1vcHRpb25hbCBhdXRoIG1ldGhvZHMuXHJcbi8qKlxyXG4gKiBDaGFuZ2VzIHRoZSB0eXBlIG9mIHBlcnNpc3RlbmNlIG9uIHRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgZm9yIHRoZSBjdXJyZW50bHkgc2F2ZWRcclxuICogYEF1dGhgIHNlc3Npb24gYW5kIGFwcGxpZXMgdGhpcyB0eXBlIG9mIHBlcnNpc3RlbmNlIGZvciBmdXR1cmUgc2lnbi1pbiByZXF1ZXN0cywgaW5jbHVkaW5nXHJcbiAqIHNpZ24taW4gd2l0aCByZWRpcmVjdCByZXF1ZXN0cy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtYWtlcyBpdCBlYXN5IGZvciBhIHVzZXIgc2lnbmluZyBpbiB0byBzcGVjaWZ5IHdoZXRoZXIgdGhlaXIgc2Vzc2lvbiBzaG91bGQgYmVcclxuICogcmVtZW1iZXJlZCBvciBub3QuIEl0IGFsc28gbWFrZXMgaXQgZWFzaWVyIHRvIG5ldmVyIHBlcnNpc3QgdGhlIGBBdXRoYCBzdGF0ZSBmb3IgYXBwbGljYXRpb25zXHJcbiAqIHRoYXQgYXJlIHNoYXJlZCBieSBvdGhlciB1c2VycyBvciBoYXZlIHNlbnNpdGl2ZSBkYXRhLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIHNldFBlcnNpc3RlbmNlKGF1dGgsIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2UgLSBUaGUge0BsaW5rIFBlcnNpc3RlbmNlfSB0byB1c2UuXHJcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgcGVyc2lzdGVuY2UgY2hhbmdlIGhhcyBjb21wbGV0ZWRcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0UGVyc2lzdGVuY2UoYXV0aCwgcGVyc2lzdGVuY2UpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkuc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSBzaWduZWQtaW4gdXNlcidzIElEIHRva2VuLCB3aGljaCBpbmNsdWRlcyBzaWduLWluLFxyXG4gKiBzaWduLW91dCwgYW5kIHRva2VuIHJlZnJlc2ggZXZlbnRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBlcnJvci5cclxuICogQHBhcmFtIGNvbXBsZXRlZCAtIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRUb2tlbkNoYW5nZWQoYXV0aCwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkub25JZFRva2VuQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgYW4gb2JzZXJ2ZXIgZm9yIGNoYW5nZXMgdG8gdGhlIHVzZXIncyBzaWduLWluIHN0YXRlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBrZWVwIHRoZSBvbGQgYmVoYXZpb3IsIHNlZSB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cclxuICogQHBhcmFtIGVycm9yIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGVycm9yLlxyXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLm9uQXV0aFN0YXRlQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UgdG8gdGhlIGRlZmF1bHQgZGV2aWNlL2Jyb3dzZXIgcHJlZmVyZW5jZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1c2VEZXZpY2VMYW5ndWFnZShhdXRoKSB7XHJcbiAgICBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkudXNlRGV2aWNlTGFuZ3VhZ2UoKTtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2V0cyB0aGUgcHJvdmlkZWQgdXNlciBhcyB7QGxpbmsgQXV0aC5jdXJyZW50VXNlcn0gb24gdGhlXHJcbiAqIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQSBuZXcgaW5zdGFuY2UgY29weSBvZiB0aGUgdXNlciBwcm92aWRlZCB3aWxsIGJlIG1hZGUgYW5kIHNldCBhcyBjdXJyZW50VXNlci5cclxuICpcclxuICogVGhpcyB3aWxsIHRyaWdnZXIge0BsaW5rIG9uQXV0aFN0YXRlQ2hhbmdlZH0gYW5kIHtAbGluayBvbklkVG9rZW5DaGFuZ2VkfSBsaXN0ZW5lcnNcclxuICogbGlrZSBvdGhlciBzaWduIGluIG1ldGhvZHMuXHJcbiAqXHJcbiAqIFRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdXNlciB0byBiZSB1cGRhdGVkIGJlbG9uZ3MgdG8gYSBkaWZmZXJlbnQgRmlyZWJhc2VcclxuICogcHJvamVjdC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSBuZXcge0BsaW5rIFVzZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVDdXJyZW50VXNlcihhdXRoLCB1c2VyKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBTaWducyBvdXQgdGhlIGN1cnJlbnQgdXNlci5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduT3V0KGF1dGgpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkuc2lnbk91dCgpO1xyXG59XHJcbi8qKlxyXG4gKiBEZWxldGVzIGFuZCBzaWducyBvdXQgdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5LXNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5XHJcbiAqIHNpZ25lZCBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKS5kZWxldGUoKTtcclxufVxuXG5jbGFzcyBNdWx0aUZhY3RvclNlc3Npb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGNyZWRlbnRpYWwpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21JZHRva2VuKGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi8sIGlkVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwobWZhUGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJzaWduaW5cIiAvKiBTSUdOX0lOICovLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy50eXBlID09PSBcImVucm9sbFwiIC8qIEVOUk9MTCAqL1xyXG4gICAgICAgICAgICA/ICdpZFRva2VuJ1xyXG4gICAgICAgICAgICA6ICdwZW5kaW5nQ3JlZGVudGlhbCc7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JTZXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBba2V5XTogdGhpcy5jcmVkZW50aWFsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKG9iaikge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5tdWx0aUZhY3RvclNlc3Npb24pIHtcclxuICAgICAgICAgICAgaWYgKChfYSA9IG9iai5tdWx0aUZhY3RvclNlc3Npb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChvYmoubXVsdGlGYWN0b3JTZXNzaW9uLnBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoX2IgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKG9iai5tdWx0aUZhY3RvclNlc3Npb24uaWRUb2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwge1xyXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbiwgaGludHMsIHNpZ25JblJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcclxuICAgICAgICB0aGlzLmhpbnRzID0gaGludHM7XHJcbiAgICAgICAgdGhpcy5zaWduSW5SZXNvbHZlciA9IHNpZ25JblJlc29sdmVyO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRXJyb3IoYXV0aEV4dGVybiwgZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xyXG4gICAgICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2U7XHJcbiAgICAgICAgY29uc3QgaGludHMgPSAoc2VydmVyUmVzcG9uc2UubWZhSW5mbyB8fCBbXSkubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICBfYXNzZXJ0KHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwoc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwoc2Vzc2lvbiwgaGludHMsIGFzeW5jIChhc3NlcnRpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWZhUmVzcG9uc2UgPSBhd2FpdCBhc3NlcnRpb24uX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbik7XHJcbiAgICAgICAgICAgIC8vIENsZWFyIG91dCB0aGUgdW5uZWVkZWQgZmllbGRzIGZyb20gdGhlIG9sZCBsb2dpbiByZXNwb25zZVxyXG4gICAgICAgICAgICBkZWxldGUgc2VydmVyUmVzcG9uc2UubWZhSW5mbztcclxuICAgICAgICAgICAgZGVsZXRlIHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAvLyBVc2UgaW4gdGhlIG5ldyB0b2tlbiAmIHJlZnJlc2ggdG9rZW4gaW4gdGhlIG9sZCByZXNwb25zZVxyXG4gICAgICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNlcnZlclJlc3BvbnNlKSwgeyBpZFRva2VuOiBtZmFSZXNwb25zZS5pZFRva2VuLCByZWZyZXNoVG9rZW46IG1mYVJlc3BvbnNlLnJlZnJlc2hUb2tlbiB9KTtcclxuICAgICAgICAgICAgLy8gVE9ETzogd2Ugc2hvdWxkIGNvbGxhcHNlIHRoaXMgc3dpdGNoIHN0YXRlbWVudCBpbnRvIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uIGFuZCBoYXZlIGl0IHN1cHBvcnQgdGhlIFNJR05fSU4gY2FzZVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yLm9wZXJhdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGVycm9yLm9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0aC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2VydChlcnJvci51c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbihlcnJvci51c2VyLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZXNvbHZlU2lnbkluKGFzc2VydGlvbkV4dGVybikge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5SZXNvbHZlcihhc3NlcnRpb24pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHtAbGluayBNdWx0aUZhY3RvclJlc29sdmVyfSBzdWl0YWJsZSBmb3IgY29tcGxldGlvbiBvZiBhXHJcbiAqIG11bHRpLWZhY3RvciBmbG93LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JFcnJvcn0gcmFpc2VkIGR1cmluZyBhIHNpZ24taW4sIG9yXHJcbiAqIHJlYXV0aGVudGljYXRpb24gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGVycm9yKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IGVycm9ySW50ZXJuYWwgPSBlcnJvcjtcclxuICAgIF9hc3NlcnQoZXJyb3IuY3VzdG9tRGF0YS5vcGVyYXRpb25UeXBlLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQoKF9hID0gZXJyb3JJbnRlcm5hbC5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIHJldHVybiBNdWx0aUZhY3RvclJlc29sdmVySW1wbC5fZnJvbUVycm9yKGF1dGhNb2R1bGFyLCBlcnJvckludGVybmFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydEVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDpzdGFydFwiIC8qIFNUQVJUX1BIT05FX01GQV9FTlJPTExNRU5UICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIGZpbmFsaXplRW5yb2xsUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OmZpbmFsaXplXCIgLyogRklOQUxJWkVfUEhPTkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gd2l0aGRyYXdNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OndpdGhkcmF3XCIgLyogV0lUSERSQVdfTUZBICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbmNsYXNzIE11bHRpRmFjdG9yVXNlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSBbXTtcclxuICAgICAgICB1c2VyLl9vblJlbG9hZCh1c2VySW5mbyA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VySW5mby5tZmFJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IHVzZXJJbmZvLm1mYUluZm8ubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKHVzZXIuYXV0aCwgZW5yb2xsbWVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21Vc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yVXNlckltcGwodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRTZXNzaW9uKCkge1xyXG4gICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tSWR0b2tlbihhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGVucm9sbChhc3NlcnRpb25FeHRlcm4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgYXNzZXJ0aW9uID0gYXNzZXJ0aW9uRXh0ZXJuO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSAoYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCkpO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsaXplTWZhUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIGFzc2VydGlvbi5fcHJvY2Vzcyh0aGlzLnVzZXIuYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpKTtcclxuICAgICAgICAvLyBOZXcgdG9rZW5zIHdpbGwgYmUgaXNzdWVkIGFmdGVyIGVucm9sbG1lbnQgb2YgdGhlIG5ldyBzZWNvbmQgZmFjdG9ycy5cclxuICAgICAgICAvLyBUaGV5IG5lZWQgdG8gYmUgdXBkYXRlZCBvbiB0aGUgdXNlci5cclxuICAgICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGZpbmFsaXplTWZhUmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIFRoZSB1c2VyIG5lZWRzIHRvIGJlIHJlbG9hZGVkIHRvIGdldCB0aGUgbmV3IG11bHRpLWZhY3RvciBpbmZvcm1hdGlvblxyXG4gICAgICAgIC8vIGZyb20gc2VydmVyLiBVU0VSX1JFTE9BREVEIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIGFuZCBgZW5yb2xsZWRGYWN0b3JzYFxyXG4gICAgICAgIC8vIHdpbGwgYmUgdXBkYXRlZC5cclxuICAgICAgICByZXR1cm4gdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdW5lbnJvbGwoaW5mb09yVWlkKSB7XHJcbiAgICAgICAgY29uc3QgbWZhRW5yb2xsbWVudElkID0gdHlwZW9mIGluZm9PclVpZCA9PT0gJ3N0cmluZycgPyBpbmZvT3JVaWQgOiBpbmZvT3JVaWQudWlkO1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMudXNlciwgd2l0aGRyYXdNZmEodGhpcy51c2VyLmF1dGgsIHtcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgbWZhRW5yb2xsbWVudElkXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc2Vjb25kIGZhY3RvciBmcm9tIHRoZSB1c2VyJ3MgbGlzdC5cclxuICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IHRoaXMuZW5yb2xsZWRGYWN0b3JzLmZpbHRlcigoeyB1aWQgfSkgPT4gdWlkICE9PSBtZmFFbnJvbGxtZW50SWQpO1xyXG4gICAgICAgIC8vIERlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBiYWNrZW5kIGRlY2lkZWQgdG8gcmV2b2tlIHRoZSB1c2VyJ3Mgc2Vzc2lvbixcclxuICAgICAgICAvLyB0aGUgdG9rZW5SZXNwb25zZSBtYXkgYmUgZW1wdHkuIElmIHRoZSB0b2tlbnMgd2VyZSBub3QgdXBkYXRlZCAoYW5kIHRoZXlcclxuICAgICAgICAvLyBhcmUgbm93IGludmFsaWQpLCByZWxvYWRpbmcgdGhlIHVzZXIgd2lsbCBkaXNjb3ZlciB0aGlzIGFuZCBpbnZhbGlkYXRlXHJcbiAgICAgICAgLy8gdGhlIHVzZXIncyBzdGF0ZSBhY2NvcmRpbmdseS5cclxuICAgICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlICE9PSBgYXV0aC8ke1widXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IG11bHRpRmFjdG9yVXNlckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JVc2VyfSBjb3JyZXNwb25kaW5nIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGlzIHVzZWQgdG8gYWNjZXNzIGFsbCBtdWx0aS1mYWN0b3IgcHJvcGVydGllcyBhbmQgb3BlcmF0aW9ucyByZWxhdGVkIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBtdWx0aUZhY3Rvcih1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VyTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGlmICghbXVsdGlGYWN0b3JVc2VyQ2FjaGUuaGFzKHVzZXJNb2R1bGFyKSkge1xyXG4gICAgICAgIG11bHRpRmFjdG9yVXNlckNhY2hlLnNldCh1c2VyTW9kdWxhciwgTXVsdGlGYWN0b3JVc2VySW1wbC5fZnJvbVVzZXIodXNlck1vZHVsYXIpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtdWx0aUZhY3RvclVzZXJDYWNoZS5nZXQodXNlck1vZHVsYXIpO1xyXG59XG5cbmNvbnN0IFNUT1JBR0VfQVZBSUxBQkxFX0tFWSA9ICdfX3Nhayc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGJyb3dzZXIgcGVyc2lzdGVuY2UgdHlwZXM6IGxvY2FsIGFuZCBzZXNzaW9uLlxyXG4vLyBCb3RoIGhhdmUgdGhlIHNhbWUgaW1wbGVtZW50YXRpb24gYnV0IHVzZSBhIGRpZmZlcmVudCB1bmRlcmx5aW5nIHN0b3JhZ2VcclxuLy8gb2JqZWN0LlxyXG5jbGFzcyBCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdG9yYWdlUmV0cmlldmVyLCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlUmV0cmlldmVyID0gc3RvcmFnZVJldHJpZXZlcjtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG4gICAgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCBqc29uID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpzb24gPyBKU09OLnBhcnNlKGpzb24pIDogbnVsbCk7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHN0b3JhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVJldHJpZXZlcigpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiBfaXNTYWZhcmkodWEpIHx8IF9pc0lPUyh1YSk7XHJcbn1cclxuLy8gVGhlIHBvbGxpbmcgcGVyaW9kIGluIGNhc2UgZXZlbnRzIGFyZSBub3Qgc3VwcG9ydGVkXHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TJDEgPSAxMDAwO1xyXG4vLyBUaGUgSUUgMTAgbG9jYWxTdG9yYWdlIGNyb3NzIHRhYiBzeW5jaHJvbml6YXRpb24gZGVsYXkgaW4gbWlsbGlzZWNvbmRzXHJcbmNvbnN0IElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZID0gMTA7XHJcbmNsYXNzIEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKCkgPT4gd2luZG93LmxvY2FsU3RvcmFnZSwgXCJMT0NBTFwiIC8qIExPQ0FMICovKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gKGV2ZW50LCBwb2xsKSA9PiB0aGlzLm9uU3RvcmFnZUV2ZW50KGV2ZW50LCBwb2xsKTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgLy8gU2FmYXJpIG9yIGlPUyBicm93c2VyIGFuZCBlbWJlZGRlZCBpbiBhbiBpZnJhbWUuXHJcbiAgICAgICAgdGhpcy5zYWZhcmlMb2NhbFN0b3JhZ2VOb3RTeW5jZWQgPSBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSAmJiBfaXNJZnJhbWUoKTtcclxuICAgICAgICAvLyBXaGV0aGVyIHRvIHVzZSBwb2xsaW5nIGluc3RlYWQgb2YgZGVwZW5kaW5nIG9uIHdpbmRvdyBldmVudHNcclxuICAgICAgICB0aGlzLmZhbGxiYWNrVG9Qb2xsaW5nID0gX2lzTW9iaWxlQnJvd3NlcigpO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGZvckFsbENoYW5nZWRLZXlzKGNiKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgYWxsIGtleXMgd2l0aCBsaXN0ZW5lcnMgb24gdGhlbS5cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgLy8gR2V0IHZhbHVlIGZyb20gbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2FsIG1hcCB2YWx1ZSBkb2VzIG5vdCBtYXRjaCwgdHJpZ2dlciBsaXN0ZW5lciB3aXRoIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIERpZmZlcmVudGlhdGUgdGhpcyBzaW11bGF0ZWQgZXZlbnQgZnJvbSB0aGUgcmVhbCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjYihrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8gS2V5IHdvdWxkIGJlIG51bGwgaW4gc29tZSBzaXR1YXRpb25zLCBsaWtlIHdoZW4gbG9jYWxTdG9yYWdlIGlzIGNsZWFyZWRcclxuICAgICAgICBpZiAoIWV2ZW50LmtleSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIF9vbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXkgPSBldmVudC5rZXk7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIG1lY2hhbmlzbSBob3cgdGhpcyBldmVudCB3YXMgZGV0ZWN0ZWQuXHJcbiAgICAgICAgLy8gVGhlIGZpcnN0IGV2ZW50IHdpbGwgZGljdGF0ZSB0aGUgbWVjaGFuaXNtIHRvIGJlIHVzZWQuXHJcbiAgICAgICAgaWYgKHBvbGwpIHtcclxuICAgICAgICAgICAgLy8gRW52aXJvbm1lbnQgZGV0ZWN0cyBzdG9yYWdlIGNoYW5nZXMgdmlhIHBvbGxpbmcuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyIHRvIHByZXZlbnQgcG9zc2libGUgZXZlbnQgZHVwbGljYXRpb24uXHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgcG9sbGluZyBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNhZmFyaSBlbWJlZGRlZCBpZnJhbWUuIFN0b3JhZ2UgZXZlbnQgd2lsbCB0cmlnZ2VyIHdpdGggdGhlIGRlbHRhXHJcbiAgICAgICAgLy8gY2hhbmdlcyBidXQgbm8gY2hhbmdlcyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGlmcmFtZSBsb2NhbFN0b3JhZ2UuXHJcbiAgICAgICAgaWYgKHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IGlmcmFtZSBwYWdlIHZhbHVlLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIC8vIFZhbHVlIG5vdCBzeW5jaHJvbml6ZWQsIHN5bmNocm9uaXplIG1hbnVhbGx5LlxyXG4gICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZSBjaGFuZ2VkIGZyb20gY3VycmVudCB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgdmFsdWUgZGVsZXRlZC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubG9jYWxDYWNoZVtrZXldID09PSBldmVudC5uZXdWYWx1ZSAmJiAhcG9sbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBkZXRlY3RlZCBhbmQgcHJvY2Vzc2VkLCBkbyBub3QgdHJpZ2dlciBsaXN0ZW5lcnMgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdHJpZ2dlckxpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gS2VlcCBsb2NhbCBtYXAgdXAgdG8gZGF0ZSBpbiBjYXNlIHN0b3JhZ2UgZXZlbnQgaXMgdHJpZ2dlcmVkIGJlZm9yZVxyXG4gICAgICAgICAgICAvLyBwb2xsLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmICghcG9sbCAmJiB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gc3RvcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlYWwgc3RvcmFnZSBldmVudCB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGRldGVjdGVkLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyB0byB0cmlnZ2VyIGluIHNvbWUgSUUgYnJvd3NlcnMgZm9yIHNvbWUgcmVhc29uLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgc3RvcmVkVmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIGlmIChfaXNJRTEwKCkgJiZcclxuICAgICAgICAgICAgc3RvcmVkVmFsdWUgIT09IGV2ZW50Lm5ld1ZhbHVlICYmXHJcbiAgICAgICAgICAgIGV2ZW50Lm5ld1ZhbHVlICE9PSBldmVudC5vbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBJRSAxMCBoYXMgdGhpcyB3ZWlyZCBidWcgd2hlcmUgYSBzdG9yYWdlIGV2ZW50IHdvdWxkIHRyaWdnZXIgd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gY29ycmVjdCBrZXksIG9sZFZhbHVlIGFuZCBuZXdWYWx1ZSBidXQgbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSBkb2VzXHJcbiAgICAgICAgICAgIC8vIG5vdCB5aWVsZCB0aGUgdXBkYXRlZCB2YWx1ZSB1bnRpbCBhIGZldyBtaWxsaXNlY29uZHMuIFRoaXMgZW5zdXJlc1xyXG4gICAgICAgICAgICAvLyB0aGlzIHJlY292ZXJzIGZyb20gdGhhdCBzaXR1YXRpb24uXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodHJpZ2dlckxpc3RlbmVycywgSUUxMF9MT0NBTF9TVE9SQUdFX1NZTkNfREVMQVkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHJpZ2dlckxpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydFBvbGxpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3JhZ2VFdmVudChuZXcgU3RvcmFnZUV2ZW50KCdzdG9yYWdlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfSksIFxyXG4gICAgICAgICAgICAgICAgLyogcG9sbCAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgX1BPTExJTkdfSU5URVJWQUxfTVMkMSk7XHJcbiAgICB9XHJcbiAgICBzdG9wUG9sbGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb2xsVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxUaW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhdHRhY2hMaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZGV0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgLy8gV2hldGhlciBicm93c2VyIGNhbiBkZXRlY3Qgc3RvcmFnZSBldmVudCB3aGVuIGl0IGhhZCBhbHJlYWR5IGJlZW4gcHVzaGVkIHRvIHRoZSBiYWNrZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyBUaGlzIG1heSBoYXBwZW4gaW4gc29tZSBtb2JpbGUgYnJvd3NlcnMuIEEgbG9jYWxTdG9yYWdlIGNoYW5nZSBpbiB0aGUgZm9yZWdyb3VuZCB3aW5kb3dcclxuICAgICAgICAgICAgLy8gd2lsbCBub3QgYmUgZGV0ZWN0ZWQgaW4gdGhlIGJhY2tncm91bmQgd2luZG93IHZpYSB0aGUgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgLy8gVGhpcyB3YXMgZGV0ZWN0ZWQgaW4gaU9TIDcueCBtb2JpbGUgYnJvd3NlcnNcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFsbGJhY2tUb1BvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gVXBkYXRlIGxvY2FsIGNhY2hlIG9uIGJhc2Ugb3BlcmF0aW9uczpcclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgc3VwZXIuX2dldChrZXkpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuX3JlbW92ZShrZXkpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgIH1cclxufVxyXG5Ccm93c2VyTG9jYWxQZXJzaXN0ZW5jZS50eXBlID0gJ0xPQ0FMJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSBgTE9DQUxgIHVzaW5nIGBsb2NhbFN0b3JhZ2VgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSA9IEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKCkgPT4gd2luZG93LnNlc3Npb25TdG9yYWdlLCBcIlNFU1NJT05cIiAvKiBTRVNTSU9OICovKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2Vzc2lvbiBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3NcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZS50eXBlID0gJ1NFU1NJT04nO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiBgU0VTU0lPTmAgdXNpbmcgYHNlc3Npb25TdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSA9IEJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTaGltIGZvciBQcm9taXNlLmFsbFNldHRsZWQsIG5vdGUgdGhlIHNsaWdodGx5IGRpZmZlcmVudCBmb3JtYXQgb2YgYGZ1bGZpbGxlZGAgdnMgYHN0YXR1c2AuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyAtIEFycmF5IG9mIHByb21pc2VzIHRvIHdhaXQgb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWxsU2V0dGxlZChwcm9taXNlcykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzLm1hcChhc3luYyAocHJvbWlzZSkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcHJvbWlzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChyZWFzb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWFzb25cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBjbGFzcyBmb3IgcmVjZWl2aW5nIG1lc3NhZ2VzLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgUmVjZWl2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc01hcCA9IHt9O1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSB0aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9idGFpbiBhbiBpbnN0YW5jZSBvZiBhIFJlY2VpdmVyIGZvciBhIGdpdmVuIGV2ZW50IHRhcmdldCwgaWYgbm9uZSBleGlzdHMgaXQgd2lsbCBiZSBjcmVhdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFRhcmdldCAtIEFuIGV2ZW50IHRhcmdldCAoc3VjaCBhcyB3aW5kb3cgb3Igc2VsZikgdGhyb3VnaCB3aGljaCB0aGUgdW5kZXJseWluZ1xyXG4gICAgICogbWVzc2FnZXMgd2lsbCBiZSByZWNlaXZlZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9nZXRJbnN0YW5jZShldmVudFRhcmdldCkge1xyXG4gICAgICAgIC8vIFRoZSByZXN1bHRzIGFyZSBzdG9yZWQgaW4gYW4gYXJyYXkgc2luY2Ugb2JqZWN0cyBjYW4ndCBiZSBrZXlzIGZvciBvdGhlclxyXG4gICAgICAgIC8vIG9iamVjdHMuIEluIGFkZGl0aW9uLCBzZXR0aW5nIGEgdW5pcXVlIHByb3BlcnR5IG9uIGFuIGV2ZW50IHRhcmdldCBhcyBhXHJcbiAgICAgICAgLy8gaGFzaCBtYXAga2V5IG1heSBub3QgYmUgYWxsb3dlZCBkdWUgdG8gQ09SUyByZXN0cmljdGlvbnMuXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMucmVjZWl2ZXJzLmZpbmQocmVjZWl2ZXIgPT4gcmVjZWl2ZXIuaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdJbnN0YW5jZSA9IG5ldyBSZWNlaXZlcihldmVudFRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlcnMucHVzaChuZXdJbnN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50VGFyZ2V0ID09PSBldmVudFRhcmdldDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRmFucyBvdXQgYSBNZXNzYWdlRXZlbnQgdG8gdGhlIGFwcHJvcHJpYXRlIGxpc3RlbmVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogU2VuZHMgYW4ge0BsaW5rIFN0YXR1cy5BQ0t9IHVwb24gcmVjZWlwdCBhbmQgYSB7QGxpbmsgU3RhdHVzLkRPTkV9IG9uY2UgYWxsIGhhbmRsZXJzIGhhdmVcclxuICAgICAqIGZpbmlzaGVkIHByb2Nlc3NpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIE1lc3NhZ2VFdmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBldmVudElkLCBldmVudFR5cGUsIGRhdGEgfSA9IG1lc3NhZ2VFdmVudC5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIGlmICghKGhhbmRsZXJzID09PSBudWxsIHx8IGhhbmRsZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBoYW5kbGVycy5zaXplKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VFdmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJhY2tcIiAvKiBBQ0sgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbShoYW5kbGVycykubWFwKGFzeW5jIChoYW5kbGVyKSA9PiBoYW5kbGVyKG1lc3NhZ2VFdmVudC5vcmlnaW4sIGRhdGEpKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9hbGxTZXR0bGVkKHByb21pc2VzKTtcclxuICAgICAgICBtZXNzYWdlRXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiZG9uZVwiIC8qIERPTkUgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgcmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIC0gVGhlIGV2ZW50IGhhbmRsZXIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIGV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9zdWJzY3JpYmUoZXZlbnRUeXBlLCBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5hZGQoZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgYW4gZXZlbnQgaGFuZGxlciBmcm9tIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byB1bnN1YnNjcmliZSBmcm9tLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIE9wdGlub2FsIGV2ZW50IGhhbmRsZXIsIGlmIG5vbmUgcHJvdmlkZWQsIHVuc3Vic2NyaWJlIGFsbCBoYW5kbGVycyBvbiB0aGlzIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgX3Vuc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSAmJiBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLmRlbGV0ZShldmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWV2ZW50SGFuZGxlciB8fCB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5SZWNlaXZlci5yZWNlaXZlcnMgPSBbXTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dlbmVyYXRlRXZlbnRJZChwcmVmaXggPSAnJywgZGlnaXRzID0gMTApIHtcclxuICAgIGxldCByYW5kb20gPSAnJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlnaXRzOyBpKyspIHtcclxuICAgICAgICByYW5kb20gKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZWZpeCArIHJhbmRvbTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciBzZW5kaW5nIG1lc3NhZ2VzIGFuZCB3YWl0aW5nIGZvciBhIGNvbXBsZXRpb24gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBTZW5kZXIge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG5ldyBTZXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgdGhlIGhhbmRsZXIgYW5kIHJlbW92ZSBpdCBmcm9tIG91ciB0cmFja2luZyBTZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byB1bnN1YnNjcmliZS5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgIGlmIChoYW5kbGVyLm1lc3NhZ2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZXIub25NZXNzYWdlKTtcclxuICAgICAgICAgICAgaGFuZGxlci5tZXNzYWdlQ2hhbm5lbC5wb3J0MS5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIFJlY2VpdmVyIGxvY2F0ZWQgYXQge0BsaW5rIHRhcmdldH0uXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFdlJ2xsIGZpcnN0IHdhaXQgYSBiaXQgZm9yIGFuIEFDSyAsIGlmIHdlIGdldCBvbmUgd2Ugd2lsbCB3YWl0IHNpZ25pZmljYW50bHkgbG9uZ2VyIHVudGlsIHRoZVxyXG4gICAgICogcmVjZWl2ZXIgaGFzIGhhZCBhIGNoYW5jZSB0byBmdWxseSBwcm9jZXNzIHRoZSBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gVHlwZSBvZiBldmVudCB0byBzZW5kLlxyXG4gICAgICogQHBhcmFtIGRhdGEgLSBUaGUgcGF5bG9hZCBvZiB0aGUgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dCAtIFRpbWVvdXQgZm9yIHdhaXRpbmcgb24gYW4gQUNLIGZyb20gdGhlIHJlY2VpdmVyLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHNldHRsZWQgcHJvbWlzZXMgZnJvbSBhbGwgdGhlIGhhbmRsZXJzIHRoYXQgd2VyZSBsaXN0ZW5pbmcgb24gdGhlIHJlY2VpdmVyLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBfc2VuZChldmVudFR5cGUsIGRhdGEsIHRpbWVvdXQgPSA1MCAvKiBBQ0sgKi8pIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlQ2hhbm5lbCA9IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgTWVzc2FnZUNoYW5uZWwoKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb25uZWN0aW9uX3VuYXZhaWxhYmxlXCIgLyogQ09OTkVDVElPTl9VTkFWQUlMQUJMRSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIGxldCBjb21wbGV0aW9uVGltZXI7XHJcbiAgICAgICAgbGV0IGhhbmRsZXI7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoJycsIDIwKTtcclxuICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwucG9ydDEuc3RhcnQoKTtcclxuICAgICAgICAgICAgY29uc3QgYWNrVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZF9ldmVudFwiIC8qIFVOU1VQUE9SVEVEX0VWRU5UICovKSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBoYW5kbGVyID0ge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICBvbk1lc3NhZ2UoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUV2ZW50LmRhdGEuZXZlbnRJZCAhPT0gZXZlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZUV2ZW50LmRhdGEuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhY2tcIiAvKiBBQ0sgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVjZWl2ZXIgc2hvdWxkIEFDSyBmaXJzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhY2tUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidGltZW91dFwiIC8qIFRJTUVPVVQgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDAgLyogQ09NUExFVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRvbmVcIiAvKiBET05FICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgcmVjZWl2ZXIncyBoYW5kbGVycyBhcmUgZmluaXNoZWQgd2Ugd2lsbCBnZXQgdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29tcGxldGlvblRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZUV2ZW50LmRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaW52YWxpZF9yZXNwb25zZVwiIC8qIElOVkFMSURfUkVTUE9OU0UgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5hZGQoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgICAgIH0sIFttZXNzYWdlQ2hhbm5lbC5wb3J0Ml0pO1xyXG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVNZXNzYWdlSGFuZGxlcihoYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBMYXp5IGFjY2Vzc29yIGZvciB3aW5kb3csIHNpbmNlIHRoZSBjb21wYXQgbGF5ZXIgd29uJ3QgdHJlZSBzaGFrZSB0aGlzIG91dCxcclxuICogd2UgbmVlZCB0byBtYWtlIHN1cmUgbm90IHRvIG1lc3Mgd2l0aCB3aW5kb3cgdW5sZXNzIHdlIGhhdmUgdG9cclxuICovXHJcbmZ1bmN0aW9uIF93aW5kb3coKSB7XHJcbiAgICByZXR1cm4gd2luZG93O1xyXG59XHJcbmZ1bmN0aW9uIF9zZXRXaW5kb3dMb2NhdGlvbih1cmwpIHtcclxuICAgIF93aW5kb3coKS5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNXb3JrZXIoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBfd2luZG93KClbJ1dvcmtlckdsb2JhbFNjb3BlJ10gIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIF93aW5kb3coKVsnaW1wb3J0U2NyaXB0cyddID09PSAnZnVuY3Rpb24nKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QWN0aXZlU2VydmljZVdvcmtlcigpIHtcclxuICAgIGlmICghKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcclxuICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLmFjdGl2ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlcigpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAoKF9hID0gbmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250cm9sbGVyKSB8fCBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRXb3JrZXJHbG9iYWxTY29wZSgpIHtcclxuICAgIHJldHVybiBfaXNXb3JrZXIoKSA/IHNlbGYgOiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2VMb2NhbFN0b3JhZ2VEYic7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBEQl9PQkpFQ1RTVE9SRV9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlJztcclxuY29uc3QgREJfREFUQV9LRVlQQVRIID0gJ2ZiYXNlX2tleSc7XHJcbi8qKlxyXG4gKiBQcm9taXNlIHdyYXBwZXIgZm9yIElEQlJlcXVlc3RcclxuICpcclxuICogVW5mb3J0dW5hdGVseSB3ZSBjYW4ndCBjbGVhbmx5IGV4dGVuZCBQcm9taXNlPFQ+IHNpbmNlIHByb21pc2VzIGFyZSBub3QgY2FsbGFibGUgaW4gRVM2XHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBEQlByb21pc2Uge1xyXG4gICAgY29uc3RydWN0b3IocmVxdWVzdCkge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XHJcbiAgICB9XHJcbiAgICB0b1Byb21pc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMucmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldE9iamVjdFN0b3JlKGRiLCBpc1JlYWRXcml0ZSkge1xyXG4gICAgcmV0dXJuIGRiXHJcbiAgICAgICAgLnRyYW5zYWN0aW9uKFtEQl9PQkpFQ1RTVE9SRV9OQU1FXSwgaXNSZWFkV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpXHJcbiAgICAgICAgLm9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUpO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVEYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfTkFNRSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5mdW5jdGlvbiBfb3BlbkRhdGFiYXNlKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoREJfT0JKRUNUU1RPUkVfTkFNRSwgeyBrZXlQYXRoOiBEQl9EQVRBX0tFWVBBVEggfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgLy8gU3RyYW5nZSBidWcgdGhhdCBvY2N1cnMgaW4gRmlyZWZveCB3aGVuIG11bHRpcGxlIHRhYnMgYXJlIG9wZW5lZCBhdCB0aGVcclxuICAgICAgICAgICAgLy8gc2FtZSB0aW1lLiBUaGUgb25seSB3YXkgdG8gcmVjb3ZlciBzZWVtcyB0byBiZSBkZWxldGluZyB0aGUgZGF0YWJhc2VcclxuICAgICAgICAgICAgLy8gYW5kIHJlLWluaXRpYWxpemluZyBpdC5cclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjM0XHJcbiAgICAgICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhEQl9PQkpFQ1RTVE9SRV9OQU1FKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBjbG9zZSB0aGUgZGF0YWJhc2Ugb3IgZWxzZSB5b3UgZ2V0IGEgYGJsb2NrZWRgIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgX2RlbGV0ZURhdGFiYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGF3YWl0IF9vcGVuRGF0YWJhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3B1dE9iamVjdChkYiwga2V5LCB2YWx1ZSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5wdXQoe1xyXG4gICAgICAgIFtEQl9EQVRBX0tFWVBBVEhdOiBrZXksXHJcbiAgICAgICAgdmFsdWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0T2JqZWN0KGRiLCBrZXkpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgZmFsc2UpLmdldChrZXkpO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbiAgICByZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGRhdGEudmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gX2RlbGV0ZU9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIHRydWUpLmRlbGV0ZShrZXkpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuY29uc3QgX1BPTExJTkdfSU5URVJWQUxfTVMgPSA4MDA7XHJcbmNvbnN0IF9UUkFOU0FDVElPTl9SRVRSWV9DT1VOVCA9IDM7XHJcbmNsYXNzIEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJMT0NBTFwiIC8qIExPQ0FMICovO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzID0gMDtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbmRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIEZpcmUgJiBmb3JnZXQgdGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiBhcyBpdCBtYXkgbmV2ZXIgcmVzb2x2ZVxyXG4gICAgICAgIHRoaXMuX3dvcmtlckluaXRpYWxpemF0aW9uUHJvbWlzZSA9XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKS50aGVuKCgpID0+IHsgfSwgKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuRGIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGIgPSBhd2FpdCBfb3BlbkRhdGFiYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFJldHJpZXMob3ApIHtcclxuICAgICAgICBsZXQgbnVtQXR0ZW1wdHMgPSAwO1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuX29wZW5EYigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG9wKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bUF0dGVtcHRzKysgPiBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyBleHBvbmVudGlhbCBiYWNrb2ZmXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluZGV4ZWREQiBldmVudHMgZG8gbm90IHByb3BhZ2F0ZSBmcm9tIHRoZSBtYWluIHdpbmRvdyB0byB0aGUgd29ya2VyIGNvbnRleHQuICBXZSByZWx5IG9uIGFcclxuICAgICAqIHBvc3RNZXNzYWdlIGludGVyZmFjZSB0byBzZW5kIHRoZXNlIGV2ZW50cyB0byB0aGUgd29ya2VyIG91cnNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc1dvcmtlcigpID8gdGhpcy5pbml0aWFsaXplUmVjZWl2ZXIoKSA6IHRoaXMuaW5pdGlhbGl6ZVNlbmRlcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcyB0aGUgd29ya2VyIHdlIHNob3VsZCBsaXN0ZW4gdG8gZXZlbnRzIGZyb20gdGhlIG1haW4gd2luZG93LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplUmVjZWl2ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IFJlY2VpdmVyLl9nZXRJbnN0YW5jZShfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSk7XHJcbiAgICAgICAgLy8gUmVmcmVzaCBmcm9tIHBlcnNpc3RlbmNlIGlmIHdlIHJlY2VpdmUgYSBLZXlDaGFuZ2VkIG1lc3NhZ2UuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCBhc3luYyAoX29yaWdpbiwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gYXdhaXQgdGhpcy5fcG9sbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAga2V5UHJvY2Vzc2VkOiBrZXlzLmluY2x1ZGVzKGRhdGEua2V5KVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExldCB0aGUgc2VuZGVyIGtub3cgdGhhdCB3ZSBhcmUgbGlzdGVuaW5nIHNvIHRoZXkgZ2l2ZSB1cyBtb3JlIHRpbWVvdXQuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwicGluZ1wiIC8qIFBJTkcgKi8sIGFzeW5jIChfb3JpZ2luLCBfZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gW1wia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIG1haW4gd2luZG93LCB3ZSBzaG91bGQgbGV0IHRoZSB3b3JrZXIga25vdyB3aGVuIGtleXMgY2hhbmdlIChzZXQgYW5kIHJlbW92ZSkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmljZVdvcmtlckNvbnRhaW5lci9yZWFkeSB8IFNlcnZpY2VXb3JrZXJDb250YWluZXIucmVhZHl9XHJcbiAgICAgKiBtYXkgbm90IHJlc29sdmUuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZW5kZXIoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlcmUncyBhbiBhY3RpdmUgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gYXdhaXQgX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VuZGVyID0gbmV3IFNlbmRlcih0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpO1xyXG4gICAgICAgIC8vIFBpbmcgdGhlIHNlcnZpY2Ugd29ya2VyIHRvIGNoZWNrIHdoYXQgZXZlbnRzIHRoZXkgY2FuIGhhbmRsZS5cclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zZW5kZXIuX3NlbmQoXCJwaW5nXCIgLyogUElORyAqLywge30sIDgwMCAvKiBMT05HX0FDSyAqLyk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSByZXN1bHRzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnVsZmlsbGVkKSAmJlxyXG4gICAgICAgICAgICAoKF9iID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnZhbHVlLmluY2x1ZGVzKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTGV0IHRoZSB3b3JrZXIga25vdyBhYm91dCBhIGNoYW5nZWQga2V5LCB0aGUgZXhhY3Qga2V5IGRvZXNuJ3QgdGVjaG5pY2FsbHkgbWF0dGVyIHNpbmNlIHRoZVxyXG4gICAgICogd29ya2VyIHdpbGwganVzdCB0cmlnZ2VyIGEgZnVsbCBzeW5jIGFueXdheS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIG5vdywgd2Ugb25seSBzdXBwb3J0IG9uZSBzZXJ2aWNlIHdvcmtlciBwZXIgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ga2V5IC0gU3RvcmFnZSBrZXkgd2hpY2ggY2hhbmdlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbm90aWZ5U2VydmljZVdvcmtlcihrZXkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgfHxcclxuICAgICAgICAgICAgX2dldFNlcnZpY2VXb3JrZXJDb250cm9sbGVyKCkgIT09IHRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCB7IGtleSB9LCBcclxuICAgICAgICAgICAgLy8gVXNlIGxvbmcgdGltZW91dCBpZiByZWNlaXZlciBoYXMgcHJldmlvdXNseSByZXNwb25kZWQgdG8gYSBwaW5nIGZyb20gdXMuXHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICA/IDgwMCAvKiBMT05HX0FDSyAqL1xyXG4gICAgICAgICAgICAgICAgOiA1MCAvKiBBQ0sgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QgZWZmb3J0IGFwcHJvYWNoLiBJZ25vcmUgZXJyb3JzLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIWluZGV4ZWREQikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCBfcHV0T2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9kZWxldGVPYmplY3QoZGIsIFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF93aXRoUGVuZGluZ1dyaXRlKHdyaXRlKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzKys7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcy0tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfcHV0T2JqZWN0KGRiLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gKGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gZ2V0T2JqZWN0KGRiLCBrZXkpKSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBvYmo7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQZW5kaW5nV3JpdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IF9kZWxldGVPYmplY3QoZGIsIGtleSkpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wb2xsKCkge1xyXG4gICAgICAgIC8vIFRPRE86IGNoZWNrIGlmIHdlIG5lZWQgdG8gZmFsbGJhY2sgaWYgZ2V0QWxsIGlzIG5vdCBzdXBwb3J0ZWRcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ2V0QWxsUmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCBmYWxzZSkuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgREJQcm9taXNlKGdldEFsbFJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBwZW5kaW5nIHdyaXRlcyBpbiBwcm9ncmVzcyBhYm9ydCwgd2UnbGwgZ2V0IHBpY2tlZCB1cCBvbiB0aGUgbmV4dCBwb2xsXHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1dyaXRlcyAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgICAgICBjb25zdCBrZXlzSW5SZXN1bHQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCB7IGZiYXNlX2tleToga2V5LCB2YWx1ZSB9IG9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICBrZXlzSW5SZXN1bHQuYWRkKGtleSk7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmxvY2FsQ2FjaGVba2V5XSkgIT09IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGxvY2FsS2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubG9jYWxDYWNoZSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxDYWNoZVtsb2NhbEtleV0gJiYgIWtleXNJblJlc3VsdC5oYXMobG9jYWxLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEZWxldGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhsb2NhbEtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2gobG9jYWxLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIEFycmF5LmZyb20obGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHRoaXMuX3BvbGwoKSwgX1BPTExJTkdfSU5URVJWQUxfTVMpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XSA9IG5ldyBTZXQoKTtcclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIGNhY2hlIHRvIGF2b2lkIHNwdXJpb3VzbHkgdHJpZ2dlcmluZyBvbiBmaXJzdCBwb2xsLlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX2dldChrZXkpOyAvLyBUaGlzIGNhbiBoYXBwZW4gaW4gdGhlIGJhY2tncm91bmQgYXN5bmMgYW5kIHdlIGNhbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgaW5kZXhlZERCYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSA9IEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0U2lnbkluUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfU0lHTl9JTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOmZpbmFsaXplXCIgLyogRklOQUxJWkVfUEhPTkVfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjYXB0Y2hhUGFyYW1zKGF1dGgpIHtcclxuICAgIHJldHVybiAoKGF3YWl0IF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEdFVCAqLywgXCIvdjEvcmVjYXB0Y2hhUGFyYW1zXCIgLyogR0VUX1JFQ0FQVENIQV9QQVJBTSAqLykpLnJlY2FwdGNoYVNpdGVLZXkgfHwgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgcmV0dXJuIChfYiA9IChfYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZG9jdW1lbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2xvYWRKUyh1cmwpIHtcclxuICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyB0aW1lb3V0IHN1cHBvcnQgJiBjYW5jZWxsYXRpb25cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgZWwub25sb2FkID0gcmVzb2x2ZTtcclxuICAgICAgICBlbC5vbmVycm9yID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGVycm9yLmN1c3RvbURhdGEgPSBlO1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgIGVsLmNoYXJzZXQgPSAnVVRGLTgnO1xyXG4gICAgICAgIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfZ2VuZXJhdGVDYWxsYmFja05hbWUocHJlZml4KSB7XHJcbiAgICByZXR1cm4gYF9fJHtwcmVmaXh9JHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKX1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9TT0xWRV9USU1FX01TID0gNTAwO1xyXG5jb25zdCBfRVhQSVJBVElPTl9USU1FX01TID0gNjAwMDA7XHJcbmNvbnN0IF9XSURHRVRfSURfU1RBUlQgPSAxMDAwMDAwMDAwMDAwO1xyXG5jbGFzcyBNb2NrUmVDYXB0Y2hhIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcihjb250YWluZXIsIHBhcmFtZXRlcnMpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuY291bnRlcjtcclxuICAgICAgICB0aGlzLl93aWRnZXRzLnNldChpZCwgbmV3IE1vY2tXaWRnZXQoY29udGFpbmVyLCB0aGlzLmF1dGgubmFtZSwgcGFyYW1ldGVycyB8fCB7fSkpO1xyXG4gICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuICAgIHJlc2V0KG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWxldGUoKSk7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5kZWxldGUoaWQpO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2Uob3B0V2lkZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgaWQgPSBvcHRXaWRnZXRJZCB8fCBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UmVzcG9uc2UoKSkgfHwgJyc7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5leGVjdXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG5jbGFzcyBNb2NrV2lkZ2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIGFwcE5hbWUsIHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdGhpcy5wYXJhbXMuc2l6ZSAhPT0gJ2ludmlzaWJsZSc7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlVG9rZW47XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyg1MCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2FsbGJhY2ssICdleHBpcmVkLWNhbGxiYWNrJzogZXhwaXJlZENhbGxiYWNrIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMucmVzcG9uc2VUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwaXJlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlZENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBfRVhQSVJBVElPTl9USU1FX01TKTtcclxuICAgICAgICB9LCBfU09MVkVfVElNRV9NUyk7XHJcbiAgICB9XHJcbiAgICBjaGVja0lmRGVsZXRlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncmVDQVBUQ0hBIG1vY2sgd2FzIGFscmVhZHkgZGVsZXRlZCEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcobGVuKSB7XHJcbiAgICBjb25zdCBjaGFycyA9IFtdO1xyXG4gICAgY29uc3QgYWxsb3dlZENoYXJzID0gJzEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsb3dlZENoYXJzLmxlbmd0aCkpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBSZUNhcHRjaGEgd2lsbCBsb2FkIHVzaW5nIHRoZSBzYW1lIGNhbGxiYWNrLCBzbyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gbmVlZHNcclxuLy8gdG8gYmUga2VwdCBhcm91bmRcclxuY29uc3QgX0pTTE9BRF9DQUxMQkFDSyA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgncmNiJyk7XHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVF9ERUxBWSA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5jb25zdCBSRUNBUFRDSEFfQkFTRSA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanM/JztcclxuLyoqXHJcbiAqIExvYWRlciBmb3IgdGhlIEdSZUNhcHRjaGEgbGlicmFyeS4gVGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUgb2YgdGhpcy5cclxuICovXHJcbmNsYXNzIFJlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ob3N0TGFuZ3VhZ2UgPSAnJztcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQgPSAhIV93aW5kb3coKS5ncmVjYXB0Y2hhO1xyXG4gICAgfVxyXG4gICAgbG9hZChhdXRoLCBobCA9ICcnKSB7XHJcbiAgICAgICAgX2Fzc2VydChpc0hvc3RMYW5ndWFnZVZhbGlkKGhsKSwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3dpbmRvdygpLmdyZWNhcHRjaGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICB9LCBORVRXT1JLX1RJTUVPVVRfREVMQVkuZ2V0KCkpO1xyXG4gICAgICAgICAgICBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS10gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS107XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNhcHRjaGEgPSBfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIGlmICghcmVjYXB0Y2hhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXcmFwIHRoZSBncmVwdGNoYSByZW5kZXIgZnVuY3Rpb24gc28gdGhhdCB3ZSBrbm93IGlmIHRoZSBkZXZlbG9wZXIgaGFzXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsZWQgaXQgc2VwYXJhdGVseVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gcmVjYXB0Y2hhLnJlbmRlcjtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5yZW5kZXIgPSAoY29udGFpbmVyLCBwYXJhbXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXRJZCA9IHJlbmRlcihjb250YWluZXIsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpZGdldElkO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gaGw7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlY2FwdGNoYSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke1JFQ0FQVENIQV9CQVNFfT8ke3F1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIG9ubG9hZDogX0pTTE9BRF9DQUxMQkFDSyxcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogJ2V4cGxpY2l0JyxcclxuICAgICAgICAgICAgICAgIGhsXHJcbiAgICAgICAgICAgIH0pfWA7XHJcbiAgICAgICAgICAgIF9sb2FkSlModXJsKS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobmV0d29ya1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhcmVkT25lSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyLS07XHJcbiAgICB9XHJcbiAgICBzaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpIHtcclxuICAgICAgICAvLyBXZSBjYW4gcmVzb2x2ZSBpbW1lZGlhdGVseSBpZjpcclxuICAgICAgICAvLyAgIOKAoiBncmVjYXB0Y2hhIGlzIGFscmVhZHkgZGVmaW5lZCBBTkQgKFxyXG4gICAgICAgIC8vICAgICAxLiB0aGUgcmVxdWVzdGVkIGxhbmd1YWdlIGNvZGVzIGFyZSB0aGUgc2FtZSBPUlxyXG4gICAgICAgIC8vICAgICAyLiB0aGVyZSBleGlzdHMgYWxyZWFkeSBhIFJlQ2FwdGNoYSBvbiB0aGUgcGFnZVxyXG4gICAgICAgIC8vICAgICAzLiB0aGUgbGlicmFyeSB3YXMgYWxyZWFkeSBsb2FkZWQgYnkgdGhlIGFwcFxyXG4gICAgICAgIC8vIEluIGNhc2VzICgyKSBhbmQgKDMpLCB3ZSBfY2FuJ3RfIHJlbG9hZCBhcyBpdCB3b3VsZCBicmVhayB0aGUgcmVjYXB0Y2hhc1xyXG4gICAgICAgIC8vIHRoYXQgYXJlIGFscmVhZHkgaW4gdGhlIHBhZ2VcclxuICAgICAgICByZXR1cm4gKCEhX3dpbmRvdygpLmdyZWNhcHRjaGEgJiZcclxuICAgICAgICAgICAgKGhsID09PSB0aGlzLmhvc3RMYW5ndWFnZSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyID4gMCB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5saWJyYXJ5U2VwYXJhdGVseUxvYWRlZCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzSG9zdExhbmd1YWdlVmFsaWQoaGwpIHtcclxuICAgIHJldHVybiBobC5sZW5ndGggPD0gNiAmJiAvXlxccypbYS16QS1aMC05XFwtXSpcXHMqJC8udGVzdChobCk7XHJcbn1cclxuY2xhc3MgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgYXN5bmMgbG9hZChhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNb2NrUmVDYXB0Y2hhKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkgeyB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUgPSAncmVjYXB0Y2hhJztcclxuY29uc3QgREVGQVVMVF9QQVJBTVMgPSB7XHJcbiAgICB0aGVtZTogJ2xpZ2h0JyxcclxuICAgIHR5cGU6ICdpbWFnZSdcclxufTtcclxuLyoqXHJcbiAqIEFuIHtAbGluayBodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS8gfCByZUNBUFRDSEF9LWJhc2VkIGFwcGxpY2F0aW9uIHZlcmlmaWVyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBSZWNhcHRjaGFWZXJpZmllciB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyT3JJZCAtIFRoZSByZUNBUFRDSEEgY29udGFpbmVyIHBhcmFtZXRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhpcyBoYXMgZGlmZmVyZW50IG1lYW5pbmcgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHJlQ0FQVENIQSBpcyBoaWRkZW4gb3IgdmlzaWJsZS4gRm9yIGFcclxuICAgICAqIHZpc2libGUgcmVDQVBUQ0hBIHRoZSBjb250YWluZXIgbXVzdCBiZSBlbXB0eS4gSWYgYSBzdHJpbmcgaXMgdXNlZCwgaXQgaGFzIHRvIGNvcnJlc3BvbmQgdG9cclxuICAgICAqIGFuIGVsZW1lbnQgSUQuIFRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnQgbXVzdCBhbHNvIG11c3QgYmUgaW4gdGhlIERPTSBhdCB0aGUgdGltZSBvZlxyXG4gICAgICogaW5pdGlhbGl6YXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtZXRlcnMgLSBUaGUgb3B0aW9uYWwgcmVDQVBUQ0hBIHBhcmFtZXRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIENoZWNrIHRoZSByZUNBUFRDSEEgZG9jcyBmb3IgYSBjb21wcmVoZW5zaXZlIGxpc3QuIEFsbCBwYXJhbWV0ZXJzIGFyZSBhY2NlcHRlZCBleGNlcHQgZm9yXHJcbiAgICAgKiB0aGUgc2l0ZWtleS4gRmlyZWJhc2UgQXV0aCBiYWNrZW5kIHByb3Zpc2lvbnMgYSByZUNBUFRDSEEgZm9yIGVhY2ggcHJvamVjdCBhbmQgd2lsbFxyXG4gICAgICogY29uZmlndXJlIHRoaXMgdXBvbiByZW5kZXJpbmcuIEZvciBhbiBpbnZpc2libGUgcmVDQVBUQ0hBLCBhIHNpemUga2V5IG11c3QgaGF2ZSB0aGUgdmFsdWVcclxuICAgICAqICdpbnZpc2libGUnLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoRXh0ZXJuIC0gVGhlIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBJZiBub25lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgaXMgdXNlZC4gQSBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2VcclxuICAgICAqIG11c3QgYmUgaW5pdGlhbGl6ZWQgd2l0aCBhbiBBUEkga2V5LCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIHBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1BBUkFNUyksIGF1dGhFeHRlcm4pIHtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhcHBsaWNhdGlvbiB2ZXJpZmllciB0eXBlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJlbWFya3NcclxuICAgICAgICAgKiBGb3IgYSByZUNBUFRDSEEgdmVyaWZpZXIsIHRoaXMgaXMgJ3JlY2FwdGNoYScuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEU7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndpZGdldElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICB0aGlzLmlzSW52aXNpYmxlID0gdGhpcy5wYXJhbWV0ZXJzLnNpemUgPT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrID0gdGhpcy5tYWtlVG9rZW5DYWxsYmFjayh0aGlzLnBhcmFtZXRlcnMuY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMuX3JlY2FwdGNoYUxvYWRlciA9IHRoaXMuYXV0aC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmdcclxuICAgICAgICAgICAgPyBuZXcgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwoKVxyXG4gICAgICAgICAgICA6IG5ldyBSZUNhcHRjaGFMb2FkZXJJbXBsKCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKTtcclxuICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGlmIHNkayB2ZXJzaW9uIGlzIG5lZWRlZFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyBmb3IgdGhlIHVzZXIgdG8gc29sdmUgdGhlIHJlQ0FQVENIQSBhbmQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVDQVBUQ0hBIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdmVyaWZ5KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBhd2FpdCB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIGNvbnN0IHJlY2FwdGNoYSA9IHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlY2FwdGNoYS5nZXRSZXNwb25zZShpZCk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbkNoYW5nZSA9ICh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIHRva2VuIGV4cGlyYXRpb25zLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycy5kZWxldGUodG9rZW5DaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuYWRkKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5leGVjdXRlKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IG9uIHRoZSBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB3aWRnZXQgSUQuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZS4gU2luY2UgaXQncyBub3QgYXN5bmMgKHdlIHdhbnQgdG8gcmV0dXJuIHRoZVxyXG4gICAgICAgICAgICAvLyBfc2FtZV8gcHJvbWlzZSBpZiByZW5kZXJpbmcgaXMgc3RpbGwgb2NjdXJyaW5nKSwgdGhlIEFQSSBzdXJmYWNlIHNob3VsZFxyXG4gICAgICAgICAgICAvLyByZWplY3Qgd2l0aCB0aGUgZXJyb3IgcmF0aGVyIHRoYW4ganVzdCB0aHJvd1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlclByb21pc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gdGhpcy5tYWtlUmVuZGVyUHJvbWlzZSgpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy53aWRnZXRJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCkucmVzZXQodGhpcy53aWRnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIHJlQ0FQVENIQSB3aWRnZXQgZnJvbSB0aGUgcGFnZSBhbmQgZGVzdHJveXMgdGhlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIuY2xlYXJlZE9uZUluc3RhbmNlKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXksIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuaXNJbnZpc2libGUgfHwgIXRoaXMuY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBtYWtlVG9rZW5DYWxsYmFjayhleGlzdGluZykge1xyXG4gICAgICAgIHJldHVybiB0b2tlbiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih0b2tlbikpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZyh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsRnVuYyA9IF93aW5kb3coKVtleGlzdGluZ107XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbEZ1bmMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxGdW5jKHRva2VuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3NlcnROb3REZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5kZXN0cm95ZWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VSZW5kZXJQcm9taXNlKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIGlmICghdGhpcy53aWRnZXRJZCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3VhcmFudGVlZEVtcHR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmFudGVlZEVtcHR5KTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGd1YXJhbnRlZWRFbXB0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLndpZGdldElkID0gdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlbmRlcihjb250YWluZXIsIHRoaXMucGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldElkO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBfYXNzZXJ0KF9pc0h0dHBPckh0dHBzKCkgJiYgIV9pc1dvcmtlcigpLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgZG9tUmVhZHkoKTtcclxuICAgICAgICB0aGlzLnJlY2FwdGNoYSA9IGF3YWl0IHRoaXMuX3JlY2FwdGNoYUxvYWRlci5sb2FkKHRoaXMuYXV0aCwgdGhpcy5hdXRoLmxhbmd1YWdlQ29kZSB8fCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IHNpdGVLZXkgPSBhd2FpdCBnZXRSZWNhcHRjaGFQYXJhbXModGhpcy5hdXRoKTtcclxuICAgICAgICBfYXNzZXJ0KHNpdGVLZXksIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2l0ZWtleSA9IHNpdGVLZXk7XHJcbiAgICB9XHJcbiAgICBnZXRBc3NlcnRlZFJlY2FwdGNoYSgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMucmVjYXB0Y2hhLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjYXB0Y2hhO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvbVJlYWR5KCkge1xyXG4gICAgbGV0IHJlc29sdmVyID0gbnVsbDtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG9jdW1lbnQgbm90IHJlYWR5LCB3YWl0IGZvciBsb2FkIGJlZm9yZSByZXNvbHZpbmcuXHJcbiAgICAgICAgLy8gU2F2ZSByZXNvbHZlciwgc28gd2UgY2FuIHJlbW92ZSBsaXN0ZW5lciBpbiBjYXNlIGl0IHdhcyBleHRlcm5hbGx5XHJcbiAgICAgICAgLy8gY2FuY2VsbGVkLlxyXG4gICAgICAgIHJlc29sdmVyID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJpZmljYXRpb25JZCwgb25Db25maXJtYXRpb24pIHtcclxuICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbklkID0gdmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm1hdGlvbiA9IG9uQ29uZmlybWF0aW9uO1xyXG4gICAgfVxyXG4gICAgY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHRoaXMudmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29uZmlybWF0aW9uKGF1dGhDcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgY29kZSB2aWEgU01TIHRvIHRoZSBnaXZlblxyXG4gKiBwaG9uZSBudW1iZXIsIGFuZCByZXR1cm5zIGEge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdH0uIEFmdGVyIHRoZSB1c2VyXHJcbiAqIHByb3ZpZGVzIHRoZSBjb2RlIHNlbnQgdG8gdGhlaXIgcGhvbmUsIGNhbGwge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtfVxyXG4gKiB3aXRoIHRoZSBjb2RlIHRvIHNpZ24gdGhlIHVzZXIgaW4uXHJcbiAqXHJcbiAqIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGEge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbiwge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICogVGhpcyBmdW5jdGlvbiBjYW4gd29yayBvbiBvdGhlciBwbGF0Zm9ybXMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGVcclxuICoge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfSAobGlrZSBSZWFjdCBOYXRpdmUpLCBidXQgeW91IG5lZWQgdG8gdXNlIGFcclxuICogdGhpcmQtcGFydHkge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9IGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IGZpcmViYXNlLmF1dGguUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIGEgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcihhdXRoSW50ZXJuYWwsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoSW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHVzZXIgYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyKHVzZXIsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBcInBob25lXCIgLyogUEhPTkUgKi8pO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIodXNlckludGVybmFsLmF1dGgsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiBsaW5rV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlLWF1dGhlbnRpY2F0ZXMgYSB1c2VyIHVzaW5nIGEgZnJlc2ggcGhvbmUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHJlbWFya3MgVXNlIGJlZm9yZSBvcGVyYXRpb25zIHN1Y2ggYXMge0BsaW5rIHVwZGF0ZVBhc3N3b3JkfSB0aGF0IHJlcXVpcmUgdG9rZW5zIGZyb20gcmVjZW50IHNpZ24taW4gYXR0ZW1wdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKHVzZXJJbnRlcm5hbC5hdXRoLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VySW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIHZlcmlmaWNhdGlvbiBJRCB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIFNNUyBjb2RlIHRoYXQgaXMgc2VudC5cclxuICpcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF92ZXJpZnlQaG9uZU51bWJlcihhdXRoLCBvcHRpb25zLCB2ZXJpZmllcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgcmVjYXB0Y2hhVG9rZW4gPSBhd2FpdCB2ZXJpZmllci52ZXJpZnkoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVjYXB0Y2hhVG9rZW4gPT09ICdzdHJpbmcnLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodmVyaWZpZXIudHlwZSA9PT0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUsIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgbGV0IHBob25lSW5mb09wdGlvbnM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG9wdGlvbnNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJ3Nlc3Npb24nIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHBob25lSW5mb09wdGlvbnMuc2Vzc2lvbjtcclxuICAgICAgICAgICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcGhvbmVJbmZvT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwiZW5yb2xsXCIgLyogRU5ST0xMICovLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydEVucm9sbFBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuOiBzZXNzaW9uLmNyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVFbnJvbGxtZW50SW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVNlc3Npb25JbmZvLnNlc3Npb25JbmZvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwic2lnbmluXCIgLyogU0lHTl9JTiAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9ICgoX2EgPSBwaG9uZUluZm9PcHRpb25zLm11bHRpRmFjdG9ySGludCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zLm11bHRpRmFjdG9yVWlkO1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChtZmFFbnJvbGxtZW50SWQsIGF1dGgsIFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbDogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZVNpZ25JbkluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVJlc3BvbnNlSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzZXNzaW9uSW5mbyB9ID0gYXdhaXQgc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvbkluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdmVyaWZpZXIuX3Jlc2V0KCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBSZWNhcHRjaGFWZXJpZmllcigncmVjYXB0Y2hhLWNvbnRhaW5lcicpO1xyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcignKzE2NTA1NTUwMTAxJywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiB0aGUgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBwaG9uZUNyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICogYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gQSBjcmVkZW50aWFsIGF1dGhlbnRpY2F0aW5nIHRoZSBuZXcgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQaG9uZU51bWJlcih1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICBhd2FpdCBfbGluayQxKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBQaG9uZUF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBSZWNhcHRjaGFWZXJpZmllcigncmVjYXB0Y2hhLWNvbnRhaW5lcicpO1xyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcignKzE2NTA1NTUwMTAxJywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiB0aGUgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBwaG9uZUNyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBwaG9uZUNyZWRlbnRpYWwpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYXV0aCAtIFRoZSBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgaW4gd2hpY2ggc2lnbi1pbnMgc2hvdWxkIG9jY3VyLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIC8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QSE9ORS4gKi9cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBQaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcclxuICAgICAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBTdGFydHMgYSBwaG9uZSBudW1iZXIgYXV0aGVudGljYXRpb24gZmxvdyBieSBzZW5kaW5nIGEgdmVyaWZpY2F0aW9uIGNvZGUgdG8gdGhlIGdpdmVuIHBob25lXHJcbiAgICAgKiBudW1iZXIuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwaG9uZUluZm9PcHRpb25zIC0gVGhlIHVzZXIncyB7QGxpbmsgUGhvbmVJbmZvT3B0aW9uc30uIFRoZSBwaG9uZSBudW1iZXIgc2hvdWxkIGJlIGluXHJcbiAgICAgKiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICAgICAqIEBwYXJhbSBhcHBsaWNhdGlvblZlcmlmaWVyIC0gRm9yIGFidXNlIHByZXZlbnRpb24sIHRoaXMgbWV0aG9kIGFsc28gcmVxdWlyZXMgYVxyXG4gICAgICoge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbixcclxuICAgICAqIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciBhIHZlcmlmaWNhdGlvbiBJRCB0aGF0IGNhbiBiZSBwYXNzZWQgdG9cclxuICAgICAqIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsfSB0byBpZGVudGlmeSB0aGlzIGZsb3cuLlxyXG4gICAgICovXHJcbiAgICB2ZXJpZnlQaG9uZU51bWJlcihwaG9uZU9wdGlvbnMsIGFwcGxpY2F0aW9uVmVyaWZpZXIpIHtcclxuICAgICAgICByZXR1cm4gX3ZlcmlmeVBob25lTnVtYmVyKHRoaXMuYXV0aCwgcGhvbmVPcHRpb25zLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcGhvbmUgYXV0aCBjcmVkZW50aWFsLCBnaXZlbiB0aGUgdmVyaWZpY2F0aW9uIElEIGZyb21cclxuICAgICAqIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcn0gYW5kIHRoZSBjb2RlIHRoYXQgd2FzIHNlbnQgdG8gdGhlIHVzZXInc1xyXG4gICAgICogbW9iaWxlIGRldmljZS5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgZmxvdyBpcyBwcm92aWRlZCB1c2luZyB0aGUgYHNpZ25JbldpdGhQaG9uZU51bWJlcmAgbWV0aG9kLlxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbklkIC0gVGhlIHZlcmlmaWNhdGlvbiBJRCByZXR1cm5lZCBmcm9tIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcn0uXHJcbiAgICAgKiBAcGFyYW0gdmVyaWZpY2F0aW9uQ29kZSAtIFRoZSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyJ3MgbW9iaWxlIGRldmljZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gdXNlckNyZWRlbnRpYWw7XHJcbiAgICAgICAgcmV0dXJuIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gd2hlbiBwYXNzZWQgYW4gZXJyb3IuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3b3JrcyBmb3IgZXJyb3JzIGxpa2VcclxuICAgICAqIGBhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxzYC4gVGhpcyBpcyB1c2VmdWwgZm9yXHJcbiAgICAgKiByZWNvdmVyaW5nIHdoZW4gYXR0ZW1wdGluZyB0byBzZXQgYSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGJ1dCB0aGUgbnVtYmVyXHJcbiAgICAgKiBpbiBxdWVzdGlvbiBpcyBhbHJlYWR5IHRpZWQgdG8gYW5vdGhlciBhY2NvdW50LiBGb3IgZXhhbXBsZSwgdGhlIGZvbGxvd2luZ1xyXG4gICAgICogY29kZSB0cmllcyB0byB1cGRhdGUgdGhlIGN1cnJlbnQgdXNlcidzIHBob25lIG51bWJlciwgYW5kIGlmIHRoYXRcclxuICAgICAqIGZhaWxzLCBsaW5rcyB0aGUgdXNlciB3aXRoIHRoZSBhY2NvdW50IGFzc29jaWF0ZWQgd2l0aCB0aGF0IG51bWJlcjpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKG51bWJlciwgdmVyaWZpZXIpO1xyXG4gICAgICogdHJ5IHtcclxuICAgICAqICAgY29uc3QgY29kZSA9ICcnOyAvLyBQcm9tcHQgdGhlIHVzZXIgZm9yIHRoZSB2ZXJpZmljYXRpb24gY29kZVxyXG4gICAgICogICBhd2FpdCB1cGRhdGVQaG9uZU51bWJlcihcclxuICAgICAqICAgICAgIGF1dGguY3VycmVudFVzZXIsXHJcbiAgICAgKiAgICAgICBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCBjb2RlKSk7XHJcbiAgICAgKiB9IGNhdGNoIChlKSB7XHJcbiAgICAgKiAgIGlmIChlLmNvZGUgPT09ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnKSB7XHJcbiAgICAgKiAgICAgY29uc3QgY3JlZCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tRXJyb3IoZSk7XHJcbiAgICAgKiAgICAgYXdhaXQgbGlua1dpdGhDcmVkZW50aWFsKGF1dGguY3VycmVudFVzZXIsIGNyZWQpO1xyXG4gICAgICogICB9XHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogLy8gQXQgdGhpcyBwb2ludCwgYXV0aC5jdXJyZW50VXNlci5waG9uZU51bWJlciA9PT0gbnVtYmVyLlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIGVycm9yIHRvIGdlbmVyYXRlIGEgY3JlZGVudGlhbCBmcm9tLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKHBob25lTnVtYmVyICYmIHRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJwaG9uZVwiIC8qIFBIT05FICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5QSE9ORS4gKi9cclxuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0QgPSBcInBob25lXCIgLyogUEhPTkUgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaG9vc2VzIGEgcG9wdXAvcmVkaXJlY3QgcmVzb2x2ZXIgdG8gdXNlLiBUaGlzIHByZWZlcnMgdGhlIG92ZXJyaWRlICh3aGljaFxyXG4gKiBpcyBkaXJlY3RseSBwYXNzZWQgaW4pLCBhbmQgZmFsbHMgYmFjayB0byB0aGUgcHJvcGVydHkgc2V0IG9uIHRoZSBhdXRoXHJcbiAqIG9iamVjdC4gSWYgbmVpdGhlciBhcmUgYXZhaWxhYmxlLCB0aGlzIGZ1bmN0aW9uIGVycm9ycyB3LyBhbiBhcmd1bWVudCBlcnJvci5cclxuICovXHJcbmZ1bmN0aW9uIF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGgsIHJlc29sdmVyT3ZlcnJpZGUpIHtcclxuICAgIGlmIChyZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9nZXRJbnN0YW5jZShyZXNvbHZlck92ZXJyaWRlKTtcclxuICAgIH1cclxuICAgIF9hc3NlcnQoYXV0aC5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBJZHBDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoXCJjdXN0b21cIiAvKiBDVVNUT00gKi8sIFwiY3VzdG9tXCIgLyogQ1VTVE9NICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikpO1xyXG4gICAgfVxyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgX2J1aWxkSWRwUmVxdWVzdChpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdGhpcy5wYXJhbXMucmVxdWVzdFVyaSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnBhcmFtcy5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHBvc3RCb2R5OiB0aGlzLnBhcmFtcy5wb3N0Qm9keSxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMucGFyYW1zLnRlbmFudElkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGFyYW1zLnBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIHJldHVybklkcENyZWRlbnRpYWw6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChpZFRva2VuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9zaWduSW4ocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKHBhcmFtcy5hdXRoLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5mdW5jdGlvbiBfcmVhdXRoKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKHVzZXIsIG5ldyBJZHBDcmVkZW50aWFsKHBhcmFtcyksIHBhcmFtcy5ieXBhc3NBdXRoU3RhdGUpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gX2xpbmskMSh1c2VyLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUG9wdXAgZXZlbnQgbWFuYWdlci4gSGFuZGxlcyB0aGUgcG9wdXAncyBlbnRpcmUgbGlmZWN5Y2xlOyBsaXN0ZW5zIHRvIGF1dGhcclxuICogZXZlbnRzXHJcbiAqL1xyXG5jbGFzcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZmlsdGVyLCByZXNvbHZlciwgdXNlciwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuYnlwYXNzQXV0aFN0YXRlID0gYnlwYXNzQXV0aFN0YXRlO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZpbHRlciA9IEFycmF5LmlzQXJyYXkoZmlsdGVyKSA/IGZpbHRlciA6IFtmaWx0ZXJdO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0geyByZXNvbHZlLCByZWplY3QgfTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gYXdhaXQgdGhpcy5yZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkV4ZWN1dGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIucmVnaXN0ZXJDb25zdW1lcih0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB1cmxSZXNwb25zZSwgc2Vzc2lvbklkLCBwb3N0Qm9keSwgdGVuYW50SWQsIGVycm9yLCB0eXBlIH0gPSBldmVudDtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgYXV0aDogdGhpcy5hdXRoLFxyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiB1cmxSZXNwb25zZSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0ZW5hbnRJZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHBvc3RCb2R5OiBwb3N0Qm9keSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHVzZXI6IHRoaXMudXNlcixcclxuICAgICAgICAgICAgYnlwYXNzQXV0aFN0YXRlOiB0aGlzLmJ5cGFzc0F1dGhTdGF0ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKGF3YWl0IHRoaXMuZ2V0SWRwVGFzayh0eXBlKShwYXJhbXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgIH1cclxuICAgIGdldElkcFRhc2sodHlwZSkge1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic2lnbkluVmlhUG9wdXBcIiAvKiBTSUdOX0lOX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3NpZ25JbjtcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFQb3B1cFwiIC8qIExJTktfVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xpbms7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIFJFQVVUSF9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlYXV0aDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIF9mYWlsKHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNvbHZlKGNyZWQpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLnBlbmRpbmdQcm9taXNlLCAnUGVuZGluZyBwcm9taXNlIHdhcyBuZXZlciBzZXQnKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlLnJlc29sdmUoY3JlZCk7XHJcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpO1xyXG4gICAgfVxyXG4gICAgcmVqZWN0KGVycm9yKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXJBbmRDbGVhblVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50TWFuYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlci51bnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2xlYW5VcCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VUID0gbmV3IERlbGF5KDIwMDAsIDEwMDAwKTtcclxuLyoqXHJcbiAqIEF1dGhlbnRpY2F0ZXMgYSBGaXJlYmFzZSBjbGllbnQgdXNpbmcgYSBwb3B1cC1iYXNlZCBPQXV0aCBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBzdWNjZWVkcywgcmV0dXJucyB0aGUgc2lnbmVkIGluIHVzZXIgYWxvbmcgd2l0aCB0aGUgcHJvdmlkZXIncyBjcmVkZW50aWFsLiBJZiBzaWduIGluIHdhc1xyXG4gKiB1bnN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gZXJyb3Igb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbihhdXRoSW50ZXJuYWwsIFwic2lnbkluVmlhUG9wdXBcIiAvKiBTSUdOX0lOX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgcG9wLXVwIGJhc2VkXHJcbiAqIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSByZWF1dGhlbnRpY2F0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGVcclxuICogcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gUmVhdXRoZW50aWNhdGUgdXNpbmcgYSBwb3B1cC5cclxuICogYXdhaXQgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIFJFQVVUSF9WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgYXV0aGVudGljYXRlZCBwcm92aWRlciB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgcG9wLXVwIGJhc2VkIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSBsaW5raW5nIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGUgcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgc29tZSBvdGhlciBwcm92aWRlci5cclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuICogLy8gTGluayB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBhd2FpdCBsaW5rV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJsaW5rVmlhUG9wdXBcIiAvKiBMSU5LX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKlxyXG4gKi9cclxuY2xhc3MgUG9wdXBPcGVyYXRpb24gZXh0ZW5kcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZmlsdGVyLCBwcm92aWRlciwgcmVzb2x2ZXIsIHVzZXIpIHtcclxuICAgICAgICBzdXBlcihhdXRoLCBmaWx0ZXIsIHJlc29sdmVyLCB1c2VyKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgaWYgKFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbikge1xyXG4gICAgICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24uY2FuY2VsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlTm90TnVsbCgpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICBfYXNzZXJ0KHJlc3VsdCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkV4ZWN1dGlvbigpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLmZpbHRlci5sZW5ndGggPT09IDEsICdQb3B1cCBvcGVyYXRpb25zIG9ubHkgaGFuZGxlIG9uZSBldmVudCcpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gYXdhaXQgdGhpcy5yZXNvbHZlci5fb3BlblBvcHVwKHRoaXMuYXV0aCwgdGhpcy5wcm92aWRlciwgdGhpcy5maWx0ZXJbMF0sIC8vIFRoZXJlJ3MgYWx3YXlzIG9uZSwgc2VlIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgZXZlbnRJZCk7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93LmFzc29jaWF0ZWRFdmVudCA9IGV2ZW50SWQ7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHdlYiBzdG9yYWdlIHN1cHBvcnQgYW5kIG9yaWdpbiB2YWxpZGF0aW9uIF9hZnRlcl8gdGhlIHBvcHVwIGlzXHJcbiAgICAgICAgLy8gbG9hZGVkLiBUaGVzZSBvcGVyYXRpb25zIGFyZSBzbG93ICh+MSBzZWNvbmQgb3Igc28pIFJhdGhlciB0aGFuXHJcbiAgICAgICAgLy8gd2FpdGluZyBvbiB0aGVtIGJlZm9yZSBvcGVuaW5nIHRoZSB3aW5kb3csIG9wdGltaXN0aWNhbGx5IG9wZW4gdGhlIHBvcHVwXHJcbiAgICAgICAgLy8gYW5kIGNoZWNrIGZvciBzdG9yYWdlIHN1cHBvcnQgYXQgdGhlIHNhbWUgdGltZS4gSWYgc3RvcmFnZSBzdXBwb3J0IGlzXHJcbiAgICAgICAgLy8gbm90IGF2YWlsYWJsZSwgdGhpcyB3aWxsIGNhdXNlIHRoZSB3aG9sZSB0aGluZyB0byByZWplY3QgcHJvcGVybHkuIEl0XHJcbiAgICAgICAgLy8gd2lsbCBhbHNvIGNsb3NlIHRoZSBwb3B1cCwgYnV0IHNpbmNlIHRoZSBwcm9taXNlIGhhcyBhbHJlYWR5IHJlamVjdGVkLFxyXG4gICAgICAgIC8vIHRoZSBwb3B1cCBjbG9zZWQgYnkgdXNlciBwb2xsIHdpbGwgcmVqZWN0IGludG8gdGhlIHZvaWQuXHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5fb3JpZ2luVmFsaWRhdGlvbih0aGlzLmF1dGgpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlc29sdmVyLl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQodGhpcy5hdXRoLCBpc1N1cHBvcnRlZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaXNTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqLykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGFuZGxlIHVzZXIgY2xvc3VyZS4gTm90aWNlIHRoaXMgZG9lcyAqbm90KiB1c2UgYXdhaXRcclxuICAgICAgICB0aGlzLnBvbGxVc2VyQ2FuY2VsbGF0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgZXZlbnRJZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmF1dGhXaW5kb3cpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hc3NvY2lhdGVkRXZlbnQpIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEVYUElSRURfUE9QVVBfUkVRVUVTVCAqLykpO1xyXG4gICAgfVxyXG4gICAgY2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRoV2luZG93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFdpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb2xsSWQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnBvbGxJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBwb2xsVXNlckNhbmNlbGxhdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwb2xsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAoKF9iID0gKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud2luZG93KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGVyZSBpcyBzdWZmaWNpZW50IHRpbWUgZm9yIHdoYXRldmVyIGFjdGlvbiB0b1xyXG4gICAgICAgICAgICAgICAgLy8gY29tcGxldGUuIFRoZSB3aW5kb3cgY291bGQgaGF2ZSBjbG9zZWQgYnV0IHRoZSBzaWduIGluIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGwgY291bGQgc3RpbGwgYmUgaW4gZmxpZ2h0LlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIiAvKiBQT1BVUF9DTE9TRURfQllfVVNFUiAqLykpO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCAvKiBBVVRIX0VWRU5UICovKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBvbGxJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KHBvbGwsIF9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VULmdldCgpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBvbGwoKTtcclxuICAgIH1cclxufVxyXG4vLyBPbmx5IG9uZSBwb3B1cCBpcyBldmVyIHNob3duIGF0IG9uY2UuIFRoZSBsaWZlY3ljbGUgb2YgdGhlIGN1cnJlbnQgcG9wdXBcclxuLy8gY2FuIGJlIG1hbmFnZWQgLyBjYW5jZWxsZWQgYnkgdGhlIGNvbnN0cnVjdG9yLlxyXG5Qb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSBudWxsO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQRU5ESU5HX1JFRElSRUNUX0tFWSA9ICdwZW5kaW5nUmVkaXJlY3QnO1xyXG4vLyBXZSBvbmx5IGdldCBvbmUgcmVkaXJlY3Qgb3V0Y29tZSBmb3IgYW55IG9uZSBhdXRoLCBzbyBqdXN0IHN0b3JlIGl0XHJcbi8vIGluIGhlcmUuXHJcbmNvbnN0IHJlZGlyZWN0T3V0Y29tZU1hcCA9IG5ldyBNYXAoKTtcclxuY2xhc3MgUmVkaXJlY3RBY3Rpb24gZXh0ZW5kcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgcmVzb2x2ZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoYXV0aCwgW1xyXG4gICAgICAgICAgICBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcInVua25vd25cIiAvKiBVTktOT1dOICovXHJcbiAgICAgICAgXSwgcmVzb2x2ZXIsIHVuZGVmaW5lZCwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgICAgICB0aGlzLmV2ZW50SWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVycmlkZSB0aGUgZXhlY3V0ZSBmdW5jdGlvbjsgaWYgd2UgYWxyZWFkeSBoYXZlIGEgcmVkaXJlY3QgcmVzdWx0LCB0aGVuXHJcbiAgICAgKiBqdXN0IHJldHVybiBpdC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZXhlY3V0ZSgpIHtcclxuICAgICAgICBsZXQgcmVhZHlPdXRjb21lID0gcmVkaXJlY3RPdXRjb21lTWFwLmdldCh0aGlzLmF1dGguX2tleSgpKTtcclxuICAgICAgICBpZiAoIXJlYWR5T3V0Y29tZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gYXdhaXQgX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHRoaXMucmVzb2x2ZXIsIHRoaXMuYXV0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBoYXNQZW5kaW5nUmVkaXJlY3QgPyBhd2FpdCBzdXBlci5leGVjdXRlKCkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVhZHlPdXRjb21lID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgcmVhZHlPdXRjb21lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UncmUgbm90IGJ5cGFzc2luZyBhdXRoIHN0YXRlLCB0aGUgcmVhZHkgb3V0Y29tZSBzaG91bGQgYmUgc2V0IHRvXHJcbiAgICAgICAgLy8gbnVsbC5cclxuICAgICAgICBpZiAoIXRoaXMuYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlYWR5T3V0Y29tZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25BdXRoRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IFwidW5rbm93blwiIC8qIFVOS05PV04gKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNlbnRpbmVsIHZhbHVlIGluZGljYXRpbmcgdGhlcmUncyBubyBwZW5kaW5nIHJlZGlyZWN0XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnQuZXZlbnRJZCkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hdXRoLl9yZWRpcmVjdFVzZXJGb3JJZChldmVudC5ldmVudElkKTtcclxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7IH1cclxuICAgIGNsZWFuVXAoKSB7IH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QW5kQ2xlYXJQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXIsIGF1dGgpIHtcclxuICAgIGNvbnN0IGtleSA9IHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKTtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcik7XHJcbiAgICBpZiAoIShhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBoYXNQZW5kaW5nUmVkaXJlY3QgPSAoYXdhaXQgcGVyc2lzdGVuY2UuX2dldChrZXkpKSA9PT0gJ3RydWUnO1xyXG4gICAgYXdhaXQgcGVyc2lzdGVuY2UuX3JlbW92ZShrZXkpO1xyXG4gICAgcmV0dXJuIGhhc1BlbmRpbmdSZWRpcmVjdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikuX3NldChwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCksICd0cnVlJyk7XHJcbn1cclxuZnVuY3Rpb24gX2NsZWFyUmVkaXJlY3RPdXRjb21lcygpIHtcclxuICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5jbGVhcigpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKSB7XHJcbiAgICByZXR1cm4gX3BlcnNpc3RlbmNlS2V5TmFtZShQRU5ESU5HX1JFRElSRUNUX0tFWSwgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGhhbmRsZSB0aGUgcmVzdWx0cyBhbmQgZXJyb3JzIGZvciB0aGlzIG9wZXJhdGlvbiwgcmVmZXIgdG8ge0BsaW5rIGdldFJlZGlyZWN0UmVzdWx0fS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgc2NvcGVzIHRvIHRoZSBwcm92aWRlcjpcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiAvLyBBcyB0aGlzIEFQSSBjYW4gYmUgdXNlZCBmb3Igc2lnbi1pbiwgbGlua2luZyBhbmQgcmVhdXRoZW50aWNhdGlvbixcclxuICogLy8gY2hlY2sgdGhlIG9wZXJhdGlvblR5cGUgdG8gZGV0ZXJtaW5lIHdoYXQgdHJpZ2dlcmVkIHRoaXMgcmVkaXJlY3RcclxuICogLy8gb3BlcmF0aW9uLlxyXG4gKiBjb25zdCBvcGVyYXRpb25UeXBlID0gcmVzdWx0Lm9wZXJhdGlvblR5cGU7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIGF1dGhJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KGF1dGhJbnRlcm5hbCwgcHJvdmlkZXIsIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLyk7XHJcbn1cclxuLyoqXHJcbiAqIFJlYXV0aGVudGljYXRlcyB0aGUgY3VycmVudCB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCB7QGxpbmsgT0F1dGhQcm92aWRlcn0gdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIGFnYWluIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIC8vIEFsbG93IHRoZSByZXNvbHZlciB0byBlcnJvciBiZWZvcmUgcGVyc2lzdGluZyB0aGUgcmVkaXJlY3QgdXNlclxyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbC5hdXRoKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHRvIHRoZSB1c2VyIGFjY291bnQgdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhSZWRpcmVjdChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgLy8gQWxsb3cgdGhlIHJlc29sdmVyIHRvIGVycm9yIGJlZm9yZSBwZXJzaXN0aW5nIHRoZSByZWRpcmVjdCB1c2VyXHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgcHJvdmlkZXIucHJvdmlkZXJJZCk7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbC5hdXRoKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLywgZXZlbnRJZCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGZyb20gdGhlIHJlZGlyZWN0LWJhc2VkIHNpZ24taW4gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc2lnbi1pbiBzdWNjZWVkZWQsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyLiBJZiBzaWduLWluIHdhcyB1bnN1Y2Nlc3NmdWwsIGZhaWxzIHdpdGggYW5cclxuICogZXJyb3IuIElmIG5vIHJlZGlyZWN0IG9wZXJhdGlvbiB3YXMgY2FsbGVkLCByZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfVxyXG4gKiB3aXRoIGEgbnVsbCBgdXNlcmAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIpIHtcclxuICAgIGF3YWl0IF9jYXN0QXV0aChhdXRoKS5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlciwgZmFsc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlckV4dGVybiwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc29sdmVyID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUmVkaXJlY3RBY3Rpb24oYXV0aEludGVybmFsLCByZXNvbHZlciwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICBpZiAocmVzdWx0ICYmICFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBkZWxldGUgcmVzdWx0LnVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3BlcnNpc3RVc2VySWZDdXJyZW50KHJlc3VsdC51c2VyKTtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3NldFJlZGlyZWN0VXNlcihudWxsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlcikge1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoYCR7dXNlci51aWR9Ojo6YCk7XHJcbiAgICB1c2VyLl9yZWRpcmVjdEV2ZW50SWQgPSBldmVudElkO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9zZXRSZWRpcmVjdFVzZXIodXNlcik7XHJcbiAgICBhd2FpdCB1c2VyLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpO1xyXG4gICAgcmV0dXJuIGV2ZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIGFtb3VudCBvZiB0aW1lIHRvIHN0b3JlIHRoZSBVSURzIG9mIHNlZW4gZXZlbnRzOyB0aGlzIGlzXHJcbi8vIHNldCB0byAxMCBtaW4gYnkgZGVmYXVsdFxyXG5jb25zdCBFVkVOVF9EVVBMSUNBVElPTl9DQUNIRV9EVVJBVElPTl9NUyA9IDEwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJDb25zdW1lcihhdXRoRXZlbnRDb25zdW1lcikge1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmFkZChhdXRoRXZlbnRDb25zdW1lcik7XHJcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzRXZlbnRGb3JDb25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCwgYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5kZWxldGUoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgfVxyXG4gICAgb25FdmVudChldmVudCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWRcclxuICAgICAgICBpZiAodGhpcy5oYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBoYW5kbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZm9yRWFjaChjb25zdW1lciA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUV2ZW50VG9DYWNoZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgfHwgIWlzUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBzZWVuIGEgcmVkaXJlY3QgYmVmb3JlLCBvciB0aGlzIGlzIGEgcG9wdXAgZXZlbnQsXHJcbiAgICAgICAgICAgIC8vIGJhaWwgbm93XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCA9IHRydWU7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHdhc24ndCBoYW5kbGVkLCBoYW5nIG9uIHRvIGl0XHJcbiAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICB9XHJcbiAgICBzZW5kVG9Db25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKGV2ZW50LmVycm9yICYmICFpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gKChfYSA9IGV2ZW50LmVycm9yLmNvZGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGxpdCgnYXV0aC8nKVsxXSkgfHxcclxuICAgICAgICAgICAgICAgIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLztcclxuICAgICAgICAgICAgY29uc3VtZXIub25FcnJvcihfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBjb2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdW1lci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNFdmVudEZvckNvbnN1bWVyKGV2ZW50LCBjb25zdW1lcikge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWRNYXRjaGVzID0gY29uc3VtZXIuZXZlbnRJZCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAoISFldmVudC5ldmVudElkICYmIGV2ZW50LmV2ZW50SWQgPT09IGNvbnN1bWVyLmV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBjb25zdW1lci5maWx0ZXIuaW5jbHVkZXMoZXZlbnQudHlwZSkgJiYgZXZlbnRJZE1hdGNoZXM7XHJcbiAgICB9XHJcbiAgICBoYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPj1cclxuICAgICAgICAgICAgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmhhcyhldmVudFVpZChldmVudCkpO1xyXG4gICAgfVxyXG4gICAgc2F2ZUV2ZW50VG9DYWNoZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmFkZChldmVudFVpZChldmVudCkpO1xyXG4gICAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXZlbnRVaWQoZSkge1xyXG4gICAgcmV0dXJuIFtlLnR5cGUsIGUuZXZlbnRJZCwgZS5zZXNzaW9uSWQsIGUudGVuYW50SWRdLmZpbHRlcih2ID0+IHYpLmpvaW4oJy0nKTtcclxufVxyXG5mdW5jdGlvbiBpc051bGxSZWRpcmVjdEV2ZW50KHsgdHlwZSwgZXJyb3IgfSkge1xyXG4gICAgcmV0dXJuICh0eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovICYmXHJcbiAgICAgICAgKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5jb2RlKSA9PT0gYGF1dGgvJHtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovfWApO1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVkaXJlY3RFdmVudChldmVudCkge1xyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIGlzTnVsbFJlZGlyZWN0RXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UHJvamVjdENvbmZpZyhhdXRoLCByZXF1ZXN0ID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBHRVQgKi8sIFwiL3YxL3Byb2plY3RzXCIgLyogR0VUX1BST0pFQ1RfQ09ORklHICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJUF9BRERSRVNTX1JFR0VYID0gL15cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfSQvO1xyXG5jb25zdCBIVFRQX1JFR0VYID0gL15odHRwcz8vO1xyXG5hc3luYyBmdW5jdGlvbiBfdmFsaWRhdGVPcmlnaW4oYXV0aCkge1xyXG4gICAgLy8gU2tpcCBvcmlnaW4gdmFsaWRhdGlvbiBpZiB3ZSBhcmUgaW4gYW4gZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICAgIGlmIChhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgYXV0aG9yaXplZERvbWFpbnMgfSA9IGF3YWl0IF9nZXRQcm9qZWN0Q29uZmlnKGF1dGgpO1xyXG4gICAgZm9yIChjb25zdCBkb21haW4gb2YgYXV0aG9yaXplZERvbWFpbnMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hEb21haW4oZG9tYWluKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZXJlJ3MgYSBVUkwgZXJyb3I7IGp1c3QgY29udGludWUgc2VhcmNoaW5nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gSW4gdGhlIG9sZCBTREssIHRoaXMgZXJyb3IgYWxzbyBwcm92aWRlcyBoZWxwZnVsIG1lc3NhZ2VzLlxyXG4gICAgX2ZhaWwoYXV0aCwgXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogSU5WQUxJRF9PUklHSU4gKi8pO1xyXG59XHJcbmZ1bmN0aW9uIG1hdGNoRG9tYWluKGV4cGVjdGVkKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXJsID0gX2dldEN1cnJlbnRVcmwoKTtcclxuICAgIGNvbnN0IHsgcHJvdG9jb2wsIGhvc3RuYW1lIH0gPSBuZXcgVVJMKGN1cnJlbnRVcmwpO1xyXG4gICAgaWYgKGV4cGVjdGVkLnN0YXJ0c1dpdGgoJ2Nocm9tZS1leHRlbnNpb246Ly8nKSkge1xyXG4gICAgICAgIGNvbnN0IGNlVXJsID0gbmV3IFVSTChleHBlY3RlZCk7XHJcbiAgICAgICAgaWYgKGNlVXJsLmhvc3RuYW1lID09PSAnJyAmJiBob3N0bmFtZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHdlJ3JlIG5vdCBwYXJzaW5nIGNocm9tZSBVUkxzIHByb3Blcmx5XHJcbiAgICAgICAgICAgIHJldHVybiAocHJvdG9jb2wgPT09ICdjaHJvbWUtZXh0ZW5zaW9uOicgJiZcclxuICAgICAgICAgICAgICAgIGV4cGVjdGVkLnJlcGxhY2UoJ2Nocm9tZS1leHRlbnNpb246Ly8nLCAnJykgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVybC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmIGNlVXJsLmhvc3RuYW1lID09PSBob3N0bmFtZTtcclxuICAgIH1cclxuICAgIGlmICghSFRUUF9SRUdFWC50ZXN0KHByb3RvY29sKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChJUF9BRERSRVNTX1JFR0VYLnRlc3QoZXhwZWN0ZWQpKSB7XHJcbiAgICAgICAgLy8gVGhlIGRvbWFpbiBoYXMgdG8gYmUgZXhhY3RseSBlcXVhbCB0byB0aGUgcGF0dGVybiwgYXMgYW4gSVAgZG9tYWluIHdpbGxcclxuICAgICAgICAvLyBvbmx5IGNvbnRhaW4gdGhlIElQLCBubyBleHRyYSBjaGFyYWN0ZXIuXHJcbiAgICAgICAgcmV0dXJuIGhvc3RuYW1lID09PSBleHBlY3RlZDtcclxuICAgIH1cclxuICAgIC8vIERvdHMgaW4gcGF0dGVybiBzaG91bGQgYmUgZXNjYXBlZC5cclxuICAgIGNvbnN0IGVzY2FwZWREb21haW5QYXR0ZXJuID0gZXhwZWN0ZWQucmVwbGFjZSgvXFwuL2csICdcXFxcLicpO1xyXG4gICAgLy8gTm9uIGlwIGFkZHJlc3MgZG9tYWlucy5cclxuICAgIC8vIGRvbWFpbi5jb20gPSAqLmRvbWFpbi5jb20gT1IgZG9tYWluLmNvbVxyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKCdeKC4rXFxcXC4nICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnfCcgKyBlc2NhcGVkRG9tYWluUGF0dGVybiArICcpJCcsICdpJyk7XHJcbiAgICByZXR1cm4gcmUudGVzdChob3N0bmFtZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVCA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG4vKipcclxuICogUmVzZXQgdW5sYW9kZWQgR0FwaSBtb2R1bGVzLiBJZiBnYXBpLmxvYWQgZmFpbHMgZHVlIHRvIGEgbmV0d29yayBlcnJvcixcclxuICogaXQgd2lsbCBzdG9wIHdvcmtpbmcgYWZ0ZXIgYSByZXRyaWFsLiBUaGlzIGlzIGEgaGFjayB0byBmaXggdGhpcyBpc3N1ZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpIHtcclxuICAgIC8vIENsZWFyIGxhc3QgZmFpbGVkIGdhcGkubG9hZCBzdGF0ZSB0byBmb3JjZSBuZXh0IGdhcGkubG9hZCB0byBmaXJzdFxyXG4gICAgLy8gbG9hZCB0aGUgZmFpbGVkIGdhcGkuaWZyYW1lcyBtb2R1bGUuXHJcbiAgICAvLyBHZXQgZ2FwaXguYmVhY29uIGNvbnRleHQuXHJcbiAgICBjb25zdCBiZWFjb24gPSBfd2luZG93KCkuX19fanNsO1xyXG4gICAgLy8gR2V0IGN1cnJlbnQgaGludC5cclxuICAgIGlmIChiZWFjb24gPT09IG51bGwgfHwgYmVhY29uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWFjb24uSCkge1xyXG4gICAgICAgIC8vIEdldCBnYXBpIGhpbnQuXHJcbiAgICAgICAgZm9yIChjb25zdCBoaW50IG9mIE9iamVjdC5rZXlzKGJlYWNvbi5IKSkge1xyXG4gICAgICAgICAgICAvLyBSZXF1ZXN0ZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uciA9IGJlYWNvbi5IW2hpbnRdLnIgfHwgW107XHJcbiAgICAgICAgICAgIC8vIExvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5MID0gYmVhY29uLkhbaGludF0uTCB8fCBbXTtcclxuICAgICAgICAgICAgLy8gU2V0IHJlcXVlc3RlZCBtb2R1bGVzIHRvIGEgY29weSBvZiB0aGUgbG9hZGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBbLi4uYmVhY29uLkhbaGludF0uTF07XHJcbiAgICAgICAgICAgIC8vIENsZWFyIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICBpZiAoYmVhY29uLkNQKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJlYWNvbi5DUC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgZmFpbGVkIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICAgICAgICAgIGJlYWNvbi5DUFtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbG9hZEdhcGkoYXV0aCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYztcclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBydW4gd2hlbiBnYXBpLmxvYWQgaXMgcmVhZHkuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZEdhcGlJZnJhbWUoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkZXZlbG9wZXIgbWF5IGhhdmUgdHJpZWQgdG8gcHJldmlvdXNseSBydW4gZ2FwaS5sb2FkIGFuZCBmYWlsZWQuXHJcbiAgICAgICAgICAgIC8vIFJ1biB0aGlzIHRvIGZpeCB0aGF0LlxyXG4gICAgICAgICAgICByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKTtcclxuICAgICAgICAgICAgZ2FwaS5sb2FkKCdnYXBpLmlmcmFtZXMnLCB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2FwaS5pZnJhbWVzLmdldENvbnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb250aW1lb3V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFib3ZlIHJlc2V0IG1heSBiZSBzdWZmaWNpZW50LCBidXQgaGF2aW5nIHRoaXMgcmVzZXQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsdXJlIGVuc3VyZXMgdGhhdCBpZiB0aGUgZGV2ZWxvcGVyIGNhbGxzIGdhcGkubG9hZCBhZnRlciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIHJlLWVzdGFibGlzaGVkIGFuZCBiZWZvcmUgYW5vdGhlciBhdHRlbXB0IHRvIGVtYmVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGlmcmFtZSwgaXQgd291bGQgd29yayBhbmQgd291bGQgbm90IGJlIGJyb2tlbiBiZWNhdXNlIG9mIG91clxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWxlZCBhdHRlbXB0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgd2hlbiBnYXBpLmlmcmFtZXMuSWZyYW1lIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGltZW91dDogTkVUV09SS19USU1FT1VULmdldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKF9iID0gKF9hID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZnJhbWVzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuSWZyYW1lKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGdhcGkuaWZyYW1lcy5JZnJhbWUgYXZhaWxhYmxlLCByZXNvbHZlLlxyXG4gICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghISgoX2MgPSBfd2luZG93KCkuZ2FwaSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxvYWQpKSB7XHJcbiAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIHJlYWR5LCBsb2FkIGdhcGkuaWZyYW1lcy5cclxuICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBpZnJhbWUgY2FsbGJhY2sgd2hlbiB0aGlzIGlzIGNhbGxlZCBzbyBhcyBub3QgdG8gb3ZlcndyaXRlXHJcbiAgICAgICAgICAgIC8vIGFueSBwcmV2aW91cyBkZWZpbmVkIGNhbGxiYWNrLiBUaGlzIGhhcHBlbnMgaWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkXHJcbiAgICAgICAgICAgIC8vIG11bHRpcGxlIHRpbWVzIGluIHBhcmFsbGVsIGFuZCBjb3VsZCByZXN1bHQgaW4gdGhlIGxhdGVyIGNhbGxiYWNrXHJcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0aW5nIHRoZSBwcmV2aW91cyBvbmUuIFRoaXMgd291bGQgZW5kIHVwIHdpdGggYSBpZnJhbWVcclxuICAgICAgICAgICAgLy8gdGltZW91dC5cclxuICAgICAgICAgICAgY29uc3QgY2JOYW1lID0gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKCdpZnJhbWVmY2InKTtcclxuICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgbm90IGF2YWlsYWJsZSwgZHluYW1pY2FsbHkgbG9hZCBwbGF0Zm9ybS5qcy5cclxuICAgICAgICAgICAgX3dpbmRvdygpW2NiTmFtZV0gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHQXBpIGxvYWRlciBzaG91bGQgYmUgcmVhZHkuXHJcbiAgICAgICAgICAgICAgICBpZiAoISFnYXBpLmxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkR2FwaUlmcmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2FwaSBsb2FkZXIgZmFpbGVkLCB0aHJvdyBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gTG9hZCBHQXBpIGxvYWRlci5cclxuICAgICAgICAgICAgcmV0dXJuIF9sb2FkSlMoYGh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcz9vbmxvYWQ9JHtjYk5hbWV9YCkuY2F0Y2goZSA9PiByZWplY3QoZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAvLyBSZXNldCBjYWNoZWQgcHJvbWlzZSB0byBhbGxvdyBmb3IgcmV0cmlhbC5cclxuICAgICAgICBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG59XHJcbmxldCBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuZnVuY3Rpb24gX2xvYWRHYXBpKGF1dGgpIHtcclxuICAgIGNhY2hlZEdBcGlMb2FkZXIgPSBjYWNoZWRHQXBpTG9hZGVyIHx8IGxvYWRHYXBpKGF1dGgpO1xyXG4gICAgcmV0dXJuIGNhY2hlZEdBcGlMb2FkZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBJTkdfVElNRU9VVCA9IG5ldyBEZWxheSg1MDAwLCAxNTAwMCk7XHJcbmNvbnN0IElGUkFNRV9QQVRIID0gJ19fL2F1dGgvaWZyYW1lJztcclxuY29uc3QgRU1VTEFURURfSUZSQU1FX1BBVEggPSAnZW11bGF0b3IvYXV0aC9pZnJhbWUnO1xyXG5jb25zdCBJRlJBTUVfQVRUUklCVVRFUyA9IHtcclxuICAgIHN0eWxlOiB7XHJcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgdG9wOiAnLTEwMHB4JyxcclxuICAgICAgICB3aWR0aDogJzFweCcsXHJcbiAgICAgICAgaGVpZ2h0OiAnMXB4J1xyXG4gICAgfSxcclxuICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcclxuICAgIHRhYmluZGV4OiAnLTEnXHJcbn07XHJcbi8vIE1hcCBmcm9tIGFwaUhvc3QgdG8gZW5kcG9pbnQgSUQgZm9yIHBhc3NpbmcgaW50byBpZnJhbWUuIEluIGN1cnJlbnQgU0RLLCBhcGlIb3N0IGNhbiBiZSBzZXQgdG9cclxuLy8gYW55dGhpbmcgKG5vdCBmcm9tIGEgbGlzdCBvZiBlbmRwb2ludHMgd2l0aCBJRHMgYXMgaW4gbGVnYWN5KSwgc28gdGhpcyBpcyB0aGUgY2xvc2VzdCB3ZSBjYW4gZ2V0LlxyXG5jb25zdCBFSURfRlJPTV9BUElIT1NUID0gbmV3IE1hcChbXHJcbiAgICBbXCJpZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb21cIiAvKiBBUElfSE9TVCAqLywgJ3AnXSxcclxuICAgIFsnc3RhZ2luZy1pZGVudGl0eXRvb2xraXQuc2FuZGJveC5nb29nbGVhcGlzLmNvbScsICdzJ10sXHJcbiAgICBbJ3Rlc3QtaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAndCddIC8vIHRlc3RcclxuXSk7XHJcbmZ1bmN0aW9uIGdldElmcmFtZVVybChhdXRoKSB7XHJcbiAgICBjb25zdCBjb25maWcgPSBhdXRoLmNvbmZpZztcclxuICAgIF9hc3NlcnQoY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBjb25zdCB1cmwgPSBjb25maWcuZW11bGF0b3JcclxuICAgICAgICA/IF9lbXVsYXRvclVybChjb25maWcsIEVNVUxBVEVEX0lGUkFNRV9QQVRIKVxyXG4gICAgICAgIDogYGh0dHBzOi8vJHthdXRoLmNvbmZpZy5hdXRoRG9tYWlufS8ke0lGUkFNRV9QQVRIfWA7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgYXBpS2V5OiBjb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IGVpZCA9IEVJRF9GUk9NX0FQSUhPU1QuZ2V0KGF1dGguY29uZmlnLmFwaUhvc3QpO1xyXG4gICAgaWYgKGVpZCkge1xyXG4gICAgICAgIHBhcmFtcy5laWQgPSBlaWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFtZXdvcmtzID0gYXV0aC5fZ2V0RnJhbWV3b3JrcygpO1xyXG4gICAgaWYgKGZyYW1ld29ya3MubGVuZ3RoKSB7XHJcbiAgICAgICAgcGFyYW1zLmZ3ID0gZnJhbWV3b3Jrcy5qb2luKCcsJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7dXJsfT8ke3F1ZXJ5c3RyaW5nKHBhcmFtcykuc2xpY2UoMSl9YDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfb3BlbklmcmFtZShhdXRoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgX2xvYWRHYXBpKGF1dGgpO1xyXG4gICAgY29uc3QgZ2FwaSA9IF93aW5kb3coKS5nYXBpO1xyXG4gICAgX2Fzc2VydChnYXBpLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGNvbnRleHQub3Blbih7XHJcbiAgICAgICAgd2hlcmU6IGRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgdXJsOiBnZXRJZnJhbWVVcmwoYXV0aCksXHJcbiAgICAgICAgbWVzc2FnZUhhbmRsZXJzRmlsdGVyOiBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IElGUkFNRV9BVFRSSUJVVEVTLFxyXG4gICAgICAgIGRvbnRjbGVhcjogdHJ1ZVxyXG4gICAgfSwgKGlmcmFtZSkgPT4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IGlmcmFtZS5yZXN0eWxlKHtcclxuICAgICAgICAgICAgLy8gUHJldmVudCBpZnJhbWUgZnJvbSBjbG9zaW5nIG9uIG1vdXNlIG91dC5cclxuICAgICAgICAgICAgc2V0SGlkZU9uTGVhdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pO1xyXG4gICAgICAgIC8vIENvbmZpcm0gaWZyYW1lIGlzIGNvcnJlY3RseSBsb2FkZWQuXHJcbiAgICAgICAgLy8gVG8gZmFsbGJhY2sgb24gZmFpbHVyZSwgc2V0IGEgdGltZW91dC5cclxuICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3JUaW1lciA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSwgUElOR19USU1FT1VULmdldCgpKTtcclxuICAgICAgICAvLyBDbGVhciB0aW1lciBhbmQgcmVzb2x2ZSBwZW5kaW5nIGlmcmFtZSByZWFkeSBwcm9taXNlLlxyXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyVGltZXJBbmRSZXNvbHZlKCkge1xyXG4gICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtFcnJvclRpbWVyKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShpZnJhbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGlzIHJldHVybnMgYW4gSVRoZW5hYmxlLiBIb3dldmVyIHRoZSByZWplY3QgcGFydCBkb2VzIG5vdCBjYWxsXHJcbiAgICAgICAgLy8gd2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgaWZyYW1lLnBpbmcoY2xlYXJUaW1lckFuZFJlc29sdmUpLnRoZW4oY2xlYXJUaW1lckFuZFJlc29sdmUsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEJBU0VfUE9QVVBfT1BUSU9OUyA9IHtcclxuICAgIGxvY2F0aW9uOiAneWVzJyxcclxuICAgIHJlc2l6YWJsZTogJ3llcycsXHJcbiAgICBzdGF0dXNiYXI6ICd5ZXMnLFxyXG4gICAgdG9vbGJhcjogJ25vJ1xyXG59O1xyXG5jb25zdCBERUZBVUxUX1dJRFRIID0gNTAwO1xyXG5jb25zdCBERUZBVUxUX0hFSUdIVCA9IDYwMDtcclxuY29uc3QgVEFSR0VUX0JMQU5LID0gJ19ibGFuayc7XHJcbmNvbnN0IEZJUkVGT1hfRU1QVFlfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG5jbGFzcyBBdXRoUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Iod2luZG93KSB7XHJcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgdGhpcy5hc3NvY2lhdGVkRXZlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2luZG93KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX29wZW4oYXV0aCwgdXJsLCBuYW1lLCB3aWR0aCA9IERFRkFVTFRfV0lEVEgsIGhlaWdodCA9IERFRkFVTFRfSEVJR0hUKSB7XHJcbiAgICBjb25zdCB0b3AgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCAtIGhlaWdodCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgY29uc3QgbGVmdCA9IE1hdGgubWF4KCh3aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGggLSB3aWR0aCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgbGV0IHRhcmdldCA9ICcnO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgQkFTRV9QT1BVUF9PUFRJT05TKSwgeyB3aWR0aDogd2lkdGgudG9TdHJpbmcoKSwgaGVpZ2h0OiBoZWlnaHQudG9TdHJpbmcoKSwgdG9wLFxyXG4gICAgICAgIGxlZnQgfSk7XHJcbiAgICAvLyBDaHJvbWUgaU9TIDcgYW5kIDggaXMgcmV0dXJuaW5nIGFuIHVuZGVmaW5lZCBwb3B1cCB3aW4gd2hlbiB0YXJnZXQgaXNcclxuICAgIC8vIHNwZWNpZmllZCwgZXZlbiB0aG91Z2ggdGhlIHBvcHVwIGlzIG5vdCBuZWNlc3NhcmlseSBibG9ja2VkLlxyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICAgIHRhcmdldCA9IF9pc0Nocm9tZUlPUyh1YSkgPyBUQVJHRVRfQkxBTksgOiBuYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKF9pc0ZpcmVmb3godWEpKSB7XHJcbiAgICAgICAgLy8gRmlyZWZveCBjb21wbGFpbnMgd2hlbiBpbnZhbGlkIFVSTHMgYXJlIHBvcHBlZCBvdXQuIEhhY2t5IHdheSB0byBieXBhc3MuXHJcbiAgICAgICAgdXJsID0gdXJsIHx8IEZJUkVGT1hfRU1QVFlfVVJMO1xyXG4gICAgICAgIC8vIEZpcmVmb3ggZGlzYWJsZXMgYnkgZGVmYXVsdCBzY3JvbGxpbmcgb24gcG9wdXAgd2luZG93cywgd2hpY2ggY2FuIGNyZWF0ZVxyXG4gICAgICAgIC8vIGlzc3VlcyB3aGVuIHRoZSB1c2VyIGhhcyBtYW55IEdvb2dsZSBhY2NvdW50cywgZm9yIGluc3RhbmNlLlxyXG4gICAgICAgIG9wdGlvbnMuc2Nyb2xsYmFycyA9ICd5ZXMnO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb3B0aW9uc1N0cmluZyA9IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLnJlZHVjZSgoYWNjdW0sIFtrZXksIHZhbHVlXSkgPT4gYCR7YWNjdW19JHtrZXl9PSR7dmFsdWV9LGAsICcnKTtcclxuICAgIGlmIChfaXNJT1NTdGFuZGFsb25lKHVhKSAmJiB0YXJnZXQgIT09ICdfc2VsZicpIHtcclxuICAgICAgICBvcGVuQXNOZXdXaW5kb3dJT1ModXJsIHx8ICcnLCB0YXJnZXQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG51bGwpO1xyXG4gICAgfVxyXG4gICAgLy8gYWJvdXQ6YmxhbmsgZ2V0dGluZyBzYW5pdGl6ZWQgY2F1c2luZyBicm93c2VycyBsaWtlIElFL0VkZ2UgdG8gZGlzcGxheVxyXG4gICAgLy8gYnJpZWYgZXJyb3IgbWVzc2FnZSBiZWZvcmUgcmVkaXJlY3RpbmcgdG8gaGFuZGxlci5cclxuICAgIGNvbnN0IG5ld1dpbiA9IHdpbmRvdy5vcGVuKHVybCB8fCAnJywgdGFyZ2V0LCBvcHRpb25zU3RyaW5nKTtcclxuICAgIF9hc3NlcnQobmV3V2luLCBhdXRoLCBcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovKTtcclxuICAgIC8vIEZsYWt5IG9uIElFIGVkZ2UsIGVuY2Fwc3VsYXRlIHdpdGggYSB0cnkgYW5kIGNhdGNoLlxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdXaW4uZm9jdXMoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG5ld1dpbik7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkFzTmV3V2luZG93SU9TKHVybCwgdGFyZ2V0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGVsLmhyZWYgPSB1cmw7XHJcbiAgICBlbC50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICBjb25zdCBjbGljayA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7XHJcbiAgICBjbGljay5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDEsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAxLCBudWxsKTtcclxuICAgIGVsLmRpc3BhdGNoRXZlbnQoY2xpY2spO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVUkwgZm9yIEF1dGhlbnRpY2F0aW9uIHdpZGdldCB3aGljaCB3aWxsIGluaXRpYXRlIHRoZSBPQXV0aCBoYW5kc2hha2VcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBXSURHRVRfUEFUSCA9ICdfXy9hdXRoL2hhbmRsZXInO1xyXG4vKipcclxuICogVVJMIGZvciBlbXVsYXRlZCBlbnZpcm9ubWVudFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IEVNVUxBVE9SX1dJREdFVF9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaGFuZGxlcic7XHJcbmZ1bmN0aW9uIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIHJlZGlyZWN0VXJsLCBldmVudElkLCBhZGRpdGlvbmFsUGFyYW1zKSB7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmFwaUtleSwgYXV0aCwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8pO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogYXV0aC5jb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICBhdXRoVHlwZSxcclxuICAgICAgICByZWRpcmVjdFVybCxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTixcclxuICAgICAgICBldmVudElkXHJcbiAgICB9O1xyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0RGVmYXVsdExhbmd1YWdlKGF1dGgubGFuZ3VhZ2VDb2RlKTtcclxuICAgICAgICBwYXJhbXMucHJvdmlkZXJJZCA9IHByb3ZpZGVyLnByb3ZpZGVySWQgfHwgJyc7XHJcbiAgICAgICAgaWYgKCFpc0VtcHR5KHByb3ZpZGVyLmdldEN1c3RvbVBhcmFtZXRlcnMoKSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zLmN1c3RvbVBhcmFtZXRlcnMgPSBKU09OLnN0cmluZ2lmeShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPIHNldCBhZGRpdGlvbmFsUGFyYW1zIGZyb20gdGhlIHByb3ZpZGVyIGFzIHdlbGw/XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYWRkaXRpb25hbFBhcmFtcyB8fCB7fSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocHJvdmlkZXIgaW5zdGFuY2VvZiBCYXNlT0F1dGhQcm92aWRlcikge1xyXG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IHByb3ZpZGVyLmdldFNjb3BlcygpLmZpbHRlcihzY29wZSA9PiBzY29wZSAhPT0gJycpO1xyXG4gICAgICAgIGlmIChzY29wZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBwYXJhbXMuc2NvcGVzID0gc2NvcGVzLmpvaW4oJywnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYXV0aC50ZW5hbnRJZCkge1xyXG4gICAgICAgIHBhcmFtcy50aWQgPSBhdXRoLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGVpZCBhcyBlbmRpcG9pbnRJZFxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGZ3IGFzIEZyYW1ld29ya3Muam9pbihcIixcIilcclxuICAgIGNvbnN0IHBhcmFtc0RpY3QgPSBwYXJhbXM7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwYXJhbXNEaWN0KSkge1xyXG4gICAgICAgIGlmIChwYXJhbXNEaWN0W2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zRGljdFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBgJHtnZXRIYW5kbGVyQmFzZShhdXRoKX0/JHtxdWVyeXN0cmluZyhwYXJhbXNEaWN0KS5zbGljZSgxKX1gO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhhbmRsZXJCYXNlKHsgY29uZmlnIH0pIHtcclxuICAgIGlmICghY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7Y29uZmlnLmF1dGhEb21haW59LyR7V0lER0VUX1BBVEh9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRPUl9XSURHRVRfUEFUSCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBzcGVjaWFsIHdlYiBzdG9yYWdlIGV2ZW50XHJcbiAqXHJcbiAqL1xyXG5jb25zdCBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSA9ICd3ZWJTdG9yYWdlU3VwcG9ydCc7XHJcbmNsYXNzIEJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5pZnJhbWVzID0ge307XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdFBlcnNpc3RlbmNlID0gYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyBXcmFwcGluZyBpbiBhc3luYyBldmVuIHRob3VnaCB3ZSBkb24ndCBhd2FpdCBhbnl3aGVyZSBpbiBvcmRlclxyXG4gICAgLy8gdG8gbWFrZSBzdXJlIGVycm9ycyBhcmUgcmFpc2VkIGFzIHByb21pc2UgcmVqZWN0aW9uc1xyXG4gICAgYXN5bmMgX29wZW5Qb3B1cChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoKF9hID0gdGhpcy5ldmVudE1hbmFnZXJzW2F1dGguX2tleSgpXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hbmFnZXIsICdfaW5pdGlhbGl6ZSgpIG5vdCBjYWxsZWQgYmVmb3JlIF9vcGVuUG9wdXAoKScpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBfb3BlbihhdXRoLCB1cmwsIF9nZW5lcmF0ZUV2ZW50SWQoKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICAgICAgX3NldFdpbmRvd0xvY2F0aW9uKF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBtYW5hZ2VyLCBwcm9taXNlIH0gPSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICAgICAgaWYgKG1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobWFuYWdlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z0Fzc2VydChwcm9taXNlLCAnSWYgbWFuYWdlciBpcyBub3Qgc2V0LCBwcm9taXNlIHNob3VsZCBiZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuaW5pdEFuZEdldE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2tleV0gPSB7IHByb21pc2UgfTtcclxuICAgICAgICAvLyBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCwgdGhlIGtleSBzaG91bGQgYmUgcmVtb3ZlZCBzbyB0aGF0IHRoZVxyXG4gICAgICAgIC8vIG9wZXJhdGlvbiBjYW4gYmUgcmV0cmllZCBsYXRlci5cclxuICAgICAgICBwcm9taXNlLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdEFuZEdldE1hbmFnZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGF3YWl0IF9vcGVuSWZyYW1lKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQXV0aEV2ZW50TWFuYWdlcihhdXRoKTtcclxuICAgICAgICBpZnJhbWUucmVnaXN0ZXIoJ2F1dGhFdmVudCcsIChpZnJhbWVFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KGlmcmFtZUV2ZW50ID09PSBudWxsIHx8IGlmcmFtZUV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZnJhbWVFdmVudC5hdXRoRXZlbnQsIGF1dGgsIFwiaW52YWxpZC1hdXRoLWV2ZW50XCIgLyogSU5WQUxJRF9BVVRIX0VWRU5UICovKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgc3BsaXR0aW5nIHJlZGlyZWN0IGFuZCBwb3B1cCBldmVudHMgZWFybGllciBvblxyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gbWFuYWdlci5vbkV2ZW50KGlmcmFtZUV2ZW50LmF1dGhFdmVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogaGFuZGxlZCA/IFwiQUNLXCIgLyogQUNLICovIDogXCJFUlJPUlwiIC8qIEVSUk9SICovIH07XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2F1dGguX2tleSgpXSA9IHsgbWFuYWdlciB9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV0gPSBpZnJhbWU7XHJcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKGF1dGgsIGNiKSB7XHJcbiAgICAgICAgY29uc3QgaWZyYW1lID0gdGhpcy5pZnJhbWVzW2F1dGguX2tleSgpXTtcclxuICAgICAgICBpZnJhbWUuc2VuZChXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSwgeyB0eXBlOiBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSB9LCByZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzU3VwcG9ydGVkID0gKF9hID0gcmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0WzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVldO1xyXG4gICAgICAgICAgICBpZiAoaXNTdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY2IoISFpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9LCBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSKTtcclxuICAgIH1cclxuICAgIF9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAoIXRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSA9IF92YWxpZGF0ZU9yaWdpbihhdXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV07XHJcbiAgICB9XHJcbiAgICBnZXQgX3Nob3VsZEluaXRQcm9hY3RpdmVseSgpIHtcclxuICAgICAgICAvLyBNb2JpbGUgYnJvd3NlcnMgYW5kIFNhZmFyaSBuZWVkIHRvIG9wdGltaXN0aWNhbGx5IGluaXRpYWxpemVcclxuICAgICAgICByZXR1cm4gX2lzTW9iaWxlQnJvd3NlcigpIHx8IF9pc1NhZmFyaSgpIHx8IF9pc0lPUygpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSBzdWl0YWJsZSBmb3IgYnJvd3NlclxyXG4gKiBiYXNlZCBhcHBsaWNhdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyO1xuXG5jbGFzcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9ySWQpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcklkID0gZmFjdG9ySWQ7XHJcbiAgICB9XHJcbiAgICBfcHJvY2VzcyhhdXRoLCBzZXNzaW9uLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIHN3aXRjaCAoc2Vzc2lvbi50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVFbnJvbGwoYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsLCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduaW5cIiAvKiBTSUdOX0lOICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplU2lnbkluKGF1dGgsIHNlc3Npb24uY3JlZGVudGlhbCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVidWdGYWlsKCd1bmV4cGVjdGVkIE11bHRpRmFjdG9yU2Vzc2lvblR5cGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIHtAaW5oZXJpdGRvYyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCBleHRlbmRzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9maW5hbGl6ZUVucm9sbChhdXRoLCBpZFRva2VuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIHJldHVybiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgIHBob25lVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5jcmVkZW50aWFsLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZmluYWxpemVTaWduSW4oYXV0aCwgbWZhUGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gZmluYWxpemVTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsLFxyXG4gICAgICAgICAgICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IHRoaXMuY3JlZGVudGlhbC5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyBhIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufSB0byBjb25maXJtIG93bmVyc2hpcCBvZiB0aGUgcGhvbmUgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVBdXRoQ3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBwcm92aWRlZCBieSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0uXHJcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufSB3aGljaCBjYW4gYmUgdXNlZCB3aXRoXHJcbiAgICAgKiB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlci5yZXNvbHZlU2lnbklufVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXNzZXJ0aW9uKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwuX2Zyb21DcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgcGhvbmUgc2Vjb25kIGZhY3RvcjogYHBob25lYC5cclxuICovXHJcblBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IuRkFDVE9SX0lEID0gJ3Bob25lJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4xOS41XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbnRlcm9wIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICBnZXRVaWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuYXV0aC5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmF1dGguY3VycmVudFVzZXIuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG4gICAgICAgIHJldHVybiB7IGFjY2Vzc1Rva2VuIH07XHJcbiAgICB9XHJcbiAgICBhZGRBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbExpc3RlbmVycy5oYXMobGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmF1dGgub25JZFRva2VuQ2hhbmdlZCh1c2VyID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcigoKF9hID0gdXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbikgfHwgbnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5zZXQobGlzdGVuZXIsIHVuc3Vic2NyaWJlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5pbnRlcm5hbExpc3RlbmVycy5nZXQobGlzdGVuZXIpO1xyXG4gICAgICAgIGlmICghdW5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgIH1cclxuICAgIGFzc2VydEF1dGhDb25maWd1cmVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2UsIFwiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqLyk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFZlcnNpb25Gb3JQbGF0Zm9ybShjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJOb2RlXCIgLyogTk9ERSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdub2RlJztcclxuICAgICAgICBjYXNlIFwiUmVhY3ROYXRpdmVcIiAvKiBSRUFDVF9OQVRJVkUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAncm4nO1xyXG4gICAgICAgIGNhc2UgXCJXb3JrZXJcIiAvKiBXT1JLRVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnd2Vid29ya2VyJztcclxuICAgICAgICBjYXNlIFwiQ29yZG92YVwiIC8qIENPUkRPVkEgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnY29yZG92YSc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQXV0aChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJhdXRoXCIgLyogQVVUSCAqLywgKGNvbnRhaW5lciwgeyBvcHRpb25zOiBkZXBzIH0pID0+IHtcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhdXRoRG9tYWluIH0gPSBhcHAub3B0aW9ucztcclxuICAgICAgICByZXR1cm4gKGFwcCA9PiB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQoYXBpS2V5ICYmICFhcGlLZXkuaW5jbHVkZXMoJzonKSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8sIHsgYXBwTmFtZTogYXBwLm5hbWUgfSk7XHJcbiAgICAgICAgICAgIC8vIEF1dGggZG9tYWluIGlzIG9wdGlvbmFsIGlmIElkUCBzaWduIGluIGlzbid0IGJlaW5nIHVzZWRcclxuICAgICAgICAgICAgX2Fzc2VydCghKGF1dGhEb21haW4gPT09IG51bGwgfHwgYXV0aERvbWFpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXV0aERvbWFpbi5pbmNsdWRlcygnOicpKSwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lOiBhcHAubmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgYXV0aERvbWFpbixcclxuICAgICAgICAgICAgICAgIGNsaWVudFBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgYXBpSG9zdDogXCJpZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb21cIiAvKiBBUElfSE9TVCAqLyxcclxuICAgICAgICAgICAgICAgIHRva2VuQXBpSG9zdDogXCJzZWN1cmV0b2tlbi5nb29nbGVhcGlzLmNvbVwiIC8qIFRPS0VOX0FQSV9IT1NUICovLFxyXG4gICAgICAgICAgICAgICAgYXBpU2NoZW1lOiBcImh0dHBzXCIgLyogQVBJX1NDSEVNRSAqLyxcclxuICAgICAgICAgICAgICAgIHNka0NsaWVudFZlcnNpb246IF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBhdXRoSW5zdGFuY2UgPSBuZXcgQXV0aEltcGwoYXBwLCBjb25maWcpO1xyXG4gICAgICAgICAgICBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoSW5zdGFuY2UsIGRlcHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aEluc3RhbmNlO1xyXG4gICAgICAgIH0pKGFwcCk7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBdXRoIGNhbiBvbmx5IGJlIGluaXRpYWxpemVkIGJ5IGV4cGxpY2l0bHkgY2FsbGluZyBnZXRBdXRoKCkgb3IgaW5pdGlhbGl6ZUF1dGgoKVxyXG4gICAgICAgICAqIEZvciB3aHkgd2UgZG8gdGhpcywgU2VlIGdvL2ZpcmViYXNlLW5leHQtYXV0aC1pbml0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbnRpYXRpb25Nb2RlKFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCZWNhdXNlIGFsbCBmaXJlYmFzZSBwcm9kdWN0cyB0aGF0IGRlcGVuZCBvbiBhdXRoIGRlcGVuZCBvbiBhdXRoLWludGVybmFsIGRpcmVjdGx5LFxyXG4gICAgICAgICAqIHdlIG5lZWQgdG8gaW5pdGlhbGl6ZSBhdXRoLWludGVybmFsIGFmdGVyIGF1dGggaXMgaW5pdGlhbGl6ZWQgdG8gbWFrZSBpdCBhdmFpbGFibGUgdG8gb3RoZXIgZmlyZWJhc2UgcHJvZHVjdHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKChjb250YWluZXIsIF9pbnN0YW5jZUlkZW50aWZpZXIsIF9pbnN0YW5jZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGhJbnRlcm5hbFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiIC8qIEFVVEhfSU5URVJOQUwgKi8pO1xyXG4gICAgICAgIGF1dGhJbnRlcm5hbFByb3ZpZGVyLmluaXRpYWxpemUoKTtcclxuICAgIH0pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiYXV0aC1pbnRlcm5hbFwiIC8qIEFVVEhfSU5URVJOQUwgKi8sIGNvbnRhaW5lciA9PiB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChjb250YWluZXIuZ2V0UHJvdmlkZXIoXCJhdXRoXCIgLyogQVVUSCAqLykuZ2V0SW1tZWRpYXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAoYXV0aCA9PiBuZXcgQXV0aEludGVyb3AoYXV0aCkpKGF1dGgpO1xyXG4gICAgfSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKSk7XHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEF1dGggaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0uXHJcbiAqIElmIG5vIGluc3RhbmNlIGV4aXN0cywgaW5pdGlhbGl6ZXMgYW4gQXV0aCBpbnN0YW5jZSB3aXRoIHBsYXRmb3JtLXNwZWNpZmljIGRlZmF1bHQgZGVwZW5kZW5jaWVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIEZpcmViYXNlIEFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXV0aChhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0aWFsaXplQXV0aChhcHAsIHtcclxuICAgICAgICBwb3B1cFJlZGlyZWN0UmVzb2x2ZXI6IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIsXHJcbiAgICAgICAgcGVyc2lzdGVuY2U6IFtcclxuICAgICAgICAgICAgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VcclxuICAgICAgICBdXHJcbiAgICB9KTtcclxufVxyXG5yZWdpc3RlckF1dGgoXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLyk7XG5cbmV4cG9ydCB7IHNlbmRQYXNzd29yZFJlc2V0RW1haWwgYXMgJCwgQWN0aW9uQ29kZU9wZXJhdGlvbiBhcyBBLCBwcm9kRXJyb3JNYXAgYXMgQiwgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZIGFzIEMsIGluaXRpYWxpemVBdXRoIGFzIEQsIGNvbm5lY3RBdXRoRW11bGF0b3IgYXMgRSwgRmFjdG9ySWQgYXMgRiwgQXV0aENyZWRlbnRpYWwgYXMgRywgRW1haWxBdXRoQ3JlZGVudGlhbCBhcyBILCBPQXV0aENyZWRlbnRpYWwgYXMgSSwgUGhvbmVBdXRoQ3JlZGVudGlhbCBhcyBKLCBpbk1lbW9yeVBlcnNpc3RlbmNlIGFzIEssIEVtYWlsQXV0aFByb3ZpZGVyIGFzIEwsIEZhY2Vib29rQXV0aFByb3ZpZGVyIGFzIE0sIEdvb2dsZUF1dGhQcm92aWRlciBhcyBOLCBPcGVyYXRpb25UeXBlIGFzIE8sIFBob25lQXV0aFByb3ZpZGVyIGFzIFAsIEdpdGh1YkF1dGhQcm92aWRlciBhcyBRLCBSZWNhcHRjaGFWZXJpZmllciBhcyBSLCBTaWduSW5NZXRob2QgYXMgUywgT0F1dGhQcm92aWRlciBhcyBULCBTQU1MQXV0aFByb3ZpZGVyIGFzIFUsIFR3aXR0ZXJBdXRoUHJvdmlkZXIgYXMgViwgc2lnbkluQW5vbnltb3VzbHkgYXMgVywgc2lnbkluV2l0aENyZWRlbnRpYWwgYXMgWCwgbGlua1dpdGhDcmVkZW50aWFsIGFzIFksIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwgYXMgWiwgc2lnbkluV2l0aEN1c3RvbVRva2VuIGFzIF8sIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgYXMgYSwgY29uZmlybVBhc3N3b3JkUmVzZXQgYXMgYTAsIGFwcGx5QWN0aW9uQ29kZSBhcyBhMSwgY2hlY2tBY3Rpb25Db2RlIGFzIGEyLCB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZSBhcyBhMywgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGE0LCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCBhcyBhNSwgc2VuZFNpZ25JbkxpbmtUb0VtYWlsIGFzIGE2LCBpc1NpZ25JbldpdGhFbWFpbExpbmsgYXMgYTcsIHNpZ25JbldpdGhFbWFpbExpbmsgYXMgYTgsIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsIGFzIGE5LCBfZ2V0UmVkaXJlY3RSZXN1bHQgYXMgYUEsIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMgYXMgYUIsIF9jYXN0QXV0aCBhcyBhQywgVXNlckltcGwgYXMgYUQsIEF1dGhJbXBsIGFzIGFFLCBfZ2V0Q2xpZW50VmVyc2lvbiBhcyBhRiwgX2dlbmVyYXRlRXZlbnRJZCBhcyBhRywgQXV0aFBvcHVwIGFzIGFILCBGZXRjaFByb3ZpZGVyIGFzIGFJLCBTQU1MQXV0aENyZWRlbnRpYWwgYXMgYUosIHNlbmRFbWFpbFZlcmlmaWNhdGlvbiBhcyBhYSwgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwgYXMgYWIsIEFjdGlvbkNvZGVVUkwgYXMgYWMsIHBhcnNlQWN0aW9uQ29kZVVSTCBhcyBhZCwgdXBkYXRlUHJvZmlsZSBhcyBhZSwgdXBkYXRlRW1haWwgYXMgYWYsIHVwZGF0ZVBhc3N3b3JkIGFzIGFnLCBnZXRJZFRva2VuIGFzIGFoLCBnZXRJZFRva2VuUmVzdWx0IGFzIGFpLCB1bmxpbmsgYXMgYWosIGdldEFkZGl0aW9uYWxVc2VySW5mbyBhcyBhaywgcmVsb2FkIGFzIGFsLCBnZXRNdWx0aUZhY3RvclJlc29sdmVyIGFzIGFtLCBtdWx0aUZhY3RvciBhcyBhbiwgX2lzSU9TN09yOCBhcyBhbywgZGVidWdBc3NlcnQgYXMgYXAsIF9pc0lPUyBhcyBhcSwgX2lzQW5kcm9pZCBhcyBhciwgX2ZhaWwgYXMgYXMsIF9nZXRSZWRpcmVjdFVybCBhcyBhdCwgX2dldFByb2plY3RDb25maWcgYXMgYXUsIF9jcmVhdGVFcnJvciBhcyBhdiwgX2Fzc2VydCBhcyBhdywgX2dldEluc3RhbmNlIGFzIGF4LCBfcGVyc2lzdGVuY2VLZXlOYW1lIGFzIGF5LCBBdXRoRXZlbnRNYW5hZ2VyIGFzIGF6LCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBhcyBiLCBzaWduSW5XaXRoUG9wdXAgYXMgYywgbGlua1dpdGhQb3B1cCBhcyBkLCByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCBhcyBlLCBzaWduSW5XaXRoUmVkaXJlY3QgYXMgZiwgbGlua1dpdGhSZWRpcmVjdCBhcyBnLCByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCBhcyBoLCBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIGFzIGksIGdldFJlZGlyZWN0UmVzdWx0IGFzIGosIGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgYXMgaywgbGlua1dpdGhQaG9uZU51bWJlciBhcyBsLCBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yIGFzIG0sIGdldEF1dGggYXMgbiwgUHJvdmlkZXJJZCBhcyBvLCBzZXRQZXJzaXN0ZW5jZSBhcyBwLCBvbklkVG9rZW5DaGFuZ2VkIGFzIHEsIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyIGFzIHIsIHNpZ25JbldpdGhQaG9uZU51bWJlciBhcyBzLCBvbkF1dGhTdGF0ZUNoYW5nZWQgYXMgdCwgdXBkYXRlUGhvbmVOdW1iZXIgYXMgdSwgdXNlRGV2aWNlTGFuZ3VhZ2UgYXMgdiwgdXBkYXRlQ3VycmVudFVzZXIgYXMgdywgc2lnbk91dCBhcyB4LCBkZWxldGVVc2VyIGFzIHksIGRlYnVnRXJyb3JNYXAgYXMgeiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgtMTY3OWEyYjIuanMubWFwXG4iLCJpbXBvcnQgeyByZWxvYWQgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xyXG5pbXBvcnQge3BvcHVsYXRlVG9kb30gZnJvbSBcIi4vdG9kby5qc1wiXHJcblxyXG5mdW5jdGlvbiBhZGRCdXR0b25FdmVudHMoKSB7XHJcbiAgICBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFwiKTtcclxuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3JlYXRlXCIpO1xyXG4gICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2hlYWRpbmdcIik7XHJcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBcIkFkZCBUYXNrXCI7XHJcbiAgICAgICAgdG9nZ2xlTW9kYWwoKTtcclxuICAgICAgICAvL2NoZWNrIGZvciBvcGVuIHRhYlxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VcIik7XHJcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbFwiKTtcclxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlTW9kYWwpO1xyXG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZU1vZGFsKTtcclxuICAgIGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgdmFsaWRhdGVGb3JtKGUpO1xyXG4gICAgICAgIHJlbG9hZEFjdGl2ZVBhZ2UoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWxvYWRBY3RpdmVQYWdlKCkge1xyXG4gICAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19kaXNwbGF5XCIpO1xyXG4gICAgY29uc3QgZGFzaGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXNoYm9hcmRcIik7XHJcbiAgICBjb25zdCBpbmJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5ib3hcIik7XHJcbiAgICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdHNcIik7XHJcbiAgICBjb25zdCB0YXNrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza3NcIik7XHJcbiAgICBjb25zdCB3aWRnZXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aWRnZXRzXCIpO1xyXG4gICAgaWYgKGRpc3BsYXkudGV4dENvbnRlbnQgPT09IFwiRGFzaGJvYXJkXCIpIHtcclxuICAgICAgICBkYXNoYm9hcmQuY2xpY2soKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpc3BsYXkudGV4dENvbnRlbnQgPT09IFwiSW5ib3hcIikge1xyXG4gICAgICAgIGluYm94LmNsaWNrKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXNwbGF5LnRleHRDb250ZW50ID09PSBcIlByb2plY3RzXCIpIHtcclxuICAgICAgICBwcm9qZWN0cy5jbGljaygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZGlzcGxheS50ZXh0Q29udGVudCA9PT0gXCJUYXNrc1wiKSB7XHJcbiAgICAgICAgdGFza3MuY2xpY2soKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpc3BsYXkudGV4dENvbnRlbnQgPT09IFwiV2lkZ2V0c1wiKSB7XHJcbiAgICAgICAgd2lkZ2V0cy5jbGljaygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUZvcm0oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZVwiKS52YWx1ZTtcclxuICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKS52YWx1ZTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RcIikudmFsdWU7XHJcbiAgICBjb25zdCB0aXRsZUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aXRsZV9fZXJyb3JcIik7XHJcbiAgICBjb25zdCBkYXRlRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhdGVfX2Vycm9yXCIpO1xyXG4gICAgXHJcbiAgICBpZiAodGl0bGUudHJpbSgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgdGl0bGVFcnJvci50ZXh0Q29udGVudCA9IFwiVGl0bGUgbXVzdCBub3QgYmUgYmxhbmtcIjtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGl0bGVFcnJvci50ZXh0Q29udGVudCA9IFwiIFwiO1xyXG4gICAgICAgIH0sIDIwMDApO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgaWYgKGRhdGUgPT09IFwiXCIpIHtcclxuICAgICAgICBkYXRlRXJyb3IudGV4dENvbnRlbnQgPSBcIlBsZWFzZSBzZWxlY3QgYSBkYXRlXCI7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRhdGVFcnJvci50ZXh0Q29udGVudCA9IFwiIFwiO1xyXG4gICAgICAgIH0sIDIwMDApO1xyXG4gICAgfVxyXG4gICAgaWYgKGRhdGUgPCBnZXRUb2RheXNEYXRlKCkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRlLCBnZXRUb2RheXNEYXRlKCkpO1xyXG4gICAgICAgIGRhdGVFcnJvci50ZXh0Q29udGVudCA9IFwiRGF0ZSBtdXN0IG5vdCBiZSBpbiB0aGUgcGFzdFwiO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgZGF0ZUVycm9yLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBwb3B1bGF0ZVRvZG8oZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRvZGF5c0RhdGUoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCB5ZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGxldCBtb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcclxuICAgICAgICBtb250aCA9IGAwJHttb250aH1gO1xyXG4gICAgfVxyXG4gICAgbGV0IGRheSA9IGN1cnJlbnREYXRlLmdldERhdGUoKTtcclxuICAgIGlmIChkYXkgPCAxMCkge1xyXG4gICAgICAgIGRheSA9IGAwJHtkYXl9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGZ1bGxEYXRlID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcclxuICAgIHJldHVybiBmdWxsRGF0ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlTW9kYWwoKSB7XHJcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIG1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93TW9kYWxcIik7XHJcbiAgICBmb3JtLnJlc2V0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGFkZEJ1dHRvbkV2ZW50cywgdG9nZ2xlTW9kYWwsIGdldFRvZGF5c0RhdGUsIHJlbG9hZEFjdGl2ZVBhZ2UgfTsiLCJcclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyh0eXBlLCBjbGFzc05hbWUpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICAgIHJldHVybiBlbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3ModHlwZSwgY2xhc3NOYW1lLCB0ZXh0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUltYWdlV2l0aElkKHR5cGUsIHNyYywgYWx0LCBpZCkge1xyXG4gICAgY29uc3QgZWwgPSBuZXcgSW1hZ2UoKTtcclxuICAgIGVsLnNyYyA9IHNyYztcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcImFsdFwiLCBhbHQpO1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVUZXh0RWxlbWVudFdpdGhJZCh0eXBlLCBjbGFzc05hbWUsIHRleHQsIGlkKSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlKHR5cGUsIGNsYXNzTmFtZSwgYXR0ciwgYXR0ck5hbWUpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuICAgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyTmFtZSk7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxhYmVsRWxlbWVudCh0eXBlLCBhdHRyLCB0ZXh0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgYXR0cik7XHJcbiAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUlucHV0RWxlbWVudCh0eXBlLCBhdHRyLCBuYW1lLCBpZCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBhdHRyKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgbmFtZSk7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRleHRBcmVhKHR5cGUsIG5hbWUsIGlkLCBjb2wsIHJvdykge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBuYW1lKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcImNvbHNcIiwgY29sKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcInJvd3NcIiwgcm93KTtcclxuICAgIHJldHVybiBlbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhUd29BdHRyaWJ1dGVzKHR5cGUsIGF0dHIxLCBhdHRyMU5hbWUsIGF0dHIyLCBhdHRyMk5hbWUpe1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKGF0dHIxLCBhdHRyMU5hbWUpO1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKGF0dHIyLCBhdHRyMk5hbWUpO1xyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVPcHRpb24odmFsdWUsIHRleHQpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHZhbHVlKTtcclxuICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIHJldHVybiBlbDtcclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgeyBjcmVhdGVFbGVtZW50V2l0aENsYXNzLCBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcywgY3JlYXRlSW1hZ2VXaXRoSWQsIGNyZWF0ZVRleHRFbGVtZW50V2l0aElkLCBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZSwgY3JlYXRlTGFiZWxFbGVtZW50LCBjcmVhdGVJbnB1dEVsZW1lbnQsIGNyZWF0ZVRleHRBcmVhLCBjcmVhdGVFbGVtZW50V2l0aFR3b0F0dHJpYnV0ZXMsIGNyZWF0ZU9wdGlvbiB9O1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50V2l0aENsYXNzLCBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcywgY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGUgfSBmcm9tIFwiLi9jcmVhdGVFbGVtZW50LmpzXCI7XHJcbmltcG9ydCB7IHRvZ2dsZU1vZGFsIH0gZnJvbSBcIi4vbW9kYWwuanNcIjtcclxuaW1wb3J0IHsgZ2V0VG9kb0J5SWQsIHVwZGF0ZVRvZG8sIGRlbGV0ZVRvZG8sIGdldEFEb2N1bWVudH0gZnJvbSBcIi4vdG9kby5qc1wiO1xyXG5cclxuY29uc3QgdG9kb3MgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwic2VjdGlvblwiLCBcInRvZG9zXCIpO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCBpZCkge1xyXG4gICAgY29uc3QgdG9kb19fY29udGFpbmVyID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInRvZG9fX2NvbnRhaW5lclwiKTtcclxuICAgIHRvZG9fX2NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGlkKTtcclxuICAgIGNvbnN0IHRvZG8gPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiYXJ0aWNsZVwiLCBcInRvZG9cIik7XHJcbiAgICBjb25zdCB0b2RvX19kYXRlID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInRvZG9fX2RhdGVcIik7XHJcbiAgICBjb25zdCBkYXRlMSA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFwic21hbGxcIiwgXCJkYXRlXCIsIGRhdGUpO1xyXG4gICAgdG9kb19fZGF0ZS5hcHBlbmRDaGlsZChkYXRlMSk7XHJcbiAgICBjb25zdCB0b2RvX19wcm9qZWN0ID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICAgIFwiZGl2XCIsXHJcbiAgICAgIFwidG9kb19fcHJvamVjdFwiLFxyXG4gICAgICBwcm9qZWN0XHJcbiAgICApO1xyXG4gICAgdG9kb19fZGF0ZS5hcHBlbmRDaGlsZCh0b2RvX19wcm9qZWN0KTtcclxuICAgIHRvZG8uYXBwZW5kQ2hpbGQodG9kb19fZGF0ZSk7XHJcbiAgICBcclxuXHJcbiAgICBjb25zdCB0b2RvX19jb250ZW50ID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInRvZG9fX2NvbnRlbnRcIik7XHJcbiAgICBjb25zdCB0b2RvX190aXRsZSA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwidG9kb19fdGl0bGVcIiwgdGl0bGUpO1xyXG4gICAgY29uc3QgdG9kb19fcHJpb3JpdHkgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwidG9kb19fcHJpb3JpdHlcIik7XHJcblxyXG4gICAgY29uc3QgcHJpb3JpdHkxID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXCJzbWFsbFwiLCBcInByaW9yaXR5XCIsIHByaW9yaXR5KTtcclxuICAgIGlmIChwcmlvcml0eSA9PT0gXCJoaWdoXCIpIHtcclxuICAgICAgICBwcmlvcml0eTEuY2xhc3NMaXN0LmFkZChcImhpZ2hcIik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBwcmlvcml0eTEuY2xhc3NMaXN0LmFkZChcIm5vcm1hbFwiKTtcclxuICAgIH1cclxuICAgIHRvZG9fX3ByaW9yaXR5LmFwcGVuZENoaWxkKHByaW9yaXR5MSk7XHJcbiAgICB0b2RvX19jb250ZW50LmFwcGVuZENoaWxkKHRvZG9fX3RpdGxlKTtcclxuICAgIHRvZG9fX2NvbnRlbnQuYXBwZW5kQ2hpbGQodG9kb19fcHJpb3JpdHkpO1xyXG5cclxuICAgIC8vdG9kbyBidXR0b25zXHJcbiAgICBjb25zdCB0b2RvX19idXR0b25zID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInRvZG9fX2J1dHRvbnNcIik7XHJcbiAgICBjb25zdCB0b2RvX19tb3JlID0gY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGUoXCJidXR0b25cIiwgXCJ0b2RvX19tb3JlXCIsIFwiaWRcIiwgXCJtb3JlXCIpO1xyXG4gICAgY29uc3QgbW9yZUJ0biA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJpXCIsIFwiZmFzXCIpO1xyXG4gICAgbW9yZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZmEtY2FyZXQtZG93blwiKTtcclxuICAgIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dEZXRhaWxzKTtcclxuICAgIHRvZG9fX21vcmUuYXBwZW5kQ2hpbGQobW9yZUJ0bik7XHJcbiAgICB0b2RvX19idXR0b25zLmFwcGVuZENoaWxkKHRvZG9fX21vcmUpO1xyXG4gICAgY29uc3QgdG9kb19fZWRpdCA9IGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlKFwiYnV0dG9uXCIsIFwidG9kb19fZWRpdFwiLCBcImlkXCIsIFwiZWRpdFwiKTtcclxuICAgIGNvbnN0IGVkaXRCdG4gPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiaVwiLCBcImZhc1wiKTtcclxuICAgIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImZhLWVkaXRcIik7XHJcbiAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0VG9kbyk7XHJcbiAgICB0b2RvX19lZGl0LmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gICAgdG9kb19fYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvX19lZGl0KTtcclxuICAgIGNvbnN0IHRvZG9fX2RlbGV0ZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlKFwiYnV0dG9uXCIsIFwidG9kb19fZGVsZXRlXCIsIFwiaWRcIiwgXCJkZWxldGVcIik7XHJcbiAgICBjb25zdCBkZWxldGVCdG4gPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiaVwiLCBcImZhc1wiKTtcclxuICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZmEtdHJhc2gtYWx0XCIpO1xyXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVUb2RvVUkpO1xyXG4gICAgdG9kb19fZGVsZXRlLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XHJcbiAgICB0b2RvX19idXR0b25zLmFwcGVuZENoaWxkKHRvZG9fX2RlbGV0ZSk7XHJcbiAgICB0b2RvX19jb250ZW50LmFwcGVuZCh0b2RvX19idXR0b25zKTtcclxuICAgIHRvZG8uYXBwZW5kQ2hpbGQodG9kb19fY29udGVudCk7XHJcblxyXG4gICAgXHJcbiAgICAvL3RvZG8uYXBwZW5kQ2hpbGQodG9kb19fcHJvamVjdCk7XHJcbiAgICB0b2RvX19jb250YWluZXIuYXBwZW5kQ2hpbGQodG9kbyk7XHJcbiAgICBcclxuXHJcbiAgICAvLyBkZXNjcmlwdGlvblxyXG4gICAgY29uc3QgdG9kb19fZGV0YWlscyA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJkaXZcIiwgXCJ0b2RvX19kZXRhaWxzXCIpO1xyXG4gICAgY29uc3QgdG9kb19fZGVzY3JpcHRpb24gPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwicFwiLCBcImRlc2NyaXB0aW9uXCIpO1xyXG4gICAgdG9kb19fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgIGNvbnN0IHRvZG9fX2Z1bGx0aXRsZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJwXCIsIFwiZnVsbHRpdGxlXCIpO1xyXG4gICAgdG9kb19fZnVsbHRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB0b2RvX19kZXRhaWxzLmFwcGVuZENoaWxkKHRvZG9fX2Z1bGx0aXRsZSk7XHJcbiAgICB0b2RvX19kZXRhaWxzLmFwcGVuZENoaWxkKHRvZG9fX2Rlc2NyaXB0aW9uKTtcclxuICAgIHRvZG9fX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvX19kZXRhaWxzKTtcclxuICAgIHJldHVybiB0b2RvX19jb250YWluZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dEZXRhaWxzKGUpIHtcclxuICAgIGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QudG9nZ2xlKFxyXG5cdFx0XHRcInNob3dEZXRhaWxzXCJcclxuXHRcdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVRvZG9VSShlKSB7XHJcbiAgICBjb25zdCB0b2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3NcIik7XHJcbiAgICBjb25zdCB0b2RvID1cclxuXHRcdFx0ZS5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcclxuICAgICAgICAgICAgLnBhcmVudEVsZW1lbnQ7XHJcbiAgICB0b2Rvcy5yZW1vdmVDaGlsZCh0b2RvKTtcclxuICAgIGRlbGV0ZVRvZG8odG9kby5kYXRhc2V0LmlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZWRpdFRvZG8oZSkge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybVwiKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19oZWFkaW5nXCIpO1xyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSBcIkVkaXQgVGFza1wiO1xyXG5cdGNvbnN0IHRvZG8yID0gZ2V0VG9kb0J5SWQoXHJcblx0XHRlLmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxyXG5cdFx0XHQucGFyZW50RWxlbWVudC5kYXRhc2V0LmlkXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5sb2codG9kbzIpO1xyXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xyXG4gICAgdG9nZ2xlTW9kYWwoKTtcclxuICAgIGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwidGl0bGVcIikudmFsdWUgPSB0b2RvMi50aXRsZTtcclxuICAgIGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwiZGVzY3JpcHRpb25cIikudmFsdWUgPSB0b2RvMi5kZXNjcmlwdGlvbjtcclxuICAgIGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwicHJpb3JpdHlcIikudmFsdWUgPSB0b2RvMi5wcmlvcml0eTtcclxuICAgIGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwicHJvamVjdFwiKS52YWx1ZSA9IHRvZG8yLnByb2plY3Q7XHJcbiAgICBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcImRhdGVcIikudmFsdWUgPSB0b2RvMi5kdWVEYXRlO1xyXG4gICAgLy9nZXRBRG9jdW1lbnQoKTtcclxuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3JlYXRlXCIpO1xyXG4gICAgY3JlYXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgY29uc3QgdXBkYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cGRhdGVcIik7XHJcbiAgICB1cGRhdGVCdG4uY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgICB1cGRhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb25zdCBkaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0X190aXRsZVwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhkaXNwbGF5KTtcclxuICAgICAgICAvL2dldCBjdXJyZW50IHByb2plY3QgcGFnZSB5b3VyZSBvbiBpcyB0aGUgc2FtZSBhcyBuZXcgcHJvamVjdCwgcmUgcmVuZGVyIFVJXHJcbiAgICAgICAgaWYgKGRpc3BsYXkpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwicHJvamVjdFwiKS52YWx1ZSA9PT0gZGlzcGxheS50ZXh0Q29udGVudFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG8yKTtcclxuICAgICAgICAgICAgICB1cGRhdGVUb2RvVUkodG9kbzIpO1xyXG4gICAgICAgICAgICAgIHRvZ2dsZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgdXBkYXRlVG9kb1VJKHRvZG8yKTtcclxuICAgICAgICAvL2NvbnN0IHByb2plY3RUeXBlID0gZGlzcGxheS50ZXh0Q29udGVudDtcclxuICAgICAgICBjb25zdCBtaXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtaXNjZWxsYW5lb3VzXCIpO1xyXG4gICAgICAgIGNvbnN0IGhvbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhvbWVcIik7XHJcbiAgICAgICAgY29uc3Qgd29yayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid29ya1wiKTtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwidGl0bGVcIikudmFsdWU7XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJwcmlvcml0eVwiKS52YWx1ZTtcclxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJwcm9qZWN0XCIpLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcImRhdGVcIikudmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChwcm9qZWN0ID09PSBcIndvcmtcIikge1xyXG4gICAgICAgICAgICB1cGRhdGVUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIHRvZG8yLmlkLCB0b2RvMi5zdGF0dXMpO1xyXG4gICAgICAgICAgICB0b2dnbGVNb2RhbCgpO1xyXG4gICAgICAgICAgICB3b3JrLmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9qZWN0ID09PSBcImhvbWVcIikge1xyXG4gICAgICAgICAgICB1cGRhdGVUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIHRvZG8yLmlkLCB0b2RvMi5zdGF0dXMpO1xyXG4gICAgICAgICAgICB0b2dnbGVNb2RhbCgpO1xyXG4gICAgICAgICAgICBob21lLmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9qZWN0ID09PSBcIm1pc2NlbGxhbmVvdXNcIikge1xyXG4gICAgICAgICAgICB1cGRhdGVUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIHRvZG8yLmlkLCB0b2RvMi5zdGF0dXMpO1xyXG4gICAgICAgICAgICB0b2dnbGVNb2RhbCgpO1xyXG4gICAgICAgICAgICBtaXNjLmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVRvZG9VSSh0b2RvKSB7XHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb3JtXCIpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcInRpdGxlXCIpLnZhbHVlO1xyXG4gICAgLy9jb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb19fdGl0bGVcIikudmFsdWU7XHJcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XHJcbiAgICBjb25zdCBwcmlvcml0eSA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwicHJpb3JpdHlcIikudmFsdWU7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJwcm9qZWN0XCIpLnZhbHVlO1xyXG4gICAgY29uc3QgZGF0ZSA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwiZGF0ZVwiKS52YWx1ZTtcclxuICAgIGNvbnNvbGUubG9nKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIHByb2plY3QsIGRhdGUpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXNjcmlwdGlvblwiKS50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmlvcml0eVwiKS50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xyXG4gICBcclxuICAgIGlmIChwcmlvcml0eSA9PT0gXCJub3JtYWxcIikge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpb3JpdHlcIikuY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hcIik7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmlvcml0eVwiKS5jbGFzc0xpc3QuYWRkKFwibm9ybWFsXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocHJpb3JpdHkgPT09IFwiaGlnaFwiKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmlvcml0eVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwibm9ybWFsXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpb3JpdHlcIikuY2xhc3NMaXN0LmFkZChcImhpZ2hcIik7XHJcbiAgICB9XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9fX2RhdGVcIikudGV4dENvbnRlbnQgPSBkYXRlO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXNjcmlwdGlvblwiKS50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gICAgLy9jb25zb2xlLmxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9fX3Byb2plY3RcIikpO1xyXG4gICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvX19wcm9qZWN0XCIpLnRleHRDb250ZW50ID0gcHJvamVjdDtcclxuICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZnVsbHRpdGxlXCIpLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICBjb25zb2xlLmxvZyh0b2RvLmlkKTtcclxuICAgIHVwZGF0ZVRvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgdG9kby5pZCwgdG9kby5zdGF0dXMpO1xyXG4gICAgLy9kb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcclxufVxyXG5cclxuZXhwb3J0IHsgcmVuZGVyVG9kbyB9OyIsImltcG9ydCB7IHRvZ2dsZU1vZGFsLCBnZXRUb2RheXNEYXRlIH0gZnJvbSBcIi4vbW9kYWwuanNcIjtcclxuaW1wb3J0IHsgcmVuZGVyUHJvamVjdFVJLCByZW5kZXJQcm9qZWN0SGVhZGVyIH0gZnJvbSBcIi4vcHJvamVjdHMuanNcIjtcclxuaW1wb3J0IHsgcmVuZGVyVGFza3NVSSwgcmVuZGVyVGFza3NIZWFkZXIgfSBmcm9tIFwiLi90YXNrcy5qc1wiO1xyXG5pbXBvcnQgeyByZW5kZXJUb2RvIH0gZnJvbSBcIi4vcmVuZGVyVG9kby5qc1wiO1xyXG5pbXBvcnQgeyByZXNldEluYm94Q291bnQsIHNob3dJbmJveCwgdXBkYXRlSW5ib3hDb3VudCB9IGZyb20gXCIuL2luYm94LmpzXCI7XHJcbmltcG9ydCB7IGRhc2hib2FyZCwgZ2V0VXNlcm5hbWUsIGdldExvZ2luU3RhdHVzLCBzZXRMb2dpblN0YXR1cyB9IGZyb20gXCIuL2F1dGguanNcIjtcclxuaW1wb3J0IHtcclxuICBnZXRGaXJlc3RvcmUsXHJcbiAgZG9jLFxyXG4gIGdldERvYyxcclxuICBzZXREb2MsXHJcbiAgY29sbGVjdGlvbixcclxuICB1cGRhdGVEb2MsXHJcbiAgZGVsZXRlRG9jLFxyXG4gIGFkZERvYyxcclxuICBnZXREb2NzLFxyXG4gIG9uU25hcHNob3QsXHJcbn0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG5pbXBvcnQgeyBjbG9zZVNpZGViYXIgfSBmcm9tIFwiLi9oZWFkZXIuanNcIjtcclxuXHJcbmxldCBpbmJveCA9IFtdO1xyXG5cclxuXHJcbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xyXG4gIGFwaUtleTogXCJBSXphU3lCUHdILVBzU3J3ekZqcjZ2OExVTXdiWmtiRnM4eDdVYWNcIixcclxuICBhdXRoRG9tYWluOiBcInByb2R1Y3Rpdi05MzJjOS5maXJlYmFzZWFwcC5jb21cIixcclxuICBwcm9qZWN0SWQ6IFwicHJvZHVjdGl2LTkzMmM5XCIsXHJcbiAgc3RvcmFnZUJ1Y2tldDogXCJwcm9kdWN0aXYtOTMyYzkuYXBwc3BvdC5jb21cIixcclxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCIyMzIxMTA0MDUyODVcIixcclxuICBhcHBJZDogXCIxOjIzMjExMDQwNTI4NTp3ZWI6ZDM3ZDE0MzdiYzkzZjA3N2MxM2Y0Y1wiLFxyXG4gIG1lYXN1cmVtZW50SWQ6IFwiRy1DUjE5M1lYVzdSXCIsXHJcbn07XHJcblxyXG5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuXHJcbmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKCk7XHJcbmxldCB0b2RvcyA9IFtdO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsRGF0YSh1c2VybmFtZSkge1xyXG4gIGNvbnNvbGUubG9nKFwiZ2V0IGFsbCBkYXRhIGNhbGxlZFwiLCB1c2VybmFtZSk7XHJcbiAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgYCR7dXNlcm5hbWV9dGFza3NgKSk7XHJcblx0Y29uc29sZS5sb2cocXVlcnlTbmFwc2hvdCk7XHJcblx0aW5ib3ggPSBbXTtcclxuICB0b2RvcyA9IFtdO1xyXG4gIC8vcmVzZXQgaW5ib3ggY291bnRcclxuICByZXNldEluYm94Q291bnQoKTtcclxuICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xyXG4gICAgLy9lbXB0eSBpbmJveCBhbmQgdG9kb3NcclxuXHRcdFxyXG4gICAgLy8gY29uc29sZS5sb2coZG9jLmRhdGEoKSk7XHJcbiAgICBpZiAoXHJcbiAgICAgIGRvYy5kYXRhKCkuZHVlRGF0ZSA8PSBnZXRUb2RheXNEYXRlKCkgJiZcclxuICAgICAgZG9jLmRhdGEoKS5zdGF0dXMgPT09IFwidW5yZWFkXCJcclxuICAgICkge1xyXG4gICAgICBpbmJveC5wdXNoKGRvYy5kYXRhKCkpO1xyXG4gICAgICB1cGRhdGVJbmJveENvdW50KFwiYWRkXCIpO1xyXG4gICAgfVxyXG4gICAgdG9kb3MucHVzaChkb2MuZGF0YSgpKTtcclxuICB9KTtcclxuICAgIFx0Ly9jb25zb2xlLmxvZyh0b2Rvcy5sZW5ndGgpO1xyXG4gIC8vIGlmIGZpcnN0IGxvZ2luIG9yIHNpZ251cFxyXG4gIGlmIChnZXRMb2dpblN0YXR1cygpID09PSB0cnVlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImZpcnN0IGxvZ2luXCIpO1xyXG4gICAgZGFzaGJvYXJkLmNsaWNrKCk7XHJcbiAgICBzZXRMb2dpblN0YXR1cyhmYWxzZSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLy9hZGQgdG8gZmlyZXN0b3JlIGF1dG8gaWRcclxuYXN5bmMgZnVuY3Rpb24gYWRkRG9jdW1lbnQoXHJcbiAgdGl0bGUsXHJcbiAgZGVzY3JpcHRpb24sXHJcbiAgZHVlRGF0ZSxcclxuICBwcmlvcml0eSxcclxuICBwcm9qZWN0LFxyXG4gIGlkLFxyXG4gIHN0YXR1c1xyXG4pIHtcclxuICBjb25zdCByZWYgPSBjb2xsZWN0aW9uKGRiLCBgJHtnZXRVc2VybmFtZSgpfXRhc2tzYCk7XHJcbiAgY29uc3QgZG9jcmVmID0gYXdhaXQgYWRkRG9jKHJlZiwge1xyXG4gICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgZGVzY2lwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICBkdWVEYXRlOiBkdWVEYXRlLFxyXG4gICAgcHJpb3JpdHk6IHByaW9yaXR5LFxyXG4gICAgcHJvamVjdDogcHJvamVjdCxcclxuICAgIGlkOiBpZCxcclxuICAgIHN0YXR1czogc3RhdHVzLFxyXG4gIH0pO1xyXG59XHJcblxyXG4vL2FkZCB0byBmaXJlc3RvcmUgY3VzdG9tIGlkXHJcbmFzeW5jIGZ1bmN0aW9uIGFkZERvY3VtZW50Q3VzdG9tSUQoXHJcbiAgdGl0bGUsXHJcbiAgZGVzY3JpcHRpb24sXHJcbiAgZHVlRGF0ZSxcclxuICBwcmlvcml0eSxcclxuICBwcm9qZWN0LFxyXG4gIGlkLFxyXG4gIHN0YXR1c1xyXG4pIHtcclxuICBjb25zdCByZWYgPSBkb2MoZGIsIGAke2dldFVzZXJuYW1lKCl9dGFza3NgLCBTdHJpbmcoaWQpKTtcclxuICBhd2FpdCBzZXREb2MocmVmLCB7XHJcbiAgICB0aXRsZTogdGl0bGUsXHJcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICBkdWVEYXRlOiBkdWVEYXRlLFxyXG4gICAgcHJpb3JpdHk6IHByaW9yaXR5LFxyXG4gICAgcHJvamVjdDogcHJvamVjdCxcclxuICAgIGlkOiBpZCxcclxuICAgIHN0YXR1czogc3RhdHVzLFxyXG4gIH0pO1xyXG59XHJcblxyXG4vL2dldCBhIGRvY3VtZW50XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFEb2N1bWVudCgpIHtcclxuICBjb25zdCByZWYgPSBkb2MoZGIsIGAke2dldFVzZXJuYW1lKCl9dGFza3NgLCBpZCk7XHJcbiAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhyZWYpO1xyXG4gIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XHJcbiAgICB0aXRsZS52YWx1ZSA9IGRvY1NuYXAuZGF0YSgpLnRpdGxlO1xyXG4gICAgZGVzY3JpcHRpb24udmFsdWUgPSBkb2NTbmFwLmRhdGEoKS5kZXNjcmlwdGlvbjtcclxuICAgIGR1ZURhdGUudmFsdWUgPSBkb2NTbmFwLmRhdGEoKS5kdWVEYXRlO1xyXG4gICAgcHJpb3JpdHkudmFsdWUgPSBkb2NTbmFwLmRhdGEoKS5wcmlvcml0eTtcclxuICAgIHByb2plY3QudmFsdWUgPSBkb2NTbmFwLmRhdGEoKS5wcm9qZWN0O1xyXG4gICAgaWQudmFsdWUgPSBkb2NTbmFwLmRhdGEoKS5pZDtcclxuICB9XHJcbn1cclxuXHJcbi8vdXBkYXRlIGEgZG9jdW1lbnRcclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRG9jdW1lbnQoXHJcbiAgdGl0bGUsXHJcbiAgZGVzY3JpcHRpb24sXHJcbiAgZHVlRGF0ZSxcclxuICBwcmlvcml0eSxcclxuICBwcm9qZWN0LFxyXG4gIGlkLFxyXG4gIHN0YXR1c1xyXG4pIHtcclxuICBjb25zdCByZWYgPSBkb2MoZGIsIGAke2dldFVzZXJuYW1lKCl9dGFza3NgLCBTdHJpbmcoaWQpKTtcclxuICBhd2FpdCB1cGRhdGVEb2MocmVmLCB7XHJcbiAgICB0aXRsZTogdGl0bGUsXHJcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICBkdWVEYXRlOiBkdWVEYXRlLFxyXG4gICAgcHJpb3JpdHk6IHByaW9yaXR5LFxyXG4gICAgcHJvamVjdDogcHJvamVjdCxcclxuICAgIGlkOiBpZCxcclxuICAgIHN0YXR1czogc3RhdHVzLFxyXG4gIH0pO1xyXG59XHJcblxyXG4vL2RlbGV0ZSBhIGRvY3VtZW50XHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZURvY3VtZW50KGlkKSB7XHJcbiAgY29uc3QgcmVmID0gZG9jKGRiLCBgJHtnZXRVc2VybmFtZSgpfXRhc2tzYCwgaWQpO1xyXG4gIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MocmVmKTtcclxuXHJcbiAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcclxuICAgIGRlbGV0ZURvYyhyZWYpO1xyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgVG9kb3Mge1xyXG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIGlkLCBzdGF0dXMpIHtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbiAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgfVxyXG5cclxuICBnZXRUaXRsZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnRpdGxlO1xyXG4gIH1cclxuXHJcbiAgc2V0VGl0bGUodGl0bGUpIHtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICB9XHJcblxyXG4gIGdldERlc2NyaXB0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBzZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbikge1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0RHVlRGF0ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmR1ZURhdGU7XHJcbiAgfVxyXG5cclxuICBzZXREdWVEYXRlKGR1ZURhdGUpIHtcclxuICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgfVxyXG5cclxuICBnZXRQcmlvcml0eSgpIHtcclxuICAgIHJldHVybiB0aGlzLnByaW9yaXR5O1xyXG4gIH1cclxuXHJcbiAgc2V0UHJpb3JpdHkocHJpb3JpdHkpIHtcclxuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9qZWN0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvamVjdDtcclxuICB9XHJcblxyXG4gIHNldFByb2plY3QocHJvamVjdCkge1xyXG4gICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICB9XHJcblxyXG4gIHNldElkKGlkKSB7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgfVxyXG5cclxuICBnZXRTdGF0dXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0dXM7XHJcbiAgfVxyXG5cclxuICBzZXRTdGF0dXMoc3RhdHVzKSB7XHJcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvcHVsYXRlVG9kbyhlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XHJcbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZVwiKS52YWx1ZTtcclxuICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIikudmFsdWU7XHJcbiAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdFwiKS52YWx1ZTtcclxuICBjb25zdCBpZCA9IE1hdGgucmFuZG9tKCk7XHJcbiAgY29uc3Qgc3RhdHVzID0gXCJ1bnJlYWRcIjtcclxuICBjb25zdCBuZXdUb2RvID0gbmV3IFRvZG9zKFxyXG4gICAgdGl0bGUsXHJcbiAgICBkZXNjcmlwdGlvbixcclxuICAgIGRhdGUsXHJcbiAgICBwcmlvcml0eSxcclxuICAgIHByb2plY3QsXHJcbiAgICBpZCxcclxuICAgIHN0YXR1c1xyXG4gICk7XHJcblxyXG4gIHRvZG9zLnB1c2gobmV3VG9kbyk7XHJcbiAgYWRkRG9jdW1lbnRDdXN0b21JRCh0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCBpZCwgc3RhdHVzKTtcclxuICBpZiAoZGF0ZSA9PT0gZ2V0VG9kYXlzRGF0ZSgpKSB7XHJcbiAgICBpbmJveC51bnNoaWZ0KG5ld1RvZG8pO1xyXG4gICAgdXBkYXRlSW5ib3hDb3VudChcImFkZFwiKTtcclxuICB9XHJcbiAgdG9nZ2xlTW9kYWwoKTtcclxuICBjb25zdCBtYWluVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fZGlzcGxheVwiKTtcclxuICBpZiAobWFpblRpdGxlLnRleHRDb250ZW50ID09PSBcIkluYm94XCIpIHtcclxuICAgIHNob3dJbmJveChpbmJveCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzb3J0VG9kb3NCeVByb2plY3QoZSkge1xyXG4gIGNsb3NlU2lkZWJhcigpO1xyXG4gIGNvbnN0IHNvcnRlZEJ5UHJvamVjdCA9IHRvZG9zLmZpbHRlcigodG9kbykgPT4ge1xyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHRvZG8pIHtcclxuICAgICAgaWYgKHRvZG9bcHJvcF0gPT09IGUuY3VycmVudFRhcmdldC5pZCkge1xyXG4gICAgICAgIHJldHVybiB0b2RvO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmVuZGVyUHJvamVjdEhlYWRlcihlLmN1cnJlbnRUYXJnZXQuaWQpO1xyXG4gIHJlbmRlclByb2plY3RVSShzb3J0ZWRCeVByb2plY3QpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzb3J0VG9kb3NCeVRhc2soZSkge1xyXG4gIGNsb3NlU2lkZWJhcigpO1xyXG4gIGxldCBzb3J0ZWRUb2RvcyA9IFtdO1xyXG4gIGlmIChlLmN1cnJlbnRUYXJnZXQuaWQgPT09IFwidG9kYXlcIikge1xyXG4gICAgc29ydGVkVG9kb3MgPSB0b2Rvcy5maWx0ZXIoKHRvZG8pID0+IHtcclxuICAgICAgcmV0dXJuIHRvZG8uZHVlRGF0ZSA9PT0gZ2V0VG9kYXlzRGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIGlmIChlLmN1cnJlbnRUYXJnZXQuaWQgPT09IFwib3ZlcmR1ZVwiKSB7XHJcbiAgICBzb3J0ZWRUb2RvcyA9IHRvZG9zLmZpbHRlcigodG9kbykgPT4ge1xyXG4gICAgICByZXR1cm4gdG9kby5kdWVEYXRlIDwgZ2V0VG9kYXlzRGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIGlmIChlLmN1cnJlbnRUYXJnZXQuaWQgPT09IFwidXBjb21pbmdcIikge1xyXG4gICAgc29ydGVkVG9kb3MgPSB0b2Rvcy5maWx0ZXIoKHRvZG8pID0+IHtcclxuICAgICAgcmV0dXJuIHRvZG8uZHVlRGF0ZSA+IGdldFRvZGF5c0RhdGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZW5kZXJUYXNrc0hlYWRlcihlLmN1cnJlbnRUYXJnZXQuaWQpO1xyXG4gIHJlbmRlclRhc2tzVUkoc29ydGVkVG9kb3MpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93QWxsVGFza3MoZSkge1xyXG4gIGNsb3NlU2lkZWJhcigpO1xyXG4gIHJlbmRlclRhc2tzSGVhZGVyKGUuY3VycmVudFRhcmdldC5pZCk7XHJcbiAgcmVuZGVyVGFza3NVSSh0b2Rvcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRvZG9CeUlkKGlkKSB7XHJcbiAgY29uc3QgbWF0Y2ggPSBbXTtcclxuICB0b2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyh0eXBlb2YgdG9kby5pZCwgdHlwZW9mIGlkKTtcclxuICAgIGlmICh0b2RvLmlkID09IGlkKSB7XHJcbiAgICAgIG1hdGNoLnB1c2godG9kbyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIG1hdGNoWzBdO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVUb2RvKFxyXG4gIHRpdGxlLFxyXG4gIGRlc2NyaXB0aW9uLFxyXG4gIGR1ZURhdGUsXHJcbiAgcHJpb3JpdHksXHJcbiAgcHJvamVjdCxcclxuICBpZCxcclxuICBzdGF0dXNcclxuKSB7XHJcbiAgdG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xyXG4gICAgY29uc29sZS5sb2codG9kby5pZCwgaWQpO1xyXG4gICAgaWYgKHRvZG8uaWQgPT09IGlkKSB7XHJcbiAgICAgIC8vIHRvZG8uc2V0VGl0bGUodGl0bGUpO1xyXG4gICAgICAvLyB0b2RvLnNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKTtcclxuICAgICAgLy8gdG9kby5zZXREdWVEYXRlKGR1ZURhdGUpO1xyXG4gICAgICAvLyB0b2RvLnNldFByaW9yaXR5KHByaW9yaXR5KTtcclxuICAgICAgLy8gdG9kby5zZXRQcm9qZWN0KHByb2plY3QpO1xyXG4gICAgICAvLyB0b2RvLnNldFN0YXR1cyhzdGF0dXMpO1xyXG4gICAgICB0b2RvLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgIHRvZG8uZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgdG9kby5kdWVEYXRlID0gZHVlRGF0ZTtcclxuICAgICAgdG9kby5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICB0b2RvLnByb2plY3QgPSBwcm9qZWN0O1xyXG4gICAgICB0b2RvLnN0YXR1cyA9IHN0YXR1cztcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHRvZG8pO1xyXG4gIH0pO1xyXG4gIGNvbnNvbGUubG9nKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIGlkLCBzdGF0dXMpO1xyXG4gIGNvbnNvbGUubG9nKHRvZG9zKTtcclxuICB1cGRhdGVEb2N1bWVudCh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCBpZCwgc3RhdHVzKTtcclxuICAvL2dldEFsbERhdGEoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlVG9kbyhpZCkge1xyXG4gIHRvZG9zLmZvckVhY2goKHRvZG8sIGluZGV4KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyh0b2RvKTtcclxuICAgIGlmICh0b2RvLmlkID09PSBpZCkge1xyXG4gICAgICB0b2Rvcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImhlcmVcIik7XHJcbiAgICAgIGRlbGV0ZURvY3VtZW50KGlkKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlSW5ib3hNZXNzYWdlKGlkKSB7XHJcbiAgaW5ib3guZm9yRWFjaCgodG9kbywgaW5kZXgpID0+IHtcclxuICAgIGlmICh0b2RvLmlkID09PSBpZCkge1xyXG4gICAgICBpbmJveC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRJbmJveCgpIHtcclxuICBjbG9zZVNpZGViYXIoKTtcclxuICBzaG93SW5ib3goaW5ib3gpO1xyXG59XHJcblxyXG4vL2dldCAjIHRhc2tzXHJcbmZ1bmN0aW9uIGdldE51bVRhc2tzKCkge1xyXG4gZ2V0QWxsRGF0YShnZXRVc2VybmFtZSgpKTtcclxuXHRsZXQgY291bnQ7XHJcblx0Ly8gY29uc29sZS5sb2coXCJ0b2Rvc1wiLCB0b2Rvcy5sZW5ndGgpO1xyXG4gIHRvZG9zLmxlbmd0aCA+IDAgPyAoY291bnQgPSB0b2Rvcy5sZW5ndGgpIDogKGNvdW50ID0gMCk7XHJcbiAgcmV0dXJuIGNvdW50O1xyXG59XHJcblxyXG4vL2dldCB1bnJlYWQgdGFza3NcclxuZnVuY3Rpb24gZ2V0VXBjb21pbmdUYXNrcygpIHtcclxuXHRnZXRBbGxEYXRhKGdldFVzZXJuYW1lKCkpO1xyXG5cdC8vIGNvbnNvbGUubG9nKFwidG9kb3NcIiwgdG9kb3MubGVuZ3RoKTtcclxuICBsZXQgY291bnQ7XHJcbiAgY29uc3QgdW5yZWFkID0gdG9kb3MuZmlsdGVyKCh0b2RvKSA9PiB7XHJcbiAgICByZXR1cm4gdG9kby5kdWVEYXRlID4gZ2V0VG9kYXlzRGF0ZSgpO1xyXG4gIH0pO1xyXG4gIHVucmVhZC5sZW5ndGggPiAwID8gKGNvdW50ID0gdW5yZWFkLmxlbmd0aCkgOiAoY291bnQgPSAwKTtcclxuICByZXR1cm4gY291bnQ7XHJcbn1cclxuXHJcbi8vZ2V0IG92ZXJkdWUgdGFza3NcclxuZnVuY3Rpb24gZ2V0T3ZlcmR1ZVRhc2tzKCkge1xyXG5cdGdldEFsbERhdGEoZ2V0VXNlcm5hbWUoKSk7XHJcblx0Y29uc29sZS5sb2coXCJvdmVyZHVlIHRvZG9zXCIsIHRvZG9zKTtcclxuXHRsZXQgY291bnQ7XHJcbiAgY29uc3Qgb3ZlcmR1ZSA9IHRvZG9zLmZpbHRlcigodG9kbykgPT4ge1xyXG4gICAgY29uc29sZS5sb2codG9kby5kdWVEYXRlIDwgZ2V0VG9kYXlzRGF0ZSgpKTtcclxuICAgIHJldHVybiB0b2RvLmR1ZURhdGUgPCBnZXRUb2RheXNEYXRlKCk7XHJcbiAgfSk7XHJcbiAgY29uc29sZS5sb2coXCJvdmVyZHVlIHRhc2tzXCIsIG92ZXJkdWUpO1xyXG4gIG92ZXJkdWUubGVuZ3RoID4gMCA/IChjb3VudCA9IG92ZXJkdWUubGVuZ3RoKSA6IChjb3VudCA9IDApO1xyXG4gIHJldHVybiBjb3VudDtcclxufVxyXG4vL2dldCBkdWUgdG9kYXkgdGFza3NcclxuZnVuY3Rpb24gZ2V0VG9kYXlzTnVtVGFza3MoKSB7XHJcblx0Z2V0QWxsRGF0YShnZXRVc2VybmFtZSgpKTtcclxuXHRjb25zb2xlLmxvZyhcInRvZG9zXCIsIHRvZG9zLmxlbmd0aCk7XHJcbiAgbGV0IGNvdW50O1xyXG4gIGNvbnN0IHRvZGF5ID0gdG9kb3MuZmlsdGVyKCh0b2RvKSA9PiB7XHJcbiAgICByZXR1cm4gdG9kby5kdWVEYXRlID09PSBnZXRUb2RheXNEYXRlKCk7XHJcbiAgfSk7XHJcbiAgdG9kYXkubGVuZ3RoID4gMCA/IChjb3VudCA9IHRvZGF5Lmxlbmd0aCkgOiAoY291bnQgPSAwKTtcclxuICByZXR1cm4gY291bnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERhc2hib2FyZENvdW50cygpIHtcclxuXHRsZXQgZGFzaGJvYXJkQ291bnRzID0gW107XHJcblx0ZGFzaGJvYXJkQ291bnRzWzBdID0gZ2V0TnVtVGFza3MoKTtcclxuXHRkYXNoYm9hcmRDb3VudHNbMV0gPSBnZXRVcGNvbWluZ1Rhc2tzKCk7XHJcblx0ZGFzaGJvYXJkQ291bnRzWzJdID0gZ2V0T3ZlcmR1ZVRhc2tzKCk7XHJcblx0ZGFzaGJvYXJkQ291bnRzWzNdID0gZ2V0VG9kYXlzTnVtVGFza3MoKTtcclxuXHRjb25zb2xlLmxvZyhkYXNoYm9hcmRDb3VudHMpO1xyXG5cdHJldHVybiBkYXNoYm9hcmRDb3VudHM7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgcG9wdWxhdGVUb2RvLFxyXG4gIHNvcnRUb2Rvc0J5UHJvamVjdCxcclxuICBnZXRUb2RvQnlJZCxcclxuICB1cGRhdGVUb2RvLFxyXG4gIGRlbGV0ZVRvZG8sXHJcbiAgc2hvd0FsbFRhc2tzLFxyXG4gIHNvcnRUb2Rvc0J5VGFzayxcclxuICBnZXRJbmJveCxcclxuICBkZWxldGVJbmJveE1lc3NhZ2UsXHJcbiAgZ2V0QURvY3VtZW50LFxyXG4gIHVwZGF0ZURvY3VtZW50LFxyXG4gIGdldEFsbERhdGEsXHJcbiAgZ2V0TnVtVGFza3MsXHJcblx0Z2V0VG9kYXlzTnVtVGFza3MsXHJcblx0Z2V0VXBjb21pbmdUYXNrcyxcclxuXHRnZXRPdmVyZHVlVGFza3MsXHJcbiAgZ2V0RGFzaGJvYXJkQ291bnRzXHJcbn07XHJcbiIsImltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgU0RLX1ZFUlNJT04gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciwgY3JlYXRlTW9ja1VzZXJUb2tlbiwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmksIGlzTW9iaWxlQ29yZG92YSwgaXNSZWFjdE5hdGl2ZSwgaXNFbGVjdHJvbiwgaXNJRSwgaXNVV1AsIGlzQnJvd3NlckV4dGVuc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFhocklvLCBFdmVudFR5cGUsIEVycm9yQ29kZSwgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZ2V0U3RhdEV2ZW50VGFyZ2V0LCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBXZWJDaGFubmVsLCBFdmVudCwgU3RhdCB9IGZyb20gJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInO1xuXG5jb25zdCBEID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIEMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy51aWQgPSB0O1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIEMuVU5BVVRIRU5USUNBVEVEID0gbmV3IEMobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuQy5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgQyhcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIEMuRklSU1RfUEFSVFkgPSBuZXcgQyhcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5DLk1PQ0tfVVNFUiA9IG5ldyBDKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IE4gPSBcIjkuNi4yXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBrID0gbmV3IExvZ2dlcihcIkBmaXJlYmFzZS9maXJlc3RvcmVcIik7XG5cbi8vIEhlbHBlciBtZXRob2RzIGFyZSBuZWVkZWQgYmVjYXVzZSB2YXJpYWJsZXMgY2FuJ3QgYmUgZXhwb3J0ZWQgYXMgcmVhZC93cml0ZVxuZnVuY3Rpb24geCgpIHtcbiAgICByZXR1cm4gay5sb2dMZXZlbDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB2ZXJib3NpdHkgb2YgQ2xvdWQgRmlyZXN0b3JlIGxvZ3MgKGRlYnVnLCBlcnJvciwgb3Igc2lsZW50KS5cbiAqXG4gKiBAcGFyYW0gbG9nTGV2ZWwgLSBUaGUgdmVyYm9zaXR5IHlvdSBzZXQgZm9yIGFjdGl2aXR5IGFuZCBlcnJvciBsb2dnaW5nLiBDYW5cbiAqICAgYmUgYW55IG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICpcbiAqICAgPHVsPlxuICogICAgIDxsaT5gZGVidWdgIGZvciB0aGUgbW9zdCB2ZXJib3NlIGxvZ2dpbmcgbGV2ZWwsIHByaW1hcmlseSBmb3JcbiAqICAgICBkZWJ1Z2dpbmcuPC9saT5cbiAqICAgICA8bGk+YGVycm9yYCB0byBsb2cgZXJyb3JzIG9ubHkuPC9saT5cbiAqICAgICA8bGk+PGNvZGU+YHNpbGVudGAgdG8gdHVybiBvZmYgbG9nZ2luZy48L2xpPlxuICogICA8L3VsPlxuICovIGZ1bmN0aW9uICQodCkge1xuICAgIGsuc2V0TG9nTGV2ZWwodCk7XG59XG5cbmZ1bmN0aW9uIE8odCwgLi4uZSkge1xuICAgIGlmIChrLmxvZ0xldmVsIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChMKTtcbiAgICAgICAgay5kZWJ1ZyhgRmlyZXN0b3JlICgke059KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRih0LCAuLi5lKSB7XG4gICAgaWYgKGsubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKEwpO1xuICAgICAgICBrLmVycm9yKGBGaXJlc3RvcmUgKCR7Tn0pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIE0odCwgLi4uZSkge1xuICAgIGlmIChrLmxvZ0xldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKEwpO1xuICAgICAgICBrLndhcm4oYEZpcmVzdG9yZSAoJHtOfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYWRkaXRpb25hbCBsb2cgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIEwodCkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdDtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZSA9IHQsIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gQ29udmVydGluZyB0byBKU09OIGZhaWxlZCwganVzdCBsb2cgdGhlIG9iamVjdCBkaXJlY3RseVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKiogRm9ybWF0cyBhbiBvYmplY3QgYXMgYSBKU09OIHN0cmluZywgc3VpdGFibGUgZm9yIGxvZ2dpbmcuICovXG4gICAgdmFyIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqXG4gKiBSZXR1cm5zIGBuZXZlcmAgYW5kIGNhbiBiZSB1c2VkIGluIGV4cHJlc3Npb25zOlxuICogQGV4YW1wbGVcbiAqIGxldCBmdXR1cmVWYXIgPSBmYWlsKCdub3QgaW1wbGVtZW50ZWQgeWV0Jyk7XG4gKi8gZnVuY3Rpb24gQih0ID0gXCJVbmV4cGVjdGVkIHN0YXRlXCIpIHtcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cbiAgICBjb25zdCBlID0gYEZJUkVTVE9SRSAoJHtOfSkgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIHQ7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIEZpcmVzdG9yZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxuICAgIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXG4gICAgdGhyb3cgRihlKSwgbmV3IEVycm9yKGUpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICovIGZ1bmN0aW9uIFUodCwgZSkge1xuICAgIHQgfHwgQigpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogVGhlIGNvZGUgb2YgY2FsbHNpdGVzIGludm9raW5nIHRoaXMgZnVuY3Rpb24gYXJlIHN0cmlwcGVkIG91dCBpbiBwcm9kdWN0aW9uXG4gKiBidWlsZHMuIEFueSBzaWRlLWVmZmVjdHMgb2YgY29kZSB3aXRoaW4gdGhlIGRlYnVnQXNzZXJ0KCkgaW52b2NhdGlvbiB3aWxsIG5vdFxuICogaGFwcGVuIGluIHRoaXMgY2FzZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBxKHQsIGUpIHtcbiAgICB0IHx8IEIoKTtcbn1cblxuLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAuIEluIG5vbi1wcm9kdWN0aW9uIGJ1aWxkcywgdmVyaWZpZXMgdGhhdCBgb2JqYCBpcyBhblxuICogaW5zdGFuY2Ugb2YgYFRgIGJlZm9yZSBjYXN0aW5nLlxuICovIGZ1bmN0aW9uIEsodCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBqID0ge1xuICAgIC8vIENhdXNlcyBhcmUgY29waWVkIGZyb206XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAgICAvKiogTm90IGFuIGVycm9yOyByZXR1cm5lZCBvbiBzdWNjZXNzLiAqL1xuICAgIE9LOiBcIm9rXCIsXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gd2FzIGNhbmNlbGxlZCAodHlwaWNhbGx5IGJ5IHRoZSBjYWxsZXIpLiAqL1xuICAgIENBTkNFTExFRDogXCJjYW5jZWxsZWRcIixcbiAgICAvKiogVW5rbm93biBlcnJvciBvciBhbiBlcnJvciBmcm9tIGEgZGlmZmVyZW50IGVycm9yIGRvbWFpbi4gKi9cbiAgICBVTktOT1dOOiBcInVua25vd25cIixcbiAgICAvKipcbiAgICAgKiBDbGllbnQgc3BlY2lmaWVkIGFuIGludmFsaWQgYXJndW1lbnQuIE5vdGUgdGhhdCB0aGlzIGRpZmZlcnMgZnJvbVxuICAgICAqIEZBSUxFRF9QUkVDT05ESVRJT04uIElOVkFMSURfQVJHVU1FTlQgaW5kaWNhdGVzIGFyZ3VtZW50cyB0aGF0IGFyZVxuICAgICAqIHByb2JsZW1hdGljIHJlZ2FyZGxlc3Mgb2YgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0gKGUuZy4sIGEgbWFsZm9ybWVkIGZpbGVcbiAgICAgKiBuYW1lKS5cbiAgICAgKi9cbiAgICBJTlZBTElEX0FSR1VNRU5UOiBcImludmFsaWQtYXJndW1lbnRcIixcbiAgICAvKipcbiAgICAgKiBEZWFkbGluZSBleHBpcmVkIGJlZm9yZSBvcGVyYXRpb24gY291bGQgY29tcGxldGUuIEZvciBvcGVyYXRpb25zIHRoYXRcbiAgICAgKiBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0sIHRoaXMgZXJyb3IgbWF5IGJlIHJldHVybmVkIGV2ZW4gaWYgdGhlXG4gICAgICogb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiBGb3IgZXhhbXBsZSwgYSBzdWNjZXNzZnVsIHJlc3BvbnNlXG4gICAgICogZnJvbSBhIHNlcnZlciBjb3VsZCBoYXZlIGJlZW4gZGVsYXllZCBsb25nIGVub3VnaCBmb3IgdGhlIGRlYWRsaW5lIHRvXG4gICAgICogZXhwaXJlLlxuICAgICAqL1xuICAgIERFQURMSU5FX0VYQ0VFREVEOiBcImRlYWRsaW5lLWV4Y2VlZGVkXCIsXG4gICAgLyoqIFNvbWUgcmVxdWVzdGVkIGVudGl0eSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIHdhcyBub3QgZm91bmQuICovXG4gICAgTk9UX0ZPVU5EOiBcIm5vdC1mb3VuZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgZW50aXR5IHRoYXQgd2UgYXR0ZW1wdGVkIHRvIGNyZWF0ZSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIGFscmVhZHlcbiAgICAgKiBleGlzdHMuXG4gICAgICovXG4gICAgQUxSRUFEWV9FWElTVFM6IFwiYWxyZWFkeS1leGlzdHNcIixcbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGVyIGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiB0byBleGVjdXRlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgZm9yIHJlamVjdGlvbnMgY2F1c2VkIGJ5IGV4aGF1c3RpbmdcbiAgICAgKiBzb21lIHJlc291cmNlICh1c2UgUkVTT1VSQ0VfRVhIQVVTVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBpZiB0aGUgY2FsbGVyIGNhbiBub3QgYmUgaWRlbnRpZmllZFxuICAgICAqICh1c2UgVU5BVVRIRU5USUNBVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICovXG4gICAgUEVSTUlTU0lPTl9ERU5JRUQ6IFwicGVybWlzc2lvbi1kZW5pZWRcIixcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHZhbGlkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGVcbiAgICAgKiBvcGVyYXRpb24uXG4gICAgICovXG4gICAgVU5BVVRIRU5USUNBVEVEOiBcInVuYXV0aGVudGljYXRlZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgcmVzb3VyY2UgaGFzIGJlZW4gZXhoYXVzdGVkLCBwZXJoYXBzIGEgcGVyLXVzZXIgcXVvdGEsIG9yIHBlcmhhcHMgdGhlXG4gICAgICogZW50aXJlIGZpbGUgc3lzdGVtIGlzIG91dCBvZiBzcGFjZS5cbiAgICAgKi9cbiAgICBSRVNPVVJDRV9FWEhBVVNURUQ6IFwicmVzb3VyY2UtZXhoYXVzdGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyByZWplY3RlZCBiZWNhdXNlIHRoZSBzeXN0ZW0gaXMgbm90IGluIGEgc3RhdGUgcmVxdWlyZWQgZm9yXG4gICAgICogdGhlIG9wZXJhdGlvbidzIGV4ZWN1dGlvbi4gRm9yIGV4YW1wbGUsIGRpcmVjdG9yeSB0byBiZSBkZWxldGVkIG1heSBiZVxuICAgICAqIG5vbi1lbXB0eSwgYW4gcm1kaXIgb3BlcmF0aW9uIGlzIGFwcGxpZWQgdG8gYSBub24tZGlyZWN0b3J5LCBldGMuXG4gICAgICpcbiAgICAgKiBBIGxpdG11cyB0ZXN0IHRoYXQgbWF5IGhlbHAgYSBzZXJ2aWNlIGltcGxlbWVudG9yIGluIGRlY2lkaW5nXG4gICAgICogYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELCBhbmQgVU5BVkFJTEFCTEU6XG4gICAgICogIChhKSBVc2UgVU5BVkFJTEFCTEUgaWYgdGhlIGNsaWVudCBjYW4gcmV0cnkganVzdCB0aGUgZmFpbGluZyBjYWxsLlxuICAgICAqICAoYikgVXNlIEFCT1JURUQgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkgYXQgYSBoaWdoZXItbGV2ZWxcbiAgICAgKiAgICAgIChlLmcuLCByZXN0YXJ0aW5nIGEgcmVhZC1tb2RpZnktd3JpdGUgc2VxdWVuY2UpLlxuICAgICAqICAoYykgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVudGlsXG4gICAgICogICAgICB0aGUgc3lzdGVtIHN0YXRlIGhhcyBiZWVuIGV4cGxpY2l0bHkgZml4ZWQuIEUuZy4sIGlmIGFuIFwicm1kaXJcIlxuICAgICAqICAgICAgZmFpbHMgYmVjYXVzZSB0aGUgZGlyZWN0b3J5IGlzIG5vbi1lbXB0eSwgRkFJTEVEX1BSRUNPTkRJVElPTlxuICAgICAqICAgICAgc2hvdWxkIGJlIHJldHVybmVkIHNpbmNlIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bmxlc3NcbiAgICAgKiAgICAgIHRoZXkgaGF2ZSBmaXJzdCBmaXhlZCB1cCB0aGUgZGlyZWN0b3J5IGJ5IGRlbGV0aW5nIGZpbGVzIGZyb20gaXQuXG4gICAgICogIChkKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHBlcmZvcm1zIGNvbmRpdGlvbmFsXG4gICAgICogICAgICBSRVNUIEdldC9VcGRhdGUvRGVsZXRlIG9uIGEgcmVzb3VyY2UgYW5kIHRoZSByZXNvdXJjZSBvbiB0aGVcbiAgICAgKiAgICAgIHNlcnZlciBkb2VzIG5vdCBtYXRjaCB0aGUgY29uZGl0aW9uLiBFLmcuLCBjb25mbGljdGluZ1xuICAgICAqICAgICAgcmVhZC1tb2RpZnktd3JpdGUgb24gdGhlIHNhbWUgcmVzb3VyY2UuXG4gICAgICovXG4gICAgRkFJTEVEX1BSRUNPTkRJVElPTjogXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIsXG4gICAgLyoqXG4gICAgICogVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCwgdHlwaWNhbGx5IGR1ZSB0byBhIGNvbmN1cnJlbmN5IGlzc3VlIGxpa2VcbiAgICAgKiBzZXF1ZW5jZXIgY2hlY2sgZmFpbHVyZXMsIHRyYW5zYWN0aW9uIGFib3J0cywgZXRjLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIEFCT1JURUQ6IFwiYWJvcnRlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgYXR0ZW1wdGVkIHBhc3QgdGhlIHZhbGlkIHJhbmdlLiBFLmcuLCBzZWVraW5nIG9yIHJlYWRpbmdcbiAgICAgKiBwYXN0IGVuZCBvZiBmaWxlLlxuICAgICAqXG4gICAgICogVW5saWtlIElOVkFMSURfQVJHVU1FTlQsIHRoaXMgZXJyb3IgaW5kaWNhdGVzIGEgcHJvYmxlbSB0aGF0IG1heSBiZSBmaXhlZFxuICAgICAqIGlmIHRoZSBzeXN0ZW0gc3RhdGUgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgMzItYml0IGZpbGUgc3lzdGVtIHdpbGxcbiAgICAgKiBnZW5lcmF0ZSBJTlZBTElEX0FSR1VNRU5UIGlmIGFza2VkIHRvIHJlYWQgYXQgYW4gb2Zmc2V0IHRoYXQgaXMgbm90IGluIHRoZVxuICAgICAqIHJhbmdlIFswLDJeMzItMV0sIGJ1dCBpdCB3aWxsIGdlbmVyYXRlIE9VVF9PRl9SQU5HRSBpZiBhc2tlZCB0byByZWFkIGZyb21cbiAgICAgKiBhbiBvZmZzZXQgcGFzdCB0aGUgY3VycmVudCBmaWxlIHNpemUuXG4gICAgICpcbiAgICAgKiBUaGVyZSBpcyBhIGZhaXIgYml0IG9mIG92ZXJsYXAgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAqIE9VVF9PRl9SQU5HRS4gV2UgcmVjb21tZW5kIHVzaW5nIE9VVF9PRl9SQU5HRSAodGhlIG1vcmUgc3BlY2lmaWMgZXJyb3IpXG4gICAgICogd2hlbiBpdCBhcHBsaWVzIHNvIHRoYXQgY2FsbGVycyB3aG8gYXJlIGl0ZXJhdGluZyB0aHJvdWdoIGEgc3BhY2UgY2FuXG4gICAgICogZWFzaWx5IGxvb2sgZm9yIGFuIE9VVF9PRl9SQU5HRSBlcnJvciB0byBkZXRlY3Qgd2hlbiB0aGV5IGFyZSBkb25lLlxuICAgICAqL1xuICAgIE9VVF9PRl9SQU5HRTogXCJvdXQtb2YtcmFuZ2VcIixcbiAgICAvKiogT3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCBvciBub3Qgc3VwcG9ydGVkL2VuYWJsZWQgaW4gdGhpcyBzZXJ2aWNlLiAqL1xuICAgIFVOSU1QTEVNRU5URUQ6IFwidW5pbXBsZW1lbnRlZFwiLFxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGVycm9ycy4gTWVhbnMgc29tZSBpbnZhcmlhbnRzIGV4cGVjdGVkIGJ5IHVuZGVybHlpbmcgU3lzdGVtIGhhc1xuICAgICAqIGJlZW4gYnJva2VuLiBJZiB5b3Ugc2VlIG9uZSBvZiB0aGVzZSBlcnJvcnMsIFNvbWV0aGluZyBpcyB2ZXJ5IGJyb2tlbi5cbiAgICAgKi9cbiAgICBJTlRFUk5BTDogXCJpbnRlcm5hbFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gVGhpcyBpcyBhIG1vc3QgbGlrZWx5IGEgdHJhbnNpZW50XG4gICAgICogY29uZGl0aW9uIGFuZCBtYXkgYmUgY29ycmVjdGVkIGJ5IHJldHJ5aW5nIHdpdGggYSBiYWNrb2ZmLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIFVOQVZBSUxBQkxFOiBcInVuYXZhaWxhYmxlXCIsXG4gICAgLyoqIFVucmVjb3ZlcmFibGUgZGF0YSBsb3NzIG9yIGNvcnJ1cHRpb24uICovXG4gICAgREFUQV9MT1NTOiBcImRhdGEtbG9zc1wiXG59O1xuXG4vKiogQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBRIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgYmFja2VuZCBlcnJvciBjb2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVycm9yLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgY3VzdG9tIGVycm9yIGRlc2NyaXB0aW9uLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSksIHRoaXMuY29kZSA9IHQsIHRoaXMubWVzc2FnZSA9IGUsIFxuICAgICAgICAvLyBIQUNLOiBXZSB3cml0ZSBhIHRvU3RyaW5nIHByb3BlcnR5IGRpcmVjdGx5IGJlY2F1c2UgRXJyb3IgaXMgbm90IGEgcmVhbFxuICAgICAgICAvLyBjbGFzcyBhbmQgc28gaW5oZXJpdGFuY2UgZG9lcyBub3Qgd29yayBjb3JyZWN0bHkuIFdlIGNvdWxkIGFsdGVybmF0aXZlbHlcbiAgICAgICAgLy8gZG8gdGhlIHNhbWUgXCJiYWNrLWRvb3IgaW5oZXJpdGFuY2VcIiB0cmljayB0aGF0IEZpcmViYXNlRXJyb3IgZG9lcy5cbiAgICAgICAgdGhpcy50b1N0cmluZyA9ICgpID0+IGAke3RoaXMubmFtZX06IFtjb2RlPSR7dGhpcy5jb2RlfV06ICR7dGhpcy5tZXNzYWdlfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBXIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSB0LCB0aGlzLnJlamVjdCA9IGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51c2VyID0gZSwgdGhpcy50eXBlID0gXCJPQXV0aFwiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0aGlzLmhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBgQmVhcmVyICR7dH1gKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHoge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKEMuVU5BVVRIRU5USUNBVEVEKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHJldHVybnMgYSBjb25zdGFudCB0b2tlbi4gVXNlZCBmb3JcbiAqIGVtdWxhdG9yIHRva2VuIG1vY2tpbmcuXG4gKi8gY2xhc3MgSCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRva2VuID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgdGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpXG4gICAgICAgICAqIFRoaXMgaXNuJ3QgYWN0dWFsbHkgbmVjZXNzYXJ5IHNpbmNlIHRoZSBVSUQgbmV2ZXIgY2hhbmdlcywgYnV0IHdlIHVzZSB0aGlzXG4gICAgICAgICAqIHRvIHZlcmlmeSB0aGUgbGlzdGVuIGNvbnRyYWN0IGlzIGFkaGVyZWQgdG8gaW4gdGVzdHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy50b2tlbik7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gZSwgXG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZSh0aGlzLnRva2VuLnVzZXIpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIEoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50ID0gdCwgXG4gICAgICAgIC8qKiBUcmFja3MgdGhlIGN1cnJlbnQgVXNlci4gKi9cbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IEMuVU5BVVRIRU5USUNBVEVELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50ZXIgdXNlZCB0byBkZXRlY3QgaWYgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgYSBnZXRUb2tlbiByZXF1ZXN0IHdhc1xuICAgICAgICAgKiBvdXRzdGFuZGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaSA9IDAsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmk7XG4gICAgICAgIC8vIEEgY2hhbmdlIGxpc3RlbmVyIHRoYXQgcHJldmVudHMgZG91YmxlLWZpcmluZyBmb3IgdGhlIHNhbWUgdG9rZW4gY2hhbmdlLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0ID0+IHRoaXMuaSAhPT0gbiA/IChuID0gdGhpcy5pLCBlKHQpKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAvLyBBIHByb21pc2UgdGhhdCBjYW4gYmUgd2FpdGVkIG9uIHRvIGJsb2NrIG9uIHRoZSBuZXh0IHRva2VuIGNoYW5nZS5cbiAgICAgICAgLy8gVGhpcyBwcm9taXNlIGlzIHJlLWNyZWF0ZWQgYWZ0ZXIgZWFjaCBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgbGV0IGkgPSBuZXcgVztcbiAgICAgICAgdGhpcy5vID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pKyssIHRoaXMuY3VycmVudFVzZXIgPSB0aGlzLnUoKSwgaS5yZXNvbHZlKCksIGkgPSBuZXcgVywgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBzKHRoaXMuY3VycmVudFVzZXIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHIgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gaTtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGUucHJvbWlzZSwgYXdhaXQgcyh0aGlzLmN1cnJlbnRVc2VyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwgbyA9IHQgPT4ge1xuICAgICAgICAgICAgTyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIGRldGVjdGVkXCIpLCB0aGlzLmF1dGggPSB0LCB0aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKSwgXG4gICAgICAgICAgICByKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudC5vbkluaXQoKHQgPT4gbyh0KSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEF1dGggcmlnaHQgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrIGJlZm9yZSB3ZVxuICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0byBzdGFydCB1cCBpbiB1bmF1dGhlbnRpY2F0ZWQgbW9kZS5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50LmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQgPyBvKHQpIDogKFxuICAgICAgICAgICAgICAgIC8vIElmIGF1dGggaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRoIGBudWxsYCB1c2VyXG4gICAgICAgICAgICAgICAgTyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIG5vdCB5ZXQgZGV0ZWN0ZWRcIiksIGkucmVzb2x2ZSgpLCBpID0gbmV3IFcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCksIHIoKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmksIGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbihlKS50aGVuKChlID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSB0ID8gKE8oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiZ2V0VG9rZW4gYWJvcnRlZCBkdWUgdG8gdG9rZW4gY2hhbmdlLlwiKSwgXG4gICAgICAgIHRoaXMuZ2V0VG9rZW4oKSkgOiBlID8gKFUoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5hY2Nlc3NUb2tlbiksIG5ldyBHKGUuYWNjZXNzVG9rZW4sIHRoaXMuY3VycmVudFVzZXIpKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbiAgICAvLyBBdXRoLmdldFVpZCgpIGNhbiByZXR1cm4gbnVsbCBldmVuIHdpdGggYSB1c2VyIGxvZ2dlZCBpbi4gSXQgaXMgYmVjYXVzZVxuICAgIC8vIGdldFVpZCgpIGlzIHN5bmNocm9ub3VzLCBidXQgdGhlIGF1dGggY29kZSBwb3B1bGF0aW5nIFVpZCBpcyBhc3luY2hyb25vdXMuXG4gICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGluIHRoZSBBdXRoVG9rZW5MaXN0ZW5lciBjYWxsYmFja1xuICAgIC8vIHRvIGd1YXJhbnRlZSB0byBnZXQgdGhlIGFjdHVhbCB1c2VyLlxuICAgIHUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLmdldFVpZCgpO1xuICAgICAgICByZXR1cm4gVShudWxsID09PSB0IHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpLCBuZXcgQyh0KTtcbiAgICB9XG59XG5cbi8qXG4gKiBGaXJzdFBhcnR5VG9rZW4gcHJvdmlkZXMgYSBmcmVzaCB0b2tlbiBlYWNoIHRpbWUgaXRzIHZhbHVlXG4gKiBpcyByZXF1ZXN0ZWQsIGJlY2F1c2UgaWYgdGhlIHRva2VuIGlzIHRvbyBvbGQsIHJlcXVlc3RzIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKiBUZWNobmljYWxseSB0aGlzIG1heSBubyBsb25nZXIgYmUgbmVjZXNzYXJ5IHNpbmNlIHRoZSBTREsgc2hvdWxkIGdyYWNlZnVsbHlcbiAqIHJlY292ZXIgZnJvbSB1bmF1dGhlbnRpY2F0ZWQgZXJyb3JzIChzZWUgYi8zMzE0NzgxOCBmb3IgY29udGV4dCksIGJ1dCBpdCdzXG4gKiBzYWZlciB0byBrZWVwIHRoZSBpbXBsZW1lbnRhdGlvbiBhcy1pcy5cbiAqLyBjbGFzcyBZIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiRmlyc3RQYXJ0eVwiLCB0aGlzLnVzZXIgPSBDLkZJUlNUX1BBUlRZLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0aGlzLmhlYWRlcnMuc2V0KFwiWC1Hb29nLUF1dGhVc2VyXCIsIGUpO1xuICAgICAgICBjb25zdCBzID0gdC5hdXRoLmdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkoW10pO1xuICAgICAgICBzICYmIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIHMpLCBuICYmIHRoaXMuaGVhZGVycy5zZXQoXCJYLUdvb2ctSWFtLUF1dGhvcml6YXRpb24tVG9rZW5cIiwgbik7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgWCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgWSh0aGlzLmgsIHRoaXMubCwgdGhpcy5tKSk7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoQy5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbmNsYXNzIFoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQsIHRoaXMudHlwZSA9IFwiQXBwQ2hlY2tcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdCAmJiB0Lmxlbmd0aCA+IDAgJiYgdGhpcy5oZWFkZXJzLnNldChcIngtZmlyZWJhc2UtYXBwY2hlY2tcIiwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG5jbGFzcyB0dCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmcgPSB0LCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICB0aGlzLm8gPSBuID0+IHtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gKHQgPT4gKG51bGwgIT0gdC5lcnJvciAmJiBPKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYEVycm9yIGdldHRpbmcgQXBwIENoZWNrIHRva2VuOyB1c2luZyBwbGFjZWhvbGRlciB0b2tlbiBpbnN0ZWFkLiBFcnJvcjogJHt0LmVycm9yLm1lc3NhZ2V9YCksIFxuICAgICAgICAgICAgZSh0LnRva2VuKSkpKG4pKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgIE8oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIGRldGVjdGVkXCIpLCB0aGlzLmFwcENoZWNrID0gdCwgdGhpcy5hcHBDaGVjay5hZGRUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZy5vbkluaXQoKHQgPT4gbih0KSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEFwcENoZWNrIGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yay5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZy5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbih0KSA6IFxuICAgICAgICAgICAgICAgIC8vIElmIEFwcENoZWNrIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aG91dCBpdC5cbiAgICAgICAgICAgICAgICBPKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBub3QgeWV0IGRldGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID8gdGhpcy5hcHBDaGVjay5nZXRUb2tlbih0KS50aGVuKCh0ID0+IHQgPyAoVShcInN0cmluZ1wiID09IHR5cGVvZiB0LnRva2VuKSwgXG4gICAgICAgIG5ldyBaKHQudG9rZW4pKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVjayAmJiB0aGlzLmFwcENoZWNrLnJlbW92ZVRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gQXBwQ2hlY2sgdG9rZW4gcHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgZXQge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBaKFwiXCIpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7fVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBCdWlsZHMgYSBDcmVkZW50aWFsc1Byb3ZpZGVyIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZlxuICogdGhlIGNyZWRlbnRpYWxzIHBhc3NlZCBpbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXG4gKi9cbmNsYXNzIG50IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHQsIGUgJiYgKGUuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gdCA9PiB0aGlzLnAodCksIHRoaXMuVCA9IHQgPT4gZS53cml0ZVNlcXVlbmNlTnVtYmVyKHQpKTtcbiAgICB9XG4gICAgcCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heCh0LCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVCAmJiB0aGlzLlQodCksIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBzdCh0KSB7XG4gICAgLy8gUG9seWZpbGxzIGZvciBJRSBhbmQgV2ViV29ya2VyIGJ5IHVzaW5nIGBzZWxmYCBhbmQgYG1zQ3J5cHRvYCB3aGVuIGBjcnlwdG9gIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgY29uc3QgZSA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygc2VsZiAmJiAoc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0byksIG4gPSBuZXcgVWludDhBcnJheSh0KTtcbiAgICBpZiAoZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuZ2V0UmFuZG9tVmFsdWVzKSBlLmdldFJhbmRvbVZhbHVlcyhuKTsgZWxzZSBcbiAgICAvLyBGYWxscyBiYWNrIHRvIE1hdGgucmFuZG9tXG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0OyBlKyspIG5bZV0gPSBNYXRoLmZsb29yKDI1NiAqIE1hdGgucmFuZG9tKCkpO1xuICAgIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBudC5JID0gLTE7XG5cbmNsYXNzIGl0IHtcbiAgICBzdGF0aWMgQSgpIHtcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcbiAgICAgICAgY29uc3QgdCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIiwgZSA9IE1hdGguZmxvb3IoMjU2IC8gdC5sZW5ndGgpICogdC5sZW5ndGg7XG4gICAgICAgIC8vIFRoZSBsYXJnZXN0IGJ5dGUgdmFsdWUgdGhhdCBpcyBhIG11bHRpcGxlIG9mIGBjaGFyLmxlbmd0aGAuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBcIlwiO1xuICAgICAgICBmb3IgKDtuLmxlbmd0aCA8IDIwOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzdCg0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgc1tpXSA8IGUgJiYgKG4gKz0gdC5jaGFyQXQoc1tpXSAlIHQubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBydCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiB0ID4gZSA/IDEgOiAwO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gb3QodCwgZSwgbikge1xuICAgIHJldHVybiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGggJiYgdC5ldmVyeSgoKHQsIHMpID0+IG4odCwgZVtzXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gYXQodCkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIHQgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG4vKipcbiAqIEEgYFRpbWVzdGFtcGAgcmVwcmVzZW50cyBhIHBvaW50IGluIHRpbWUgaW5kZXBlbmRlbnQgb2YgYW55IHRpbWUgem9uZSBvclxuICogY2FsZW5kYXIsIHJlcHJlc2VudGVkIGFzIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0IG5hbm9zZWNvbmRcbiAqIHJlc29sdXRpb24gaW4gVVRDIEVwb2NoIHRpbWUuXG4gKlxuICogSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhbiBDYWxlbmRhciB3aGljaCBleHRlbmRzIHRoZVxuICogR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXMgZW5jb2RlZCBhc3N1bWluZyBhbGwgbWludXRlc1xuICogYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlIFwic21lYXJlZFwiIHNvIHRoYXQgbm8gbGVhcCBzZWNvbmRcbiAqIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAqIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBGb3IgZXhhbXBsZXMgYW5kIGZ1cnRoZXIgc3BlY2lmaWNhdGlvbnMsIHJlZmVyIHRvIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG8gfCBUaW1lc3RhbXAgZGVmaW5pdGlvbn0uXG4gKi9cbmNsYXNzIGN0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IHQsIHRoaXMubmFub3NlY29uZHMgPSBlLCBlIDwgMCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmIChlID49IDFlOSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmICh0IDwgLTYyMTM1NTk2ODAwKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmICh0ID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIGN0LmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGluaXRpYWxpemUgdGhlIGBUaW1lc3RhbXBgIGZyb20uXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBmcm9tRGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBjdC5mcm9tTWlsbGlzKHQuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqICh0IC0gMWUzICogZSkpO1xuICAgICAgICByZXR1cm4gbmV3IGN0KGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IHQuc2Vjb25kcyA/IHJ0KHRoaXMubmFub3NlY29uZHMsIHQubmFub3NlY29uZHMpIDogcnQodGhpcy5zZWNvbmRzLCB0LnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiB0Lm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgdXQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRpbWVzdGFtcCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdXQodCk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgdXQobmV3IGN0KDAsIDApKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8odC50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwodC50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIGh0KHQpIHtcbiAgICBsZXQgZSA9IDA7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKys7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGx0KHQsIGUpIHtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUobiwgdFtuXSk7XG59XG5cbmZ1bmN0aW9uIGZ0KHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgaW4gdCkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBlKSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGF0aCByZXByZXNlbnRzIGFuIG9yZGVyZWQgc2VxdWVuY2Ugb2Ygc3RyaW5nIHNlZ21lbnRzLlxuICovXG5jbGFzcyBkdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB2b2lkIDAgPT09IGUgPyBlID0gMCA6IGUgPiB0Lmxlbmd0aCAmJiBCKCksIHZvaWQgMCA9PT0gbiA/IG4gPSB0Lmxlbmd0aCAtIGUgOiBuID4gdC5sZW5ndGggLSBlICYmIEIoKSwgXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSB0LCB0aGlzLm9mZnNldCA9IGUsIHRoaXMubGVuID0gbjtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IGR0LmNvbXBhcmF0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIGNoaWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZHQgPyB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQpO1xuICAgICAgICB9KSkgOiBlLnB1c2godCksIHRoaXMuY29uc3RydWN0KGUpO1xuICAgIH1cbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovICAgIGxpbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9wRmlyc3QodCkge1xuICAgICAgICByZXR1cm4gdCA9IHZvaWQgMCA9PT0gdCA/IDEgOiB0LCB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIHQsIHRoaXMubGVuZ3RoIC0gdCk7XG4gICAgfVxuICAgIHBvcExhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZmlyc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XG4gICAgfVxuICAgIGxhc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyB0XTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBpc1ByZWZpeE9mKHQpIHtcbiAgICAgICAgaWYgKHQubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaXNJbW1lZGlhdGVQYXJlbnRPZih0KSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IHQubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBmb3IgKGxldCBlID0gdGhpcy5vZmZzZXQsIG4gPSB0aGlzLmxpbWl0KCk7IGUgPCBuOyBlKyspIHQodGhpcy5zZWdtZW50c1tlXSk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBNYXRoLm1pbih0Lmxlbmd0aCwgZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG47IHMrKykge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KHMpLCBpID0gZS5nZXQocyk7XG4gICAgICAgICAgICBpZiAobiA8IGkpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChuID4gaSkgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoIDwgZS5sZW5ndGggPyAtMSA6IHQubGVuZ3RoID4gZS5sZW5ndGggPyAxIDogMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgKGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMpXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHd0IGV4dGVuZHMgZHQge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgd3QodCwgZSwgbik7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuIElmIG11bHRpcGxlXG4gICAgICogYXJndW1lbnRzIGFyZSBwcm92aWRlZCwgYWxsIGNvbXBvbmVudHMgYXJlIGNvbWJpbmVkLiBMZWFkaW5nIGFuZCB0cmFpbGluZ1xuICAgICAqIHNsYXNoZXMgZnJvbSBhbGwgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TdHJpbmcoLi4udCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSB7XG4gICAgICAgICAgICBpZiAobi5pbmRleE9mKFwiLy9cIikgPj0gMCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhbGluZyBzbGFzaGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKC4uLm4uc3BsaXQoXCIvXCIpLmZpbHRlcigodCA9PiB0Lmxlbmd0aCA+IDApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB3dChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3dChbXSk7XG4gICAgfVxufVxuXG5jb25zdCBfdCA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xuXG4vKipcbiAqIEEgZG90LXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHN1Yi1vYmplY3RzIHdpdGhpbiBhIGRvY3VtZW50LlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgbXQgZXh0ZW5kcyBkdCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgY291bGQgYmUgdXNlZCBhcyBhIHNlZ21lbnQgaW4gYSBmaWVsZCBwYXRoXG4gICAgICogd2l0aG91dCBlc2NhcGluZy5cbiAgICAgKi8gICAgc3RhdGljIGlzVmFsaWRJZGVudGlmaWVyKHQpIHtcbiAgICAgICAgcmV0dXJuIF90LnRlc3QodCk7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLm1hcCgodCA9PiAodCA9IHQucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL2AvZywgXCJcXFxcYFwiKSwgXG4gICAgICAgIG10LmlzVmFsaWRJZGVudGlmaWVyKHQpIHx8ICh0ID0gXCJgXCIgKyB0ICsgXCJgXCIpLCB0KSkpLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBpc0tleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdGhpcy5sZW5ndGggJiYgXCJfX25hbWVfX1wiID09PSB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgc3RhdGljIGtleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IG10KFsgXCJfX25hbWVfX1wiIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICBlLnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICBmb3IgKDtzIDwgdC5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRbc107XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocyArIDEgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgdHJhaWxpbmcgZXNjYXBlIGNoYXJhY3RlcjogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdFtzICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKFwiXFxcXFwiICE9PSBlICYmIFwiLlwiICE9PSBlICYmIFwiYFwiICE9PSBlKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgbiArPSBlLCBzICs9IDI7XG4gICAgICAgICAgICB9IGVsc2UgXCJgXCIgPT09IGUgPyAociA9ICFyLCBzKyspIDogXCIuXCIgIT09IGUgfHwgciA/IChuICs9IGUsIHMrKykgOiAoaSgpLCBzKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpKCksIHIpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIHQpO1xuICAgICAgICByZXR1cm4gbmV3IG10KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IG10KFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cbiAqIEV4YW1wbGVzOlxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xuICovIGNsYXNzIGd0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gdCwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICB0LnNvcnQobXQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcbiAgICAgKiBtYXNrLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxuICAgICAqLyAgICBjb3ZlcnModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIGlmIChlLmlzUHJlZml4T2YodCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG90KHRoaXMuZmllbGRzLCB0LmZpZWxkcywgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24geXQoKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGF0b2I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltbXV0YWJsZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBcInByb3RvXCIgYnl0ZSBzdHJpbmcuXG4gKlxuICogUHJvdG8gYnl0ZSBzdHJpbmdzIGNhbiBlaXRoZXIgYmUgQmFzZTY0LWVuY29kZWQgc3RyaW5ncyBvciBVaW50OEFycmF5cyB3aGVuXG4gKiBzZW50IG9uIHRoZSB3aXJlLiBUaGlzIGNsYXNzIGFic3RyYWN0cyBhd2F5IHRoaXMgZGlmZmVyZW50aWF0aW9uIGJ5IGhvbGRpbmdcbiAqIHRoZSBwcm90byBieXRlIHN0cmluZyBpbiBhIGNvbW1vbiBjbGFzcyB0aGF0IG11c3QgYmUgY29udmVydGVkIGludG8gYSBzdHJpbmdcbiAqIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgcHJvdG8uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBwdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGF0b2IodCk7XG4gICAgICAgIHJldHVybiBuZXcgcHQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHB0KGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogKCkgPT4gdCA8IHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iaW5hcnlTdHJpbmcuY2hhckNvZGVBdCh0KyspLFxuICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0ID0gdGhpcy5iaW5hcnlTdHJpbmcsIGJ0b2EodCk7XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovXG4gICAgICAgIHZhciB0O1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlW25dID0gdC5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLy8gQSBSZWdFeHAgbWF0Y2hpbmcgSVNPIDg2MDEgVVRDIHRpbWVzdGFtcHMgd2l0aCBvcHRpb25hbCBmcmFjdGlvbi5cbiAgICAgICAgKHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgYXBwcm94aW1hdGVCeXRlU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBydCh0aGlzLmJpbmFyeVN0cmluZywgdC5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5U3RyaW5nID09PSB0LmJpbmFyeVN0cmluZztcbiAgICB9XG59XG5cbnB0LkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IHB0KFwiXCIpO1xuXG5jb25zdCBUdCA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdmFsdWVzIGZvciBhIHRpbWVzdGFtcCB2YWx1ZSBpbnRvIGEgXCJzZWNvbmRzIGFuZFxuICogbmFub3NcIiByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBFdCh0KSB7XG4gICAgLy8gVGhlIGpzb24gaW50ZXJmYWNlIChmb3IgdGhlIGJyb3dzZXIpIHdpbGwgcmV0dXJuIGFuIGlzbyB0aW1lc3RhbXAgc3RyaW5nLFxuICAgIC8vIHdoaWxlIHRoZSBwcm90byBqcyBsaWJyYXJ5IChmb3Igbm9kZSkgd2lsbCByZXR1cm4gYVxuICAgIC8vIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgaW5zdGFuY2UuXG4gICAgaWYgKFUoISF0KSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBUdC5leGVjKHQpO1xuICAgICAgICBpZiAoVSghIW4pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IHQgPSBuWzFdO1xuICAgICAgICAgICAgdCA9ICh0ICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCBlID0gTnVtYmVyKHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IERhdGUodCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHMuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IEl0KHQuc2Vjb25kcyksXG4gICAgICAgIG5hbm9zOiBJdCh0Lm5hbm9zKVxuICAgIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBudW1iZXJzIGludG8gYSBKYXZhU2NyaXB0IG51bWJlci5cbiAqIFJldHVybnMgMCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bWVyaWMuXG4gKi8gZnVuY3Rpb24gSXQodCkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgPyB0IDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IE51bWJlcih0KSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiBBdCh0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBwdC5mcm9tQmFzZTY0U3RyaW5nKHQpIDogcHQuZnJvbVVpbnQ4QXJyYXkodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxuICpcbiAqIFNlcnZlciBUaW1lc3RhbXBzIGFyZSBiYWNrZWQgYnkgTWFwVmFsdWVzIHRoYXQgY29udGFpbiBhbiBpbnRlcm5hbCBmaWVsZFxuICogYF9fdHlwZV9fYCB3aXRoIGEgdmFsdWUgb2YgYHNlcnZlcl90aW1lc3RhbXBgLiBUaGUgcHJldmlvdXMgdmFsdWUgYW5kIGxvY2FsXG4gKiB3cml0ZSB0aW1lIGFyZSBzdG9yZWQgaW4gaXRzIGBfX3ByZXZpb3VzX3ZhbHVlX19gIGFuZCBgX19sb2NhbF93cml0ZV90aW1lX19gXG4gKiBmaWVsZHMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIE5vdGVzOlxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXG4gKiAgIHRyYW5zZm9ybS4gVGhleSBjYW4gb25seSBleGlzdCBpbiB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBUaGVyZWZvcmVcbiAqICAgdGhleSBkbyBub3QgbmVlZCB0byBiZSBwYXJzZWQgb3Igc2VyaWFsaXplZC5cbiAqIC0gV2hlbiBldmFsdWF0ZWQgbG9jYWxseSAoZS5nLiBmb3Igc25hcHNob3QuZGF0YSgpKSwgdGhleSBieSBkZWZhdWx0XG4gKiAgIGV2YWx1YXRlIHRvIGBudWxsYC4gVGhpcyBiZWhhdmlvciBjYW4gYmUgY29uZmlndXJlZCBieSBwYXNzaW5nIGN1c3RvbVxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxuICogLSBXaXRoIHJlc3BlY3QgdG8gb3RoZXIgU2VydmVyVGltZXN0YW1wVmFsdWVzLCB0aGV5IHNvcnQgYnkgdGhlaXJcbiAqICAgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gUnQodCkge1xuICAgIHZhciBlLCBuO1xuICAgIHJldHVybiBcInNlcnZlcl90aW1lc3RhbXBcIiA9PT0gKG51bGwgPT09IChuID0gKChudWxsID09PSAoZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQubWFwVmFsdWUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZmllbGRzKSB8fCB7fSkuX190eXBlX18pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uc3RyaW5nVmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU2VydmVyVGltZXN0YW1wIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYmVmb3JlIHRoaXMgU2VydmVyVGltZXN0YW1wIHdhcyBzZXQuXG4gKlxuICogUHJlc2VydmluZyB0aGUgcHJldmlvdXMgdmFsdWVzIGFsbG93cyB0aGUgdXNlciB0byBkaXNwbGF5IHRoZSBsYXN0IHJlc29sZWRcbiAqIHZhbHVlIHVudGlsIHRoZSBiYWNrZW5kIHJlc3BvbmRzIHdpdGggdGhlIHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24gYnQodCkge1xuICAgIGNvbnN0IGUgPSB0Lm1hcFZhbHVlLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX187XG4gICAgcmV0dXJuIFJ0KGUpID8gYnQoZSkgOiBlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBQdCh0KSB7XG4gICAgY29uc3QgZSA9IEV0KHQubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtcbiAgICByZXR1cm4gbmV3IGN0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VudGluZWwgdmFsdWUgdGhhdCBzb3J0cyBiZWZvcmUgYW55IE11dGF0aW9uIEJhdGNoIElELiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YXJpYWJsZSBpcyBlaXRoZXIgdW5kZWZpbmVkIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIHZ0KHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0O1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIC0wLiAqLyBmdW5jdGlvbiBWdCh0KSB7XG4gICAgLy8gRGV0ZWN0IGlmIHRoZSB2YWx1ZSBpcyAtMC4wLiBCYXNlZCBvbiBwb2x5ZmlsbCBmcm9tXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gICAgcmV0dXJuIDAgPT09IHQgJiYgMSAvIHQgPT0gLTEgLyAwO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhbHVlIGlzIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2VcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byB0ZXN0IGZvciBiZWluZyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSByYW5nZVxuICovIGZ1bmN0aW9uIFN0KHQpIHtcbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCAmJiBOdW1iZXIuaXNJbnRlZ2VyKHQpICYmICFWdCh0KSAmJiB0IDw9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSICYmIHQgPj0gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIER0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUGF0aCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRHQod3QuZnJvbVN0cmluZyh0KSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTmFtZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRHQod3QuZnJvbVN0cmluZyh0KS5wb3BGaXJzdCg1KSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqLyAgICBoYXNDb2xsZWN0aW9uSWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmxlbmd0aCA+PSAyICYmIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpID09PSB0O1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgMCA9PT0gd3QuY29tcGFyYXRvcih0aGlzLnBhdGgsIHQucGF0aCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHd0LmNvbXBhcmF0b3IodC5wYXRoLCBlLnBhdGgpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEb2N1bWVudEtleSh0KSB7XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCAlIDIgPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgLSBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcbiAgICAgKi8gICAgc3RhdGljIGZyb21TZWdtZW50cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRHQobmV3IHd0KHQuc2xpY2UoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBFeHRyYWN0cyB0aGUgYmFja2VuZCdzIHR5cGUgb3JkZXIgZm9yIHRoZSBwcm92aWRlZCB2YWx1ZS4gKi8gZnVuY3Rpb24gQ3QodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyAwIC8qIE51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IDEgLyogQm9vbGVhblZhbHVlICovIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0IHx8IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gMiAvKiBOdW1iZXJWYWx1ZSAqLyA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gNSAvKiBTdHJpbmdWYWx1ZSAqLyA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyA2IC8qIEJsb2JWYWx1ZSAqLyA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gNyAvKiBSZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gOSAvKiBBcnJheVZhbHVlICovIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBSdCh0KSA/IDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOiAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6IEIoKTtcbn1cblxuLyoqIFRlc3RzIGBsZWZ0YCBhbmQgYHJpZ2h0YCBmb3IgZXF1YWxpdHkgYmFzZWQgb24gdGhlIGJhY2tlbmQgc2VtYW50aWNzLiAqLyBmdW5jdGlvbiBOdCh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAhMDtcbiAgICBjb25zdCBuID0gQ3QodCk7XG4gICAgaWYgKG4gIT09IEN0KGUpKSByZXR1cm4gITE7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlID09PSBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIFB0KHQpLmlzRXF1YWwoUHQoZSkpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIHQudGltZXN0YW1wVmFsdWUgPT09IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gRXQodC50aW1lc3RhbXBWYWx1ZSksIHMgPSBFdChlLnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHMuc2Vjb25kcyAmJiBuLm5hbm9zID09PSBzLm5hbm9zO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZSA9PT0gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gQXQodC5ieXRlc1ZhbHVlKS5pc0VxdWFsKEF0KGUuYnl0ZXNWYWx1ZSkpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZSA9PT0gZS5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIEl0KHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IEl0KGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgSXQodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IEl0KGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIGUpIHJldHVybiBJdCh0LmludGVnZXJWYWx1ZSkgPT09IEl0KGUuaW50ZWdlclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJdCh0LmRvdWJsZVZhbHVlKSwgcyA9IEl0KGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSBzID8gVnQobikgPT09IFZ0KHMpIDogaXNOYU4obikgJiYgaXNOYU4ocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIG90KHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIE50KTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHMgPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChodChuKSAhPT0gaHQocykpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAodm9pZCAwID09PSBzW3RdIHx8ICFOdChuW3RdLCBzW3RdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKHQsIGUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQigpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24ga3QodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09ICh0LnZhbHVlcyB8fCBbXSkuZmluZCgodCA9PiBOdCh0LCBlKSkpO1xufVxuXG5mdW5jdGlvbiB4dCh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAwO1xuICAgIGNvbnN0IG4gPSBDdCh0KSwgcyA9IEN0KGUpO1xuICAgIGlmIChuICE9PSBzKSByZXR1cm4gcnQobiwgcyk7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gcnQodC5ib29sZWFuVmFsdWUsIGUuYm9vbGVhblZhbHVlKTtcblxuICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBJdCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKSwgcyA9IEl0KGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPCBzID8gLTEgOiBuID4gcyA/IDEgOiBuID09PSBzID8gMCA6IFxuICAgICAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cbiAgICAgICAgICAgIGlzTmFOKG4pID8gaXNOYU4ocykgPyAwIDogLTEgOiAxO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gJHQodC50aW1lc3RhbXBWYWx1ZSwgZS50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAkdChQdCh0KSwgUHQoZSkpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gcnQodC5zdHJpbmdWYWx1ZSwgZS5zdHJpbmdWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNiAvKiBCbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEF0KHQpLCBzID0gQXQoZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5jb21wYXJlVG8ocyk7XG4gICAgICAgIH0odC5ieXRlc1ZhbHVlLCBlLmJ5dGVzVmFsdWUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuc3BsaXQoXCIvXCIpLCBzID0gZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHJ0KG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQucmVmZXJlbmNlVmFsdWUsIGUucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcnQoSXQodC5sYXRpdHVkZSksIEl0KGUubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBydChJdCh0LmxvbmdpdHVkZSksIEl0KGUubG9uZ2l0dWRlKSk7XG4gICAgICAgIH0odC5nZW9Qb2ludFZhbHVlLCBlLmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC52YWx1ZXMgfHwgW10sIHMgPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0geHQoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpZWxkcyB8fCB7fSwgcyA9IE9iamVjdC5rZXlzKG4pLCBpID0gZS5maWVsZHMgfHwge30sIHIgPSBPYmplY3Qua2V5cyhpKTtcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIE1hcFZhbHVlcyBhcmUgbGlrZWx5IHNvcnRlZCBjb3JyZWN0bHkgYmFzZWQgb24gdGhlaXIgaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBvcmRlciAoZS5nLiB3aGVuIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQpLCBsb2NhbCBtb2RpZmljYXRpb25zIGNhbiBicmluZ1xuICAgICAgICAgICAgLy8gZWxlbWVudHMgb3V0IG9mIG9yZGVyLiBXZSBuZWVkIHRvIHJlLXNvcnQgdGhlIGVsZW1lbnRzIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgICAgICAvLyBjYW5vbmljYWwgSURzIGFyZSBpbmRlcGVuZGVudCBvZiBpbnNlcnRpb24gb3JkZXIuXG4gICAgICAgICAgICBzLnNvcnQoKSwgci5zb3J0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoICYmIHQgPCByLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHJ0KHNbdF0sIHJbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0geHQobltzW3RdXSwgaVtyW3RdXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ0KHMubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlIHByb3ZpZGVkIGZpZWxkIHZhbHVlIChhcyB1c2VkIGluIFRhcmdldFxuICogc2VyaWFsaXphdGlvbikuXG4gKi8gKHQubWFwVmFsdWUsIGUubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBCKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiAkdCh0LCBlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGgpIHJldHVybiBydCh0LCBlKTtcbiAgICBjb25zdCBuID0gRXQodCksIHMgPSBFdChlKSwgaSA9IHJ0KG4uc2Vjb25kcywgcy5zZWNvbmRzKTtcbiAgICByZXR1cm4gMCAhPT0gaSA/IGkgOiBydChuLm5hbm9zLCBzLm5hbm9zKTtcbn1cblxuZnVuY3Rpb24gT3QodCkge1xuICAgIHJldHVybiBGdCh0KTtcbn1cblxuZnVuY3Rpb24gRnQodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEV0KHQpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHtlLnNlY29uZHN9LCR7ZS5uYW5vc30pYDtcbiAgICB9KHQudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB0LnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IEF0KHQuYnl0ZXNWYWx1ZSkudG9CYXNlNjQoKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gKG4gPSB0LnJlZmVyZW5jZVZhbHVlLCBcbiAgICBEdC5mcm9tTmFtZShuKS50b1N0cmluZygpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyBgZ2VvKCR7KGUgPSB0Lmdlb1BvaW50VmFsdWUpLmxhdGl0dWRlfSwke2UubG9uZ2l0dWRlfSlgIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdC52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiBlICs9IFwiLFwiLCBlICs9IEZ0KHMpO1xuICAgICAgICByZXR1cm4gZSArIFwiXVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHJlZmVyZW5jZSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIGRhdGFiYXNlIGFuZCBrZXkuICovICh0LmFycmF5VmFsdWUpIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0ZXJhdGlvbiBvcmRlciBpbiBKYXZhU2NyaXB0IGlzIG5vdCBndWFyYW50ZWVkLiBUbyBlbnN1cmUgdGhhdCB3ZSBnZW5lcmF0ZVxuICAgICAgICAvLyBtYXRjaGluZyBjYW5vbmljYWwgSURzIGZvciBpZGVudGljYWwgbWFwcywgd2UgbmVlZCB0byBzb3J0IHRoZSBrZXlzLlxuICAgICAgICBjb25zdCBlID0gT2JqZWN0LmtleXModC5maWVsZHMgfHwge30pLnNvcnQoKTtcbiAgICAgICAgbGV0IG4gPSBcIntcIiwgcyA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkgcyA/IHMgPSAhMSA6IG4gKz0gXCIsXCIsIG4gKz0gYCR7aX06JHtGdCh0LmZpZWxkc1tpXSl9YDtcbiAgICAgICAgcmV0dXJuIG4gKyBcIn1cIjtcbiAgICB9KHQubWFwVmFsdWUpIDogQigpO1xuICAgIHZhciBlLCBuO1xufVxuXG5mdW5jdGlvbiBNdCh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGBwcm9qZWN0cy8ke3QucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0LmRhdGFiYXNlfS9kb2N1bWVudHMvJHtlLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YFxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBJbnRlZ2VyVmFsdWUgLiAqLyBmdW5jdGlvbiBMdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBCdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImFycmF5VmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBOdWxsVmFsdWUuICovIGZ1bmN0aW9uIFV0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibnVsbFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24gcXQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgaXNOYU4oTnVtYmVyKHQuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIEt0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibWFwVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYC4gKi8gZnVuY3Rpb24ganQodCkge1xuICAgIGlmICh0Lmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQuZ2VvUG9pbnRWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0LnRpbWVzdGFtcFZhbHVlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUpIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0LnRpbWVzdGFtcFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQubWFwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbHQodC5tYXBWYWx1ZS5maWVsZHMsICgodCwgbikgPT4gZS5tYXBWYWx1ZS5maWVsZHNbdF0gPSBqdChuKSkpLCBlO1xuICAgIH1cbiAgICBpZiAodC5hcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8ICh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5sZW5ndGg7ICsrbikgZS5hcnJheVZhbHVlLnZhbHVlc1tuXSA9IGp0KHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBPYmplY3RWYWx1ZSByZXByZXNlbnRzIGEgTWFwVmFsdWUgaW4gdGhlIEZpcmVzdG9yZSBQcm90byBhbmQgb2ZmZXJzIHRoZVxuICogYWJpbGl0eSB0byBhZGQgYW5kIHJlbW92ZSBmaWVsZHMgKHZpYSB0aGUgT2JqZWN0VmFsdWVCdWlsZGVyKS5cbiAqLyBjbGFzcyBRdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFF0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIHBhdGggb3IgbnVsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gdGhlIHBhdGggdG8gc2VhcmNoXG4gICAgICogQHJldHVybnMgVGhlIHZhbHVlIGF0IHRoZSBwYXRoIG9yIG51bGwgaWYgdGhlIHBhdGggaXMgbm90IHNldC5cbiAgICAgKi8gICAgZmllbGQodCkge1xuICAgICAgICBpZiAodC5pc0VtcHR5KCkpIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoIC0gMTsgKytuKSBpZiAoZSA9IChlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbdC5nZXQobildLCBcbiAgICAgICAgICAgICFLdChlKSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gZSA9IChlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbdC5sYXN0U2VnbWVudCgpXSwgZSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGZpZWxkIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gc2V0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2V0RmllbGRzTWFwKHQucG9wTGFzdCgpKVt0Lmxhc3RTZWdtZW50KCldID0ganQoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHByb3ZpZGVkIGZpZWxkcyB0byB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGEgLSBBIG1hcCBvZiBmaWVsZHMgdG8gdmFsdWVzIChvciBudWxsIGZvciBkZWxldGVzKS5cbiAgICAgKi8gICAgc2V0QWxsKHQpIHtcbiAgICAgICAgbGV0IGUgPSBtdC5lbXB0eVBhdGgoKSwgbiA9IHt9LCBzID0gW107XG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGkpID0+IHtcbiAgICAgICAgICAgIGlmICghZS5pc0ltbWVkaWF0ZVBhcmVudE9mKGkpKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGF0IHRoaXMgcGFyZW50IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0RmllbGRzTWFwKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKHQsIG4sIHMpLCBuID0ge30sIHMgPSBbXSwgZSA9IGkucG9wTGFzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCA/IG5baS5sYXN0U2VnbWVudCgpXSA9IGp0KHQpIDogcy5wdXNoKGkubGFzdFNlZ21lbnQoKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZ2V0RmllbGRzTWFwKGUpO1xuICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhpLCBuLCBzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZmllbGQgYXQgdGhlIHNwZWNpZmllZCBwYXRoLiBJZiB0aGVyZSBpcyBubyBmaWVsZCBhdCB0aGVcbiAgICAgKiBzcGVjaWZpZWQgcGF0aCwgbm90aGluZyBpcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byByZW1vdmUuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmZpZWxkKHQucG9wTGFzdCgpKTtcbiAgICAgICAgS3QoZSkgJiYgZS5tYXBWYWx1ZS5maWVsZHMgJiYgZGVsZXRlIGUubWFwVmFsdWUuZmllbGRzW3QubGFzdFNlZ21lbnQoKV07XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gTnQodGhpcy52YWx1ZSwgdC52YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hcCB0aGF0IGNvbnRhaW5zIHRoZSBsZWFmIGVsZW1lbnQgb2YgYHBhdGhgLiBJZiB0aGUgcGFyZW50XG4gICAgICogZW50cnkgZG9lcyBub3QgeWV0IGV4aXN0LCBvciBpZiBpdCBpcyBub3QgYSBtYXAsIGEgbmV3IG1hcCB3aWxsIGJlIGNyZWF0ZWQuXG4gICAgICovICAgIGdldEZpZWxkc01hcCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgZS5tYXBWYWx1ZS5maWVsZHMgfHwgKGUubWFwVmFsdWUgPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgIGxldCBzID0gZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildO1xuICAgICAgICAgICAgS3QocykgJiYgcy5tYXBWYWx1ZS5maWVsZHMgfHwgKHMgPSB7XG4gICAgICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXSA9IHMpLCBlID0gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZS5tYXBWYWx1ZS5maWVsZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIGBmaWVsZHNNYXBgIGJ5IGFkZGluZywgcmVwbGFjaW5nIG9yIGRlbGV0aW5nIHRoZSBzcGVjaWZpZWRcbiAgICAgKiBlbnRyaWVzLlxuICAgICAqLyAgICBhcHBseUNoYW5nZXModCwgZSwgbikge1xuICAgICAgICBsdChlLCAoKGUsIG4pID0+IHRbZV0gPSBuKSk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBkZWxldGUgdFtlXTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXQoanQodGhpcy52YWx1ZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRNYXNrIGJ1aWx0IGZyb20gYWxsIGZpZWxkcyBpbiBhIE1hcFZhbHVlLlxuICovIGZ1bmN0aW9uIFd0KHQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgcmV0dXJuIGx0KHQuZmllbGRzLCAoKHQsIG4pID0+IHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBtdChbIHQgXSk7XG4gICAgICAgIGlmIChLdChuKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IFd0KG4ubWFwVmFsdWUpLmZpZWxkcztcbiAgICAgICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgZW1wdHkgbWFwIGJ5IGFkZGluZyBpdCB0byB0aGUgRmllbGRNYXNrLlxuICAgICAgICAgICAgZS5wdXNoKHMpOyBlbHNlIFxuICAgICAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlXG4gICAgICAgICAgICAvLyBsZWFmIG5vZGVzLlxuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGUucHVzaChzLmNoaWxkKG4pKTtcbiAgICAgICAgfSBlbHNlIFxuICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGUgbGVhZlxuICAgICAgICAvLyBub2Rlcy5cbiAgICAgICAgZS5wdXNoKHMpO1xuICAgIH0pKSwgbmV3IGd0KGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlIHdpdGggYSBrZXksIHZlcnNpb24sIGRhdGEgYW5kIHdoZXRoZXIgaXRcbiAqIGhhcyBsb2NhbCBtdXRhdGlvbnMgYXBwbGllZCB0byBpdC5cbiAqXG4gKiBEb2N1bWVudHMgY2FuIHRyYW5zaXRpb24gYmV0d2VlbiBzdGF0ZXMgdmlhIGBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KClgLFxuICogYGNvbnZlcnRUb05vRG9jdW1lbnQoKWAgYW5kIGBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQoKWAuIElmIGEgZG9jdW1lbnQgZG9lc1xuICogbm90IHRyYW5zaXRpb24gdG8gb25lIG9mIHRoZXNlIHN0YXRlcyBldmVuIGFmdGVyIGFsbCBtdXRhdGlvbnMgaGF2ZSBiZWVuXG4gKiBhcHBsaWVkLCBgaXNWYWxpZERvY3VtZW50KClgIHJldHVybnMgZmFsc2UgYW5kIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgcmVtb3ZlZFxuICogZnJvbSBhbGwgdmlld3MuXG4gKi8gY2xhc3MgR3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IGUsIHRoaXMudmVyc2lvbiA9IG4sIHRoaXMuZGF0YSA9IHMsIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCB3aXRoIG5vIGtub3duIHZlcnNpb24gb3IgZGF0YSwgYnV0IHdoaWNoIGNhbiBzZXJ2ZSBhc1xuICAgICAqIGJhc2UgZG9jdW1lbnQgZm9yIG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ludmFsaWREb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR3QodCwgMCAvKiBJTlZBTElEICovICwgdXQubWluKCksIFF0LmVtcHR5KCksIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IHdpdGggdGhlIGdpdmVuIGRhdGEgYXQgdGhlXG4gICAgICogZ2l2ZW4gdmVyc2lvbi5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ZvdW5kRG9jdW1lbnQodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IEd0KHQsIDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gLCBlLCBuLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gbm90IGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uLiAqLyAgICBzdGF0aWMgbmV3Tm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgR3QodCwgMiAvKiBOT19ET0NVTUVOVCAqLyAsIGUsIFF0LmVtcHR5KCksIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHdob3NlIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgc3RhdGljIG5ld1Vua25vd25Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgR3QodCwgMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovICwgZSwgUXQuZW1wdHkoKSwgMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYW5kIHRoYXQgaXRzIHZlcnNpb25cbiAgICAgKiBhbmQgZGF0YSBhcmUga25vd24uXG4gICAgICovICAgIGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAxIC8qIEZPVU5EX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gZSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGRvZXNuJ3QgZXhpc3QgYXQgdGhlIGdpdmVuXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi8gICAgY29udmVydFRvTm9Eb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDIgLyogTk9fRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBRdC5lbXB0eSgpLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBTWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGF0IGEgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB0aGF0IGl0cyBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IFF0LmVtcHR5KCksIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMSAvKiBIQVNfTE9DQUxfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgZ2V0IGhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBIQVNfTE9DQUxfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICB9XG4gICAgaXNWYWxpZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMCAvKiBJTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNGb3VuZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMSAvKiBGT1VORF9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzTm9Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogTk9fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc1Vua25vd25Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEd0ICYmIHRoaXMua2V5LmlzRXF1YWwodC5rZXkpICYmIHRoaXMudmVyc2lvbi5pc0VxdWFsKHQudmVyc2lvbikgJiYgdGhpcy5kb2N1bWVudFR5cGUgPT09IHQuZG9jdW1lbnRUeXBlICYmIHRoaXMuZG9jdW1lbnRTdGF0ZSA9PT0gdC5kb2N1bWVudFN0YXRlICYmIHRoaXMuZGF0YS5pc0VxdWFsKHQuZGF0YSk7XG4gICAgfVxuICAgIG11dGFibGVDb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IEd0KHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLmRhdGEuY2xvbmUoKSwgdGhpcy5kb2N1bWVudFN0YXRlKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgRG9jdW1lbnQoJHt0aGlzLmtleX0sICR7dGhpcy52ZXJzaW9ufSwgJHtKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEudmFsdWUpfSwge2RvY3VtZW50VHlwZTogJHt0aGlzLmRvY3VtZW50VHlwZX19KSwge2RvY3VtZW50U3RhdGU6ICR7dGhpcy5kb2N1bWVudFN0YXRlfX0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdGhlIHZhbHVlIGZvciBmaWVsZCBgZmllbGRgIGluIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuIFRocm93cyBpZlxuICogdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIGJvdGggZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgenQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMub3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIHRoaXMubGltaXQgPSBpLCBcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gciwgdGhpcy5lbmRBdCA9IG8sIHRoaXMuUiA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIEh0KHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgIHJldHVybiBuZXcgenQodCwgZSwgbiwgcywgaSwgciwgbyk7XG59XG5cbmZ1bmN0aW9uIEp0KHQpIHtcbiAgICBjb25zdCBlID0gSyh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5SKSB7XG4gICAgICAgIGxldCB0ID0gZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAodCArPSBcInxjZzpcIiArIGUuY29sbGVjdGlvbkdyb3VwKSwgdCArPSBcInxmOlwiLCB0ICs9IGUuZmlsdGVycy5tYXAoKHQgPT4gZWUodCkpKS5qb2luKFwiLFwiKSwgXG4gICAgICAgIHQgKz0gXCJ8b2I6XCIsIHQgKz0gZS5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cbiAgICAgICAgICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5kaXI7XG4gICAgICAgIH0odCkpKS5qb2luKFwiLFwiKSwgdnQoZS5saW1pdCkgfHwgKHQgKz0gXCJ8bDpcIiwgdCArPSBlLmxpbWl0KSwgZS5zdGFydEF0ICYmICh0ICs9IFwifGxiOlwiLCBcbiAgICAgICAgdCArPSBsZShlLnN0YXJ0QXQpKSwgZS5lbmRBdCAmJiAodCArPSBcInx1YjpcIiwgdCArPSBsZShlLmVuZEF0KSksIGUuUiA9IHQ7XG4gICAgfVxuICAgIHJldHVybiBlLlI7XG59XG5cbmZ1bmN0aW9uIFl0KHQpIHtcbiAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKGUgKz0gXCIgY29sbGVjdGlvbkdyb3VwPVwiICsgdC5jb2xsZWN0aW9uR3JvdXApLCBcbiAgICB0LmZpbHRlcnMubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBmaWx0ZXJzOiBbJHt0LmZpbHRlcnMubWFwKCh0ID0+IHtcbiAgICAgICAgcmV0dXJuIGAkeyhlID0gdCkuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICR7ZS5vcH0gJHtPdChlLnZhbHVlKX1gO1xuICAgICAgICAvKiogUmV0dXJucyBhIGRlYnVnIGRlc2NyaXB0aW9uIGZvciBgZmlsdGVyYC4gKi9cbiAgICAgICAgdmFyIGU7XG4gICAgICAgIC8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovICAgIH0pKS5qb2luKFwiLCBcIil9XWApLCBcbiAgICB2dCh0LmxpbWl0KSB8fCAoZSArPSBcIiwgbGltaXQ6IFwiICsgdC5saW1pdCksIHQub3JkZXJCeS5sZW5ndGggPiAwICYmIChlICs9IGAsIG9yZGVyQnk6IFske3Qub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gYCR7dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gKCR7dC5kaXJ9KWA7XG4gICAgfSh0KSkpLmpvaW4oXCIsIFwiKX1dYCksIHQuc3RhcnRBdCAmJiAoZSArPSBcIiwgc3RhcnRBdDogXCIgKyBsZSh0LnN0YXJ0QXQpKSwgdC5lbmRBdCAmJiAoZSArPSBcIiwgZW5kQXQ6IFwiICsgbGUodC5lbmRBdCkpLCBcbiAgICBgVGFyZ2V0KCR7ZX0pYDtcbn1cblxuZnVuY3Rpb24gWHQodCwgZSkge1xuICAgIGlmICh0LmxpbWl0ICE9PSBlLmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKHQub3JkZXJCeS5sZW5ndGggIT09IGUub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCFkZSh0Lm9yZGVyQnlbbl0sIGUub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAodC5maWx0ZXJzLmxlbmd0aCAhPT0gZS5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5maWx0ZXJzLmxlbmd0aDsgaSsrKSBpZiAobiA9IHQuZmlsdGVyc1tpXSwgcyA9IGUuZmlsdGVyc1tpXSwgXG4gICAgbi5vcCAhPT0gcy5vcCB8fCAhbi5maWVsZC5pc0VxdWFsKHMuZmllbGQpIHx8ICFOdChuLnZhbHVlLCBzLnZhbHVlKSkgcmV0dXJuICExO1xuICAgIHZhciBuLCBzO1xuICAgIHJldHVybiB0LmNvbGxlY3Rpb25Hcm91cCA9PT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKCEhdC5wYXRoLmlzRXF1YWwoZS5wYXRoKSAmJiAoISFfZSh0LnN0YXJ0QXQsIGUuc3RhcnRBdCkgJiYgX2UodC5lbmRBdCwgZS5lbmRBdCkpKTtcbn1cblxuZnVuY3Rpb24gWnQodCkge1xuICAgIHJldHVybiBEdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbn1cblxuY2xhc3MgdGUgZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpZWxkID0gdCwgdGhpcy5vcCA9IGUsIHRoaXMudmFsdWUgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdC5pc0tleUZpZWxkKCkgPyBcImluXCIgLyogSU4gKi8gPT09IGUgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IGUgPyB0aGlzLlAodCwgZSwgbikgOiBuZXcgbmUodCwgZSwgbikgOiBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUgPyBuZXcgb2UodCwgbikgOiBcImluXCIgLyogSU4gKi8gPT09IGUgPyBuZXcgYWUodCwgbikgOiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gZSA/IG5ldyBjZSh0LCBuKSA6IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlID8gbmV3IHVlKHQsIG4pIDogbmV3IHRlKHQsIGUsIG4pO1xuICAgIH1cbiAgICBzdGF0aWMgUCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBcImluXCIgLyogSU4gKi8gPT09IGUgPyBuZXcgc2UodCwgbikgOiBuZXcgaWUodCwgbik7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICAvLyBUeXBlcyBkbyBub3QgaGF2ZSB0byBtYXRjaCBpbiBOT1RfRVFVQUwgZmlsdGVycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA9PT0gdGhpcy5vcCA/IG51bGwgIT09IGUgJiYgdGhpcy52KHh0KGUsIHRoaXMudmFsdWUpKSA6IG51bGwgIT09IGUgJiYgQ3QodGhpcy52YWx1ZSkgPT09IEN0KGUpICYmIHRoaXMudih4dChlLCB0aGlzLnZhbHVlKSk7XG4gICAgICAgIC8vIE9ubHkgY29tcGFyZSB0eXBlcyB3aXRoIG1hdGNoaW5nIGJhY2tlbmQgb3JkZXIgKHN1Y2ggYXMgZG91YmxlIGFuZCBpbnQpLlxuICAgICAgICB9XG4gICAgdih0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDwgMDtcblxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8PSAwO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgIT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPj0gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gQigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFYoKSB7XG4gICAgICAgIHJldHVybiBbIFwiPFwiIC8qIExFU1NfVEhBTiAqLyAsIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gLCBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi8gLCBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovICwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF0uaW5kZXhPZih0aGlzLm9wKSA+PSAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZWUodCkge1xuICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IFRlY2huaWNhbGx5LCB0aGlzIHdvbid0IGJlIHVuaXF1ZSBpZiB0d28gdmFsdWVzIGhhdmVcbiAgICAvLyB0aGUgc2FtZSBkZXNjcmlwdGlvbiwgc3VjaCBhcyB0aGUgaW50IDMgYW5kIHRoZSBzdHJpbmcgXCIzXCIuIFNvIHdlIHNob3VsZFxuICAgIC8vIGFkZCB0aGUgdHlwZXMgaW4gaGVyZSBzb21laG93LCB0b28uXG4gICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0Lm9wLnRvU3RyaW5nKCkgKyBPdCh0LnZhbHVlKTtcbn1cblxuY2xhc3MgbmUgZXh0ZW5kcyB0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCBuKSwgdGhpcy5rZXkgPSBEdC5mcm9tTmFtZShuLnJlZmVyZW5jZVZhbHVlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEdC5jb21wYXJhdG9yKHQua2V5LCB0aGlzLmtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLnYoZSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3Mgc2UgZXh0ZW5kcyB0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gcmUoXCJpblwiIC8qIElOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyBub3QgcHJlc2VudCB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIGllIGV4dGVuZHMgdGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gcmUoXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmUodCwgZSkge1xuICAgIHZhciBuO1xuICAgIHJldHVybiAoKG51bGwgPT09IChuID0gZS5hcnJheVZhbHVlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnZhbHVlcykgfHwgW10pLm1hcCgodCA9PiBEdC5mcm9tTmFtZSh0LnJlZmVyZW5jZVZhbHVlKSkpO1xufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucyBvcGVyYXRvci4gKi8gY2xhc3Mgb2UgZXh0ZW5kcyB0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBCdChlKSAmJiBrdChlLmFycmF5VmFsdWUsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovIGNsYXNzIGFlIGV4dGVuZHMgdGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIElOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiBrdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgbm90LWluIG9wZXJhdG9yLiAqLyBjbGFzcyBjZSBleHRlbmRzIHRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBpZiAoa3QodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmICFrdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMtYW55IG9wZXJhdG9yLiAqLyBjbGFzcyB1ZSBleHRlbmRzIHRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gISghQnQoZSkgfHwgIWUuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIGUuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgodCA9PiBrdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHQpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBib3VuZCBvZiBhIHF1ZXJ5LlxuICpcbiAqIFRoZSBib3VuZCBpcyBzcGVjaWZpZWQgd2l0aCB0aGUgZ2l2ZW4gY29tcG9uZW50cyByZXByZXNlbnRpbmcgYSBwb3NpdGlvbiBhbmRcbiAqIHdoZXRoZXIgaXQncyBqdXN0IGJlZm9yZSBvciBqdXN0IGFmdGVyIHRoZSBwb3NpdGlvbiAocmVsYXRpdmUgdG8gd2hhdGV2ZXIgdGhlXG4gKiBxdWVyeSBvcmRlciBpcykuXG4gKlxuICogVGhlIHBvc2l0aW9uIHJlcHJlc2VudHMgYSBsb2dpY2FsIGluZGV4IHBvc2l0aW9uIGZvciBhIHF1ZXJ5LiBJdCdzIGEgcHJlZml4XG4gKiBvZiB2YWx1ZXMgZm9yIHRoZSAocG90ZW50aWFsbHkgaW1wbGljaXQpIG9yZGVyIGJ5IGNsYXVzZXMgb2YgYSBxdWVyeS5cbiAqXG4gKiBCb3VuZCBwcm92aWRlcyBhIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZG9jdW1lbnQgY29tZXMgYmVmb3JlIG9yXG4gKiBhZnRlciBhIGJvdW5kLiBUaGlzIGlzIGluZmx1ZW5jZWQgYnkgd2hldGhlciB0aGUgcG9zaXRpb24gaXMganVzdCBiZWZvcmUgb3JcbiAqIGp1c3QgYWZ0ZXIgdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAqLyBjbGFzcyBoZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdCwgdGhpcy5iZWZvcmUgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbGUodCkge1xuICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgIHJldHVybiBgJHt0LmJlZm9yZSA/IFwiYlwiIDogXCJhXCJ9OiR7dC5wb3NpdGlvbi5tYXAoKHQgPT4gT3QodCkpKS5qb2luKFwiLFwiKX1gO1xufVxuXG4vKipcbiAqIEFuIG9yZGVyaW5nIG9uIGEgZmllbGQsIGluIHNvbWUgRGlyZWN0aW9uLiBEaXJlY3Rpb24gZGVmYXVsdHMgdG8gQVNDRU5ESU5HLlxuICovIGNsYXNzIGZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8pIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMuZGlyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRlKHQsIGUpIHtcbiAgICByZXR1cm4gdC5kaXIgPT09IGUuZGlyICYmIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi8gZnVuY3Rpb24gd2UodCwgZSwgbikge1xuICAgIGxldCBzID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IGVbaV0sIG8gPSB0LnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAoci5maWVsZC5pc0tleUZpZWxkKCkpIHMgPSBEdC5jb21wYXJhdG9yKER0LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgcyA9IHh0KG8sIG4uZGF0YS5maWVsZChyLmZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gPT09IHIuZGlyICYmIChzICo9IC0xKSwgMCAhPT0gcykgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0LmJlZm9yZSA/IHMgPD0gMCA6IHMgPCAwO1xufVxuXG5mdW5jdGlvbiBfZSh0LCBlKSB7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsID09PSBlO1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgaWYgKHQuYmVmb3JlICE9PSBlLmJlZm9yZSB8fCB0LnBvc2l0aW9uLmxlbmd0aCAhPT0gZS5wb3NpdGlvbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQucG9zaXRpb24ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKCFOdCh0LnBvc2l0aW9uW25dLCBlLnBvc2l0aW9uW25dKSkgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFF1ZXJ5IGVuY2Fwc3VsYXRlcyBhbGwgdGhlIHF1ZXJ5IGF0dHJpYnV0ZXMgd2Ugc3VwcG9ydCBpbiB0aGUgU0RLLiBJdCBjYW5cbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXG4gKiBxdWVyeSB0aGUgUmVtb3RlU3RvcmUgcmVzdWx0cy5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovIGNsYXNzIG1lIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IFwiRlwiIC8qIEZpcnN0ICovICwgbyA9IG51bGwsIGEgPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5leHBsaWNpdE9yZGVyQnkgPSBuLCB0aGlzLmZpbHRlcnMgPSBzLCBcbiAgICAgICAgdGhpcy5saW1pdCA9IGksIHRoaXMubGltaXRUeXBlID0gciwgdGhpcy5zdGFydEF0ID0gbywgdGhpcy5lbmRBdCA9IGEsIHRoaXMuUyA9IG51bGwsIFxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UuXG4gICAgICAgIHRoaXMuRCA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIGdlKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpIHtcbiAgICByZXR1cm4gbmV3IG1lKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24geWUodCkge1xuICAgIHJldHVybiBuZXcgbWUodCk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IGludG8gYSBjb2xsZWN0aW9uIHF1ZXJ5IGF0IGFcbiAqIHNwZWNpZmljIHBhdGguIFRoaXMgaXMgdXNlZCB3aGVuIGV4ZWN1dGluZyBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMsIHNpbmNlXG4gKiB3ZSBoYXZlIHRvIHNwbGl0IHRoZSBxdWVyeSBpbnRvIGEgc2V0IG9mIGNvbGxlY3Rpb24gcXVlcmllcyBhdCBtdWx0aXBsZVxuICogcGF0aHMuXG4gKi8gZnVuY3Rpb24gcGUodCkge1xuICAgIHJldHVybiAhdnQodC5saW1pdCkgJiYgXCJGXCIgLyogRmlyc3QgKi8gPT09IHQubGltaXRUeXBlO1xufVxuXG5mdW5jdGlvbiBUZSh0KSB7XG4gICAgcmV0dXJuICF2dCh0LmxpbWl0KSAmJiBcIkxcIiAvKiBMYXN0ICovID09PSB0LmxpbWl0VHlwZTtcbn1cblxuZnVuY3Rpb24gRWUodCkge1xuICAgIHJldHVybiB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwID8gdC5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBJZSh0KSB7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZmlsdGVycykgaWYgKGUuVigpKSByZXR1cm4gZS5maWVsZDtcbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBPcGVyYXRvcnMgYXJlIGluY2x1ZGVkIGluIHRoZSBxdWVyeSBhbmRcbiAqIHJldHVybnMgdGhlIGZpcnN0IG9uZSB0aGF0IGlzLCBvciBudWxsIGlmIG5vbmUgYXJlLlxuICovXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcmF0aGVyIHRoYW4gYSBzcGVjaWZpY1xuICogY29sbGVjdGlvbi5cbiAqL1xuZnVuY3Rpb24gQWUodCkge1xuICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbXBsaWNpdCBvcmRlciBieSBjb25zdHJhaW50IHRoYXQgaXMgdXNlZCB0byBleGVjdXRlIHRoZSBRdWVyeSxcbiAqIHdoaWNoIGNhbiBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JkZXIgYnkgY29uc3RyYWludHMgdGhlIHVzZXIgcHJvdmlkZWQgKGUuZy5cbiAqIHRoZSBTREsgYW5kIGJhY2tlbmQgYWx3YXlzIG9yZGVycyBieSBgX19uYW1lX19gKS5cbiAqLyBmdW5jdGlvbiBSZSh0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgaWYgKG51bGwgPT09IGUuUykge1xuICAgICAgICBlLlMgPSBbXTtcbiAgICAgICAgY29uc3QgdCA9IEllKGUpLCBuID0gRWUoZSk7XG4gICAgICAgIGlmIChudWxsICE9PSB0ICYmIG51bGwgPT09IG4pIFxuICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXG4gICAgICAgIC8vIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkIGZvciBpdCB0byBiZSBhIHZhbGlkIHF1ZXJ5LlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaW5lcXVhbGl0eSBmaWVsZCBhbmQga2V5IG9yZGVyaW5nIGlzIGFzY2VuZGluZy5cbiAgICAgICAgdC5pc0tleUZpZWxkKCkgfHwgZS5TLnB1c2gobmV3IGZlKHQpKSwgZS5TLnB1c2gobmV3IGZlKG10LmtleUZpZWxkKCksIFwiYXNjXCIgLyogQVNDRU5ESU5HICovKSk7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmV4cGxpY2l0T3JkZXJCeSkgZS5TLnB1c2gobiksIG4uZmllbGQuaXNLZXlGaWVsZCgpICYmICh0ID0gITApO1xuICAgICAgICAgICAgaWYgKCF0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIG9yZGVyIG9mIHRoZSBpbXBsaWNpdCBrZXkgb3JkZXJpbmcgYWx3YXlzIG1hdGNoZXMgdGhlIGxhc3RcbiAgICAgICAgICAgICAgICAvLyBleHBsaWNpdCBvcmRlciBieVxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwID8gZS5leHBsaWNpdE9yZGVyQnlbZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIC0gMV0uZGlyIDogXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi87XG4gICAgICAgICAgICAgICAgZS5TLnB1c2gobmV3IGZlKG10LmtleUZpZWxkKCksIHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZS5TO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdCdzIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gYmUodCkge1xuICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgIGlmICghZS5EKSBpZiAoXCJGXCIgLyogRmlyc3QgKi8gPT09IGUubGltaXRUeXBlKSBlLkQgPSBIdChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBSZShlKSwgZS5maWx0ZXJzLCBlLmxpbWl0LCBlLnN0YXJ0QXQsIGUuZW5kQXQpOyBlbHNlIHtcbiAgICAgICAgLy8gRmxpcCB0aGUgb3JkZXJCeSBkaXJlY3Rpb25zIHNpbmNlIHdlIHdhbnQgdGhlIGxhc3QgcmVzdWx0c1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBSZShlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gPT09IG4uZGlyID8gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8gOiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovO1xuICAgICAgICAgICAgdC5wdXNoKG5ldyBmZShuLmZpZWxkLCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbmVlZCB0byBzd2FwIHRoZSBjdXJzb3JzIHRvIG1hdGNoIHRoZSBub3ctZmxpcHBlZCBxdWVyeSBvcmRlcmluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5lbmRBdCA/IG5ldyBoZShlLmVuZEF0LnBvc2l0aW9uLCAhZS5lbmRBdC5iZWZvcmUpIDogbnVsbCwgcyA9IGUuc3RhcnRBdCA/IG5ldyBoZShlLnN0YXJ0QXQucG9zaXRpb24sICFlLnN0YXJ0QXQuYmVmb3JlKSA6IG51bGw7XG4gICAgICAgIC8vIE5vdyByZXR1cm4gYXMgYSBMaW1pdFR5cGUuRmlyc3QgcXVlcnkuXG4gICAgICAgIGUuRCA9IEh0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIHQsIGUuZmlsdGVycywgZS5saW1pdCwgbiwgcyk7XG4gICAgfVxuICAgIHJldHVybiBlLkQ7XG59XG5cbmZ1bmN0aW9uIFBlKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gbmV3IG1lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCBlLCBuLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiB2ZSh0LCBlKSB7XG4gICAgcmV0dXJuIFh0KGJlKHQpLCBiZShlKSkgJiYgdC5saW1pdFR5cGUgPT09IGUubGltaXRUeXBlO1xufVxuXG4vLyBUT0RPKGIvMjkxODMxNjUpOiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgdW5pcXVlIHN0cmluZyBmcm9tIGEgcXVlcnkgdG8sIGZvclxuLy8gZXhhbXBsZSwgdXNlIGFzIGEgZGljdGlvbmFyeSBrZXksIGJ1dCB0aGUgaW1wbGVtZW50YXRpb24gaXMgc3ViamVjdCB0b1xuLy8gY29sbGlzaW9ucy4gTWFrZSBpdCBjb2xsaXNpb24tZnJlZS5cbmZ1bmN0aW9uIFZlKHQpIHtcbiAgICByZXR1cm4gYCR7SnQoYmUodCkpfXxsdDoke3QubGltaXRUeXBlfWA7XG59XG5cbmZ1bmN0aW9uIFNlKHQpIHtcbiAgICByZXR1cm4gYFF1ZXJ5KHRhcmdldD0ke1l0KGJlKHQpKX07IGxpbWl0VHlwZT0ke3QubGltaXRUeXBlfSlgO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIGBkb2NgIG1hdGNoZXMgdGhlIGNvbnN0cmFpbnRzIG9mIGBxdWVyeWAuICovIGZ1bmN0aW9uIERlKHQsIGUpIHtcbiAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmtleS5wYXRoO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgPyBlLmtleS5oYXNDb2xsZWN0aW9uSWQodC5jb2xsZWN0aW9uR3JvdXApICYmIHQucGF0aC5pc1ByZWZpeE9mKG4pIDogRHQuaXNEb2N1bWVudEtleSh0LnBhdGgpID8gdC5wYXRoLmlzRXF1YWwobikgOiB0LnBhdGguaXNJbW1lZGlhdGVQYXJlbnRPZihuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIGRvY3VtZW50IG11c3QgaGF2ZSBhIHZhbHVlIGZvciBldmVyeSBvcmRlcmluZyBjbGF1c2UgaW4gb3JkZXIgdG8gc2hvdyB1cFxuICogaW4gdGhlIHJlc3VsdHMuXG4gKi8gKHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZXhwbGljaXRPcmRlckJ5KSBcbiAgICAgICAgLy8gb3JkZXIgYnkga2V5IGFsd2F5cyBtYXRjaGVzXG4gICAgICAgIGlmICghbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgbnVsbCA9PT0gZS5kYXRhLmZpZWxkKG4uZmllbGQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9KHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZmlsdGVycykgaWYgKCFuLm1hdGNoZXMoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogTWFrZXMgc3VyZSBhIGRvY3VtZW50IGlzIHdpdGhpbiB0aGUgYm91bmRzLCBpZiBwcm92aWRlZC4gKi8gKHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKHQuc3RhcnRBdCAmJiAhd2UodC5zdGFydEF0LCBSZSh0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHQuZW5kQXQgJiYgd2UodC5lbmRBdCwgUmUodCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBDZSh0KSB7XG4gICAgcmV0dXJuIChlLCBuKSA9PiB7XG4gICAgICAgIGxldCBzID0gITE7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBSZSh0KSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IE5lKGksIGUsIG4pO1xuICAgICAgICAgICAgaWYgKDAgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgcyA9IHMgfHwgaS5maWVsZC5pc0tleUZpZWxkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gTmUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LmZpZWxkLmlzS2V5RmllbGQoKSA/IER0LmNvbXBhcmF0b3IoZS5rZXksIG4ua2V5KSA6IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUuZGF0YS5maWVsZCh0KSwgaSA9IG4uZGF0YS5maWVsZCh0KTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHMgJiYgbnVsbCAhPT0gaSA/IHh0KHMsIGkpIDogQigpO1xuICAgIH0odC5maWVsZCwgZSwgbik7XG4gICAgc3dpdGNoICh0LmRpcikge1xuICAgICAgY2FzZSBcImFzY1wiIC8qIEFTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiBzO1xuXG4gICAgICBjYXNlIFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiBzO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQigpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhbiBEb3VibGVWYWx1ZSBmb3IgYHZhbHVlYCB0aGF0IGlzIGVuY29kZWQgYmFzZWQgdGhlIHNlcmlhbGl6ZXInc1xuICogYHVzZVByb3RvM0pzb25gIHNldHRpbmcuXG4gKi8gZnVuY3Rpb24ga2UodCwgZSkge1xuICAgIGlmICh0LkMpIHtcbiAgICAgICAgaWYgKGlzTmFOKGUpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IFZ0KGUpID8gXCItMFwiIDogZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBJbnRlZ2VyVmFsdWUgZm9yIGB2YWx1ZWAuXG4gKi8gZnVuY3Rpb24geGUodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiAkZSh0LCBlKSB7XG4gICAgcmV0dXJuIFN0KGUpID8geGUoZSkgOiBrZSh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBVc2VkIHRvIHJlcHJlc2VudCBhIGZpZWxkIHRyYW5zZm9ybSBvbiBhIG11dGF0aW9uLiAqLyBjbGFzcyBPZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gRmUodCwgZSwgbikge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgQmUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJzZXJ2ZXJfdGltZXN0YW1wXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9fbG9jYWxfd3JpdGVfdGltZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW5vczogdC5uYW5vc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZSAmJiAobi5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fID0gZSksIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiBuXG4gICAgICAgIH07XG4gICAgfShuLCBlKSA6IHQgaW5zdGFuY2VvZiBVZSA/IHFlKHQsIGUpIDogdCBpbnN0YW5jZW9mIEtlID8gamUodCwgZSkgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXG4gICAgICAgIGNvbnN0IG4gPSBMZSh0LCBlKSwgcyA9IFdlKG4pICsgV2UodC5OKTtcbiAgICAgICAgcmV0dXJuIEx0KG4pICYmIEx0KHQuTikgPyB4ZShzKSA6IGtlKHQuaywgcyk7XG4gICAgfSh0LCBlKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGZpbmFsIHRyYW5zZm9ybSByZXN1bHQgYWZ0ZXIgdGhlIHRyYW5zZm9ybSBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAqIGJ5IHRoZSBzZXJ2ZXIsIHBvdGVudGlhbGx5IHVzaW5nIHRoZSBzZXJ2ZXItcHJvdmlkZWQgdHJhbnNmb3JtUmVzdWx0LlxuICovIGZ1bmN0aW9uIE1lKHQsIGUsIG4pIHtcbiAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcbiAgICAvLyBhcHBsaWNhdGlvbnMuXG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBVZSA/IHFlKHQsIGUpIDogdCBpbnN0YW5jZW9mIEtlID8gamUodCwgZSkgOiBuO1xufVxuXG4vKipcbiAqIElmIHRoaXMgdHJhbnNmb3JtIG9wZXJhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0b1xuICogcGVyc2lzdCBmb3IgdGhpcyB0cmFuc2Zvcm0uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIHRyYW5zZm9ybVxuICogb3BlcmF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXNcbiAqIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIEJhc2UgdmFsdWVzIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmRcbiAqIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZSBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmRcbiAqIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlIHRyYW5zZm9ybSBvcGVyYXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMsIGFzIHRoZXkgY2FuIGJlIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhc1xuICogYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLlxuICovIGZ1bmN0aW9uIExlKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFFlID8gTHQobiA9IGUpIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGVpdGhlciBhbiBJbnRlZ2VyVmFsdWUgb3IgYSBEb3VibGVWYWx1ZS4gKi8gKG4pID8gZSA6IHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiAwXG4gICAgfSA6IG51bGw7XG4gICAgdmFyIG47XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xuY2xhc3MgQmUgZXh0ZW5kcyBPZSB7fVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovIGNsYXNzIFVlIGV4dGVuZHMgT2Uge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBxZSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEdlKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuLnNvbWUoKHQgPT4gTnQodCwgZSkpKSB8fCBuLnB1c2goZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBLZSBleHRlbmRzIE9lIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gamUodCwgZSkge1xuICAgIGxldCBuID0gR2UoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4gPSBuLmZpbHRlcigodCA9PiAhTnQodCwgZSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxuICovIGNsYXNzIFFlIGV4dGVuZHMgT2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rID0gdCwgdGhpcy5OID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFdlKHQpIHtcbiAgICByZXR1cm4gSXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIEdlKHQpIHtcbiAgICByZXR1cm4gQnQodCkgJiYgdC5hcnJheVZhbHVlLnZhbHVlcyA/IHQuYXJyYXlWYWx1ZS52YWx1ZXMuc2xpY2UoKSA6IFtdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovIGNsYXNzIHplIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLnRyYW5zZm9ybSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBIZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgVWUgJiYgZSBpbnN0YW5jZW9mIFVlIHx8IHQgaW5zdGFuY2VvZiBLZSAmJiBlIGluc3RhbmNlb2YgS2UgPyBvdCh0LmVsZW1lbnRzLCBlLmVsZW1lbnRzLCBOdCkgOiB0IGluc3RhbmNlb2YgUWUgJiYgZSBpbnN0YW5jZW9mIFFlID8gTnQodC5OLCBlLk4pIDogdCBpbnN0YW5jZW9mIEJlICYmIGUgaW5zdGFuY2VvZiBCZTtcbiAgICB9KHQudHJhbnNmb3JtLCBlLnRyYW5zZm9ybSk7XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xuY2xhc3MgSmUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxuICAgICAqXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhIG11dGF0aW9uXG4gICAgICogY29udGFpbmluZyBmaWVsZCB0cmFuc2Zvcm1zIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWVcbiAgICAgKiBmb3IgZWFjaCBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXG4gICAgICpcbiAgICAgKiBXaWxsIGJlIGVtcHR5IGlmIHRoZSBtdXRhdGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IGZpZWxkIHRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXG4gKi8gY2xhc3MgWWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gdCwgdGhpcy5leGlzdHMgPSBlO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBlbXB0eSBQcmVjb25kaXRpb24uICovICAgIHN0YXRpYyBub25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFllO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi8gICAgc3RhdGljIGV4aXN0cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgWWUodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi8gICAgc3RhdGljIHVwZGF0ZVRpbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IFllKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqLyAgICBnZXQgaXNOb25lKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0aGlzLnVwZGF0ZVRpbWUgJiYgdm9pZCAwID09PSB0aGlzLmV4aXN0cztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gdC5leGlzdHMgJiYgKHRoaXMudXBkYXRlVGltZSA/ICEhdC51cGRhdGVUaW1lICYmIHRoaXMudXBkYXRlVGltZS5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiAhdC51cGRhdGVUaW1lKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gZnVuY3Rpb24gWGUodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6IHZvaWQgMCA9PT0gdC5leGlzdHMgfHwgdC5leGlzdHMgPT09IGUuaXNGb3VuZERvY3VtZW50KCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXG4gKlxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0cyB2ZXJzaW9uLlxuICpcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gRm9yIERlbGV0ZSBtdXRhdGlvbnMsIHdlXG4gKiByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxuICpcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cbiAqXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cbiAqXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcbiAqIFNldE11dGF0aW9uICAgICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgRG9jdW1lbnQodjApXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBVbmtub3duRG9jdW1lbnQodjMpXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIE5vRG9jdW1lbnQodjApXG4gKlxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gQXMgZGVsZXRlcyBoYXZlIG5vXG4gKiBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxuICogRGVsZXRlIG11dGF0aW9ucy5cbiAqXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xuICogbG9jYWxseSwgd2UgdHJhbnNpdGlvbiB0byBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzXG4gKiB0aGUgdXBkYXRlZCB2ZXJzaW9uLlxuICpcbiAqIEZpZWxkIHRyYW5zZm9ybXMgYXJlIHVzZWQgb25seSB3aXRoIFBhdGNoIGFuZCBTZXQgTXV0YXRpb25zLiBXZSB1c2UgdGhlXG4gKiBgdXBkYXRlVHJhbnNmb3Jtc2AgbWVzc2FnZSB0byBzdG9yZSB0cmFuc2Zvcm1zLCByYXRoZXIgdGhhbiB0aGUgYHRyYW5zZm9ybXNgc1xuICogbWVzc2FnZXMuXG4gKlxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcbiAqXG4gKiBFdmVyeSB0eXBlIG9mIG11dGF0aW9uIG5lZWRzIHRvIGltcGxlbWVudCBpdHMgb3duIGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQgKHNlZSBgc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoKWAgZm9yIGFuXG4gKiBleGFtcGxlKS5cbiAqLyBjbGFzcyBaZSB7fVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmcgYVxuICogbmV3IHJlbW90ZSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHN0YXRlXG4gKiAoZS5nLiBpdCBpcyBpbnZhbGlkIG9yIG91dGRhdGVkKSwgdGhlIGRvY3VtZW50IHR5cGUgbWF5IHRyYW5zaXRpb24gdG9cbiAqIHVua25vd24uXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbXV0YXRpb25SZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvbiBmcm9tIHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIHRuKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2Ygb24gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBzZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYVxuICAgICAgICAvLyByZW1vdGUgZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbXVzdCBoYXZlIGhlbGQuXG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSB1bih0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIHMpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiB0IGluc3RhbmNlb2YgYW4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghWGUodC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXG4gICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIGNvbnZlcnQgdG8gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggYVxuICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxuICAgICAgICByZXR1cm4gdm9pZCBlLmNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChuLnZlcnNpb24pO1xuICAgICAgICBjb25zdCBzID0gdW4odC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKGNuKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIGkpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQobi52ZXJzaW9uKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KDAsIGUsIG4pO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmdcbiAqIHRoZSBuZXcgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGVcbiAqIGV4cGVjdGVkIHN0YXRlLCB0aGUgZG9jdW1lbnQgaXMgbm90IG1vZGlmaWVkLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gQSB0aW1lc3RhbXAgaW5kaWNhdGluZyB0aGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGVcbiAqICAgICBiYXRjaCB0aGlzIG11dGF0aW9uIGlzIGEgcGFydCBvZi5cbiAqLyBmdW5jdGlvbiBlbih0LCBlLCBuKSB7XG4gICAgdCBpbnN0YW5jZW9mIG9uID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIVhlKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFRoZSBtdXRhdGlvbiBmYWlsZWQgdG8gYXBwbHkgKGUuZy4gYSBkb2N1bWVudCBJRCBjcmVhdGVkIHdpdGggYWRkKClcbiAgICAgICAgLy8gY2F1c2VkIGEgbmFtZSBjb2xsaXNpb24pLlxuICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSBobih0LmZpZWxkVHJhbnNmb3JtcywgbiwgZSk7XG4gICAgICAgIHMuc2V0QWxsKGkpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQocm4oZSksIHMpLnNldEhhc0xvY2FsTXV0YXRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogZ2l2ZW4gdmFsdWVzLiBUaGUgdmFsdWVzIGFyZSBhcHBsaWVkIHRocm91Z2ggYSBmaWVsZCBtYXNrOlxuICpcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBib3RoIHRoZSBtYXNrIGFuZCB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgdXBkYXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBuZWl0aGVyIHRoZSBtYXNrIG5vciB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZ1xuICogICAgZmllbGQgaXMgdW5tb2RpZmllZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiB0aGUgbWFzayBidXQgbm90IGluIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyBkZWxldGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIG5vdCBpbiB0aGUgbWFzayBidXQgaXMgaW4gdGhlIHZhbHVlcywgdGhlIHZhbHVlcyBtYXAgaXNcbiAqICAgIGlnbm9yZWQuXG4gKi8gKHQsIGUsIG4pIDogdCBpbnN0YW5jZW9mIGFuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIVhlKHQucHJlY29uZGl0aW9uLCBlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gaG4odC5maWVsZFRyYW5zZm9ybXMsIG4sIGUpLCBpID0gZS5kYXRhO1xuICAgICAgICBpLnNldEFsbChjbih0KSksIGkuc2V0QWxsKHMpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQocm4oZSksIGkpLnNldEhhc0xvY2FsTXV0YXRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIEZpZWxkUGF0aC9WYWx1ZSBtYXAgd2l0aCB0aGUgY29udGVudCBvZiB0aGUgUGF0Y2hNdXRhdGlvbi5cbiAqLyAodCwgZSwgbikgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIFhlKHQucHJlY29uZGl0aW9uLCBlKSAmJiBcbiAgICAgICAgLy8gV2UgZG9uJ3QgY2FsbCBgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKWAgc2luY2Ugd2Ugd2FudCB0byBiZSBiYWNrd2FyZHNcbiAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBleGlzdGluZyBTREsgYmVoYXZpb3IuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudCh1dC5taW4oKSk7XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IHZlcmlmaWVzIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aFxuICogdGhlIHByb3ZpZGVkIHByZWNvbmRpdGlvbi5cbiAqXG4gKiBUaGUgYHZlcmlmeWAgb3BlcmF0aW9uIGlzIG9ubHkgdXNlZCBpbiBUcmFuc2FjdGlvbnMsIGFuZCB0aGlzIGNsYXNzIHNlcnZlc1xuICogcHJpbWFyaWx5IHRvIGZhY2lsaXRhdGUgc2VyaWFsaXphdGlvbiBpbnRvIHByb3Rvcy5cbiAqLyAodCwgZSk7XG59XG5cbi8qKlxuICogSWYgdGhpcyBtdXRhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0byBwZXJzaXN0IHdpdGhcbiAqIHRoaXMgbXV0YXRpb24uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIG11dGF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkXG4gKiB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIGEgc3BhcnNlIG9iamVjdCB0aGF0IGNvbnNpc3RzIG9mIG9ubHkgdGhlIGRvY3VtZW50XG4gKiBmaWVsZHMgZm9yIHdoaWNoIHRoaXMgbXV0YXRpb24gY29udGFpbnMgYSBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1hdGlvblxuICogKGUuZy4gYSBudW1lcmljIGluY3JlbWVudCkuIFRoZSBwcm92aWRlZCB2YWx1ZSBndWFyYW50ZWVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZCBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWVcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZVxuICogbXV0YXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yIGlkZW1wb3RlbnQgbXV0YXRpb25zLCBhcyB0aGV5IGNhbiBiZVxuICogcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIG5uKHQsIGUpIHtcbiAgICBsZXQgbiA9IG51bGw7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuZmllbGRUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQocy5maWVsZCksIGkgPSBMZShzLnRyYW5zZm9ybSwgdCB8fCBudWxsKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChudWxsID09IG4gJiYgKG4gPSBRdC5lbXB0eSgpKSwgbi5zZXQocy5maWVsZCwgaSkpO1xuICAgIH1cbiAgICByZXR1cm4gbiB8fCBudWxsO1xufVxuXG5mdW5jdGlvbiBzbih0LCBlKSB7XG4gICAgcmV0dXJuIHQudHlwZSA9PT0gZS50eXBlICYmICghIXQua2V5LmlzRXF1YWwoZS5rZXkpICYmICghIXQucHJlY29uZGl0aW9uLmlzRXF1YWwoZS5wcmVjb25kaXRpb24pICYmICghIWZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCAmJiB2b2lkIDAgPT09IGUgfHwgISghdCB8fCAhZSkgJiYgb3QodCwgZSwgKCh0LCBlKSA9PiBIZSh0LCBlKSkpO1xuICAgIH0odC5maWVsZFRyYW5zZm9ybXMsIGUuZmllbGRUcmFuc2Zvcm1zKSAmJiAoMCAvKiBTZXQgKi8gPT09IHQudHlwZSA/IHQudmFsdWUuaXNFcXVhbChlLnZhbHVlKSA6IDEgLyogUGF0Y2ggKi8gIT09IHQudHlwZSB8fCB0LmRhdGEuaXNFcXVhbChlLmRhdGEpICYmIHQuZmllbGRNYXNrLmlzRXF1YWwoZS5maWVsZE1hc2spKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB1c2UgYXMgdGhlIHJlc3VsdCBvZiBhXG4gKiBtdXRhdGlvbi4gTXV0YXRpb25zIGFyZSBkZWZpbmVkIHRvIHJldHVybiB0aGUgdmVyc2lvbiBvZiB0aGUgYmFzZSBkb2N1bWVudFxuICogb25seSBpZiBpdCBpcyBhbiBleGlzdGluZyBkb2N1bWVudC4gRGVsZXRlZCBhbmQgdW5rbm93biBkb2N1bWVudHMgaGF2ZSBhXG4gKiBwb3N0LW11dGF0aW9uIHZlcnNpb24gb2YgU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICovIGZ1bmN0aW9uIHJuKHQpIHtcbiAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSA/IHQudmVyc2lvbiA6IHV0Lm1pbigpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gdGhhdCBjcmVhdGVzIG9yIHJlcGxhY2VzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBvYmplY3QgdmFsdWUgY29udGVudHMuXG4gKi8gY2xhc3Mgb24gZXh0ZW5kcyBaZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcyA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy52YWx1ZSA9IGUsIHRoaXMucHJlY29uZGl0aW9uID0gbiwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBzLCBcbiAgICAgICAgdGhpcy50eXBlID0gMCAvKiBTZXQgKi87XG4gICAgfVxufVxuXG5jbGFzcyBhbiBleHRlbmRzIFplIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IG4sIHRoaXMucHJlY29uZGl0aW9uID0gcywgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSwgdGhpcy50eXBlID0gMSAvKiBQYXRjaCAqLztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNuKHQpIHtcbiAgICBjb25zdCBlID0gbmV3IE1hcDtcbiAgICByZXR1cm4gdC5maWVsZE1hc2suZmllbGRzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICBpZiAoIW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5kYXRhLmZpZWxkKG4pO1xuICAgICAgICAgICAgZS5zZXQobiwgcyk7XG4gICAgICAgIH1cbiAgICB9KSksIGU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2UgYWZ0ZXIgYSBtdXRhdGlvblxuICogY29udGFpbmluZyB0cmFuc2Zvcm1zIGhhcyBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEBwYXJhbSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIC0gVGhlIHRyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IHRoZSBzZXJ2ZXIuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiB1bih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgVSh0Lmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gdFtpXSwgbyA9IHIudHJhbnNmb3JtLCBhID0gZS5kYXRhLmZpZWxkKHIuZmllbGQpO1xuICAgICAgICBzLnNldChyLmZpZWxkLCBNZShvLCBhLCBuW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIHdoZW4gYXBwbHlpbmcgYVxuICogdHJhbnNmb3JtIGxvY2FsbHkuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgbXV0YXRpb24gKHVzZWQgdG9cbiAqICAgICBnZW5lcmF0ZSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMpLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqICAgICBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBobih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGkudHJhbnNmb3JtLCByID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICBzLnNldChpLmZpZWxkLCBGZSh0LCByLCBlKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIGxuIGV4dGVuZHMgWmUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDIgLyogRGVsZXRlICovICwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIGZuIGV4dGVuZHMgWmUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDMgLyogVmVyaWZ5ICovICwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGRuIHtcbiAgICAvLyBUT0RPKGIvMzMwNzgxNjMpOiBqdXN0IHVzZSBzaW1wbGVzdCBmb3JtIG9mIGV4aXN0ZW5jZSBmaWx0ZXIgZm9yIG5vd1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb3VudCA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAqXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgb3IgY2hhbmdlIHRoaXMgaW50byBhIGNvbnN0IGVudW0uXG4gKi8gdmFyIHduLCBfbjtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIG1uKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBCKCk7XG5cbiAgICAgIGNhc2Ugai5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIGouVU5LTk9XTjpcbiAgICAgIGNhc2Ugai5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2Ugai5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIGouSU5URVJOQUw6XG4gICAgICBjYXNlIGouVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2Ugai5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBqLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIGouTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBqLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBqLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBqLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBqLkFCT1JURUQ6XG4gICAgICBjYXNlIGouT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBqLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIGouREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiBnbih0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgXG4gICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcbiAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXG4gICAgcmV0dXJuIEYoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgai5VTktOT1dOO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSB3bi5PSzpcbiAgICAgICAgcmV0dXJuIGouT0s7XG5cbiAgICAgIGNhc2Ugd24uQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gai5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2Ugd24uVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIGouVU5LTk9XTjtcblxuICAgICAgY2FzZSB3bi5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIGouREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2Ugd24uUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gai5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2Ugd24uSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBqLklOVEVSTkFMO1xuXG4gICAgICBjYXNlIHduLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gai5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSB3bi5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBqLlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSB3bi5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gai5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIHduLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIGouTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIHduLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gai5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSB3bi5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIGouUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2Ugd24uRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIGouRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSB3bi5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gai5BQk9SVEVEO1xuXG4gICAgICBjYXNlIHduLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIGouT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIHduLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBqLlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2Ugd24uREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gai5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBCKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKF9uID0gd24gfHwgKHduID0ge30pKVtfbi5PSyA9IDBdID0gXCJPS1wiLCBfbltfbi5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxuX25bX24uVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIF9uW19uLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbl9uW19uLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIF9uW19uLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG5fbltfbi5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCBfbltfbi5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbl9uW19uLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIF9uW19uLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG5fbltfbi5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgX25bX24uQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbl9uW19uLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIF9uW19uLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG5fbltfbi5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgX25bX24uVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIF9uW19uLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4vLyB0cmVlLlxuY2xhc3MgeW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5yb290ID0gZSB8fCBUbi5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHluKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290Lmluc2VydCh0LCBlLCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgVG4uQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgeW4odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QucmVtb3ZlKHQsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBUbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFlLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb21wYXJhdG9yKHQsIGUua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gZS52YWx1ZTtcbiAgICAgICAgICAgIG4gPCAwID8gZSA9IGUubGVmdCA6IG4gPiAwICYmIChlID0gZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxuICAgIC8vIGV4aXN0LlxuICAgIGluZGV4T2YodCkge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcbiAgICAgICAgbGV0IGUgPSAwLCBuID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshbi5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY29tcGFyYXRvcih0LCBuLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGUgKyBuLmxlZnQuc2l6ZTtcbiAgICAgICAgICAgIHMgPCAwID8gbiA9IG4ubGVmdCA6IChcbiAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICBlICs9IG4ubGVmdC5zaXplICsgMSwgbiA9IG4ucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSwgbiksICExKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQucHVzaChgJHtlfToke259YCksICExKSkpLCBgeyR7dC5qb2luKFwiLCBcIil9fWA7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcbiAgICAvLyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwbih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IHBuKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwbih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwbih0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG5jbGFzcyBwbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IHMsIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIGlmIChpID0gZSA/IG4odC5rZXksIGUpIDogMSwgXG4gICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxuICAgICAgICBzICYmIChpICo9IC0xKSwgaSA8IDApIFxuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxuICAgICAgICB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LmxlZnQgOiB0LnJpZ2h0OyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgwID09PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGV4YWN0bHkgZXF1YWwgdG8gb3VyIHN0YXJ0IGtleS4gUHVzaCBpdCBvbiB0aGUgc3RhY2ssXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmVcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5yaWdodCA6IHQubGVmdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMubm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkgZm9yICh0ID0gdC5sZWZ0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHQucmlnaHQ7IGVsc2UgZm9yICh0ID0gdC5yaWdodDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIFxuICAgICAgICB0ID0gdC5sZWZ0O1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm5vZGVTdGFjay5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwSXRlcmF0b3Jcbi8vIFJlcHJlc2VudHMgYSBub2RlIGluIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFjayB0cmVlLlxuY2xhc3MgVG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5jb2xvciA9IG51bGwgIT0gbiA/IG4gOiBUbi5SRUQsIHRoaXMubGVmdCA9IG51bGwgIT0gcyA/IHMgOiBUbi5FTVBUWSwgXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsICE9IGkgPyBpIDogVG4uRU1QVFksIHRoaXMuc2l6ZSA9IHRoaXMubGVmdC5zaXplICsgMSArIHRoaXMucmlnaHQuc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZSwgb3B0aW9uYWxseSByZXBsYWNpbmcgcGllY2VzIG9mIGl0LlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gbmV3IFRuKG51bGwgIT0gdCA/IHQgOiB0aGlzLmtleSwgbnVsbCAhPSBlID8gZSA6IHRoaXMudmFsdWUsIG51bGwgIT0gbiA/IG4gOiB0aGlzLmNvbG9yLCBudWxsICE9IHMgPyBzIDogdGhpcy5sZWZ0LCBudWxsICE9IGkgPyBpIDogdGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLnJpZ2h0Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cbiAgICBtaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaXNFbXB0eSgpID8gdGhpcyA6IHRoaXMubGVmdC5taW4oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oKS5rZXk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuaXNFbXB0eSgpID8gdGhpcy5rZXkgOiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpID0gbih0LCBzLmtleSk7XG4gICAgICAgIHJldHVybiBzID0gaSA8IDAgPyBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0Lmluc2VydCh0LCBlLCBuKSwgbnVsbCkgOiAwID09PSBpID8gcy5jb3B5KG51bGwsIGUsIG51bGwsIG51bGwsIG51bGwpIDogcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQuaW5zZXJ0KHQsIGUsIG4pKSwgXG4gICAgICAgIHMuZml4VXAoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWluKCkge1xuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkgcmV0dXJuIFRuLkVNUFRZO1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LmxlZnQuaXNSZWQoKSB8fCB0LmxlZnQubGVmdC5pc1JlZCgpIHx8ICh0ID0gdC5tb3ZlUmVkTGVmdCgpKSwgdCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCB0LmxlZnQucmVtb3ZlTWluKCksIG51bGwpLCBcbiAgICAgICAgdC5maXhVcCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzID0gdGhpcztcbiAgICAgICAgaWYgKGUodCwgcy5rZXkpIDwgMCkgcy5sZWZ0LmlzRW1wdHkoKSB8fCBzLmxlZnQuaXNSZWQoKSB8fCBzLmxlZnQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkTGVmdCgpKSwgXG4gICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0LnJlbW92ZSh0LCBlKSwgbnVsbCk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHMubGVmdC5pc1JlZCgpICYmIChzID0gcy5yb3RhdGVSaWdodCgpKSwgcy5yaWdodC5pc0VtcHR5KCkgfHwgcy5yaWdodC5pc1JlZCgpIHx8IHMucmlnaHQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkUmlnaHQoKSksIFxuICAgICAgICAgICAgMCA9PT0gZSh0LCBzLmtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocy5yaWdodC5pc0VtcHR5KCkpIHJldHVybiBUbi5FTVBUWTtcbiAgICAgICAgICAgICAgICBuID0gcy5yaWdodC5taW4oKSwgcyA9IHMuY29weShuLmtleSwgbi52YWx1ZSwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmVNaW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlKHQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5maXhVcCgpO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cbiAgICBmaXhVcCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5pc1JlZCgpICYmICF0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlTGVmdCgpKSwgdC5sZWZ0LmlzUmVkKCkgJiYgdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0LmxlZnQuaXNSZWQoKSAmJiB0LnJpZ2h0LmlzUmVkKCkgJiYgKHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZExlZnQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQucmlnaHQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHQucmlnaHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0ID0gdC5yb3RhdGVMZWZ0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZFJpZ2h0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIHJvdGF0ZUxlZnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgVG4uUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIHQsIG51bGwpO1xuICAgIH1cbiAgICByb3RhdGVSaWdodCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBUbi5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCB0KTtcbiAgICB9XG4gICAgY29sb3JGbGlwKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCksIGUgPSB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMucmlnaHQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCB0LCBlKTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDIsIHQpIDw9IHRoaXMuc2l6ZSArIDE7XG4gICAgfVxuICAgIC8vIEluIGEgYmFsYW5jZWQgUkIgdHJlZSwgdGhlIGJsYWNrLWRlcHRoIChudW1iZXIgb2YgYmxhY2sgbm9kZXMpIGZyb20gcm9vdCB0b1xuICAgIC8vIGxlYXZlcyBpcyBlcXVhbCBvbiBib3RoIHNpZGVzLiAgVGhpcyBmdW5jdGlvbiB2ZXJpZmllcyB0aGF0IG9yIGFzc2VydHMuXG4gICAgY2hlY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHRocm93IEIoKTtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkgdGhyb3cgQigpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNoZWNrKCk7XG4gICAgICAgIGlmICh0ICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHRocm93IEIoKTtcbiAgICAgICAgcmV0dXJuIHQgKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xuICAgIH1cbn1cblxuIC8vIGVuZCBMTFJCTm9kZVxuLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5Ubi5FTVBUWSA9IG51bGwsIFRuLlJFRCA9ICEwLCBUbi5CTEFDSyA9ICExO1xuXG4vLyBlbmQgTExSQkVtcHR5Tm9kZVxuVG4uRU1QVFkgPSBuZXcgXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHRocm93IEIoKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0aHJvdyBCKCk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgQigpO1xuICAgIH1cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgdGhyb3cgQigpO1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKSB7XG4gICAgICAgIHRocm93IEIoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVG4odCwgZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIEVuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMuZGF0YSA9IG5ldyB5bih0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5kYXRhLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XG4gICAgfVxuICAgIGluZGV4T2YodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YodCk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdICZsdDs9IGVsZW0gJmx0OyByYW5nZVsxXS4gKi8gICAgZm9yRWFjaEluUmFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0WzBdKTtcbiAgICAgICAgZm9yICg7bi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihzLmtleSwgdFsxXSkgPj0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgZShzLmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgJmx0Oz0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZm9yRWFjaFdoaWxlKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiA9IHZvaWQgMCAhPT0gZSA/IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSkgOiB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTsgbi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKCF0KG4uZ2V0TmV4dCgpLmtleSkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi8gICAgZmlyc3RBZnRlck9yRXF1YWwodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KTtcbiAgICAgICAgcmV0dXJuIGUuaGFzTmV4dCgpID8gZS5nZXROZXh0KCkua2V5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW4odGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IEluKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpLmluc2VydCh0LCAhMCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyh0KSA/IHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xuICAgIH1cbiAgICB1bmlvbldpdGgodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBgcmVzdWx0YCBhbHdheXMgcmVmZXJzIHRvIHRoZSBsYXJnZXIgb25lIG9mIHRoZSB0d28gc2V0cy5cbiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaXplIDwgdC5zaXplICYmIChlID0gdCwgdCA9IHRoaXMpLCB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZSA9IGUuYWRkKHQpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgRW4pKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSB0LmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IodCwgcykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgXCJTb3J0ZWRTZXQoXCIgKyB0LnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRW4odGhpcy5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIGUuZGF0YSA9IHQsIGU7XG4gICAgfVxufVxuXG5jbGFzcyBJbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLml0ZXIgPSB0O1xuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmdldE5leHQoKS5rZXk7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgQW4gPSBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIFJuKCkge1xuICAgIHJldHVybiBBbjtcbn1cblxuY29uc3QgYm4gPSBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIFBuKCkge1xuICAgIHJldHVybiBibjtcbn1cblxuY29uc3Qgdm4gPSBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIFZuKCkge1xuICAgIHJldHVybiB2bjtcbn1cblxuY29uc3QgU24gPSBuZXcgRW4oRHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIERuKC4uLnQpIHtcbiAgICBsZXQgZSA9IFNuO1xuICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5hZGQobik7XG4gICAgcmV0dXJuIGU7XG59XG5cbmNvbnN0IENuID0gbmV3IEVuKHJ0KTtcblxuZnVuY3Rpb24gTm4oKSB7XG4gICAgcmV0dXJuIENuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxuICovIGNsYXNzIGtuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQuIExpc3RlbnMgZm9yIHRoZXNlXG4gICAgICogdGFyZ2V0cyBzaG91bGQgYmUgcmUtZXN0YWJsaXNoZWQgd2l0aG91dCByZXN1bWUgdG9rZW5zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IHQsIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IGUsIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IG4sIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gcywgXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBuLnNldCh0LCB4bi5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodCwgZSkpLCBuZXcga24odXQubWluKCksIG4sIE5uKCksIFJuKCksIERuKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFRhcmdldENoYW5nZSBzcGVjaWZpZXMgdGhlIHNldCBvZiBjaGFuZ2VzIGZvciBhIHNwZWNpZmljIHRhcmdldCBhcyBwYXJ0IG9mXG4gKiBhIFJlbW90ZUV2ZW50LiBUaGVzZSBjaGFuZ2VzIHRyYWNrIHdoaWNoIGRvY3VtZW50cyBhcmUgYWRkZWQsIG1vZGlmaWVkIG9yXG4gKiByZW1vdmVkLCBhcyB3ZWxsIGFzIHRoZSB0YXJnZXQncyByZXN1bWUgdG9rZW4gYW5kIHdoZXRoZXIgdGhlIHRhcmdldCBpc1xuICogbWFya2VkIENVUlJFTlQuXG4gKiBUaGUgYWN0dWFsIGNoYW5nZXMgKnRvKiBkb2N1bWVudHMgYXJlIG5vdCBwYXJ0IG9mIHRoZSBUYXJnZXRDaGFuZ2Ugc2luY2VcbiAqIGRvY3VtZW50cyBtYXkgYmUgcGFydCBvZiBtdWx0aXBsZSB0YXJnZXRzLlxuICovIGNsYXNzIHhuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlIHJlc3VtZWRcbiAgICAgKiBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXQgbWF0Y2hlcyB0aGVcbiAgICAgKiBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoXG4gICAgICogdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgXCJjdXJyZW50XCIgKHN5bmNlZCkgc3RhdHVzIG9mIHRoaXMgdGFyZ2V0LiBOb3RlIHRoYXQgXCJjdXJyZW50XCJcbiAgICAgKiBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2wgdGhhdCBpbXBsaWVzIHRoYXQgYSB0YXJnZXQgaXNcbiAgICAgKiBib3RoIHVwLXRvLWRhdGUgYW5kIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2ggc3RyZWFtLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBuZXdseSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mXG4gICAgICogdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIGFscmVhZHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYnV0IHJlY2VpdmVkXG4gICAgICogYW4gdXBkYXRlIGR1cmluZyB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2YgdGhpc1xuICAgICAqIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSB0LCB0aGlzLmN1cnJlbnQgPSBlLCB0aGlzLmFkZGVkRG9jdW1lbnRzID0gbiwgdGhpcy5tb2RpZmllZERvY3VtZW50cyA9IHMsIFxuICAgICAgICB0aGlzLnJlbW92ZWREb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFRhcmdldENoYW5nZXMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIGFwcGx5IGEgQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldyAoZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnRcbiAgICAgKiB0YWIpIG9yIGZvciBuZXcgcXVlcmllcyAodG8gcmFpc2Ugc25hcHNob3RzIHdpdGggY29ycmVjdCBDVVJSRU5UIHN0YXR1cykuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHhuKHB0LkVNUFRZX0JZVEVfU1RSSU5HLCBlLCBEbigpLCBEbigpLCBEbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxuICogYXBwbGllcy5cbiAqXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cbiAqLyBjbGFzcyAkbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuJCA9IHQsIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IGUsIHRoaXMua2V5ID0gbiwgdGhpcy5PID0gcztcbiAgICB9XG59XG5cbmNsYXNzIE9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLkYgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgRm4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIG4gPSBwdC5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKiBBbiBSUEMgZXJyb3IgaW5kaWNhdGluZyB3aHkgdGhlIHdhdGNoIGZhaWxlZC4gKi8gLCBzID0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdCwgdGhpcy50YXJnZXRJZHMgPSBlLCB0aGlzLnJlc3VtZVRva2VuID0gbiwgdGhpcy5jYXVzZSA9IHM7XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldC4gKi8gY2xhc3MgTW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5MID0gVW4oKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuQiA9IHB0LkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLlUgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IHN0YXRlIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgbmV4dCBzbmFwc2hvdC4gV2VcbiAgICAgICAgICogaW5pdGlhbGl6ZSB0byB0cnVlIHNvIHRoYXQgbmV3bHktYWRkZWQgdGFyZ2V0cyBhcmUgaW5jbHVkZWQgaW4gdGhlIG5leHRcbiAgICAgICAgICogUmVtb3RlRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnEgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxuICAgICAqXG4gICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxuICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcbiAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLlxuICAgICAqLyAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVTtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgcGVuZGluZyB0YXJnZXQgYWRkcyBvciB0YXJnZXQgcmVtb3Zlcy4gKi8gICAgZ2V0IEsoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLk07XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IGooKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgKi8gICAgVyh0KSB7XG4gICAgICAgIHQuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5xID0gITAsIHRoaXMuQiA9IHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXG4gICAgICovICAgIEcoKSB7XG4gICAgICAgIGxldCB0ID0gRG4oKSwgZSA9IERuKCksIG4gPSBEbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5MLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICB0ID0gdC5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIG4gPSBuLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIEIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBuZXcgeG4odGhpcy5CLCB0aGlzLlUsIHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGRvY3VtZW50IGNoYW5nZXMgYW5kIHNldHMgYGhhc1BlbmRpbmdDaGFuZ2VzYCB0byBmYWxzZS5cbiAgICAgKi8gICAgSCgpIHtcbiAgICAgICAgdGhpcy5xID0gITEsIHRoaXMuTCA9IFVuKCk7XG4gICAgfVxuICAgIEoodCwgZSkge1xuICAgICAgICB0aGlzLnEgPSAhMCwgdGhpcy5MID0gdGhpcy5MLmluc2VydCh0LCBlKTtcbiAgICB9XG4gICAgWSh0KSB7XG4gICAgICAgIHRoaXMucSA9ICEwLCB0aGlzLkwgPSB0aGlzLkwucmVtb3ZlKHQpO1xuICAgIH1cbiAgICBYKCkge1xuICAgICAgICB0aGlzLk0gKz0gMTtcbiAgICB9XG4gICAgWigpIHtcbiAgICAgICAgdGhpcy5NIC09IDE7XG4gICAgfVxuICAgIHR0KCkge1xuICAgICAgICB0aGlzLnEgPSAhMCwgdGhpcy5VID0gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXG4gKi9cbmNsYXNzIExuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZXQgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhbGwgdHJhY2tlZCB0YXJnZXRzLiAqL1xuICAgICAgICB0aGlzLm50ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnRzIHRvIHVwZGF0ZSBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuICovXG4gICAgICAgIHRoaXMuc3QgPSBSbigpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLml0ID0gQm4oKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcbiAgICAgICAgICoga25vd24gdG8gYmUgaW5jb25zaXN0ZW50IGFuZCB0aGVpciBsaXN0ZW5zIG5lZWRzIHRvIGJlIHJlLWVzdGFibGlzaGVkIGJ5XG4gICAgICAgICAqIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ydCA9IG5ldyBFbihydCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgRG9jdW1lbnRXYXRjaENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cbiAgICAgKi8gICAgb3QodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC4kKSB0Lk8gJiYgdC5PLmlzRm91bmREb2N1bWVudCgpID8gdGhpcy5hdChlLCB0Lk8pIDogdGhpcy5jdChlLCB0LmtleSwgdC5PKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQucmVtb3ZlZFRhcmdldElkcykgdGhpcy5jdChlLCB0LmtleSwgdC5PKTtcbiAgICB9XG4gICAgLyoqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgV2F0Y2hUYXJnZXRDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuICovICAgIHV0KHQpIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoVGFyZ2V0KHQsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmh0KGUpO1xuICAgICAgICAgICAgc3dpdGNoICh0LnN0YXRlKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBOb0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5sdChlKSAmJiBuLlcodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uWigpLCBuLksgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi5IKCksIG4uVyh0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDIgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uWigpLCBuLksgfHwgdGhpcy5yZW1vdmVUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzIC8qIEN1cnJlbnQgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSkgJiYgKG4udHQoKSwgbi5XKHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogUmVzZXQgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0YXJnZXQgYW5kIHN5bnRoZXNpemVzIHJlbW92ZXMgZm9yIGFsbCBleGlzdGluZ1xuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cy4gVGhlIGJhY2tlbmQgd2lsbCByZS1hZGQgYW55IGRvY3VtZW50cyB0aGF0IHN0aWxsXG4gICAgICAgICAgICAgICAgLy8gbWF0Y2ggdGhlIHRhcmdldCBiZWZvcmUgaXQgc2VuZHMgdGhlIG5leHQgZ2xvYmFsIHNuYXBzaG90LlxuICAgICAgICAgICAgICAgIHRoaXMuZnQoZSksIG4uVyh0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBCKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICB0LnRhcmdldElkcy5sZW5ndGggPiAwID8gdC50YXJnZXRJZHMuZm9yRWFjaChlKSA6IHRoaXMubnQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMubHQobikgJiYgZShuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgZHQodCkge1xuICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZCwgbiA9IHQuRi5jb3VudCwgcyA9IHRoaXMud3QoZSk7XG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoWnQodCkpIGlmICgwID09PSBuKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0ZW5jZSBmaWx0ZXIgdG9sZCB1cyB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QuIFdlIGRlZHVjZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhbmQgYXBwbHkgYSBkZWxldGVkIGRvY3VtZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gb3VyIHVwZGF0ZXMuIFdpdGhvdXQgYXBwbHlpbmcgdGhpcyBkZWxldGVkIGRvY3VtZW50IHRoZXJlIG1pZ2h0IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5vdGhlciBxdWVyeSB0aGF0IHdpbGwgcmFpc2UgdGhpcyBkb2N1bWVudCBhcyBwYXJ0IG9mIGEgc25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyByZXNvbHZlZCwgZXNzZW50aWFsbHkgZXhwb3NpbmcgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgLy8gcXVlcmllcy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IER0KHQucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdChlLCBuLCBHdC5uZXdOb0RvY3VtZW50KG4sIHV0Lm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgVSgxID09PSBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdChlKSAhPT0gbiAmJiAoXG4gICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaDogV2UgcmVzZXQgdGhlIG1hcHBpbmcgYW5kIHJhaXNlIGEgbmV3XG4gICAgICAgICAgICAgICAgLy8gc25hcHNob3Qgd2l0aCBgaXNGcm9tQ2FjaGU6dHJ1ZWAuXG4gICAgICAgICAgICAgICAgdGhpcy5mdChlKSwgdGhpcy5ydCA9IHRoaXMucnQuYWRkKGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudGx5IGFjY3VtdWxhdGVkIHN0YXRlIGludG8gYSByZW1vdGUgZXZlbnQgYXQgdGhlXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICovICAgIGd0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMubnQuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnd0KHMpO1xuICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICBpZiAobi5jdXJyZW50ICYmIFp0KGkudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb2N1bWVudCBxdWVyaWVzIGZvciBkb2N1bWVudCB0aGF0IGRvbid0IGV4aXN0IGNhbiBwcm9kdWNlIGFuIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgaWYgd2UgaGF2ZSBub3QgcHJldmlvdXNseSByZWNlaXZlZCB0aGUgZG9jdW1lbnQuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXQgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBEdChpLnRhcmdldC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdGhpcy5zdC5nZXQoZSkgfHwgdGhpcy55dChzLCBlKSB8fCB0aGlzLmN0KHMsIGUsIEd0Lm5ld05vRG9jdW1lbnQoZSwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLmogJiYgKGUuc2V0KHMsIG4uRygpKSwgbi5IKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gRG4oKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy5pdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgIGUuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy53dCh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWUgfHwgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gPT09IGUucHVycG9zZSB8fCAocyA9ICExLCAhMSk7XG4gICAgICAgICAgICB9KSksIHMgJiYgKG4gPSBuLmFkZCh0KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBrbih0LCBlLCB0aGlzLnJ0LCB0aGlzLnN0LCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3QgPSBSbigpLCB0aGlzLml0ID0gQm4oKSwgdGhpcy5ydCA9IG5ldyBFbihydCksIHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICogaXRzIGRvY3VtZW50IGtleSB0byB0aGUgZ2l2ZW4gdGFyZ2V0J3MgbWFwcGluZy5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGF0KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmx0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnl0KHQsIGUua2V5KSA/IDIgLyogTW9kaWZpZWQgKi8gOiAwIC8qIEFkZGVkICovO1xuICAgICAgICB0aGlzLmh0KHQpLkooZS5rZXksIG4pLCB0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQoZS5rZXksIGUpLCB0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQoZS5rZXksIHRoaXMuVHQoZS5rZXkpLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGN0KHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmx0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmh0KHQpO1xuICAgICAgICB0aGlzLnl0KHQsIGUpID8gcy5KKGUsIDEgLyogUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICBzLlkoZSksIHRoaXMuaXQgPSB0aGlzLml0Lmluc2VydChlLCB0aGlzLlR0KGUpLmRlbGV0ZSh0KSksIG4gJiYgKHRoaXMuc3QgPSB0aGlzLnN0Lmluc2VydChlLCBuKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMubnQuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgdGFyZ2V0LiBUaGlzIGluY2x1ZGVzIGJvdGhcbiAgICAgKiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHRhcmdldCBhcyB3ZWxsIGFzIGFueSBhY2N1bXVsYXRlZCBjaGFuZ2VzLlxuICAgICAqLyAgICBfdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmh0KHQpLkcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplICsgZS5hZGRlZERvY3VtZW50cy5zaXplIC0gZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBYKHQpIHtcbiAgICAgICAgdGhpcy5odCh0KS5YKCk7XG4gICAgfVxuICAgIGh0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm50LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgTW4sIHRoaXMubnQuc2V0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgVHQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuaXQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBFbihydCksIHRoaXMuaXQgPSB0aGlzLml0Lmluc2VydCh0LCBlKSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIHVzZXIgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldCAoYnkgY2FsbGluZ1xuICAgICAqIGBnZXRUYXJnZXREYXRhRm9yVGFyZ2V0KClgKSBhbmQgdGhhdCB3ZSBhcmUgbm90IHdhaXRpbmcgZm9yIHBlbmRpbmcgQUREc1xuICAgICAqIGZyb20gd2F0Y2guXG4gICAgICovICAgIGx0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG51bGwgIT09IHRoaXMud3QodCk7XG4gICAgICAgIHJldHVybiBlIHx8IE8oXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgdCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgZm9yIGFuIGFjdGl2ZSB0YXJnZXQgKGkuZS4gYSB0YXJnZXQgdGhhdCB0aGUgdXNlclxuICAgICAqIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhhdCBoYXMgbm8gb3V0c3RhbmRpbmcgdGFyZ2V0IGNoYW5nZSByZXF1ZXN0cykuXG4gICAgICovICAgIHd0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubnQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSAmJiBlLksgPyBudWxsIDogdGhpcy5ldC5FdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBmdCh0KSB7XG4gICAgICAgIHRoaXMubnQuc2V0KHQsIG5ldyBNbik7XG4gICAgICAgIHRoaXMuZXQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3QodCwgZSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICB5dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuaGFzKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQm4oKSB7XG4gICAgcmV0dXJuIG5ldyB5bihEdC5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gVW4oKSB7XG4gICAgcmV0dXJuIG5ldyB5bihEdC5jb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgcW4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgS24gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBnZW5lcmF0ZXMgSnNvbk9iamVjdCB2YWx1ZXMgZm9yIHRoZSBEYXRhc3RvcmUgQVBJIHN1aXRhYmxlIGZvclxuICogc2VuZGluZyB0byBlaXRoZXIgR1JQQyBzdHViIG1ldGhvZHMgb3IgdmlhIHRoZSBKU09OL0hUVFAgUkVTVCBBUEkuXG4gKlxuICogVGhlIHNlcmlhbGl6ZXIgc3VwcG9ydHMgYm90aCBQcm90b2J1Zi5qcyBhbmQgUHJvdG8zIEpTT04gZm9ybWF0cy4gQnlcbiAqIHNldHRpbmcgYHVzZVByb3RvM0pzb25gIHRvIHRydWUsIHRoZSBzZXJpYWxpemVyIHdpbGwgdXNlIHRoZSBQcm90bzMgSlNPTlxuICogZm9ybWF0LlxuICpcbiAqIEZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBQcm90bzMgSlNPTiBmb3JtYXQgY2hlY2tcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3Byb3RvY29sLWJ1ZmZlcnMvZG9jcy9wcm90bzMjanNvblxuICpcbiAqIFRPRE8oa2xpbXQpOiBXZSBjYW4gcmVtb3ZlIHRoZSBkYXRhYmFzZUlkIGFyZ3VtZW50IGlmIHdlIGtlZXAgdGhlIGZ1bGxcbiAqIHJlc291cmNlIG5hbWUgaW4gZG9jdW1lbnRzLlxuICovXG5jbGFzcyBqbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLkMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gUW4odCwgZSkge1xuICAgIGlmICh0LkMpIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIGUuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyBlLm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBXbih0LCBlKSB7XG4gICAgcmV0dXJuIHQuQyA/IGUudG9CYXNlNjQoKSA6IGUudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBHbih0LCBlKSB7XG4gICAgcmV0dXJuIFFuKHQsIGUudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIHpuKHQpIHtcbiAgICByZXR1cm4gVSghIXQpLCB1dC5mcm9tVGltZXN0YW1wKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEV0KHQpO1xuICAgICAgICByZXR1cm4gbmV3IGN0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfSh0KSk7XG59XG5cbmZ1bmN0aW9uIEhuKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IHd0KFsgXCJwcm9qZWN0c1wiLCB0LnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZSBdKTtcbiAgICB9KHQpLmNoaWxkKFwiZG9jdW1lbnRzXCIpLmNoaWxkKGUpLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBKbih0KSB7XG4gICAgY29uc3QgZSA9IHd0LmZyb21TdHJpbmcodCk7XG4gICAgcmV0dXJuIFUoUnMoZSkpLCBlO1xufVxuXG5mdW5jdGlvbiBZbih0LCBlKSB7XG4gICAgcmV0dXJuIEhuKHQuZGF0YWJhc2VJZCwgZS5wYXRoKTtcbn1cblxuZnVuY3Rpb24gWG4odCwgZSkge1xuICAgIGNvbnN0IG4gPSBKbihlKTtcbiAgICBpZiAobi5nZXQoMSkgIT09IHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyBEdChucyhuKSk7XG59XG5cbmZ1bmN0aW9uIFpuKHQsIGUpIHtcbiAgICByZXR1cm4gSG4odC5kYXRhYmFzZUlkLCBlKTtcbn1cblxuZnVuY3Rpb24gdHModCkge1xuICAgIGNvbnN0IGUgPSBKbih0KTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IGUubGVuZ3RoID8gd3QuZW1wdHlQYXRoKCkgOiBucyhlKTtcbn1cblxuZnVuY3Rpb24gZXModCkge1xuICAgIHJldHVybiBuZXcgd3QoWyBcInByb2plY3RzXCIsIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSBdKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gbnModCkge1xuICAgIHJldHVybiBVKHQubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSB0LmdldCg0KSksIHQucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gc3ModCwgZSwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IFluKHQsIGUpLFxuICAgICAgICBmaWVsZHM6IG4udmFsdWUubWFwVmFsdWUuZmllbGRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaXModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBYbih0LCBlLm5hbWUpLCBpID0gem4oZS51cGRhdGVUaW1lKSwgciA9IG5ldyBRdCh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgbyA9IEd0Lm5ld0ZvdW5kRG9jdW1lbnQocywgaSwgcik7XG4gICAgcmV0dXJuIG4gJiYgby5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSwgbiA/IG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkgOiBvO1xufVxuXG5mdW5jdGlvbiBycyh0LCBlKSB7XG4gICAgcmV0dXJuIFwiZm91bmRcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBVKCEhZS5mb3VuZCksIGUuZm91bmQubmFtZSwgZS5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gWG4odCwgZS5mb3VuZC5uYW1lKSwgcyA9IHpuKGUuZm91bmQudXBkYXRlVGltZSksIGkgPSBuZXcgUXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gR3QubmV3Rm91bmREb2N1bWVudChuLCBzLCBpKTtcbiAgICB9KHQsIGUpIDogXCJtaXNzaW5nXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgVSghIWUubWlzc2luZyksIFUoISFlLnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IFhuKHQsIGUubWlzc2luZyksIHMgPSB6bihlLnJlYWRUaW1lKTtcbiAgICAgICAgcmV0dXJuIEd0Lm5ld05vRG9jdW1lbnQobiwgcyk7XG4gICAgfSh0LCBlKSA6IEIoKTtcbn1cblxuZnVuY3Rpb24gb3ModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChcInRhcmdldENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xuICAgICAgICAvLyBpZiB1bnNldFxuICAgICAgICBjb25zdCBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9fQ0hBTkdFXCIgPT09IHQgPyAwIC8qIE5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gdCA/IDEgLyogQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSB0ID8gMiAvKiBSZW1vdmVkICovIDogXCJDVVJSRU5UXCIgPT09IHQgPyAzIC8qIEN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IHQgPyA0IC8qIFJlc2V0ICovIDogQigpO1xuICAgICAgICB9KGUudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSBlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5DID8gKFUodm9pZCAwID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBwdC5mcm9tQmFzZTY0U3RyaW5nKGUgfHwgXCJcIikpIDogKFUodm9pZCAwID09PSBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICBwdC5mcm9tVWludDhBcnJheShlIHx8IG5ldyBVaW50OEFycmF5KSk7XG4gICAgICAgIH0odCwgZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pLCBvID0gZS50YXJnZXRDaGFuZ2UuY2F1c2UsIGEgPSBvICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgPT09IHQuY29kZSA/IGouVU5LTk9XTiA6IGduKHQuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFEoZSwgdC5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovIChvKTtcbiAgICAgICAgbiA9IG5ldyBGbihzLCBpLCByLCBhIHx8IG51bGwpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIHMuZG9jdW1lbnQsIHMuZG9jdW1lbnQubmFtZSwgcy5kb2N1bWVudC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBpID0gWG4odCwgcy5kb2N1bWVudC5uYW1lKSwgciA9IHpuKHMuZG9jdW1lbnQudXBkYXRlVGltZSksIG8gPSBuZXcgUXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHMuZG9jdW1lbnQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBhID0gR3QubmV3Rm91bmREb2N1bWVudChpLCByLCBvKSwgYyA9IHMudGFyZ2V0SWRzIHx8IFtdLCB1ID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3ICRuKGMsIHUsIGEua2V5LCBhKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnREZWxldGVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gWG4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlYWRUaW1lID8gem4ocy5yZWFkVGltZSkgOiB1dC5taW4oKSwgbyA9IEd0Lm5ld05vRG9jdW1lbnQoaSwgciksIGEgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgJG4oW10sIGEsIG8ua2V5LCBvKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRSZW1vdmVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gWG4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgJG4oW10sIHIsIGksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiZmlsdGVyXCIgaW4gZSkpIHJldHVybiBCKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGUuZmlsdGVyO1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVyO1xuICAgICAgICAgICAgdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmNvdW50IHx8IDAsIGkgPSBuZXcgZG4ocyksIHIgPSB0LnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBPbihyLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gYXModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlIGluc3RhbmNlb2Ygb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogc3ModCwgZS5rZXksIGUudmFsdWUpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIGxuKSBuID0ge1xuICAgICAgICBkZWxldGU6IFluKHQsIGUua2V5KVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBhbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBzcyh0LCBlLmtleSwgZS5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogQXMoZS5maWVsZE1hc2spXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBmbikpIHJldHVybiBCKCk7XG4gICAgICAgIG4gPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IFluKHQsIGUua2V5KVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZS5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID4gMCAmJiAobi51cGRhdGVUcmFuc2Zvcm1zID0gZS5maWVsZFRyYW5zZm9ybXMubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudHJhbnNmb3JtO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIEJlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIFVlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgS2UpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICByZW1vdmVBbGxGcm9tQXJyYXk6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBRZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGluY3JlbWVudDogbi5OXG4gICAgICAgIH07XG4gICAgICAgIHRocm93IEIoKTtcbiAgICB9KDAsIHQpKSkpLCBlLnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBHbih0LCBlLnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IGUuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiBlLmV4aXN0c1xuICAgICAgICB9IDogQigpO1xuICAgIH0odCwgZS5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gY3ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmN1cnJlbnREb2N1bWVudCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gWWUudXBkYXRlVGltZSh6bih0LnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyBZZS5leGlzdHModC5leGlzdHMpIDogWWUubm9uZSgpO1xuICAgIH0oZS5jdXJyZW50RG9jdW1lbnQpIDogWWUubm9uZSgpLCBzID0gZS51cGRhdGVUcmFuc2Zvcm1zID8gZS51cGRhdGVUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIGUpIFUoXCJSRVFVRVNUX1RJTUVcIiA9PT0gZS5zZXRUb1NlcnZlclZhbHVlKSwgbiA9IG5ldyBCZTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBVZSh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IEtlKHQpO1xuICAgICAgICB9IGVsc2UgXCJpbmNyZW1lbnRcIiBpbiBlID8gbiA9IG5ldyBRZSh0LCBlLmluY3JlbWVudCkgOiBCKCk7XG4gICAgICAgIGNvbnN0IHMgPSBtdC5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyB6ZShzLCBuKTtcbiAgICB9KHQsIGUpKSkgOiBbXTtcbiAgICBpZiAoZS51cGRhdGUpIHtcbiAgICAgICAgZS51cGRhdGUubmFtZTtcbiAgICAgICAgY29uc3QgaSA9IFhuKHQsIGUudXBkYXRlLm5hbWUpLCByID0gbmV3IFF0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLnVwZGF0ZS5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlLnVwZGF0ZU1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZmllbGRQYXRocyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGd0KGUubWFwKCh0ID0+IG10LmZyb21TZXJ2ZXJGb3JtYXQodCkpKSk7XG4gICAgICAgICAgICB9KGUudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGFuKGksIHIsIHQsIG4sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgb24oaSwgciwgbiwgcyk7XG4gICAgfVxuICAgIGlmIChlLmRlbGV0ZSkge1xuICAgICAgICBjb25zdCBzID0gWG4odCwgZS5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IGxuKHMsIG4pO1xuICAgIH1cbiAgICBpZiAoZS52ZXJpZnkpIHtcbiAgICAgICAgY29uc3QgcyA9IFhuKHQsIGUudmVyaWZ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBmbihzLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEIoKTtcbn1cblxuZnVuY3Rpb24gdXModCwgZSkge1xuICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID4gMCA/IChVKHZvaWQgMCAhPT0gZSksIHQubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gdC51cGRhdGVUaW1lID8gem4odC51cGRhdGVUaW1lKSA6IHpuKGUpO1xuICAgICAgICByZXR1cm4gbi5pc0VxdWFsKHV0Lm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gem4oZSkpLCBuZXcgSmUobiwgdC50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KHQsIGUpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIGhzKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb2N1bWVudHM6IFsgWm4odCwgZS5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbHModCwgZSkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHMgPSBlLnBhdGg7XG4gICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBabih0LCBzKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gWm4odCwgcy5wb3BMYXN0KCkpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogcy5sYXN0U2VnbWVudCgpXG4gICAgfSBdKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmIChcIj09XCIgLyogRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAocXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogcHModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoVXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogcHModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAocXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogcHModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKFV0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHBzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHBzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogeXModC5vcCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBlWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IFwiQU5EXCIsXG4gICAgICAgICAgICAgICAgZmlsdGVyczogZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0oZS5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZDogcHModC5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBncyh0LmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICB9KGUub3JkZXJCeSk7XG4gICAgciAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHIpO1xuICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LkMgfHwgdnQoZSkgPyBlIDoge1xuICAgICAgICAgICAgdmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi8gKHQsIGUubGltaXQpO1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCBlLnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSBfcyhlLnN0YXJ0QXQpKSwgXG4gICAgZS5lbmRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSBfcyhlLmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICBsZXQgZSA9IHRzKHQucGFyZW50KTtcbiAgICBjb25zdCBuID0gdC5zdHJ1Y3R1cmVkUXVlcnksIHMgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHMgPiAwKSB7XG4gICAgICAgIFUoMSA9PT0gcyk7XG4gICAgICAgIGNvbnN0IHQgPSBuLmZyb21bMF07XG4gICAgICAgIHQuYWxsRGVzY2VuZGFudHMgPyBpID0gdC5jb2xsZWN0aW9uSWQgOiBlID0gZS5jaGlsZCh0LmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCByID0gW107XG4gICAgbi53aGVyZSAmJiAociA9IHdzKG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IG4ub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGZlKFRzKHQuZmllbGQpLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgKHQuZGlyZWN0aW9uKSk7XG4gICAgfSh0KSkpKTtcbiAgICBsZXQgYSA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAoYSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHJldHVybiBlID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiB0LCB2dChlKSA/IG51bGwgOiBlO1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBjID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGMgPSBtcyhuLnN0YXJ0QXQpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKHUgPSBtcyhuLmVuZEF0KSksIGdlKGUsIGksIG8sIHIsIGEsIFwiRlwiIC8qIEZpcnN0ICovICwgYywgdSk7XG59XG5cbmZ1bmN0aW9uIGRzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gQigpO1xuICAgICAgICB9XG4gICAgfSgwLCBlLnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHdzKHQpIHtcbiAgICByZXR1cm4gdCA/IHZvaWQgMCAhPT0gdC51bmFyeUZpbHRlciA/IFsgSXModCkgXSA6IHZvaWQgMCAhPT0gdC5maWVsZEZpbHRlciA/IFsgRXModCkgXSA6IHZvaWQgMCAhPT0gdC5jb21wb3NpdGVGaWx0ZXIgPyB0LmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgodCA9PiB3cyh0KSkpLnJlZHVjZSgoKHQsIGUpID0+IHQuY29uY2F0KGUpKSkgOiBCKCkgOiBbXTtcbn1cblxuZnVuY3Rpb24gX3ModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGJlZm9yZTogdC5iZWZvcmUsXG4gICAgICAgIHZhbHVlczogdC5wb3NpdGlvblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIG1zKHQpIHtcbiAgICBjb25zdCBlID0gISF0LmJlZm9yZSwgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgIHJldHVybiBuZXcgaGUobiwgZSk7XG59XG5cbi8vIHZpc2libGUgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIGdzKHQpIHtcbiAgICByZXR1cm4gcW5bdF07XG59XG5cbmZ1bmN0aW9uIHlzKHQpIHtcbiAgICByZXR1cm4gS25bdF07XG59XG5cbmZ1bmN0aW9uIHBzKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IHQuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBUcyh0KSB7XG4gICAgcmV0dXJuIG10LmZyb21TZXJ2ZXJGb3JtYXQodC5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBFcyh0KSB7XG4gICAgcmV0dXJuIHRlLmNyZWF0ZShUcyh0LmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE5PVF9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxcIiAvKiBMRVNTX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgIGNhc2UgXCJJTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU19BTllcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gQigpO1xuICAgICAgICB9XG4gICAgfSh0LmZpZWxkRmlsdGVyLm9wKSwgdC5maWVsZEZpbHRlci52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIElzKHQpIHtcbiAgICBzd2l0Y2ggKHQudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgIGNhc2UgXCJJU19OQU5cIjpcbiAgICAgICAgY29uc3QgZSA9IFRzKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gdGUuY3JlYXRlKGUsIFwiPT1cIiAvKiBFUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgIGNvbnN0IG4gPSBUcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIHRlLmNyZWF0ZShuLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05BTlwiOlxuICAgICAgICBjb25zdCBzID0gVHModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiB0ZS5jcmVhdGUocywgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OT1RfTlVMTFwiOlxuICAgICAgICBjb25zdCBpID0gVHModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiB0ZS5jcmVhdGUoaSwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBCKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBcyh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiB0LmZpZWxkcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0LmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBScyh0KSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiB0Lmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gdC5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gdC5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cbiAqL1xuZnVuY3Rpb24gYnModCkge1xuICAgIGxldCBlID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGUubGVuZ3RoID4gMCAmJiAoZSA9IHZzKGUpKSwgZSA9IFBzKHQuZ2V0KG4pLCBlKTtcbiAgICByZXR1cm4gdnMoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBQcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBlO1xuICAgIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHM7IGUrKykge1xuICAgICAgICBjb25zdCBzID0gdC5jaGFyQXQoZSk7XG4gICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgIGNhc2UgXCJcXDBcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMVwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiArPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiB2cyh0KSB7XG4gICAgcmV0dXJuIHQgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gVnModCkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKFUoZSA+PSAyKSwgMiA9PT0gZSkgcmV0dXJuIFUoXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMCkgJiYgXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMSkpLCB3dC5lbXB0eVBhdGgoKTtcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gc291cmNlIHZhbHVlLlxuICAgICAgICBjb25zdCBuID0gZSAtIDIsIHMgPSBbXTtcbiAgICBsZXQgaSA9IFwiXCI7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBlOyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCBlID0gdC5pbmRleE9mKFwiXHUwMDAxXCIsIHIpO1xuICAgICAgICAoZSA8IDAgfHwgZSA+IG4pICYmIEIoKTtcbiAgICAgICAgc3dpdGNoICh0LmNoYXJBdChlICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zdWJzdHJpbmcociwgZSk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IGkubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSBuIDogKGkgKz0gbiwgbyA9IGksIGkgPSBcIlwiKSwgcy5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUpLCBpICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIGkgKz0gdC5zdWJzdHJpbmcociwgZSArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgQigpO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBlICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyB3dChzKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICovXG4vKipcbiAqIFdyYXBwZXIgY2xhc3MgdG8gc3RvcmUgdGltZXN0YW1wcyAoc2Vjb25kcyBhbmQgbmFub3MpIGluIEluZGV4ZWREYiBvYmplY3RzLlxuICovXG5jbGFzcyBTcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzaW5nbGV0b24gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ293bmVyJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogQSBnaXZlbiBkYXRhYmFzZSBjYW4gaGF2ZSBhIHNpbmdsZSBwcmltYXJ5IHRhYiBhc3NpZ25lZCBhdCBhIGdpdmVuIHRpbWUuIFRoYXRcbiAqIHRhYiBtdXN0IHZhbGlkYXRlIHRoYXQgaXQgaXMgc3RpbGwgaG9sZGluZyB0aGUgcHJpbWFyeSBsZWFzZSBiZWZvcmUgZXZlcnlcbiAqIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIGxvY2tlZCBhY2Nlc3MuIFRoZSBwcmltYXJ5IHRhYiBzaG91bGQgcmVndWxhcmx5XG4gKiB3cml0ZSBhbiB1cGRhdGVkIHRpbWVzdGFtcCB0byB0aGlzIGxlYXNlIHRvIHByZXZlbnQgb3RoZXIgdGFicyBmcm9tXG4gKiBcInN0ZWFsaW5nXCIgdGhlIHByaW1hcnkgbGVhc2VcbiAqLyBjbGFzcyBEcyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIFdoZXRoZXIgdG8gYWxsb3cgc2hhcmVkIGFjY2VzcyBmcm9tIG11bHRpcGxlIHRhYnMuICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLm93bmVySWQgPSB0LCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZSwgdGhpcy5sZWFzZVRpbWVzdGFtcE1zID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovIERzLnN0b3JlID0gXCJvd25lclwiLCBcbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlByaW1hcnlDbGllbnQgc3RvcmUuXG4gKi9cbkRzLmtleSA9IFwib3duZXJcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25RdWV1ZXMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBFYWNoIHVzZXIgZ2V0cyBhIHNpbmdsZSBxdWV1ZSBvZiBNdXRhdGlvbkJhdGNoZXMgdG8gYXBwbHkgdG8gdGhlIHNlcnZlci5cbiAqIERiTXV0YXRpb25RdWV1ZSB0cmFja3MgdGhlIG1ldGFkYXRhIGFib3V0IHRoZSBxdWV1ZS5cbiAqL1xuY2xhc3MgQ3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBxdWV1ZSBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBoaWdoZXN0IG51bWJlcmVkIGJhdGNoIHRoYXQgaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gICAgICogYnkgdGhlIHNlcnZlci4gQWxsIE11dGF0aW9uQmF0Y2hlcyBpbiB0aGlzIHF1ZXVlIHdpdGggYmF0Y2hJZHMgbGVzc1xuICAgICAqIHRoYW4gb3IgZXF1YWwgdG8gdGhpcyB2YWx1ZSBhcmUgY29uc2lkZXJlZCB0byBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIGJ5XG4gICAgICogdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIE5PVEU6IHRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGNvZGUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzdHJlYW0gdG9rZW4gdGhhdCB3YXMgcHJldmlvdXNseSBzZW50IGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBTZWUgU3RyZWFtaW5nV3JpdGVSZXF1ZXN0IGluIGRhdGFzdG9yZS5wcm90byBmb3IgbW9yZSBkZXRhaWxzIGFib3V0XG4gICAgICogdXNhZ2UuXG4gICAgICpcbiAgICAgKiBBZnRlciBzZW5kaW5nIHRoaXMgdG9rZW4sIGVhcmxpZXIgdG9rZW5zIG1heSBub3QgYmUgdXNlZCBhbnltb3JlIHNvXG4gICAgICogb25seSBhIHNpbmdsZSBzdHJlYW0gdG9rZW4gaXMgcmV0YWluZWQuXG4gICAgICpcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkID0gZSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyBDcy5zdG9yZSA9IFwibXV0YXRpb25RdWV1ZXNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCBwcm9wZXJ0eS4gKi9cbkNzLmtleVBhdGggPSBcInVzZXJJZFwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBSZXByZXNlbnRzIGEgYmF0Y2ggb2YgdXNlci1sZXZlbCBtdXRhdGlvbnMgaW50ZW5kZWQgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gKiBpbiBhIHNpbmdsZSB3cml0ZS4gRWFjaCB1c2VyLWxldmVsIGJhdGNoIGdldHMgYSBzZXBhcmF0ZSBEYk11dGF0aW9uQmF0Y2hcbiAqIHdpdGggYSBuZXcgYmF0Y2hJZC5cbiAqL1xuY2xhc3MgTnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBiYXRjaCBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoaXMgYmF0Y2gsIGFsbG9jYXRlZCB1c2luZyBhbiBhdXRvLWdlbmVyYXRlZCBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlIGJhdGNoLCBzdG9yZWQgYXMgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZVxuICAgICAqIGVwb2NoLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBcIm11dGF0aW9uc1wiIHRoYXQgcmVwcmVzZW50IGEgcGFydGlhbCBiYXNlIHN0YXRlIGZyb20gd2hlbiB0aGlzXG4gICAgICogd3JpdGUgYmF0Y2ggd2FzIGluaXRpYWxseSBjcmVhdGVkLiBEdXJpbmcgbG9jYWwgYXBwbGljYXRpb24gb2YgdGhlIHdyaXRlXG4gICAgICogYmF0Y2gsIHRoZXNlIGJhc2VNdXRhdGlvbnMgYXJlIGFwcGxpZWQgcHJpb3IgdG8gdGhlIHJlYWwgd3JpdGVzIGluIG9yZGVyXG4gICAgICogdG8gb3ZlcnJpZGUgY2VydGFpbiBkb2N1bWVudCBmaWVsZHMgZnJvbSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBUaGlzXG4gICAgICogaXMgbmVjZXNzYXJ5IGluIHRoZSBjYXNlIG9mIG5vbi1pZGVtcG90ZW50IHdyaXRlcyAoZS5nLiBgaW5jcmVtZW50KClgXG4gICAgICogdHJhbnNmb3JtcykgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIG1vZGlmaWVkIGRvY3VtZW50c1xuICAgICAqIGRvZXNuJ3QgZmxpY2tlciBpZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHJlY2VpdmVzIHRoZSByZXN1bHQgb2YgdGhlXG4gICAgICogbm9uLWlkZW1wb3RlbnQgd3JpdGUgYmVmb3JlIHRoZSB3cml0ZSBpcyByZW1vdmVkIGZyb20gdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogVGhlc2UgbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBtdXRhdGlvbnMgdG8gYXBwbHkuIEFsbCBtdXRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIGF0b21pY2FsbHkuXG4gICAgICpcbiAgICAgKiBNdXRhdGlvbnMgYXJlIHNlcmlhbGl6ZWQgdmlhIHRvTXV0YXRpb24oKS5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5sb2NhbFdyaXRlVGltZU1zID0gbiwgdGhpcy5iYXNlTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gaTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gTnMuc3RvcmUgPSBcIm11dGF0aW9uc1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkLCBiYXRjaElkIHByb3BlcnRpZXMuICovXG5Ocy5rZXlQYXRoID0gXCJiYXRjaElkXCIsIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciBsb29rdXAgb2YgbXV0YXRpb25zIGJ5IHVzZXIuICovXG5Ocy51c2VyTXV0YXRpb25zSW5kZXggPSBcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBcbi8qKiBUaGUgdXNlciBtdXRhdGlvbnMgaW5kZXggaXMga2V5ZWQgYnkgW3VzZXJJZCwgYmF0Y2hJZF0gcGFpcnMuICovXG5Ocy51c2VyTXV0YXRpb25zS2V5UGF0aCA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnZG9jdW1lbnRNdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBBIG1hbnVhbGx5IG1haW50YWluZWQgaW5kZXggb2YgYWxsIHRoZSBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgYWZmZWN0IGEgZ2l2ZW5cbiAqIGRvY3VtZW50IGtleS4gVGhlIHJvd3MgaW4gdGhpcyB0YWJsZSBhcmUgcmVmZXJlbmNlcyBiYXNlZCBvbiB0aGUgY29udGVudHMgb2ZcbiAqIERiTXV0YXRpb25CYXRjaC5tdXRhdGlvbnMuXG4gKi9cbmNsYXNzIGtzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcbiAgICAgKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBwcmVmaXhGb3JVc2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIFsgdCBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gICAgICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAgICAgKi8gICAgc3RhdGljIHByZWZpeEZvclBhdGgodCwgZSkge1xuICAgICAgICByZXR1cm4gWyB0LCBicyhlKSBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAgICAgKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAgICAgKi8gICAgc3RhdGljIGtleSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBbIHQsIGJzKGUpLCBuIF07XG4gICAgfVxufVxuXG5rcy5zdG9yZSA9IFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi9cbmtzLlBMQUNFSE9MREVSID0gbmV3IGtzO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGtub3duIGFic2VuY2Ugb2YgYSBkb2N1bWVudCBhdCBhIHBhcnRpY3VsYXIgdmVyc2lvbi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovXG5jbGFzcyB4cyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLnJlYWRUaW1lID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYnV0IHdob3NlIGRhdGEgaXMgdW5rbm93bi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovIGNsYXNzICRzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMudmVyc2lvbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdyZW1vdGVEb2N1bWVudHMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyOlxuICpcbiAqIC0gQSBjb21wbGV0ZSBkb2N1bWVudC5cbiAqIC0gQSBcIm5vIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biBub3QgdG8gZXhpc3QgKGF0XG4gKiBzb21lIHZlcnNpb24pLlxuICogLSBBbiBcInVua25vd24gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IChhdFxuICogc29tZSB2ZXJzaW9uKSBidXQgd2hvc2UgY29udGVudHMgYXJlIHVua25vd24uXG4gKlxuICogTm90ZTogVGhpcyBpcyB0aGUgcGVyc2lzdGVkIGVxdWl2YWxlbnQgb2YgYSBNYXliZURvY3VtZW50IGFuZCBjb3VsZCBwZXJoYXBzXG4gKiBiZSBtYWRlIG1vcmUgZ2VuZXJhbCBpZiBuZWNlc3NhcnkuXG4gKi8gY2xhc3MgT3Mge1xuICAgIC8vIFRPRE86IFdlIGFyZSBjdXJyZW50bHkgc3RvcmluZyBmdWxsIGRvY3VtZW50IGtleXMgYWxtb3N0IHRocmVlIHRpbWVzXG4gICAgLy8gKG9uY2UgYXMgcGFydCBvZiB0aGUgcHJpbWFyeSBrZXksIG9uY2UgLSBwYXJ0bHkgLSBhcyBgcGFyZW50UGF0aGAgYW5kIG9uY2VcbiAgICAvLyBpbnNpZGUgdGhlIGVuY29kZWQgZG9jdW1lbnRzKS4gRHVyaW5nIG91ciBuZXh0IG1pZ3JhdGlvbiwgd2Ugc2hvdWxkXG4gICAgLy8gcmV3cml0ZSB0aGUgcHJpbWFyeSBrZXkgYXMgcGFyZW50UGF0aCArIGRvY3VtZW50IElEIHdoaWNoIHdvdWxkIGFsbG93IHVzXG4gICAgLy8gdG8gZHJvcCBvbmUgdmFsdWUuXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIERiVW5rbm93bkRvY3VtZW50IGlmIHRoZSBkYXRhIGZvciBhIGRvY3VtZW50IGlzXG4gICAgICogbm90IGtub3duLCBidXQgaXQgaXMga25vd24gdGhhdCBhIGRvY3VtZW50IGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkXG4gICAgICogdmVyc2lvbiAoZS5nLiBpdCBoYWQgYSBzdWNjZXNzZnVsIHVwZGF0ZSBhcHBsaWVkIHRvIGl0KVxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERiTm9Eb2N1bWVudCBpZiBpdCBpcyBrbm93biB0aGF0IG5vIGRvY3VtZW50XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERvY3VtZW50IGlmIHRoZXJlJ3MgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGVcbiAgICAgKiBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBEb2N1bWVudHMgdGhhdCB3ZXJlIHdyaXR0ZW4gdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBzdG9yZSBiYXNlZCBvblxuICAgICAqIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgYXJlIG1hcmtlZCB3aXRoIGBoYXNDb21taXR0ZWRNdXRhdGlvbnNgLiBUaGVzZVxuICAgICAqIGRvY3VtZW50cyBhcmUgcG90ZW50aWFsbHkgaW5jb25zaXN0ZW50IHdpdGggdGhlIGJhY2tlbmQncyBjb3B5IGFuZCB1c2VcbiAgICAgKiB0aGUgd3JpdGUncyBjb21taXQgdmVyc2lvbiBhcyB0aGVpciBkb2N1bWVudCB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGRvY3VtZW50IHdhcyByZWFkIGZyb20gdGhlIGJhY2tlbmQuIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuXG4gICAgICogcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCBvZiB0aGUgY29sbGVjdGlvbiB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuIFVuZGVmaW5lZCBmb3IgZGF0YVxuICAgICAqIHdyaXR0ZW4gcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMudW5rbm93bkRvY3VtZW50ID0gdCwgdGhpcy5ub0RvY3VtZW50ID0gZSwgdGhpcy5kb2N1bWVudCA9IG4sIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSBpLCB0aGlzLnBhcmVudFBhdGggPSByO1xuICAgIH1cbn1cblxuT3Muc3RvcmUgPSBcInJlbW90ZURvY3VtZW50c1wiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gYWxsIGVudHJpZXMgc29ydGVkIGJ5IHJlYWQgdGltZSAod2hpY2hcbiAqIGNvcnJlc3BvbmRzIHRvIHRoZSBsYXN0IG1vZGlmaWNhdGlvbiB0aW1lIG9mIGVhY2ggcm93KS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gcHJvdmlkZSBhIGNoYW5nZWxvZyBmb3IgTXVsdGktVGFiLlxuICovXG5Pcy5yZWFkVGltZUluZGV4ID0gXCJyZWFkVGltZUluZGV4XCIsIE9zLnJlYWRUaW1lSW5kZXhQYXRoID0gXCJyZWFkVGltZVwiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbiBzb3J0ZWQgYnkgcmVhZFxuICogdGltZS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gYWxsb3cgdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgdG8gZmV0Y2ggbmV3bHkgY2hhbmdlZFxuICogZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbi5cbiAqL1xuT3MuY29sbGVjdGlvblJlYWRUaW1lSW5kZXggPSBcImNvbGxlY3Rpb25SZWFkVGltZUluZGV4XCIsIE9zLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCA9IFsgXCJwYXJlbnRQYXRoXCIsIFwicmVhZFRpbWVcIiBdO1xuXG4vKipcbiAqIENvbnRhaW5zIGEgc2luZ2xlIGVudHJ5IHRoYXQgaGFzIG1ldGFkYXRhIGFib3V0IHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gKi9cbmNsYXNzIEZzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYnl0ZVNpemUgLSBBcHByb3hpbWF0ZWx5IHRoZSB0b3RhbCBzaXplIGluIGJ5dGVzIG9mIGFsbCB0aGVcbiAgICAgKiBkb2N1bWVudHMgaW4gdGhlIGRvY3VtZW50IGNhY2hlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ieXRlU2l6ZSA9IHQ7XG4gICAgfVxufVxuXG5Gcy5zdG9yZSA9IFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiwgRnMua2V5ID0gXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICd0YXJnZXRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogVGhpcyBpcyBiYXNlZCBvbiBhbmQgc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1NcbiAqIGNsaWVudC5cbiAqXG4gKiBFYWNoIHF1ZXJ5IHRoZSBjbGllbnQgbGlzdGVucyB0byBhZ2FpbnN0IHRoZSBzZXJ2ZXIgaXMgdHJhY2tlZCBvbiBkaXNrIHNvXG4gKiB0aGF0IHRoZSBxdWVyeSBjYW4gYmUgZWZmaWNpZW50bHkgcmVzdW1lZCBvbiByZXN0YXJ0LlxuICovXG5jbGFzcyBNcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gYXV0by1nZW5lcmF0ZWQgc2VxdWVudGlhbCBudW1lcmljIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIFF1ZXJpZXMgYXJlIHN0b3JlZCB1c2luZyB0aGVpciBjYW5vbmljYWxJZCBhcyB0aGUga2V5LCBidXQgdGhlc2VcbiAgICAgKiBjYW5vbmljYWxJZHMgY2FuIGJlIHF1aXRlIGxvbmcgc28gd2UgYWRkaXRpb25hbGx5IGFzc2lnbiBhIHVuaXF1ZVxuICAgICAqIHF1ZXJ5SWQgd2hpY2ggY2FuIGJlIHVzZWQgYnkgcmVmZXJlbmNlZCBkYXRhIHN0cnVjdHVyZXMgKGUuZy5cbiAgICAgKiBpbmRleGVzKSB0byBtaW5pbWl6ZSB0aGUgb24tZGlzayBjb3N0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBjYW5vbmljYWwgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LiBUaGlzIGlzIG5vdCB1bmlxdWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVhZFRpbWUgcmVjZWl2ZWQgZnJvbSB0aGUgV2F0Y2ggU2VydmljZSBmb3IgdGhpcyBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlYWRfdGltZSBpbiB0aGUgcHJvdG9zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGFcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYVxuICAgICAqIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyByZWxhdGVkIHRvIHRoZSBzbmFwc2hvdFZlcnNpb24gaW4gdGhhdCB0aGUgcmVzdW1lVG9rZW5cbiAgICAgKiBlZmZlY3RpdmVseSBhbHNvIGVuY29kZXMgdGhhdCB2YWx1ZSwgYnV0IHRoZSByZXN1bWVUb2tlbiBpcyBvcGFxdWVcbiAgICAgKiBhbmQgc29tZXRpbWVzIGVuY29kZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0IHRoZSByZXN1bWVUb2tlbiBzaG91bGQgYmUgdXNlZCB3aGVuXG4gICAgICogYXNraW5nIHRoZSBzZXJ2ZXIgdG8gcmVhc29uIGFib3V0IHdoZXJlIHRoaXMgY2xpZW50IGlzIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSwgYnV0IHRoZSBjbGllbnQgc2hvdWxkIHVzZSB0aGUgc25hcHNob3RWZXJzaW9uIGZvciBpdHMgb3duXG4gICAgICogcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZXN1bWVfdG9rZW4gaW4gdGhlIHByb3Rvcy5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNlcXVlbmNlIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGxhc3QgdGltZSB0aGlzIHF1ZXJ5IHdhc1xuICAgICAqIGxpc3RlbmVkIHRvLCB1c2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBDb252ZW50aW9uYWxseSB0aGlzIHdvdWxkIGJlIGEgdGltZXN0YW1wIHZhbHVlLCBidXQgZGV2aWNlLWxvY2FsXG4gICAgICogY2xvY2tzIGFyZSB1bnJlbGlhYmxlIGFuZCB0aGV5IG11c3QgYmUgYWJsZSB0byBjcmVhdGUgbmV3IGxpc3RlbnNcbiAgICAgKiBldmVuIHdoaWxlIGRpc2Nvbm5lY3RlZC4gSW5zdGVhZCB0aGlzIHNob3VsZCBiZSBhIG1vbm90b25pY2FsbHlcbiAgICAgKiBpbmNyZWFzaW5nIG51bWJlciB0aGF0J3MgaW5jcmVtZW50ZWQgb24gZWFjaCBsaXN0ZW4gY2FsbC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHF1ZXJ5SWQgc2luY2UgdGhlIHF1ZXJ5SWQgaXMgYW5cbiAgICAgKiBpbW11dGFibGUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgUXVlcnkgb24gZmlyc3QgdXNlIHdoaWxlXG4gICAgICogbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIHVwZGF0ZWQgZXZlcnkgdGltZSB0aGUgcXVlcnkgaXNcbiAgICAgKiBsaXN0ZW5lZCB0by5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBEZW5vdGVzIHRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgcXVlcnkgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuICBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlbiBwcmlvciB0b1xuICAgICAqIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGZvciB0aGlzIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEJlY2F1c2UgY2Fub25pY2FsIGlkcyBhcmUgbm90IHVuaXF1ZSB3ZSBtdXN0IHN0b3JlIHRoZSBhY3R1YWwgcXVlcnkuIFdlXG4gICAgICogdXNlIHRoZSBwcm90byB0byBoYXZlIGFuIG9iamVjdCB3ZSBjYW4gcGVyc2lzdCB3aXRob3V0IGhhdmluZyB0b1xuICAgICAqIGR1cGxpY2F0ZSB0cmFuc2xhdGlvbiBsb2dpYyB0byBhbmQgZnJvbSBhIGBRdWVyeWAgb2JqZWN0LlxuICAgICAqL1xuICAgIG8pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuY2Fub25pY2FsSWQgPSBlLCB0aGlzLnJlYWRUaW1lID0gbiwgdGhpcy5yZXN1bWVUb2tlbiA9IHMsIFxuICAgICAgICB0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGksIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHIsIHRoaXMucXVlcnkgPSBvO1xuICAgIH1cbn1cblxuTXMuc3RvcmUgPSBcInRhcmdldHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkIHByb3BlcnR5LiAqL1xuTXMua2V5UGF0aCA9IFwidGFyZ2V0SWRcIiwgXG4vKiogVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleC4gKi9cbk1zLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSA9IFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgXG4vKipcbiAqIFRoZSBpbmRleCBvZiBhbGwgY2Fub25pY2FsSWRzIHRvIHRoZSB0YXJnZXRzIHRoYXQgdGhleSBtYXRjaC4gVGhpcyBpcyBub3RcbiAqIGEgdW5pcXVlIG1hcHBpbmcgYmVjYXVzZSBjYW5vbmljYWxJZCBkb2VzIG5vdCBwcm9taXNlIGEgdW5pcXVlIG5hbWUgZm9yIGFsbFxuICogcG9zc2libGUgcXVlcmllcywgc28gd2UgYXBwZW5kIHRoZSB0YXJnZXRJZCB0byBtYWtlIHRoZSBtYXBwaW5nIHVuaXF1ZS5cbiAqL1xuTXMucXVlcnlUYXJnZXRzS2V5UGF0aCA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSB0YXJnZXQgYW5kIGEgZG9jdW1lbnQsIG9yIGFcbiAqIHNlbnRpbmVsIHJvdyBtYXJraW5nIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhdCB3aGljaCBhIGRvY3VtZW50IHdhcyB1c2VkLlxuICogRWFjaCBkb2N1bWVudCBjYWNoZWQgbXVzdCBoYXZlIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3cgYmVmb3JlIGxydVxuICogZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIGVuYWJsZWQuXG4gKlxuICogVGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgYW5kIHNlbnRpbmVsIHJvd3MgYXJlIGNvLWxvY2F0ZWQgc28gdGhhdCBvcnBoYW5lZFxuICogZG9jdW1lbnRzIGFuZCB0aGVpciBzZXF1ZW5jZSBudW1iZXJzIGNhbiBiZSBpZGVudGlmaWVkIGVmZmljaWVudGx5IHZpYSBhIHNjYW5cbiAqIG9mIHRoaXMgc3RvcmUuXG4gKi9cbmNsYXNzIExzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0SWQgaWRlbnRpZnlpbmcgYSB0YXJnZXQgb3IgMCBmb3IgYSBzZW50aW5lbCByb3cuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIGRvY3VtZW50LCBhcyBlbmNvZGVkIGluIHRoZSBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogSWYgdGhpcyBpcyBhIHNlbnRpbmVsIHJvdywgdGhpcyBzaG91bGQgYmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdFxuICAgICAqIHRpbWUgdGhlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcGF0aGAgd2FzIHVzZWQuIE90aGVyd2lzZSwgaXQgc2hvdWxkIGJlXG4gICAgICogYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5wYXRoID0gZSwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovIExzLnN0b3JlID0gXCJ0YXJnZXREb2N1bWVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkLCBwYXRoIHByb3BlcnRpZXMuICovXG5Mcy5rZXlQYXRoID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciB0aGUgcmV2ZXJzZSBpbmRleC4gKi9cbkxzLmRvY3VtZW50VGFyZ2V0c0luZGV4ID0gXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBcbi8qKiBXZSBhbHNvIG5lZWQgdG8gY3JlYXRlIHRoZSByZXZlcnNlIGluZGV4IGZvciB0aGVzZSBwcm9wZXJ0aWVzLiAqL1xuTHMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdO1xuXG4vKipcbiAqIEEgcmVjb3JkIG9mIGdsb2JhbCBzdGF0ZSB0cmFja2VkIGFjcm9zcyBhbGwgVGFyZ2V0cywgdHJhY2tlZCBzZXBhcmF0ZWx5XG4gKiB0byBhdm9pZCB0aGUgbmVlZCBmb3IgZXh0cmEgaW5kZXhlcy5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IGluLXN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TIGNsaWVudC5cbiAqL1xuY2xhc3MgQnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBpZCBhY3Jvc3MgYWxsIHRhcmdldHMuXG4gICAgICpcbiAgICAgKiBTZWUgRGJUYXJnZXQudGFyZ2V0SWQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGFjcm9zcyBhbGwgdGFyZ2V0cy5cbiAgICAgKlxuICAgICAqIFNlZSBEYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBnbG9iYWwgc25hcHNob3QgdmVyc2lvbiByZXByZXNlbnRpbmcgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCB3ZVxuICAgICAqIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQuIFRoaXMgaXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGFuZCBhbnlcbiAgICAgKiBzbmFwc2hvdHMgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCBwcmlvciB0byB0aGlzIHZlcnNpb24gKGUuZy4gZm9yXG4gICAgICogdGFyZ2V0cyByZXN1bWVkIHdpdGggYSByZXN1bWVUb2tlbikgc2hvdWxkIGJlIHN1cHByZXNzZWQgKGJ1ZmZlcmVkKVxuICAgICAqIHVudGlsIHRoZSBiYWNrZW5kIGhhcyBjYXVnaHQgdXAgdG8gdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIGFnYWluLiBUaGlzXG4gICAgICogcHJldmVudHMgb3VyIGNhY2hlIGZyb20gZXZlciBnb2luZyBiYWNrd2FyZHMgaW4gdGltZS5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRhcmdldHMgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0LCB0aGlzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4sIFxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gcztcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlRhcmdldEdsb2JhbCBzdG9yZS5cbiAqLyBCcy5rZXkgPSBcInRhcmdldEdsb2JhbEtleVwiLCBCcy5zdG9yZSA9IFwidGFyZ2V0R2xvYmFsXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgQ29sbGVjdGlvbiBpZCAoZS5nLiAnbWVzc2FnZXMnKVxuICogdG8gYSBwYXJlbnQgcGF0aCAoZS5nLiAnL2NoYXRzLzEyMycpIHRoYXQgY29udGFpbnMgaXQgYXMgYSAoc3ViKWNvbGxlY3Rpb24uXG4gKiBUaGlzIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgZmluZCBhbGwgY29sbGVjdGlvbnMgdG8gcXVlcnkgd2hlbiBwZXJmb3JtaW5nXG4gKiBhIENvbGxlY3Rpb24gR3JvdXAgcXVlcnkuXG4gKi9cbmNsYXNzIFVzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbklkIChlLmcuICdtZXNzYWdlcycpXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIHBhcmVudCAoZWl0aGVyIGEgZG9jdW1lbnQgbG9jYXRpb24gb3IgYW4gZW1wdHkgcGF0aCBmb3JcbiAgICAgKiBhIHJvb3QtbGV2ZWwgY29sbGVjdGlvbikuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IHQsIHRoaXMucGFyZW50ID0gZTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBVcy5zdG9yZSA9IFwiY29sbGVjdGlvblBhcmVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNvbGxlY3Rpb25JZCwgcGFyZW50IHByb3BlcnRpZXMuICovXG5Vcy5rZXlQYXRoID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF07XG5cbi8qKlxuICogQSByZWNvcmQgb2YgdGhlIG1ldGFkYXRhIHN0YXRlIG9mIGVhY2ggY2xpZW50LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpLXRhYiBzdGF0ZSBhbmQgZG9lcyBub3QgbmVlZFxuICogdG8gYmUgcG9ydGVkIHRvIGlPUyBvciBBbmRyb2lkLlxuICovXG5jbGFzcyBxcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gTm90ZTogUHJldmlvdXMgc2NoZW1hIHZlcnNpb25zIGluY2x1ZGVkIGEgZmllbGRcbiAgICAvLyBcImxhc3RQcm9jZXNzZWREb2N1bWVudENoYW5nZUlkXCIuIERvbid0IHVzZSBhbnltb3JlLlxuICAgIC8qKiBUaGUgYXV0by1nZW5lcmF0ZWQgY2xpZW50IGlkIGFzc2lnbmVkIGF0IGNsaWVudCBzdGFydHVwLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbGFzdCB0aW1lIHRoaXMgc3RhdGUgd2FzIHVwZGF0ZWQuICovXG4gICAgZSwgXG4gICAgLyoqIFdoZXRoZXIgdGhlIGNsaWVudCdzIG5ldHdvcmsgY29ubmVjdGlvbiBpcyBlbmFibGVkLiAqL1xuICAgIG4sIFxuICAgIC8qKiBXaGV0aGVyIHRoaXMgY2xpZW50IGlzIHJ1bm5pbmcgaW4gYSBmb3JlZ3JvdW5kIHRhYi4gKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLnVwZGF0ZVRpbWVNcyA9IGUsIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuLCB0aGlzLmluRm9yZWdyb3VuZCA9IHM7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gcXMuc3RvcmUgPSBcImNsaWVudE1ldGFkYXRhXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjbGllbnRJZCBwcm9wZXJ0aWVzLiAqL1xucXMua2V5UGF0aCA9IFwiY2xpZW50SWRcIjtcblxuLyoqXG4gKiBBIG9iamVjdCByZXByZXNlbnRpbmcgYSBidW5kbGUgbG9hZGVkIGJ5IHRoZSBTREsuXG4gKi9cbmNsYXNzIEtzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIElEIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY3JlYXRlIHRpbWUgb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuYnVuZGxlSWQgPSB0LCB0aGlzLmNyZWF0ZVRpbWUgPSBlLCB0aGlzLnZlcnNpb24gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIEtzLnN0b3JlID0gXCJidW5kbGVzXCIsIEtzLmtleVBhdGggPSBcImJ1bmRsZUlkXCI7XG5cbi8qKlxuICogQSBvYmplY3QgcmVwcmVzZW50aW5nIGEgbmFtZWQgcXVlcnkgbG9hZGVkIGJ5IHRoZSBTREsgdmlhIGEgYnVuZGxlLlxuICovXG5jbGFzcyBqcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHJlYWQgdGltZSBvZiB0aGUgcmVzdWx0cyBzYXZlZCBpbiB0aGUgYnVuZGxlIGZyb20gdGhlIG5hbWVkIHF1ZXJ5LiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcXVlcnkgc2F2ZWQgaW4gdGhlIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzLmJ1bmRsZWRRdWVyeSA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8ganMuc3RvcmUgPSBcIm5hbWVkUXVlcmllc1wiLCBqcy5rZXlQYXRoID0gXCJuYW1lXCI7XG5cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNvbnN0IFFzID0gWyAuLi5bIC4uLlsgLi4uWyAuLi5bIENzLnN0b3JlLCBOcy5zdG9yZSwga3Muc3RvcmUsIE9zLnN0b3JlLCBNcy5zdG9yZSwgRHMuc3RvcmUsIEJzLnN0b3JlLCBMcy5zdG9yZSBdLCBxcy5zdG9yZSBdLCBGcy5zdG9yZSBdLCBVcy5zdG9yZSBdLCBLcy5zdG9yZSwganMuc3RvcmUgXSwgV3MgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLy8gVjIgaXMgbm8gbG9uZ2VyIHVzYWJsZSAoc2VlIGNvbW1lbnQgYXQgdG9wIG9mIGZpbGUpXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqL1xuY2xhc3MgR3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2godCk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKCh0ID0+IHQoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIHpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgdCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IHQsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sodCk7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gdCwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgbmV4dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgQigpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZShlLCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3ModCwgdGhpcy5yZXN1bHQpIDogbmV3IHpzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBTdWNjZXNzKHQsIGUpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9LCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBGYWlsdXJlKGUsIHQpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyYXBVc2VyRnVuY3Rpb24odCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQoKTtcbiAgICAgICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgenMgPyBlIDogenMucmVzb2x2ZShlKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIHpzLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cmFwU3VjY2Vzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiB6cy5yZXNvbHZlKGUpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiB6cy5yZWplY3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB6cygoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgenMoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgenMoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9IDAsIGkgPSAwLCByID0gITE7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICsrcywgdC5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgciAmJiBpID09PSBzICYmIGUoKTtcbiAgICAgICAgICAgICAgICB9KSwgKHQgPT4gbih0KSkpO1xuICAgICAgICAgICAgfSkpLCByID0gITAsIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcih0KSB7XG4gICAgICAgIGxldCBlID0genMucmVzb2x2ZSghMSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5uZXh0KCh0ID0+IHQgPyB6cy5yZXNvbHZlKHQpIDogbigpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaChlLmNhbGwodGhpcywgdCwgcykpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIEhzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdCwgdGhpcy50cmFuc2FjdGlvbiA9IGUsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkl0ID0gbmV3IFcsIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuSXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBlLmVycm9yID8gdGhpcy5JdC5yZWplY3QobmV3IFhzKHQsIGUuZXJyb3IpKSA6IHRoaXMuSXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBzaShlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB0aGlzLkl0LnJlamVjdChuZXcgWHModCwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3Blbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEhzKGUsIHQudHJhbnNhY3Rpb24ocywgbikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgWHMoZSwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IEF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5JdC5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydCh0KSB7XG4gICAgICAgIHQgJiYgdGhpcy5JdC5yZWplY3QodCksIHRoaXMuYWJvcnRlZCB8fCAoTyhcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQgPyB0Lm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodCk7XG4gICAgICAgIHJldHVybiBuZXcgdGkoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgSnMge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLlJ0ID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBKcy5idChnZXRVQSgpKSAmJiBGKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovICAgIHN0YXRpYyBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gTyhcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIHQpLCBlaSh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHQpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgUHQoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoSnMudnQoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZ2V0VUEoKSwgZSA9IEpzLmJ0KHQpLCBuID0gMCA8IGUgJiYgZSA8IDEwLCBzID0gSnMuVnQodCksIGkgPSAwIDwgcyAmJiBzIDwgNC41O1xuICAgICAgICAvLyBJRSAxMFxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcbiAgICAgICAgLy8gSUUgMTFcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XG4gICAgICAgIC8vIEVkZ2VcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXG4gICAgICAgICAgICAgICAgcmV0dXJuICEodC5pbmRleE9mKFwiTVNJRSBcIikgPiAwIHx8IHQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gMCB8fCB0LmluZGV4T2YoXCJFZGdlL1wiKSA+IDAgfHwgbiB8fCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxuICAgICAqLyAgICBzdGF0aWMgdnQoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKHQgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5TdCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyBEdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgYnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBWdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiLlwiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICAgKi8gICAgYXN5bmMgQ3QodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoTyhcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgcyA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHMub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBlKG4pO1xuICAgICAgICAgICAgfSwgcy5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgWHModCwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCBzLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSkgOiBcIkludmFsaWRTdGF0ZUVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyBzKSkgOiBuKG5ldyBYcyh0LCBzKSk7XG4gICAgICAgICAgICB9LCBzLm9udXBncmFkZW5lZWRlZCA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIE8oXCJTaW1wbGVEYlwiLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIHQub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLlJ0Lk50KGUsIHMudHJhbnNhY3Rpb24sIHQub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkRhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiBcIiArIHRoaXMudmVyc2lvbiArIFwiIGNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSksIHRoaXMua3QgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiB0aGlzLmt0KHQpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgeHQodCkge1xuICAgICAgICB0aGlzLmt0ID0gdCwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBlID0+IHQoZSkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IGU7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5DdCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gSHMub3Blbih0aGlzLmRiLCB0LCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHIgPSBzKGUpLmNhdGNoKCh0ID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIGUuYWJvcnQodCksIHpzLnJlamVjdCh0KSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiByLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgZS5BdCwgcjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiByIDwgMztcbiAgICAgICAgICAgICAgICBpZiAoTyhcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIHQubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgZSksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIWUpIHJldHVybiBQcm9taXNlLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxuICovIGNsYXNzIFlzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuJHQgPSB0LCB0aGlzLk90ID0gITEsIHRoaXMuRnQgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5PdDtcbiAgICB9XG4gICAgZ2V0IE10KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5GdDtcbiAgICB9XG4gICAgc2V0IGN1cnNvcih0KSB7XG4gICAgICAgIHRoaXMuJHQgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLk90ID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgTHQodCkge1xuICAgICAgICB0aGlzLkZ0ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBlaSh0aGlzLiR0LmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIFhzIGV4dGVuZHMgUSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcihqLlVOQVZBSUxBQkxFLCBgSW5kZXhlZERCIHRyYW5zYWN0aW9uICcke3R9JyBmYWlsZWQ6ICR7ZX1gKSwgdGhpcy5uYW1lID0gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCI7XG4gICAgfVxufVxuXG4vKiogVmVyaWZpZXMgd2hldGhlciBgZWAgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gKi8gZnVuY3Rpb24gWnModCkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSB0Lm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIHRpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSB0O1xuICAgIH1cbiAgICBwdXQodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/IChPKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgbiA9IHRoaXMuc3RvcmUucHV0KGUsIHQpKSA6IChPKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBcIjxhdXRvLWtleT5cIiwgdCksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQodCkpLCBlaShuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZCh0KSB7XG4gICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkFERFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIHQpO1xuICAgICAgICByZXR1cm4gZWkodGhpcy5zdG9yZS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gZWkodGhpcy5zdG9yZS5nZXQodCkpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IG51bGwpLCBPKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgZSkpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgTyhcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgdCk7XG4gICAgICAgIHJldHVybiBlaSh0aGlzLnN0b3JlLmRlbGV0ZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgTyhcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIGVpKHRoaXMuc3RvcmUuY291bnQoKSk7XG4gICAgfVxuICAgIEJ0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY3Vyc29yKHRoaXMub3B0aW9ucyh0LCBlKSksIHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVXQobiwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIHF0KHQsIGUpIHtcbiAgICAgICAgTyhcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICBuLkt0ID0gITE7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVXQocywgKCh0LCBlLCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIGp0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGUgPyBuID0gdCA6IChuID0ge30sIGUgPSB0KTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5VdChzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAgUXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3Ioe30pO1xuICAgICAgICByZXR1cm4gbmV3IHpzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHNpKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBzKGUpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHMgPyB0KHMucHJpbWFyeUtleSwgcy52YWx1ZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQgPyBzLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBVdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyB6cygoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgWXMoaSksIG8gPSBlKGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcik7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiB6cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5jYXRjaCgodCA9PiAoci5kb25lKCksIHpzLnJlamVjdCh0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByLmlzRG9uZSA/IHMoKSA6IG51bGwgPT09IHIuTXQgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHIuTXQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHpzLndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gbiA9IHQgOiBlID0gdCksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKHQucmV2ZXJzZSAmJiAoZSA9IFwicHJldlwiKSwgdC5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgodC5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdC5LdCA/IG4ub3BlbktleUN1cnNvcih0LnJhbmdlLCBlKSA6IG4ub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIGVpKHQpIHtcbiAgICByZXR1cm4gbmV3IHpzKCgoZSwgbikgPT4ge1xuICAgICAgICB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGUobik7XG4gICAgICAgIH0sIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHNpKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBuaSA9ICExO1xuXG5mdW5jdGlvbiBzaSh0KSB7XG4gICAgY29uc3QgZSA9IEpzLmJ0KGdldFVBKCkpO1xuICAgIGlmIChlID49IDEyLjIgJiYgZSA8IDEzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKHQubWVzc2FnZS5pbmRleE9mKGUpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUShcImludGVybmFsXCIsIGBJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICcke2V9Jy4gVGhpcyBpcyBsaWtlbHkgZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIG5pIHx8IChuaSA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgfSksIDApKSwgdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgaWkgZXh0ZW5kcyBHcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLld0ID0gdCwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgIHJldHVybiBKcy5EdChuLld0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXG4gKi8gY2xhc3Mgb2kge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gZSwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubXV0YXRpb25zW2VdO1xuICAgICAgICAgICAgaWYgKHMua2V5LmlzRXF1YWwodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgdG4ocywgdCwgbltlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXG4gICAgICogYmF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KHQpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgZW4oZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLm11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgZW4oZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KGUua2V5KSwgcyA9IG47XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRvTG9jYWxWaWV3KHMpLCBuLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudCh1dC5taW4oKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIERuKCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gdC5iYXRjaElkICYmIG90KHRoaXMubXV0YXRpb25zLCB0Lm11dGF0aW9ucywgKCh0LCBlKSA9PiBzbih0LCBlKSkpICYmIG90KHRoaXMuYmFzZU11dGF0aW9ucywgdC5iYXNlTXV0YXRpb25zLCAoKHQsIGUpID0+IHNuKHQsIGUpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyBhaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSB0LCB0aGlzLmNvbW1pdFZlcnNpb24gPSBlLCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbSh0LCBlLCBuKSB7XG4gICAgICAgIFUodC5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCBzID0gVm4oKTtcbiAgICAgICAgY29uc3QgaSA9IHQubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGkubGVuZ3RoOyB0KyspIHMgPSBzLmluc2VydChpW3RdLmtleSwgblt0XS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBhaSh0LCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBjaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gdXQubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHIgPSB1dC5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IHB0LkVNUFRZX0JZVEVfU1RSSU5HKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnJlc3VtZVRva2VuID0gbztcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0LCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgY2kodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgZSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdCwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIHVpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuR3QgPSB0O1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24gaGkodCwgZSkge1xuICAgIGlmIChlLmRvY3VtZW50KSByZXR1cm4gaXModC5HdCwgZS5kb2N1bWVudCwgISFlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgaWYgKGUubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gRHQuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSwgbiA9IF9pKGUubm9Eb2N1bWVudC5yZWFkVGltZSksIHMgPSBHdC5uZXdOb0RvY3VtZW50KHQsIG4pO1xuICAgICAgICByZXR1cm4gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPyBzLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogcztcbiAgICB9XG4gICAgaWYgKGUudW5rbm93bkRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHQgPSBEdC5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCksIG4gPSBfaShlLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIEd0Lm5ld1Vua25vd25Eb2N1bWVudCh0LCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEIoKTtcbn1cblxuLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBsaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGZpKG4pLCBpID0gZS5rZXkucGF0aC5wb3BMYXN0KCkudG9BcnJheSgpO1xuICAgIGlmIChlLmlzRm91bmREb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFluKHQsIGUua2V5KSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZGF0YS52YWx1ZS5tYXBWYWx1ZS5maWVsZHMsXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogUW4odCwgZS52ZXJzaW9uLnRvVGltZXN0YW1wKCkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQuR3QsIGUpLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgT3MoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIG4sIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc05vRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aC50b0FycmF5KCksIG4gPSB3aShlLnZlcnNpb24pLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgT3MoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgbmV3IHhzKHQsIG4pLCBcbiAgICAgICAgLyogZG9jdW1lbnQ9ICovIG51bGwsIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc1Vua25vd25Eb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmtleS5wYXRoLnRvQXJyYXkoKSwgbiA9IHdpKGUudmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgT3MobmV3ICRzKHQsIG4pLCBcbiAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCBcbiAgICAgICAgLyogaGFzQ29tbWl0dGVkTXV0YXRpb25zPSAqLyAhMCwgcywgaSk7XG4gICAgfVxuICAgIHJldHVybiBCKCk7XG59XG5cbmZ1bmN0aW9uIGZpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBkaSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBjdCh0WzBdLCB0WzFdKTtcbiAgICByZXR1cm4gdXQuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuZnVuY3Rpb24gd2kodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIG5ldyBTcyhlLnNlY29uZHMsIGUubmFub3NlY29uZHMpO1xufVxuXG5mdW5jdGlvbiBfaSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBjdCh0LnNlY29uZHMsIHQubmFub3NlY29uZHMpO1xuICAgIHJldHVybiB1dC5mcm9tVGltZXN0YW1wKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xuLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cbmZ1bmN0aW9uIG1pKHQsIGUpIHtcbiAgICBjb25zdCBuID0gKGUuYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKChlID0+IGNzKHQuR3QsIGUpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLm11dGF0aW9ucy5sZW5ndGggLSAxOyArK3QpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25zW3RdO1xuICAgICAgICBpZiAodCArIDEgPCBlLm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSBlLm11dGF0aW9uc1t0ICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5tdXRhdGlvbnNbdCArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gcy50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCBlLm11dGF0aW9ucy5zcGxpY2UodCArIDEsIDEpLCBcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzID0gZS5tdXRhdGlvbnMubWFwKChlID0+IGNzKHQuR3QsIGUpKSksIGkgPSBjdC5mcm9tTWlsbGlzKGUubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyBvaShlLmJhdGNoSWQsIGksIG4sIHMpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBnaSh0KSB7XG4gICAgY29uc3QgZSA9IF9pKHQucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyBfaSh0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogdXQubWluKCk7XG4gICAgbGV0IHM7XG4gICAgdmFyIGk7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC5xdWVyeS5kb2N1bWVudHMgPyAoVSgxID09PSAoaSA9IHQucXVlcnkpLmRvY3VtZW50cy5sZW5ndGgpLCBcbiAgICBzID0gYmUoeWUodHMoaS5kb2N1bWVudHNbMF0pKSkpIDogcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGJlKGZzKHQpKTtcbiAgICB9KHQucXVlcnkpLCBuZXcgY2kocywgdC50YXJnZXRJZCwgMCAvKiBMaXN0ZW4gKi8gLCB0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgZSwgbiwgcHQuZnJvbUJhc2U2NFN0cmluZyh0LnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIHlpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gd2koZS5zbmFwc2hvdFZlcnNpb24pLCBzID0gd2koZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gWnQoZS50YXJnZXQpID8gaHModC5HdCwgZS50YXJnZXQpIDogbHModC5HdCwgZS50YXJnZXQpO1xuICAgIC8vIFdlIGNhbid0IHN0b3JlIHRoZSByZXN1bWVUb2tlbiBhcyBhIEJ5dGVTdHJpbmcgaW4gSW5kZXhlZERiLCBzbyB3ZVxuICAgIC8vIGNvbnZlcnQgaXQgdG8gYSBiYXNlNjQgc3RyaW5nIGZvciBzdG9yYWdlLlxuICAgICAgICBjb25zdCByID0gZS5yZXN1bWVUb2tlbi50b0Jhc2U2NCgpO1xuICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxuICAgICAgICByZXR1cm4gbmV3IE1zKGUudGFyZ2V0SWQsIEp0KGUudGFyZ2V0KSwgbiwgciwgZS5zZXF1ZW5jZU51bWJlciwgcywgaSk7XG59XG5cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIHBpKHQpIHtcbiAgICBjb25zdCBlID0gZnMoe1xuICAgICAgICBwYXJlbnQ6IHQucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHQuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSB0LmxpbWl0VHlwZSA/IFBlKGUsIGUubGltaXQsIFwiTFwiIC8qIExhc3QgKi8pIDogZTtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIFRpIHtcbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBFaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogKGUgPSB0KS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBfaShlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgdG8gYSBEYkJ1bmRsZS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEVpKHQpLnB1dCh7XG4gICAgICAgICAgICBidW5kbGVJZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHdpKHpuKG4uY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgLyoqIEVuY29kZXMgYSBEYk5hbWVkUXVlcnkgdG8gYSBOYW1lZFF1ZXJ5LiAqLyAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBJaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoZSA9IHQpLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHBpKGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX2koZS5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBmcm9tIGEgYnVuZGxlIHByb3RvIHRvIGEgRGJOYW1lZFF1ZXJ5LiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBJaSh0KS5wdXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHdpKHpuKHQucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IHQuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBFaSh0KSB7XG4gICAgcmV0dXJuIHJpKHQsIEtzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gSWkodCkge1xuICAgIHJldHVybiByaSh0LCBqcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgQWkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnp0ID0gbmV3IFJpO1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnp0LmFkZChlKSwgenMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHRoaXMuenQuZ2V0RW50cmllcyhlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBSaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgZW50cnkgYWxyZWFkeSBleGlzdGVkLlxuICAgIGFkZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV0gfHwgbmV3IEVuKHd0LmNvbXBhcmF0b3IpLCBpID0gIXMuaGFzKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFtlXSA9IHMuYWRkKG4pLCBpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdO1xuICAgICAgICByZXR1cm4gcyAmJiBzLmhhcyhuKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbmRleFt0XSB8fCBuZXcgRW4od3QuY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyBiaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZSB1c2VkIHRvXG4gICAgICAgICAqIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkh0ID0gbmV3IFJpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cbiAgICAgKlxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAqLyAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5IdC5oYXMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmxhc3RTZWdtZW50KCksIHMgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXG4gICAgICAgICAgICAgICAgdGhpcy5IdC5hZGQoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbixcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGJzKHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFBpKHQpLnB1dChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4genMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSwgXCJcIiBdLCBbIGF0KGUpLCBcIlwiIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFBpKHQpLkJ0KHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAocy5jb2xsZWN0aW9uSWQgIT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaChWcyhzLnBhcmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gUGkodCkge1xuICAgIHJldHVybiByaSh0LCBVcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHZpID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIFZpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICB0LCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICBlLCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gdCwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gZSwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gbmV3IFZpKHQsIFZpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBWaS5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIFNpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5zdG9yZShOcy5zdG9yZSksIGkgPSB0LnN0b3JlKGtzLnN0b3JlKSwgciA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCBhID0gMDtcbiAgICBjb25zdCBjID0gcy5qdCh7XG4gICAgICAgIHJhbmdlOiBvXG4gICAgfSwgKCh0LCBlLCBuKSA9PiAoYSsrLCBuLmRlbGV0ZSgpKSkpO1xuICAgIHIucHVzaChjLm5leHQoKCgpID0+IHtcbiAgICAgICAgVSgxID09PSBhKTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IHUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcyA9IGtzLmtleShlLCB0LmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICByLnB1c2goaS5kZWxldGUocykpLCB1LnB1c2godC5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4genMud2FpdEZvcihyKS5uZXh0KCgoKSA9PiB1KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKi8gZnVuY3Rpb24gRGkodCkge1xuICAgIGlmICghdCkgcmV0dXJuIDA7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQuZG9jdW1lbnQpIGUgPSB0LmRvY3VtZW50OyBlbHNlIGlmICh0LnVua25vd25Eb2N1bWVudCkgZSA9IHQudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0Lm5vRG9jdW1lbnQpIHRocm93IEIoKTtcbiAgICAgICAgZSA9IHQubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIFZpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxuVmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCBWaS5ERUZBVUxUID0gbmV3IFZpKDQxOTQzMDQwLCBWaS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgVmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG5WaS5ESVNBQkxFRCA9IG5ldyBWaSgtMSwgMCwgMCk7XG5cbmNsYXNzIENpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5rID0gZSwgdGhpcy5KdCA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLll0ID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBYdCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBVKFwiXCIgIT09IHQudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IHQuaXNBdXRoZW50aWNhdGVkKCkgPyB0LnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgQ2koaSwgZSwgbiwgcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICBsZXQgZSA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIGtpKHQpLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBOcy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogblxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUgPSAhMSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0geGkodCksIHIgPSBraSh0KTtcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHIuYWRkKHt9KS5uZXh0KChvID0+IHtcbiAgICAgICAgICAgIFUoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbyk7XG4gICAgICAgICAgICBjb25zdCBhID0gbmV3IG9pKG8sIGUsIG4sIHMpLCBjID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmJhc2VNdXRhdGlvbnMubWFwKChlID0+IGFzKHQuR3QsIGUpKSksIGkgPSBuLm11dGF0aW9ucy5tYXAoKGUgPT4gYXModC5HdCwgZSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5zKGUsIG4uYmF0Y2hJZCwgbi5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLCBzLCBpKTtcbiAgICAgICAgICAgIH0odGhpcy5rLCB0aGlzLnVzZXJJZCwgYSksIHUgPSBbXTtcbiAgICAgICAgICAgIGxldCBoID0gbmV3IEVuKCgodCwgZSkgPT4gcnQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGtzLmtleSh0aGlzLnVzZXJJZCwgdC5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgaCA9IGguYWRkKHQua2V5LnBhdGgucG9wTGFzdCgpKSwgdS5wdXNoKHIucHV0KGMpKSwgdS5wdXNoKGkucHV0KGUsIGtzLlBMQUNFSE9MREVSKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB1LnB1c2godGhpcy5KdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSk7XG4gICAgICAgICAgICB9KSksIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuWXRbb10gPSBhLmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwgenMud2FpdEZvcih1KS5uZXh0KCgoKSA9PiBhKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBraSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gKFUodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbWkodGhpcy5rLCB0KSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBadCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLll0W2VdID8genMucmVzb2x2ZSh0aGlzLll0W2VdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLll0W2VdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBraSh0KS5qdCh7XG4gICAgICAgICAgICBpbmRleDogTnMudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKFUoZS5iYXRjaElkID49IG4pLCBpID0gbWkodGhpcy5rLCBlKSksIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgbiA9IC0xO1xuICAgICAgICByZXR1cm4ga2kodCkuanQoe1xuICAgICAgICAgICAgaW5kZXg6IE5zLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBlLFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gZS5iYXRjaElkLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIGtpKHQpLkJ0KE5zLnVzZXJNdXRhdGlvbnNJbmRleCwgZSkubmV4dCgodCA9PiB0Lm1hcCgodCA9PiBtaSh0aGlzLmssIHQpKSkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxuICAgICAgICBjb25zdCBuID0ga3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobiksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHhpKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgobiwgcywgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgW28sIGEsIGNdID0gbiwgdSA9IFZzKGEpO1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwodSkpIFxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxuICAgICAgICAgICAgcmV0dXJuIGtpKHQpLmdldChjKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXQpIHRocm93IEIoKTtcbiAgICAgICAgICAgICAgICBVKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGkucHVzaChtaSh0aGlzLmssIHQpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBFbihydCk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0ga3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSksIG8gPSB4aSh0KS5qdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgICAgIH0sICgodCwgcywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyLCBvLCBhXSA9IHQsIGMgPSBWcyhvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwoYykgPyBuID0gbi5hZGQoYSkgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMucHVzaChvKTtcbiAgICAgICAgfSkpLCB6cy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHRoaXMudGUodCwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxLCBpID0ga3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgbiksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpO1xuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXG4gICAgICAgIGxldCBvID0gbmV3IEVuKHJ0KTtcbiAgICAgICAgcmV0dXJuIHhpKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgodCwgZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3IsIGEsIGNdID0gdCwgdSA9IFZzKGEpO1xuICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKHUpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZChjKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMudGUodCwgbykpKTtcbiAgICB9XG4gICAgdGUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKGtpKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkgdGhyb3cgQigpO1xuICAgICAgICAgICAgICAgIFUodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKG1pKHRoaXMuaywgdCkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCB6cy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBTaSh0Lld0LCB0aGlzLnVzZXJJZCwgZSkubmV4dCgobiA9PiAodC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVlKGUuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwgenMuZm9yRWFjaChuLCAoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBlZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLll0W3RdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiB6cy5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGtzLnByZWZpeEZvclVzZXIodGhpcy51c2VySWQpKSwgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHhpKHQpLmp0KHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBWcyh0WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBuLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgVSgwID09PSBzLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4gTmkodCwgdGhpcy51c2VySWQsIGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cbiAgICBuZSh0KSB7XG4gICAgICAgIHJldHVybiAkaSh0KS5nZXQodGhpcy51c2VySWQpLm5leHQoKHQgPT4gdCB8fCBuZXcgQ3ModGhpcy51c2VySWQsIC0xLCBcbiAgICAgICAgLypsYXN0U3RyZWFtVG9rZW49Ki8gXCJcIikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cbiAqLyBmdW5jdGlvbiBOaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGtzLnByZWZpeEZvclBhdGgoZSwgbi5wYXRoKSwgaSA9IHNbMV0sIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHMpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIHhpKHQpLmp0KHtcbiAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgIEt0OiAhMFxuICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICBjb25zdCBbciwgYSwgLypiYXRjaElEKi8gY10gPSB0O1xuICAgICAgICByID09PSBlICYmIGEgPT09IGkgJiYgKG8gPSAhMCksIHMuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBraSh0KSB7XG4gICAgcmV0dXJuIHJpKHQsIE5zLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiB4aSh0KSB7XG4gICAgcmV0dXJuIHJpKHQsIGtzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiAkaSh0KSB7XG4gICAgcmV0dXJuIHJpKHQsIENzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBPZmZzZXQgdG8gZW5zdXJlIG5vbi1vdmVybGFwcGluZyB0YXJnZXQgaWRzLiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcbiAqIHdhdGNoIHN0cmVhbS5cbiAqXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgYW5kIG9uZSBmb3JcbiAqIGZvciB0aGUgc3luYyBlbmdpbmUgKHRvIGdlbmVyYXRlIGxpbWJvIGRvY3VtZW50cyB0YXJnZXRzKS4gVGhlc2VcbiAqIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXG4gKiByZXNwZWN0aXZlbHkpLlxuICpcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXG4gKiByZXN0YXJ0LlxuICovXG5jbGFzcyBPaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlID0gdDtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2UgKz0gMiwgdGhpcy5zZTtcbiAgICB9XG4gICAgc3RhdGljIGllKCkge1xuICAgICAgICAvLyBUaGUgdGFyZ2V0IGNhY2hlIGdlbmVyYXRvciBtdXN0IHJldHVybiAnMicgaW4gaXRzIGZpcnN0IGNhbGwgdG8gYG5leHQoKWBcbiAgICAgICAgLy8gYXMgdGhlcmUgaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0XG4gICAgICAgIC8vIG51bWJlciBhbmQgdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRFxuICAgICAgICAvLyAnMCcsIHRoZSBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cbiAgICAgICAgcmV0dXJuIG5ldyBPaSgwKTtcbiAgICB9XG4gICAgc3RhdGljIHJlKCkge1xuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cbiAgICAgICAgcmV0dXJuIG5ldyBPaSgtMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBGaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgdGhpcy5rID0gZTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXG4gICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxuICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcbiAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXG4gICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcbiAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgT2koZS5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuaGlnaGVzdFRhcmdldElkID0gbi5uZXh0KCksIHRoaXMuYWUodCwgZSkubmV4dCgoKCkgPT4gZS5oaWdoZXN0VGFyZ2V0SWQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgodCA9PiB1dC5mcm9tVGltZXN0YW1wKG5ldyBjdCh0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgdC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgodCA9PiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KChzID0+IChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIG4gJiYgKHMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4udG9UaW1lc3RhbXAoKSksIFxuICAgICAgICBlID4gcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSksIHRoaXMuYWUodCwgcykpKSk7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZSh0LCBlKS5uZXh0KCgoKSA9PiB0aGlzLm9lKHQpLm5leHQoKG4gPT4gKG4udGFyZ2V0Q291bnQgKz0gMSwgdGhpcy51ZShlLCBuKSwgXG4gICAgICAgIHRoaXMuYWUodCwgbikpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgoKCkgPT4gTWkodCkuZGVsZXRlKGUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gdGhpcy5vZSh0KSkpLm5leHQoKGUgPT4gKFUoZS50YXJnZXRDb3VudCA+IDApLCBcbiAgICAgICAgZS50YXJnZXRDb3VudCAtPSAxLCB0aGlzLmFlKHQsIGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxuICAgICAqLyAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBNaSh0KS5qdCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBnaShvKTtcbiAgICAgICAgICAgIGEuc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChhLnRhcmdldElkKSAmJiAocysrLCBpLnB1c2godGhpcy5yZW1vdmVUYXJnZXREYXRhKHQsIGEpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB6cy53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBNaSh0KS5qdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBnaShuKTtcbiAgICAgICAgICAgIGUocyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgb2UodCkge1xuICAgICAgICByZXR1cm4gTGkodCkuZ2V0KEJzLmtleSkubmV4dCgodCA9PiAoVShudWxsICE9PSB0KSwgdCkpKTtcbiAgICB9XG4gICAgYWUodCwgZSkge1xuICAgICAgICByZXR1cm4gTGkodCkucHV0KEJzLmtleSwgZSk7XG4gICAgfVxuICAgIGNlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE1pKHQpLnB1dCh5aSh0aGlzLmssIGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICB1ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiB0LnRhcmdldElkID4gZS5oaWdoZXN0VGFyZ2V0SWQgJiYgKGUuaGlnaGVzdFRhcmdldElkID0gdC50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIHQuc2VxdWVuY2VOdW1iZXIgPiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KCh0ID0+IHQudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IEp0KGUpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIE1pKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzLFxuICAgICAgICAgICAgaW5kZXg6IE1zLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZVxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBnaShuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBYdChlLCByLnRhcmdldCkgJiYgKGkgPSByLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gW10sIGkgPSBCaSh0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gYnMoZS5wYXRoKTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dChuZXcgTHMobiwgcikpKSwgcy5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIG4sIGUpKTtcbiAgICAgICAgfSkpLCB6cy53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IEJpKHQpO1xuICAgICAgICByZXR1cm4genMuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gYnMoZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiB6cy53YWl0Rm9yKFsgcy5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBuLCBlKSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBCaSh0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHMgPSBCaSh0KTtcbiAgICAgICAgbGV0IGkgPSBEbigpO1xuICAgICAgICByZXR1cm4gcy5qdCh7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIEt0OiAhMFxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBWcyh0WzFdKSwgciA9IG5ldyBEdChzKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChyKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gYnMoZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIGF0KG4pIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gQmkodCkuanQoe1xuICAgICAgICAgICAgaW5kZXg6IExzLmRvY3VtZW50VGFyZ2V0c0luZGV4LFxuICAgICAgICAgICAgS3Q6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChbdCwgZV0sIG4sIHMpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gdCAmJiAoaSsrLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBFdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBNaSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gZ2kodCkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gTWkodCkge1xuICAgIHJldHVybiByaSh0LCBNcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gTGkodCkge1xuICAgIHJldHVybiByaSh0LCBCcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIEJpKHQpIHtcbiAgICByZXR1cm4gcmkodCwgTHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gVWkodCkge1xuICAgIGlmICh0LmNvZGUgIT09IGouRkFJTEVEX1BSRUNPTkRJVElPTiB8fCB0Lm1lc3NhZ2UgIT09IFdzKSB0aHJvdyB0O1xuICAgIE8oXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gcWkoW3QsIGVdLCBbbiwgc10pIHtcbiAgICBjb25zdCBpID0gcnQodCwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBydChlLCBzKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIEtpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaGUgPSB0LCB0aGlzLmJ1ZmZlciA9IG5ldyBFbihxaSksIHRoaXMubGUgPSAwO1xuICAgIH1cbiAgICBmZSgpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5sZTtcbiAgICB9XG4gICAgZGUodCkge1xuICAgICAgICBjb25zdCBlID0gWyB0LCB0aGlzLmZlKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLmhlKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgcWkoZSwgdCkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZSh0KS5hZGQoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3Mgamkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy53ZSA9ICExLCB0aGlzLl9lID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMubWUodCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuX2UgJiYgKHRoaXMuX2UuY2FuY2VsKCksIHRoaXMuX2UgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9lO1xuICAgIH1cbiAgICBtZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLndlID8gM2U1IDogNmU0O1xuICAgICAgICBPKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiAke2V9bXNgKSwgdGhpcy5fZSA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIiAvKiBMcnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIGUsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9lID0gbnVsbCwgdGhpcy53ZSA9ICEwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0LmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgWnModCkgPyBPKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIiwgdCkgOiBhd2FpdCBVaSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gKi8gY2xhc3MgUWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZSA9IHQsIHRoaXMucGFyYW1zID0gZTtcbiAgICB9XG4gICAgY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZS55ZSh0KS5uZXh0KCh0ID0+IE1hdGguZmxvb3IoZSAvIDEwMCAqIHQpKSk7XG4gICAgfVxuICAgIG50aFNlcXVlbmNlTnVtYmVyKHQsIGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUpIHJldHVybiB6cy5yZXNvbHZlKG50LkkpO1xuICAgICAgICBjb25zdCBuID0gbmV3IEtpKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZS5mb3JFYWNoVGFyZ2V0KHQsICh0ID0+IG4uZGUodC5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLmdlLnBlKHQsICh0ID0+IG4uZGUodCkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSk7XG4gICAgfVxuICAgIGNvbGxlY3QodCwgZSkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgZGlzYWJsZWRcIiksIFxuICAgICAgICB6cy5yZXNvbHZlKHZpKSkgOiB0aGlzLmdldENhY2hlU2l6ZSh0KS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgQ2FjaGUgc2l6ZSAke259IGlzIGxvd2VyIHRoYW4gdGhyZXNob2xkICR7dGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZH1gKSwgXG4gICAgICAgIHZpKSA6IHRoaXMuVGUodCwgZSkpKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UuZ2V0Q2FjaGVTaXplKHQpO1xuICAgIH1cbiAgICBUZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzLCBpLCByLCBvLCBjLCB1O1xuICAgICAgICBjb25zdCBoID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdCkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIENhcCBhdCB0aGUgY29uZmlndXJlZCBtYXhcbiAgICAgICAgZSA+IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPyAoTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYENhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gdG8gdGhlIG1heGltdW0gb2YgJHt0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0fSBmcm9tICR7ZX1gKSwgXG4gICAgICAgIHMgPSB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSA6IHMgPSBlLCByID0gRGF0ZS5ub3coKSwgdGhpcy5udGhTZXF1ZW5jZU51bWJlcih0LCBzKSkpKS5uZXh0KChzID0+IChuID0gcywgXG4gICAgICAgIG8gPSBEYXRlLm5vdygpLCB0aGlzLnJlbW92ZVRhcmdldHModCwgbiwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIGMgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBuKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh1ID0gRGF0ZS5ub3coKSwgeCgpIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgICAgICAgICAgTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYExSVSBHYXJiYWdlIENvbGxlY3Rpb25cXG5cXHRDb3VudGVkIHRhcmdldHMgaW4gJHtyIC0gaH1tc1xcblxcdERldGVybWluZWQgbGVhc3QgcmVjZW50bHkgdXNlZCAke3N9IGluIGAgKyAobyAtIHIpICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHtpfSB0YXJnZXRzIGluIGAgKyAoYyAtIG8pICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHt0fSBkb2N1bWVudHMgaW4gYCArICh1IC0gYykgKyBcIm1zXFxuXCIgKyBgVG90YWwgRHVyYXRpb246ICR7dSAtIGh9bXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkaWRSdW46ICEwLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogcyxcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQcm92aWRlcyBMUlUgZnVuY3Rpb25hbGl0eSBmb3IgSW5kZXhlZERCIHBlcnNpc3RlbmNlLiAqL1xuY2xhc3MgV2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYiA9IHQsIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUWkodCwgZSk7XG4gICAgICAgIH0odGhpcywgZSk7XG4gICAgfVxuICAgIHllKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuRWUodCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodCkubmV4dCgodCA9PiBlLm5leHQoKGUgPT4gdCArIGUpKSkpO1xuICAgIH1cbiAgICBFZSh0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMucGUodCwgKHQgPT4ge1xuICAgICAgICAgICAgZSsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KHQsIGUpO1xuICAgIH1cbiAgICBwZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkllKHQsICgodCwgbikgPT4gZShuKSkpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gR2kodCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBHaSh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gR2kodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnl0aGluZyB3b3VsZCBwcmV2ZW50IHRoaXMgZG9jdW1lbnQgZnJvbSBiZWluZyBnYXJiYWdlXG4gICAgICogY29sbGVjdGVkLCBnaXZlbiB0aGF0IHRoZSBkb2N1bWVudCBpbiBxdWVzdGlvbiBpcyBub3QgcHJlc2VudCBpbiBhbnlcbiAgICAgKiB0YXJnZXRzIGFuZCBoYXMgYSBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCBmb3JcbiAgICAgKiB0aGUgY29sbGVjdGlvbiBydW4uXG4gICAgICovICAgIEFlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuID0gITE7XG4gICAgICAgICAgICByZXR1cm4gJGkodCkuUXQoKHMgPT4gTmkodCwgcywgZSkubmV4dCgodCA9PiAodCAmJiAobiA9ICEwKSwgenMucmVzb2x2ZSghdCkpKSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpLCBzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuSWUodCwgKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBpZiAobyA8PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuQWUodCwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZSkgXG4gICAgICAgICAgICAgICAgICAgIC8vIE91ciBzaXplIGFjY291bnRpbmcgcmVxdWlyZXMgdXMgdG8gcmVhZCBhbGwgZG9jdW1lbnRzIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSsrLCBuLmdldEVudHJ5KHQsIHIpLm5leHQoKCgpID0+IChuLnJlbW92ZUVudHJ5KHIpLCBCaSh0KS5kZWxldGUoWyAwLCBicyhyLnBhdGgpIF0pKSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB6cy53YWl0Rm9yKHMpKSkubmV4dCgoKCkgPT4gbi5hcHBseSh0KSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHQsIG4pO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdpKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBjYWNoZSB0aGF0IGlzICdvcnBoYW5lZCcuIE9ycGhhbmVkXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxuICAgICAqIHRoYXQgZG9jdW1lbnQgd2lsbCBiZSB0aGUgc2VudGluZWwgcm93ICh0YXJnZXRJZCAwKSwgd2hpY2ggd2lsbCBhbHNvIGhhdmUgdGhlIHNlcXVlbmNlXG4gICAgICogbnVtYmVyIGZvciB0aGUgbGFzdCB0aW1lIHRoZSBkb2N1bWVudCB3YXMgYWNjZXNzZWQuXG4gICAgICovICAgIEllKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEJpKHQpO1xuICAgICAgICBsZXQgcywgaSA9IG50Lkk7XG4gICAgICAgIHJldHVybiBuLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBMcy5kb2N1bWVudFRhcmdldHNJbmRleFxuICAgICAgICB9LCAoKFt0LCBuXSwge3BhdGg6IHIsIHNlcXVlbmNlTnVtYmVyOiBvfSkgPT4ge1xuICAgICAgICAgICAgMCA9PT0gdCA/IChcbiAgICAgICAgICAgIC8vIGlmIG5leHRUb1JlcG9ydCBpcyB2YWxpZCwgcmVwb3J0IGl0LCB0aGlzIGlzIGEgbmV3IGtleSBzbyB0aGVcbiAgICAgICAgICAgIC8vIGxhc3Qgb25lIG11c3Qgbm90IGJlIGEgbWVtYmVyIG9mIGFueSB0YXJnZXRzLlxuICAgICAgICAgICAgaSAhPT0gbnQuSSAmJiBlKG5ldyBEdChWcyhzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBudC5JO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVwb3J0IHNlcXVlbmNlIG51bWJlcnMgYWZ0ZXIgZ2V0dGluZyB0byB0aGUgbmV4dCBrZXksIHdlXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgYW5kIHJlcG9ydCBpdC5cbiAgICAgICAgICAgIGkgIT09IG50LkkgJiYgZShuZXcgRHQoVnMocykpLCBpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEdpKHQsIGUpIHtcbiAgICByZXR1cm4gQmkodCkucHV0KFxuICAgIC8qKlxuICogQHJldHVybnMgQSB2YWx1ZSBzdWl0YWJsZSBmb3Igd3JpdGluZyBhIHNlbnRpbmVsIHJvdyBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50XG4gKiBzdG9yZS5cbiAqL1xuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMcygwLCBicyh0LnBhdGgpLCBlKTtcbiAgICB9KGUsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovIGNsYXNzIHppIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubWFwS2V5Rm4gPSB0LCB0aGlzLmVxdWFsc0ZuID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5uZXIgbWFwIGZvciBhIGtleS92YWx1ZSBwYWlyLiBEdWUgdG8gdGhlIHBvc3NpYmlsaXR5IG9mIGNvbGxpc2lvbnMgd2VcbiAgICAgICAgICoga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoIHRvIGZpbmQgYW4gYWN0dWFsXG4gICAgICAgICAqIG1hdGNoLiBOb3RlIHRoYXQgY29sbGlzaW9ucyBzaG91bGQgYmUgcmFyZSwgc28gd2Ugc3RpbGwgZXhwZWN0IG5lYXJcbiAgICAgICAgICogY29uc3RhbnQgdGltZSBsb29rdXBzIGluIHByYWN0aWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbm5lciA9IHt9O1xuICAgIH1cbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgZm9yIChjb25zdCBbZSwgc10gb2YgbikgaWYgKHRoaXMuZXF1YWxzRm4oZSwgdCkpIHJldHVybiBzO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmdldCh0KTtcbiAgICB9XG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubWFwS2V5Rm4odCksIHMgPSB0aGlzLmlubmVyW25dO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHMubGVuZ3RoOyBuKyspIGlmICh0aGlzLmVxdWFsc0ZuKHNbbl1bMF0sIHQpKSByZXR1cm4gdm9pZCAoc1tuXSA9IFsgdCwgZSBdKTtcbiAgICAgICAgICAgIHMucHVzaChbIHQsIGUgXSk7XG4gICAgICAgIH0gZWxzZSB0aGlzLmlubmVyW25dID0gWyBbIHQsIGUgXSBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgbWFwLiBSZXR1cm5zIGEgYm9vbGVhbiBpZiBhbnl0aGluZyB3YXMgZGVsZXRlZC5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubWFwS2V5Rm4odCksIG4gPSB0aGlzLmlubmVyW2VdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgbi5sZW5ndGg7IHMrKykgaWYgKHRoaXMuZXF1YWxzRm4obltzXVswXSwgdCkpIHJldHVybiAxID09PSBuLmxlbmd0aCA/IGRlbGV0ZSB0aGlzLmlubmVyW2VdIDogbi5zcGxpY2UocywgMSksIFxuICAgICAgICAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgbHQodGhpcy5pbm5lciwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtlLCBzXSBvZiBuKSB0KGUsIHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBmdCh0aGlzLmlubmVyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGJhdGNoIHVwIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgd3JpdHRlbiB0byB0aGUgY2FjaGUsIGJ1dFxuICogYWRkaXRpb25hbGx5IHN1cHBvcnRzIHJlYWRpbmcgZW50cmllcyBiYWNrIHdpdGggdGhlIGBnZXRFbnRyeSgpYCBtZXRob2QsXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xuICogYnVmZmVyZWQuXG4gKlxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUgZGVsdGEgb2YgdGhlIHBlbmRpbmcgY2hhbmdlcy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cbiAqIElmIGJ5dGUtY291bnRpbmcgZW5kcyB1cCBiZWluZyBuZWVkZWQgb24gdGhlIG90aGVyIHBsYXRmb3JtcywgY29uc2lkZXJcbiAqIHBvcnRpbmcgdGhpcyBjbGFzcyBhcyBwYXJ0IG9mIHRoYXQgaW1wbGVtZW50YXRpb24gd29yay5cbiAqLyBjbGFzcyBIaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXkgdG8gdGhlIG5ldyBjYWNoZSBlbnRyeSB0aGF0IHNob3VsZCBiZSB3cml0dGVuIChvciBudWxsIGlmIGFueVxuICAgICAgICAvLyBleGlzdGluZyBjYWNoZSBlbnRyeSBzaG91bGQgYmUgcmVtb3ZlZCkuXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IG5ldyB6aSgodCA9PiB0LnRvU3RyaW5nKCkpLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITE7XG4gICAgfVxuICAgIGdldFJlYWRUaW1lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY2hhbmdlcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gZS5yZWFkVGltZSA6IHV0Lm1pbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSBtb2RpZnkgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodC5rZXksIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0LFxuICAgICAgICAgICAgcmVhZFRpbWU6IGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IHJlbW92ZSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCwgZSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodCwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IEd0Lm5ld0ludmFsaWREb2N1bWVudCh0KSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcbiAgICAgKiBhbmQgaWYgbm8gYnVmZmVyZWQgY2hhbmdlIGFwcGxpZXMsIHRoaXMgd2lsbCBmb3J3YXJkIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgb3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZiB3ZSBoYXZlIG5vdGhpbmdcbiAgICAgKiBjYWNoZWQuXG4gICAgICovICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNoYW5nZXMuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBuID8genMucmVzb2x2ZShuLmRvY3VtZW50KSA6IHRoaXMuZ2V0RnJvbUNhY2hlKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBjYWNoZWQgZG9jdW1lbnRzLCBpbmRleGVkIGJ5IGtleS4gSWYgYW4gZW50cnkgY2Fubm90IGJlXG4gICAgICogICAgIGZvdW5kLCB0aGUgY29ycmVzcG9uZGluZyBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gYW4gaW52YWxpZCBkb2N1bWVudC5cbiAgICAgKi8gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXG4gICAgICogdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uLlxuICAgICAqLyAgICBhcHBseSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICEwLCB0aGlzLmFwcGx5Q2hhbmdlcyh0KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqLyAgICBhc3NlcnROb3RBcHBsaWVkKCkge31cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovIGNsYXNzIEppIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICAgICAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBUaGUgcXVlcnkgaW5kZXhlcyB0aGF0IG5lZWQgdG8gYmUgbWFpbnRhaW5lZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuayA9IHQsIHRoaXMuSnQgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyaWVzIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBaaSh0KS5wdXQodHIoZSksIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFppKHQpLCBzID0gdHIoZSk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY3VycmVudCBjYWNoZSBzaXplLlxuICAgICAqXG4gICAgICogQ2FsbGVycyB0byBgYWRkRW50cnkoKWAgYW5kIGByZW1vdmVFbnRyeSgpYCAqbXVzdCogY2FsbCB0aGlzIGFmdGVyd2FyZHMgdG8gdXBkYXRlIHRoZVxuICAgICAqIGNhY2hlJ3MgbWV0YWRhdGEuXG4gICAgICovICAgIHVwZGF0ZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodCkubmV4dCgobiA9PiAobi5ieXRlU2l6ZSArPSBlLCB0aGlzLlJlKHQsIG4pKSkpO1xuICAgIH1cbiAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBaaSh0KS5nZXQodHIoZSkpLm5leHQoKHQgPT4gdGhpcy5iZShlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgZW50cnkgYW5kIGl0cyBzaXplLlxuICAgICAqLyAgICBQZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBaaSh0KS5nZXQodHIoZSkpLm5leHQoKHQgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLmJlKGUsIHQpLFxuICAgICAgICAgICAgc2l6ZTogRGkodClcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gUm4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmUodCwgZSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5iZSh0LCBlKTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUgc2V0IG9mIGtleXMgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGRvY3VtZW50cyBpbmRleGVkIGJ5IGtleSBhbmQgYSBtYXAgb2Ygc2l6ZXMgaW5kZXhlZCBieVxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0KS5cbiAgICAgKi8gICAgVmUodCwgZSkge1xuICAgICAgICBsZXQgbiA9IFJuKCksIHMgPSBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLnZlKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuYmUodCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgaSksIHMgPSBzLmluc2VydCh0LCBEaShlKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgZG9jdW1lbnRzOiBuLFxuICAgICAgICAgICAgU2U6IHNcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgdmUodCwgZSwgbikge1xuICAgICAgICBpZiAoZS5pc0VtcHR5KCkpIHJldHVybiB6cy5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChlLmZpcnN0KCkucGF0aC50b0FycmF5KCksIGUubGFzdCgpLnBhdGgudG9BcnJheSgpKSwgaSA9IGUuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgbGV0IHIgPSBpLmdldE5leHQoKTtcbiAgICAgICAgcmV0dXJuIFppKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IER0LmZyb21TZWdtZW50cyh0KTtcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2gga2V5cyBub3QgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtyICYmIER0LmNvbXBhcmF0b3IociwgbykgPCAwOyApIG4ociwgbnVsbCksIHIgPSBpLmdldE5leHQoKTtcbiAgICAgICAgICAgIHIgJiYgci5pc0VxdWFsKG8pICYmIChcbiAgICAgICAgICAgIC8vIEtleSBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgIG4ociwgZSksIHIgPSBpLmhhc05leHQoKSA/IGkuZ2V0TmV4dCgpIDogbnVsbCksIFxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgbmV4dCBrZXkgKGlmIHRoZXJlIGlzIG9uZSkuXG4gICAgICAgICAgICByID8gcy5MdChyLnBhdGgudG9BcnJheSgpKSA6IHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGtleXMgYXJlIG5vdCBpbiB0aGUgY2FjaGUuIE9uZSBjYXNlIHdoZXJlIGBpdGVyYXRlYFxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAgICAgICAgZm9yICg7cjsgKSBuKHIsIG51bGwpLCByID0gaS5oYXNOZXh0KCkgPyBpLmdldE5leHQoKSA6IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gUm4oKTtcbiAgICAgICAgY29uc3QgaSA9IGUucGF0aC5sZW5ndGggKyAxLCByID0ge307XG4gICAgICAgIGlmIChuLmlzRXF1YWwodXQubWluKCkpKSB7XG4gICAgICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93XG4gICAgICAgICAgICAvLyBkb3duIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgci5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQodCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGluZGV4LWZyZWUgcXVlcnkgYW5kIGZpbHRlciBieSByZWFkIHRpbWUuIFRoaXMgaXMgc2FmZVxuICAgICAgICAgICAgLy8gc2luY2UgYWxsIGRvY3VtZW50IGNoYW5nZXMgdG8gcXVlcmllcyB0aGF0IGhhdmUgYVxuICAgICAgICAgICAgLy8gbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAoYHNpbmNlUmVhZFRpbWVgKSBoYXZlIGEgcmVhZCB0aW1lIHNldC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnBhdGgudG9BcnJheSgpLCBzID0gZmkobik7XG4gICAgICAgICAgICByLnJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHQsIHMgXSwgXG4gICAgICAgICAgICAvKiBvcGVuPSAqLyAhMCksIHIuaW5kZXggPSBPcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWmkodCkuanQociwgKCh0LCBuLCByKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgcXVlcnkgaXMgYWN0dWFsbHkgcmV0dXJuaW5nIGFueSBwYXRoIHRoYXQgc3RhcnRzIHdpdGggdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIHByZWZpeCB3aGljaCBtYXkgaW5jbHVkZSBkb2N1bWVudHMgaW4gc3ViY29sbGVjdGlvbnMuIEZvclxuICAgICAgICAgICAgLy8gZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIHdpbGwgcmV0dXJuIHJvb21zL2FiYy9tZXNzYWdlcy94eXggYnV0IHdlXG4gICAgICAgICAgICAvLyBzaG91bGRuJ3QgbWF0Y2ggaXQuIEZpeCB0aGlzIGJ5IGRpc2NhcmRpbmcgcm93cyB3aXRoIGRvY3VtZW50IGtleXNcbiAgICAgICAgICAgIC8vIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnkgcGF0aC5cbiAgICAgICAgICAgIGlmICh0Lmxlbmd0aCAhPT0gaSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbyA9IGhpKHRoaXMuaywgbik7XG4gICAgICAgICAgICBlLnBhdGguaXNQcmVmaXhPZihvLmtleS5wYXRoKSA/IERlKGUsIG8pICYmIChzID0gcy5pbnNlcnQoby5rZXksIG8pKSA6IHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IFlpKHRoaXMsICEhdCAmJiB0LnRyYWNrUmVtb3ZhbHMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodCkubmV4dCgodCA9PiB0LmJ5dGVTaXplKSk7XG4gICAgfVxuICAgIGdldE1ldGFkYXRhKHQpIHtcbiAgICAgICAgcmV0dXJuIFhpKHQpLmdldChGcy5rZXkpLm5leHQoKHQgPT4gKFUoISF0KSwgdCkpKTtcbiAgICB9XG4gICAgUmUodCwgZSkge1xuICAgICAgICByZXR1cm4gWGkodCkucHV0KEZzLmtleSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYHJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBudWxsLCBpZiB0aGUgZG9jdW1lbnRcbiAgICAgKiBjb3JyZXNwb25kcyB0byB0aGUgZm9ybWF0IHVzZWQgZm9yIHNlbnRpbmVsIGRlbGV0ZXMpLlxuICAgICAqLyAgICBiZSh0LCBlKSB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaGkodGhpcy5rLCBlKTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHQuaXNOb0RvY3VtZW50KCkgJiYgdC52ZXJzaW9uLmlzRXF1YWwodXQubWluKCkpKSkgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEd0Lm5ld0ludmFsaWREb2N1bWVudCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIGRvY3VtZW50IHNlcmlhbGl6ZXIuXG4gKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBVbmxpa2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLCB0aGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGNvbXB1dGVzIHRoZSBzaXplXG4gKiBkZWx0YSBmb3IgYWxsIHN1Ym1pdHRlZCBjaGFuZ2VzLiBUaGlzIGF2b2lkcyBoYXZpbmcgdG8gcmUtcmVhZCBhbGwgZG9jdW1lbnRzIGZyb20gSW5kZXhlZERiXG4gKiB3aGVuIHdlIGFwcGx5IHRoZSBjaGFuZ2VzLlxuICovXG5jbGFzcyBZaSBleHRlbmRzIEhpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSAtIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxuICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIC0gV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XG4gICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuRGUgPSB0LCB0aGlzLnRyYWNrUmVtb3ZhbHMgPSBlLCBcbiAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW4gdGhpcyBidWZmZXIuXG4gICAgICAgIHRoaXMuQ2UgPSBuZXcgemkoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IDAsIHMgPSBuZXcgRW4oKCh0LCBlKSA9PiBydCh0LmNhbm9uaWNhbFN0cmluZygpLCBlLmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy5DZS5nZXQoaSk7XG4gICAgICAgICAgICBpZiAoci5kb2N1bWVudC5pc1ZhbGlkRG9jdW1lbnQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBsaSh0aGlzLkRlLmssIHIuZG9jdW1lbnQsIHRoaXMuZ2V0UmVhZFRpbWUoaSkpO1xuICAgICAgICAgICAgICAgIHMgPSBzLmFkZChpLnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gRGkoYSk7XG4gICAgICAgICAgICAgICAgbiArPSBjIC0gbywgZS5wdXNoKHRoaXMuRGUuYWRkRW50cnkodCwgaSwgYSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuIC09IG8sIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBsaSh0aGlzLkRlLmssIEd0Lm5ld05vRG9jdW1lbnQoaSwgdXQubWluKCkpLCB0aGlzLmdldFJlYWRUaW1lKGkpKTtcbiAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5EZS5hZGRFbnRyeSh0LCBpLCBuKSk7XG4gICAgICAgICAgICB9IGVsc2UgZS5wdXNoKHRoaXMuRGUucmVtb3ZlRW50cnkodCwgaSkpO1xuICAgICAgICB9KSksIHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLnB1c2godGhpcy5EZS5KdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBuKSk7XG4gICAgICAgIH0pKSwgZS5wdXNoKHRoaXMuRGUudXBkYXRlTWV0YWRhdGEodCwgbikpLCB6cy53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLkRlLlBlKHQsIGUpLm5leHQoKHQgPT4gKHRoaXMuQ2Uuc2V0KGUsIHQuc2l6ZSksIHQuZG9jdW1lbnQpKSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcbiAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuRGUuVmUodCwgZSkubmV4dCgoKHtkb2N1bWVudHM6IHQsIFNlOiBlfSkgPT4gKFxuICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cbiAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXG4gICAgICAgIC8vIGBNdXRhYmxlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cbiAgICAgICAgZS5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5DZS5zZXQodCwgZSk7XG4gICAgICAgIH0pKSwgdCkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFhpKHQpIHtcbiAgICByZXR1cm4gcmkodCwgRnMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBaaSh0KSB7XG4gICAgcmV0dXJuIHJpKHQsIE9zLnN0b3JlKTtcbn1cblxuZnVuY3Rpb24gdHIodCkge1xuICAgIHJldHVybiB0LnBhdGgudG9BcnJheSgpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovIGNsYXNzIGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuayA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaW4gcHJvZHVjdGlvbiwgdGhpcyBtZXRob2QgaXMgb25seSBldmVyIHVzZWQgdG8gdXBncmFkZSB0aGUgc2NoZW1hXG4gICAgICogdG8gU0NIRU1BX1ZFUlNJT04uIERpZmZlcmVudCB2YWx1ZXMgb2YgdG9WZXJzaW9uIGFyZSBvbmx5IHVzZWQgZm9yIHRlc3RpbmdcbiAgICAgKiBhbmQgbG9jYWwgZmVhdHVyZSBkZXZlbG9wbWVudC5cbiAgICAgKi8gICAgTnQodCwgZSwgbiwgcykge1xuICAgICAgICBVKG4gPCBzICYmIG4gPj0gMCAmJiBzIDw9IDExKTtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBIcyhcImNyZWF0ZU9yVXBncmFkZVwiLCBlKTtcbiAgICAgICAgbiA8IDEgJiYgcyA+PSAxICYmIChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKERzLnN0b3JlKTtcbiAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShDcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IENzLmtleVBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShOcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IE5zLmtleVBhdGgsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KE5zLnVzZXJNdXRhdGlvbnNJbmRleCwgTnMudXNlck11dGF0aW9uc0tleVBhdGgsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShrcy5zdG9yZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBVcGdyYWRlIGZ1bmN0aW9uIHRvIG1pZ3JhdGUgdGhlICdtdXRhdGlvbnMnIHN0b3JlIGZyb20gVjEgdG8gVjMuIExvYWRzXG4gKiBhbmQgcmV3cml0ZXMgYWxsIGRhdGEuXG4gKi8gKHQpLCBucih0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShPcy5zdG9yZSk7XG4gICAgICAgIH0odCkpO1xuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSB6cy5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiBzID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoTHMuc3RvcmUpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKE1zLnN0b3JlKSwgdC5kZWxldGVPYmplY3RTdG9yZShCcy5zdG9yZSk7XG4gICAgICAgIH0odCksIG5yKHQpKSwgciA9IHIubmV4dCgoKCkgPT4gXG4gICAgICAgIC8qKlxuICogQ3JlYXRlcyB0aGUgdGFyZ2V0IGdsb2JhbCBzaW5nbGV0b24gcm93LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUaGUgdmVyc2lvbiB1cGdyYWRlIHRyYW5zYWN0aW9uIGZvciBpbmRleGVkZGJcbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5zdG9yZShCcy5zdG9yZSksIG4gPSBuZXcgQnMoXG4gICAgICAgICAgICAvKmhpZ2hlc3RUYXJnZXRJZD0qLyAwLCBcbiAgICAgICAgICAgIC8qbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyPSovIDAsIHV0Lm1pbigpLnRvVGltZXN0YW1wKCksIFxuICAgICAgICAgICAgLyp0YXJnZXRDb3VudD0qLyAwKTtcbiAgICAgICAgICAgIHJldHVybiBlLnB1dChCcy5rZXksIG4pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlcyBpbmRpY2VzIG9uIHRoZSBSZW1vdGVEb2N1bWVudHMgc3RvcmUgdXNlZCBmb3IgYm90aCBtdWx0aS10YWJcbiAqIGFuZCBJbmRleC1GcmVlIHF1ZXJpZXMuXG4gKi8gKGkpKSkpLCBuIDwgNCAmJiBzID49IDQgJiYgKDAgIT09IG4gJiYgKFxuICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcbiAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcbiAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXG4gICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcbiAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXG4gICAgICAgIHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKE5zLnN0b3JlKS5CdCgpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoTnMuc3RvcmUpO1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoTnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogTnMua2V5UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChOcy51c2VyTXV0YXRpb25zSW5kZXgsIE5zLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS5zdG9yZShOcy5zdG9yZSksIGkgPSBuLm1hcCgodCA9PiBzLnB1dCh0KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB6cy53YWl0Rm9yKGkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KHQsIGkpKSkpLCByID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUocXMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogcXMua2V5UGF0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDUgJiYgcyA+PSA1ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLk5lKGkpKSkpLCBuIDwgNiAmJiBzID49IDYgJiYgKHIgPSByLm5leHQoKCgpID0+IChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEZzLnN0b3JlKTtcbiAgICAgICAgfSh0KSwgdGhpcy5rZShpKSkpKSksIG4gPCA3ICYmIHMgPj0gNyAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy54ZShpKSkpKSwgbiA8IDggJiYgcyA+PSA4ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLiRlKHQsIGkpKSkpLCBcbiAgICAgICAgbiA8IDkgJiYgcyA+PSA5ICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXG4gICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKSAmJiB0LmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpO1xuICAgICAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lm9iamVjdFN0b3JlKE9zLnN0b3JlKTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZUluZGV4KE9zLnJlYWRUaW1lSW5kZXgsIE9zLnJlYWRUaW1lSW5kZXhQYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KSwgZS5jcmVhdGVJbmRleChPcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleCwgT3MuY29sbGVjdGlvblJlYWRUaW1lSW5kZXhQYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCAxMCAmJiBzID49IDEwICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLk9lKGkpKSkpLCBuIDwgMTEgJiYgcyA+PSAxMSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEtzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IEtzLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKGpzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IGpzLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0KTtcbiAgICAgICAgfSkpKSwgcjtcbiAgICB9XG4gICAga2UodCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKE9zLnN0b3JlKS5qdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgKz0gRGkobik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IEZzKGUpO1xuICAgICAgICAgICAgcmV0dXJuIHQuc3RvcmUoRnMuc3RvcmUpLnB1dChGcy5rZXksIG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIE5lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoQ3Muc3RvcmUpLCBuID0gdC5zdG9yZShOcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiBlLkJ0KCkubmV4dCgoZSA9PiB6cy5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUudXNlcklkLCAtMSBdLCBbIGUudXNlcklkLCBlLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG4uQnQoTnMudXNlck11dGF0aW9uc0luZGV4LCBzKS5uZXh0KChuID0+IHpzLmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIFUobi51c2VySWQgPT09IGUudXNlcklkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbWkodGhpcy5rLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gU2kodCwgZS51c2VySWQsIHMpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgeGUodCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShMcy5zdG9yZSksIG4gPSB0LnN0b3JlKE9zLnN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoQnMuc3RvcmUpLmdldChCcy5rZXkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIG4uanQoKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyB3dChuKSwgbyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCwgYnModCkgXTtcbiAgICAgICAgICAgICAgICB9KHIpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlLmdldChvKS5uZXh0KChuID0+IG4gPyB6cy5yZXNvbHZlKCkgOiAobiA9PiBlLnB1dChuZXcgTHMoMCwgYnMobiksIHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSkpKHIpKSkpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHpzLndhaXRGb3IocykpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAkZSh0LCBlKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW5kZXguXG4gICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoVXMuc3RvcmUsIHtcbiAgICAgICAgICAgIGtleVBhdGg6IFVzLmtleVBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG4gPSBlLnN0b3JlKFVzLnN0b3JlKSwgcyA9IG5ldyBSaSwgaSA9IHQgPT4ge1xuICAgICAgICAgICAgaWYgKHMuYWRkKHQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgcyA9IHQucG9wTGFzdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBicyhzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cbiAgICAgICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxuICAgICAgICByZXR1cm4gZS5zdG9yZShPcy5zdG9yZSkuanQoe1xuICAgICAgICAgICAgS3Q6ICEwXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyB3dCh0KTtcbiAgICAgICAgICAgIHJldHVybiBpKG4ucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUuc3RvcmUoa3Muc3RvcmUpLmp0KHtcbiAgICAgICAgICAgIEt0OiAhMFxuICAgICAgICB9LCAoKFt0LCBlLCBuXSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IFZzKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGkoci5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgT2UodCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShNcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiBlLmp0KCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IGdpKG4pLCBpID0geWkodGhpcy5rLCBzKTtcbiAgICAgICAgICAgIHJldHVybiBlLnB1dChpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbnIodCkge1xuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoTHMuc3RvcmUsIHtcbiAgICAgICAga2V5UGF0aDogTHMua2V5UGF0aFxuICAgIH0pLmNyZWF0ZUluZGV4KExzLmRvY3VtZW50VGFyZ2V0c0luZGV4LCBMcy5kb2N1bWVudFRhcmdldHNLZXlQYXRoLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgdC5jcmVhdGVPYmplY3RTdG9yZShNcy5zdG9yZSwge1xuICAgICAgICBrZXlQYXRoOiBNcy5rZXlQYXRoXG4gICAgfSkuY3JlYXRlSW5kZXgoTXMucXVlcnlUYXJnZXRzSW5kZXhOYW1lLCBNcy5xdWVyeVRhcmdldHNLZXlQYXRoLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShCcy5zdG9yZSk7XG59XG5cbmNvbnN0IHNyID0gXCJGYWlsZWQgdG8gb2J0YWluIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlIGxheWVyLiBUbyBhbGxvdyBzaGFyZWQgYWNjZXNzLCBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uIGhhcyB0byBiZSBlbmFibGVkIGluIGFsbCB0YWJzLiBJZiB5b3UgYXJlIHVzaW5nIGBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjp0cnVlYCwgbWFrZSBzdXJlIHRoYXQgb25seSBvbmUgdGFiIGhhcyBwZXJzaXN0ZW5jZSBlbmFibGVkIGF0IGFueSBnaXZlbiB0aW1lLlwiO1xuXG4vKipcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIGFnZSBpbiBtaWxsaXNlY29uZHMgZm9yIGNsaWVudCBtZXRhZGF0YSBiZWZvcmUgdGhlIGNsaWVudFxuICogaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSBpcyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAqL1xuLyoqXG4gKiBBbiBJbmRleGVkREItYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBwZXJzaXN0ZW50bHlcbiAqIGFjcm9zcyBzZXNzaW9ucy5cbiAqXG4gKiBPbiBXZWIgb25seSwgdGhlIEZpcmVzdG9yZSBTREtzIHN1cHBvcnQgc2hhcmVkIGFjY2VzcyB0byBpdHMgcGVyc2lzdGVuY2VcbiAqIGxheWVyLiBUaGlzIGFsbG93cyBtdWx0aXBsZSBicm93c2VyIHRhYnMgdG8gcmVhZCBhbmQgd3JpdGUgdG8gSW5kZXhlZERiIGFuZFxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXG4gKiBjdXJyZW50bHkgb3B0aW9uYWwgYW5kIG5vdCBlbmFibGVkIHVubGVzcyBhbGwgY2xpZW50cyBpbnZva2VcbiAqIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGB7c3luY2hyb25pemVUYWJzOnRydWV9YC5cbiAqXG4gKiBJbiBtdWx0aS10YWIgbW9kZSwgaWYgbXVsdGlwbGUgY2xpZW50cyBhcmUgYWN0aXZlIGF0IHRoZSBzYW1lIHRpbWUsIHRoZSBTREtcbiAqIHdpbGwgZGVzaWduYXRlIG9uZSBjbGllbnQgYXMgdGhlIOKAnHByaW1hcnkgY2xpZW504oCdLiBBbiBlZmZvcnQgaXMgbWFkZSB0byBwaWNrXG4gKiBhIHZpc2libGUsIG5ldHdvcmstY29ubmVjdGVkIGFuZCBhY3RpdmUgY2xpZW50LCBhbmQgdGhpcyBjbGllbnQgaXNcbiAqIHJlc3BvbnNpYmxlIGZvciBsZXR0aW5nIG90aGVyIGNsaWVudHMga25vdyBhYm91dCBpdHMgcHJlc2VuY2UuIFRoZSBwcmltYXJ5XG4gKiBjbGllbnQgd3JpdGVzIGEgdW5pcXVlIGNsaWVudC1nZW5lcmF0ZWQgaWRlbnRpZmllciAodGhlIGNsaWVudCBJRCkgdG9cbiAqIEluZGV4ZWREYuKAmXMg4oCcb3duZXLigJ0gc3RvcmUgZXZlcnkgNCBzZWNvbmRzLiBJZiB0aGUgcHJpbWFyeSBjbGllbnQgZmFpbHMgdG9cbiAqIHVwZGF0ZSB0aGlzIGVudHJ5LCBhbm90aGVyIGNsaWVudCBjYW4gYWNxdWlyZSB0aGUgbGVhc2UgYW5kIHRha2Ugb3ZlciBhc1xuICogcHJpbWFyeS5cbiAqXG4gKiBTb21lIHBlcnNpc3RlbmNlIG9wZXJhdGlvbnMgaW4gdGhlIFNESyBhcmUgZGVzaWduYXRlZCBhcyBwcmltYXJ5LWNsaWVudCBvbmx5XG4gKiBvcGVyYXRpb25zLiBUaGlzIGluY2x1ZGVzIHRoZSBhY2tub3dsZWRnbWVudCBvZiBtdXRhdGlvbnMgYW5kIGFsbCB1cGRhdGVzIG9mXG4gKiByZW1vdGUgZG9jdW1lbnRzLiBUaGUgZWZmZWN0cyBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSB3cml0dGVuIHRvIHBlcnNpc3RlbmNlXG4gKiBhbmQgdGhlbiBicm9hZGNhc3QgdG8gb3RoZXIgdGFicyB2aWEgTG9jYWxTdG9yYWdlIChzZWVcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgKSwgd2hpY2ggdGhlbiByZWZyZXNoIHRoZWlyIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIFNpbWlsYXJseSwgdGhlIHByaW1hcnkgY2xpZW50IGxpc3RlbnMgdG8gbm90aWZpY2F0aW9ucyBzZW50IGJ5IHNlY29uZGFyeVxuICogY2xpZW50cyB0byBkaXNjb3ZlciBwZXJzaXN0ZW5jZSBjaGFuZ2VzIHdyaXR0ZW4gYnkgc2Vjb25kYXJ5IGNsaWVudHMsIHN1Y2ggYXNcbiAqIHRoZSBhZGRpdGlvbiBvZiBuZXcgbXV0YXRpb25zIGFuZCBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIElmIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZCBhbmQgYW5vdGhlciB0YWIgYWxyZWFkeSBvYnRhaW5lZCB0aGUgcHJpbWFyeVxuICogbGVhc2UsIEluZGV4ZWREYlBlcnNpc3RlbmNlIGVudGVycyBhIGZhaWxlZCBzdGF0ZSBhbmQgYWxsIHN1YnNlcXVlbnRcbiAqIG9wZXJhdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGZhaWwuXG4gKlxuICogQWRkaXRpb25hbGx5LCB0aGVyZSBpcyBhbiBvcHRpbWl6YXRpb24gc28gdGhhdCB3aGVuIGEgdGFiIGlzIGNsb3NlZCwgdGhlXG4gKiBwcmltYXJ5IGxlYXNlIGlzIHJlbGVhc2VkIGltbWVkaWF0ZWx5ICh0aGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IHRvIG1ha2VcbiAqIHN1cmUgdGhhdCBhIHJlZnJlc2hlZCB0YWIgaXMgYWJsZSB0byBpbW1lZGlhdGVseSByZS1hY3F1aXJlIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSkuIFVuZm9ydHVuYXRlbHksIEluZGV4ZWREQiBjYW5ub3QgYmUgcmVsaWFibHkgdXNlZCBpbiB3aW5kb3cudW5sb2FkXG4gKiBzaW5jZSBpdCBpcyBhbiBhc3luY2hyb25vdXMgQVBJLiBTbyBpbiBhZGRpdGlvbiB0byBhdHRlbXB0aW5nIHRvIGdpdmUgdXAgdGhlXG4gKiBsZWFzZSwgdGhlIGxlYXNlaG9sZGVyIHdyaXRlcyBpdHMgY2xpZW50IElEIHRvIGEgXCJ6b21iaWVkQ2xpZW50XCIgZW50cnkgaW5cbiAqIExvY2FsU3RvcmFnZSB3aGljaCBhY3RzIGFzIGFuIGluZGljYXRvciB0aGF0IGFub3RoZXIgdGFiIHNob3VsZCBnbyBhaGVhZCBhbmRcbiAqIHRha2UgdGhlIHByaW1hcnkgbGVhc2UgaW1tZWRpYXRlbHkgcmVnYXJkbGVzcyBvZiB0aGUgY3VycmVudCBsZWFzZSB0aW1lc3RhbXAuXG4gKlxuICogVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSBgc3luY2hyb25pemVUYWJzYCBzZWN0aW9uIHdoZW4gbXVsdGktdGFiIGlzIG5vXG4gKiBsb25nZXIgb3B0aW9uYWwuXG4gKi9cbmNsYXNzIGlyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN5bmNocm9uaXplIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgbXVsdGlwbGUgdGFicyBhbmQgc2hhcmVcbiAgICAgKiBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcywgaSwgciwgbywgYSwgYywgXG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRvIHRydWUsIGZvcmNlZnVsbHkgb2J0YWlucyBkYXRhYmFzZSBhY2Nlc3MuIEV4aXN0aW5nIHRhYnMgd2lsbFxuICAgICAqIG5vIGxvbmdlciBiZSBhYmxlIHRvIGFjY2VzcyBJbmRleGVkREIuXG4gICAgICovXG4gICAgdSkge1xuICAgICAgICBpZiAodGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IHQsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBlLCB0aGlzLmNsaWVudElkID0gbiwgXG4gICAgICAgIHRoaXMuRmUgPSBpLCB0aGlzLndpbmRvdyA9IHIsIHRoaXMuZG9jdW1lbnQgPSBvLCB0aGlzLk1lID0gYywgdGhpcy5MZSA9IHUsIHRoaXMuQmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5VZSA9ICExLCB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gITAsIFxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5xZSA9IG51bGwsIHRoaXMuaW5Gb3JlZ3JvdW5kID0gITEsIFxuICAgICAgICAvKiogT3VyICd2aXNpYmlsaXR5Y2hhbmdlJyBsaXN0ZW5lciBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLktlID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cbiAgICAgICAgdGhpcy5qZSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cbiAgICAgICAgdGhpcy5RZSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgXG4gICAgICAgIC8qKiBBIGxpc3RlbmVyIHRvIG5vdGlmeSBvbiBwcmltYXJ5IHN0YXRlIGNoYW5nZXMuICovXG4gICAgICAgIHRoaXMuV2UgPSB0ID0+IFByb21pc2UucmVzb2x2ZSgpLCAhaXIuUHQoKSkgdGhyb3cgbmV3IFEoai5VTklNUExFTUVOVEVELCBcIlRoaXMgcGxhdGZvcm0gaXMgZWl0aGVyIG1pc3NpbmcgSW5kZXhlZERCIG9yIGlzIGtub3duIHRvIGhhdmUgYW4gaW5jb21wbGV0ZSBpbXBsZW1lbnRhdGlvbi4gT2ZmbGluZSBwZXJzaXN0ZW5jZSBoYXMgYmVlbiBkaXNhYmxlZC5cIik7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgV2kodGhpcywgcyksIHRoaXMuR2UgPSBlICsgXCJtYWluXCIsIHRoaXMuayA9IG5ldyB1aShhKSwgXG4gICAgICAgIHRoaXMuemUgPSBuZXcgSnModGhpcy5HZSwgMTEsIG5ldyBlcih0aGlzLmspKSwgdGhpcy5IZSA9IG5ldyBGaSh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLCB0aGlzLmspLCBcbiAgICAgICAgdGhpcy5KdCA9IG5ldyBiaSwgdGhpcy5KZSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSmkodCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBzcGVjaWZpZWQgcmVhZFxuICogdGltZS5cbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAodGhpcy5rLCB0aGlzLkp0KSwgdGhpcy5ZZSA9IG5ldyBUaSwgdGhpcy53aW5kb3cgJiYgdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlID8gdGhpcy5YZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA6ICh0aGlzLlhlID0gbnVsbCwgXG4gICAgICAgICExID09PSB1ICYmIEYoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBhbHJlYWR5IGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZFxuICAgICAgICAvLyBkby5cbiAgICAgICAgcmV0dXJuIHRoaXMuWmUoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgIC8vIEZhaWwgYHN0YXJ0KClgIGlmIGBzeW5jaHJvbml6ZVRhYnNgIGlzIGRpc2FibGVkIGFuZCB3ZSBjYW5ub3RcbiAgICAgICAgICAgIC8vIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgc3IpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG4oKSwgdGhpcy5lbigpLCB0aGlzLm5uKCksIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcIiwgXCJyZWFkb25seVwiLCAodCA9PiB0aGlzLkhlLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSkpO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLkJlID0gbmV3IG50KHQsIHRoaXMuTWUpO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5VZSA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4gKHRoaXMuemUgJiYgdGhpcy56ZS5jbG9zZSgpLCBQcm9taXNlLnJlamVjdCh0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNuKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuV2UgPSBhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiB0KGUpO1xuICAgICAgICB9LCB0KHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLnplLnh0KChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuRmUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMuWmUoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBaZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gb3IodCkucHV0KG5ldyBxcyh0aGlzLmNsaWVudElkLCBEYXRlLm5vdygpLCB0aGlzLm5ldHdvcmtFbmFibGVkLCB0aGlzLmluRm9yZWdyb3VuZCkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMucm4odCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5GZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLldlKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMub24odCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5hbih0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMuY24odCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKFpzKHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuIE8oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLkZlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuV2UodCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJuKHQpIHtcbiAgICAgICAgcmV0dXJuIHJyKHQpLmdldChEcy5rZXkpLm5leHQoKHQgPT4genMucmVzb2x2ZSh0aGlzLnVuKHQpKSkpO1xuICAgIH1cbiAgICBobih0KSB7XG4gICAgICAgIHJldHVybiBvcih0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBsbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmZuKHRoaXMuUWUsIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLlFlID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHJpKHQsIHFzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5CdCgpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5kbih0LCAxOGU1KSwgcyA9IHQuZmlsdGVyKCh0ID0+IC0xID09PSBuLmluZGV4T2YodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHpzLmZvckVhY2gocywgKHQgPT4gZS5kZWxldGUodC5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5YZSkgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuWGUucmVtb3ZlSXRlbSh0aGlzLnduKGUuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIG5uKCkge1xuICAgICAgICB0aGlzLmplID0gdGhpcy5GZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogQ2xpZW50TWV0YWRhdGFSZWZyZXNoICovICwgNGUzLCAoKCkgPT4gdGhpcy5aZSgpLnRoZW4oKCgpID0+IHRoaXMubG4oKSkpLnRoZW4oKCgpID0+IHRoaXMubm4oKSkpKSk7XG4gICAgfVxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqLyAgICB1bih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgdC5vd25lcklkID09PSB0aGlzLmNsaWVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxuICAgICAqLyAgICBvbih0KSB7XG4gICAgICAgIGlmICh0aGlzLkxlKSByZXR1cm4genMucmVzb2x2ZSghMCk7XG4gICAgICAgIHJldHVybiBycih0KS5nZXQoRHMua2V5KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSB0aGUgYGZvcmNlT3duaW5nVGFiYCBzZXR0aW5nIHdhcyBwYXNzZWQgaW4uXG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLmZuKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5fbihlLm93bmVySWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudW4oZSkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy51bihlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgc3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEoIXRoaXMubmV0d29ya0VuYWJsZWQgfHwgIXRoaXMuaW5Gb3JlZ3JvdW5kKSB8fCBvcih0KS5CdCgpLm5leHQoKHQgPT4gdm9pZCAwID09PSB0aGlzLmRuKHQsIDVlMykuZmluZCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IHQuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIHQubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgdC5pbkZvcmVncm91bmQsIHMgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSB0Lm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSB8fCBuICYmIHMpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke3QgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5VZSA9ICExLCB0aGlzLm1uKCksIHRoaXMuamUgJiYgKHRoaXMuamUuY2FuY2VsKCksIHRoaXMuamUgPSBudWxsKSwgdGhpcy5nbigpLCBcbiAgICAgICAgdGhpcy55bigpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuemUucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIERzLnN0b3JlLCBxcy5zdG9yZSBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IGlpKHQsIG50LkkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW4oZSkubmV4dCgoKCkgPT4gdGhpcy5obihlKSkpO1xuICAgICAgICB9KSksIHRoaXMuemUuY2xvc2UoKSwgXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZW50cnkgbWFya2luZyB0aGUgY2xpZW50IGFzIHpvbWJpZWQgZnJvbSBMb2NhbFN0b3JhZ2Ugc2luY2VcbiAgICAgICAgLy8gd2Ugc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgaXRzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLlxuICAgICAgICB0aGlzLnBuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcbiAgICAgKiBwcm92aWRlZCB0aHJlc2hvbGQuXG4gICAgICovICAgIGRuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuZmlsdGVyKCh0ID0+IHRoaXMuZm4odC51cGRhdGVUaW1lTXMsIGUpICYmICF0aGlzLl9uKHQuY2xpZW50SWQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiBJZiBtdWx0aS10YWJcbiAgICAgKiBpcyBub3Qgc3VwcG9ydGVkLCByZXR1cm5zIGFuIGFycmF5IHRoYXQgb25seSBjb250YWlucyB0aGUgbG9jYWwgY2xpZW50J3NcbiAgICAgKiBJRC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIFRuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEFjdGl2ZUNsaWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBvcih0KS5CdCgpLm5leHQoKHQgPT4gdGhpcy5kbih0LCAxOGU1KS5tYXAoKHQgPT4gdC5jbGllbnRJZCkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVlO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQpIHtcbiAgICAgICAgcmV0dXJuIENpLlh0KHQsIHRoaXMuaywgdGhpcy5KdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmU7XG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnQ7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZZTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBcInJlYWRvbmx5XCIgPT09IGUgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuemUucnVuVHJhbnNhY3Rpb24odCwgcywgUXMsIChzID0+IChpID0gbmV3IGlpKHMsIHRoaXMuQmUgPyB0aGlzLkJlLm5leHQoKSA6IG50LkkpLCBcbiAgICAgICAgXCJyZWFkd3JpdGUtcHJpbWFyeVwiID09PSBlID8gdGhpcy5ybihpKS5uZXh0KCh0ID0+ICEhdCB8fCB0aGlzLm9uKGkpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHRocm93IEYoYEZhaWxlZCB0byBvYnRhaW4gcHJpbWFyeSBsZWFzZSBmb3IgYWN0aW9uICcke3R9Jy5gKSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgXG4gICAgICAgICAgICB0aGlzLkZlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuV2UoITEpKSksIG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgV3MpO1xuICAgICAgICAgICAgcmV0dXJuIG4oaSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+IHRoaXMuY24oaSkubmV4dCgoKCkgPT4gdCkpKSkgOiB0aGlzLkVuKGkpLm5leHQoKCgpID0+IG4oaSkpKSkpKS50aGVuKCh0ID0+IChpLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgY3VycmVudCB0YWIgaXMgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIgb3IgYWx0ZXJuYXRpdmVseVxuICAgICAqIHRoYXQgdGhlIGxlYXNlaG9sZGVyIGhhcyBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuIG5vIGxvbmdlclxuICAgIC8vIGJlIHR1cm5lZCBvZmYuXG4gICAgRW4odCkge1xuICAgICAgICByZXR1cm4gcnIodCkuZ2V0KERzLmtleSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiB0aGlzLmZuKHQubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5fbih0Lm93bmVySWQpICYmICF0aGlzLnVuKHQpICYmICEodGhpcy5MZSB8fCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uICYmIHQuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pKSB0aHJvdyBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIHNyKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXG4gICAgICogbWV0aG9kIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoaXMgbGVhc2UuXG4gICAgICovICAgIGNuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBEcyh0aGlzLmNsaWVudElkLCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uLCBEYXRlLm5vdygpKTtcbiAgICAgICAgcmV0dXJuIHJyKHQpLnB1dChEcy5rZXksIGUpO1xuICAgIH1cbiAgICBzdGF0aWMgUHQoKSB7XG4gICAgICAgIHJldHVybiBKcy5QdCgpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHRoZSBwcmltYXJ5IGxlYXNlIGFuZCByZW1vdmVzIGl0IGlmIHdlIGFyZSB0aGUgY3VycmVudCBwcmltYXJ5LiAqLyAgICBhbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBycih0KTtcbiAgICAgICAgcmV0dXJuIGUuZ2V0KERzLmtleSkubmV4dCgodCA9PiB0aGlzLnVuKHQpID8gKE8oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBwcmltYXJ5IGxlYXNlLlwiKSwgXG4gICAgICAgIGUuZGVsZXRlKERzLmtleSkpIDogenMucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqLyAgICBmbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gISh0IDwgbiAtIGUpICYmICghKHQgPiBuKSB8fCAoRihgRGV0ZWN0ZWQgYW4gdXBkYXRlIHRpbWUgdGhhdCBpcyBpbiB0aGUgZnV0dXJlOiAke3R9ID4gJHtufWApLCBcbiAgICAgICAgITEpKTtcbiAgICB9XG4gICAgdG4oKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuZG9jdW1lbnQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgKHRoaXMuS2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkZlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSwgXG4gICAgICAgICAgICB0aGlzLlplKCkpKSk7XG4gICAgICAgIH0sIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5LZSksIHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICB9XG4gICAgZ24oKSB7XG4gICAgICAgIHRoaXMuS2UgJiYgKHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5LZSksIHRoaXMuS2UgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0YWNoZXMgYSB3aW5kb3cudW5sb2FkIGhhbmRsZXIgdGhhdCB3aWxsIHN5bmNocm9ub3VzbHkgd3JpdGUgb3VyXG4gICAgICogY2xpZW50SWQgdG8gYSBcInpvbWJpZSBjbGllbnQgaWRcIiBsb2NhdGlvbiBpbiBMb2NhbFN0b3JhZ2UuIFRoaXMgY2FuIGJlIHVzZWRcbiAgICAgKiBieSB0YWJzIHRyeWluZyB0byBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIHRvIGRldGVybWluZSB0aGF0IHRoZSBsZWFzZVxuICAgICAqIGlzIG5vIGxvbmdlciB2YWxpZCBldmVuIGlmIHRoZSB0aW1lc3RhbXAgaXMgcmVjZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseVxuICAgICAqIGltcG9ydGFudCBmb3IgdGhlIHJlZnJlc2ggY2FzZSAoc28gdGhlIHRhYiBjb3JyZWN0bHkgcmUtYWNxdWlyZXMgdGhlXG4gICAgICogcHJpbWFyeSBsZWFzZSkuIExvY2FsU3RvcmFnZSBpcyB1c2VkIGZvciB0aGlzIHJhdGhlciB0aGFuIEluZGV4ZWREYiBiZWNhdXNlXG4gICAgICogaXQgaXMgYSBzeW5jaHJvbm91cyBBUEkgYW5kIHNvIGNhbiBiZSB1c2VkIHJlbGlhYmx5IGZyb20gIGFuIHVubG9hZFxuICAgICAqIGhhbmRsZXIuXG4gICAgICovICAgIGVuKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiAobnVsbCA9PT0gKHQgPSB0aGlzLndpbmRvdykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5hZGRFdmVudExpc3RlbmVyKSAmJiAodGhpcy5xZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEluIHRoZW9yeSwgdGhpcyBzaG91bGQgYmUgc2NoZWR1bGVkIG9uIHRoZSBBc3luY1F1ZXVlIHNpbmNlIGl0XG4gICAgICAgICAgICAvLyBhY2Nlc3NlcyBpbnRlcm5hbCBzdGF0ZS4gV2UgZXhlY3V0ZSB0aGlzIGNvZGUgZGlyZWN0bHkgZHVyaW5nIHNodXRkb3duXG4gICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBhIGNoYW5jZSB0byBydW4uXG4gICAgICAgICAgICB0aGlzLm1uKCksIGlzU2FmYXJpKCkgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL1ZlcnNpb25cXC8xWzQ1XS8pICYmIFxuICAgICAgICAgICAgLy8gT24gU2FmYXJpIDE0IGFuZCAxNSwgd2UgZG8gbm90IHJ1biBhbnkgY2xlYW51cCBhY3Rpb25zIGFzIGl0IG1pZ2h0XG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGEgYnVnIHRoYXQgcHJldmVudHMgU2FmYXJpIGZyb20gcmUtb3BlbmluZyBJbmRleGVkREIgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGUgbmV4dCBwYWdlIGxvYWQuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyNjU0N1xuICAgICAgICAgICAgdGhpcy5GZS5lbnRlclJlc3RyaWN0ZWRNb2RlKC8qIHB1cmdlRXhpc3RpbmdUYXNrcz0gKi8gITApLCB0aGlzLkZlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpO1xuICAgICAgICB9LCB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5xZSkpO1xuICAgIH1cbiAgICB5bigpIHtcbiAgICAgICAgdGhpcy5xZSAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMucWUpLCB0aGlzLnFlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXG4gICAgICovICAgIF9uKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKG51bGwgPT09IChlID0gdGhpcy5YZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5nZXRJdGVtKHRoaXMud24odCkpKTtcbiAgICAgICAgICAgIHJldHVybiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAnJHt0fScgJHtuID8gXCJpc1wiIDogXCJpcyBub3RcIn0gem9tYmllZCBpbiBMb2NhbFN0b3JhZ2VgKSwgXG4gICAgICAgICAgICBuO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgIHJldHVybiBGKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLCB0KSwgITE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXG4gICAgICovICAgIG1uKCkge1xuICAgICAgICBpZiAodGhpcy5YZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWGUuc2V0SXRlbSh0aGlzLnduKHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cbiAgICAgICAgICAgIEYoXCJGYWlsZWQgdG8gc2V0IHpvbWJpZSBjbGllbnQgaWQuXCIsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBSZW1vdmVzIHRoZSB6b21iaWVkIGNsaWVudCBlbnRyeSBpZiBpdCBleGlzdHMuICovICAgIHBuKCkge1xuICAgICAgICBpZiAodGhpcy5YZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWGUucmVtb3ZlSXRlbSh0aGlzLnduKHRoaXMuY2xpZW50SWQpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH1cbiAgICB9XG4gICAgd24odCkge1xuICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV96b21iaWVfJHt0aGlzLnBlcnNpc3RlbmNlS2V5fV8ke3R9YDtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBwcmltYXJ5IGNsaWVudCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gcnIodCkge1xuICAgIHJldHVybiByaSh0LCBEcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIG9yKHQpIHtcbiAgICByZXR1cm4gcmkodCwgcXMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBhcih0LCBlKSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IHQucHJvamVjdElkO1xuICAgIHJldHVybiB0LmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgdC5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgZSArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgY3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHQsIHRoaXMuSW4gPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyB1ciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLkplID0gdCwgdGhpcy5BbiA9IGUsIHRoaXMuSnQgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxuICAgICAqIHN0YXRlIGZvciBpdC5cbiAgICAgKi8gICAgUm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Bbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKS5uZXh0KChuID0+IHRoaXMuYm4odCwgZSwgbikpKTtcbiAgICB9XG4gICAgLyoqIEludGVybmFsIHZlcnNpb24gb2YgYGdldERvY3VtZW50YCB0aGF0IGFsbG93cyByZXVzaW5nIGJhdGNoZXMuICovICAgIGJuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmUuZ2V0RW50cnkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZS5hcHBseVRvTG9jYWxWaWV3KHQpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmlldyBvZiB0aGUgZ2l2ZW4gYGRvY3NgIGFzIHRoZXkgd291bGQgYXBwZWFyIGFmdGVyIGFwcGx5aW5nXG4gICAgLy8gYWxsIG11dGF0aW9ucyBpbiB0aGUgZ2l2ZW4gYGJhdGNoZXNgLlxuICAgIFBuKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHQuYXBwbHlUb0xvY2FsVmlldyhuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgaWRlbnRpZmllZCBieSBga2V5c2AuXG4gICAgICpcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXG4gICAgICogYmUgc3RvcmVkIGZvciB0aGF0IGtleSBpbiB0aGUgcmVzdWx0aW5nIHNldC5cbiAgICAgKi8gICAgdm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5KZS5nZXRFbnRyaWVzKHQsIGUpLm5leHQoKGUgPT4gdGhpcy5Wbih0LCBlKS5uZXh0KCgoKSA9PiBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbG9jYWwgdmlldyB0aGUgZ2l2ZW4gYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzXG4gICAgICogZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICovICAgIFZuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpLm5leHQoKHQgPT4gdGhpcy5QbihlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHZpZXcgb2YgYWxsIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXG4gICAgICogQHBhcmFtIHNpbmNlUmVhZFRpbWUgLSBJZiBub3Qgc2V0IHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcmV0dXJuIG9ubHlcbiAgICAgKiAgICAgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHJlYWQgc2luY2UgdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIChleGNsdXNpdmUpLlxuICAgICAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBEdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgfShlKSA/IHRoaXMuU24odCwgZS5wYXRoKSA6IEFlKGUpID8gdGhpcy5Ebih0LCBlLCBuKSA6IHRoaXMuQ24odCwgZSwgbik7XG4gICAgfVxuICAgIFNuKHQsIGUpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLlJuKHQsIG5ldyBEdChlKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IFBuKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoZSA9IGUuaW5zZXJ0KHQua2V5LCB0KSksIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRG4odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBpID0gUG4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnQuZ2V0Q29sbGVjdGlvblBhcmVudHModCwgcykubmV4dCgociA9PiB6cy5mb3JFYWNoKHIsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBtZShlLCBcbiAgICAgICAgICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovIChlLCByLmNoaWxkKHMpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkNuKHQsIG8sIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKSkpO1xuICAgIH1cbiAgICBDbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IHMsIGk7XG4gICAgICAgIHJldHVybiB0aGlzLkplLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgobiA9PiAocyA9IG4sIHRoaXMuQW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIFxuICAgICAgICB0aGlzLk5uKHQsIGksIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgaSkgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUua2V5O1xuICAgICAgICAgICAgICAgIGxldCBpID0gcy5nZXQobik7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSBpICYmIChcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaW52YWxpZCBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgb24gdG9wIG9mXG4gICAgICAgICAgICAgICAgaSA9IEd0Lm5ld0ludmFsaWREb2N1bWVudChuKSwgcyA9IHMuaW5zZXJ0KG4sIGkpKSwgZW4oZSwgaSwgdC5sb2NhbFdyaXRlVGltZSksIGkuaXNGb3VuZERvY3VtZW50KCkgfHwgKHMgPSBzLnJlbW92ZShuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSkpKS5uZXh0KCgoKSA9PiAoXG4gICAgICAgIC8vIEZpbmFsbHksIGZpbHRlciBvdXQgYW55IGRvY3VtZW50cyB0aGF0IGRvbid0IGFjdHVhbGx5IG1hdGNoXG4gICAgICAgIC8vIHRoZSBxdWVyeS5cbiAgICAgICAgcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgRGUoZSwgbikgfHwgKHMgPSBzLnJlbW92ZSh0KSk7XG4gICAgICAgIH0pKSwgcykpKTtcbiAgICB9XG4gICAgTm4odCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IERuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIGUgaW5zdGFuY2VvZiBhbiAmJiBudWxsID09PSBuLmdldChlLmtleSkgJiYgKHMgPSBzLmFkZChlLmtleSkpO1xuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIHJldHVybiB0aGlzLkplLmdldEVudHJpZXModCwgcykubmV4dCgodCA9PiAodC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuaW5zZXJ0KHQsIGUpKTtcbiAgICAgICAgfSkpLCBpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqLyBjbGFzcyBociB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlLCB0aGlzLmtuID0gbiwgdGhpcy54biA9IHM7XG4gICAgfVxuICAgIHN0YXRpYyAkbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gRG4oKSwgcyA9IERuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmRvY0NoYW5nZXMpIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgIG4gPSBuLmFkZCh0LmRvYy5rZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICBzID0gcy5hZGQodC5kb2Mua2V5KTtcbiAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGhyKHQsIGUuZnJvbUNhY2hlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcXVlcnkgZW5naW5lIHRoYXQgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXQgZG9jdW1lbnQgbWFwcGluZyBpbiB0aGVcbiAqIFF1ZXJ5Q2FjaGUuIFF1ZXJ5IGV4ZWN1dGlvbiBpcyBvcHRpbWl6ZWQgYnkgb25seSByZWFkaW5nIHRoZSBkb2N1bWVudHMgdGhhdFxuICogcHJldmlvdXNseSBtYXRjaGVkIGEgcXVlcnkgcGx1cyBhbnkgZG9jdW1lbnRzIHRoYXQgd2VyZSBlZGl0ZWQgYWZ0ZXIgdGhlXG4gKiBxdWVyeSB3YXMgbGFzdCBsaXN0ZW5lZCB0by5cbiAqXG4gKiBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVuIHRoaXMgb3B0aW1pemF0aW9uIGlzIG5vdCBndWFyYW50ZWVkIHRvIHByb2R1Y2VcbiAqIHRoZSBzYW1lIHJlc3VsdHMgYXMgZnVsbCBjb2xsZWN0aW9uIHNjYW5zLiBJbiB0aGVzZSBjYXNlcywgcXVlcnlcbiAqIHByb2Nlc3NpbmcgZmFsbHMgYmFjayB0byBmdWxsIHNjYW5zLiBUaGVzZSBjYXNlcyBhcmU6XG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBwcmV2aW91c2x5IG5vIGxvbmdlclxuICogICBtYXRjaGVzIHRoZSBxdWVyeS5cbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCBlZGl0IG1heSBjYXVzZSB0aGUgZG9jdW1lbnQgdG8gc29ydCBiZWxvd1xuICogICBhbm90aGVyIGRvY3VtZW50IHRoYXQgaXMgaW4gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIC0gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBDVVJSRU5UIG9yIGZyZWUgb2YgbGltYm8gZG9jdW1lbnRzLlxuICovIGNsYXNzIGxyIHtcbiAgICAvKiogU2V0cyB0aGUgZG9jdW1lbnQgdmlldyB0byBxdWVyeSBhZ2FpbnN0LiAqL1xuICAgIE9uKHQpIHtcbiAgICAgICAgdGhpcy5GbiA9IHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSB0LmxpbWl0ICYmIG51bGwgPT0gdC5zdGFydEF0ICYmIG51bGwgPT0gdC5lbmRBdCAmJiAoMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xuICAgICAgICB9KGUpIHx8IG4uaXNFcXVhbCh1dC5taW4oKSkgPyB0aGlzLk1uKHQsIGUpIDogdGhpcy5Gbi52bih0LCBzKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLkxuKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIChwZShlKSB8fCBUZShlKSkgJiYgdGhpcy5CbihlLmxpbWl0VHlwZSwgciwgcywgbikgPyB0aGlzLk1uKHQsIGUpIDogKHgoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBPKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCBuLnRvU3RyaW5nKCksIFNlKGUpKSwgXG4gICAgICAgICAgICB0aGlzLkZuLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgodCA9PiAoXG4gICAgICAgICAgICAvLyBXZSBtZXJnZSBgcHJldmlvdXNSZXN1bHRzYCBpbnRvIGB1cGRhdGVSZXN1bHRzYCwgc2luY2VcbiAgICAgICAgICAgIC8vIGB1cGRhdGVSZXN1bHRzYCBpcyBhbHJlYWR5IGEgRG9jdW1lbnRNYXAuIElmIGEgZG9jdW1lbnQgaXNcbiAgICAgICAgICAgIC8vIGNvbnRhaW5lZCBpbiBib3RoIGxpc3RzLCB0aGVuIGl0cyBjb250ZW50cyBhcmUgdGhlIHNhbWUuXG4gICAgICAgICAgICByLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLmtleSwgZSk7XG4gICAgICAgICAgICB9KSksIHQpKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgTG4odCwgZSkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgRW4oQ2UodCkpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcykgPT4ge1xuICAgICAgICAgICAgRGUodCwgcykgJiYgKG4gPSBuLmFkZChzKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICBCbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIGlmIChuLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdCA/IGUubGFzdCgpIDogZS5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhzKSA+IDApO1xuICAgIH1cbiAgICBNbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB4KCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgTyhcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgU2UoZSkpLCBcbiAgICAgICAgdGhpcy5Gbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIHV0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgZnIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLlVuID0gZSwgdGhpcy5rID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xbiA9IG5ldyB5bihydCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLktuID0gbmV3IHppKCh0ID0+IEp0KHQpKSwgWHQpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZWFkIHRpbWUgb2YgdGhlIGxhc3QgZW50cnkgcHJvY2Vzc2VkIGJ5IGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmpuID0gdXQubWluKCksIHRoaXMuQW4gPSB0LmdldE11dGF0aW9uUXVldWUobiksIHRoaXMuUW4gPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuSGUgPSB0LmdldFRhcmdldENhY2hlKCksIHRoaXMuV24gPSBuZXcgdXIodGhpcy5RbiwgdGhpcy5BbiwgdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSksIFxuICAgICAgICB0aGlzLlllID0gdC5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLlVuLk9uKHRoaXMuV24pO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdC5jb2xsZWN0KGUsIHRoaXMucW4pKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcihcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbnQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gbmV3IGZyKHQsIGUsIG4sIHMpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIHdyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICBsZXQgcyA9IG4uQW4sIGkgPSBuLlduO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLkFuLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KS5uZXh0KChvID0+IChyID0gbywgcyA9IG4ucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShlKSwgXG4gICAgICAgIC8vIFJlY3JlYXRlIG91ciBMb2NhbERvY3VtZW50c1ZpZXcgdXNpbmcgdGhlIG5ld1xuICAgICAgICAvLyBNdXRhdGlvblF1ZXVlLlxuICAgICAgICBpID0gbmV3IHVyKG4uUW4sIHMsIG4ucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpLCBzLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBEbigpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHtcbiAgICAgICAgICAgICAgICBuLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgIHMucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS52bih0LCBvKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgR246IHQsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBuLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHNcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIG4uQW4gPSBzLCBuLlduID0gaSwgbi5Vbi5PbihuLlduKSwgcjtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIF9yKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLlFuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IHpzLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBVKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICBzLmFkZEVudHJ5KGUsIG4uY29tbWl0VmVyc2lvbikpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiB0LkFuLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCB0LCBlLCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5Bbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uV24udm4odCwgcykpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBtcih0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuSGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gZ3IodCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpLCBzID0gZS5zbmFwc2hvdFZlcnNpb247XG4gICAgbGV0IGkgPSBuLnFuO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgcmVtb3RlIGV2ZW50XCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gbi5Rbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXG4gICAgICAgICAgICAgICAgaSA9IG4ucW47XG4gICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChyLCBhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjID0gaS5nZXQoYSk7XG4gICAgICAgICAgICBpZiAoIWMpIHJldHVybjtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobi5IZS5yZW1vdmVNYXRjaGluZ0tleXModCwgci5yZW1vdmVkRG9jdW1lbnRzLCBhKS5uZXh0KCgoKSA9PiBuLkhlLmFkZE1hdGNoaW5nS2V5cyh0LCByLmFkZGVkRG9jdW1lbnRzLCBhKSkpKTtcbiAgICAgICAgICAgIGxldCB1ID0gYy53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgZS50YXJnZXRNaXNtYXRjaGVzLmhhcyhhKSA/IHUgPSB1LndpdGhSZXN1bWVUb2tlbihwdC5FTVBUWV9CWVRFX1NUUklORywgdXQubWluKCkpLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHV0Lm1pbigpKSA6IHIucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodSA9IHUud2l0aFJlc3VtZVRva2VuKHIucmVzdW1lVG9rZW4sIHMpKSwgXG4gICAgICAgICAgICBpID0gaS5pbnNlcnQoYSwgdSksIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXJnZXQgZGF0YSBpZiB0aGVyZSBhcmUgdGFyZ2V0IGNoYW5nZXMgKG9yIGlmXG4gICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG5ld1RhcmdldERhdGEgc2hvdWxkIGJlIHBlcnNpc3RlZCBkdXJpbmcgYW4gdXBkYXRlIG9mXG4gKiBhbiBhY3RpdmUgdGFyZ2V0LiBUYXJnZXREYXRhIHNob3VsZCBhbHdheXMgYmUgcGVyc2lzdGVkIHdoZW4gYSB0YXJnZXQgaXNcbiAqIGJlaW5nIHJlbGVhc2VkIGFuZCBzaG91bGQgbm90IGNhbGwgdGhpcyBmdW5jdGlvbi5cbiAqXG4gKiBXaGlsZSB0aGUgdGFyZ2V0IGlzIGFjdGl2ZSwgVGFyZ2V0RGF0YSB1cGRhdGVzIGNhbiBiZSBvbWl0dGVkIHdoZW4gbm90aGluZ1xuICogYWJvdXQgdGhlIHRhcmdldCBoYXMgY2hhbmdlZCBleGNlcHQgbWV0YWRhdGEgbGlrZSB0aGUgcmVzdW1lIHRva2VuIG9yXG4gKiBzbmFwc2hvdCB2ZXJzaW9uLiBPY2Nhc2lvbmFsbHkgaXQncyB3b3J0aCB0aGUgZXh0cmEgd3JpdGUgdG8gcHJldmVudCB0aGVzZVxuICogdmFsdWVzIGZyb20gZ2V0dGluZyB0b28gc3RhbGUgYWZ0ZXIgYSBjcmFzaCwgYnV0IHRoaXMgZG9lc24ndCBoYXZlIHRvIGJlXG4gKiB0b28gZnJlcXVlbnQuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcmVzdW1lIHRva2VuIGNoYW5nZXMgdG8gYmUgYnVmZmVyZWQgaW5kZWZpbml0ZWx5LiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGJlIHJlYXNvbmFibHkgdXAtdG8tZGF0ZSBhZnRlciBhIGNyYXNoIGFuZCBhdm9pZHMgbmVlZGluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAvLyB3ZSBtYXkgbm90IGdldCB0aW1lIHRvIGRvIGFueXRoaW5nIGludGVyZXN0aW5nIHdoaWxlIHRoZSBjdXJyZW50IHRhYiBpc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC0gdC5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSA+PSAzZTgpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgaWYgdGhlIG9ubHkgdGhpbmcgdGhhdCBoYXMgY2hhbmdlZCBhYm91dCBhIHRhcmdldCBpcyBpdHMgcmVzdW1lXG4gICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgIC8vIGluLW1lbW9yeSB2aWV3IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRhcmdldHMgd2hpY2ggaW5jbHVkZXMgdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAvLyByZXN1bWUgdG9rZW4sIHNvIHN0cmVhbSBmYWlsdXJlIG9yIHVzZXIgY2hhbmdlcyB3aWxsIHN0aWxsIHVzZSBhblxuICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hZGRlZERvY3VtZW50cy5zaXplICsgbi5tb2RpZmllZERvY3VtZW50cy5zaXplICsgbi5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBOb3RpZmllcyBsb2NhbCBzdG9yZSBvZiB0aGUgY2hhbmdlZCB2aWV3cyB0byBsb2NhbGx5IHBpbiBkb2N1bWVudHMuXG4gKi8gKGMsIHUsIHIpICYmIG8ucHVzaChuLkhlLnVwZGF0ZVRhcmdldERhdGEodCwgdSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBhID0gUm4oKTtcbiAgICAgICAgLy8gSEFDSzogVGhlIG9ubHkgcmVhc29uIHdlIGFsbG93IGEgbnVsbCBzbmFwc2hvdCB2ZXJzaW9uIGlzIHNvIHRoYXQgd2VcbiAgICAgICAgLy8gY2FuIHN5bnRoZXNpemUgcmVtb3RlIGV2ZW50cyB3aGVuIHdlIGdldCBwZXJtaXNzaW9uIGRlbmllZCBlcnJvcnMgd2hpbGVcbiAgICAgICAgLy8gdHJ5aW5nIHRvIHJlc29sdmUgdGhlIHN0YXRlIG9mIGEgbG9jYWxseSBjYWNoZWQgZG9jdW1lbnQgdGhhdCBpcyBpblxuICAgICAgICAvLyBsaW1iby5cbiAgICAgICAgaWYgKGUuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBlLnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHMpICYmIG8ucHVzaChuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgcykpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsIHRoZSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cbiAgICAgICAgby5wdXNoKHlyKHQsIHIsIGUuZG9jdW1lbnRVcGRhdGVzLCBzLCB2b2lkIDApLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgYSA9IHQ7XG4gICAgICAgIH0pKSksICFzLmlzRXF1YWwodXQubWluKCkpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5IZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpLm5leHQoKGUgPT4gbi5IZS5zZXRUYXJnZXRzTWV0YWRhdGEodCwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIsIHMpKSk7XG4gICAgICAgICAgICBvLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHpzLndhaXRGb3IobykubmV4dCgoKCkgPT4gci5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4uV24uVm4odCwgYSkpKS5uZXh0KCgoKSA9PiBhKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4gKG4ucW4gPSBpLCB0KSkpO1xufVxuXG4vKipcbiAqIFBvcHVsYXRlcyBkb2N1bWVudCBjaGFuZ2UgYnVmZmVyIHdpdGggZG9jdW1lbnRzIGZyb20gYmFja2VuZCBvciBhIGJ1bmRsZS5cbiAqIFJldHVybnMgdGhlIGRvY3VtZW50IGNoYW5nZXMgcmVzdWx0aW5nIGZyb20gYXBwbHlpbmcgdGhvc2UgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUcmFuc2FjdGlvbiB0byB1c2UgdG8gcmVhZCBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50QnVmZmVyIC0gRG9jdW1lbnQgYnVmZmVyIHRvIGNvbGxlY3QgdGhlIHJlc3VsdGVkIGNoYW5nZXMgdG8gYmVcbiAqICAgICAgICBhcHBsaWVkIHRvIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIGJlIGFwcGxpZWQuXG4gKiBAcGFyYW0gZ2xvYmFsVmVyc2lvbiAtIEEgYFNuYXBzaG90VmVyc2lvbmAgcmVwcmVzZW50aW5nIHRoZSByZWFkIHRpbWUgaWYgYWxsXG4gKiAgICAgICAgZG9jdW1lbnRzIGhhdmUgdGhlIHNhbWUgcmVhZCB0aW1lLlxuICogQHBhcmFtIGRvY3VtZW50VmVyc2lvbnMgLSBBIERvY3VtZW50S2V5LXRvLVNuYXBzaG90VmVyc2lvbiBtYXAgaWYgZG9jdW1lbnRzXG4gKiAgICAgICAgaGF2ZSB0aGVpciBvd24gcmVhZCB0aW1lLlxuICpcbiAqIE5vdGU6IHRoaXMgZnVuY3Rpb24gd2lsbCB1c2UgYGRvY3VtZW50VmVyc2lvbnNgIGlmIGl0IGlzIGRlZmluZWQ7XG4gKiB3aGVuIGl0IGlzIG5vdCBkZWZpbmVkLCByZXNvcnRzIHRvIGBnbG9iYWxWZXJzaW9uYC5cbiAqLyBmdW5jdGlvbiB5cih0LCBlLCBuLCBzLCBcbi8vIFRPRE8od3VhbmR5KTogV2UgY291bGQgYWRkIGByZWFkVGltZWAgdG8gTWF5YmVEb2N1bWVudCBpbnN0ZWFkIHRvIHJlbW92ZVxuLy8gdGhpcyBwYXJhbWV0ZXIuXG5pKSB7XG4gICAgbGV0IHIgPSBEbigpO1xuICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4gciA9IHIuYWRkKHQpKSksIGUuZ2V0RW50cmllcyh0LCByKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgbGV0IHIgPSBSbigpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IHQuZ2V0KG4pLCBjID0gKG51bGwgPT0gaSA/IHZvaWQgMCA6IGkuZ2V0KG4pKSB8fCBzO1xuICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHJlamVjdGVkIGxpbWJvIHJlc29sdXRpb25zICh3aGljaCBmYWJyaWNhdGVcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXG4gICAgICAgICAgICAvLyBjYWNoZS5cbiAgICAgICAgICAgIG8uaXNOb0RvY3VtZW50KCkgJiYgby52ZXJzaW9uLmlzRXF1YWwodXQubWluKCkpID8gKFxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkgYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXG4gICAgICAgICAgICAvLyBldmVudHMuIFdlIHJlbW92ZSB0aGVzZSBkb2N1bWVudHMgZnJvbSBjYWNoZSBzaW5jZSB3ZSBsb3N0XG4gICAgICAgICAgICAvLyBhY2Nlc3MuXG4gICAgICAgICAgICBlLnJlbW92ZUVudHJ5KG4sIGMpLCByID0gci5pbnNlcnQobiwgbykpIDogIWEuaXNWYWxpZERvY3VtZW50KCkgfHwgby52ZXJzaW9uLmNvbXBhcmVUbyhhLnZlcnNpb24pID4gMCB8fCAwID09PSBvLnZlcnNpb24uY29tcGFyZVRvKGEudmVyc2lvbikgJiYgYS5oYXNQZW5kaW5nV3JpdGVzID8gKGUuYWRkRW50cnkobywgYyksIFxuICAgICAgICAgICAgciA9IHIuaW5zZXJ0KG4sIG8pKSA6IE8oXCJMb2NhbFN0b3JlXCIsIFwiSWdub3Jpbmcgb3V0ZGF0ZWQgd2F0Y2ggdXBkYXRlIGZvciBcIiwgbiwgXCIuIEN1cnJlbnQgdmVyc2lvbjpcIiwgYS52ZXJzaW9uLCBcIiBXYXRjaCB2ZXJzaW9uOlwiLCBvLnZlcnNpb24pO1xuICAgICAgICB9KSksIHI7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG11dGF0aW9uIGJhdGNoIGFmdGVyIHRoZSBwYXNzZWQgaW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWVcbiAqIG9yIG51bGwgaWYgZW1wdHkuXG4gKiBAcGFyYW0gYWZ0ZXJCYXRjaElkIC0gSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXG4gKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXG4gKi9cbmZ1bmN0aW9uIHByKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXh0IG11dGF0aW9uIGJhdGNoXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gKHZvaWQgMCA9PT0gZSAmJiAoZSA9IC0xKSwgXG4gICAgbi5Bbi5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIERvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgb3IgbnVsbCBpZiBub3RcbiAqIGZvdW5kIC0gdXNlZCBmb3IgdGVzdGluZy5cbiAqL1xuLyoqXG4gKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXG4gKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXG4gKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxuICpcbiAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxuICogZm9yIHRoYXQgYFRhcmdldGAuXG4gKi9cbmZ1bmN0aW9uIFRyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gbi5IZS5nZXRUYXJnZXREYXRhKHQsIGUpLm5leHQoKGkgPT4gaSA/IChcbiAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXG4gICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxuICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xuICAgICAgICBzID0gaSwgenMucmVzb2x2ZShzKSkgOiBuLkhlLmFsbG9jYXRlVGFyZ2V0SWQodCkubmV4dCgoaSA9PiAocyA9IG5ldyBjaShlLCBpLCAwIC8qIExpc3RlbiAqLyAsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgXG4gICAgICAgIG4uSGUuYWRkVGFyZ2V0RGF0YSh0LCBzKS5uZXh0KCgoKSA9PiBzKSkpKSkpKTtcbiAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgIC8vIElmIE11bHRpLVRhYiBpcyBlbmFibGVkLCB0aGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgbWF5IGJlIG5ld2VyIHRoYW5cbiAgICAgICAgLy8gdGhlIGluLW1lbW9yeSBkYXRhXG4gICAgICAgIGNvbnN0IHMgPSBuLnFuLmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcmV0dXJuIChudWxsID09PSBzIHx8IHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhzLnNuYXBzaG90VmVyc2lvbikgPiAwKSAmJiAobi5xbiA9IG4ucW4uaW5zZXJ0KHQudGFyZ2V0SWQsIHQpLCBcbiAgICAgICAgbi5Lbi5zZXQoZSwgdC50YXJnZXRJZCkpLCB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XG4gKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuLyoqXG4gKiBVbnBpbnMgYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXG4gKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxuICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXG4gKlxuICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIEVyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSyh0KSwgaSA9IHMucW4uZ2V0KGUpLCByID0gbiA/IFwicmVhZHdyaXRlXCIgOiBcInJlYWR3cml0ZS1wcmltYXJ5XCI7XG4gICAgdHJ5IHtcbiAgICAgICAgbiB8fCBhd2FpdCBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVsZWFzZSB0YXJnZXRcIiwgciwgKHQgPT4gcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQodCwgaSkpKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGlmICghWnModCkpIHRocm93IHQ7XG4gICAgICAgIC8vIEFsbCBgcmVsZWFzZVRhcmdldGAgZG9lcyBpcyByZWNvcmQgdGhlIGZpbmFsIG1ldGFkYXRhIHN0YXRlIGZvciB0aGVcbiAgICAgICAgLy8gdGFyZ2V0LCBidXQgd2UndmUgYmVlbiByZWNvcmRpbmcgdGhpcyBwZXJpb2RpY2FsbHkgZHVyaW5nIHRhcmdldFxuICAgICAgICAvLyBhY3Rpdml0eS4gSWYgd2UgbG9zZSB0aGlzIHdyaXRlIHRoaXMgY291bGQgY2F1c2UgYSB2ZXJ5IHNsaWdodFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSBvcmRlciBvZiB0YXJnZXQgZGVsZXRpb24gZHVyaW5nIEdDLCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3QgZGVmaW5lIGV4YWN0IExSVSBzZW1hbnRpY3Mgc28gdGhpcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgICBPKFwiTG9jYWxTdG9yZVwiLCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHtlfTogJHt0fWApO1xuICAgIH1cbiAgICBzLnFuID0gcy5xbi5yZW1vdmUoZSksIHMuS24uZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gSXIodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBLKHQpO1xuICAgIGxldCBpID0gdXQubWluKCksIHIgPSBEbigpO1xuICAgIHJldHVybiBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRXhlY3V0ZSBxdWVyeVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEsodCksIGkgPSBzLktuLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gaSA/IHpzLnJlc29sdmUocy5xbi5nZXQoaSkpIDogcy5IZS5nZXRUYXJnZXREYXRhKGUsIG4pO1xuICAgIH0ocywgdCwgYmUoZSkpLm5leHQoKGUgPT4ge1xuICAgICAgICBpZiAoZSkgcmV0dXJuIGkgPSBlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHMuSGUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICByID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBzLlVuLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiA/IGkgOiB1dC5taW4oKSwgbiA/IHIgOiBEbigpKSkpLm5leHQoKHQgPT4gKHtcbiAgICAgICAgZG9jdW1lbnRzOiB0LFxuICAgICAgICB6bjogclxuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIEFyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KSwgcyA9IEsobi5IZSksIGkgPSBuLnFuLmdldChlKTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5FdCh0LCBlKS5uZXh0KCh0ID0+IHQgPyB0LnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBScih0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBLKHQpO1xuICAgICAgICBsZXQgaSA9IFJuKCksIHIgPSBmaShuKTtcbiAgICAgICAgY29uc3QgbyA9IFppKGUpLCBhID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChyLCAhMCk7XG4gICAgICAgIHJldHVybiBvLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBPcy5yZWFkVGltZUluZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IGFcbiAgICAgICAgfSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAvLyBVbmxpa2UgYGdldEVudHJ5KClgIGFuZCBvdGhlcnMsIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAgcGFyc2VzXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIGRpcmVjdGx5IHNpbmNlIHdlIHdhbnQgdG8ga2VlcCBzZW50aW5lbCBkZWxldGVzLlxuICAgICAgICAgICAgY29uc3QgbiA9IGhpKHMuaywgZSk7XG4gICAgICAgICAgICBpID0gaS5pbnNlcnQobi5rZXksIG4pLCByID0gZS5yZWFkVGltZTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh7XG4gICAgICAgICAgICBJbjogaSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBkaShyKVxuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgdGhlIHJlYWQgdGltZSBvZiB0aGUgbW9zdCByZWNlbnRseSByZWFkIGRvY3VtZW50IGluIHRoZSBjYWNoZSwgb3JcbiAqIFNuYXBzaG90VmVyc2lvbi5taW4oKSBpZiBub3QgYXZhaWxhYmxlLlxuICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAoZS5RbiwgdCwgZS5qbikpKS50aGVuKCgoe0luOiB0LCByZWFkVGltZTogbn0pID0+IChlLmpuID0gbiwgdCkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgbmV3ZXN0IGRvY3VtZW50IGNoYW5nZSBmcm9tIHBlcnNpc3RlbmNlIGFuZCBtb3ZlcyB0aGUgaW50ZXJuYWxcbiAqIHN5bmNocm9uaXphdGlvbiBtYXJrZXIgZm9yd2FyZCBzbyB0aGF0IGNhbGxzIHRvIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAqIG9ubHkgcmV0dXJuIGNoYW5nZXMgdGhhdCBoYXBwZW5lZCBhZnRlciBjbGllbnQgaW5pdGlhbGl6YXRpb24uXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBicih0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTeW5jaHJvbml6ZSBsYXN0IGRvY3VtZW50IGNoYW5nZSByZWFkIHRpbWVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBaaSh0KTtcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGV4aXN0aW5nIGVudHJpZXMsIHdlIHJldHVybiBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSB1dC5taW4oKTtcbiAgICAgICAgcmV0dXJuIGUuanQoe1xuICAgICAgICAgICAgaW5kZXg6IE9zLnJlYWRUaW1lSW5kZXgsXG4gICAgICAgICAgICByZXZlcnNlOiAhMFxuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGUucmVhZFRpbWUgJiYgKG4gPSBkaShlLnJlYWRUaW1lKSksIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH0odCkpKS50aGVuKCh0ID0+IHtcbiAgICAgICAgZS5qbiA9IHQ7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IHVzaW5nIHRoZSBnaXZlbiBidW5kbGUgbmFtZSwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvXG4gKiBob2xkIHRoZSBrZXlzIG9mIGFsbCBkb2N1bWVudHMgZnJvbSB0aGUgYnVuZGxlIGluIHF1ZXJ5LWRvY3VtZW50IG1hcHBpbmdzLlxuICogVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGxvYWRlZCBkb2N1bWVudHMgZG8gbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZFxuICogcmlnaHQgYXdheS5cbiAqL1xuLyoqXG4gKiBBcHBsaWVzIHRoZSBkb2N1bWVudHMgZnJvbSBhIGJ1bmRsZSB0byB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKVxuICogZG9jdW1lbnRzLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIFByKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gSyh0KTtcbiAgICBsZXQgciA9IERuKCksIG8gPSBSbigpLCBhID0gVm4oKTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICBjb25zdCBuID0gZS5Ibih0Lm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICB0LmRvY3VtZW50ICYmIChyID0gci5hZGQobikpLCBvID0gby5pbnNlcnQobiwgZS5Kbih0KSksIGEgPSBhLmluc2VydChuLCBlLlluKHQubWV0YWRhdGEucmVhZFRpbWUpKTtcbiAgICB9XG4gICAgY29uc3QgYyA9IGkuUW4ubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICB9KSwgdSA9IGF3YWl0IFRyKGksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXQgaXMgT0sgdGhhdCB0aGUgcGF0aCB1c2VkIGZvciB0aGUgcXVlcnkgaXMgbm90IHZhbGlkLCBiZWNhdXNlIHRoaXMgd2lsbFxuICAgICAgICAvLyBub3QgYmUgcmVhZCBhbmQgcXVlcmllZC5cbiAgICAgICAgcmV0dXJuIGJlKHllKHd0LmZyb21TdHJpbmcoYF9fYnVuZGxlX18vZG9jcy8ke3R9YCkpKTtcbiAgICB9KHMpKTtcbiAgICAvLyBBbGxvY2F0ZXMgYSB0YXJnZXQgdG8gaG9sZCBhbGwgZG9jdW1lbnQga2V5cyBmcm9tIHRoZSBidW5kbGUsIHN1Y2ggdGhhdFxuICAgIC8vIHRoZXkgd2lsbCBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkIHJpZ2h0IGF3YXkuXG4gICAgICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB5cih0LCBjLCBvLCB1dC5taW4oKSwgYSkubmV4dCgoZSA9PiAoYy5hcHBseSh0KSwgXG4gICAgZSkpKS5uZXh0KChlID0+IGkuSGUucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgdS50YXJnZXRJZCkubmV4dCgoKCkgPT4gaS5IZS5hZGRNYXRjaGluZ0tleXModCwgciwgdS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLlduLlZuKHQsIGUpKSkubmV4dCgoKCkgPT4gZSkpKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgdGhlIGdpdmVuIGJ1bmRsZSBoYXMgYWxyZWFkeVxuICogYmVlbiBsb2FkZWQgYW5kIHRoZSBjcmVhdGUgdGltZSBpcyBuZXdlciB0aGFuIHRoZSBjdXJyZW50IGxvYWRpbmcgYnVuZGxlLlxuICovXG4vKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgTmFtZWRRdWVyeWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHZyKHQsIGUsIG4gPSBEbigpKSB7XG4gICAgLy8gQWxsb2NhdGUgYSB0YXJnZXQgZm9yIHRoZSBuYW1lZCBxdWVyeSBzdWNoIHRoYXQgaXQgY2FuIGJlIHJlc3VtZWRcbiAgICAvLyBmcm9tIGFzc29jaWF0ZWQgcmVhZCB0aW1lIGlmIHVzZXJzIHVzZSBpdCB0byBsaXN0ZW4uXG4gICAgLy8gTk9URTogdGhpcyBhbHNvIG1lYW5zIGlmIG5vIGNvcnJlc3BvbmRpbmcgdGFyZ2V0IGV4aXN0cywgdGhlIG5ldyB0YXJnZXRcbiAgICAvLyB3aWxsIHJlbWFpbiBhY3RpdmUgYW5kIHdpbGwgbm90IGdldCBjb2xsZWN0ZWQsIHVubGVzcyB1c2VycyBoYXBwZW4gdG9cbiAgICAvLyB1bmxpc3RlbiB0aGUgcXVlcnkgc29tZWhvdy5cbiAgICBjb25zdCBzID0gYXdhaXQgVHIodCwgYmUocGkoZS5idW5kbGVkUXVlcnkpKSksIGkgPSBLKHQpO1xuICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBuYW1lZCBxdWVyeVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSB6bihlLnJlYWRUaW1lKTtcbiAgICAgICAgLy8gU2ltcGx5IHNhdmUgdGhlIHF1ZXJ5IGl0c2VsZiBpZiBpdCBpcyBvbGRlciB0aGFuIHdoYXQgdGhlIFNESyBhbHJlYWR5XG4gICAgICAgIC8vIGhhcy5cbiAgICAgICAgICAgICAgICBpZiAocy5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHIpID49IDApIHJldHVybiBpLlllLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgYmVjYXVzZSB0aGUgcXVlcnkgZnJvbSB0aGUgYnVuZGxlIGlzIG5ld2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBzLndpdGhSZXN1bWVUb2tlbihwdC5FTVBUWV9CWVRFX1NUUklORywgcik7XG4gICAgICAgIHJldHVybiBpLnFuID0gaS5xbi5pbnNlcnQoby50YXJnZXRJZCwgbyksIGkuSGUudXBkYXRlVGFyZ2V0RGF0YSh0LCBvKS5uZXh0KCgoKSA9PiBpLkhlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5IZS5hZGRNYXRjaGluZ0tleXModCwgbiwgcy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLlllLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBWciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmsgPSB0LCB0aGlzLlhuID0gbmV3IE1hcCwgdGhpcy5abiA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldEJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUodGhpcy5Ybi5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICAvKiogRGVjb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHByb3RvIGludG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgIHZhciBuO1xuICAgICAgICByZXR1cm4gdGhpcy5Ybi5zZXQoZS5pZCwge1xuICAgICAgICAgICAgaWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICB2ZXJzaW9uOiBuLnZlcnNpb24sXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiB6bihuLmNyZWF0ZVRpbWUpXG4gICAgICAgIH0pLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLlpuLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWm4uc2V0KGUubmFtZSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHBpKHQuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogem4odC5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxuICogKGVpdGhlciBhIHRhcmdldCBJRCBvciBiYXRjaCBJRCkuIEFzIHJlZmVyZW5jZXMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxuICogdGhlIHNldCBjb3JyZXNwb25kaW5nIGV2ZW50cyBhcmUgZW1pdHRlZCB0byBhIHJlZ2lzdGVyZWQgZ2FyYmFnZSBjb2xsZWN0b3IuXG4gKlxuICogRWFjaCByZWZlcmVuY2UgaXMgcmVwcmVzZW50ZWQgYnkgYSBEb2N1bWVudFJlZmVyZW5jZSBvYmplY3QuIEVhY2ggb2YgdGhlbVxuICogY29udGFpbnMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSByZWZlcmVuY2UuIFRoZXkgYXJlIGFsbFxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxuICogdGhlcmUncyBubyByZWZlcmVuY2VzIGluIHRoYXQgc2V0ICh0aGlzIGNhbiBiZSBlZmZpY2llbnRseSBjaGVja2VkIHRoYW5rcyB0b1xuICogc29ydGluZyBieSBrZXkpLlxuICpcbiAqIFJlZmVyZW5jZVNldCBhbHNvIGtlZXBzIGEgc2Vjb25kYXJ5IHNldCB0aGF0IGNvbnRhaW5zIHJlZmVyZW5jZXMgc29ydGVkIGJ5XG4gKiBJRHMuIFRoaXMgb25lIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgaW1wbGVtZW50IHJlbW92YWwgb2YgYWxsIHJlZmVyZW5jZXMgYnlcbiAqIHNvbWUgdGFyZ2V0IElELlxuICovIGNsYXNzIFNyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXG4gICAgICAgIHRoaXMudHMgPSBuZXcgRW4oRHIuZXMpLCBcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXG4gICAgICAgIHRoaXMubnMgPSBuZXcgRW4oRHIuc3MpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBhZGRSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IERyKHQsIGUpO1xuICAgICAgICB0aGlzLnRzID0gdGhpcy50cy5hZGQobiksIHRoaXMubnMgPSB0aGlzLm5zLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIHJzKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMuYWRkUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlKSB7XG4gICAgICAgIHRoaXMub3MobmV3IERyKHQsIGUpKTtcbiAgICB9XG4gICAgY3ModCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy5yZW1vdmVSZWZlcmVuY2UodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCByZWZlcmVuY2VzIHdpdGggYSBnaXZlbiBJRC4gQ2FsbHMgcmVtb3ZlUmVmKCkgZm9yIGVhY2gga2V5XG4gICAgICogcmVtb3ZlZC5cbiAgICAgKi8gICAgdXModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IER0KG5ldyB3dChbXSkpLCBuID0gbmV3IERyKGUsIHQpLCBzID0gbmV3IERyKGUsIHQgKyAxKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5ucy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5vcyh0KSwgaS5wdXNoKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBocygpIHtcbiAgICAgICAgdGhpcy50cy5mb3JFYWNoKCh0ID0+IHRoaXMub3ModCkpKTtcbiAgICB9XG4gICAgb3ModCkge1xuICAgICAgICB0aGlzLnRzID0gdGhpcy50cy5kZWxldGUodCksIHRoaXMubnMgPSB0aGlzLm5zLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgbHModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IER0KG5ldyB3dChbXSkpLCBuID0gbmV3IERyKGUsIHQpLCBzID0gbmV3IERyKGUsIHQgKyAxKTtcbiAgICAgICAgbGV0IGkgPSBEbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5ucy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRHIodCwgMCksIG4gPSB0aGlzLnRzLmZpcnN0QWZ0ZXJPckVxdWFsKGUpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiB0LmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgRHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLmZzID0gZTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi8gICAgc3RhdGljIGVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIER0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSB8fCBydCh0LmZzLCBlLmZzKTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi8gICAgc3RhdGljIHNzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHJ0KHQuZnMsIGUuZnMpIHx8IER0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIENyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSnQgPSB0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkFuID0gW10sIFxuICAgICAgICAvKiogTmV4dCB2YWx1ZSB0byB1c2Ugd2hlbiBhc3NpZ25pbmcgc2VxdWVudGlhbCBJRHMgdG8gZWFjaCBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgdGhpcy5kcyA9IDEsIFxuICAgICAgICAvKiogQW4gb3JkZXJlZCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgbXV0YXRpb25zIGJhdGNoIElEcy4gKi9cbiAgICAgICAgdGhpcy53cyA9IG5ldyBFbihEci5lcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSgwID09PSB0aGlzLkFuLmxlbmd0aCk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5kcztcbiAgICAgICAgdGhpcy5kcysrLCB0aGlzLkFuLmxlbmd0aCA+IDAgJiYgdGhpcy5Bblt0aGlzLkFuLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCByID0gbmV3IG9pKGksIGUsIG4sIHMpO1xuICAgICAgICB0aGlzLkFuLnB1c2gocik7XG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB0aGlzLndzID0gdGhpcy53cy5hZGQobmV3IERyKGUua2V5LCBpKSksIHRoaXMuSnQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZS5rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZShyKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHRoaXMuX3MoZSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IHRoaXMuZ3MobiksIGkgPSBzIDwgMCA/IDAgOiBzO1xuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLkFuLmxlbmd0aCA+IGkgPyB0aGlzLkFuW2ldIDogbnVsbCk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoKSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKDAgPT09IHRoaXMuQW4ubGVuZ3RoID8gLTEgOiB0aGlzLmRzIC0gMSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHRoaXMuQW4uc2xpY2UoKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBEcihlLCAwKSwgcyA9IG5ldyBEcihlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLndzLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5fcyh0LmZzKTtcbiAgICAgICAgICAgIGkucHVzaChlKTtcbiAgICAgICAgfSkpLCB6cy5yZXNvbHZlKGkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBFbihydCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBEcih0LCAwKSwgcyA9IG5ldyBEcih0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIGUsIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIG4gPSBuLmFkZCh0LmZzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB6cy5yZXNvbHZlKHRoaXMueXMobikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgcXVlcnkgcGF0aCBhcyBhIHByZWZpeCBmb3IgdGVzdGluZyBpZiBhIGRvY3VtZW50IG1hdGNoZXMgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxO1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBkb2N1bWVudCByZWZlcmVuY2UgZm9yIGFjdHVhbGx5IHNjYW5uaW5nIHRoZSBpbmRleC4gVW5saWtlXG4gICAgICAgIC8vIHRoZSBwcmVmaXggdGhlIGRvY3VtZW50IGtleSBpbiB0aGlzIHJlZmVyZW5jZSBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2ZcbiAgICAgICAgLy8gc2VnbWVudHMuIFRoZSBlbXB0eSBzZWdtZW50IGNhbiBiZSB1c2VkIGEgc3VmZml4IG9mIHRoZSBxdWVyeSBwYXRoXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgcHJlY2VkZXMgYWxsIG90aGVyIHNlZ21lbnRzIGluIGFuIG9yZGVyZWQgdHJhdmVyc2FsLlxuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIER0LmlzRG9jdW1lbnRLZXkoaSkgfHwgKGkgPSBpLmNoaWxkKFwiXCIpKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBEcihuZXcgRHQoaSksIDApO1xuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCBvID0gbmV3IEVuKHJ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMud3MuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmtleS5wYXRoO1xuICAgICAgICAgICAgcmV0dXJuICEhbi5pc1ByZWZpeE9mKGUpICYmIChcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnlcbiAgICAgICAgICAgIC8vIHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyBjYW4ndCBtYXRjaFxuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICBlLmxlbmd0aCA9PT0gcyAmJiAobyA9IG8uYWRkKHQuZnMpKSwgITApO1xuICAgICAgICB9KSwgciksIHpzLnJlc29sdmUodGhpcy55cyhvKSk7XG4gICAgfVxuICAgIHlzKHQpIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgIC8vIG11bHRpcGxlIG11dGF0aW9ucyBhZmZlY3RpbmcgdGhlIHNhbWUgZG9jdW1lbnQga2V5IGFyZSBhcHBsaWVkIGluIG9yZGVyLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX3ModCk7XG4gICAgICAgICAgICBudWxsICE9PSBuICYmIGUucHVzaChuKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgVSgwID09PSB0aGlzLnBzKGUuYmF0Y2hJZCwgXCJyZW1vdmVkXCIpKSwgdGhpcy5Bbi5zaGlmdCgpO1xuICAgICAgICBsZXQgbiA9IHRoaXMud3M7XG4gICAgICAgIHJldHVybiB6cy5mb3JFYWNoKGUubXV0YXRpb25zLCAocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IERyKHMua2V5LCBlLmJhdGNoSWQpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBuLmRlbGV0ZShpKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBzLmtleSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndzID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlZSh0KSB7XG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IERyKGUsIDApLCBzID0gdGhpcy53cy5maXJzdEFmdGVyT3JFcXVhbChuKTtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUoZS5pc0VxdWFsKHMgJiYgcy5rZXkpKTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Bbi5sZW5ndGgsIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZSBhbmQgYXNzZXJ0cyB0aGF0XG4gICAgICogdGhlIHJlc3VsdGluZyBpbmRleCBpcyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSBiYXRjaElkIHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBjYWxsZXIgaXMgZG9pbmcsIHBocmFzZWQgaW4gcGFzc2l2ZVxuICAgICAqIGZvcm0gKGUuZy4gXCJhY2tub3dsZWRnZWRcIiBpbiBhIHJvdXRpbmUgdGhhdCBhY2tub3dsZWRnZXMgYmF0Y2hlcykuXG4gICAgICovICAgIHBzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3ModCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUuIFRoaXMgb3BlcmF0aW9uXG4gICAgICogaXMgTygxKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wdXRlZCBpbmRleCBvZiB0aGUgYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZCwgYmFzZWQgb25cbiAgICAgKiB0aGUgc3RhdGUgb2YgdGhlIHF1ZXVlLiBOb3RlIHRoaXMgaW5kZXggY2FuIGJlIG5lZ2F0aXZlIGlmIHRoZSByZXF1ZXN0ZWRcbiAgICAgKiBiYXRjaElkIGhhcyBhbHJlYWR5IGJlZW4gcmVtdm9lZCBmcm9tIHRoZSBxdWV1ZSBvciBwYXN0IHRoZSBlbmQgb2YgdGhlXG4gICAgICogcXVldWUgaWYgdGhlIGJhdGNoSWQgaXMgbGFyZ2VyIHRoYW4gdGhlIGxhc3QgYWRkZWQgYmF0Y2guXG4gICAgICovICAgIGdzKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuQW4ubGVuZ3RoKSBcbiAgICAgICAgLy8gQXMgYW4gaW5kZXggdGhpcyBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlXG4gICAgICAgIHJldHVybiAwO1xuICAgICAgICAvLyBFeGFtaW5lIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgdG8gZmlndXJlIG91dCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZVxuICAgICAgICAvLyBiYXRjaElkIGFuZCBpbmRleGVzIGluIHRoZSBhcnJheS4gTm90ZSB0aGF0IHNpbmNlIHRoZSBxdWV1ZSBpcyBvcmRlcmVkXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcbiAgICAgICAgLy8gYmF0Y2hJZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdCAtIHRoaXMuQW5bMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgX3ModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5ncyh0KTtcbiAgICAgICAgaWYgKGUgPCAwIHx8IGUgPj0gdGhpcy5Bbi5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5BbltlXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3TWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqL1xuY2xhc3MgTnIge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICAgICAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICAgICAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5KdCA9IHQsIHRoaXMuVHMgPSBlLCBcbiAgICAgICAgLyoqIFVuZGVybHlpbmcgY2FjaGUgb2YgZG9jdW1lbnRzIGFuZCB0aGVpciByZWFkIHRpbWVzLiAqL1xuICAgICAgICB0aGlzLmRvY3MgPSBuZXcgeW4oRHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKiogU2l6ZSBvZiBhbGwgY2FjaGVkIGRvY3VtZW50cy4gKi9cbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUua2V5LCBpID0gdGhpcy5kb2NzLmdldChzKSwgciA9IGkgPyBpLnNpemUgOiAwLCBvID0gdGhpcy5UcyhlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQocywge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IGUubXV0YWJsZUNvcHkoKSxcbiAgICAgICAgICAgIHNpemU6IG8sXG4gICAgICAgICAgICByZWFkVGltZTogblxuICAgICAgICB9KSwgdGhpcy5zaXplICs9IG8gLSByLCB0aGlzLkp0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIHMucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZW50cnkgZnJvbSB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICBlICYmICh0aGlzLmRvY3MgPSB0aGlzLmRvY3MucmVtb3ZlKHQpLCB0aGlzLnNpemUgLT0gZS5zaXplKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kb2NzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUobiA/IG4uZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IEd0Lm5ld0ludmFsaWREb2N1bWVudChlKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IFJuKCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgZSA/IGUuZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IEd0Lm5ld0ludmFsaWREb2N1bWVudCh0KSk7XG4gICAgICAgIH0pKSwgenMucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gUm4oKTtcbiAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvdyBkb3duXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IER0KGUucGF0aC5jaGlsZChcIlwiKSksIHIgPSB0aGlzLmRvY3MuZ2V0SXRlcmF0b3JGcm9tKGkpO1xuICAgICAgICBmb3IgKDtyLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB7a2V5OiB0LCB2YWx1ZToge2RvY3VtZW50OiBpLCByZWFkVGltZTogb319ID0gci5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAoIWUucGF0aC5pc1ByZWZpeE9mKHQucGF0aCkpIGJyZWFrO1xuICAgICAgICAgICAgby5jb21wYXJlVG8obikgPD0gMCB8fCBEZShlLCBpKSAmJiAocyA9IHMuaW5zZXJ0KGkua2V5LCBpLm11dGFibGVDb3B5KCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4genMucmVzb2x2ZShzKTtcbiAgICB9XG4gICAgRXModCwgZSkge1xuICAgICAgICByZXR1cm4genMuZm9yRWFjaCh0aGlzLmRvY3MsICh0ID0+IGUodCkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcbiAgICAgICAgLy8gYSBzZXBhcmF0ZSBjaGFuZ2Vsb2cgYW5kIGRvZXMgbm90IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVtb3ZhbHMuXG4gICAgICAgIHJldHVybiBuZXcga3IodGhpcyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIGluZGV4TWFuYWdlciAtIEEgY2xhc3MgdGhhdCBtYW5hZ2VzIGNvbGxlY3Rpb24gZ3JvdXAgaW5kaWNlcy5cbiAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAqL1xuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlxuICovXG5jbGFzcyBrciBleHRlbmRzIEhpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuRGUgPSB0O1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXModCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuZG9jdW1lbnQuaXNWYWxpZERvY3VtZW50KCkgPyBlLnB1c2godGhpcy5EZS5hZGRFbnRyeSh0LCBzLmRvY3VtZW50LCB0aGlzLmdldFJlYWRUaW1lKG4pKSkgOiB0aGlzLkRlLnJlbW92ZUVudHJ5KG4pO1xuICAgICAgICB9KSksIHpzLndhaXRGb3IoZSk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkRlLmdldEVudHJ5KHQsIGUpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5EZS5nZXRFbnRyaWVzKHQsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgeHIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldCB0byB0aGUgZGF0YSBhYm91dCB0aGF0IHRhcmdldFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JcyA9IG5ldyB6aSgodCA9PiBKdCh0KSksIFh0KSwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzbmFwc2hvdCB2ZXJzaW9uLiAqL1xuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSB1dC5taW4oKSwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgSUQgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gMCwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBzZXF1ZW5jZSBudW1iZXIgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMuQXMgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgb3JkZXJlZCBiaWRpcmVjdGlvbmFsIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSByZW1vdGUgdGFyZ2V0XG4gICAgICAgICAqIElEcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUnMgPSBuZXcgU3IsIHRoaXMudGFyZ2V0Q291bnQgPSAwLCB0aGlzLmJzID0gT2kuaWUoKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLklzLmZvckVhY2goKCh0LCBuKSA9PiBlKG4pKSksIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiB6cy5yZXNvbHZlKHRoaXMuQXMpO1xuICAgIH1cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdGhpcy5icy5uZXh0KCksIHpzLnJlc29sdmUodGhpcy5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbiAmJiAodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbiksIGUgPiB0aGlzLkFzICYmICh0aGlzLkFzID0gZSksIFxuICAgICAgICB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGNlKHQpIHtcbiAgICAgICAgdGhpcy5Jcy5zZXQodC50YXJnZXQsIHQpO1xuICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgZSA+IHRoaXMuaGlnaGVzdFRhcmdldElkICYmICh0aGlzLmJzID0gbmV3IE9pKGUpLCB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IGUpLCB0LnNlcXVlbmNlTnVtYmVyID4gdGhpcy5BcyAmJiAodGhpcy5BcyA9IHQuc2VxdWVuY2VOdW1iZXIpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2UoZSksIHRoaXMudGFyZ2V0Q291bnQgKz0gMSwgenMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2UoZSksIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLklzLmRlbGV0ZShlLnRhcmdldCksIHRoaXMuUnMudXMoZS50YXJnZXRJZCksIHRoaXMudGFyZ2V0Q291bnQgLT0gMSwgXG4gICAgICAgIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Jcy5mb3JFYWNoKCgociwgbykgPT4ge1xuICAgICAgICAgICAgby5zZXF1ZW5jZU51bWJlciA8PSBlICYmIG51bGwgPT09IG4uZ2V0KG8udGFyZ2V0SWQpICYmICh0aGlzLklzLmRlbGV0ZShyKSwgaS5wdXNoKHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgby50YXJnZXRJZCkpLCBcbiAgICAgICAgICAgIHMrKyk7XG4gICAgICAgIH0pKSwgenMud2FpdEZvcihpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUodGhpcy50YXJnZXRDb3VudCk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Jcy5nZXQoZSkgfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIHpzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlJzLnJzKGUsIG4pLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuUnMuY3MoZSwgbik7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLCBpID0gW107XG4gICAgICAgIHJldHVybiBzICYmIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBpLnB1c2gocy5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSk7XG4gICAgICAgIH0pKSwgenMud2FpdEZvcihpKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Scy51cyhlKSwgenMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLlJzLmxzKGUpO1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4genMucmVzb2x2ZSh0aGlzLlJzLmNvbnRhaW5zS2V5KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWVtb3J5LWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgb25seSBpbiBSQU0gYW5kXG4gKiBub3QgcGVyc2lzdGVkIGFjcm9zcyBzZXNzaW9ucy5cbiAqL1xuY2xhc3MgJHIge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBhY2NlcHRzIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgYSByZWZlcmVuY2UgZGVsZWdhdGUuIFRoaXNcbiAgICAgKiBhbGxvd3MgYm90aCB0aGUgZGVsZWdhdGUgYW5kIHRoaXMgaW5zdGFuY2UgdG8gaGF2ZSBzdHJvbmcgcmVmZXJlbmNlcyB0b1xuICAgICAqIGVhY2ggb3RoZXIgd2l0aG91dCBoYXZpbmcgbnVsbGFibGUgZmllbGRzIHRoYXQgd291bGQgdGhlbiBuZWVkIHRvIGJlXG4gICAgICogY2hlY2tlZCBvciBhc3NlcnRlZCBvbiBldmVyeSBhY2Nlc3MuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLlBzID0ge30sIHRoaXMuQmUgPSBuZXcgbnQoMCksIHRoaXMuVWUgPSAhMSwgdGhpcy5VZSA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCh0aGlzKSwgXG4gICAgICAgIHRoaXMuSGUgPSBuZXcgeHIodGhpcyk7XG4gICAgICAgIHRoaXMuSnQgPSBuZXcgQWksIHRoaXMuSmUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5yKHQsIGUpO1xuICAgICAgICB9KHRoaXMuSnQsICh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUudnModCkpKSwgdGhpcy5rID0gbmV3IHVpKGUpLCB0aGlzLlllID0gbmV3IFZyKHRoaXMuayk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXG4gICAgICAgIHJldHVybiB0aGlzLlVlID0gITEsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVWU7XG4gICAgfVxuICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0TmV0d29ya0VuYWJsZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkp0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLlBzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IENyKHRoaXMuSnQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLlBzW3QudG9LZXkoKV0gPSBlKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZZTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBPKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgT3IodGhpcy5CZS5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5WcygpLCBuKHMpLm5leHQoKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5TcyhzKS5uZXh0KCgoKSA9PiB0KSkpKS50b1Byb21pc2UoKS50aGVuKCh0ID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgRHModCwgZSkge1xuICAgICAgICByZXR1cm4genMub3IoT2JqZWN0LnZhbHVlcyh0aGlzLlBzKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleSh0LCBlKSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIE9yIGV4dGVuZHMgR3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgRnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLkNzID0gbmV3IFNyLCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuTnMgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMga3ModCkge1xuICAgICAgICByZXR1cm4gbmV3IEZyKHQpO1xuICAgIH1cbiAgICBnZXQgeHMoKSB7XG4gICAgICAgIGlmICh0aGlzLk5zKSByZXR1cm4gdGhpcy5OcztcbiAgICAgICAgdGhyb3cgQigpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Dcy5hZGRSZWZlcmVuY2UobiwgZSksIHRoaXMueHMuZGVsZXRlKG4udG9TdHJpbmcoKSksIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ3MucmVtb3ZlUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnhzLmFkZChuLnRvU3RyaW5nKCkpLCB6cy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuYWRkKGUudG9TdHJpbmcoKSksIHpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5Dcy51cyhlLnRhcmdldElkKS5mb3JFYWNoKCh0ID0+IHRoaXMueHMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy54cy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKHQsIGUpKSk7XG4gICAgfVxuICAgIFZzKCkge1xuICAgICAgICB0aGlzLk5zID0gbmV3IFNldDtcbiAgICB9XG4gICAgU3ModCkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiB6cy5mb3JFYWNoKHRoaXMueHMsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBEdC5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgZS5yZW1vdmVFbnRyeShzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLk5zID0gbnVsbCwgZS5hcHBseSh0KSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IHRoaXMueHMuZGVsZXRlKGUudG9TdHJpbmcoKSkgOiB0aGlzLnhzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZzKHQpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgJHModCwgZSkge1xuICAgICAgICByZXR1cm4genMub3IoWyAoKSA9PiB6cy5yZXNvbHZlKHRoaXMuQ3MuY29udGFpbnNLZXkoZSkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuRHModCwgZSkgXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIE1yKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV9jbGllbnRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2Vycylcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxuXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxuLy8gY29udGFpbi5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBMcih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBgZmlyZXN0b3JlX211dGF0aW9uc18ke3R9XyR7bn1gO1xuICAgIHJldHVybiBlLmlzQXV0aGVudGljYXRlZCgpICYmIChzICs9IGBfJHtlLnVpZH1gKSwgcztcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIEJyKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV90YXJnZXRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgVXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgT3ModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBzICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHMuc3RhdGUpICYmICh2b2lkIDAgPT09IHMuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygcy5lcnJvcik7XG4gICAgICAgIHJldHVybiByICYmIHMuZXJyb3IgJiYgKHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5jb2RlLCBcbiAgICAgICAgciAmJiAoaSA9IG5ldyBRKHMuZXJyb3IuY29kZSwgcy5lcnJvci5tZXNzYWdlKSkpLCByID8gbmV3IFVyKHQsIGUsIHMuc3RhdGUsIGkpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7bn1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBGcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgcXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuc3RhdGUgPSBlLCB0aGlzLmVycm9yID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIE9zKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzLCBpID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAtMSAhPT0gWyBcIm5vdC1jdXJyZW50XCIsIFwiY3VycmVudFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKG4uc3RhdGUpICYmICh2b2lkIDAgPT09IG4uZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygbi5lcnJvcik7XG4gICAgICAgIHJldHVybiBpICYmIG4uZXJyb3IgJiYgKGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5jb2RlLCBcbiAgICAgICAgaSAmJiAocyA9IG5ldyBRKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IHFyKHQsIG4uc3RhdGUsIHMpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgRnMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXG4gKi8gY2xhc3MgS3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBPcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IE5uKCk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyBzICYmIHQgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrdCkgcyA9IFN0KG4uYWN0aXZlVGFyZ2V0SWRzW3RdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1t0XSk7XG4gICAgICAgIHJldHVybiBzID8gbmV3IEtyKHQsIGkpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MganIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIE9zKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIC0xICE9PSBbIFwiVW5rbm93blwiLCBcIk9ubGluZVwiLCBcIk9mZmxpbmVcIiBdLmluZGV4T2YoZS5vbmxpbmVTdGF0ZSkgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5jbGllbnRJZCA/IG5ldyBqcihlLmNsaWVudElkLCBlLm9ubGluZVN0YXRlKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcbiAqIHJlbW92ZWQuXG4gKlxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG5jbGFzcyBRciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gTm4oKTtcbiAgICB9XG4gICAgTXModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZCh0KTtcbiAgICB9XG4gICAgTHModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxuICAgICAqLyAgICBGcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cbiAqLyBjbGFzcyBXciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHQsIHRoaXMuRmUgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5CcyA9IHMsIHRoaXMuc3luY0VuZ2luZSA9IG51bGwsIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbCwgdGhpcy5VcyA9IHRoaXMucXMuYmluZCh0aGlzKSwgXG4gICAgICAgIHRoaXMuS3MgPSBuZXcgeW4ocnQpLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuanMgPSBbXTtcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xuICAgICAgICBjb25zdCByID0gbi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSwgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMuUXMgPSBNcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLkJzKSwgXG4gICAgICAgIHRoaXMuV3MgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuS3MgPSB0aGlzLktzLmluc2VydCh0aGlzLkJzLCBuZXcgUXIpLCB0aGlzLkdzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9jbGllbnRzXyR7cn1fKFteX10qKSRgKSwgXG4gICAgICAgIHRoaXMuenMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX211dGF0aW9uc18ke3J9XyhcXFxcZCspKD86XyguKikpPyRgKSwgdGhpcy5IcyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfdGFyZ2V0c18ke3J9XyhcXFxcZCspJGApLCBcbiAgICAgICAgdGhpcy5KcyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgcGxheXMgYXMgYSBldmVudCB0byBpbmRpY2F0ZSB0aGUgcmVtb3RlIGRvY3VtZW50c1xuICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQgZHVlIHRvIHNvbWUgc2Vjb25kYXJ5IHRhYnMgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgICAgLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4gICAgICAgIC8vICAgICBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF88cGVyc2lzdGVuY2VLZXk+XG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5ZcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5Vcyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIFB0KHQpIHtcbiAgICAgICAgcmV0dXJuICEoIXQgfHwgIXQubG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNsaWVudHMgdG8gYmFja2ZpbGwgdGhlIGRhdGEgaW5cbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnN5bmNFbmdpbmUuVG4oKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB0aGlzLkJzKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEl0ZW0oTXIodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gS3IuT3MoZSwgdCk7XG4gICAgICAgICAgICAgICAgbiAmJiAodGhpcy5LcyA9IHRoaXMuS3MuaW5zZXJ0KG4uY2xpZW50SWQsIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLlhzKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ubGluZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgaGFuZGxlclxuICAgICAgICAvLyBpZiBhcHBsaWNhYmxlLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5Kcyk7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5acyhlKTtcbiAgICAgICAgICAgIHQgJiYgdGhpcy50aSh0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5qcykgdGhpcy5xcyh0KTtcbiAgICAgICAgdGhpcy5qcyA9IFtdLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxuICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpLCB0aGlzLnN0YXJ0ZWQgPSAhMDtcbiAgICB9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLldzLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWkodGhpcy5Lcyk7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5Lcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpICYmIChlID0gITApO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIHRoaXMubmkodCwgXCJwZW5kaW5nXCIpO1xuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5uaSh0LCBlLCBuKSwgXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXG4gICAgICAgIHRoaXMuc2kodCk7XG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShCcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBxci5Pcyh0LCBuKTtcbiAgICAgICAgICAgICAgICBzICYmIChlID0gcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaWkuTXModCksIHRoaXMuWHMoKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuaWkuTHModCksIHRoaXMuWHMoKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWkuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKEJyKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucmkodCwgZSwgbik7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5zaSh0KTtcbiAgICAgICAgfSkpLCB0aGlzLmN1cnJlbnRVc2VyID0gdCwgbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ011dGF0aW9uKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5vaSh0KTtcbiAgICB9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKCkge1xuICAgICAgICB0aGlzLmFpKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuVXMpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5RcyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiBPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgTyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgIE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIHFzKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMuUXMpIHJldHVybiB2b2lkIEYoXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuRmUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5Hcy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmNpKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51aSh0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5oaShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLnVpKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuenMudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMubGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5maSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLkhzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmRpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMud2kodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuSnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWnMoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLnRpKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLldzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gbnQuSTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0KSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVShcIm51bWJlclwiID09IHR5cGVvZiBuKSwgZSA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ICE9PSBudC5JICYmIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyKHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLllzKSByZXR1cm4gdGhpcy5zeW5jRW5naW5lLl9pKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuanMucHVzaChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaWkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLktzLmdldCh0aGlzLkJzKTtcbiAgICB9XG4gICAgWHMoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlFzLCB0aGlzLmlpLkZzKCkpO1xuICAgIH1cbiAgICBuaSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgVXIodGhpcy5jdXJyZW50VXNlciwgdCwgZSwgbiksIGkgPSBMcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHMuRnMoKSk7XG4gICAgfVxuICAgIHNpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IExyKHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIHQpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oZSk7XG4gICAgfVxuICAgIG9pKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLkJzLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5KcywgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICByaSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBCcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSwgaSA9IG5ldyBxcih0LCBlLCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHMsIGkuRnMoKSk7XG4gICAgfVxuICAgIGFpKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5ZcywgXCJ2YWx1ZS1ub3QtdXNlZFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGtleSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zIG51bGwgaWYgdGhlIGtleSBkb2VzIG5vdFxuICAgICAqIG1hdGNoIHRoZSBleHBlY3RlZCBrZXkgZm9ybWF0LlxuICAgICAqLyAgICBjaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkdzLmV4ZWModCk7XG4gICAgICAgIHJldHVybiBlID8gZVsxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWUgY291bGQgbm90XG4gICAgICogYmUgcGFyc2VkLlxuICAgICAqLyAgICBoaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNpKHQpO1xuICAgICAgICByZXR1cm4gS3IuT3MobiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIG11dGF0aW9uIGJhdGNoIHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIGxpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuenMuZXhlYyh0KSwgcyA9IE51bWJlcihuWzFdKSwgaSA9IHZvaWQgMCAhPT0gblsyXSA/IG5bMl0gOiBudWxsO1xuICAgICAgICByZXR1cm4gVXIuT3MobmV3IEMoaSksIHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBxdWVyeSB0YXJnZXQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBkaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkhzLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSk7XG4gICAgICAgIHJldHVybiBxci5PcyhzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGFuIG9ubGluZSBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIFpzKHQpIHtcbiAgICAgICAgcmV0dXJuIGpyLk9zKHQpO1xuICAgIH1cbiAgICBhc3luYyBmaSh0KSB7XG4gICAgICAgIGlmICh0LnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5taSh0LmJhdGNoSWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgICAgICBPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYElnbm9yaW5nIG11dGF0aW9uIGZvciBub24tYWN0aXZlIHVzZXIgJHt0LnVzZXIudWlkfWApO1xuICAgIH1cbiAgICB3aSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuZ2kodC50YXJnZXRJZCwgdC5zdGF0ZSwgdC5lcnJvcik7XG4gICAgfVxuICAgIHVpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyB0aGlzLktzLmluc2VydCh0LCBlKSA6IHRoaXMuS3MucmVtb3ZlKHQpLCBzID0gdGhpcy5laSh0aGlzLktzKSwgaSA9IHRoaXMuZWkobiksIHIgPSBbXSwgbyA9IFtdO1xuICAgICAgICByZXR1cm4gaS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHMuaGFzKHQpIHx8IHIucHVzaCh0KTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5oYXModCkgfHwgby5wdXNoKHQpO1xuICAgICAgICB9KSksIHRoaXMuc3luY0VuZ2luZS55aShyLCBvKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLktzID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0aSh0KSB7XG4gICAgICAgIC8vIFdlIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCB0aGF0IHdyb3RlIHRoaXMgb25saW5lIHN0YXRlIGlzIHN0aWxsIGFjdGl2ZVxuICAgICAgICAvLyBieSBjb21wYXJpbmcgaXRzIGNsaWVudCBJRCB0byB0aGUgbGlzdCBvZiBjbGllbnRzIGtlcHQgYWN0aXZlIGluXG4gICAgICAgIC8vIEluZGV4ZWREYi4gSWYgYSBjbGllbnQgZG9lcyBub3QgdXBkYXRlIHRoZWlyIEluZGV4ZWREYiBjbGllbnQgc3RhdGVcbiAgICAgICAgLy8gd2l0aGluIDUgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgd2UgZG9uJ3QgZW1pdCBhbiBvbmxpbmVcbiAgICAgICAgLy8gc3RhdGUgZXZlbnQuXG4gICAgICAgIHRoaXMuS3MuZ2V0KHQuY2xpZW50SWQpICYmIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQub25saW5lU3RhdGUpO1xuICAgIH1cbiAgICBlaSh0KSB7XG4gICAgICAgIGxldCBlID0gTm4oKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgPSBlLnVuaW9uV2l0aChuLmFjdGl2ZVRhcmdldElkcyk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG59XG5cbmNsYXNzIEdyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5waSA9IG5ldyBRciwgdGhpcy5UaSA9IHt9LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLk1zKHQpLCB0aGlzLlRpW3RdIHx8IFwibm90LWN1cnJlbnRcIjtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuVGlbdF0gPSBlO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5waS5Mcyh0KTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuVGlbdF07XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuYWN0aXZlVGFyZ2V0SWRzO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpID0gbmV3IFFyLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7fVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCgpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB6ciB7XG4gICAgRWkodCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIEJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgQ29ubmVjdGl2aXR5TW9uaXRvci5cbiAqL1xuY2xhc3MgSHIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLklpID0gKCkgPT4gdGhpcy5BaSgpLCB0aGlzLlJpID0gKCkgPT4gdGhpcy5iaSgpLCB0aGlzLlBpID0gW10sIHRoaXMudmkoKTtcbiAgICB9XG4gICAgRWkodCkge1xuICAgICAgICB0aGlzLlBpLnB1c2godCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLklpKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuUmkpO1xuICAgIH1cbiAgICB2aSgpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5JaSksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLlJpKTtcbiAgICB9XG4gICAgQWkoKSB7XG4gICAgICAgIE8oXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5QaSkgdCgwIC8qIEFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIGJpKCkge1xuICAgICAgICBPKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5QaSkgdCgxIC8qIFVOQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgLy8gVE9ETyhjaGVuYnJpYW4pOiBDb25zaWRlciBwYXNzaW5nIGluIHdpbmRvdyBlaXRoZXIgaW50byB0aGlzIGNvbXBvbmVudCBvclxuICAgIC8vIGhlcmUgZm9yIHRlc3RpbmcgdmlhIEZha2VXaW5kb3cuXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXG4gICAgc3RhdGljIFB0KCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgdm9pZCAwICE9PSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEpyID0ge1xuICAgIEJhdGNoR2V0RG9jdW1lbnRzOiBcImJhdGNoR2V0XCIsXG4gICAgQ29tbWl0OiBcImNvbW1pdFwiLFxuICAgIFJ1blF1ZXJ5OiBcInJ1blF1ZXJ5XCJcbn07XG5cbi8qKlxuICogTWFwcyBSUEMgbmFtZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgUkVTVCBlbmRwb2ludCBuYW1lLlxuICpcbiAqIFdlIHVzZSBhcnJheSBub3RhdGlvbiB0byBhdm9pZCBtYW5nbGluZy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzaW1wbGUgaGVscGVyIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgU3RyZWFtIGludGVyZmFjZSB0b1xuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxuICogaW50ZXJmYWNlLiBUaGUgc3RyZWFtIGNhbGxiYWNrcyBhcmUgaW52b2tlZCB3aXRoIHRoZSBjYWxsT24uLi4gbWV0aG9kcy5cbiAqL1xuY2xhc3MgWXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5WaSA9IHQuVmksIHRoaXMuU2kgPSB0LlNpO1xuICAgIH1cbiAgICBEaSh0KSB7XG4gICAgICAgIHRoaXMuQ2kgPSB0O1xuICAgIH1cbiAgICBOaSh0KSB7XG4gICAgICAgIHRoaXMua2kgPSB0O1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICB0aGlzLnhpID0gdDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuU2koKTtcbiAgICB9XG4gICAgc2VuZCh0KSB7XG4gICAgICAgIHRoaXMuVmkodCk7XG4gICAgfVxuICAgICRpKCkge1xuICAgICAgICB0aGlzLkNpKCk7XG4gICAgfVxuICAgIE9pKHQpIHtcbiAgICAgICAgdGhpcy5raSh0KTtcbiAgICB9XG4gICAgRmkodCkge1xuICAgICAgICB0aGlzLnhpKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgWHIgZXh0ZW5kcyBcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIFJlc3QtYmFzZWQgY29ubmVjdGlvbnMgdG8gdGhlIGJhY2tlbmQgKFdlYkNoYW5uZWwgYW5kXG4gKiBIVFRQKS5cbiAqL1xuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSB0LmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IGUgPSB0LnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiO1xuICAgICAgICB0aGlzLk1pID0gZSArIFwiOi8vXCIgKyB0Lmhvc3QsIHRoaXMuTGkgPSBcInByb2plY3RzL1wiICsgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCArIFwiL2RhdGFiYXNlcy9cIiArIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSArIFwiL2RvY3VtZW50c1wiO1xuICAgIH1cbiAgICBCaSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLlVpKHQsIGUpO1xuICAgICAgICBPKFwiUmVzdENvbm5lY3Rpb25cIiwgXCJTZW5kaW5nOiBcIiwgciwgbik7XG4gICAgICAgIGNvbnN0IG8gPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMucWkobywgcywgaSksIHRoaXMuS2kodCwgciwgbywgbikudGhlbigodCA9PiAoTyhcIlJlc3RDb25uZWN0aW9uXCIsIFwiUmVjZWl2ZWQ6IFwiLCB0KSwgXG4gICAgICAgIHQpKSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgTShcIlJlc3RDb25uZWN0aW9uXCIsIGAke3R9IGZhaWxlZCB3aXRoIGVycm9yOiBgLCBlLCBcInVybDogXCIsIHIsIFwicmVxdWVzdDpcIiwgbiksIFxuICAgICAgICAgICAgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBqaSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxuICAgICAgICAvLyBjYW4ganVzdCB1c2UgdGhlIG5vcm1hbCBpbnZva2UoKSBtZXRob2QuXG4gICAgICAgIHJldHVybiB0aGlzLkJpKHQsIGUsIG4sIHMsIGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyB0aGUgaGVhZGVycyBmb3IgYSByZXF1ZXN0LCBhZGRpbmcgYW55IGF1dGhvcml6YXRpb24gdG9rZW4gaWZcbiAgICAgKiBwcmVzZW50IGFuZCBhbnkgYWRkaXRpb25hbCBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgKi8gICAgcWkodCwgZSwgbikge1xuICAgICAgICB0W1wiWC1Hb29nLUFwaS1DbGllbnRcIl0gPSBcImdsLWpzLyBmaXJlL1wiICsgTiwgXG4gICAgICAgIC8vIENvbnRlbnQtVHlwZTogdGV4dC9wbGFpbiB3aWxsIGF2b2lkIHByZWZsaWdodCByZXF1ZXN0cyB3aGljaCBtaWdodFxuICAgICAgICAvLyBtZXNzIHdpdGggQ09SUyBhbmQgcmVkaXJlY3RzIGJ5IHByb3hpZXMuIElmIHdlIGFkZCBjdXN0b20gaGVhZGVyc1xuICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoaXMgY29kZSB0byBwb3RlbnRpYWxseSB1c2UgdGhlICRodHRwT3ZlcndyaXRlXG4gICAgICAgIC8vIHBhcmFtZXRlciBzdXBwb3J0ZWQgYnkgRVNGIHRvIGF2b2lkIHRyaWdnZXJpbmcgcHJlZmxpZ2h0IHJlcXVlc3RzLlxuICAgICAgICB0W1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCIsIHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkICYmICh0W1wiWC1GaXJlYmFzZS1HTVBJRFwiXSA9IHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkKSwgXG4gICAgICAgIGUgJiYgZS5oZWFkZXJzLmZvckVhY2goKChlLCBuKSA9PiB0W25dID0gZSkpLCBuICYmIG4uaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKTtcbiAgICB9XG4gICAgVWkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSnJbdF07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLk1pfS92MS8ke2V9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHQuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0LmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIEtpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIG8ubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCBcIlhIUiByZWNlaXZlZDpcIiwgSlNPTi5zdHJpbmdpZnkoZSkpLCBpKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5USU1FT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgTyhcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIHRpbWVkIG91dCcpLCByKG5ldyBRKGouREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gby5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgby5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXRSZXNwb25zZUpzb24oKS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0LnN0YXR1cyAmJiB0Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhqKS5pbmRleE9mKGUpID49IDAgPyBlIDogai5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgUShlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcihuZXcgUShqLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIG8uZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICByKG5ldyBRKGouVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIEIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIE8oXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiBjb21wbGV0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYSA9IEpTT04uc3RyaW5naWZ5KHMpO1xuICAgICAgICAgICAgby5zZW5kKGUsIFwiUE9TVFwiLCBhLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgUWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWyB0aGlzLk1pLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIGkgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIHIgPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgbyA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKG8ueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCB0aGlzLnFpKG8uaW5pdE1lc3NhZ2VIZWFkZXJzLCBlLCBuKSwgXG4gICAgICAgIC8vIFNlbmRpbmcgdGhlIGN1c3RvbSBoZWFkZXJzIHdlIGp1c3QgYWRkZWQgdG8gcmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnNcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcbiAgICAgICAgLy8gcmVxdWVzdCBiZWNhdXNlIHRoZSBYSFIgd2lsbCBubyBsb25nZXIgbWVldCB0aGUgY3JpdGVyaWEgZm9yIGEgXCJzaW1wbGVcIlxuICAgICAgICAvLyBDT1JTIHJlcXVlc3Q6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcbiAgICAgICAgLy8gVGhlcmVmb3JlIHRvIGF2b2lkIHRoZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0IChhbiBleHRyYSBuZXR3b3JrXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW50byBhIHNwZWNpYWwgXCIkaHR0cEhlYWRlcnNcIiBxdWVyeVxuICAgICAgICAvLyBwYXJhbWV0ZXIsIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC4gVGhpcyBpc1xuICAgICAgICAvLyBmb3JtYWxseSBkZWZpbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvYjBlMTgxNWIxM2ZiOTJhNDZkN2M5YjNjMzBkZTVkNmEzOTZhMzI0NS9jbG9zdXJlL2dvb2cvbmV0L3JwYy9odHRwY29ycy5qcyNMMzJcbiAgICAgICAgLy8gVE9ETyhiLzE0NTYyNDc1Nik6IFRoZXJlIGlzIGEgYmFja2VuZCBidWcgd2hlcmUgJGh0dHBIZWFkZXJzIGlzbid0IHJlc3BlY3RlZCBpZiB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBkb2Vzbid0IGhhdmUgYW4gT3JpZ2luIGhlYWRlci4gU28gd2UgaGF2ZSB0byBleGNsdWRlIGEgZmV3IGJyb3dzZXIgZW52aXJvbm1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vIGtub3duIHRvIChzb21ldGltZXMpIG5vdCBpbmNsdWRlIGFuIE9yaWdpbi4gU2VlXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzE0OTEuXG4gICAgICAgIGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKSB8fCBpc0VsZWN0cm9uKCkgfHwgaXNJRSgpIHx8IGlzVVdQKCkgfHwgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHwgKG8uaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSA9IFwiJGh0dHBIZWFkZXJzXCIpO1xuICAgICAgICBjb25zdCBhID0gcy5qb2luKFwiXCIpO1xuICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCBcIkNyZWF0aW5nIFdlYkNoYW5uZWw6IFwiICsgYSwgbyk7XG4gICAgICAgIGNvbnN0IGMgPSBpLmNyZWF0ZVdlYkNoYW5uZWwoYSwgbyk7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgdSA9ICExLCBoID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgbCA9IG5ldyBZcih7XG4gICAgICAgICAgICBWaTogdCA9PiB7XG4gICAgICAgICAgICAgICAgaCA/IE8oXCJDb25uZWN0aW9uXCIsIFwiTm90IHNlbmRpbmcgYmVjYXVzZSBXZWJDaGFubmVsIGlzIGNsb3NlZDpcIiwgdCkgOiAodSB8fCAoTyhcIkNvbm5lY3Rpb25cIiwgXCJPcGVuaW5nIFdlYkNoYW5uZWwgdHJhbnNwb3J0LlwiKSwgXG4gICAgICAgICAgICAgICAgYy5vcGVuKCksIHUgPSAhMCksIE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCBzZW5kaW5nOlwiLCB0KSwgYy5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBTaTogKCkgPT4gYy5jbG9zZSgpXG4gICAgICAgIH0pLCB5ID0gKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIHQubGlzdGVuKGUsICh0ID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICBoIHx8IE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgb3BlbmVkLlwiKTtcbiAgICAgICAgfSkpLCB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGNsb3NlZFwiKSwgbC5PaSgpKTtcbiAgICAgICAgfSkpLCB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCAodCA9PiB7XG4gICAgICAgICAgICBoIHx8IChoID0gITAsIE0oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDpcIiwgdCksIGwuT2kobmV3IFEoai5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsICh0ID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCFoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBVKCEhbik7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4sIGkgPSBzLmVycm9yIHx8IChudWxsID09PSAoZSA9IHNbMF0pIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgICAgIE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZCBlcnJvcjpcIiwgaSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGkuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB3blt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiBnbihlKTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgbiA9IGkubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gai5JTlRFUk5BTCwgbiA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIGkubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBoID0gITAsIGwuT2kobmV3IFEoZSwgbikpLCBjLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZDpcIiwgbiksIGwuRmkobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgeShyLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyBPKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eVwiKSA6IHQuc3RhdCA9PT0gU3RhdC5OT1BST1hZICYmIE8oXCJDb25uZWN0aW9uXCIsIFwiRGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5XCIpO1xuICAgICAgICB9KSksIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IHdlIGNvdWxkL3Nob3VsZCB3YWl0IGZvciB0aGUgV2ViQ2hhbm5lbCBvcGVuZWQgZXZlbnQsXG4gICAgICAgICAgICAvLyBidXQgYmVjYXVzZSB3ZSB3YW50IHRvIHNlbmQgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgV2ViQ2hhbm5lbFxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXG4gICAgICAgICAgICAvLyB0aGVuIGRlbGF5IHRoZSBhY3R1YWwgb3BlbiB1bnRpbCB0aGUgZmlyc3QgbWVzc2FnZSBpcyBzZW50LlxuICAgICAgICAgICAgbC4kaSgpO1xuICAgICAgICB9KSwgMCksIGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEluaXRpYWxpemVzIHRoZSBXZWJDaGFubmVsQ29ubmVjdGlvbiBmb3IgdGhlIGJyb3dzZXIuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFRoZSBQbGF0Zm9ybSdzICd3aW5kb3cnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIFpyKCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiB0bygpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIGVvKHQpIHtcbiAgICByZXR1cm4gbmV3IGpuKHQsIC8qIHVzZVByb3RvM0pzb249ICovICEwKTtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBubyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCBzID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuRmUgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLldpID0gbiwgdGhpcy5HaSA9IHMsIHRoaXMuemkgPSBpLCB0aGlzLkhpID0gMCwgXG4gICAgICAgIHRoaXMuSmkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLllpID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5IaSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBYaSgpIHtcbiAgICAgICAgdGhpcy5IaSA9IHRoaXMuemk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgWmkodCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodGhpcy5IaSArIHRoaXMudHIoKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5ZaSksIHMgPSBNYXRoLm1heCgwLCBlIC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHMgPiAwICYmIE8oXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3N9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMuSGl9IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHtlfSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMuSmkgPSB0aGlzLkZlLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcywgKCgpID0+ICh0aGlzLllpID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHQoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy5IaSAqPSB0aGlzLkdpLCB0aGlzLkhpIDwgdGhpcy5XaSAmJiAodGhpcy5IaSA9IHRoaXMuV2kpLCB0aGlzLkhpID4gdGhpcy56aSAmJiAodGhpcy5IaSA9IHRoaXMuemkpO1xuICAgIH1cbiAgICBlcigpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5KaSAmJiAodGhpcy5KaS5za2lwRGVsYXkoKSwgdGhpcy5KaSA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuSmkgJiYgKHRoaXMuSmkuY2FuY2VsKCksIHRoaXMuSmkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIHRyKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLkhpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBzbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgYSkge1xuICAgICAgICB0aGlzLkZlID0gdCwgdGhpcy5uciA9IG4sIHRoaXMuc3IgPSBzLCB0aGlzLmlyID0gaSwgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlciA9IHIsIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciA9IG8sIHRoaXMubGlzdGVuZXIgPSBhLCB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucnIgPSAwLCB0aGlzLmFyID0gbnVsbCwgdGhpcy5jciA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy51ciA9IG5ldyBubyh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgaHIoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFN0YXJ0aW5nICovID09PSB0aGlzLnN0YXRlIHx8IDUgLyogQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLmxyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIGxyKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBPcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogSGVhbHRoeSAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICA0IC8qIEVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLmRyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5ocigpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBJbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICB3cigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMudXIucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIF9yKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLmxyKCkgJiYgbnVsbCA9PT0gdGhpcy5hciAmJiAodGhpcy5hciA9IHRoaXMuRmUuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5uciwgNmU0LCAoKCkgPT4gdGhpcy5tcigpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgZ3IodCkge1xuICAgICAgICB0aGlzLnlyKCksIHRoaXMuc3RyZWFtLnNlbmQodCk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMgbXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmxyKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgeXIoKSB7XG4gICAgICAgIHRoaXMuYXIgJiYgKHRoaXMuYXIuY2FuY2VsKCksIHRoaXMuYXIgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgcHIoKSB7XG4gICAgICAgIHRoaXMuY3IgJiYgKHRoaXMuY3IuY2FuY2VsKCksIHRoaXMuY3IgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UodCwgZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy55cigpLCB0aGlzLnByKCksIHRoaXMudXIuY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLnJyKyssIDQgLyogRXJyb3IgKi8gIT09IHQgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLnVyLnJlc2V0KCkgOiBlICYmIGUuY29kZSA9PT0gai5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIEYoZS50b1N0cmluZygpKSwgRihcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMudXIuWGkoKSkgOiBlICYmIGUuY29kZSA9PT0gai5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBIZWFsdGh5ICovICE9PSB0aGlzLnN0YXRlICYmIChcbiAgICAgICAgLy8gXCJ1bmF1dGhlbnRpY2F0ZWRcIiBlcnJvciBtZWFucyB0aGUgdG9rZW4gd2FzIHJlamVjdGVkLiBUaGlzIHNob3VsZCByYXJlbHlcbiAgICAgICAgLy8gaGFwcGVuIHNpbmNlIGJvdGggQXV0aCBhbmQgQXBwQ2hlY2sgZW5zdXJlIGEgc3VmZmljaWVudCBUVEwgd2hlbiB3ZVxuICAgICAgICAvLyByZXF1ZXN0IGEgdG9rZW4uIElmIGEgdXNlciBtYW51YWxseSByZXNldHMgdGhlaXIgc3lzdGVtIGNsb2NrIHRoaXMgY2FuXG4gICAgICAgIC8vIGZhaWwsIGhvd2V2ZXIuIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkIGdldCBhIENvZGUuVU5BVVRIRU5USUNBVEVEIGVycm9yXG4gICAgICAgIC8vIGJlZm9yZSB3ZSByZWNlaXZlZCB0aGUgZmlyc3QgbWVzc2FnZSBhbmQgd2UgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSB0b2tlblxuICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCB3ZSBmZXRjaCBhIG5ldyB0b2tlbi5cbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCkpLCBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGJlY2F1c2Ugd2UgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkIGluIGV2ZW50cy5cbiAgICAgICAgbnVsbCAhPT0gdGhpcy5zdHJlYW0gJiYgKHRoaXMuVHIoKSwgdGhpcy5zdHJlYW0uY2xvc2UoKSwgdGhpcy5zdHJlYW0gPSBudWxsKSwgXG4gICAgICAgIC8vIFRoaXMgc3RhdGUgbXVzdCBiZSBhc3NpZ25lZCBiZWZvcmUgY2FsbGluZyBvbkNsb3NlKCkgdG8gYWxsb3cgdGhlIGNhbGxiYWNrIHRvXG4gICAgICAgIC8vIGluaGliaXQgYmFja29mZiBvciBvdGhlcndpc2UgbWFuaXB1bGF0ZSB0aGUgc3RhdGUgaW4gaXRzIG5vbi1zdGFydGVkIHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gdCwgXG4gICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5saXN0ZW5lci5OaShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGNsZWFudXAgYmVmb3JlIHRoZSBzdHJlYW0gaXMgY2xvc2VkLlxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXG4gICAgICovICAgIFRyKCkge31cbiAgICBhdXRoKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBTdGFydGluZyAqLztcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuRXIodGhpcy5yciksIGUgPSB0aGlzLnJyO1xuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3QsIG5dKSA9PiB7XG4gICAgICAgICAgICAvLyBTdHJlYW0gY2FuIGJlIHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3IgYXV0aGVudGljYXRpb24uXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFdlIHJlYWxseSBzaG91bGQganVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZFxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXG4gICAgICAgICAgICAvLyBvZiB3b3JtcyB0aGF0IEkgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggaW4gdGhpcyBQUi5cbiAgICAgICAgICAgIHRoaXMucnIgPT09IGUgJiYgXG4gICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSdkIGhhdmUgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIGZvbGxvd2luZyBjYWxscyBhcmUgc2FmZSB0byBiZSBjYWxsZWQgb3V0c2lkZSB0aGVcbiAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgc2luY2UgdGhleSBkb24ndCBjaGFpbiBhc3luY2hyb25vdXMgY2FsbHNcbiAgICAgICAgICAgIHRoaXMuSXIodCwgbik7XG4gICAgICAgIH0pLCAoZSA9PiB7XG4gICAgICAgICAgICB0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBRKGouVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFyKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIElyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuRXIodGhpcy5ycik7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5Scih0LCBlKSwgdGhpcy5zdHJlYW0uRGkoKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+ICh0aGlzLnN0YXRlID0gMiAvKiBPcGVuICovICwgdGhpcy5jciA9IHRoaXMuRmUuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5zciwgMWU0LCAoKCkgPT4gKHRoaXMubHIoKSAmJiAodGhpcy5zdGF0ZSA9IDMgLyogSGVhbHRoeSAqLyksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSksIHRoaXMubGlzdGVuZXIuRGkoKSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5OaSgodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLkFyKHQpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0ub25NZXNzYWdlKCh0ID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMub25NZXNzYWdlKHQpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZHIoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSA1IC8qIEJhY2tvZmYgKi8gLCB0aGlzLnVyLlppKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXG4gICAgQXIodCkge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cbiAgICAgICAgcmV0dXJuIE8oXCJQZXJzaXN0ZW50U3RyZWFtXCIsIGBjbG9zZSB3aXRoIGVycm9yOiAke3R9YCksIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5jbG9zZSg0IC8qIEVycm9yICovICwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBcImRpc3BhdGNoZXJcIiBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb3BlcmF0aW9ucyBvbnRvIHRoZVxuICAgICAqIEFzeW5jUXVldWUgYnV0IG9ubHkgcnVucyB0aGVtIGlmIGNsb3NlQ291bnQgcmVtYWlucyB1bmNoYW5nZWQuIFRoaXMgYWxsb3dzXG4gICAgICogdXMgdG8gdHVybiBhdXRoIC8gc3RyZWFtIGNhbGxiYWNrcyBpbnRvIG5vLW9wcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZCAvXG4gICAgICogcmUtb3BlbmVkLCBldGMuXG4gICAgICovICAgIEVyKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5GZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnJyID09PSB0ID8gZSgpIDogKE8oXCJQZXJzaXN0ZW50U3RyZWFtXCIsIFwic3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci5cIiksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIExpc3RlbiBSUEMuXG4gKlxuICogT25jZSB0aGUgTGlzdGVuIHN0cmVhbSBoYXMgY2FsbGVkIHRoZSBvbk9wZW4oKSBsaXN0ZW5lciwgYW55IG51bWJlciBvZlxuICogbGlzdGVuKCkgYW5kIHVubGlzdGVuKCkgY2FsbHMgY2FuIGJlIG1hZGUgdG8gY29udHJvbCB3aGF0IGNoYW5nZXMgd2lsbCBiZVxuICogc2VudCBmcm9tIHRoZSBzZXJ2ZXIgZm9yIExpc3RlblJlc3BvbnNlcy5cbiAqLyBjbGFzcyBpbyBleHRlbmRzIHNvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibGlzdGVuX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBMaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwibGlzdGVuX3N0cmVhbV9pZGxlXCIgLyogTGlzdGVuU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBzLCByKSwgXG4gICAgICAgIHRoaXMuayA9IGk7XG4gICAgfVxuICAgIFJyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXIuUWkoXCJMaXN0ZW5cIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcbiAgICAgICAgdGhpcy51ci5yZXNldCgpO1xuICAgICAgICBjb25zdCBlID0gb3ModGhpcy5rLCB0KSwgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkpIHJldHVybiB1dC5taW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldElkcyAmJiBlLnRhcmdldElkcy5sZW5ndGggPyB1dC5taW4oKSA6IGUucmVhZFRpbWUgPyB6bihlLnJlYWRUaW1lKSA6IHV0Lm1pbigpO1xuICAgICAgICB9KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5icihlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cbiAgICAgKi8gICAgUHIodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBlcyh0aGlzLmspLCBlLmFkZFRhcmdldCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBadChzKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGhzKHQsIHMpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBscyh0LCBzKVxuICAgICAgICAgICAgfSwgbi50YXJnZXRJZCA9IGUudGFyZ2V0SWQsIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCA/IG4ucmVzdW1lVG9rZW4gPSBXbih0LCBlLnJlc3VtZVRva2VuKSA6IGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyh1dC5taW4oKSkgPiAwICYmIChcbiAgICAgICAgICAgIC8vIFRPRE8od3VhbmR5KTogQ29uc2lkZXIgcmVtb3ZpbmcgYWJvdmUgY2hlY2sgYmVjYXVzZSBpdCBpcyBtb3N0IGxpa2VseSB0cnVlLlxuICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAvLyBvZiBzZXJpYWxpemF0aW9uKS5cbiAgICAgICAgICAgIG4ucmVhZFRpbWUgPSBRbih0LCBlLnNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpKSksIG47XG4gICAgICAgIH0odGhpcy5rLCB0KTtcbiAgICAgICAgY29uc3QgbiA9IGRzKHRoaXMuaywgdCk7XG4gICAgICAgIG4gJiYgKGUubGFiZWxzID0gbiksIHRoaXMuZ3IoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgICAqIGdpdmVuIHRhcmdldElkLlxuICAgICAqLyAgICB2cih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IGVzKHRoaXMuayksIGUucmVtb3ZlVGFyZ2V0ID0gdCwgdGhpcy5ncihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBybyBleHRlbmRzIHNvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFdyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcIndyaXRlX3N0cmVhbV9pZGxlXCIgLyogV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIEhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5rID0gaSwgdGhpcy5WciA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCBTcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVnI7XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5WciA9ICExLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHZvaWQgMCwgc3VwZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgVHIoKSB7XG4gICAgICAgIHRoaXMuVnIgJiYgdGhpcy5EcihbXSk7XG4gICAgfVxuICAgIFJyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXIuUWkoXCJXcml0ZVwiLCB0LCBlKTtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBBbHdheXMgY2FwdHVyZSB0aGUgbGFzdCBzdHJlYW0gdG9rZW4uXG4gICAgICAgIFUoISF0LnN0cmVhbVRva2VuKSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB0LnN0cmVhbVRva2VuLCB0aGlzLlZyKSB7XG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgZmlyc3Qgd3JpdGUgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5LFxuICAgICAgICAgICAgLy8gTm90ZSwgdGhhdCB3ZSBjb3VsZCBjb25zaWRlciBhIHN1Y2Nlc3NmdWwgaGFuZHNoYWtlIGhlYWx0aHksIGhvd2V2ZXIsXG4gICAgICAgICAgICAvLyB0aGUgd3JpdGUgaXRzZWxmIG1pZ2h0IGJlIGNhdXNpbmcgYW4gZXJyb3Igd2Ugd2FudCB0byBiYWNrIG9mZiBmcm9tLlxuICAgICAgICAgICAgdGhpcy51ci5yZXNldCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IHVzKHQud3JpdGVSZXN1bHRzLCB0LmNvbW1pdFRpbWUpLCBuID0gem4odC5jb21taXRUaW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLkNyKG4sIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBmaXJzdCByZXNwb25zZSBpcyBhbHdheXMgdGhlIGhhbmRzaGFrZSByZXNwb25zZVxuICAgICAgICByZXR1cm4gVSghdC53cml0ZVJlc3VsdHMgfHwgMCA9PT0gdC53cml0ZVJlc3VsdHMubGVuZ3RoKSwgdGhpcy5WciA9ICEwLCB0aGlzLmxpc3RlbmVyLk5yKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGFuIGluaXRpYWwgc3RyZWFtVG9rZW4gdG8gdGhlIHNlcnZlciwgcGVyZm9ybWluZyB0aGUgaGFuZHNoYWtlXG4gICAgICogcmVxdWlyZWQgdG8gbWFrZSB0aGUgU3RyZWFtaW5nV3JpdGUgUlBDIHdvcmsuIFN1YnNlcXVlbnRcbiAgICAgKiBjYWxscyBzaG91bGQgd2FpdCB1bnRpbCBvbkhhbmRzaGFrZUNvbXBsZXRlIHdhcyBjYWxsZWQuXG4gICAgICovICAgIGtyKCkge1xuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IFN1cHBvcnQgc3RyZWFtIHJlc3VtcHRpb24uIFdlIGludGVudGlvbmFsbHkgZG8gbm90IHNldCB0aGVcbiAgICAgICAgLy8gc3RyZWFtIHRva2VuIG9uIHRoZSBoYW5kc2hha2UsIGlnbm9yaW5nIGFueSBzdHJlYW0gdG9rZW4gd2UgbWlnaHQgaGF2ZS5cbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gZXModGhpcy5rKSwgdGhpcy5ncih0KTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgZ3JvdXAgb2YgbXV0YXRpb25zIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZCB0byBhcHBseS4gKi8gICAgRHIodCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RyZWFtVG9rZW46IHRoaXMubGFzdFN0cmVhbVRva2VuLFxuICAgICAgICAgICAgd3JpdGVzOiB0Lm1hcCgodCA9PiBhcyh0aGlzLmssIHQpKSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ncihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERhdGFzdG9yZSBhbmQgaXRzIHJlbGF0ZWQgbWV0aG9kcyBhcmUgYSB3cmFwcGVyIGFyb3VuZCB0aGUgZXh0ZXJuYWwgR29vZ2xlXG4gKiBDbG91ZCBEYXRhc3RvcmUgZ3JwYyBBUEksIHdoaWNoIHByb3ZpZGVzIGFuIGludGVyZmFjZSB0aGF0IGlzIG1vcmUgY29udmVuaWVudFxuICogZm9yIHRoZSByZXN0IG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZSB0byBjb25zdW1lLlxuICovXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIERhdGFzdG9yZSB0aGF0IGV4cG9zZXMgYWRkaXRpb25hbCBzdGF0ZSBmb3IgaW50ZXJuYWxcbiAqIGNvbnN1bXB0aW9uLlxuICovXG5jbGFzcyBvbyBleHRlbmRzIGNsYXNzIHt9IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5pciA9IG4sIHRoaXMuayA9IHMsIFxuICAgICAgICB0aGlzLiRyID0gITE7XG4gICAgfVxuICAgIE9yKCkge1xuICAgICAgICBpZiAodGhpcy4kcikgdGhyb3cgbmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgQmkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5PcigpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuaXIuQmkodCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gai5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFEoai5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICBqaSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk9yKCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtzLCBpXSkgPT4gdGhpcy5pci5qaSh0LCBlLCBuLCBzLCBpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBqLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgdCkgOiBuZXcgUShqLlVOS05PV04sIHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLiRyID0gITA7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZXhwKTogTWFrZSBzdXJlIHRoZXJlIGlzIG9ubHkgb25lIERhdGFzdG9yZSBpbnN0YW5jZSBwZXJcbi8vIGZpcmVzdG9yZS1leHAgY2xpZW50LlxuLyoqXG4gKiBBIGNvbXBvbmVudCB1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0byB0cmFjayB0aGUgT25saW5lU3RhdGUgKHRoYXQgaXMsXG4gKiB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpZW50IGFzIGEgd2hvbGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdG8gYmUgb25saW5lIG9yXG4gKiBvZmZsaW5lKSwgaW1wbGVtZW50aW5nIHRoZSBhcHByb3ByaWF0ZSBoZXVyaXN0aWNzLlxuICpcbiAqIEluIHBhcnRpY3VsYXIsIHdoZW4gdGhlIGNsaWVudCBpcyB0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCwgd2VcbiAqIGFsbG93IHVwIHRvIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgd2l0aGluIE9OTElORV9TVEFURV9USU1FT1VUX01TIGZvclxuICogYSBjb25uZWN0aW9uIHRvIHN1Y2NlZWQuIElmIHdlIGhhdmUgdG9vIG1hbnkgZmFpbHVyZXMgb3IgdGhlIHRpbWVvdXQgZWxhcHNlcyxcbiAqIHRoZW4gd2Ugc2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lLCBhbmQgdGhlIGNsaWVudCB3aWxsIGJlaGF2ZSBhcyBpZlxuICogaXQgaXMgb2ZmbGluZSAoZ2V0KClzIHdpbGwgcmV0dXJuIGNhY2hlZCBkYXRhLCBldGMuKS5cbiAqL1xuY2xhc3MgYW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBlLCBcbiAgICAgICAgLyoqIFRoZSBjdXJyZW50IE9ubGluZVN0YXRlLiAqL1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXG4gICAgICAgICAqIG1heGltdW0gZGVmaW5lZCBieSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTLCB3ZSdsbCBzZXQgdGhlIE9ubGluZVN0YXRlIHRvXG4gICAgICAgICAqIE9mZmxpbmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkZyID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRpbWVyIHRoYXQgZWxhcHNlcyBhZnRlciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgYXQgd2hpY2ggcG9pbnQgd2VcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcbiAgICAgICAgICogZm9yIHRoZSBzdHJlYW0gdG8gYWN0dWFsbHkgZmFpbCAoTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB0aW1lcykuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk1yID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIGxvZyBhIHdhcm5pbmcgbWVzc2FnZSBpZiBpdCBmYWlscyB0byBjb25uZWN0IHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kIChpbml0aWFsbHkgdHJ1ZSwgY2xlYXJlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgc3RyZWFtLCBvciBpZiB3ZSd2ZVxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkxyID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSBSZW1vdGVTdG9yZSB3aGVuIGEgd2F0Y2ggc3RyZWFtIGlzIHN0YXJ0ZWQgKGluY2x1ZGluZyBvbiBlYWNoXG4gICAgICogYmFja29mZiBhdHRlbXB0KS5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIGl0IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gYW5kIHN0YXJ0c1xuICAgICAqIHRoZSBvbmxpbmVTdGF0ZVRpbWVyLlxuICAgICAqLyAgICBCcigpIHtcbiAgICAgICAgMCA9PT0gdGhpcy5GciAmJiAodGhpcy5VcihcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgdGhpcy5NciA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCIgLyogT25saW5lU3RhdGVUaW1lb3V0ICovICwgMWU0LCAoKCkgPT4gKHRoaXMuTXIgPSBudWxsLCBcbiAgICAgICAgdGhpcy5xcihcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIDEwIHNlY29uZHMuXCIpLCB0aGlzLlVyKFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxuICAgICAqIGZhaWx1cmUuIFRoZSBmaXJzdCBmYWlsdXJlIG1vdmVzIHVzIHRvIHRoZSAnVW5rbm93bicgc3RhdGUuIFdlIHRoZW4gbWF5XG4gICAgICogYWxsb3cgbXVsdGlwbGUgZmFpbHVyZXMgKGJhc2VkIG9uIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIGJlZm9yZSB3ZVxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cbiAgICAgKi8gICAgS3IodCkge1xuICAgICAgICBcIk9ubGluZVwiIC8qIE9ubGluZSAqLyA9PT0gdGhpcy5zdGF0ZSA/IHRoaXMuVXIoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykgOiAodGhpcy5GcisrLCBcbiAgICAgICAgdGhpcy5GciA+PSAxICYmICh0aGlzLmpyKCksIHRoaXMucXIoYENvbm5lY3Rpb24gZmFpbGVkIDEgdGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiAke3QudG9TdHJpbmcoKX1gKSwgXG4gICAgICAgIHRoaXMuVXIoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHN0YXRlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXG4gICAgICogT2ZmbGluZSBoZXVyaXN0aWNzLCBzbyBtdXN0IG5vdCBiZSB1c2VkIGluIHBsYWNlIG9mXG4gICAgICogaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpIGFuZCBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKS5cbiAgICAgKi8gICAgc2V0KHQpIHtcbiAgICAgICAgdGhpcy5qcigpLCB0aGlzLkZyID0gMCwgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHQgJiYgKFxuICAgICAgICAvLyBXZSd2ZSBjb25uZWN0ZWQgdG8gd2F0Y2ggYXQgbGVhc3Qgb25jZS4gRG9uJ3Qgd2FybiB0aGUgZGV2ZWxvcGVyXG4gICAgICAgIC8vIGFib3V0IGJlaW5nIG9mZmxpbmUgZ29pbmcgZm9yd2FyZC5cbiAgICAgICAgdGhpcy5MciA9ICExKSwgdGhpcy5Vcih0KTtcbiAgICB9XG4gICAgVXIodCkge1xuICAgICAgICB0ICE9PSB0aGlzLnN0YXRlICYmICh0aGlzLnN0YXRlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodCkpO1xuICAgIH1cbiAgICBxcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBgQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiAke3R9XFxuVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5gO1xuICAgICAgICB0aGlzLkxyID8gKEYoZSksIHRoaXMuTHIgPSAhMSkgOiBPKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIGUpO1xuICAgIH1cbiAgICBqcigpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5NciAmJiAodGhpcy5Nci5jYW5jZWwoKSwgdGhpcy5NciA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgY28ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xuICAgIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLnJlbW90ZVN5bmNlciA9IHt9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxuICAgICAgICAgKiBzdHJlYW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5RciA9IFtdLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV3IgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHJlYXNvbnMgZm9yIHdoeSB0aGUgUmVtb3RlU3RvcmUgbWF5IGJlIG9mZmxpbmUuIElmIGVtcHR5LCB0aGVcbiAgICAgICAgICogUmVtb3RlU3RvcmUgbWF5IHN0YXJ0IGl0cyBuZXR3b3JrIGNvbm5lY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5HciA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlcnMgdGhhdCBnZXQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgb3IgZW5hYmxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgb24gdGhlIFdlYiBjbGllbnQgdG8gY3JlYXRlIHRoZVxuICAgICAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbXMgKHRvIHN1cHBvcnQgdHJlZS1zaGFrZWFibGUgc3RyZWFtcykuIE9uIEFuZHJvaWQgYW5kIGlPUyxcbiAgICAgICAgICogdGhlIHN0cmVhbXMgYXJlIGNyZWF0ZWQgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuenIgPSBbXSwgdGhpcy5IciA9IGksIHRoaXMuSHIuRWkoKHQgPT4ge1xuICAgICAgICAgICAgbi5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBVbmxpa2UgaU9TLCBgcmVzdGFydE5ldHdvcmsoKWAgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGJlY29tZXMgdW5yZWFjaGFibGUgYXMgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgd2F5IHRvIHRlYXJcbiAgICAgICAgICAgICAgICAvLyBkb3duIG91ciBzdHJlYW1zLlxuICAgICAgICAgICAgICAgIHlvKHRoaXMpICYmIChPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS5cIiksIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEsodCk7XG4gICAgICAgICAgICAgICAgICAgIGUuR3IuYWRkKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgaG8oZSksIGUuSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pLCBcbiAgICAgICAgICAgICAgICAgICAgZS5Hci5kZWxldGUoNCAvKiBDb25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCB1byhlKTtcbiAgICAgICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB0aGlzLkpyID0gbmV3IGFvKG4sIHMpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gdW8odCkge1xuICAgIGlmICh5byh0KSkgZm9yIChjb25zdCBlIG9mIHQuenIpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITApO1xufVxuXG4vKipcbiAqIFRlbXBvcmFyaWx5IGRpc2FibGVzIHRoZSBuZXR3b3JrLiBUaGUgbmV0d29yayBjYW4gYmUgcmUtZW5hYmxlZCB1c2luZ1xuICogZW5hYmxlTmV0d29yaygpLlxuICovIGFzeW5jIGZ1bmN0aW9uIGhvKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC56cikgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMSk7XG59XG5cbi8qKlxuICogU3RhcnRzIG5ldyBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXQuIFVzZXMgcmVzdW1lIHRva2VuIGlmIHByb3ZpZGVkLiBJdFxuICogaXMgYSBuby1vcCBpZiB0aGUgdGFyZ2V0IG9mIGdpdmVuIGBUYXJnZXREYXRhYCBpcyBhbHJlYWR5IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovXG5mdW5jdGlvbiBsbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgbi5Xci5oYXMoZS50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLldyLnNldChlLnRhcmdldElkLCBlKSwgZ28obikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIG1vKG4pIDogJG8obikubHIoKSAmJiB3byhuLCBlKSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcbiAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cbiAqLyBmdW5jdGlvbiBmbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCksIHMgPSAkbyhuKTtcbiAgICBuLldyLmRlbGV0ZShlKSwgcy5scigpICYmIF9vKG4sIGUpLCAwID09PSBuLldyLnNpemUgJiYgKHMubHIoKSA/IHMuX3IoKSA6IHlvKG4pICYmIFxuICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXG4gICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcbiAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXG4gICAgbi5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gd28odCwgZSkge1xuICAgIHQuWXIuWChlLnRhcmdldElkKSwgJG8odCkuUHIoZSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gX28odCwgZSkge1xuICAgIHQuWXIuWChlKSwgJG8odCkudnIoZSk7XG59XG5cbmZ1bmN0aW9uIG1vKHQpIHtcbiAgICB0LllyID0gbmV3IExuKHtcbiAgICAgICAgZ2V0UmVtb3RlS2V5c0ZvclRhcmdldDogZSA9PiB0LnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLFxuICAgICAgICBFdDogZSA9PiB0LldyLmdldChlKSB8fCBudWxsXG4gICAgfSksICRvKHQpLnN0YXJ0KCksIHQuSnIuQnIoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHdhdGNoIHN0cmVhbSBzaG91bGQgYmUgc3RhcnRlZCBiZWNhdXNlIGl0J3MgbmVjZXNzYXJ5XG4gKiBhbmQgaGFzIG5vdCB5ZXQgYmVlbiBzdGFydGVkLlxuICovIGZ1bmN0aW9uIGdvKHQpIHtcbiAgICByZXR1cm4geW8odCkgJiYgISRvKHQpLmhyKCkgJiYgdC5Xci5zaXplID4gMDtcbn1cblxuZnVuY3Rpb24geW8odCkge1xuICAgIHJldHVybiAwID09PSBLKHQpLkdyLnNpemU7XG59XG5cbmZ1bmN0aW9uIHBvKHQpIHtcbiAgICB0LllyID0gdm9pZCAwO1xufVxuXG5hc3luYyBmdW5jdGlvbiBUbyh0KSB7XG4gICAgdC5Xci5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICB3byh0LCBlKTtcbiAgICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEVvKHQsIGUpIHtcbiAgICBwbyh0KSwgXG4gICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cbiAgICBnbyh0KSA/ICh0LkpyLktyKGUpLCBtbyh0KSkgOiBcbiAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxuICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxuICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cbiAgICB0LkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gSW8odCwgZSwgbikge1xuICAgIGlmIChcbiAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXG4gICAgdC5Kci5zZXQoXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8pLCBlIGluc3RhbmNlb2YgRm4gJiYgMiAvKiBSZW1vdmVkICovID09PSBlLnN0YXRlICYmIGUuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGUudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIHQuV3IuaGFzKHMpICYmIChhd2FpdCB0LnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ocywgbiksIHQuV3IuZGVsZXRlKHMpLCB0LllyLnJlbW92ZVRhcmdldChzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAodCwgZSk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmVtb3ZlIHRhcmdldHMgJXM6ICVzIFwiLCBlLnRhcmdldElkcy5qb2luKFwiLFwiKSwgbiksIFxuICAgICAgICBhd2FpdCBBbyh0LCBuKTtcbiAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiAkbiA/IHQuWXIub3QoZSkgOiBlIGluc3RhbmNlb2YgT24gPyB0LllyLmR0KGUpIDogdC5Zci51dChlKSwgXG4gICAgIW4uaXNFcXVhbCh1dC5taW4oKSkpIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBtcih0LmxvY2FsU3RvcmUpO1xuICAgICAgICBuLmNvbXBhcmVUbyhlKSA+PSAwICYmIFxuICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxuICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5Zci5ndChlKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgcmVzdW1lIHRva2Vucy4gTG9jYWxTdG9yZSB3aWxsIHVwZGF0ZSB0aGVcbiAgICAgICAgICAgIC8vIHBlcnNpc3RlbnQgdmlldyBvZiB0aGVzZSB3aGVuIGFwcGx5aW5nIHRoZSBjb21wbGV0ZWQgUmVtb3RlRXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5Xci5nZXQocyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIHQuV3Iuc2V0KHMsIGkud2l0aFJlc3VtZVRva2VuKG4ucmVzdW1lVG9rZW4sIGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSksIFxuICAgICAgICAgICAgLy8gUmUtZXN0YWJsaXNoIGxpc3RlbnMgZm9yIHRoZSB0YXJnZXRzIHRoYXQgaGF2ZSBiZWVuIGludmFsaWRhdGVkIGJ5XG4gICAgICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICBuLnRhcmdldE1pc21hdGNoZXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuV3IuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmICghbikgXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXG4gICAgICAgICAgICAgICAgLy8gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuV3Iuc2V0KGUsIG4ud2l0aFJlc3VtZVRva2VuKHB0LkVNUFRZX0JZVEVfU1RSSU5HLCBuLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICBfbyh0LCBlKTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2Ugc2VuZCBhcyBiZWluZyBvbiBiZWhhbGYgb2YgYW4gZXhpc3RlbmNlIGZpbHRlclxuICAgICAgICAgICAgICAgIC8vIG1pc21hdGNoLCBidXQgZG9uJ3QgYWN0dWFsbHkgcmV0YWluIHRoYXQgaW4gbGlzdGVuVGFyZ2V0cy4gVGhpcyBlbnN1cmVzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVucyBvZiB0aGlzIHRhcmdldCAodGhhdCBtaWdodCBoYXBwZW4gZS5nLiBvbiByZWNvbm5lY3QpLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgY2kobi50YXJnZXQsIGUsIDEgLyogRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gLCBuLnNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICB3byh0LCBzKTtcbiAgICAgICAgICAgIH0pKSwgdC5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudChuKTtcbiAgICAgICAgfSh0LCBuKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIE8oXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByYWlzZSBzbmFwc2hvdDpcIiwgZSksIGF3YWl0IEFvKHQsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvdmVyeSBsb2dpYyBmb3IgSW5kZXhlZERCIGVycm9ycyB0aGF0IHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWxcbiAqIGBvcGAgc3VjY2VlZHMuIFJldHJpZXMgYXJlIHNjaGVkdWxlZCB3aXRoIGJhY2tvZmYgdXNpbmdcbiAqIGBlbnF1ZXVlUmV0cnlhYmxlKClgLiBJZiBgb3AoKWAgaXMgbm90IHByb3ZpZGVkLCBJbmRleGVkREIgYWNjZXNzIGlzXG4gKiB2YWxpZGF0ZWQgdmlhIGEgZ2VuZXJpYyBvcGVyYXRpb24uXG4gKlxuICogVGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgYmVmb3JlXG4gKiBhbnkgcmV0cnkgYXR0ZW1wdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBBbyh0LCBlLCBuKSB7XG4gICAgaWYgKCFacyhlKSkgdGhyb3cgZTtcbiAgICB0LkdyLmFkZCgxIC8qIEluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgIC8vIERpc2FibGUgbmV0d29yayBhbmQgcmFpc2Ugb2ZmbGluZSBzbmFwc2hvdHNcbiAgICBhd2FpdCBobyh0KSwgdC5Kci5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyksIG4gfHwgKFxuICAgIC8vIFVzZSBhIHNpbXBsZSByZWFkIG9wZXJhdGlvbiB0byBkZXRlcm1pbmUgaWYgSW5kZXhlZERCIHJlY292ZXJlZC5cbiAgICAvLyBJZGVhbGx5LCB3ZSB3b3VsZCBleHBvc2UgYSBoZWFsdGggY2hlY2sgZGlyZWN0bHkgb24gU2ltcGxlRGIsIGJ1dFxuICAgIC8vIFJlbW90ZVN0b3JlIG9ubHkgaGFzIGFjY2VzcyB0byBwZXJzaXN0ZW5jZSB0aHJvdWdoIExvY2FsU3RvcmUuXG4gICAgbiA9ICgpID0+IG1yKHQubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIE8oXCJSZW1vdGVTdG9yZVwiLCBcIlJldHJ5aW5nIEluZGV4ZWREQiBhY2Nlc3NcIiksIGF3YWl0IG4oKSwgdC5Hci5kZWxldGUoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAgICAgYXdhaXQgdW8odCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGBvcGAuIElmIGBvcGAgZmFpbHMsIHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWwgYG9wYFxuICogc3VjY2VlZHMuIFJldHVybnMgYWZ0ZXIgdGhlIGZpcnN0IGF0dGVtcHQuXG4gKi8gZnVuY3Rpb24gUm8odCwgZSkge1xuICAgIHJldHVybiBlKCkuY2F0Y2goKG4gPT4gQW8odCwgbiwgZSkpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gYm8odCkge1xuICAgIGNvbnN0IGUgPSBLKHQpLCBuID0gT28oZSk7XG4gICAgbGV0IHMgPSBlLlFyLmxlbmd0aCA+IDAgPyBlLlFyW2UuUXIubGVuZ3RoIC0gMV0uYmF0Y2hJZCA6IC0xO1xuICAgIGZvciAoO1BvKGUpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBwcihlLmxvY2FsU3RvcmUsIHMpO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgMCA9PT0gZS5Rci5sZW5ndGggJiYgbi5fcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHQuYmF0Y2hJZCwgdm8oZSwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBBbyhlLCB0KTtcbiAgICB9XG4gICAgVm8oZSkgJiYgU28oZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIFBvKHQpIHtcbiAgICByZXR1cm4geW8odCkgJiYgdC5Rci5sZW5ndGggPCAxMDtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYWRkaXRpb25hbCB3cml0ZXMgdG8gYmUgc2VudCB0byB0aGUgd3JpdGUgc3RyZWFtLCBzZW5kaW5nIHRoZW1cbiAqIGltbWVkaWF0ZWx5IGlmIHRoZSB3cml0ZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gKi8gZnVuY3Rpb24gdm8odCwgZSkge1xuICAgIHQuUXIucHVzaChlKTtcbiAgICBjb25zdCBuID0gT28odCk7XG4gICAgbi5scigpICYmIG4uU3IgJiYgbi5EcihlLm11dGF0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIFZvKHQpIHtcbiAgICByZXR1cm4geW8odCkgJiYgIU9vKHQpLmhyKCkgJiYgdC5Rci5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBTbyh0KSB7XG4gICAgT28odCkuc3RhcnQoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gRG8odCkge1xuICAgIE9vKHQpLmtyKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIENvKHQpIHtcbiAgICBjb25zdCBlID0gT28odCk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuUXIpIGUuRHIobi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBObyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuUXIuc2hpZnQoKSwgaSA9IGFpLmZyb20ocywgZSwgbik7XG4gICAgYXdhaXQgUm8odCwgKCgpID0+IHQucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlKGkpKSksIFxuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxuICAgIC8vIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgIGF3YWl0IGJvKHQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBrbyh0LCBlKSB7XG4gICAgLy8gSWYgdGhlIHdyaXRlIHN0cmVhbSBjbG9zZWQgYWZ0ZXIgdGhlIHdyaXRlIGhhbmRzaGFrZSBjb21wbGV0ZXMsIGEgd3JpdGVcbiAgICAvLyBvcGVyYXRpb24gZmFpbGVkIGFuZCB3ZSBmYWlsIHRoZSBwZW5kaW5nIG9wZXJhdGlvbi5cbiAgICBlICYmIE9vKHQpLlNyICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChuID0gZS5jb2RlLCBtbihuKSAmJiBuICE9PSBqLkFCT1JURUQpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgcGVybWFuZW50IGVycm9yLCB0aGUgcmVxdWVzdCBpdHNlbGYgd2FzIHRoZSBwcm9ibGVtXG4gICAgICAgICAgICAvLyBzbyBpdCdzIG5vdCBnb2luZyB0byBzdWNjZWVkIGlmIHdlIHJlc2VuZCBpdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LlFyLnNoaWZ0KCk7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xuICAgICAgICAgICAgLy8gZG93biAtLSB0aGlzIHdhcyBqdXN0IGEgYmFkIHJlcXVlc3Qgc28gaW5oaWJpdCBiYWNrb2ZmIG9uIHRoZSBuZXh0XG4gICAgICAgICAgICAvLyByZXN0YXJ0LlxuICAgICAgICAgICAgICAgICAgICAgICAgT28odCkud3IoKSwgYXdhaXQgUm8odCwgKCgpID0+IHQucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgZSkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgYm8odCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG47XG4gICAgfSh0LCBlKSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICBWbyh0KSAmJiBTbyh0KTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBuZXR3b3JrIHN0YXRlIHdoZW4gdGhlIGNsaWVudCBnYWlucyBvciBsb3NlcyBpdHMgcHJpbWFyeSBsZWFzZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24geG8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgIGUgPyAobi5Hci5kZWxldGUoMiAvKiBJc1NlY29uZGFyeSAqLyksIGF3YWl0IHVvKG4pKSA6IGUgfHwgKG4uR3IuYWRkKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBcbiAgICBhd2FpdCBobyhuKSwgbi5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV2F0Y2hTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdhdGNoU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gJG8odCkge1xuICAgIHJldHVybiB0LlhyIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5YciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEsodCk7XG4gICAgICAgIHJldHVybiBzLk9yKCksIG5ldyBpbyhlLCBzLmlyLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLmssIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICBEaTogVG8uYmluZChudWxsLCB0KSxcbiAgICAgICAgTmk6IEVvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGJyOiBJby5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuenIucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5Yci53cigpLCBnbyh0KSA/IG1vKHQpIDogdC5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpIDogKGF3YWl0IHQuWHIuc3RvcCgpLCBcbiAgICAgICAgcG8odCkpO1xuICAgIH0pKSksIHQuWHI7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXcml0ZVN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV3JpdGVTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBPbyh0KSB7XG4gICAgcmV0dXJuIHQuWnIgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LlpyID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSyh0KTtcbiAgICAgICAgcmV0dXJuIHMuT3IoKSwgbmV3IHJvKGUsIHMuaXIsIHMuYXV0aENyZWRlbnRpYWxzLCBzLmFwcENoZWNrQ3JlZGVudGlhbHMsIHMuaywgbik7XG4gICAgfSh0LmRhdGFzdG9yZSwgdC5hc3luY1F1ZXVlLCB7XG4gICAgICAgIERpOiBEby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBOaToga28uYmluZChudWxsLCB0KSxcbiAgICAgICAgTnI6IENvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIENyOiBOby5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuenIucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5aci53cigpLCBcbiAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICAgICAgICBhd2FpdCBibyh0KSkgOiAoYXdhaXQgdC5aci5zdG9wKCksIHQuUXIubGVuZ3RoID4gMCAmJiAoTyhcIlJlbW90ZVN0b3JlXCIsIGBTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCAke3QuUXIubGVuZ3RofSBwZW5kaW5nIHdyaXRlc2ApLCBcbiAgICAgICAgdC5RciA9IFtdKSk7XG4gICAgfSkpKSwgdC5acjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXG4gKlxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxuICpcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxuICpcbiAqIE5vdGU6IFdlIGltcGxlbWVudCBgUHJvbWlzZUxpa2VgIGluc3RlYWQgb2YgYFByb21pc2VgLCBhcyB0aGUgYFByb21pc2VgIHR5cGVcbiAqIGluIG5ld2VyIHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgZGVmaW5lcyBgZmluYWxseWAsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW5cbiAqIElFLlxuICovXG5jbGFzcyBGbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLnRhcmdldFRpbWVNcyA9IG4sIHRoaXMub3AgPSBzLCB0aGlzLnJlbW92YWxDYWxsYmFjayA9IGksIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IFcsIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKSwgXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgodCA9PiB7fSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBGbyh0LCBlLCByLCBzLCBpKTtcbiAgICAgICAgcmV0dXJuIG8uc3RhcnQobiksIG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxuICAgICAqIGNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gICAgICovICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoKCgpID0+IHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCkpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxuICAgICAqIGNhbmNlbGVkKS5cbiAgICAgKi8gICAgc2tpcERlbGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgb3BlcmF0aW9uIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQgb3IgY2FuY2VsZWQuIFRoZVxuICAgICAqIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEFzIGxvbmcgYXMgdGhlIG9wZXJhdGlvbiBoYXMgbm90IHlldCBiZWVuIHJ1biwgY2FsbGluZyBjYW5jZWwoKSBwcm92aWRlcyBhXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhlIG9wZXJhdGlvbiB3aWxsIG5vdCBiZSBydW4uXG4gICAgICovICAgIGNhbmNlbCh0KSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMuY2xlYXJUaW1lb3V0KCksIHRoaXMuZGVmZXJyZWQucmVqZWN0KG5ldyBRKGouQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArICh0ID8gXCI6IFwiICsgdCA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigodCA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUodCkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIE1vKHQsIGUpIHtcbiAgICBpZiAoRihcIkFzeW5jUXVldWVcIiwgYCR7ZX06ICR7dH1gKSwgWnModCkpIHJldHVybiBuZXcgUShqLlVOQVZBSUxBQkxFLCBgJHtlfTogJHt0fWApO1xuICAgIHRocm93IHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50U2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGRvY3VtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLiBXZSBhbHdheXMgYWRkIGEgZG9jdW1lbnQga2V5XG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxuICogdGhlIGtleS5cbiAqLyBjbGFzcyBMbyB7XG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0ID8gKGUsIG4pID0+IHQoZSwgbikgfHwgRHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogKHQsIGUpID0+IER0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSwgXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBQbigpLCB0aGlzLnNvcnRlZFNldCA9IG5ldyB5bih0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovICAgIHN0YXRpYyBlbXB0eVNldCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTG8odC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YoZSkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQodCkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGVsZXRlKHQua2V5KTtcbiAgICAgICAgcmV0dXJuIGUuY29weShlLmtleWVkTWFwLmluc2VydCh0LmtleSwgdCksIGUuc29ydGVkU2V0Lmluc2VydCh0LCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKHQpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBMbykpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gdC5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghdC5pc0VxdWFsKHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IHQubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIHQuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IExvO1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gdCwgbi5zb3J0ZWRTZXQgPSBlLCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyBCbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZW8gPSBuZXcgeW4oRHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHRyYWNrKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jLmtleSwgbiA9IHRoaXMuZW8uZ2V0KGUpO1xuICAgICAgICBuID8gXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cbiAgICAgICAgMCAvKiBBZGRlZCAqLyAhPT0gdC50eXBlICYmIDMgLyogTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB0KSA6IDMgLyogTWV0YWRhdGEgKi8gPT09IHQudHlwZSAmJiAxIC8qIFJlbW92ZWQgKi8gIT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiBuLnR5cGUsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDIgLyogTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAyIC8qIE1vZGlmaWVkICovID09PSB0LnR5cGUgJiYgMCAvKiBBZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDEgLyogUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLnJlbW92ZShlKSA6IDEgLyogUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDIgLyogTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBuLmRvY1xuICAgICAgICB9KSA6IDAgLyogQWRkZWQgKi8gPT09IHQudHlwZSAmJiAxIC8qIFJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiBcbiAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcbiAgICAgICAgLy8gQWRkZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcbiAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXG4gICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxuICAgICAgICBCKCkgOiB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIG5vKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmVvLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0LnB1c2gobik7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIFVvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBhKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLmRvY3MgPSBlLCB0aGlzLm9sZERvY3MgPSBuLCB0aGlzLmRvY0NoYW5nZXMgPSBzLCB0aGlzLm11dGF0ZWRLZXlzID0gaSwgXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gciwgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gbywgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IGE7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqLyAgICBzdGF0aWMgZnJvbUluaXRpYWxEb2N1bWVudHModCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIG5ldyBVbyh0LCBlLCBMby5lbXB0eVNldChlKSwgaSwgbiwgcywgXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovICEwLCBcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExKTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGUgJiYgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID09PSB0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKHQubXV0YXRlZEtleXMpICYmIHZlKHRoaXMucXVlcnksIHQucXVlcnkpICYmIHRoaXMuZG9jcy5pc0VxdWFsKHQuZG9jcykgJiYgdGhpcy5vbGREb2NzLmlzRXF1YWwodC5vbGREb2NzKSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jQ2hhbmdlcywgbiA9IHQuZG9jQ2hhbmdlcztcbiAgICAgICAgaWYgKGUubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGlmIChlW3RdLnR5cGUgIT09IG5bdF0udHlwZSB8fCAhZVt0XS5kb2MuaXNFcXVhbChuW3RdLmRvYykpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cbiAqLyBjbGFzcyBxbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc28gPSB2b2lkIDAsIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBLbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyB6aSgodCA9PiBWZSh0KSksIHZlKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5pbyA9IG5ldyBTZXQ7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBqbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITEsIHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyIHx8IChpID0gITAsIHIgPSBuZXcgcW8pLCBpKSB0cnkge1xuICAgICAgICByLnNvID0gYXdhaXQgbi5vbkxpc3RlbihzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBNbyh0LCBgSW5pdGlhbGl6YXRpb24gb2YgcXVlcnkgJyR7U2UoZS5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgZS5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChzLCByKSwgci5saXN0ZW5lcnMucHVzaChlKSwgXG4gICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgZS5ybyhuLm9ubGluZVN0YXRlKSwgci5zbykge1xuICAgICAgICBlLm9vKHIuc28pICYmIHpvKG4pO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gUW8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExO1xuICAgIGNvbnN0IHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyKSB7XG4gICAgICAgIGNvbnN0IHQgPSByLmxpc3RlbmVycy5pbmRleE9mKGUpO1xuICAgICAgICB0ID49IDAgJiYgKHIubGlzdGVuZXJzLnNwbGljZSh0LCAxKSwgaSA9IDAgPT09IHIubGlzdGVuZXJzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChpKSByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShzKSwgbi5vblVubGlzdGVuKHMpO1xufVxuXG5mdW5jdGlvbiBXbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgbGV0IHMgPSAhMTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBjb25zdCBlID0gdC5xdWVyeSwgaSA9IG4ucXVlcmllcy5nZXQoZSk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgaS5saXN0ZW5lcnMpIGUub28odCkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICBpLnNvID0gdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzICYmIHpvKG4pO1xufVxuXG5mdW5jdGlvbiBHbyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEsodCksIGkgPSBzLnF1ZXJpZXMuZ2V0KGUpO1xuICAgIGlmIChpKSBmb3IgKGNvbnN0IHQgb2YgaS5saXN0ZW5lcnMpIHQub25FcnJvcihuKTtcbiAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycy4gTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN5bmNFbmdpbmUudW5saXN0ZW4oKVxuICAgIC8vIGFmdGVyIGFuIGVycm9yLlxuICAgICAgICBzLnF1ZXJpZXMuZGVsZXRlKGUpO1xufVxuXG4vLyBDYWxsIGFsbCBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIHNldC5cbmZ1bmN0aW9uIHpvKHQpIHtcbiAgICB0LmlvLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0Lm5leHQoKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUXVlcnlMaXN0ZW5lciB0YWtlcyBhIHNlcmllcyBvZiBpbnRlcm5hbCB2aWV3IHNuYXBzaG90cyBhbmQgZGV0ZXJtaW5lc1xuICogd2hlbiB0byByYWlzZSB0aGUgZXZlbnQuXG4gKlxuICogSXQgdXNlcyBhbiBPYnNlcnZlciB0byBkaXNwYXRjaCBldmVudHMuXG4gKi8gY2xhc3MgSG8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuYW8gPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbyA9ICExLCB0aGlzLnVvID0gbnVsbCwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICBvbyh0KSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZG9jQ2hhbmdlcykgMyAvKiBNZXRhZGF0YSAqLyAhPT0gbi50eXBlICYmIGUucHVzaChuKTtcbiAgICAgICAgICAgIHQgPSBuZXcgVW8odC5xdWVyeSwgdC5kb2NzLCB0Lm9sZERvY3MsIGUsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlLCB0LnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5jbyA/IHRoaXMuaG8odCkgJiYgKHRoaXMuYW8ubmV4dCh0KSwgZSA9ICEwKSA6IHRoaXMubG8odCwgdGhpcy5vbmxpbmVTdGF0ZSkgJiYgKHRoaXMuZm8odCksIFxuICAgICAgICBlID0gITApLCB0aGlzLnVvID0gdCwgZTtcbiAgICB9XG4gICAgb25FcnJvcih0KSB7XG4gICAgICAgIHRoaXMuYW8uZXJyb3IodCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgYSBzbmFwc2hvdCB3YXMgcmFpc2VkLiAqLyAgICBybyh0KSB7XG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSB0O1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy51byAmJiAhdGhpcy5jbyAmJiB0aGlzLmxvKHRoaXMudW8sIHQpICYmICh0aGlzLmZvKHRoaXMudW8pLCBlID0gITApLCBcbiAgICAgICAgZTtcbiAgICB9XG4gICAgbG8odCwgZSkge1xuICAgICAgICAvLyBBbHdheXMgcmFpc2UgdGhlIGZpcnN0IGV2ZW50IHdoZW4gd2UncmUgc3luY2VkXG4gICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTk9URTogV2UgY29uc2lkZXIgT25saW5lU3RhdGUuVW5rbm93biBhcyBvbmxpbmUgKGl0IHNob3VsZCBiZWNvbWUgT2ZmbGluZVxuICAgICAgICAvLyBvciBPbmxpbmUgaWYgd2Ugd2FpdCBsb25nIGVub3VnaCkuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gIT09IGU7XG4gICAgICAgIC8vIERvbid0IHJhaXNlIHRoZSBldmVudCBpZiB3ZSdyZSBvbmxpbmUsIGFyZW4ndCBzeW5jZWQgeWV0IChjaGVja2VkXG4gICAgICAgIC8vIGFib3ZlKSBhbmQgYXJlIHdhaXRpbmcgZm9yIGEgc3luYy5cbiAgICAgICAgICAgICAgICByZXR1cm4gKCF0aGlzLm9wdGlvbnMud28gfHwgIW4pICYmICghdC5kb2NzLmlzRW1wdHkoKSB8fCBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovID09PSBlKTtcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cyBvciB3ZSBhcmUgb2ZmbGluZVxuICAgICAgICB9XG4gICAgaG8odCkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxuICAgICAgICBpZiAodC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHJldHVybiAhMDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudW8gJiYgdGhpcy51by5oYXNQZW5kaW5nV3JpdGVzICE9PSB0Lmhhc1BlbmRpbmdXcml0ZXM7XG4gICAgICAgIHJldHVybiAhKCF0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgIWUpICYmICEwID09PSB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxuICAgICAgICB9XG4gICAgZm8odCkge1xuICAgICAgICB0ID0gVW8uZnJvbUluaXRpYWxEb2N1bWVudHModC5xdWVyeSwgdC5kb2NzLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSksIHRoaXMuY28gPSAhMCwgXG4gICAgICAgIHRoaXMuYW8ubmV4dCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29tcGxldGUgZWxlbWVudCBpbiB0aGUgYnVuZGxlIHN0cmVhbSwgdG9nZXRoZXIgd2l0aCB0aGUgYnl0ZSBsZW5ndGggaXRcbiAqIG9jY3VwaWVzIGluIHRoZSBzdHJlYW0uXG4gKi8gY2xhc3MgSm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIEhvdyBtYW55IGJ5dGVzIHRoaXMgZWxlbWVudCB0YWtlcyB0byBzdG9yZSBpbiB0aGUgYnVuZGxlLlxuICAgIGUpIHtcbiAgICAgICAgdGhpcy5wYXlsb2FkID0gdCwgdGhpcy5ieXRlTGVuZ3RoID0gZTtcbiAgICB9XG4gICAgX28oKSB7XG4gICAgICAgIHJldHVybiBcIm1ldGFkYXRhXCIgaW4gdGhpcy5wYXlsb2FkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgb2JqZWN0cyBmcm9tIGJ1bmRsZXMgdG8gbW9kZWwgb2JqZWN0cyBpbiB0aGUgU0RLLlxuICovIGNsYXNzIFlvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuayA9IHQ7XG4gICAgfVxuICAgIEhuKHQpIHtcbiAgICAgICAgcmV0dXJuIFhuKHRoaXMuaywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgQnVuZGxlRG9jdW1lbnQgdG8gYSBNdXRhYmxlRG9jdW1lbnQuXG4gICAgICovICAgIEpuKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWV0YWRhdGEuZXhpc3RzID8gaXModGhpcy5rLCB0LmRvY3VtZW50LCAhMSkgOiBHdC5uZXdOb0RvY3VtZW50KHRoaXMuSG4odC5tZXRhZGF0YS5uYW1lKSwgdGhpcy5Zbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIFluKHQpIHtcbiAgICAgICAgcmV0dXJuIHpuKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIHByb2Nlc3MgdGhlIGVsZW1lbnRzIGZyb20gYSBidW5kbGUsIGxvYWQgdGhlbSBpbnRvIGxvY2FsXG4gKiBzdG9yYWdlIGFuZCBwcm92aWRlIHByb2dyZXNzIHVwZGF0ZSB3aGlsZSBsb2FkaW5nLlxuICovIGNsYXNzIFhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMubW8gPSB0LCB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLmsgPSBuLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgcXVlcmllcyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5xdWVyaWVzID0gW10sIFxuICAgICAgICAvKiogQmF0Y2hlZCBkb2N1bWVudHMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW10sIHRoaXMucHJvZ3Jlc3MgPSBabyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBlbGVtZW50IGZyb20gdGhlIGJ1bmRsZSB0byB0aGUgbG9hZGVyLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIG5ldyBwcm9ncmVzcyBpZiBhZGRpbmcgdGhlIGVsZW1lbnQgbGVhZHMgdG8gYSBuZXcgcHJvZ3Jlc3MsXG4gICAgICogb3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cbiAgICAgKi8gICAgeW8odCkge1xuICAgICAgICB0aGlzLnByb2dyZXNzLmJ5dGVzTG9hZGVkICs9IHQuYnl0ZUxlbmd0aDtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZDtcbiAgICAgICAgcmV0dXJuIHQucGF5bG9hZC5uYW1lZFF1ZXJ5ID8gdGhpcy5xdWVyaWVzLnB1c2godC5wYXlsb2FkLm5hbWVkUXVlcnkpIDogdC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGEgPyAodGhpcy5kb2N1bWVudHMucHVzaCh7XG4gICAgICAgICAgICBtZXRhZGF0YTogdC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGFcbiAgICAgICAgfSksIHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhLmV4aXN0cyB8fCArK2UpIDogdC5wYXlsb2FkLmRvY3VtZW50ICYmICh0aGlzLmRvY3VtZW50c1t0aGlzLmRvY3VtZW50cy5sZW5ndGggLSAxXS5kb2N1bWVudCA9IHQucGF5bG9hZC5kb2N1bWVudCwgXG4gICAgICAgICsrZSksIGUgIT09IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID8gKHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID0gZSwgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpKSA6IG51bGw7XG4gICAgfVxuICAgIHBvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXAsIG4gPSBuZXcgWW8odGhpcy5rKTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIGlmIChzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLkhuKHMubWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygcy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IChlLmdldChuKSB8fCBEbigpKS5hZGQodCk7XG4gICAgICAgICAgICAgICAgZS5zZXQobiwgcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvZ3Jlc3MgdG8gJ1N1Y2Nlc3MnIGFuZCByZXR1cm4gdGhlIHVwZGF0ZWQgcHJvZ3Jlc3MuXG4gICAgICovICAgIGFzeW5jIGNvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgUHIodGhpcy5sb2NhbFN0b3JlLCBuZXcgWW8odGhpcy5rKSwgdGhpcy5kb2N1bWVudHMsIHRoaXMubW8uaWQpLCBlID0gdGhpcy5wbyh0aGlzLmRvY3VtZW50cyk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnF1ZXJpZXMpIGF3YWl0IHZyKHRoaXMubG9jYWxTdG9yZSwgdCwgZS5nZXQodC5uYW1lKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiU3VjY2Vzc1wiLCBuZXcgY3IoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcyksIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgaW5pdGlhbCBwcm9ncmVzcyBvZlxuICogbG9hZGluZyBhIGJ1bmRsZS5cbiAqLyBmdW5jdGlvbiBabyh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwLFxuICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgdG90YWxEb2N1bWVudHM6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgIHRvdGFsQnl0ZXM6IHQudG90YWxCeXRlc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRoYXQgdGhlIGxvYWRpbmdcbiAqIGhhcyBzdWNjZWVkZWQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyB0YSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBlYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXQgZG9jcyBhcmUgaW5cbiAqIGEgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzIHRvIGRvY3MsIGFuZCBhcHBsaWVzXG4gKiB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0IHBvc3NpYmxlIHJlc3VsdHMuXG4gKi8gY2xhc3MgbmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLlRvID0gZSwgdGhpcy5FbyA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgICAgICB0aGlzLklvID0gRG4oKSwgXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBEbigpLCB0aGlzLkFvID0gQ2UodCksIHRoaXMuUm8gPSBuZXcgTG8odGhpcy5Bbyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIHRoaXMgdmlldy5cbiAgICAgKi8gICAgZ2V0IGJvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5UbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyAtIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAgICAgKiBAcmV0dXJucyBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxuICAgICAqLyAgICBQbyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gZS52byA6IG5ldyBCbywgcyA9IGUgPyBlLlJvIDogdGhpcy5SbztcbiAgICAgICAgbGV0IGkgPSBlID8gZS5tdXRhdGVkS2V5cyA6IHRoaXMubXV0YXRlZEtleXMsIHIgPSBzLCBvID0gITE7XG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxuICAgICAgICBjb25zdCBhID0gcGUodGhpcy5xdWVyeSkgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5sYXN0KCkgOiBudWxsLCBjID0gVGUodGhpcy5xdWVyeSkgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5maXJzdCgpIDogbnVsbDtcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXG4gICAgICAgIGlmICh0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gcy5nZXQodCksIGggPSBEZSh0aGlzLnF1ZXJ5LCBlKSA/IGUgOiBudWxsLCBsID0gISF1ICYmIHRoaXMubXV0YXRlZEtleXMuaGFzKHUua2V5KSwgZiA9ICEhaCAmJiAoaC5oYXNMb2NhbE11dGF0aW9ucyB8fCBcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxuICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgdGhpcy5tdXRhdGVkS2V5cy5oYXMoaC5rZXkpICYmIGguaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICAgICAgICAgIGxldCBkID0gITE7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodSAmJiBoKSB7XG4gICAgICAgICAgICAgICAgdS5kYXRhLmlzRXF1YWwoaC5kYXRhKSA/IGwgIT09IGYgJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIE1ldGFkYXRhICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICAgICAgfSksIGQgPSAhMCkgOiB0aGlzLlZvKHUsIGgpIHx8IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITAsIChhICYmIHRoaXMuQW8oaCwgYSkgPiAwIHx8IGMgJiYgdGhpcy5BbyhoLCBjKSA8IDApICYmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXG4gICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIH0gZWxzZSAhdSAmJiBoID8gKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgfSksIGQgPSAhMCkgOiB1ICYmICFoICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdVxuICAgICAgICAgICAgfSksIGQgPSAhMCwgKGEgfHwgYykgJiYgKFxuICAgICAgICAgICAgLy8gQSBkb2Mgd2FzIHJlbW92ZWQgZnJvbSBhIGZ1bGwgbGltaXQgcXVlcnkuIFdlJ2xsIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIHJlcXVlcnkgZnJvbSB0aGUgbG9jYWwgY2FjaGUgdG8gc2VlIGlmIHdlIGtub3cgYWJvdXQgc29tZSBvdGhlclxuICAgICAgICAgICAgLy8gZG9jIHRoYXQgc2hvdWxkIGJlIGluIHRoZSByZXN1bHRzLlxuICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICBkICYmIChoID8gKHIgPSByLmFkZChoKSwgaSA9IGYgPyBpLmFkZCh0KSA6IGkuZGVsZXRlKHQpKSA6IChyID0gci5kZWxldGUodCksIGkgPSBpLmRlbGV0ZSh0KSkpO1xuICAgICAgICB9KSksIHBlKHRoaXMucXVlcnkpIHx8IFRlKHRoaXMucXVlcnkpKSBmb3IgKDtyLnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0OyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwZSh0aGlzLnF1ZXJ5KSA/IHIubGFzdCgpIDogci5maXJzdCgpO1xuICAgICAgICAgICAgciA9IHIuZGVsZXRlKHQua2V5KSwgaSA9IGkuZGVsZXRlKHQua2V5KSwgbi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBSbzogcixcbiAgICAgICAgICAgIHZvOiBuLFxuICAgICAgICAgICAgQm46IG8sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogaVxuICAgICAgICB9O1xuICAgIH1cbiAgICBWbyh0LCBlKSB7XG4gICAgICAgIC8vIFdlIHN1cHByZXNzIHRoZSBpbml0aWFsIGNoYW5nZSBldmVudCBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSBtb2RpZmllZCBhc1xuICAgICAgICAvLyBwYXJ0IG9mIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgKGUuZy4gd2hlbiB0aGUgdmFsdWUgb2YgYSBzZXJ2ZXIgdHJhbnNmb3JtXG4gICAgICAgIC8vIGlzIGFwcGxpZWQpIGFzIFdhdGNoIHdpbGwgc2VuZCB1cyB0aGUgc2FtZSBkb2N1bWVudCBhZ2Fpbi5cbiAgICAgICAgLy8gQnkgc3VwcHJlc3NpbmcgdGhlIGV2ZW50LCB3ZSBvbmx5IHJhaXNlIHR3byB1c2VyIHZpc2libGUgZXZlbnRzIChvbmUgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpIGluc3RlYWQgb2YgdGhyZWVcbiAgICAgICAgLy8gKG9uZSB3aXRoIGBoYXNQZW5kaW5nV3JpdGVzYCwgdGhlIG1vZGlmaWVkIGRvY3VtZW50IHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KS5cbiAgICAgICAgcmV0dXJuIHQuaGFzTG9jYWxNdXRhdGlvbnMgJiYgZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgIWUuaGFzTG9jYWxNdXRhdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gVmlld0RvY3VtZW50Q2hhbmdlcyBhbmQgb3B0aW9uYWxseSB1cGRhdGVzXG4gICAgICogbGltYm8gZG9jcyBhbmQgc3luYyBzdGF0ZSBmcm9tIHRoZSBwcm92aWRlZCB0YXJnZXQgY2hhbmdlLlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIHNldCBvZiBjaGFuZ2VzIHRvIG1ha2UgdG8gdGhlIHZpZXcncyBkb2NzLlxuICAgICAqIEBwYXJhbSB1cGRhdGVMaW1ib0RvY3VtZW50cyAtIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvblxuICAgICAqICAgICAgICB0aGlzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIC0gQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIGlPUy9BbmRyb2lkIGNsaWVudHMgYWx3YXlzIGNvbXB1dGUgbGltYm8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICBhcHBseUNoYW5nZXModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5SbztcbiAgICAgICAgdGhpcy5SbyA9IHQuUm8sIHRoaXMubXV0YXRlZEtleXMgPSB0Lm11dGF0ZWRLZXlzO1xuICAgICAgICAvLyBTb3J0IGNoYW5nZXMgYmFzZWQgb24gdHlwZSBhbmQgcXVlcnkgY29tcGFyYXRvclxuICAgICAgICBjb25zdCBpID0gdC52by5ubygpO1xuICAgICAgICBpLnNvcnQoKCh0LCBlKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgbWV0YWRhdGEgY2hhbmdlIGlzIGNvbnZlcnRlZCB0byBhIG1vZGlmaWVkIGNoYW5nZSBhdCB0aGUgcHVibGljXG4gICAgICAgICAgICAgICAgICAgIC8vIGFwaSBsYXllci4gIFNpbmNlIHdlIHNvcnQgYnkgZG9jdW1lbnQga2V5IGFuZCB0aGVuIGNoYW5nZSB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAvLyBtZXRhZGF0YSBhbmQgbW9kaWZpZWQgY2hhbmdlcyBtdXN0IGJlIHNvcnRlZCBlcXVpdmFsZW50bHkuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbih0KSAtIG4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQudHlwZSwgZS50eXBlKSB8fCB0aGlzLkFvKHQuZG9jLCBlLmRvYykpKSwgdGhpcy5TbyhuKTtcbiAgICAgICAgY29uc3QgciA9IGUgPyB0aGlzLkRvKCkgOiBbXSwgbyA9IDAgPT09IHRoaXMuSW8uc2l6ZSAmJiB0aGlzLmN1cnJlbnQgPyAxIC8qIFN5bmNlZCAqLyA6IDAgLyogTG9jYWwgKi8gLCBhID0gbyAhPT0gdGhpcy5FbztcbiAgICAgICAgaWYgKHRoaXMuRW8gPSBvLCAwICE9PSBpLmxlbmd0aCB8fCBhKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNuYXBzaG90OiBuZXcgVW8odGhpcy5xdWVyeSwgdC5SbywgcywgaSwgdC5tdXRhdGVkS2V5cywgMCAvKiBMb2NhbCAqLyA9PT0gbywgYSwgXG4gICAgICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExKSxcbiAgICAgICAgICAgICAgICBDbzogclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBDbzogclxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxuICAgICAqLyAgICBybyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgJiYgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gdCA/IChcbiAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXG4gICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxuICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xuICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIHRoaXMuYXBwbHlDaGFuZ2VzKHtcbiAgICAgICAgICAgIFJvOiB0aGlzLlJvLFxuICAgICAgICAgICAgdm86IG5ldyBCbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiB0aGlzLm11dGF0ZWRLZXlzLFxuICAgICAgICAgICAgQm46ICExXG4gICAgICAgIH0sIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpKSA6IHtcbiAgICAgICAgICAgIENvOiBbXVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXG4gICAgICovICAgIE5vKHQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlbW90ZSBlbmQgc2F5cyBpdCdzIHBhcnQgb2YgdGhpcyBxdWVyeSwgaXQncyBub3QgaW4gbGltYm8uXG4gICAgICAgIHJldHVybiAhdGhpcy5Uby5oYXModCkgJiYgKFxuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgZG9lc24ndCB0aGluayBpdCdzIGEgcmVzdWx0LCBzbyBpdCBzaG91bGRuJ3QgYmUgaW4gbGltYm8uXG4gICAgICAgICEhdGhpcy5Sby5oYXModCkgJiYgIXRoaXMuUm8uZ2V0KHQpLmhhc0xvY2FsTXV0YXRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzeW5jZWREb2N1bWVudHMsIGN1cnJlbnQsIGFuZCBsaW1ibyBkb2NzIGJhc2VkIG9uIHRoZSBnaXZlbiBjaGFuZ2UuXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxuICAgICAqLyAgICBTbyh0KSB7XG4gICAgICAgIHQgJiYgKHQuYWRkZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLlRvID0gdGhpcy5Uby5hZGQodCkpKSwgdC5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHt9KSksIFxuICAgICAgICB0LnJlbW92ZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLlRvID0gdGhpcy5Uby5kZWxldGUodCkpKSwgdGhpcy5jdXJyZW50ID0gdC5jdXJyZW50KTtcbiAgICB9XG4gICAgRG8oKSB7XG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQpIHJldHVybiBbXTtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IERvIHRoaXMgaW5jcmVtZW50YWxseSBzbyB0aGF0IGl0J3Mgbm90IHF1YWRyYXRpYyB3aGVuXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLklvO1xuICAgICAgICB0aGlzLklvID0gRG4oKSwgdGhpcy5Sby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuTm8odC5rZXkpICYmICh0aGlzLklvID0gdGhpcy5Jby5hZGQodC5rZXkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuSW8uaGFzKHQpIHx8IGUucHVzaChuZXcgZWEodCkpO1xuICAgICAgICB9KSksIHRoaXMuSW8uZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmhhcyhuKSB8fCBlLnB1c2gobmV3IHRhKG4pKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxuICAgICAqIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBrbyh0KSB7XG4gICAgICAgIHRoaXMuVG8gPSB0LnpuLCB0aGlzLklvID0gRG4oKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuUG8odC5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXMoZSwgLyp1cGRhdGVMaW1ib0RvY3VtZW50cz0qLyAhMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgeG8oKSB7XG4gICAgICAgIHJldHVybiBVby5mcm9tSW5pdGlhbERvY3VtZW50cyh0aGlzLnF1ZXJ5LCB0aGlzLlJvLCB0aGlzLm11dGF0ZWRLZXlzLCAwIC8qIExvY2FsICovID09PSB0aGlzLkVvKTtcbiAgICB9XG59XG5cbi8qKlxuICogUXVlcnlWaWV3IGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSB0aGF0IFN5bmNFbmdpbmUgbmVlZHMgdG8ga2VlcCB0cmFjayBvZiBmb3JcbiAqIGEgcGFydGljdWxhciBxdWVyeS5cbiAqL1xuY2xhc3Mgc2Ege1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBpdHNlbGYuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBudW1iZXIgY3JlYXRlZCBieSB0aGUgY2xpZW50IHRoYXQgaXMgdXNlZCBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxuICAgICAqIGRvY3MgYXJlIGluIHRoZSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMsXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdFxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMudmlldyA9IG47XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi8gY2xhc3MgaWEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byB0cnVlIG9uY2Ugd2UndmUgcmVjZWl2ZWQgYSBkb2N1bWVudC4gVGhpcyBpcyB1c2VkIGluXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xuICAgICAgICAgKiBkZWNpZGUgd2hldGhlciBpdCBuZWVkcyB0byBtYW51ZmFjdHVyZSBhIGRlbGV0ZSBldmVudCBmb3IgdGhlIHRhcmdldCBvbmNlXG4gICAgICAgICAqIHRoZSB0YXJnZXQgaXMgQ1VSUkVOVC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJG8gPSAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYFN5bmNFbmdpbmVgIGNvb3JkaW5hdGluZyB3aXRoIG90aGVyIHBhcnRzIG9mIFNESy5cbiAqXG4gKiBUaGUgcGFydHMgb2YgU3luY0VuZ2luZSB0aGF0IGFjdCBhcyBhIGNhbGxiYWNrIHRvIFJlbW90ZVN0b3JlIG5lZWQgdG8gYmVcbiAqIHJlZ2lzdGVyZWQgaW5kaXZpZHVhbGx5LiBUaGlzIGlzIGRvbmUgaW4gYHN5bmNFbmdpbmVXcml0ZSgpYCBhbmRcbiAqIGBzeW5jRW5naW5lTGlzdGVuKClgIChhcyB3ZWxsIGFzIGBhcHBseVByaW1hcnlTdGF0ZSgpYCkgYXMgdGhlc2UgbWV0aG9kc1xuICogc2VydmUgYXMgZW50cnkgcG9pbnRzIHRvIFJlbW90ZVN0b3JlJ3MgZnVuY3Rpb25hbGl0eS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqLyBjbGFzcyByYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5yZW1vdGVTdG9yZSA9IGUsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHMsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHIsIHRoaXMuT28gPSB7fSwgdGhpcy5GbyA9IG5ldyB6aSgodCA9PiBWZSh0KSksIHZlKSwgXG4gICAgICAgIHRoaXMuTW8gPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBrZXlzIG9mIGRvY3VtZW50cyB0aGF0IGFyZSBpbiBsaW1ibyBmb3Igd2hpY2ggd2UgaGF2ZW4ndCB5ZXQgc3RhcnRlZCBhXG4gICAgICAgICAqIGxpbWJvIHJlc29sdXRpb24gcXVlcnkuIFRoZSBzdHJpbmdzIGluIHRoaXMgc2V0IGFyZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgICogYGtleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpYCB3aGVyZSBga2V5YCBpcyBhIGBEb2N1bWVudEtleWAgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYFNldGAgdHlwZSB3YXMgY2hvc2VuIGJlY2F1c2UgaXQgcHJvdmlkZXMgZWZmaWNpZW50IGxvb2t1cCBhbmQgcmVtb3ZhbFxuICAgICAgICAgKiBvZiBhcmJpdHJhcnkgZWxlbWVudHMgYW5kIGl0IGFsc28gbWFpbnRhaW5zIGluc2VydGlvbiBvcmRlciwgcHJvdmlkaW5nIHRoZVxuICAgICAgICAgKiBkZXNpcmVkIHF1ZXVlLWxpa2UgRklGTyBzZW1hbnRpY3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkxvID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgdGFyZ2V0IElEIGZvciBlYWNoIGRvY3VtZW50IHRoYXQgaXMgaW4gbGltYm8gd2l0aCBhblxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5CbyA9IG5ldyB5bihEdC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5VbyA9IG5ldyBNYXAsIHRoaXMucW8gPSBuZXcgU3IsIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY29tcGxldGlvbiBoYW5kbGVycywgaW5kZXhlZCBieSBVc2VyIGFuZCBCYXRjaElkLiAqL1xuICAgICAgICB0aGlzLktvID0ge30sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIGFsbCBwZW5kaW5nIHdyaXRlcyB0byBiZSBhY2tub3dsZWRnZWQuICovXG4gICAgICAgIHRoaXMuam8gPSBuZXcgTWFwLCB0aGlzLlFvID0gT2kucmUoKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMuV28gPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy5XbztcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gb2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSAkYSh0KTtcbiAgICBsZXQgcywgaTtcbiAgICBjb25zdCByID0gbi5Gby5nZXQoZSk7XG4gICAgaWYgKHIpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xuICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xuICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxuICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xuICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxuICAgIHMgPSByLnRhcmdldElkLCBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQocyksIGkgPSByLnZpZXcueG8oKTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBUcihuLmxvY2FsU3RvcmUsIGJlKGUpKSwgciA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcyA9IHQudGFyZ2V0SWQsIGkgPSBhd2FpdCBhYShuLCBlLCBzLCBcImN1cnJlbnRcIiA9PT0gciksIG4uaXNQcmltYXJ5Q2xpZW50ICYmIGxvKG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIGFhKHQsIGUsIG4sIHMpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIHQuR28gPSAoZSwgbiwgcykgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGUudmlldy5QbyhuKTtcbiAgICAgICAgaS5CbiAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBJcih0LmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogdH0pID0+IGUudmlldy5Qbyh0LCBpKSkpKTtcbiAgICAgICAgY29uc3QgciA9IHMgJiYgcy50YXJnZXRDaGFuZ2VzLmdldChlLnRhcmdldElkKSwgbyA9IGUudmlldy5hcHBseUNoYW5nZXMoaSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgcik7XG4gICAgICAgIHJldHVybiBUYSh0LCBlLnRhcmdldElkLCBvLkNvKSwgby5zbmFwc2hvdDtcbiAgICB9KHQsIGUsIG4sIHMpO1xuICAgIGNvbnN0IGkgPSBhd2FpdCBJcih0LmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCByID0gbmV3IG5hKGUsIGkuem4pLCBvID0gci5QbyhpLmRvY3VtZW50cyksIGEgPSB4bi5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UobiwgcyAmJiBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSB0Lm9ubGluZVN0YXRlKSwgYyA9IHIuYXBwbHlDaGFuZ2VzKG8sIFxuICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgYSk7XG4gICAgVGEodCwgbiwgYy5Dbyk7XG4gICAgY29uc3QgdSA9IG5ldyBzYShlLCBuLCByKTtcbiAgICByZXR1cm4gdC5Gby5zZXQoZSwgdSksIHQuTW8uaGFzKG4pID8gdC5Nby5nZXQobikucHVzaChlKSA6IHQuTW8uc2V0KG4sIFsgZSBdKSwgYy5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIGNhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KSwgcyA9IG4uRm8uZ2V0KGUpLCBpID0gbi5Nby5nZXQocy50YXJnZXRJZCk7XG4gICAgaWYgKGkubGVuZ3RoID4gMSkgcmV0dXJuIG4uTW8uc2V0KHMudGFyZ2V0SWQsIGkuZmlsdGVyKCh0ID0+ICF2ZSh0LCBlKSkpKSwgdm9pZCBuLkZvLmRlbGV0ZShlKTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChzLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpIHx8IGF3YWl0IEVyKG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKHMudGFyZ2V0SWQpLCBmbyhuLnJlbW90ZVN0b3JlLCBzLnRhcmdldElkKSwgXG4gICAgICAgICAgICB5YShuLCBzLnRhcmdldElkKTtcbiAgICAgICAgfSkpLmNhdGNoKFVpKTtcbiAgICB9IGVsc2UgeWEobiwgcy50YXJnZXRJZCksIGF3YWl0IEVyKG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIHVhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gT2EodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBLKHQpLCBzID0gY3Qubm93KCksIGkgPSBlLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIERuKCkpO1xuICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG4uV24udm4odCwgaSkubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICAgICAgciA9IGk7XG4gICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgIC8vIHdlIHJlY29yZCB0aGUgYmFzZSBzdGF0ZSBpbiBhIHNlcGFyYXRlIHBhdGNoIG11dGF0aW9uLiBUaGlzIGlzXG4gICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbm4odCwgci5nZXQodC5rZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBlICYmIFxuICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0cz10cnVlXG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgYW4odC5rZXksIGUsIFd0KGUudmFsdWUubWFwVmFsdWUpLCBZZS5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuLkFuLmFkZE11dGF0aW9uQmF0Y2godCwgcywgbywgZSk7XG4gICAgICAgICAgICB9KSkpKS50aGVuKCh0ID0+ICh0LmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHIpLCB7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogdC5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IHJcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0ocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24odC5iYXRjaElkKSwgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgbGV0IHMgPSB0LktvW3QuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICBzIHx8IChzID0gbmV3IHluKHJ0KSk7XG4gICAgICAgICAgICBzID0gcy5pbnNlcnQoZSwgbiksIHQuS29bdC5jdXJyZW50VXNlci50b0tleSgpXSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXNvbHZlcyBvciByZWplY3RzIHRoZSB1c2VyIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHRoZW4gZGlzY2FyZHNcbiAqIGl0LlxuICovIChzLCB0LmJhdGNoSWQsIG4pLCBhd2FpdCBBYShzLCB0LmNoYW5nZXMpLCBhd2FpdCBibyhzLnJlbW90ZVN0b3JlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIElmIHdlIGNhbid0IHBlcnNpc3QgdGhlIG11dGF0aW9uLCB3ZSByZWplY3QgdGhlIHVzZXIgY2FsbGJhY2sgYW5kXG4gICAgICAgIC8vIGRvbid0IHNlbmQgdGhlIG11dGF0aW9uLiBUaGUgdXNlciBjYW4gdGhlbiByZXRyeSB0aGUgd3JpdGUuXG4gICAgICAgIGNvbnN0IGUgPSBNbyh0LCBcIkZhaWxlZCB0byBwZXJzaXN0IHdyaXRlXCIpO1xuICAgICAgICBuLnJlamVjdChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBvbmUgcmVtb3RlIGV2ZW50IHRvIHRoZSBzeW5jIGVuZ2luZSwgbm90aWZ5aW5nIGFueSB2aWV3cyBvZiB0aGVcbiAqIGNoYW5nZXMsIGFuZCByZWxlYXNpbmcgYW55IHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IHdvdWxkIGJlY29tZVxuICogdmlzaWJsZSBiZWNhdXNlIG9mIHRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoZSByZW1vdGUgZXZlbnQgY29udGFpbnMuXG4gKi8gYXN5bmMgZnVuY3Rpb24gaGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBncihuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLlVvLmdldChlKTtcbiAgICAgICAgICAgIHMgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgVSh0LmFkZGVkRG9jdW1lbnRzLnNpemUgKyB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA8PSAxKSwgXG4gICAgICAgICAgICB0LmFkZGVkRG9jdW1lbnRzLnNpemUgPiAwID8gcy4kbyA9ICEwIDogdC5tb2RpZmllZERvY3VtZW50cy5zaXplID4gMCA/IFUocy4kbykgOiB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKFUocy4kbyksIFxuICAgICAgICAgICAgcy4kbyA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgQWEobiwgdCwgZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBVaSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gbGEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBLKHQpO1xuICAgIC8vIElmIHdlIGFyZSB0aGUgc2Vjb25kYXJ5IGNsaWVudCwgd2UgZXhwbGljaXRseSBpZ25vcmUgdGhlIHJlbW90ZSBzdG9yZSdzXG4gICAgLy8gb25saW5lIHN0YXRlICh0aGUgbG9jYWwgY2xpZW50IG1heSBnbyBvZmZsaW5lLCBldmVuIHRob3VnaCB0aGUgcHJpbWFyeVxuICAgIC8vIHRhYiByZW1haW5zIG9ubGluZSkgYW5kIG9ubHkgYXBwbHkgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlIGZyb21cbiAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgaWYgKHMuaXNQcmltYXJ5Q2xpZW50ICYmIDAgLyogUmVtb3RlU3RvcmUgKi8gPT09IG4gfHwgIXMuaXNQcmltYXJ5Q2xpZW50ICYmIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8gPT09IG4pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBzLkZvLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gcy52aWV3LnJvKGUpO1xuICAgICAgICAgICAgaS5zbmFwc2hvdCAmJiB0LnB1c2goaS5zbmFwc2hvdCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEsodCk7XG4gICAgICAgICAgICBuLm9ubGluZVN0YXRlID0gZTtcbiAgICAgICAgICAgIGxldCBzID0gITE7XG4gICAgICAgICAgICBuLnF1ZXJpZXMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5saXN0ZW5lcnMpIFxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgICAgICAgICAgICAgIHQucm8oZSkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICB9KSksIHMgJiYgem8obik7XG4gICAgICAgIH0ocy5ldmVudE1hbmFnZXIsIGUpLCB0Lmxlbmd0aCAmJiBzLk9vLmJyKHQpLCBzLm9ubGluZVN0YXRlID0gZSwgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVqZWN0cyB0aGUgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0SUQuIFRoaXMgY2FuIGJlIHRyaWdnZXJlZCBieSB0aGVcbiAqIGJhY2tlbmQgZm9yIGFueSBhY3RpdmUgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldElEIGNvcnJlc3BvbmRzIHRvIG9uZSBwcmV2aW91c2x5IGluaXRpYXRlZCBieSB0aGVcbiAqIHVzZXIgYXMgcGFydCBvZiBUYXJnZXREYXRhIHBhc3NlZCB0byBsaXN0ZW4oKSBvbiBSZW1vdGVTdG9yZS5cbiAqIEBwYXJhbSBlcnIgLSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb25kaXRpb24gdGhhdCBoYXMgZm9yY2VkIHRoZSByZWplY3Rpb24uXG4gKiBOZWFybHkgYWx3YXlzIHRoaXMgd2lsbCBiZSBhbiBpbmRpY2F0aW9uIHRoYXQgdGhlIHVzZXIgaXMgbm8gbG9uZ2VyXG4gKiBhdXRob3JpemVkIHRvIHNlZSB0aGUgZGF0YSBtYXRjaGluZyB0aGUgdGFyZ2V0LlxuICovIGFzeW5jIGZ1bmN0aW9uIGZhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSyh0KTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKTtcbiAgICBjb25zdCBpID0gcy5Vby5nZXQoZSksIHIgPSBpICYmIGkua2V5O1xuICAgIGlmIChyKSB7XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBXZSByZWFsbHkgb25seSBzaG91bGQgZG8gdGhlIGZvbGxvd2luZyBvbiBwZXJtaXNzaW9uXG4gICAgICAgIC8vIGRlbmllZCBlcnJvcnMsIGJ1dCB3ZSBkb24ndCBoYXZlIHRoZSBjYXVzZSBjb2RlIGhlcmUuXG4gICAgICAgIC8vIEl0J3MgYSBsaW1ibyBkb2MuIENyZWF0ZSBhIHN5bnRoZXRpYyBldmVudCBzYXlpbmcgaXQgd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIGhhY2suIElkZWFsbHksIHdlIHdvdWxkIGhhdmUgYSBtZXRob2QgaW4gdGhlIGxvY2FsXG4gICAgICAgIC8vIHN0b3JlIHRvIHB1cmdlIGEgZG9jdW1lbnQuIEhvd2V2ZXIsIGl0IHdvdWxkIGJlIHRyaWNreSB0byBrZWVwIGFsbCBvZlxuICAgICAgICAvLyB0aGUgbG9jYWwgc3RvcmUncyBpbnZhcmlhbnRzIHdpdGggYW5vdGhlciBtZXRob2QuXG4gICAgICAgIGxldCB0ID0gbmV3IHluKER0LmNvbXBhcmF0b3IpO1xuICAgICAgICB0ID0gdC5pbnNlcnQociwgR3QubmV3Tm9Eb2N1bWVudChyLCB1dC5taW4oKSkpO1xuICAgICAgICBjb25zdCBuID0gRG4oKS5hZGQociksIGkgPSBuZXcga24odXQubWluKCksIFxuICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyBuZXcgTWFwLCBcbiAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IEVuKHJ0KSwgdCwgbik7XG4gICAgICAgIGF3YWl0IGhhKHMsIGkpLCBcbiAgICAgICAgLy8gU2luY2UgdGhpcyBxdWVyeSBmYWlsZWQsIHdlIHdvbid0IHdhbnQgdG8gbWFudWFsbHkgdW5saXN0ZW4gdG8gaXQuXG4gICAgICAgIC8vIFdlIG9ubHkgcmVtb3ZlIGl0IGZyb20gYm9va2tlZXBpbmcgYWZ0ZXIgd2Ugc3VjY2Vzc2Z1bGx5IGFwcGxpZWQgdGhlXG4gICAgICAgIC8vIFJlbW90ZUV2ZW50LiBJZiBgYXBwbHlSZW1vdGVFdmVudCgpYCB0aHJvd3MsIHdlIHdhbnQgdG8gcmUtbGlzdGVuIHRvXG4gICAgICAgIC8vIHRoaXMgcXVlcnkgd2hlbiB0aGUgUmVtb3RlU3RvcmUgcmVzdGFydHMgdGhlIFdhdGNoIHN0cmVhbSwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIHJlLXRyaWdnZXIgdGhlIHRhcmdldCBmYWlsdXJlLlxuICAgICAgICBzLkJvID0gcy5Cby5yZW1vdmUociksIHMuVW8uZGVsZXRlKGUpLCBJYShzKTtcbiAgICB9IGVsc2UgYXdhaXQgRXIocy5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4geWEocywgZSwgbikpKS5jYXRjaChVaSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KSwgcyA9IGUuYmF0Y2guYmF0Y2hJZDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX3Iobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHRcbiAgICAgICAgLy8gdXApLCBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlblxuICAgICAgICAvLyBiZWZvcmUgbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBnYShuLCBzLCAvKmVycm9yPSovIG51bGwpLCBtYShuLCBzKSwgbi5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKHMsIFwiYWNrbm93bGVkZ2VkXCIpLCBcbiAgICAgICAgYXdhaXQgQWEobiwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBVaSh0KTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSyh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEsodCk7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlamVjdCBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5Bbi5sb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpLm5leHQoKGUgPT4gKFUobnVsbCAhPT0gZSksIHMgPSBlLmtleXMoKSwgbi5Bbi5yZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpKSkpLm5leHQoKCgpID0+IG4uQW4ucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLlduLnZuKHQsIHMpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZ1xuICogc2VydmVyIHJlc3BvbnNlLlxuICpcbiAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICovIChzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXG4gICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxuICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIGdhKHMsIGUsIG4pLCBtYShzLCBlKSwgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbiksIFxuICAgICAgICBhd2FpdCBBYShzLCB0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIGF3YWl0IFVpKG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXG4gKiBhcmUgYWNrbm93bGVkZ2VkIC5cbiAqLyBhc3luYyBmdW5jdGlvbiBfYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCk7XG4gICAgeW8obi5yZW1vdGVTdG9yZSkgfHwgTyhcIlN5bmNFbmdpbmVcIiwgXCJUaGUgbmV0d29yayBpcyBkaXNhYmxlZC4gVGhlIHRhc2sgcmV0dXJuZWQgYnkgJ2F3YWl0UGVuZGluZ1dyaXRlcygpJyB3aWxsIG5vdCBjb21wbGV0ZSB1bnRpbCB0aGUgbmV0d29yayBpcyBlbmFibGVkLlwiKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEsodCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZS5Bbi5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpKSk7XG4gICAgICAgIH0obi5sb2NhbFN0b3JlKTtcbiAgICAgICAgaWYgKC0xID09PSB0KSBcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheSBpZiB0aGVyZSBpcyBubyBwZW5kaW5nIHdyaXRlcyBhdCB0aGUgbW9tZW50LlxuICAgICAgICByZXR1cm4gdm9pZCBlLnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgcyA9IG4uam8uZ2V0KHQpIHx8IFtdO1xuICAgICAgICBzLnB1c2goZSksIG4uam8uc2V0KHQsIHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IE1vKHQsIFwiSW5pdGlhbGl6YXRpb24gb2Ygd2FpdEZvclBlbmRpbmdXcml0ZXMoKSBvcGVyYXRpb24gZmFpbGVkXCIpO1xuICAgICAgICBlLnJlamVjdChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNhbGxiYWNrcyB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGlzIGJhdGNoIGlkIHRvIGdldCBhY2tub3dsZWRnZWQgYnkgc2VydmVyLFxuICogaWYgdGhlcmUgYXJlIGFueS5cbiAqLyBmdW5jdGlvbiBtYSh0LCBlKSB7XG4gICAgKHQuam8uZ2V0KGUpIHx8IFtdKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5yZXNvbHZlKCk7XG4gICAgfSkpLCB0LmpvLmRlbGV0ZShlKTtcbn1cblxuLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBnYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEsodCk7XG4gICAgbGV0IGkgPSBzLktvW3MuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcbiAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgY29uc3QgdCA9IGkuZ2V0KGUpO1xuICAgICAgICB0ICYmIChuID8gdC5yZWplY3QobikgOiB0LnJlc29sdmUoKSwgaSA9IGkucmVtb3ZlKGUpKSwgcy5Lb1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHlhKHQsIGUsIG4gPSBudWxsKSB7XG4gICAgdC5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGUpO1xuICAgIGZvciAoY29uc3QgcyBvZiB0Lk1vLmdldChlKSkgdC5Gby5kZWxldGUocyksIG4gJiYgdC5Pby56byhzLCBuKTtcbiAgICBpZiAodC5Nby5kZWxldGUoZSksIHQuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIHQucW8udXMoZSkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnFvLmNvbnRhaW5zS2V5KGUpIHx8IFxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICBwYSh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcGEodCwgZSkge1xuICAgIHQuTG8uZGVsZXRlKGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoZSB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuIEluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGUga2V5IHdvbid0IGV4aXN0IGluIGBsaW1ib1RhcmdldHNCeUtleWAuIE9ubHkgZG8gdGhlIGNsZWFudXAgaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgdGFyZ2V0LlxuICAgIGNvbnN0IG4gPSB0LkJvLmdldChlKTtcbiAgICBudWxsICE9PSBuICYmIChmbyh0LnJlbW90ZVN0b3JlLCBuKSwgdC5CbyA9IHQuQm8ucmVtb3ZlKGUpLCB0LlVvLmRlbGV0ZShuKSwgSWEodCkpO1xufVxuXG5mdW5jdGlvbiBUYSh0LCBlLCBuKSB7XG4gICAgZm9yIChjb25zdCBzIG9mIG4pIGlmIChzIGluc3RhbmNlb2YgdGEpIHQucW8uYWRkUmVmZXJlbmNlKHMua2V5LCBlKSwgRWEodCwgcyk7IGVsc2UgaWYgKHMgaW5zdGFuY2VvZiBlYSkge1xuICAgICAgICBPKFwiU3luY0VuZ2luZVwiLCBcIkRvY3VtZW50IG5vIGxvbmdlciBpbiBsaW1ibzogXCIgKyBzLmtleSksIHQucW8ucmVtb3ZlUmVmZXJlbmNlKHMua2V5LCBlKTtcbiAgICAgICAgdC5xby5jb250YWluc0tleShzLmtleSkgfHwgXG4gICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICBwYSh0LCBzLmtleSk7XG4gICAgfSBlbHNlIEIoKTtcbn1cblxuZnVuY3Rpb24gRWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IG4ucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB0LkJvLmdldChuKSB8fCB0LkxvLmhhcyhzKSB8fCAoTyhcIlN5bmNFbmdpbmVcIiwgXCJOZXcgZG9jdW1lbnQgaW4gbGltYm86IFwiICsgbiksIHQuTG8uYWRkKHMpLCBcbiAgICBJYSh0KSk7XG59XG5cbi8qKlxuICogU3RhcnRzIGxpc3RlbnMgZm9yIGRvY3VtZW50cyBpbiBsaW1ibyB0aGF0IGFyZSBlbnF1ZXVlZCBmb3IgcmVzb2x1dGlvbixcbiAqIHN1YmplY3QgdG8gYSBtYXhpbXVtIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLlxuICpcbiAqIFdpdGhvdXQgYm91bmRpbmcgdGhlIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLCB0aGUgc2VydmVyIGNhbiBmYWlsXG4gKiB3aXRoIFwicmVzb3VyY2UgZXhoYXVzdGVkXCIgZXJyb3JzIHdoaWNoIGNhbiBsZWFkIHRvIHBhdGhvbG9naWNhbCBjbGllbnRcbiAqIGJlaGF2aW9yIGFzIHNlZW4gaW4gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvMjY4My5cbiAqLyBmdW5jdGlvbiBJYSh0KSB7XG4gICAgZm9yICg7dC5Mby5zaXplID4gMCAmJiB0LkJvLnNpemUgPCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOyApIHtcbiAgICAgICAgY29uc3QgZSA9IHQuTG8udmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICB0LkxvLmRlbGV0ZShlKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBEdCh3dC5mcm9tU3RyaW5nKGUpKSwgcyA9IHQuUW8ubmV4dCgpO1xuICAgICAgICB0LlVvLnNldChzLCBuZXcgaWEobikpLCB0LkJvID0gdC5Cby5pbnNlcnQobiwgcyksIGxvKHQucmVtb3RlU3RvcmUsIG5ldyBjaShiZSh5ZShuLnBhdGgpKSwgcywgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gLCBudC5JKSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBBYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEsodCksIGkgPSBbXSwgciA9IFtdLCBvID0gW107XG4gICAgcy5Gby5pc0VtcHR5KCkgfHwgKHMuRm8uZm9yRWFjaCgoKHQsIGEpID0+IHtcbiAgICAgICAgby5wdXNoKHMuR28oYSwgZSwgbikudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShhLnRhcmdldElkLCB0LmZyb21DYWNoZSA/IFwibm90LWN1cnJlbnRcIiA6IFwiY3VycmVudFwiKSwgXG4gICAgICAgICAgICAgICAgaS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBoci4kbihhLnRhcmdldElkLCB0KTtcbiAgICAgICAgICAgICAgICByLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgfSkpLCBhd2FpdCBQcm9taXNlLmFsbChvKSwgcy5Pby5icihpKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSyh0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHpzLmZvckVhY2goZSwgKGUgPT4genMuZm9yRWFjaChlLmtuLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpLm5leHQoKCgpID0+IHpzLmZvckVhY2goZS54biwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFacyh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIC8vIElmIGBub3RpZnlMb2NhbFZpZXdDaGFuZ2VzYCBmYWlscywgd2UgZGlkIG5vdCBhZHZhbmNlIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gbnVtYmVyIGZvciB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCB0cmlnZ2VyIHRoZW0gdG8gYmUgZGVsZXRlZCBlYXJsaWVyIHRoYW4gdGhleSBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUsIGJ1dCBpdCBzaG91bGQgbm90IGludmFsaWRhdGUgdGhlIGludGVncml0eSBvZiB0aGUgZGF0YS5cbiAgICAgICAgICAgIE8oXCJMb2NhbFN0b3JlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5xbi5nZXQoZSksIHMgPSB0LnNuYXBzaG90VmVyc2lvbiwgaSA9IHQud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocyk7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5xbiA9IG4ucW4uaW5zZXJ0KGUsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShzLmxvY2FsU3RvcmUsIHIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gUmEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgIGlmICghbi5jdXJyZW50VXNlci5pc0VxdWFsKGUpKSB7XG4gICAgICAgIE8oXCJTeW5jRW5naW5lXCIsIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCBlLnRvS2V5KCkpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgd3Iobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgbi5jdXJyZW50VXNlciA9IGUsIFxuICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgdC5qby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LnJlamVjdChuZXcgUShqLkNBTkNFTExFRCwgZSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdC5qby5jbGVhcigpO1xuICAgICAgICB9KG4sIFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSwgXG4gICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZShlLCB0LnJlbW92ZWRCYXRjaElkcywgdC5hZGRlZEJhdGNoSWRzKSwgYXdhaXQgQWEobiwgdC5Hbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEsodCksIHMgPSBuLlVvLmdldChlKTtcbiAgICBpZiAocyAmJiBzLiRvKSByZXR1cm4gRG4oKS5hZGQocy5rZXkpO1xuICAgIHtcbiAgICAgICAgbGV0IHQgPSBEbigpO1xuICAgICAgICBjb25zdCBzID0gbi5Nby5nZXQoZSk7XG4gICAgICAgIGlmICghcykgcmV0dXJuIHQ7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Gby5nZXQoZSk7XG4gICAgICAgICAgICB0ID0gdC51bmlvbldpdGgocy52aWV3LmJvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIFBhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KSwgcyA9IGF3YWl0IElyKG4ubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBlLnZpZXcua28ocyk7XG4gICAgcmV0dXJuIG4uaXNQcmltYXJ5Q2xpZW50ICYmIFRhKG4sIGUudGFyZ2V0SWQsIGkuQ28pLCBpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBuZXdseSBjaGFuZ2VkIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBhbmQgcmFpc2VzXG4gKiBzbmFwc2hvdHMgaWYgbmVlZGVkLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gdmEodCkge1xuICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgIHJldHVybiBScihlLmxvY2FsU3RvcmUpLnRoZW4oKHQgPT4gQWEoZSwgdCkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gVmEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBLKHQpLCByID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSyh0KSwgcyA9IEsobi5Bbik7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9va3VwIG11dGF0aW9uIGRvY3VtZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuWnQodCwgZSkubmV4dCgoZSA9PiBlID8gbi5Xbi52bih0LCBlKSA6IHpzLnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpO1xuICAgIG51bGwgIT09IHIgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBibyhpLnJlbW90ZVN0b3JlKSA6IFwiYWNrbm93bGVkZ2VkXCIgPT09IG4gfHwgXCJyZWplY3RlZFwiID09PSBuID8gKFxuICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXG4gICAgLy8gb3RoZXIgY2xpZW50cy5cbiAgICBnYShpLCBlLCBzIHx8IG51bGwpLCBtYShpLCBlKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBLKEsodCkuQW4pLmVlKGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpKSA6IEIoKSwgYXdhaXQgQWEoaSwgcikpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgTyhcIlN5bmNFbmdpbmVcIiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyBlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIFNhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSyh0KTtcbiAgICBpZiAoJGEobiksIE9hKG4pLCAhMCA9PT0gZSAmJiAhMCAhPT0gbi5Xbykge1xuICAgICAgICAvLyBTZWNvbmRhcnkgdGFicyBvbmx5IG1haW50YWluIFZpZXdzIGZvciB0aGVpciBsb2NhbCBsaXN0ZW5lcnMgYW5kIHRoZVxuICAgICAgICAvLyBWaWV3cyBpbnRlcm5hbCBzdGF0ZSBtYXkgbm90IGJlIDEwMCUgcG9wdWxhdGVkIChpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIHNlY29uZGFyeSB0YWJzIGRvbid0IHRyYWNrIHN5bmNlZERvY3VtZW50cywgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhlXG4gICAgICAgIC8vIHNlcnZlciBjb25zaWRlcnMgdG8gYmUgaW4gdGhlIHRhcmdldCkuIFNvIHdoZW4gYSBzZWNvbmRhcnkgYmVjb21lc1xuICAgICAgICAvLyBwcmltYXJ5LCB3ZSBuZWVkIHRvIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZpZXdzIGZvciBhbGwgdGFyZ2V0c1xuICAgICAgICAvLyBtYXRjaCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgICAgY29uc3QgdCA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCksIGUgPSBhd2FpdCBEYShuLCB0LnRvQXJyYXkoKSk7XG4gICAgICAgIG4uV28gPSAhMCwgYXdhaXQgeG8obi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgbG8obi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gZSAmJiAhMSAhPT0gbi5Xbykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uTW8uZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gdC5wdXNoKGkpIDogZSA9IGUudGhlbigoKCkgPT4gKHlhKG4sIGkpLCBcbiAgICAgICAgICAgIEVyKG4ubG9jYWxTdG9yZSwgaSwgXG4gICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKSkpKSwgZm8obi5yZW1vdGVTdG9yZSwgaSk7XG4gICAgICAgIH0pKSwgYXdhaXQgZSwgYXdhaXQgRGEobiwgdCksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gSyh0KTtcbiAgICAgICAgICAgIGUuVW8uZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBmbyhlLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgZS5xby5ocygpLCBlLlVvID0gbmV3IE1hcCwgZS5CbyA9IG5ldyB5bihEdC5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4uV28gPSAhMSwgYXdhaXQgeG8obi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gRGEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBLKHQpLCBpID0gW10sIHIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgY29uc3QgbiA9IHMuTW8uZ2V0KHQpO1xuICAgICAgICBpZiAobiAmJiAwICE9PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgZmV0Y2ggdGhlaXIgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgLy8gZnJvbSBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxuICAgICAgICAgICAgZSA9IGF3YWl0IFRyKHMubG9jYWxTdG9yZSwgYmUoblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5Gby5nZXQodCksIG4gPSBhd2FpdCBQYShzLCBlKTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHIucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IEFyKHMubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgICAgICBlID0gYXdhaXQgVHIocy5sb2NhbFN0b3JlLCBuKSwgYXdhaXQgYWEocywgQ2EobiksIHQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2goZSk7XG4gICAgfVxuICAgIHJldHVybiBzLk9vLmJyKHIpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIENhKHQpIHtcbiAgICByZXR1cm4gZ2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5vcmRlckJ5LCB0LmZpbHRlcnMsIHQubGltaXQsIFwiRlwiIC8qIEZpcnN0ICovICwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIE5hKHQpIHtcbiAgICBjb25zdCBlID0gSyh0KTtcbiAgICByZXR1cm4gSyhLKGUubG9jYWxTdG9yZSkucGVyc2lzdGVuY2UpLlRuKCk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBrYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IEsodCk7XG4gICAgaWYgKGkuV28pIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgIE8oXCJTeW5jRW5naW5lXCIsIFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpOyBlbHNlIGlmIChpLk1vLmhhcyhlKSkgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIFwiY3VycmVudFwiOlxuICAgICAgY2FzZSBcIm5vdC1jdXJyZW50XCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBScihpLmxvY2FsU3RvcmUpLCBzID0ga24uY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UoZSwgXCJjdXJyZW50XCIgPT09IG4pO1xuICAgICAgICAgICAgYXdhaXQgQWEoaSwgdCwgcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgRXIoaS5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCB5YShpLCBlLCBzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIEIoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiB4YSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9ICRhKHQpO1xuICAgIGlmIChzLldvKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAocy5Nby5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgTyhcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgQXIocy5sb2NhbFN0b3JlLCB0KSwgbiA9IGF3YWl0IFRyKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICBhd2FpdCBhYShzLCBDYShlKSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEpLCBsbyhzLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgcy5Nby5oYXModCkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IEVyKHMubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBmbyhzLnJlbW90ZVN0b3JlLCB0KSwgeWEocywgdCk7XG4gICAgICAgIH0pKS5jYXRjaChVaSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiAkYSh0KSB7XG4gICAgY29uc3QgZSA9IEsodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBoYS5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gYmEuYmluZChudWxsLCBlKSwgXG4gICAgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gZmEuYmluZChudWxsLCBlKSwgZS5Pby5iciA9IFdvLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBcbiAgICBlLk9vLnpvID0gR28uYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIGU7XG59XG5cbmZ1bmN0aW9uIE9hKHQpIHtcbiAgICBjb25zdCBlID0gSyh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBkYS5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IHdhLmJpbmQobnVsbCwgZSksIFxuICAgIGU7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIEZhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSyh0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgZS5nZXRNZXRhZGF0YSgpO1xuICAgICAgICAgICAgaWYgKGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gSyh0KSwgcyA9IHpuKGUuY3JlYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJoYXNOZXdlckJ1bmRsZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uWWUuZ2V0QnVuZGxlTWV0YWRhdGEodCwgZS5pZCkpKS50aGVuKCh0ID0+ICEhdCAmJiB0LmNyZWF0ZVRpbWUuY29tcGFyZVRvKHMpID49IDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBCdW5kbGVNZXRhZGF0YWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi8gKHQubG9jYWxTdG9yZSwgcykpIHJldHVybiBhd2FpdCBlLmNsb3NlKCksIHZvaWQgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiB0LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShzKSk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhabyhzKSk7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IFhvKHMsIHQubG9jYWxTdG9yZSwgZS5rKTtcbiAgICAgICAgICAgIGxldCByID0gYXdhaXQgZS5IbygpO1xuICAgICAgICAgICAgZm9yICg7cjsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IGkueW8ocik7XG4gICAgICAgICAgICAgICAgdCAmJiBuLl91cGRhdGVQcm9ncmVzcyh0KSwgciA9IGF3YWl0IGUuSG8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG8gPSBhd2FpdCBpLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMTYwODc2NDQzKTogVGhpcyBjdXJyZW50bHkgcmFpc2VzIHNuYXBzaG90cyB3aXRoXG4gICAgICAgICAgICAvLyBgZnJvbUNhY2hlPWZhbHNlYCBpZiB1c2VycyBhbHJlYWR5IGxpc3RlbiB0byBzb21lIHF1ZXJpZXMgYW5kIGJ1bmRsZXNcbiAgICAgICAgICAgIC8vIGhhcyBuZXdlciB2ZXJzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQWEodCwgby5JbiwgXG4gICAgICAgICAgICAvKiByZW1vdGVFdmVudCAqLyB2b2lkIDApLCBcbiAgICAgICAgICAgIC8vIFNhdmUgbWV0YWRhdGEsIHNvIGxvYWRpbmcgdGhlIHNhbWUgYnVuZGxlIHdpbGwgc2tpcC5cbiAgICAgICAgICAgIGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gSyh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG4uWWUuc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYE5hbWVkUXVlcnlgIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBxdWVyeSBuYW1lLiBQcm9taXNlXG4gKiByZXNvbHZlcyB0byB1bmRlZmluZWQgaWYgbm8gcGVyc2lzdGVkIGRhdGEgY2FuIGJlIGZvdW5kLlxuICovICh0LmxvY2FsU3RvcmUsIHMpLCBuLl9jb21wbGV0ZVdpdGgoby5wcm9ncmVzcyk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIE0oXCJTeW5jRW5naW5lXCIsIGBMb2FkaW5nIGJ1bmRsZSBmYWlsZWQgd2l0aCAke3R9YCksIG4uX2ZhaWxXaXRoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHMsIGUsIG4pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQoKTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIE1hIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuayA9IGVvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5Kbyh0KSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHRoaXMuWW8odCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLlhvKHQpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLlpvKHQpO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBabyh0KSB7XG4gICAgICAgIHJldHVybiBkcih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgbHIsIHQuaW5pdGlhbFVzZXIsIHRoaXMuayk7XG4gICAgfVxuICAgIFlvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyAkcihGci5rcywgdGhpcy5rKTtcbiAgICB9XG4gICAgSm8odCkge1xuICAgICAgICByZXR1cm4gbmV3IEdyO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgJiYgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCksIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKSwgXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBJbmRleGVkREIgcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgTGEgZXh0ZW5kcyBNYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnRhID0gdCwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGUsIHRoaXMuZm9yY2VPd25lcnNoaXAgPSBuLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KSwgYXdhaXQgYnIodGhpcy5sb2NhbFN0b3JlKSwgYXdhaXQgdGhpcy50YS5pbml0aWFsaXplKHRoaXMsIHQpLCBcbiAgICAgICAgLy8gRW5xdWV1ZSB3cml0ZXMgZnJvbSBhIHByZXZpb3VzIHNlc3Npb25cbiAgICAgICAgYXdhaXQgT2EodGhpcy50YS5zeW5jRW5naW5lKSwgYXdhaXQgYm8odGhpcy50YS5yZW1vdGVTdG9yZSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNuKCgoKSA9PiAodGhpcy5nY1NjaGVkdWxlciAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBabyh0KSB7XG4gICAgICAgIHJldHVybiBkcih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgbHIsIHQuaW5pdGlhbFVzZXIsIHRoaXMuayk7XG4gICAgfVxuICAgIFhvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBqaShlLCB0LmFzeW5jUXVldWUpO1xuICAgIH1cbiAgICBZbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBhcih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBWaS53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogVmkuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBpcih0aGlzLnN5bmNocm9uaXplVGFicywgZSwgdC5jbGllbnRJZCwgbiwgdC5hc3luY1F1ZXVlLCBacigpLCB0bygpLCB0aGlzLmssIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcjtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIEJhIGV4dGVuZHMgTGEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy50YSA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudGEuc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIFdyICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBtaTogVmEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIGdpOiBrYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgeWk6IHhhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBUbjogTmEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIF9pOiB2YS5iaW5kKG51bGwsIGUpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNuKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGF3YWl0IFNhKHRoaXMudGEuc3luY0VuZ2luZSwgdCksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKHQgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSA6IHQgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFpyKCk7XG4gICAgICAgIGlmICghV3IuUHQoZSkpIHRocm93IG5ldyBRKGouVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0gYXIodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IFdyKGUsIHQuYXN5bmNRdWV1ZSwgbiwgdC5jbGllbnRJZCwgdC5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIFVhIHtcbiAgICBhc3luYyBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSB0LmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0LnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZShlKSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKGUpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUoZSwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICF0LnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gdCA9PiBsYSh0aGlzLnN5bmNFbmdpbmUsIHQsIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IFJhLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IHhvKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLbztcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGVvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gKHMgPSB0LmRhdGFiYXNlSW5mbywgbmV3IFhyKHMpKTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgb28odCwgZSwgbiwgcyk7XG4gICAgICAgIH0odC5hdXRoQ3JlZGVudGlhbHMsIHQuYXBwQ2hlY2tDcmVkZW50aWFscywgbiwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB0aGlzLmxvY2FsU3RvcmUsIG4gPSB0aGlzLmRhdGFzdG9yZSwgcyA9IHQuYXN5bmNRdWV1ZSwgaSA9IHQgPT4gbGEodGhpcy5zeW5jRW5naW5lLCB0LCAwIC8qIFJlbW90ZVN0b3JlICovKSwgXG4gICAgICAgIHIgPSBIci5QdCgpID8gbmV3IEhyIDogbmV3IHpyLCBuZXcgY28oZSwgbiwgcywgaSwgcik7XG4gICAgICAgIHZhciBlLCBuLCBzLCBpLCByO1xuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgcywgaSwgciwgbykge1xuICAgICAgICAgICAgY29uc3QgYSA9IG5ldyByYSh0LCBlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmIChhLldvID0gITApLCBhO1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHQuaW5pdGlhbFVzZXIsIHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIGUpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gSyh0KTtcbiAgICAgICAgICAgIE8oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uXCIpLCBlLkdyLmFkZCg1IC8qIFNodXRkb3duICovKSwgYXdhaXQgaG8oZSksIFxuICAgICAgICAgICAgZS5Ici5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIGUuSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gcWEodCwgZSA9IDEwMjQwKSB7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb24gZm9yIFJlYWRhYmxlU3RyZWFtUmVhZGVyIGNoYW5nZWQuIFdlIHVzZVxuICAgIC8vIGBhbnlgIGhlcmUgdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGNvbXBpbGUgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNDI5NzBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhc3luYyByZWFkKCkge1xuICAgICAgICAgICAgaWYgKG4gPCB0LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5zbGljZShuLCBuICsgZSksXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiArPSBlLCBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY2FuY2VsKCkge30sXG4gICAgICAgIHJlbGVhc2VMb2NrKCkge30sXG4gICAgICAgIGNsb3NlZDogUHJvbWlzZS5yZWplY3QoXCJ1bmltcGxlbWVudGVkXCIpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgS2Ege1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMuZWEodGhpcy5vYnNlcnZlci5uZXh0LCB0KTtcbiAgICB9XG4gICAgZXJyb3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy5lYSh0aGlzLm9ic2VydmVyLmVycm9yLCB0KSA6IGNvbnNvbGUuZXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgdCk7XG4gICAgfVxuICAgIG5hKCkge1xuICAgICAgICB0aGlzLm11dGVkID0gITA7XG4gICAgfVxuICAgIGVhKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tdXRlZCB8fCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm11dGVkIHx8IHQoZSk7XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgYnVuZGxlLlxuICpcbiAqIFRha2VzIGEgYnVuZGxlIHN0cmVhbSBvciBidWZmZXIsIGFuZCBwcmVzZW50cyBhYnN0cmFjdGlvbnMgdG8gcmVhZCBidW5kbGVkXG4gKiBlbGVtZW50cyBvdXQgb2YgdGhlIHVuZGVybHlpbmcgY29udGVudC5cbiAqLyBjbGFzcyBqYSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSByZWFkZXIgdG8gcmVhZCBmcm9tIHVuZGVybHlpbmcgYmluYXJ5IGJ1bmRsZSBkYXRhIHNvdXJjZS4gKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHRoaXMuc2EgPSB0LCB0aGlzLmsgPSBlLCBcbiAgICAgICAgLyoqIENhY2hlZCBidW5kbGUgbWV0YWRhdGEuICovXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgVywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBidWZmZXIgdG8gaG9sZCBidW5kbGUgY29udGVudCwgYWNjdW11bGF0aW5nIGluY29tcGxldGUgZWxlbWVudFxuICAgICAgICAgKiBjb250ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSwgdGhpcy5pYSA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLCBcbiAgICAgICAgLy8gUmVhZCB0aGUgbWV0YWRhdGEgKHdoaWNoIGlzIHRoZSBmaXJzdCBlbGVtZW50KS5cbiAgICAgICAgdGhpcy5yYSgpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdCAmJiB0Ll9vKCkgPyB0aGlzLm1ldGFkYXRhLnJlc29sdmUodC5wYXlsb2FkLm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShudWxsID09IHQgPyB2b2lkIDAgOiB0LnBheWxvYWQpfWApKTtcbiAgICAgICAgfSksICh0ID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KHQpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYS5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIEhvKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMucmEoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyByYSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMub2EoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5pYS5kZWNvZGUodCksIG4gPSBOdW1iZXIoZSk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuYWEoYGxlbmd0aCBzdHJpbmcgKCR7ZX0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IHRoaXMuY2Eobik7XG4gICAgICAgIHJldHVybiBuZXcgSm8oSlNPTi5wYXJzZShzKSwgdC5sZW5ndGggKyBuKTtcbiAgICB9XG4gICAgLyoqIEZpcnN0IGluZGV4IG9mICd7JyBmcm9tIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci4gKi8gICAgdWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoKHQgPT4gdCA9PT0gXCJ7XCIuY2hhckNvZGVBdCgwKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGludGVybmFsIGJ1ZmZlciwgdW50aWwgdGhlIGZpcnN0ICd7JywgYW5kXG4gICAgICogcmV0dXJuIHRoZSBjb250ZW50LlxuICAgICAqXG4gICAgICogSWYgcmVhY2hlZCBlbmQgb2YgdGhlIHN0cmVhbSwgcmV0dXJucyBhIG51bGwuXG4gICAgICovICAgIGFzeW5jIG9hKCkge1xuICAgICAgICBmb3IgKDt0aGlzLnVhKCkgPCAwOyApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmhhKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYW5kIHRoZXJlXG4gICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgbm8gbW9yZSBkYXRhIHRvIHByb2Nlc3MuXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnVhKCk7XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYnV0IHN0aWxsXG4gICAgICAgIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW4gYnJhY2tldC5cbiAgICAgICAgICAgICAgICB0IDwgMCAmJiB0aGlzLmFhKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIGEgbGVuZ3RoIHN0cmluZyBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLCBmb3IgYSBzcGVjaWZpZWRcbiAgICAgKiBudW1iZXIgb2YgYnl0ZXMsIHB1bGxpbmcgbW9yZSBkYXRhIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgZGVjb2RlZCBmcm9tIHRoZSByZWFkIGJ5dGVzLlxuICAgICAqLyAgICBhc3luYyBjYSh0KSB7XG4gICAgICAgIGZvciAoO3RoaXMuYnVmZmVyLmxlbmd0aCA8IHQ7ICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYSgpICYmIHRoaXMuYWEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaWEuZGVjb2RlKHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBqc29uIHN0cmluZy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAgYWEodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRocm93IHRoaXMuc2EuY2FuY2VsKCksIG5ldyBFcnJvcihgSW52YWxpZCBidW5kbGUgZm9ybWF0OiAke3R9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1bGxzIG1vcmUgZGF0YSBmcm9tIHVuZGVybHlpbmcgc3RyZWFtIHRvIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICAgKi8gICAgYXN5bmMgaGEoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnNhLnJlYWQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGggKyB0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICBlLnNldCh0aGlzLmJ1ZmZlciksIGUuc2V0KHQudmFsdWUsIHRoaXMuYnVmZmVyLmxlbmd0aCksIHRoaXMuYnVmZmVyID0gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5kb25lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cbiAqL1xuY2xhc3MgUWEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0LCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gSyh0KSwgcyA9IGVzKG4uaykgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGUubWFwKCh0ID0+IFluKG4uaywgdCkpKVxuICAgICAgICAgICAgfSwgciA9IGF3YWl0IG4uamkoXCJCYXRjaEdldERvY3VtZW50c1wiLCBzLCBpKSwgbyA9IG5ldyBNYXA7XG4gICAgICAgICAgICByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBycyhuLmssIHQpO1xuICAgICAgICAgICAgICAgIG8uc2V0KGUua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgVSghIWUpLCBhLnB1c2goZSk7XG4gICAgICAgICAgICB9KSksIGE7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHRoaXMucmVjb3JkVmVyc2lvbih0KSkpLCBlO1xuICAgIH1cbiAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUodCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgbG4odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5sYXN0V3JpdGVFcnJvcikgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zO1xuICAgICAgICAvLyBGb3IgZWFjaCBtdXRhdGlvbiwgbm90ZSB0aGF0IHRoZSBkb2Mgd2FzIHdyaXR0ZW4uXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmRlbGV0ZShlLmtleS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRm9yIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBidXQgbm90IHdyaXR0ZW4gdG8sIHdlIHdhbnQgdG8gcGVyZm9ybVxuICAgICAgICAvLyBhIGB2ZXJpZnlgIG9wZXJhdGlvbi5cbiAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IER0LmZyb21QYXRoKGUpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMucHVzaChuZXcgZm4obiwgdGhpcy5wcmVjb25kaXRpb24obikpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gSyh0KSwgcyA9IGVzKG4uaykgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICB3cml0ZXM6IGUubWFwKCh0ID0+IGFzKG4uaywgdCkpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IG4uQmkoXCJDb21taXRcIiwgcywgaSk7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHRoaXMubXV0YXRpb25zKSwgdGhpcy5jb21taXR0ZWQgPSAhMDtcbiAgICB9XG4gICAgcmVjb3JkVmVyc2lvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBpZiAodC5pc0ZvdW5kRG9jdW1lbnQoKSkgZSA9IHQudmVyc2lvbjsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNOb0RvY3VtZW50KCkpIHRocm93IEIoKTtcbiAgICAgICAgICAgIC8vIEZvciBkZWxldGVkIGRvY3MsIHdlIG11c3QgdXNlIGJhc2VWZXJzaW9uIDAgd2hlbiB3ZSBvdmVyd3JpdGUgdGhlbS5cbiAgICAgICAgICAgIGUgPSB1dC5taW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgaWYgKCFlLmlzRXF1YWwobikpIFxuICAgICAgICAgICAgLy8gVGhpcyB0cmFuc2FjdGlvbiB3aWxsIGZhaWwgbm8gbWF0dGVyIHdoYXQuXG4gICAgICAgICAgICB0aHJvdyBuZXcgUShqLkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldCh0LmtleS50b1N0cmluZygpLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKHQudG9TdHJpbmcoKSkgJiYgZSA/IFllLnVwZGF0ZVRpbWUoZSkgOiBZZS5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzRXF1YWwodXQubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFllLnVwZGF0ZVRpbWUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBZZS5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZSh0KSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2godCk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi9cbmNsYXNzIFdhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IG4sIHRoaXMuZGVmZXJyZWQgPSBzLCBcbiAgICAgICAgdGhpcy5sYSA9IDUsIHRoaXMudXIgPSBuZXcgbm8odGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVHJhbnNhY3Rpb25SZXRyeSAqLyk7XG4gICAgfVxuICAgIC8qKiBSdW5zIHRoZSB0cmFuc2FjdGlvbiBhbmQgc2V0cyB0aGUgcmVzdWx0IG9uIGRlZmVycmVkLiAqLyAgICBydW4oKSB7XG4gICAgICAgIHRoaXMubGEgLT0gMSwgdGhpcy5mYSgpO1xuICAgIH1cbiAgICBmYSgpIHtcbiAgICAgICAgdGhpcy51ci5aaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBRYSh0aGlzLmRhdGFzdG9yZSksIGUgPSB0aGlzLmRhKHQpO1xuICAgICAgICAgICAgZSAmJiBlLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0LmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2EodCk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud2EodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZGEodCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudXBkYXRlRnVuY3Rpb24odCk7XG4gICAgICAgICAgICByZXR1cm4gIXZ0KGUpICYmIGUuY2F0Y2ggJiYgZS50aGVuID8gZSA6ICh0aGlzLmRlZmVycmVkLnJlamVjdChFcnJvcihcIlRyYW5zYWN0aW9uIGNhbGxiYWNrIG11c3QgcmV0dXJuIGEgUHJvbWlzZVwiKSksIFxuICAgICAgICAgICAgbnVsbCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIERvIG5vdCByZXRyeSBlcnJvcnMgdGhyb3duIGJ5IHVzZXIgcHJvdmlkZWQgdXBkYXRlRnVuY3Rpb24uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZlcnJlZC5yZWplY3QodCksIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2EodCkge1xuICAgICAgICB0aGlzLmxhID4gMCAmJiB0aGlzLl9hKHQpID8gKHRoaXMubGEgLT0gMSwgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmZhKCksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSkgOiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KTtcbiAgICB9XG4gICAgX2EodCkge1xuICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkge1xuICAgICAgICAgICAgLy8gSW4gdHJhbnNhY3Rpb25zLCB0aGUgYmFja2VuZCB3aWxsIGZhaWwgb3V0ZGF0ZWQgcmVhZHMgd2l0aCBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAgICAgICAgLy8gbm9uLW1hdGNoaW5nIGRvY3VtZW50IHZlcnNpb25zIHdpdGggQUJPUlRFRC4gVGhlc2UgZXJyb3JzIHNob3VsZCBiZSByZXRyaWVkLlxuICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZTtcbiAgICAgICAgICAgIHJldHVybiBcImFib3J0ZWRcIiA9PT0gZSB8fCBcImZhaWxlZC1wcmVjb25kaXRpb25cIiA9PT0gZSB8fCAhbW4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS5cbiAqL1xuY2xhc3MgR2Ege1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5kYXRhYmFzZUluZm8gPSBzLCBcbiAgICAgICAgdGhpcy51c2VyID0gQy5VTkFVVEhFTlRJQ0FURUQsIHRoaXMuY2xpZW50SWQgPSBpdC5BKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc3RhcnQobiwgKGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgTyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlJlY2VpdmVkIHVzZXI9XCIsIHQudWlkKSwgYXdhaXQgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyKHQpLCBcbiAgICAgICAgICAgIHRoaXMudXNlciA9IHQ7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGFuIGVtcHR5IGNyZWRlbnRpYWxzIGNoYW5nZSBsaXN0ZW5lciB0byBhY3RpdmF0ZSB0b2tlbiByZWZyZXNoLlxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc3RhcnQobiwgKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhdXRoQ3JlZGVudGlhbHM6IHRoaXMuYXV0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgYXBwQ2hlY2tDcmVkZW50aWFsczogdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLFxuICAgICAgICAgICAgaW5pdGlhbFVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgIG1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOiAxMDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLlxuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgUShqLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgVztcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLm9mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTW8oZSwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgdC5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgdC5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gemEodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE8oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobik7XG4gICAgbGV0IHMgPSBuLmluaXRpYWxVc2VyO1xuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyB0ID0+IHtcbiAgICAgICAgcy5pc0VxdWFsKHQpIHx8IChhd2FpdCB3cihlLmxvY2FsU3RvcmUsIHQpLCBzID0gdCk7XG4gICAgfSkpLCBcbiAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcbiAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxuICAgIGUucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKCgpID0+IHQudGVybWluYXRlKCkpKSwgdC5vZmZsaW5lQ29tcG9uZW50cyA9IGU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEhhKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCBKYSh0KTtcbiAgICBPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IHMgPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobiwgcyksIFxuICAgIC8vIFRoZSBDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIgb2YgdGhlIG9ubGluZSBjb21wb25lbnQgcHJvdmlkZXIgdGFrZXNcbiAgICAvLyBwcmVjZWRlbmNlIG92ZXIgdGhlIG9mZmxpbmUgY29tcG9uZW50IHByb3ZpZGVyLlxuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKCh0ID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEsodCk7XG4gICAgICAgIG4uYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE8oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICAgICAgY29uc3QgcyA9IHlvKG4pO1xuICAgICAgICAvLyBUZWFyIGRvd24gYW5kIHJlLWNyZWF0ZSBvdXIgbmV0d29yayBzdHJlYW1zLiBUaGlzIHdpbGwgZW5zdXJlIHdlIGdldCBhXG4gICAgICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgICAgICAvLyBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmUgKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxuICAgICAgICAgICAgICAgIG4uR3IuYWRkKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IGhvKG4pLCBzICYmIFxuICAgICAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgICAgIG4uSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pLCBhd2FpdCBuLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUpLCBcbiAgICAgICAgbi5Hci5kZWxldGUoMyAvKiBDcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgdW8obik7XG4gICAgfShlLnJlbW90ZVN0b3JlLCB0KSkpLCB0Lm9ubGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBKYSh0KSB7XG4gICAgcmV0dXJuIHQub2ZmbGluZUNvbXBvbmVudHMgfHwgKE8oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgemEodCwgbmV3IE1hKSksIHQub2ZmbGluZUNvbXBvbmVudHM7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFlhKHQpIHtcbiAgICByZXR1cm4gdC5vbmxpbmVDb21wb25lbnRzIHx8IChPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgSGEodCwgbmV3IFVhKSksIHQub25saW5lQ29tcG9uZW50cztcbn1cblxuZnVuY3Rpb24gWGEodCkge1xuICAgIHJldHVybiBKYSh0KS50aGVuKCh0ID0+IHQucGVyc2lzdGVuY2UpKTtcbn1cblxuZnVuY3Rpb24gWmEodCkge1xuICAgIHJldHVybiBKYSh0KS50aGVuKCh0ID0+IHQubG9jYWxTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiB0Yyh0KSB7XG4gICAgcmV0dXJuIFlhKHQpLnRoZW4oKHQgPT4gdC5yZW1vdGVTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiBlYyh0KSB7XG4gICAgcmV0dXJuIFlhKHQpLnRoZW4oKHQgPT4gdC5zeW5jRW5naW5lKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG5jKHQpIHtcbiAgICBjb25zdCBlID0gYXdhaXQgWWEodCksIG4gPSBlLmV2ZW50TWFuYWdlcjtcbiAgICByZXR1cm4gbi5vbkxpc3RlbiA9IG9hLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgbi5vblVubGlzdGVuID0gY2EuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBcbiAgICBuO1xufVxuXG4vKiogRW5hYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uIGFuZCByZS1lbnF1ZXVlcyBhbGwgcGVuZGluZyBvcGVyYXRpb25zLiAqLyBmdW5jdGlvbiBzYyh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBYYSh0KSwgbiA9IGF3YWl0IHRjKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuR3IuZGVsZXRlKDAgLyogVXNlckRpc2FibGVkICovKSwgdW8oZSk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKiogRGlzYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbi4gUGVuZGluZyBvcGVyYXRpb25zIHdpbGwgbm90IGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBpYyh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBYYSh0KSwgbiA9IGF3YWl0IHRjKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMSksIGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBLKHQpO1xuICAgICAgICAgICAgZS5Hci5hZGQoMCAvKiBVc2VyRGlzYWJsZWQgKi8pLCBhd2FpdCBobyhlKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUgc28gZ2V0KClzIHJldHVybiBmcm9tIGNhY2hlLCBldGMuXG4gICAgICAgICAgICBlLkpyLnNldChcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCB3cml0ZXMgdGhhdCB3ZXJlIHBlbmRpbmcgYXQgdGhlIHRpbWVcbiAqIHRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgcmVjZWl2ZWQgc2VydmVyIGFja25vd2xlZGdlbWVudC4gQW4gYWNrbm93bGVkZ2VtZW50XG4gKiBjYW4gYmUgZWl0aGVyIGFjY2VwdGFuY2Ugb3IgcmVqZWN0aW9uLlxuICovIGZ1bmN0aW9uIHJjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFc7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwicmVhZCBkb2N1bWVudFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uV24uUm4odCwgZSkpKTtcbiAgICAgICAgICAgIH0odCwgZSk7XG4gICAgICAgICAgICBzLmlzRm91bmREb2N1bWVudCgpID8gbi5yZXNvbHZlKHMpIDogcy5pc05vRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShudWxsKSA6IG4ucmVqZWN0KG5ldyBRKGouVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIGNhY2hlLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBtYXkgZXhpc3Qgb24gdGhlIHNlcnZlci4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyAnc291cmNlJyBpbiB0aGUgR2V0T3B0aW9ucyB0byBhdHRlbXB0IHRvIHJldHJpZXZlIHRoZSBkb2N1bWVudCBmcm9tIHRoZSBzZXJ2ZXIuKVwiKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBNbyh0LCBgRmFpbGVkIHRvIGdldCBkb2N1bWVudCAnJHtlfSBmcm9tIGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgZG9jdW1lbnQgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgWmEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gb2ModCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBXO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IEthKHtcbiAgICAgICAgICAgIG5leHQ6IHIgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gUW8odCwgbykpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gci5kb2NzLmhhcyhuKTtcbiAgICAgICAgICAgICAgICAhYSAmJiByLmZyb21DYWNoZSA/IFxuICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWYgd2UncmUgb25saW5lIGFuZCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgICAgIC8vIGV4aXN0IHRoZW4gd2UgcmVzb2x2ZSB3aXRoIGEgZG9jLmV4aXN0cyBzZXQgdG8gZmFsc2UuIElmXG4gICAgICAgICAgICAgICAgLy8gd2UncmUgb2ZmbGluZSBob3dldmVyLCB3ZSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhpc1xuICAgICAgICAgICAgICAgIC8vIGNhc2UuIFR3byBvcHRpb25zOiAxKSBDYWNoZSB0aGUgbmVnYXRpdmUgcmVzcG9uc2UgZnJvbVxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgc28gd2UgY2FuIGRlbGl2ZXIgdGhhdCBldmVuIHdoZW4geW91J3JlXG4gICAgICAgICAgICAgICAgLy8gb2ZmbGluZSAyKSBBY3R1YWxseSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhlIG9ubGluZSBjYXNlXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgICAgICAgICAgaS5yZWplY3QobmV3IFEoai5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGJlY2F1c2UgdGhlIGNsaWVudCBpcyBvZmZsaW5lLlwiKSkgOiBhICYmIHIuZnJvbUNhY2hlICYmIHMgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgUShqLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgZG9lcyBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudC4pJykpIDogaS5yZXNvbHZlKHIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IEhvKHllKG4ucGF0aCksIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgd286ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gam8odCwgbyk7XG4gICAgfShhd2FpdCBuYyh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGFjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFc7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgSXIodCwgZSwgXG4gICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IG5ldyBuYShlLCBzLnpuKSwgciA9IGkuUG8ocy5kb2N1bWVudHMpLCBvID0gaS5hcHBseUNoYW5nZXMociwgXG4gICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpO1xuICAgICAgICAgICAgbi5yZXNvbHZlKG8uc25hcHNob3QpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0gTW8odCwgYEZhaWxlZCB0byBleGVjdXRlIHF1ZXJ5ICcke2V9IGFnYWluc3QgY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBxdWVyeSBzbmFwc2hvdCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBaYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjYyh0LCBlLCBuID0ge30pIHtcbiAgICBjb25zdCBzID0gbmV3IFc7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgS2Eoe1xuICAgICAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBRbyh0LCBvKSkpLCBuLmZyb21DYWNoZSAmJiBcInNlcnZlclwiID09PSBzLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBRKGouVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50cyBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoZXNlIGRvY3VtZW50cyBtYXkgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnRzLiknKSkgOiBpLnJlc29sdmUobik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHQgPT4gaS5yZWplY3QodClcbiAgICAgICAgfSksIG8gPSBuZXcgSG8obiwgciwge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICB3bzogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBqbyh0LCBvKTtcbiAgICB9KGF3YWl0IG5jKHQpLCB0LmFzeW5jUXVldWUsIGUsIG4sIHMpKSksIHMucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gdWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgS2EoZSk7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEsodCkuaW8uYWRkKGUpLCBcbiAgICAgICAgLy8gSW1tZWRpYXRlbHkgZmlyZSBhbiBpbml0aWFsIGV2ZW50LCBpbmRpY2F0aW5nIGFsbCBleGlzdGluZyBsaXN0ZW5lcnNcbiAgICAgICAgLy8gYXJlIGluLXN5bmMuXG4gICAgICAgIGUubmV4dCgpO1xuICAgIH0oYXdhaXQgbmModCksIG4pKSksICgpID0+IHtcbiAgICAgICAgbi5uYSgpLCB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgSyh0KS5pby5kZWxldGUoZSk7XG4gICAgICAgIH0oYXdhaXQgbmModCksIG4pKSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBUYWtlcyBhbiB1cGRhdGVGdW5jdGlvbiBpbiB3aGljaCBhIHNldCBvZiByZWFkcyBhbmQgd3JpdGVzIGNhbiBiZSBwZXJmb3JtZWRcbiAqIGF0b21pY2FsbHkuIEluIHRoZSB1cGRhdGVGdW5jdGlvbiwgdGhlIGNsaWVudCBjYW4gcmVhZCBhbmQgd3JpdGUgdmFsdWVzXG4gKiB1c2luZyB0aGUgc3VwcGxpZWQgdHJhbnNhY3Rpb24gb2JqZWN0LiBBZnRlciB0aGUgdXBkYXRlRnVuY3Rpb24sIGFsbFxuICogY2hhbmdlcyB3aWxsIGJlIGNvbW1pdHRlZC4gSWYgYSByZXRyeWFibGUgZXJyb3Igb2NjdXJzIChleDogc29tZSBvdGhlclxuICogY2xpZW50IGhhcyBjaGFuZ2VkIGFueSBvZiB0aGUgZGF0YSByZWZlcmVuY2VkKSwgdGhlbiB0aGUgdXBkYXRlRnVuY3Rpb25cbiAqIHdpbGwgYmUgY2FsbGVkIGFnYWluIGFmdGVyIGEgYmFja29mZi4gSWYgdGhlIHVwZGF0ZUZ1bmN0aW9uIHN0aWxsIGZhaWxzXG4gKiBhZnRlciBhbGwgcmV0cmllcywgdGhlbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSByZWplY3RlZC5cbiAqXG4gKiBUaGUgdHJhbnNhY3Rpb24gb2JqZWN0IHBhc3NlZCB0byB0aGUgdXBkYXRlRnVuY3Rpb24gY29udGFpbnMgbWV0aG9kcyBmb3JcbiAqIGFjY2Vzc2luZyBkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zLiBVbmxpa2Ugb3RoZXIgZGF0YXN0b3JlIGFjY2VzcywgZGF0YVxuICogYWNjZXNzZWQgd2l0aCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBub3QgcmVmbGVjdCBsb2NhbCBjaGFuZ2VzIHRoYXQgaGF2ZSBub3RcbiAqIGJlZW4gY29tbWl0dGVkLiBGb3IgdGhpcyByZWFzb24sIGl0IGlzIHJlcXVpcmVkIHRoYXQgYWxsIHJlYWRzIGFyZVxuICogcGVyZm9ybWVkIGJlZm9yZSBhbnkgd3JpdGVzLiBUcmFuc2FjdGlvbnMgbXVzdCBiZSBwZXJmb3JtZWQgd2hpbGUgb25saW5lLlxuICovIGZ1bmN0aW9uIGhjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFc7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gWWEodCkudGhlbigodCA9PiB0LmRhdGFzdG9yZSkpO1xuICAgICAgICB9KHQpO1xuICAgICAgICBuZXcgV2EodC5hc3luY1F1ZXVlLCBzLCBlLCBuKS5ydW4oKTtcbiAgICB9KSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbGModCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBuID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IChuZXcgVGV4dEVuY29kZXIpLmVuY29kZSh0KSA6IHQ7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGphKHQsIGUpO1xuICAgICAgICB9KGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgVWludDhBcnJheSkgcmV0dXJuIHFhKHQsIGUpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgcmV0dXJuIHFhKG5ldyBVaW50OEFycmF5KHQpLCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHJldHVybiB0LmdldFJlYWRlcigpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU291cmNlIG9mIGB0b0J5dGVTdHJlYW1SZWFkZXJgIGhhcyB0byBiZSBhIEFycmF5QnVmZmVyIG9yIFJlYWRhYmxlU3RyZWFtXCIpO1xuICAgICAgICB9KG4pLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIGVvKGUpKTtcbiAgICB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBGYShhd2FpdCBlYyh0KSwgaSwgcyk7XG4gICAgfSkpO1xufVxuXG5mdW5jdGlvbiBmYyh0LCBlKSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBLKHQpO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuYW1lZCBxdWVyeVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uWWUuZ2V0TmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0oYXdhaXQgWmEodCksIGUpKSk7XG59XG5cbmNsYXNzIGRjIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIHVzZUZldGNoU3RyZWFtcyBXaGV0aGVyIHRvIHVzZSB0aGUgRmV0Y2ggQVBJIGluc3RlYWQgb2ZcbiAgICAgKiBYTUxIVFRQUmVxdWVzdFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5hcHBJZCA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLmhvc3QgPSBzLCB0aGlzLnNzbCA9IGksIFxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSByLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IG8sIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gYTtcbiAgICB9XG59XG5cbi8qKiBUaGUgZGVmYXVsdCBkYXRhYmFzZSBuYW1lIGZvciBhIHByb2plY3QuICovXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGRhdGFiYXNlIElEIGEgRmlyZXN0b3JlIGNsaWVudCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3Mgd2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSB0LCB0aGlzLmRhdGFiYXNlID0gZSB8fCBcIihkZWZhdWx0KVwiO1xuICAgIH1cbiAgICBnZXQgaXNEZWZhdWx0RGF0YWJhc2UoKSB7XG4gICAgICAgIHJldHVybiBcIihkZWZhdWx0KVwiID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiB3YyAmJiB0LnByb2plY3RJZCA9PT0gdGhpcy5wcm9qZWN0SWQgJiYgdC5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IF9jID0gbmV3IE1hcDtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBtYXAgdGhhdCBlbnN1cmVzIG9ubHkgb25lIERhdGFzdG9yZSBleGlzdHMgcGVyIEZpcmVzdG9yZVxuICogaW5zdGFuY2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBtYyh0LCBlLCBuKSB7XG4gICAgaWYgKCFuKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGVtcHR5ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdHdvIGJvb2xlYW4gb3B0aW9ucyBhcmUgbm90IHNldCBhdCB0aGUgc2FtZSB0aW1lLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gZ2ModCwgZSwgbiwgcykge1xuICAgIGlmICghMCA9PT0gZSAmJiAhMCA9PT0gcykgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgJHt0fSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiB5Yyh0KSB7XG4gICAgaWYgKCFEdC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgY29sbGVjdGlvbiAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0XG4gKiBjb250YWlucyBhbiBvZGQgbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gcGModCkge1xuICAgIGlmIChEdC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xuZnVuY3Rpb24gVGModCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0Lmxlbmd0aCA+IDIwICYmICh0ID0gYCR7dC5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIFwiXCIgKyB0O1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQuY29uc3RydWN0b3IpIHJldHVybiB0LmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAodCk7XG4gICAgICAgICAgICByZXR1cm4gZSA/IGBhIGN1c3RvbSAke2V9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgPyBcImEgZnVuY3Rpb25cIiA6IEIoKTtcbn1cblxuZnVuY3Rpb24gRWModCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIHQgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQgPSB0Ll9kZWxlZ2F0ZSksICEodCBpbnN0YW5jZW9mIGUpKSB7XG4gICAgICAgIGlmIChlLm5hbWUgPT09IHQuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGluc3RhbmNlLiBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgU0RLP1wiKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbiA9IFRjKHQpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgRXhwZWN0ZWQgdHlwZSAnJHtlLm5hbWV9JywgYnV0IGl0IHdhczogJHtufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBJYyh0LCBlKSB7XG4gICAgaWYgKGUgPD0gMCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke2V9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBBYyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0LnNzbCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHByb3ZpZGUgc3NsIG9wdGlvbiBpZiBob3N0IG9wdGlvbiBpcyBub3Qgc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiwgdGhpcy5zc2wgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgdGhpcy5ob3N0ID0gdC5ob3N0LCB0aGlzLnNzbCA9IG51bGwgPT09IChlID0gdC5zc2wpIHx8IHZvaWQgMCA9PT0gZSB8fCBlO1xuICAgICAgICBpZiAodGhpcy5jcmVkZW50aWFscyA9IHQuY3JlZGVudGlhbHMsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9ICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBcbiAgICAgICAgdm9pZCAwID09PSB0LmNhY2hlU2l6ZUJ5dGVzKSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gNDE5NDMwNDA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKC0xICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHQuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQuY2FjaGVTaXplQnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gISF0LnVzZUZldGNoU3RyZWFtcywgZ2MoXCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgXCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdCA9PT0gdC5ob3N0ICYmIHRoaXMuc3NsID09PSB0LnNzbCAmJiB0aGlzLmNyZWRlbnRpYWxzID09PSB0LmNyZWRlbnRpYWxzICYmIHRoaXMuY2FjaGVTaXplQnl0ZXMgPT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgJiYgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPT09IHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nICYmIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9PT0gdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzICYmIHRoaXMudXNlRmV0Y2hTdHJlYW1zID09PSB0LnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICovIGNsYXNzIFJjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5fYXBwQ2hlY2tDcmVkZW50aWFscyA9IG4sIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEgRmlyZXN0b3JlIG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmUtbGl0ZVwiLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwiKGxpdGUpXCIsIHRoaXMuX3NldHRpbmdzID0gbmV3IEFjKHt9KSwgXG4gICAgICAgIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITEsIHQgaW5zdGFuY2VvZiB3YyA/IHRoaXMuX2RhdGFiYXNlSWQgPSB0IDogKHRoaXMuX2FwcCA9IHQsIFxuICAgICAgICB0aGlzLl9kYXRhYmFzZUlkID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmFwcGx5KHQub3B0aW9ucywgWyBcInByb2plY3RJZFwiIF0pKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsICdcInByb2plY3RJZFwiIG5vdCBwcm92aWRlZCBpbiBmaXJlYmFzZS5pbml0aWFsaXplQXBwLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB3Yyh0Lm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIE1vZGlmeSB0aGlzIGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIENsb3VkIEZpcmVzdG9yZSBlbXVsYXRvci5cbiAqXG4gKiBOb3RlOiBUaGlzIG11c3QgYmUgY2FsbGVkIGJlZm9yZSB0aGlzIGluc3RhbmNlIGhhcyBiZWVuIHVzZWQgdG8gZG8gYW55XG4gKiBvcGVyYXRpb25zLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgdG8gY29uZmlndXJlIHRvIGNvbm5lY3QgdG8gdGhlXG4gKiBlbXVsYXRvci5cbiAqIEBwYXJhbSBob3N0IC0gdGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpLlxuICogQHBhcmFtIHBvcnQgLSB0aGUgZW11bGF0b3IgcG9ydCAoZXg6IDkwMDApLlxuICogQHBhcmFtIG9wdGlvbnMubW9ja1VzZXJUb2tlbiAtIHRoZSBtb2NrIGF1dGggdG9rZW4gdG8gdXNlIGZvciB1bml0IHRlc3RpbmdcbiAqIFNlY3VyaXR5IFJ1bGVzLlxuICovICh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYEZpcmVzdG9yZWAgc2VydmljZVxuICAgICAqIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgYXBwKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2FwcCkgdGhyb3cgbmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHA7XG4gICAgfVxuICAgIGdldCBfaW5pdGlhbGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbjtcbiAgICB9XG4gICAgZ2V0IF90ZXJtaW5hdGVkKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICBfc2V0U2V0dGluZ3ModCkge1xuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3NGcm96ZW4pIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBpdHMgc2V0dGluZ3MgY2FuIG5vIGxvbmdlciBiZSBjaGFuZ2VkLiBZb3UgY2FuIG9ubHkgbW9kaWZ5IHNldHRpbmdzIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3IEFjKHQpLCB2b2lkIDAgIT09IHQuY3JlZGVudGlhbHMgJiYgKHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIG5ldyB6O1xuICAgICAgICAgICAgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImdhcGlcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5jbGllbnQ7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgcmVhbGx5IGlzIGEgR2FwaSBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVKCEoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlIHx8ICFlLmF1dGggfHwgIWUuYXV0aC5nZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5KSksIFxuICAgICAgICAgICAgICAgIG5ldyBYKGUsIHQuc2Vzc2lvbkluZGV4IHx8IFwiMFwiLCB0LmlhbVRva2VuIHx8IG51bGwpO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJwcm92aWRlclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0LmNsaWVudDtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJtYWtlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0LmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmF0ZVRhc2sgfHwgKHRoaXMuX3Rlcm1pbmF0ZVRhc2sgPSB0aGlzLl90ZXJtaW5hdGUoKSksIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX2MuZ2V0KHQpO1xuICAgICAgICAgICAgZSAmJiAoTyhcIkNvbXBvbmVudFByb3ZpZGVyXCIsIFwiUmVtb3ZpbmcgRGF0YXN0b3JlXCIpLCBfYy5kZWxldGUodCksIGUudGVybWluYXRlKCkpO1xuICAgICAgICB9KHRoaXMpLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJjKHQsIGUsIG4sIHMgPSB7fSkge1xuICAgIHZhciBpO1xuICAgIGNvbnN0IHIgPSAodCA9IEVjKHQsIFJjKSkuX2dldFNldHRpbmdzKCk7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHIuaG9zdCAmJiByLmhvc3QgIT09IGUgJiYgTShcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgdXNlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWRcIiksIFxuICAgIHQuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgciksIHtcbiAgICAgICAgaG9zdDogYCR7ZX06JHtufWAsXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHMubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgZSwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHMubW9ja1VzZXJUb2tlbikgZSA9IHMubW9ja1VzZXJUb2tlbiwgbiA9IEMuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIGUgPSBjcmVhdGVNb2NrVXNlclRva2VuKHMubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgciA9IHMubW9ja1VzZXJUb2tlbi5zdWIgfHwgcy5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBDKHIpO1xuICAgICAgICB9XG4gICAgICAgIHQuX2F1dGhDcmVkZW50aWFscyA9IG5ldyBIKG5ldyBHKGUsIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50UmVmZXJlbmNlYCByZWZlcnMgdG8gYSBkb2N1bWVudCBsb2NhdGlvbiBpbiBhIEZpcmVzdG9yZSBkYXRhYmFzZVxuICogYW5kIGNhbiBiZSB1c2VkIHRvIHdyaXRlLCByZWFkLCBvciBsaXN0ZW4gdG8gdGhlIGxvY2F0aW9uLiBUaGUgZG9jdW1lbnQgYXRcbiAqIHRoZSByZWZlcmVuY2VkIGxvY2F0aW9uIG1heSBvciBtYXkgbm90IGV4aXN0LlxuICovIGNsYXNzIFBjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJkb2N1bWVudFwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGdldCBfcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZG9jdW1lbnQncyBpZGVudGlmaWVyIHdpdGhpbiBpdHMgY29sbGVjdGlvbi5cbiAgICAgKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGRvY3VtZW50IChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBiZWxvbmdzIHRvLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IFZjKHRoaXMuZmlyZXN0b3JlLCB0aGlzLmNvbnZlcnRlciwgdGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGModGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX2tleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5YCByZWZlcnMgdG8gYSBxdWVyeSB3aGljaCB5b3UgY2FuIHJlYWQgb3IgbGlzdGVuIHRvLiBZb3UgY2FuIGFsc29cbiAqIGNvbnN0cnVjdCByZWZpbmVkIGBRdWVyeWAgb2JqZWN0cyBieSBhZGRpbmcgZmlsdGVycyBhbmQgb3JkZXJpbmcuXG4gKi8gY2xhc3MgdmMge1xuICAgIC8vIFRoaXMgaXMgdGhlIGxpdGUgdmVyc2lvbiBvZiB0aGUgUXVlcnkgY2xhc3MgaW4gdGhlIG1haW4gU0RLLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBlLCB0aGlzLl9xdWVyeSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcInF1ZXJ5XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdmModGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX3F1ZXJ5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgQ29sbGVjdGlvblJlZmVyZW5jZWAgb2JqZWN0IGNhbiBiZSB1c2VkIGZvciBhZGRpbmcgZG9jdW1lbnRzLCBnZXR0aW5nXG4gKiBkb2N1bWVudCByZWZlcmVuY2VzLCBhbmQgcXVlcnlpbmcgZm9yIGRvY3VtZW50cyAodXNpbmcge0BsaW5rIHF1ZXJ5fSkuXG4gKi8gY2xhc3MgVmMgZXh0ZW5kcyB2YyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIHllKG4pKSwgdGhpcy5fcGF0aCA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImNvbGxlY3Rpb25cIjtcbiAgICB9XG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uJ3MgaWRlbnRpZmllci4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgY29sbGVjdGlvbiAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBjb250YWluaW5nIGBEb2N1bWVudFJlZmVyZW5jZWAgaWYgdGhpcyBpcyBhXG4gICAgICogc3ViY29sbGVjdGlvbi4gSWYgdGhpcyBpc24ndCBhIHN1YmNvbGxlY3Rpb24sIHRoZSByZWZlcmVuY2UgaXMgbnVsbC5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3BhdGgucG9wTGFzdCgpO1xuICAgICAgICByZXR1cm4gdC5pc0VtcHR5KCkgPyBudWxsIDogbmV3IFBjKHRoaXMuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgRHQodCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWYyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fcGF0aCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTYyh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIG1jKFwiY29sbGVjdGlvblwiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBSYykge1xuICAgICAgICBjb25zdCBzID0gd3QuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIHBjKHMpLCBuZXcgVmModCwgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgUGMgfHwgdCBpbnN0YW5jZW9mIFZjKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKHd0LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4gcGMocyksIG5ldyBWYyh0LmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcyk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWxpdGUpOiBDb25zaWRlciB1c2luZyBFcnJvckZhY3RvcnkgLVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzAxMzFlMWYvcGFja2FnZXMvdXRpbC9zcmMvZXJyb3JzLnRzI0wxMDZcbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgUXVlcnlgIGluc3RhbmNlIHRoYXQgaW5jbHVkZXMgYWxsIGRvY3VtZW50cyBpbiB0aGVcbiAqIGRhdGFiYXNlIHRoYXQgYXJlIGNvbnRhaW5lZCBpbiBhIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoZVxuICogZ2l2ZW4gYGNvbGxlY3Rpb25JZGAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSByb290IGBGaXJlc3RvcmVgIGluc3RhbmNlLlxuICogQHBhcmFtIGNvbGxlY3Rpb25JZCAtIElkZW50aWZpZXMgdGhlIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IG92ZXIuIEV2ZXJ5XG4gKiBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGlzIElEIGFzIHRoZSBsYXN0IHNlZ21lbnQgb2YgaXRzIHBhdGhcbiAqIHdpbGwgYmUgaW5jbHVkZWQuIENhbm5vdCBjb250YWluIGEgc2xhc2guXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBgUXVlcnlgLlxuICovIGZ1bmN0aW9uIERjKHQsIGUpIHtcbiAgICBpZiAodCA9IEVjKHQsIFJjKSwgbWMoXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJjb2xsZWN0aW9uIGlkXCIsIGUpLCBlLmluZGV4T2YoXCIvXCIpID49IDApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiBJRCAnJHtlfScgcGFzc2VkIHRvIGZ1bmN0aW9uIGNvbGxlY3Rpb25Hcm91cCgpLiBDb2xsZWN0aW9uIElEcyBtdXN0IG5vdCBjb250YWluICcvJy5gKTtcbiAgICByZXR1cm4gbmV3IHZjKHQsIFxuICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgXG4gICAgLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHNcbiAqIHdpdGhpbiB0aGUgcHJvdmlkZWQgY29sbGVjdGlvbiBncm91cC5cbiAqL1xuICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtZSh3dC5lbXB0eVBhdGgoKSwgdCk7XG4gICAgfShlKSk7XG59XG5cbmZ1bmN0aW9uIENjKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgXG4gICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxuICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXG4gICAgMSA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAoZSA9IGl0LkEoKSksIG1jKFwiZG9jXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIFJjKSB7XG4gICAgICAgIGNvbnN0IHMgPSB3dC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4geWMocyksIG5ldyBQYyh0LCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgRHQocykpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBQYyB8fCB0IGluc3RhbmNlb2YgVmMpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQod3QuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiB5YyhzKSwgbmV3IFBjKHQuZmlyZXN0b3JlLCB0IGluc3RhbmNlb2YgVmMgPyB0LmNvbnZlcnRlciA6IG51bGwsIG5ldyBEdChzKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlcyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBOYyh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksICh0IGluc3RhbmNlb2YgUGMgfHwgdCBpbnN0YW5jZW9mIFZjKSAmJiAoZSBpbnN0YW5jZW9mIFBjIHx8IGUgaW5zdGFuY2VvZiBWYykgJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiB0LnBhdGggPT09IGUucGF0aCAmJiB0LmNvbnZlcnRlciA9PT0gZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcXVlcmllcyBwb2ludCB0byB0aGUgc2FtZSBjb2xsZWN0aW9uIGFuZCBhcHBseVxuICogdGhlIHNhbWUgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIGtjKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgdCBpbnN0YW5jZW9mIHZjICYmIGUgaW5zdGFuY2VvZiB2YyAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIHZlKHQuX3F1ZXJ5LCBlLl9xdWVyeSkgJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgeGMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBUaGUgbGFzdCBwcm9taXNlIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgdGhpcy5tYSA9IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgLy8gQSBsaXN0IG9mIHJldHJ5YWJsZSBvcGVyYXRpb25zLiBSZXRyeWFibGUgb3BlcmF0aW9ucyBhcmUgcnVuIGluIG9yZGVyIGFuZFxuICAgICAgICAvLyByZXRyaWVkIHdpdGggYmFja29mZi5cbiAgICAgICAgdGhpcy5nYSA9IFtdLCBcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gT25jZSBpdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgd2lsbCBub3RcbiAgICAgICAgLy8gYmUgY2hhbmdlZCBhZ2Fpbi5cbiAgICAgICAgdGhpcy55YSA9ICExLCBcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBzY2hlZHVsZWQgdG8gYmUgcXVldWVkIGluIHRoZSBmdXR1cmUuIE9wZXJhdGlvbnMgYXJlXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBhZnRlciB0aGV5IGFyZSBydW4gb3IgY2FuY2VsZWQuXG4gICAgICAgIHRoaXMucGEgPSBbXSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgdGhpcy5UYSA9IG51bGwsIFxuICAgICAgICAvLyBGbGFnIHNldCB3aGlsZSB0aGVyZSdzIGFuIG91dHN0YW5kaW5nIEFzeW5jUXVldWUgb3BlcmF0aW9uLCB1c2VkIGZvclxuICAgICAgICAvLyBhc3NlcnRpb24gc2FuaXR5LWNoZWNrcy5cbiAgICAgICAgdGhpcy5FYSA9ICExLCBcbiAgICAgICAgLy8gRW5hYmxlZCBkdXJpbmcgc2h1dGRvd24gb24gU2FmYXJpIHRvIHByZXZlbnQgZnV0dXJlIGFjY2VzcyB0byBJbmRleGVkREIuXG4gICAgICAgIHRoaXMuSWEgPSAhMSwgXG4gICAgICAgIC8vIExpc3Qgb2YgVGltZXJJZHMgdG8gZmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IuXG4gICAgICAgIHRoaXMuQWEgPSBbXSwgXG4gICAgICAgIC8vIEJhY2tvZmYgdGltZXIgdXNlZCB0byBzY2hlZHVsZSByZXRyaWVzIGZvciByZXRyeWFibGUgb3BlcmF0aW9uc1xuICAgICAgICB0aGlzLnVyID0gbmV3IG5vKHRoaXMsIFwiYXN5bmNfcXVldWVfcmV0cnlcIiAvKiBBc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLlJhID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRvKCk7XG4gICAgICAgICAgICB0ICYmIE8oXCJBc3luY1F1ZXVlXCIsIFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiICsgdC52aXNpYmlsaXR5U3RhdGUpLCB0aGlzLnVyLmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSB0bygpO1xuICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyICYmIHQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5SYSk7XG4gICAgfVxuICAgIGdldCBpc1NodXR0aW5nRG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueWE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXG4gICAgICovICAgIGVucXVldWVBbmRGb3JnZXQodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuZW5xdWV1ZSh0KTtcbiAgICB9XG4gICAgZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQodCkge1xuICAgICAgICB0aGlzLmJhKCksIFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuUGEodCk7XG4gICAgfVxuICAgIGVudGVyUmVzdHJpY3RlZE1vZGUodCkge1xuICAgICAgICBpZiAoIXRoaXMueWEpIHtcbiAgICAgICAgICAgIHRoaXMueWEgPSAhMCwgdGhpcy5JYSA9IHQgfHwgITE7XG4gICAgICAgICAgICBjb25zdCBlID0gdG8oKTtcbiAgICAgICAgICAgIGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlJhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnF1ZXVlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuYmEoKSwgdGhpcy55YSkgXG4gICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKCkgPT4ge30pKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgUHJvbWlzZSB0aGF0IHdlIGNhbiByZXR1cm4gdG8gdGhlIGNhbGxlZS4gVGhpc1xuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gcmV0dXJuIGEgXCJoYW5naW5nIFByb21pc2VcIiBvbmx5IHRvIHRoZSBjYWxsZWUgYW5kIHN0aWxsXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHF1ZXVlIGV2ZW4gd2hlbiB0aGUgb3BlcmF0aW9uIGlzIG5vdCBydW4uXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBXO1xuICAgICAgICByZXR1cm4gdGhpcy5QYSgoKCkgPT4gdGhpcy55YSAmJiB0aGlzLklhID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAodCgpLnRoZW4oZS5yZXNvbHZlLCBlLnJlamVjdCksIFxuICAgICAgICBlLnByb21pc2UpKSkudGhlbigoKCkgPT4gZS5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUodCkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmdhLnB1c2godCksIHRoaXMudmEoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgdmEoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLmdhLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdhWzBdKCksIHRoaXMuZ2Euc2hpZnQoKSwgdGhpcy51ci5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGlmICghWnModCkpIHRocm93IHQ7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPKFwiQXN5bmNRdWV1ZVwiLCBcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiICsgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdhLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBvcGVyYXRpb25zLCB3ZSByZS1zY2hlZHVsZSBgcmV0cnlOZXh0T3AoKWAuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBydW4gcmV0cnlhYmxlIG9wZXJhdGlvbnMgdGhhdCBmYWlsZWQgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGVpciBpbml0aWFsIGF0dGVtcHQgc2luY2Ugd2UgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZXkgYXJlIGFscmVhZHlcbiAgICAgICAgICAgIC8vIGVucXVldWVkLiBJZiwgZm9yIGV4YW1wbGUsIGBvcDFgLCBgb3AyYCwgYG9wM2AgYXJlIGVucXVldWVkIGFuZCBgb3AxYFxuICAgICAgICAgICAgLy8gbmVlZHMgdG8gIGJlIHJlLXJ1biwgd2Ugd2lsbCBydW4gYG9wMWAsIGBvcDFgLCBgb3AyYCB1c2luZyB0aGVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZW5xdWV1ZWQgY2FsbHMgdG8gYHJldHJ5TmV4dE9wKClgLiBgb3AzKClgIHdpbGwgdGhlbiBydW4gaW4gdGhlXG4gICAgICAgICAgICAvLyBjYWxsIHNjaGVkdWxlZCBoZXJlLlxuICAgICAgICAgICAgLy8gU2luY2UgYGJhY2tvZmZBbmRSdW4oKWAgY2FuY2VscyBhbiBleGlzdGluZyBiYWNrb2ZmIGFuZCBzY2hlZHVsZXMgYVxuICAgICAgICAgICAgLy8gbmV3IGJhY2tvZmYgb24gZXZlcnkgY2FsbCwgdGhlcmUgaXMgb25seSBldmVyIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbiBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICB0aGlzLnVyLlppKCgoKSA9PiB0aGlzLnZhKCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBQYSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hLnRoZW4oKCgpID0+ICh0aGlzLkVhID0gITAsIHQoKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLlRhID0gdCwgdGhpcy5FYSA9ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqXG4gKiBDaHJvbWUgaW5jbHVkZXMgRXJyb3IubWVzc2FnZSBpbiBFcnJvci5zdGFjay4gT3RoZXIgYnJvd3NlcnMgZG8gbm90LlxuICogVGhpcyByZXR1cm5zIGV4cGVjdGVkIG91dHB1dCBvZiBtZXNzYWdlICsgc3RhY2sgd2hlbiBhdmFpbGFibGUuXG4gKiBAcGFyYW0gZXJyb3IgLSBFcnJvciBvciBGaXJlc3RvcmVFcnJvclxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSB0Lm1lc3NhZ2UgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICB0LnN0YWNrICYmIChlID0gdC5zdGFjay5pbmNsdWRlcyh0Lm1lc3NhZ2UpID8gdC5zdGFjayA6IHQubWVzc2FnZSArIFwiXFxuXCIgKyB0LnN0YWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0KTtcbiAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyB0aGF0IHRoaXMudGFpbCBiZWNvbWVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBhbmRcbiAgICAgICAgICAgIC8vIGFsbCBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNoYWluICh2aWEgLnRoZW4pIHdpbGwganVzdCBzaG9ydC1jaXJjdWl0XG4gICAgICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSByZWplY3RlZCBQcm9taXNlLlxuICAgICAgICAgICAgdGhyb3cgRihcIklOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogXCIsIGUpLCB0O1xuICAgICAgICB9KSkudGhlbigodCA9PiAodGhpcy5FYSA9ICExLCB0KSkpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYSA9IGUsIGU7XG4gICAgfVxuICAgIGVucXVldWVBZnRlckRlbGF5KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5iYSgpLCBcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxuICAgICAgICB0aGlzLkFhLmluZGV4T2YodCkgPiAtMSAmJiAoZSA9IDApO1xuICAgICAgICBjb25zdCBzID0gRm8uY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgdCwgZSwgbiwgKHQgPT4gdGhpcy5WYSh0KSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wYS5wdXNoKHMpLCBzO1xuICAgIH1cbiAgICBiYSgpIHtcbiAgICAgICAgdGhpcy5UYSAmJiBCKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBTYSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgdDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdCA9IHRoaXMubWEsIGF3YWl0IHQ7XG4gICAgICAgIH0gd2hpbGUgKHQgIT09IHRoaXMubWEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIERhKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMucGEpIGlmIChlLnRpbWVySWQgPT09IHQpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgQ2EodCkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLlNhKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMucGEuc29ydCgoKHQsIGUpID0+IHQudGFyZ2V0VGltZU1zIC0gZS50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnBhKSBpZiAoZS5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBBbGwgKi8gIT09IHQgJiYgZS50aW1lcklkID09PSB0KSBicmVhaztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlNhKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBTa2lwIGFsbCBzdWJzZXF1ZW50IGRlbGF5cyBmb3IgYSB0aW1lciBpZC5cbiAgICAgKi8gICAgTmEodCkge1xuICAgICAgICB0aGlzLkFhLnB1c2godCk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgb25jZSBhIERlbGF5ZWRPcGVyYXRpb24gaXMgcnVuIG9yIGNhbmNlbGVkLiAqLyAgICBWYSh0KSB7XG4gICAgICAgIC8vIE5PVEU6IGluZGV4T2YgLyBzbGljZSBhcmUgTyhuKSwgYnV0IGRlbGF5ZWRPcGVyYXRpb25zIGlzIGV4cGVjdGVkIHRvIGJlIHNtYWxsLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wYS5pbmRleE9mKHQpO1xuICAgICAgICB0aGlzLnBhLnNwbGljZShlLCAxKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uICRjKHQpIHtcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxuICogbWV0aG9kcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChcIm9iamVjdFwiICE9IHR5cGVvZiB0IHx8IG51bGwgPT09IHQpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IHQ7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBpZiAodCBpbiBuICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2Ygblt0XSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBSZXByZXNlbnRzIHRoZSB0YXNrIG9mIGxvYWRpbmcgYSBGaXJlc3RvcmUgYnVuZGxlLiBJdCBwcm92aWRlcyBwcm9ncmVzcyBvZiBidW5kbGVcbiAqIGxvYWRpbmcsIGFzIHdlbGwgYXMgdGFzayBjb21wbGV0aW9uIGFuZCBlcnJvciBldmVudHMuXG4gKlxuICogVGhlIEFQSSBpcyBjb21wYXRpYmxlIHdpdGggYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovICh0LCBbIFwibmV4dFwiLCBcImVycm9yXCIsIFwiY29tcGxldGVcIiBdKTtcbn1cblxuY2xhc3MgT2Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge30sIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIgPSBuZXcgVywgdGhpcy5fbGFzdFByb2dyZXNzID0ge1xuICAgICAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgICAgIHRvdGFsQnl0ZXM6IDAsXG4gICAgICAgICAgICB0b3RhbERvY3VtZW50czogMCxcbiAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBmdW5jdGlvbnMgdG8gbGlzdGVuIHRvIGJ1bmRsZSBsb2FkaW5nIHByb2dyZXNzIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0gbmV4dCAtIENhbGxlZCB3aGVuIHRoZXJlIGlzIGEgcHJvZ3Jlc3MgdXBkYXRlIGZyb20gYnVuZGxlIGxvYWRpbmcuIFR5cGljYWxseSBgbmV4dGAgY2FsbHMgb2NjdXJcbiAgICAgKiAgIGVhY2ggdGltZSBhIEZpcmVzdG9yZSBkb2N1bWVudCBpcyBsb2FkZWQgZnJvbSB0aGUgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuIFRoZSB0YXNrIGFib3J0cyBhZnRlciByZXBvcnRpbmcgdGhlXG4gICAgICogICBlcnJvciwgYW5kIHRoZXJlIHNob3VsZCBiZSBubyBtb3JlIHVwZGF0ZXMgYWZ0ZXIgdGhpcy5cbiAgICAgKiBAcGFyYW0gY29tcGxldGUgLSBDYWxsZWQgd2hlbiB0aGUgbG9hZGluZyB0YXNrIGlzIGNvbXBsZXRlLlxuICAgICAqLyAgICBvblByb2dyZXNzKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHtcbiAgICAgICAgICAgIG5leHQ6IHQsXG4gICAgICAgICAgICBlcnJvcjogZSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBuXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LmNhdGNoYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIGNhdGNoKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS5jYXRjaCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4udGhlbmAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uRnVsZmlsbGVkIC0gQ2FsbGVkIG9uIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBsb2FkaW5nIHRhc2sgd2l0aCBhIGZpbmFsIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCB1cGRhdGUuXG4gICAgICogICBUaGUgdXBkYXRlIHdpbGwgYWx3YXlzIGhhdmUgaXRzIGB0YXNrU3RhdGVgIHNldCB0byBgXCJTdWNjZXNzXCJgLlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgdGhlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UudGhlbih0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBjb21wbGV0ZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfY29tcGxldGVXaXRoKHQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlUHJvZ3Jlc3ModCksIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSgpLCBcbiAgICAgICAgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZXNvbHZlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGZhaWxlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYEVycm9yYCBhcyB0aGUgcmVhc29uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2ZhaWxXaXRoKHQpIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiRXJyb3JcIiwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0ICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCh0aGlzLl9sYXN0UHJvZ3Jlc3MpLCBcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvciAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yKHQpLCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlamVjdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYSBwcm9ncmVzcyB1cGRhdGUgb2YgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgLSBUaGUgbmV3IHByb2dyZXNzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX3VwZGF0ZVByb2dyZXNzKHQpIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzID0gdCwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0ICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogRE9NRXhjZXB0aW9uIGVycm9yIGNvZGUgY29uc3RhbnRzLiAqLyBjb25zdCBGYyA9IC0xO1xuXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICovXG5jbGFzcyBNYyBleHRlbmRzIFJjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEge0BsaW5rIEZpcmVzdG9yZX0gb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZVwiLCB0aGlzLl9xdWV1ZSA9IG5ldyB4YywgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIm5hbWVcIiBpbiB0ID8gdC5uYW1lIDogXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBxYyh0aGlzKSwgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB7QGxpbmsgRmlyZXN0b3JlfSB3aXRoIHRoZSBwcm92aWRlZCBzZXR0aW5ncy5cbiAqIENhbiBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9uLCBpbmNsdWRpbmdcbiAqIHtAbGluayBnZXRGaXJlc3RvcmV9LiBJZiB0aGUgY3VzdG9tIHNldHRpbmdzIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiBpc1xuICogZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICpcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHdpdGggd2hpY2ggdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIGJlIGFzc29jaWF0ZWQuXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBBIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBMYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IF9nZXRQcm92aWRlcih0LCBcImZpcmVzdG9yZVwiKTtcbiAgICBpZiAobi5pc0luaXRpYWxpemVkKCkpIHtcbiAgICAgICAgY29uc3QgdCA9IG4uZ2V0SW1tZWRpYXRlKCksIHMgPSBuLmdldE9wdGlvbnMoKTtcbiAgICAgICAgaWYgKGRlZXBFcXVhbChzLCBlKSkgcmV0dXJuIHQ7XG4gICAgICAgIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgLTEgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgZS5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgcmV0dXJuIG4uaW5pdGlhbGl6ZSh7XG4gICAgICAgIG9wdGlvbnM6IGVcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBleGlzdGluZyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAqIHByb3ZpZGVkIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS4gSWYgbm8gaW5zdGFuY2UgZXhpc3RzLCBpbml0aWFsaXplcyBhIG5ld1xuICogaW5zdGFuY2Ugd2l0aCBkZWZhdWx0IHNldHRpbmdzLlxuICpcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlIHRoYXQgdGhlIHJldHVybmVkIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAcmV0dXJucyBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugb2YgdGhlIHByb3ZpZGVkIGFwcC5cbiAqLyBmdW5jdGlvbiBCYyhlID0gZ2V0QXBwKCkpIHtcbiAgICByZXR1cm4gX2dldFByb3ZpZGVyKGUsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSgpO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIFVjKHQpIHtcbiAgICByZXR1cm4gdC5fZmlyZXN0b3JlQ2xpZW50IHx8IHFjKHQpLCB0Ll9maXJlc3RvcmVDbGllbnQudmVyaWZ5Tm90VGVybWluYXRlZCgpLCB0Ll9maXJlc3RvcmVDbGllbnQ7XG59XG5cbmZ1bmN0aW9uIHFjKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBuID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgcyA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkYyh0LCBlLCBuLCBzLmhvc3QsIHMuc3NsLCBzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBzLnVzZUZldGNoU3RyZWFtcyk7XG4gICAgfSh0Ll9kYXRhYmFzZUlkLCAobnVsbCA9PT0gKGUgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub3B0aW9ucy5hcHBJZCkgfHwgXCJcIiwgdC5fcGVyc2lzdGVuY2VLZXksIG4pO1xuICAgIHQuX2ZpcmVzdG9yZUNsaWVudCA9IG5ldyBHYSh0Ll9hdXRoQ3JlZGVudGlhbHMsIHQuX2FwcENoZWNrQ3JlZGVudGlhbHMsIHQuX3F1ZXVlLCBzKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhblxuICoge0BsaW5rIGluaXRpYWxpemVGaXJlc3RvcmV9LCB7QGxpbmsgZ2V0RmlyZXN0b3JlfSBvclxuICoge0BsaW5rIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2V9LlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBpdFxuICogcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgLSBPcHRpb25hbCBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlXG4gKiBwZXJzaXN0ZW5jZS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudCBzdG9yYWdlLlxuICovIGZ1bmN0aW9uIEtjKHQsIGUpIHtcbiAgICBaYyh0ID0gRWModCwgTWMpKTtcbiAgICBjb25zdCBuID0gVWModCksIHMgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBpID0gbmV3IFVhO1xuICAgIHJldHVybiBRYyhuLCBpLCBuZXcgTGEoaSwgcy5jYWNoZVNpemVCeXRlcywgbnVsbCA9PSBlID8gdm9pZCAwIDogZS5mb3JjZU93bmVyc2hpcCkpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBtdWx0aS10YWIgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS4gSWYgZW5hYmxlZFxuICogYWNyb3NzIGFsbCB0YWJzLCBhbGwgb3BlcmF0aW9ucyBzaGFyZSBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UsIGluY2x1ZGluZ1xuICogc2hhcmVkIGV4ZWN1dGlvbiBvZiBxdWVyaWVzIGFuZCBsYXRlbmN5LWNvbXBlbnNhdGVkIGxvY2FsIGRvY3VtZW50IHVwZGF0ZXNcbiAqIGFjcm9zcyBhbGwgY29ubmVjdGVkIGluc3RhbmNlcy5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZVxuICogaXQgcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiIGFuZFxuICogICAgIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZC5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudFxuICogc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBqYyh0KSB7XG4gICAgWmModCA9IEVjKHQsIE1jKSk7XG4gICAgY29uc3QgZSA9IFVjKHQpLCBuID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgcyA9IG5ldyBVYTtcbiAgICByZXR1cm4gUWMoZSwgcywgbmV3IEJhKHMsIG4uY2FjaGVTaXplQnl0ZXMpKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYm90aCB0aGUgYE9mZmxpbmVDb21wb25lbnRQcm92aWRlcmAgYW5kIGBPbmxpbmVDb21wb25lbnRQcm92aWRlcmAuXG4gKiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYSByZWNvdmVyYWJsZSBlcnJvciAoc2VlXG4gKiBgY2FuUmVjb3ZlckZyb21JbmRleGVkRGJFcnJvcigpYCBiZWxvdyksIHRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlamVjdGVkXG4gKiBidXQgdGhlIGNsaWVudCByZW1haW5zIHVzYWJsZS5cbiAqLyBmdW5jdGlvbiBRYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBXO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgemEodCwgbiksIGF3YWl0IEhhKHQsIGUpLCBzLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFcbiAgICAgICAgICAgIC8qKlxuICogRGVjaWRlcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBlcnJvciBhbGxvd3MgdXMgdG8gZ3JhY2VmdWxseSBkaXNhYmxlXG4gKiBwZXJzaXN0ZW5jZSAoYXMgb3Bwb3NlZCB0byBjcmFzaGluZyB0aGUgY2xpZW50KS5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lKSByZXR1cm4gdC5jb2RlID09PSBqLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5jb2RlID09PSBqLlVOSU1QTEVNRU5URUQ7XG4gICAgICAgICAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERPTUV4Y2VwdGlvbiAmJiB0IGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSBcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgYSBmZXcga25vd24gY2lyY3Vtc3RhbmNlcyB3aGVyZSB3ZSBjYW4gb3BlbiBJbmRleGVkRGIgYnV0XG4gICAgICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIHJlYWQvd3JpdGUgd2lsbCBmYWlsIChlLmcuIHF1b3RhIGV4Y2VlZGVkKS4gRm9yXG4gICAgICAgICAgICAgICAgLy8gd2VsbC11bmRlcnN0b29kIGNhc2VzLCB3ZSBhdHRlbXB0IHRvIGRldGVjdCB0aGVzZSBhbmQgdGhlbiBncmFjZWZ1bGx5XG4gICAgICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBSYXRoZXIgdGhhbiBjb250aW51ZSB0byBhZGQgdG8gdGhpcyBsaXN0LCB3ZSBjb3VsZCBkZWNpZGUgdG9cbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgZmFsbCBiYWNrLCB3aXRoIHRoZSByaXNrIHRoYXQgd2UgbWlnaHQgYWNjaWRlbnRhbGx5IGhpZGUgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gcmVwcmVzZW50aW5nIGFjdHVhbCBTREsgYnVncy5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBicm93c2VyIGlzIG91dCBvZiBxdW90YSB3ZSBjb3VsZCBnZXQgZWl0aGVyIHF1b3RhIGV4Y2VlZGVkXG4gICAgICAgICAgICAgICAgLy8gb3IgYW4gYWJvcnRlZCBlcnJvciBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgZXJyb3IgaGFwcGVuZWQgZHVyaW5nXG4gICAgICAgICAgICAgICAgLy8gc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgICAgICAgICByZXR1cm4gMjIgPT09IHQuY29kZSB8fCAyMCA9PT0gdC5jb2RlIHx8IFxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZyBtb2RlIGRpc2FibGVzIEluZGV4ZWREYiBhbmQgcmV0dXJuc1xuICAgICAgICAgICAgICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cbiAgICAgICAgICAgICAgICAxMSA9PT0gdC5jb2RlO1xuICAgICAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQ2xlYXJzIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UuIFRoaXMgaW5jbHVkZXMgcGVuZGluZyB3cml0ZXMgYW5kIGNhY2hlZFxuICogZG9jdW1lbnRzLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIHdoaWxlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBpcyBub3Qgc3RhcnRlZCAoYWZ0ZXIgdGhlIGFwcCBpc1xuICogdGVybWluYXRlZCBvciB3aGVuIHRoZSBhcHAgaXMgZmlyc3QgaW5pdGlhbGl6ZWQpLiBPbiBzdGFydHVwLCB0aGlzIGZ1bmN0aW9uXG4gKiBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuIHtAbGlua1xuICogaW5pdGlhbGl6ZUZpcmVzdG9yZX0gb3Ige0BsaW5rIGdldEZpcmVzdG9yZX0pKS4gSWYgdGhlIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBzdGlsbCBydW5uaW5nLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIGVycm9yIGNvZGVcbiAqIG9mIGBmYWlsZWQtcHJlY29uZGl0aW9uYC5cbiAqXG4gKiBOb3RlOiBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBpcyBwcmltYXJpbHkgaW50ZW5kZWQgdG8gaGVscCB3cml0ZVxuICogcmVsaWFibGUgdGVzdHMgdGhhdCB1c2UgQ2xvdWQgRmlyZXN0b3JlLiBJdCB1c2VzIGFuIGVmZmljaWVudCBtZWNoYW5pc20gZm9yXG4gKiBkcm9wcGluZyBleGlzdGluZyBkYXRhIGJ1dCBkb2VzIG5vdCBhdHRlbXB0IHRvIHNlY3VyZWx5IG92ZXJ3cml0ZSBvclxuICogb3RoZXJ3aXNlIG1ha2UgY2FjaGVkIGRhdGEgdW5yZWNvdmVyYWJsZS4gRm9yIGFwcGxpY2F0aW9ucyB0aGF0IGFyZSBzZW5zaXRpdmVcbiAqIHRvIHRoZSBkaXNjbG9zdXJlIG9mIGNhY2hlZCBkYXRhIGluIGJldHdlZW4gdXNlciBzZXNzaW9ucywgd2Ugc3Ryb25nbHlcbiAqIHJlY29tbWVuZCBub3QgZW5hYmxpbmcgcGVyc2lzdGVuY2UgYXQgYWxsLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gY2xlYXIgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UgaXNcbiAqIGNsZWFyZWQuIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCBhbiBlcnJvci5cbiAqLyAodCkpIHRocm93IHQ7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBlbmFibGluZyBvZmZsaW5lIHBlcnNpc3RlbmNlLiBGYWxsaW5nIGJhY2sgdG8gcGVyc2lzdGVuY2UgZGlzYWJsZWQ6IFwiICsgdCksIFxuICAgICAgICAgICAgcy5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSkudGhlbigoKCkgPT4gcy5wcm9taXNlKSk7XG59XG5cbmZ1bmN0aW9uIFdjKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgJiYgIXQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJQZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBjbGVhcmVkIGJlZm9yZSBhIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZCBvciBhZnRlciBpdCBpcyB0ZXJtaW5hdGVkLlwiKTtcbiAgICBjb25zdCBlID0gbmV3IFc7XG4gICAgcmV0dXJuIHQuX3F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFKcy5QdCgpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQgKyBcIm1haW5cIjtcbiAgICAgICAgICAgICAgICBhd2FpdCBKcy5kZWxldGUoZSk7XG4gICAgICAgICAgICB9KGFyKHQuX2RhdGFiYXNlSWQsIHQuX3BlcnNpc3RlbmNlS2V5KSksIGUucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBlLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH0pKSwgZS5wcm9taXNlO1xufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgZm9yIHRoZSBhY3RpdmUgdXNlciBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gb3V0c3RhbmRpbmcgd3JpdGVzLlxuICogT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSB3YWl0cyBmb3IgYWxsIHByZXZpb3VzbHkgaXNzdWVkIHdyaXRlcyAoaW5jbHVkaW5nXG4gKiB0aG9zZSB3cml0dGVuIGluIGEgcHJldmlvdXMgYXBwIHNlc3Npb24pLCBidXQgaXQgZG9lcyBub3Qgd2FpdCBmb3Igd3JpdGVzXG4gKiB0aGF0IHdlcmUgYWRkZWQgYWZ0ZXIgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZC4gSWYgeW91IHdhbnQgdG8gd2FpdCBmb3JcbiAqIGFkZGl0aW9uYWwgd3JpdGVzLCBjYWxsIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBhZ2Fpbi5cbiAqXG4gKiBBbnkgb3V0c3RhbmRpbmcgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIHByb21pc2VzIGFyZSByZWplY3RlZCBkdXJpbmcgdXNlclxuICogY2hhbmdlcy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gR2ModCkge1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgVztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfYShhd2FpdCBlYyh0KSwgZSkpKSwgZS5wcm9taXNlO1xuICAgIH0oVWModCA9IEVjKHQsIE1jKSkpO1xufVxuXG4vKipcbiAqIFJlLWVuYWJsZXMgdXNlIG9mIHRoZSBuZXR3b3JrIGZvciB0aGlzIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGFmdGVyIGEgcHJpb3JcbiAqIGNhbGwgdG8ge0BsaW5rIGRpc2FibGVOZXR3b3JrfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZW5hYmxlZC5cbiAqLyBmdW5jdGlvbiB6Yyh0KSB7XG4gICAgcmV0dXJuIHNjKFVjKHQgPSBFYyh0LCBNYykpKTtcbn1cblxuLyoqXG4gKiBEaXNhYmxlcyBuZXR3b3JrIHVzYWdlIGZvciB0aGlzIGluc3RhbmNlLiBJdCBjYW4gYmUgcmUtZW5hYmxlZCB2aWEge0BsaW5rXG4gKiBlbmFibGVOZXR3b3JrfS4gV2hpbGUgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQsIGFueSBzbmFwc2hvdCBsaXN0ZW5lcnMsXG4gKiBgZ2V0RG9jKClgIG9yIGBnZXREb2NzKClgIGNhbGxzIHdpbGwgcmV0dXJuIHJlc3VsdHMgZnJvbSBjYWNoZSwgYW5kIGFueSB3cml0ZVxuICogb3BlcmF0aW9ucyB3aWxsIGJlIHF1ZXVlZCB1bnRpbCB0aGUgbmV0d29yayBpcyByZXN0b3JlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZGlzYWJsZWQuXG4gKi8gZnVuY3Rpb24gSGModCkge1xuICAgIHJldHVybiBpYyhVYyh0ID0gRWModCwgTWMpKSk7XG59XG5cbi8qKlxuICogVGVybWluYXRlcyB0aGUgcHJvdmlkZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBgdGVybWluYXRlKClgIG9ubHkgdGhlIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGZ1bmN0aW9uXG4gKiBtYXkgYmUgdXNlZC4gQW55IG90aGVyIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYSBgRmlyZXN0b3JlRXJyb3JgLlxuICpcbiAqIFRvIHJlc3RhcnQgYWZ0ZXIgdGVybWluYXRpb24sIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBGaXJlYmFzZUZpcmVzdG9yZSB3aXRoXG4gKiB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqXG4gKiBUZXJtaW5hdGlvbiBkb2VzIG5vdCBjYW5jZWwgYW55IHBlbmRpbmcgd3JpdGVzLCBhbmQgYW55IHByb21pc2VzIHRoYXQgYXJlXG4gKiBhd2FpdGluZyBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciB3aWxsIG5vdCBiZSByZXNvbHZlZC4gSWYgeW91IGhhdmVcbiAqIHBlcnNpc3RlbmNlIGVuYWJsZWQsIHRoZSBuZXh0IHRpbWUgeW91IHN0YXJ0IHRoaXMgaW5zdGFuY2UsIGl0IHdpbGwgcmVzdW1lXG4gKiBzZW5kaW5nIHRoZXNlIHdyaXRlcyB0byB0aGUgc2VydmVyLlxuICpcbiAqIE5vdGU6IFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgaXMgbm90IHJlcXVpcmVkLiBUaGlzXG4gKiBmdW5jdGlvbiBpcyB1c2VmdWwgb25seSB3aGVuIHlvdSB3YW50IHRvIGZvcmNlIHRoaXMgaW5zdGFuY2UgdG8gcmVsZWFzZSBhbGxcbiAqIG9mIGl0cyByZXNvdXJjZXMgb3IgaW4gY29tYmluYXRpb24gd2l0aCBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB0b1xuICogZW5zdXJlIHRoYXQgYWxsIGxvY2FsIHN0YXRlIGlzIGRlc3Ryb3llZCBiZXR3ZWVuIHRlc3QgcnVucy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIGluc3RhbmNlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogdGVybWluYXRlZC5cbiAqLyBmdW5jdGlvbiBKYyh0KSB7XG4gICAgcmV0dXJuIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UodC5hcHAsIFwiZmlyZXN0b3JlXCIpLCB0Ll9kZWxldGUoKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBsb2FkIGJ1bmRsZXMgZm9yIGZvci5cbiAqIEBwYXJhbSBidW5kbGVEYXRhIC0gQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgYnVuZGxlIHRvIGJlIGxvYWRlZC4gVmFsaWQgb2JqZWN0cyBhcmVcbiAqICAgYEFycmF5QnVmZmVyYCwgYFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+YCBvciBgc3RyaW5nYC5cbiAqXG4gKiBAcmV0dXJuc1xuICogICBBIGBMb2FkQnVuZGxlVGFza2Agb2JqZWN0LCB3aGljaCBub3RpZmllcyBjYWxsZXJzIHdpdGggcHJvZ3Jlc3MgdXBkYXRlcywgYW5kIGNvbXBsZXRpb25cbiAqICAgb3IgZXJyb3IgZXZlbnRzLiBJdCBjYW4gYmUgdXNlZCBhcyBhIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyBmdW5jdGlvbiBZYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFVjKHQgPSBFYyh0LCBNYykpLCBzID0gbmV3IE9jO1xuICAgIHJldHVybiBsYyhuLCB0Ll9kYXRhYmFzZUlkLCBlLCBzKSwgcztcbn1cblxuLyoqXG4gKiBSZWFkcyBhIEZpcmVzdG9yZSB7QGxpbmsgUXVlcnl9IGZyb20gbG9jYWwgY2FjaGUsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuIG5hbWUuXG4gKlxuICogVGhlIG5hbWVkIHF1ZXJpZXMgYXJlIHBhY2thZ2VkICBpbnRvIGJ1bmRsZXMgb24gdGhlIHNlcnZlciBzaWRlIChhbG9uZ1xuICogd2l0aCByZXN1bHRpbmcgZG9jdW1lbnRzKSwgYW5kIGxvYWRlZCB0byBsb2NhbCBjYWNoZSB1c2luZyBgbG9hZEJ1bmRsZWAuIE9uY2UgaW4gbG9jYWxcbiAqIGNhY2hlLCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCBhIHtAbGluayBRdWVyeX0gYnkgbmFtZS5cbiAqLyBmdW5jdGlvbiBYYyh0LCBlKSB7XG4gICAgcmV0dXJuIGZjKFVjKHQgPSBFYyh0LCBNYykpLCBlKS50aGVuKChlID0+IGUgPyBuZXcgdmModCwgbnVsbCwgZS5xdWVyeSkgOiBudWxsKSk7XG59XG5cbmZ1bmN0aW9uIFpjKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgfHwgdC5fdGVybWluYXRlZCkgdGhyb3cgbmV3IFEoai5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIHBlcnNpc3RlbmNlIGNhbiBubyBsb25nZXIgYmUgZW5hYmxlZC4gWW91IGNhbiBvbmx5IGVuYWJsZSBwZXJzaXN0ZW5jZSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXG4gKiBzaW5nbGUgZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGFcbiAqIGxpc3Qgb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxuICpcbiAqIENyZWF0ZSBhIGBGaWVsZFBhdGhgIGJ5IHByb3ZpZGluZyBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICovXG5jbGFzcyB0dSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBGaWVsZFBhdGhgIGZyb20gdGhlIHByb3ZpZGVkIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkTmFtZXMgLSBBIGxpc3Qgb2YgZmllbGQgbmFtZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4udCkge1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyArK2UpIGlmICgwID09PSB0W2VdLmxlbmd0aCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gRmllbGQgbmFtZXMgbXVzdCBub3QgYmUgZW1wdHkuXCIpO1xuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgbXQodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEZpZWxkUGF0aGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKHQuX2ludGVybmFsUGF0aCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHNlbnRpbmVsIGBGaWVsZFBhdGhgIHRvIHJlZmVyIHRvIHRoZSBJRCBvZiBhIGRvY3VtZW50LlxuICogSXQgY2FuIGJlIHVzZWQgaW4gcXVlcmllcyB0byBzb3J0IG9yIGZpbHRlciBieSB0aGUgZG9jdW1lbnQgSUQuXG4gKi8gZnVuY3Rpb24gZXUoKSB7XG4gICAgcmV0dXJuIG5ldyB0dShcIl9fbmFtZV9fXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhcnJheSBvZiBieXRlcy5cbiAqLyBjbGFzcyBudSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX2J5dGVTdHJpbmcgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIEJhc2U2NCBzdHJpbmcsIGNvbnZlcnRpbmcgaXQgdG9cbiAgICAgKiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjQgLSBUaGUgQmFzZTY0IHN0cmluZyB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgbnUocHQuZnJvbUJhc2U2NFN0cmluZyh0KSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gY29uc3RydWN0IGRhdGEgZnJvbSBCYXNlNjQgc3RyaW5nOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gVWludDhBcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSBVaW50OEFycmF5IHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBudShwdC5mcm9tVWludDhBcnJheSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgYXMgYSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgQmFzZTY0LWVuY29kZWQgc3RyaW5nIGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b0Jhc2U2NCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGluIGEgbmV3IGBVaW50OEFycmF5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBVaW50OEFycmF5IGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9VaW50OEFycmF5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQnl0ZXMoYmFzZTY0OiBcIiArIHRoaXMudG9CYXNlNjQoKSArIFwiKVwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBCeXRlc2Agb2JqZWN0IHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLmlzRXF1YWwodC5fYnl0ZVN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTZW50aW5lbCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aGVuIHdyaXRpbmcgZG9jdW1lbnQgZmllbGRzIHdpdGggYHNldCgpYFxuICogb3IgYHVwZGF0ZSgpYC5cbiAqLyBjbGFzcyBzdSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9tZXRob2ROYW1lIC0gVGhlIHB1YmxpYyBBUEkgZW5kcG9pbnQgdGhhdCByZXR1cm5zIHRoaXMgY2xhc3MuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIGdlb2dyYXBoaWMgbG9jYXRpb24gaW4gRmlyZXN0b3JlLiBUaGVcbiAqIGxvY2F0aW9uIGlzIHJlcHJlc2VudGVkIGFzIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIExhdGl0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstOTAsIDkwXS5cbiAqIExvbmdpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTE4MCwgMTgwXS5cbiAqLyBjbGFzcyBpdSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgYEdlb1BvaW50YCBvYmplY3Qgd2l0aCB0aGUgcHJvdmlkZWQgbGF0aXR1ZGUgYW5kXG4gICAgICogbG9uZ2l0dWRlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cbiAgICAgKiBAcGFyYW0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBpZiAoIWlzRmluaXRlKHQpIHx8IHQgPCAtOTAgfHwgdCA+IDkwKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiTGF0aXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAsIGJ1dCB3YXM6IFwiICsgdCk7XG4gICAgICAgIGlmICghaXNGaW5pdGUoZSkgfHwgZSA8IC0xODAgfHwgZSA+IDE4MCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkxvbmdpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLCBidXQgd2FzOiBcIiArIGUpO1xuICAgICAgICB0aGlzLl9sYXQgPSB0LCB0aGlzLl9sb25nID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhdGl0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxhdGl0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxvbmdpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgR2VvUG9pbnRgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdCA9PT0gdC5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IHQuX2xvbmc7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHZW9Qb2ludC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHRoaXMuX2xhdCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5fbG9uZ1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxuICAgICAqLyAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHJ0KHRoaXMuX2xhdCwgdC5fbGF0KSB8fCBydCh0aGlzLl9sb25nLCB0Ll9sb25nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHJ1ID0gL15fXy4qX18kLztcblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBkb2N1bWVudCBkYXRhIChlLmcuIGZvciBhIHNldERhdGEgY2FsbCkuICovIGNsYXNzIG91IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZmllbGRNYXNrID8gbmV3IGFuKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKSA6IG5ldyBvbih0LCB0aGlzLmRhdGEsIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgXCJ1cGRhdGVcIiBkYXRhIChpLmUuIGZvciBhbiB1cGRhdGVEYXRhIGNhbGwpLiAqLyBjbGFzcyBhdSB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gVGhlIGZpZWxkTWFzayBkb2VzIG5vdCBpbmNsdWRlIGRvY3VtZW50IHRyYW5zZm9ybXMuXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odCwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3UodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIFNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBNZXJnZVNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBVcGRhdGUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMyAvKiBBcmd1bWVudCAqLyA6XG4gICAgICBjYXNlIDQgLyogQXJyYXlBcmd1bWVudCAqLyA6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgQigpO1xuICAgIH1cbn1cblxuLyoqIEEgXCJjb250ZXh0XCIgb2JqZWN0IHBhc3NlZCBhcm91bmQgd2hpbGUgcGFyc2luZyB1c2VyIGRhdGEuICovIGNsYXNzIHV1IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgLSBUaGUgc2V0dGluZ3MgZm9yIHRoZSBwYXJzZXIuXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgSUQgb2YgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgVmFsdWUgcHJvdG8uXG4gICAgICogQHBhcmFtIGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgLSBXaGV0aGVyIHRvIGlnbm9yZSB1bmRlZmluZWQgcHJvcGVydGllc1xuICAgICAqIHJhdGhlciB0aGFuIHRocm93LlxuICAgICAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCB0cmFuc2Zvcm1zIGVuY291bnRlcmVkXG4gICAgICogd2hpbGUgcGFyc2luZyB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgcGF0aHMgZW5jb3VudGVyZWQgd2hpbGUgcGFyc2luZ1xuICAgICAqIHRoZSBkYXRhLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXG4gICAgICogbnVsbCB0byBpbmRpY2F0ZSB0aGUgY29udGV4dCByZXByZXNlbnRzIGFueSBsb2NhdGlvbiB3aXRoaW4gYW4gYXJyYXkgKGluXG4gICAgICogd2hpY2ggY2FzZSBjZXJ0YWluIGZlYXR1cmVzIHdpbGwgbm90IHdvcmsgYW5kIGVycm9ycyB3aWxsIGJlIHNvbWV3aGF0XG4gICAgICogY29tcHJvbWlzZWQpLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IGUsIHRoaXMuayA9IG4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IHMsIFxuICAgICAgICAvLyBNaW5vciBoYWNrOiBJZiBmaWVsZFRyYW5zZm9ybXMgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhpcyBpcyBhblxuICAgICAgICAvLyBleHRlcm5hbCBjYWxsIGFuZCB3ZSBuZWVkIHRvIHZhbGlkYXRlIHRoZSBlbnRpcmUgcGF0aC5cbiAgICAgICAgdm9pZCAwID09PSBpICYmIHRoaXMua2EoKSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpIHx8IFtdLCB0aGlzLmZpZWxkTWFzayA9IHIgfHwgW107XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wYXRoO1xuICAgIH1cbiAgICBnZXQgeGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnhhO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG5ldyBjb250ZXh0IHdpdGggdGhlIHNwZWNpZmllZCBzZXR0aW5ncyBvdmVyd3JpdHRlbi4gKi8gICAgJGEodCkge1xuICAgICAgICByZXR1cm4gbmV3IHV1KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZXR0aW5ncyksIHQpLCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuaywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xuICAgIH1cbiAgICBPYSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLiRhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBGYTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLk1hKHQpLCBzO1xuICAgIH1cbiAgICBMYSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLiRhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBGYTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLmthKCksIHM7XG4gICAgfVxuICAgIEJhKHQpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3c7IHNvIG1ha2UgcGF0aFxuICAgICAgICAvLyB1bmRlZmluZWQuXG4gICAgICAgIHJldHVybiB0aGlzLiRhKHtcbiAgICAgICAgICAgIHBhdGg6IHZvaWQgMCxcbiAgICAgICAgICAgIEZhOiAhMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgVWEodCkge1xuICAgICAgICByZXR1cm4gU3UodCwgdGhpcy5zZXR0aW5ncy5tZXRob2ROYW1lLCB0aGlzLnNldHRpbmdzLnFhIHx8ICExLCB0aGlzLnBhdGgsIHRoaXMuc2V0dGluZ3MuS2EpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgJ2ZpZWxkUGF0aCcgd2FzIHRyYXZlcnNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgY29udGV4dC4gKi8gICAgY29udGFpbnModCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmZpZWxkTWFzay5maW5kKChlID0+IHQuaXNQcmVmaXhPZihlKSkpIHx8IHZvaWQgMCAhPT0gdGhpcy5maWVsZFRyYW5zZm9ybXMuZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZS5maWVsZCkpKTtcbiAgICB9XG4gICAga2EoKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFJlbW92ZSBudWxsIGNoZWNrIG9uY2Ugd2UgaGF2ZSBwcm9wZXIgcGF0aHMgZm9yIGZpZWxkc1xuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAodGhpcy5wYXRoKSBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMucGF0aC5sZW5ndGg7IHQrKykgdGhpcy5NYSh0aGlzLnBhdGguZ2V0KHQpKTtcbiAgICB9XG4gICAgTWEodCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHRocm93IHRoaXMuVWEoXCJEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIGlmIChjdSh0aGlzLnhhKSAmJiBydS50ZXN0KHQpKSB0aHJvdyB0aGlzLlVhKCdEb2N1bWVudCBmaWVsZHMgY2Fubm90IGJlZ2luIGFuZCBlbmQgd2l0aCBcIl9fXCInKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxuICogY2xhc3Nlcy5cbiAqLyBjbGFzcyBodSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBlLCB0aGlzLmsgPSBuIHx8IGVvKHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0b3AtbGV2ZWwgcGFyc2UgY29udGV4dC4gKi8gICAgamEodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgICAgIHJldHVybiBuZXcgdXUoe1xuICAgICAgICAgICAgeGE6IHQsXG4gICAgICAgICAgICBtZXRob2ROYW1lOiBlLFxuICAgICAgICAgICAgS2E6IG4sXG4gICAgICAgICAgICBwYXRoOiBtdC5lbXB0eVBhdGgoKSxcbiAgICAgICAgICAgIEZhOiAhMSxcbiAgICAgICAgICAgIHFhOiBzXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5rLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbHUodCkge1xuICAgIGNvbnN0IGUgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBuID0gZW8odC5fZGF0YWJhc2VJZCk7XG4gICAgcmV0dXJuIG5ldyBodSh0Ll9kYXRhYmFzZUlkLCAhIWUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgbik7XG59XG5cbi8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBzZXQoKSBjYWxsLiAqLyBmdW5jdGlvbiBmdSh0LCBlLCBuLCBzLCBpLCByID0ge30pIHtcbiAgICBjb25zdCBvID0gdC5qYShyLm1lcmdlIHx8IHIubWVyZ2VGaWVsZHMgPyAyIC8qIE1lcmdlU2V0ICovIDogMCAvKiBTZXQgKi8gLCBlLCBuLCBpKTtcbiAgICBidShcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIG8sIHMpO1xuICAgIGNvbnN0IGEgPSBBdShzLCBvKTtcbiAgICBsZXQgYywgdTtcbiAgICBpZiAoci5tZXJnZSkgYyA9IG5ldyBndChvLmZpZWxkTWFzayksIHUgPSBvLmZpZWxkVHJhbnNmb3JtczsgZWxzZSBpZiAoci5tZXJnZUZpZWxkcykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByLm1lcmdlRmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gUHUoZSwgcywgbik7XG4gICAgICAgICAgICBpZiAoIW8uY29udGFpbnMoaSkpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEZpZWxkICcke2l9JyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLmApO1xuICAgICAgICAgICAgRHUodCwgaSkgfHwgdC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGMgPSBuZXcgZ3QodCksIHUgPSBvLmZpZWxkVHJhbnNmb3Jtcy5maWx0ZXIoKHQgPT4gYy5jb3ZlcnModC5maWVsZCkpKTtcbiAgICB9IGVsc2UgYyA9IG51bGwsIHUgPSBvLmZpZWxkVHJhbnNmb3JtcztcbiAgICByZXR1cm4gbmV3IG91KG5ldyBRdChhKSwgYywgdSk7XG59XG5cbmNsYXNzIGR1IGV4dGVuZHMgc3Uge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgaWYgKDIgLyogTWVyZ2VTZXQgKi8gIT09IHQueGEpIHRocm93IDEgLyogVXBkYXRlICovID09PSB0LnhhID8gdC5VYShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIG9mIHlvdXIgdXBkYXRlIGRhdGFgKSA6IHQuVWEoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1gKTtcbiAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcbiAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cbiAgICAgICAgcmV0dXJuIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSwgbnVsbDtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZHU7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjaGlsZCBjb250ZXh0IGZvciBwYXJzaW5nIFNlcmlhbGl6YWJsZUZpZWxkVmFsdWVzLlxuICpcbiAqIFRoaXMgaXMgZGlmZmVyZW50IHRoYW4gY2FsbGluZyBgUGFyc2VDb250ZXh0LmNvbnRleHRXaXRoYCBiZWNhdXNlIGl0IGtlZXBzXG4gKiB0aGUgZmllbGRUcmFuc2Zvcm1zIGFuZCBmaWVsZE1hc2sgc2VwYXJhdGUuXG4gKlxuICogVGhlIGNyZWF0ZWQgY29udGV4dCBoYXMgaXRzIGBkYXRhU291cmNlYCBzZXQgdG8gYFVzZXJEYXRhU291cmNlLkFyZ3VtZW50YC5cbiAqIEFsdGhvdWdoIHRoZXNlIHZhbHVlcyBhcmUgdXNlZCB3aXRoIHdyaXRlcywgYW55IGVsZW1lbnRzIGluIHRoZXNlIEZpZWxkVmFsdWVzXG4gKiBhcmUgbm90IGNvbnNpZGVyZWQgd3JpdGVzIHNpbmNlIHRoZXkgY2Fubm90IGNvbnRhaW4gYW55IEZpZWxkVmFsdWUgc2VudGluZWxzLFxuICogZXRjLlxuICpcbiAqIEBwYXJhbSBmaWVsZFZhbHVlIC0gVGhlIHNlbnRpbmVsIEZpZWxkVmFsdWUgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIGNoaWxkXG4gKiAgICAgY29udGV4dC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIHBhcmVudCBjb250ZXh0LlxuICogQHBhcmFtIGFycmF5RWxlbWVudCAtIFdoZXRoZXIgb3Igbm90IHRoZSBGaWVsZFZhbHVlIGhhcyBhbiBhcnJheS5cbiAqLyBmdW5jdGlvbiB3dSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyB1dSh7XG4gICAgICAgIHhhOiAzIC8qIEFyZ3VtZW50ICovICxcbiAgICAgICAgS2E6IGUuc2V0dGluZ3MuS2EsXG4gICAgICAgIG1ldGhvZE5hbWU6IHQuX21ldGhvZE5hbWUsXG4gICAgICAgIEZhOiBuXG4gICAgfSwgZS5kYXRhYmFzZUlkLCBlLmssIGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG59XG5cbmNsYXNzIF91IGV4dGVuZHMgc3Uge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB6ZSh0LnBhdGgsIG5ldyBCZSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIF91O1xuICAgIH1cbn1cblxuY2xhc3MgbXUgZXh0ZW5kcyBzdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5RYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHd1KHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMuUWEubWFwKCh0ID0+IEl1KHQsIGUpKSksIHMgPSBuZXcgVWUobik7XG4gICAgICAgIHJldHVybiBuZXcgemUodC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3MgZ3UgZXh0ZW5kcyBzdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5RYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHd1KHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMuUWEubWFwKCh0ID0+IEl1KHQsIGUpKSksIHMgPSBuZXcgS2Uobik7XG4gICAgICAgIHJldHVybiBuZXcgemUodC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3MgeXUgZXh0ZW5kcyBzdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5XYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBRZSh0LmssICRlKHQuaywgdGhpcy5XYSkpO1xuICAgICAgICByZXR1cm4gbmV3IHplKHQucGF0aCwgZSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovIGZ1bmN0aW9uIHB1KHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gdC5qYSgxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pO1xuICAgIGJ1KFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgaSwgcyk7XG4gICAgY29uc3QgciA9IFtdLCBvID0gUXQuZW1wdHkoKTtcbiAgICBsdChzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgYSA9IFZ1KGUsIHQsIG4pO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgcyA9IGdldE1vZHVsYXJJbnN0YW5jZShzKTtcbiAgICAgICAgY29uc3QgYyA9IGkuTGEoYSk7XG4gICAgICAgIGlmIChzIGluc3RhbmNlb2YgZHUpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgci5wdXNoKGEpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBJdShzLCBjKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAoci5wdXNoKGEpLCBvLnNldChhLCB0KSk7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgYSA9IG5ldyBndChyKTtcbiAgICByZXR1cm4gbmV3IGF1KG8sIGEsIGkuZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi8gZnVuY3Rpb24gVHUodCwgZSwgbiwgcywgaSwgcikge1xuICAgIGNvbnN0IG8gPSB0LmphKDEgLyogVXBkYXRlICovICwgZSwgbiksIGEgPSBbIFB1KGUsIHMsIG4pIF0sIGMgPSBbIGkgXTtcbiAgICBpZiAoci5sZW5ndGggJSAyICE9IDApIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLmApO1xuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgci5sZW5ndGg7IHQgKz0gMikgYS5wdXNoKFB1KGUsIHJbdF0pKSwgYy5wdXNoKHJbdCArIDFdKTtcbiAgICBjb25zdCB1ID0gW10sIGggPSBRdC5lbXB0eSgpO1xuICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciB0byBwaWNrIHRoZSBsYXN0IHZhbHVlIGZvciBhIGZpZWxkIGlmIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHRoZSBmaWVsZCBtdWx0aXBsZSB0aW1lcy5cbiAgICBmb3IgKGxldCB0ID0gYS5sZW5ndGggLSAxOyB0ID49IDA7IC0tdCkgaWYgKCFEdSh1LCBhW3RdKSkge1xuICAgICAgICBjb25zdCBlID0gYVt0XTtcbiAgICAgICAgbGV0IG4gPSBjW3RdO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKTtcbiAgICAgICAgY29uc3QgcyA9IG8uTGEoZSk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgZHUpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgdS5wdXNoKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBJdShuLCBzKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAodS5wdXNoKGUpLCBoLnNldChlLCB0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbCA9IG5ldyBndCh1KTtcbiAgICByZXR1cm4gbmV3IGF1KGgsIGwsIG8uZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXG4gKiBib3VuZCkuXG4gKlxuICogQHBhcmFtIGFsbG93QXJyYXlzIC0gV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcbiAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXG4gKi8gZnVuY3Rpb24gRXUodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgcmV0dXJuIEl1KG4sIHQuamEocyA/IDQgLyogQXJyYXlBcmd1bWVudCAqLyA6IDMgLyogQXJndW1lbnQgKi8gLCBlKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHVzZXIgZGF0YSB0byBQcm90b2J1ZiBWYWx1ZXMuXG4gKlxuICogQHBhcmFtIGlucHV0IC0gRGF0YSB0byBiZSBwYXJzZWQuXG4gKiBAcGFyYW0gY29udGV4dCAtIEEgY29udGV4dCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHBhdGggYmVpbmcgcGFyc2VkLFxuICogdGhlIHNvdXJjZSBvZiB0aGUgZGF0YSBiZWluZyBwYXJzZWQsIGV0Yy5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcbiAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxuICovIGZ1bmN0aW9uIEl1KHQsIGUpIHtcbiAgICBpZiAoUnUoXG4gICAgLy8gVW53cmFwIHRoZSBBUEkgdHlwZSBmcm9tIHRoZSBDb21wYXQgU0RLLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBBUEkgdHlwZVxuICAgIC8vIGZyb20gZmlyZXN0b3JlLWV4cC5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIGJ1KFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6XCIsIGUsIHQpLCBBdSh0LCBlKTtcbiAgICBpZiAodCBpbnN0YW5jZW9mIHN1KSBcbiAgICAvLyBGaWVsZFZhbHVlcyB1c3VhbGx5IHBhcnNlIGludG8gdHJhbnNmb3JtcyAoZXhjZXB0IEZpZWxkVmFsdWUuZGVsZXRlKCkpXG4gICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXG4gICAgLy8gKGFzIGRvaW5nIHNvIHdpbGwgb3ZlcndyaXRlIHRoZSBmaWVsZCBkaXJlY3RseSBwcmlvciB0byB0aGUgdHJhbnNmb3JtXG4gICAgLy8gdHJ5aW5nIHRvIHRyYW5zZm9ybSBpdCkuIFNvIHdlIGRvbid0IGFkZCB0aGlzIGxvY2F0aW9uIHRvXG4gICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cbiAgICAvKipcbiAqIFwiUGFyc2VzXCIgdGhlIHByb3ZpZGVkIEZpZWxkVmFsdWVJbXBsLCBhZGRpbmcgYW55IG5lY2Vzc2FyeSB0cmFuc2Zvcm1zIHRvXG4gKiBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFNlbnRpbmVscyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCB3cml0ZXMsIGFuZCBub3Qgd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKCFjdShlLnhhKSkgdGhyb3cgZS5VYShgJHt0Ll9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB1cGRhdGUoKSBhbmQgc2V0KClgKTtcbiAgICAgICAgaWYgKCFlLnBhdGgpIHRocm93IGUuVWEoYCR7dC5fbWV0aG9kTmFtZX0oKSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbnNpZGUgYXJyYXlzYCk7XG4gICAgICAgIGNvbnN0IG4gPSB0Ll90b0ZpZWxkVHJhbnNmb3JtKGUpO1xuICAgICAgICBuICYmIGUuZmllbGRUcmFuc2Zvcm1zLnB1c2gobik7XG4gICAgfVxuICAgIC8qKlxuICogSGVscGVyIHRvIHBhcnNlIGEgc2NhbGFyIHZhbHVlIChpLmUuIG5vdCBhbiBPYmplY3QsIEFycmF5LCBvciBGaWVsZFZhbHVlKVxuICpcbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWVcbiAqLyAodCwgZSksIG51bGw7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCAmJiBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpIFxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB1bmRlZmluZWQgaXQgY2FuIG5ldmVyIHBhcnRpY2lwYXRlIGluIHRoZSBmaWVsZE1hc2ssIHNvXG4gICAgLy8gZG9uJ3QgaGFuZGxlIHRoaXMgYmVsb3cuIElmIGBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzYCBpcyBmYWxzZSxcbiAgICAvLyBgcGFyc2VTY2FsYXJWYWx1ZWAgd2lsbCByZWplY3QgYW4gdW5kZWZpbmVkIHZhbHVlLlxuICAgIHJldHVybiBudWxsO1xuICAgIGlmIChcbiAgICAvLyBJZiBjb250ZXh0LnBhdGggaXMgbnVsbCB3ZSBhcmUgaW5zaWRlIGFuIGFycmF5IGFuZCB3ZSBkb24ndCBzdXBwb3J0XG4gICAgLy8gZmllbGQgbWFzayBwYXRocyBtb3JlIGdyYW51bGFyIHRoYW4gdGhlIHRvcC1sZXZlbCBhcnJheS5cbiAgICBlLnBhdGggJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpLCB0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogSW5jbHVkZSB0aGUgcGF0aCBjb250YWluaW5nIHRoZSBhcnJheSBpbiB0aGUgZXJyb3JcbiAgICAgICAgLy8gbWVzc2FnZS5cbiAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgSU4gcXVlcmllcywgdGhlIHBhcnNlZCBkYXRhIGlzIGFuIGFycmF5IChyZXByZXNlbnRpbmdcbiAgICAgICAgLy8gdGhlIHNldCBvZiB2YWx1ZXMgdG8gYmUgaW5jbHVkZWQgZm9yIHRoZSBJTiBxdWVyeSkgdGhhdCBtYXkgZGlyZWN0bHlcbiAgICAgICAgLy8gY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZWFjaCByZXByZXNlbnRpbmcgYW4gaW5kaXZpZHVhbCBmaWVsZFxuICAgICAgICAvLyB2YWx1ZSksIHNvIHdlIGRpc2FibGUgdGhpcyB2YWxpZGF0aW9uLlxuICAgICAgICBpZiAoZS5zZXR0aW5ncy5GYSAmJiA0IC8qIEFycmF5QXJndW1lbnQgKi8gIT09IGUueGEpIHRocm93IGUuVWEoXCJOZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IEl1KGksIGUuQmEocykpO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gdCAmJiAoXG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpbmNsdWRlIG51bGxzIGluIHRoZSBhcnJheSBmb3IgZmllbGRzIGJlaW5nIHJlcGxhY2VkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxuICAgICAgICAgICAgICAgIHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgICAgICB9KSwgbi5wdXNoKHQpLCBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgPT09ICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQpIHJldHVybiAkZShlLmssIHQpO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBib29sZWFuVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmdWYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBjdC5mcm9tRGF0ZSh0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IFFuKGUuaywgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBjdCkge1xuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgY3QodC5zZWNvbmRzLCAxZTMgKiBNYXRoLmZsb29yKHQubmFub3NlY29uZHMgLyAxZTMpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IFFuKGUuaywgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBpdSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogdC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHQubG9uZ2l0dWRlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgbnUpIHJldHVybiB7XG4gICAgICAgICAgICBieXRlc1ZhbHVlOiBXbihlLmssIHQuX2J5dGVTdHJpbmcpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgUGMpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmRhdGFiYXNlSWQsIHMgPSB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZDtcbiAgICAgICAgICAgIGlmICghcy5pc0VxdWFsKG4pKSB0aHJvdyBlLlVhKGBEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0gYnV0IHNob3VsZCBiZSBmb3IgZGF0YWJhc2UgJHtuLnByb2plY3RJZH0vJHtuLmRhdGFiYXNlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VWYWx1ZTogSG4odC5maXJlc3RvcmUuX2RhdGFiYXNlSWQgfHwgZS5kYXRhYmFzZUlkLCB0Ll9rZXkucGF0aClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZS5VYShgVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6ICR7VGModCl9YCk7XG4gICAgfVxuICAgIC8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGxvb2tzIGxpa2UgYSBKU09OIG9iamVjdCB0aGF0IHNob3VsZCBiZSBjb252ZXJ0ZWRcbiAqIGludG8gYSBzdHJ1Y3QuIE5vcm1hbCBjbGFzcy9wcm90b3R5cGUgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZVxuICogSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBhIHN0cnVjdCB2YWx1ZS4gQXJyYXlzLCBEYXRlcyxcbiAqIEdlb1BvaW50cywgZXRjLiBhcmUgbm90IGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IG1hcFxuICogdG8gc3BlY2lmaWMgRmllbGRWYWx1ZSB0eXBlcyBvdGhlciB0aGFuIE9iamVjdFZhbHVlLlxuICovICh0LCBlKTtcbn1cblxuZnVuY3Rpb24gQXUodCwgZSkge1xuICAgIGNvbnN0IG4gPSB7fTtcbiAgICByZXR1cm4gZnQodCkgPyBcbiAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZW1wdHkgb2JqZWN0LCB3ZSBleHBsaWNpdGx5IGFkZCBpdCB0byB0aGUgdXBkYXRlXG4gICAgLy8gbWFzayB0byBlbnN1cmUgdGhhdCB0aGUgc2VydmVyIGNyZWF0ZXMgYSBtYXAgZW50cnkuXG4gICAgZS5wYXRoICYmIGUucGF0aC5sZW5ndGggPiAwICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSA6IGx0KHQsICgodCwgcykgPT4ge1xuICAgICAgICBjb25zdCBpID0gSXUocywgZS5PYSh0KSk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAoblt0XSA9IGkpO1xuICAgIH0pKSwge1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBSdSh0KSB7XG4gICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0IHx8IHQgaW5zdGFuY2VvZiBBcnJheSB8fCB0IGluc3RhbmNlb2YgRGF0ZSB8fCB0IGluc3RhbmNlb2YgY3QgfHwgdCBpbnN0YW5jZW9mIGl1IHx8IHQgaW5zdGFuY2VvZiBudSB8fCB0IGluc3RhbmNlb2YgUGMgfHwgdCBpbnN0YW5jZW9mIHN1KTtcbn1cblxuZnVuY3Rpb24gYnUodCwgZSwgbikge1xuICAgIGlmICghUnUobikgfHwgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpID09PSBPYmplY3QucHJvdG90eXBlIHx8IG51bGwgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSk7XG4gICAgfShuKSkge1xuICAgICAgICBjb25zdCBzID0gVGMobik7XG4gICAgICAgIHRocm93IFwiYW4gb2JqZWN0XCIgPT09IHMgPyBlLlVhKHQgKyBcIiBhIGN1c3RvbSBvYmplY3RcIikgOiBlLlVhKHQgKyBcIiBcIiArIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gUHUodCwgZSwgbikge1xuICAgIGlmICgoXG4gICAgLy8gSWYgcmVxdWlyZWQsIHJlcGxhY2UgdGhlIEZpZWxkUGF0aCBDb21wYXQgY2xhc3Mgd2l0aCB3aXRoIHRoZSBmaXJlc3RvcmUtZXhwXG4gICAgLy8gRmllbGRQYXRoLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIGluc3RhbmNlb2YgdHUpIHJldHVybiBlLl9pbnRlcm5hbFBhdGg7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBWdSh0LCBlKTtcbiAgICB0aHJvdyBTdShcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgRmllbGRQYXRoLlwiLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCB2dSA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIFZ1KHQsIGUsIG4pIHtcbiAgICBpZiAoZS5zZWFyY2godnUpID49IDApIHRocm93IFN1KGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IHR1KC4uLmUuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgdGhyb3cgU3UoYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCB0LCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTdSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgY29uc3QgciA9IHMgJiYgIXMuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCBhID0gYEZ1bmN0aW9uICR7ZX0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKGEgKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCBhICs9IFwiLiBcIjtcbiAgICBsZXQgYyA9IFwiXCI7XG4gICAgcmV0dXJuIChyIHx8IG8pICYmIChjICs9IFwiIChmb3VuZFwiLCByICYmIChjICs9IGAgaW4gZmllbGQgJHtzfWApLCBvICYmIChjICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBjICs9IFwiKVwiKSwgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBhICsgdCArIGMpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24gRHUodCwgZSkge1xuICAgIHJldHVybiB0LnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgQ3Uge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gcywgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYyh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IE51KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoa3UoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIE51IGV4dGVuZHMgQ3Uge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24ga3UodCwgZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gVnUodCwgZSkgOiBlIGluc3RhbmNlb2YgdHUgPyBlLl9pbnRlcm5hbFBhdGggOiBlLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgeHUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gdC5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyAkdSBleHRlbmRzIEN1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMsIHIpLCB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9maXJlc3RvcmVJbXBsID0gdCwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBzaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhXG4gICAgICogZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBPdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLm1ldGFkYXRhLCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSwgdC5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYSBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdGhhdCBoYXMgbm90IHlldCBiZWVuIHNldCB0b1xuICAgICAqIGl0cyBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZSB0aGlzIGJ5XG4gICAgICogcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IHRoZSBmaWVsZCBpcyByZXRyaWV2ZWRcbiAgICAgKiBmcm9tIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KHQsIGUgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKGt1KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUobiwgZS5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIE91IGV4dGVuZHMgJHUge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyBGdSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fc25hcHNob3QgPSBzLCB0aGlzLm1ldGFkYXRhID0gbmV3IHh1KHMuaGFzUGVuZGluZ1dyaXRlcywgcy5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCB0O1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmNhbGwoZSwgbmV3IE91KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgeHUodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyh0ID0ge30pIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAoZSAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IGUgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodC5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBuZXcgT3UodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IHh1KHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlciksXG4gICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IGUrK1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQSBgRG9jdW1lbnRTZXRgIHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGxldCBuID0gdC5fc25hcHNob3Qub2xkRG9jcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5maWx0ZXIoKHQgPT4gZSB8fCAzIC8qIE1ldGFkYXRhICovICE9PSB0LnR5cGUpKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IE91KHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIGUuZG9jLmtleSwgZS5kb2MsIG5ldyB4dSh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZS5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCByID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIEFkZGVkICovICE9PSBlLnR5cGUgJiYgKGkgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBSZW1vdmVkICovICE9PSBlLnR5cGUgJiYgKG4gPSBuLmFkZChlLmRvYyksIHIgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE11KGUudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiByXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTXUodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgcmV0dXJuIFwiYWRkZWRcIjtcblxuICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlZFwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQigpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24gTHUodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgJHUgJiYgZSBpbnN0YW5jZW9mICR1ID8gdC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgdC5fa2V5LmlzRXF1YWwoZS5fa2V5KSAmJiAobnVsbCA9PT0gdC5fZG9jdW1lbnQgPyBudWxsID09PSBlLl9kb2N1bWVudCA6IHQuX2RvY3VtZW50LmlzRXF1YWwoZS5fZG9jdW1lbnQpKSAmJiB0Ll9jb252ZXJ0ZXIgPT09IGUuX2NvbnZlcnRlciA6IHQgaW5zdGFuY2VvZiBGdSAmJiBlIGluc3RhbmNlb2YgRnUgJiYgKHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIGtjKHQucXVlcnksIGUucXVlcnkpICYmIHQubWV0YWRhdGEuaXNFcXVhbChlLm1ldGFkYXRhKSAmJiB0Ll9zbmFwc2hvdC5pc0VxdWFsKGUuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIEJ1KHQpIHtcbiAgICBpZiAoVGUodCkgJiYgMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgUShqLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogZW5kQmVmb3JlOjF9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSBvciB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayBxdWVyeX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBVdSB7fVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGluc3RhbmNlIG9mIHtAbGluayBRdWVyeX0gdGhhdCBpcyBleHRlbmRlZCB0byBhbHNvIGluY2x1ZGVcbiAqIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHtAbGluayBRdWVyeX0gaW5zdGFuY2UgdG8gdXNlIGFzIGEgYmFzZSBmb3IgdGhlIG5ldyBjb25zdHJhaW50cy5cbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gVGhlIGxpc3Qgb2Yge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH1zIHRvIGFwcGx5LlxuICogQHRocm93cyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IGNvbnN0cmFpbnRzIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHRoZVxuICogZXhpc3Rpbmcgb3IgbmV3IGNvbnN0cmFpbnRzLlxuICovIGZ1bmN0aW9uIHF1KHQsIC4uLmUpIHtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IG4uX2FwcGx5KHQpO1xuICAgIHJldHVybiB0O1xufVxuXG5jbGFzcyBLdSBleHRlbmRzIFV1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuR2EgPSB0LCB0aGlzLnphID0gZSwgdGhpcy5IYSA9IG4sIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGx1KHQuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGxldCBhO1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gciB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcikgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7cn0nIHF1ZXJpZXMgb24gRmllbGRQYXRoLmRvY3VtZW50SWQoKS5gKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJpblwiIC8qIElOICovID09PSByIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSByKSB7XG4gICAgICAgICAgICAgICAgICAgIGloKG8sIHIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBvKSBlLnB1c2goc2gocywgdCwgbikpO1xuICAgICAgICAgICAgICAgICAgICBhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBhID0gc2gocywgdCwgbyk7XG4gICAgICAgICAgICB9IGVsc2UgXCJpblwiIC8qIElOICovICE9PSByICYmIFwibm90LWluXCIgLyogTk9UX0lOICovICE9PSByICYmIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICE9PSByIHx8IGloKG8sIHIpLCBcbiAgICAgICAgICAgIGEgPSBFdShuLCBlLCBvLCBcbiAgICAgICAgICAgIC8qIGFsbG93QXJyYXlzPSAqLyBcImluXCIgLyogSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IHIpO1xuICAgICAgICAgICAgY29uc3QgYyA9IHRlLmNyZWF0ZShpLCByLCBhKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuVigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4gJiYgIW4uaXNFcXVhbChlLmZpZWxkKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG11c3QgYmUgb24gdGhlIHNhbWUgZmllbGQuIEJ1dCB5b3UgaGF2ZSBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJyR7bi50b1N0cmluZygpfScgYW5kICcke2UuZmllbGQudG9TdHJpbmcoKX0nYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBFZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiByaCh0LCBlLmZpZWxkLCBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZmlsdGVycykgaWYgKGUuaW5kZXhPZihuLm9wKSA+PSAwKSByZXR1cm4gbi5vcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSh0LCBcbiAgICAgICAgICAgICAgICAvKipcbiAqIEdpdmVuIGFuIG9wZXJhdG9yLCByZXR1cm5zIHRoZSBzZXQgb2Ygb3BlcmF0b3JzIHRoYXQgY2Fubm90IGJlIHVzZWQgd2l0aCBpdC5cbiAqXG4gKiBPcGVyYXRvcnMgaW4gYSBxdWVyeSBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHNldCBvZiBydWxlczpcbiAqIDEuIE9ubHkgb25lIGFycmF5IG9wZXJhdG9yIGlzIGFsbG93ZWQuXG4gKiAyLiBPbmx5IG9uZSBkaXNqdW5jdGl2ZSBvcGVyYXRvciBpcyBhbGxvd2VkLlxuICogMy4gYE5PVF9FUVVBTGAgY2Fubm90IGJlIHVzZWQgd2l0aCBhbm90aGVyIGBOT1RfRVFVQUxgIG9wZXJhdG9yLlxuICogNC4gYE5PVF9JTmAgY2Fubm90IGJlIHVzZWQgd2l0aCBhcnJheSwgZGlzanVuY3RpdmUsIG9yIGBOT1RfRVFVQUxgIG9wZXJhdG9ycy5cbiAqXG4gKiBBcnJheSBvcGVyYXRvcnM6IGBBUlJBWV9DT05UQUlOU2AsIGBBUlJBWV9DT05UQUlOU19BTllgXG4gKiBEaXNqdW5jdGl2ZSBvcGVyYXRvcnM6IGBJTmAsIGBBUlJBWV9DT05UQUlOU19BTllgLCBgTk9UX0lOYFxuICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBJTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KGUub3ApKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgICAgICAgIHRocm93IG4gPT09IGUub3AgPyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlci5gKSA6IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlcnMgd2l0aCAnJHtuLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xuICAgICAgICAgICAgfSh0LCBjKSwgYztcbiAgICAgICAgfSh0Ll9xdWVyeSwgXCJ3aGVyZVwiLCBlLCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgdGhpcy5HYSwgdGhpcy56YSwgdGhpcy5IYSk7XG4gICAgICAgIHJldHVybiBuZXcgdmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5maWx0ZXJzLmNvbmNhdChbIGUgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG1lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIG4sIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IGVuZm9yY2VzIHRoYXQgZG9jdW1lbnRzIG11c3QgY29udGFpbiB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCBhbmQgdGhhdCB0aGUgdmFsdWUgc2hvdWxkIHNhdGlzZnkgdGhlIHJlbGF0aW9uIGNvbnN0cmFpbnRcbiAqIHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCB0byBjb21wYXJlXG4gKiBAcGFyYW0gb3BTdHIgLSBUaGUgb3BlcmF0aW9uIHN0cmluZyAoZS5nIFwiJmx0O1wiLCBcIiZsdDs9XCIsIFwiPT1cIiwgXCImbHQ7XCIsXG4gKiAgIFwiJmx0Oz1cIiwgXCIhPVwiKS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBmb3IgY29tcGFyaXNvblxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBqdSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGUsIGkgPSBrdShcIndoZXJlXCIsIHQpO1xuICAgIHJldHVybiBuZXcgS3UoaSwgcywgbik7XG59XG5cbmNsYXNzIFF1IGV4dGVuZHMgVXUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5HYSA9IHQsIHRoaXMuSmEgPSBlLCB0aGlzLnR5cGUgPSBcIm9yZGVyQnlcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LnN0YXJ0QXQpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5lbmRBdCkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIGVuZEF0KCkgb3IgZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgZmUoZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBFZSh0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBvcmRlciBieS4gSXQgbXVzdCBtYXRjaCBhbnkgaW5lcXVhbGl0eS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEllKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIHJoKHQsIG4sIGUuZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0odCwgcyksIHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovICh0Ll9xdWVyeSwgdGhpcy5HYSwgdGhpcy5KYSk7XG4gICAgICAgIHJldHVybiBuZXcgdmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBtZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCBuLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgc29ydHMgdGhlIHF1ZXJ5IHJlc3VsdCBieSB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCwgb3B0aW9uYWxseSBpbiBkZXNjZW5kaW5nIG9yZGVyIGluc3RlYWQgb2YgYXNjZW5kaW5nLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAqIEBwYXJhbSBkaXJlY3Rpb25TdHIgLSBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3IgJ2Rlc2MnKS4gSWZcbiAqIG5vdCBzcGVjaWZpZWQsIG9yZGVyIHdpbGwgYmUgYXNjZW5kaW5nLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBXdSh0LCBlID0gXCJhc2NcIikge1xuICAgIGNvbnN0IG4gPSBlLCBzID0ga3UoXCJvcmRlckJ5XCIsIHQpO1xuICAgIHJldHVybiBuZXcgUXUocywgbik7XG59XG5cbmNsYXNzIEd1IGV4dGVuZHMgVXUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5ZYSA9IGUsIHRoaXMuWGEgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gbmV3IHZjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgUGUodC5fcXVlcnksIHRoaXMuWWEsIHRoaXMuWGEpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24genUodCkge1xuICAgIHJldHVybiBJYyhcImxpbWl0XCIsIHQpLCBuZXcgR3UoXCJsaW1pdFwiLCB0LCBcIkZcIiAvKiBGaXJzdCAqLyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBsYXN0IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAqXG4gKiBZb3UgbXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBgb3JkZXJCeWAgY2xhdXNlIGZvciBgbGltaXRUb0xhc3RgIHF1ZXJpZXMsXG4gKiBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGR1cmluZyBleGVjdXRpb24uXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gSHUodCkge1xuICAgIHJldHVybiBJYyhcImxpbWl0VG9MYXN0XCIsIHQpLCBuZXcgR3UoXCJsaW1pdFRvTGFzdFwiLCB0LCBcIkxcIiAvKiBMYXN0ICovKTtcbn1cblxuY2xhc3MgSnUgZXh0ZW5kcyBVdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLlphID0gZSwgdGhpcy50YyA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuaCh0LCB0aGlzLnR5cGUsIHRoaXMuWmEsIHRoaXMudGMpO1xuICAgICAgICByZXR1cm4gbmV3IHZjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBtZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIGUsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBZdSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBKdShcInN0YXJ0QXRcIiwgdCwgLypiZWZvcmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBYdSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBKdShcInN0YXJ0QWZ0ZXJcIiwgdCwgXG4gICAgLypiZWZvcmU9Ki8gITEpO1xufVxuXG5jbGFzcyBadSBleHRlbmRzIFV1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuWmEgPSBlLCB0aGlzLnRjID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5oKHQsIHRoaXMudHlwZSwgdGhpcy5aYSwgdGhpcy50Yyk7XG4gICAgICAgIHJldHVybiBuZXcgdmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG1lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCBlKTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdGgoLi4udCkge1xuICAgIHJldHVybiBuZXcgWnUoXCJlbmRCZWZvcmVcIiwgdCwgLypiZWZvcmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBlaCguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBadShcImVuZEF0XCIsIHQsIC8qYmVmb3JlPSovICExKTtcbn1cblxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovIGZ1bmN0aW9uIG5oKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoblswXSA9IGdldE1vZHVsYXJJbnN0YW5jZShuWzBdKSwgblswXSBpbnN0YW5jZW9mIEN1KSByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBpZiAoIXMpIHRocm93IG5ldyBRKGouTk9UX0ZPVU5ELCBgQ2FuJ3QgdXNlIGEgRG9jdW1lbnRTbmFwc2hvdCB0aGF0IGRvZXNuJ3QgZXhpc3QgZm9yICR7bn0oKS5gKTtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICAvLyBCZWNhdXNlIHBlb3BsZSBleHBlY3QgdG8gY29udGludWUvZW5kIGEgcXVlcnkgYXQgdGhlIGV4YWN0IGRvY3VtZW50XG4gICAgICAgIC8vIHByb3ZpZGVkLCB3ZSBuZWVkIHRvIHVzZSB0aGUgaW1wbGljaXQgc29ydCBvcmRlciByYXRoZXIgdGhhbiB0aGUgZXhwbGljaXRcbiAgICAgICAgLy8gc29ydCBvcmRlciwgYmVjYXVzZSBpdCdzIGd1YXJhbnRlZWQgdG8gY29udGFpbiB0aGUgZG9jdW1lbnQga2V5LiBUaGF0IHdheVxuICAgICAgICAvLyB0aGUgcG9zaXRpb24gYmVjb21lcyB1bmFtYmlndW91cyBhbmQgdGhlIHF1ZXJ5IGNvbnRpbnVlcy9lbmRzIGV4YWN0bHkgYXRcbiAgICAgICAgLy8gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiBXaXRob3V0IHRoZSBrZXkgKGJ5IHVzaW5nIHRoZSBleHBsaWNpdCBzb3J0XG4gICAgICAgIC8vIG9yZGVycyksIG11bHRpcGxlIGRvY3VtZW50cyBjb3VsZCBtYXRjaCB0aGUgcG9zaXRpb24sIHlpZWxkaW5nIGR1cGxpY2F0ZVxuICAgICAgICAvLyByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBSZSh0KSkgaWYgKG4uZmllbGQuaXNLZXlGaWVsZCgpKSByLnB1c2goTXQoZSwgcy5rZXkpKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy5kYXRhLmZpZWxkKG4uZmllbGQpO1xuICAgICAgICAgICAgaWYgKFJ0KHQpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgXCInICsgbi5maWVsZCArICdcIiBpcyBhbiB1bmNvbW1pdHRlZCBzZXJ2ZXIgdGltZXN0YW1wLiAoU2luY2UgdGhlIHZhbHVlIG9mIHRoaXMgZmllbGQgaXMgdW5rbm93biwgeW91IGNhbm5vdCBzdGFydC9lbmQgYSBxdWVyeSB3aXRoIGl0LiknKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uZmllbGQuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkICcke3R9JyAodXNlZCBhcyB0aGUgb3JkZXJCeSkgZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBoZShyLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDb252ZXJ0cyBhIGxpc3Qgb2YgZmllbGQgdmFsdWVzIHRvIGEgYEJvdW5kYCBmb3IgdGhlIGdpdmVuIHF1ZXJ5LlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGUsIG5bMF0uX2RvY3VtZW50LCBzKTtcbiAgICB7XG4gICAgICAgIGNvbnN0IGkgPSBsdSh0LmZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgICAgICAvLyBVc2UgZXhwbGljaXQgb3JkZXIgYnkncyBiZWNhdXNlIGl0IGhhcyB0byBtYXRjaCB0aGUgcXVlcnkgdGhlIHVzZXIgbWFkZVxuICAgICAgICAgICAgY29uc3QgbyA9IHQuZXhwbGljaXRPcmRlckJ5O1xuICAgICAgICAgICAgaWYgKGkubGVuZ3RoID4gby5sZW5ndGgpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYFRvbyBtYW55IGFyZ3VtZW50cyBwcm92aWRlZCB0byAke3N9KCkuIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3JkZXJCeSgpIGNsYXVzZXNgKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgaS5sZW5ndGg7IHIrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBpW3JdO1xuICAgICAgICAgICAgICAgIGlmIChvW3JdLmZpZWxkLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgYykgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGRvY3VtZW50IElEIGluICR7c30oKSwgYnV0IGdvdCBhICR7dHlwZW9mIGN9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQWUodCkgJiYgLTEgIT09IGMuaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGFuZCBvcmRlcmluZyBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtjfScgY29udGFpbnMgYSBzbGFzaC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQucGF0aC5jaGlsZCh3dC5mcm9tU3RyaW5nKGMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFEdC5pc0RvY3VtZW50S2V5KG4pKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7bn0nIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgRHQobik7XG4gICAgICAgICAgICAgICAgICAgIGEucHVzaChNdChlLCBpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IEV1KG4sIHMsIGMpO1xuICAgICAgICAgICAgICAgICAgICBhLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBoZShhLCByKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGRvY3VtZW50SWRWYWx1ZWAgaW50byBhIGBSZWZlcmVuY2VWYWx1ZWAsIHRocm93aW5nXG4gKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gKiBvciBgc3RyaW5nYCwgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgaSwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzaCh0LCBlLCBuKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIChuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pKSkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gbikgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgZG9jdW1lbnQgSUQsIGJ1dCBpdCB3YXMgYW4gZW1wdHkgc3RyaW5nLlwiKTtcbiAgICAgICAgaWYgKCFBZShlKSAmJiAtMSAhPT0gbi5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IFEoai5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7bn0nIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5gKTtcbiAgICAgICAgY29uc3QgcyA9IGUucGF0aC5jaGlsZCh3dC5mcm9tU3RyaW5nKG4pKTtcbiAgICAgICAgaWYgKCFEdC5pc0RvY3VtZW50S2V5KHMpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7c30nIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzICgke3MubGVuZ3RofSkuYCk7XG4gICAgICAgIHJldHVybiBNdCh0LCBuZXcgRHQocykpO1xuICAgIH1cbiAgICBpZiAobiBpbnN0YW5jZW9mIFBjKSByZXR1cm4gTXQodCwgbi5fa2V5KTtcbiAgICB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIHN0cmluZyBvciBhIERvY3VtZW50UmVmZXJlbmNlLCBidXQgaXQgd2FzOiAke1RjKG4pfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGludG8gYSBkaXNqdW5jdGl2ZSBmaWx0ZXIgc2F0aXNmaWVzIGFsbFxuICogYXJyYXkgcmVxdWlyZW1lbnRzLlxuICovIGZ1bmN0aW9uIGloKHQsIGUpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodCkgfHwgMCA9PT0gdC5sZW5ndGgpIHRocm93IG5ldyBRKGouSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIEEgbm9uLWVtcHR5IGFycmF5IGlzIHJlcXVpcmVkIGZvciAnJHtlLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xuICAgIGlmICh0Lmxlbmd0aCA+IDEwKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiAnJHtlLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHN1cHBvcnQgYSBtYXhpbXVtIG9mIDEwIGVsZW1lbnRzIGluIHRoZSB2YWx1ZSBhcnJheS5gKTtcbn1cblxuZnVuY3Rpb24gcmgodCwgZSwgbikge1xuICAgIGlmICghbi5pc0VxdWFsKGUpKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgaGF2ZSBhIHdoZXJlIGZpbHRlciB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgb24gZmllbGQgJyR7ZS50b1N0cmluZygpfScgYW5kIHNvIHlvdSBtdXN0IGFsc28gdXNlICcke2UudG9TdHJpbmcoKX0nIGFzIHlvdXIgZmlyc3QgYXJndW1lbnQgdG8gb3JkZXJCeSgpLCBidXQgeW91ciBmaXJzdCBvcmRlckJ5KCkgaXMgb24gZmllbGQgJyR7bi50b1N0cmluZygpfScgaW5zdGVhZC5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgRmlyZXN0b3JlJ3MgaW50ZXJuYWwgdHlwZXMgdG8gdGhlIEphdmFTY3JpcHQgdHlwZXMgdGhhdCB3ZSBleHBvc2VcbiAqIHRvIHRoZSB1c2VyLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIG9oIHtcbiAgICBjb252ZXJ0VmFsdWUodCwgZSA9IFwibm9uZVwiKSB7XG4gICAgICAgIHN3aXRjaCAoQ3QodCkpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdC5ib29sZWFuVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIEl0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAodC50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZTtcblxuICAgICAgICAgIGNhc2UgNiAvKiBCbG9iVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEJ5dGVzKEF0KHQuYnl0ZXNWYWx1ZSkpO1xuXG4gICAgICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRSZWZlcmVuY2UodC5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0R2VvUG9pbnQodC5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRBcnJheSh0LmFycmF5VmFsdWUsIGUpO1xuXG4gICAgICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0KHQubWFwVmFsdWUsIGUpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IEIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0T2JqZWN0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHt9O1xuICAgICAgICByZXR1cm4gbHQodC5maWVsZHMsICgodCwgcykgPT4ge1xuICAgICAgICAgICAgblt0XSA9IHRoaXMuY29udmVydFZhbHVlKHMsIGUpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGNvbnZlcnRHZW9Qb2ludCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgaXUoSXQodC5sYXRpdHVkZSksIEl0KHQubG9uZ2l0dWRlKSk7XG4gICAgfVxuICAgIGNvbnZlcnRBcnJheSh0LCBlKSB7XG4gICAgICAgIHJldHVybiAodC52YWx1ZXMgfHwgW10pLm1hcCgodCA9PiB0aGlzLmNvbnZlcnRWYWx1ZSh0LCBlKSkpO1xuICAgIH1cbiAgICBjb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInByZXZpb3VzXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gYnQodCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHRoaXMuY29udmVydFZhbHVlKG4sIGUpO1xuXG4gICAgICAgICAgY2FzZSBcImVzdGltYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKFB0KHQpKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0VGltZXN0YW1wKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEV0KHQpO1xuICAgICAgICByZXR1cm4gbmV3IGN0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfVxuICAgIGNvbnZlcnREb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB3dC5mcm9tU3RyaW5nKHQpO1xuICAgICAgICBVKFJzKG4pKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyB3YyhuLmdldCgxKSwgbi5nZXQoMykpLCBpID0gbmV3IER0KG4ucG9wRmlyc3QoNSkpO1xuICAgICAgICByZXR1cm4gcy5pc0VxdWFsKGUpIHx8IFxuICAgICAgICAvLyBUT0RPKGIvNjQxMzAyMDIpOiBTb21laG93IHN1cHBvcnQgZm9yZWlnbiByZWZlcmVuY2VzLlxuICAgICAgICBGKGBEb2N1bWVudCAke2l9IGNvbnRhaW5zIGEgZG9jdW1lbnQgcmVmZXJlbmNlIHdpdGhpbiBhIGRpZmZlcmVudCBkYXRhYmFzZSAoJHtzLnByb2plY3RJZH0vJHtzLmRhdGFiYXNlfSkgd2hpY2ggaXMgbm90IHN1cHBvcnRlZC4gSXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVmZXJlbmNlIGluIHRoZSBjdXJyZW50IGRhdGFiYXNlICgke2UucHJvamVjdElkfS8ke2UuZGF0YWJhc2V9KSBpbnN0ZWFkLmApLCBcbiAgICAgICAgaTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIGN1c3RvbSBtb2RlbCBvYmplY3Qgb2YgdHlwZSBUIGludG8gYERvY3VtZW50RGF0YWAgYnkgYXBwbHlpbmcgdGhlXG4gKiBjb252ZXJ0ZXIgaWYgaXQgZXhpc3RzLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgdXNlciBvYmplY3RzIHRvIGBEb2N1bWVudERhdGFgXG4gKiBiZWNhdXNlIHdlIHdhbnQgdG8gcHJvdmlkZSB0aGUgdXNlciB3aXRoIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlIGlmXG4gKiB0aGVpciBgc2V0KClgIG9yIGZhaWxzIGR1ZSB0byBpbnZhbGlkIGRhdGEgb3JpZ2luYXRpbmcgZnJvbSBhIGB0b0ZpcmVzdG9yZSgpYFxuICogY2FsbC5cbiAqLyBmdW5jdGlvbiBhaCh0LCBlLCBuKSB7XG4gICAgbGV0IHM7XG4gICAgLy8gQ2FzdCB0byBgYW55YCBpbiBvcmRlciB0byBzYXRpc2Z5IHRoZSB1bmlvbiB0eXBlIGNvbnN0cmFpbnQgb25cbiAgICAvLyB0b0ZpcmVzdG9yZSgpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIHMgPSB0ID8gbiAmJiAobi5tZXJnZSB8fCBuLm1lcmdlRmllbGRzKSA/IHQudG9GaXJlc3RvcmUoZSwgbikgOiB0LnRvRmlyZXN0b3JlKGUpIDogZSwgXG4gICAgcztcbn1cblxuY2xhc3MgY2ggZXh0ZW5kcyBvaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgbnUodCk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkodCwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IFBjKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB3cml0ZSBiYXRjaCwgdXNlZCB0byBwZXJmb3JtIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAqXG4gKiBBIGBXcml0ZUJhdGNoYCBvYmplY3QgY2FuIGJlIGFjcXVpcmVkIGJ5IGNhbGxpbmcge0BsaW5rIHdyaXRlQmF0Y2h9LiBJdFxuICogcHJvdmlkZXMgbWV0aG9kcyBmb3IgYWRkaW5nIHdyaXRlcyB0byB0aGUgd3JpdGUgYmF0Y2guIE5vbmUgb2YgdGhlIHdyaXRlc1xuICogd2lsbCBiZSBjb21taXR0ZWQgKG9yIHZpc2libGUgbG9jYWxseSkgdW50aWwge0BsaW5rIFdyaXRlQmF0Y2guY29tbWl0fSBpc1xuICogY2FsbGVkLlxuICovIGNsYXNzIHVoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fY29tbWl0SGFuZGxlciA9IGUsIHRoaXMuX211dGF0aW9ucyA9IFtdLCB0aGlzLl9jb21taXR0ZWQgPSAhMSwgXG4gICAgICAgIHRoaXMuX2RhdGFSZWFkZXIgPSBsdSh0KTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IHMgPSBoaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gYWgocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gZnUodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihzLl9rZXksIFllLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgaSA9IGhoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIHR1ID8gVHUodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogcHUodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKGkuX2tleSwgWWUuZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBlID0gaGgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IGxuKGUuX2tleSwgWWUubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdHMgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhpcyB3cml0ZSBiYXRjaCBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHQgb2YgdGhlc2Ugd3JpdGVzIHdpbGwgb25seSBiZSByZWZsZWN0ZWQgaW4gZG9jdW1lbnQgcmVhZHMgdGhhdFxuICAgICAqIG9jY3VyIGFmdGVyIHRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzLiBJZiB0aGUgY2xpZW50IGlzIG9mZmxpbmUsIHRoZVxuICAgICAqIHdyaXRlIGZhaWxzLiBJZiB5b3Ugd291bGQgbGlrZSB0byBzZWUgbG9jYWwgbW9kaWZpY2F0aW9ucyBvciBidWZmZXIgd3JpdGVzXG4gICAgICogdW50aWwgdGhlIGNsaWVudCBpcyBvbmxpbmUsIHVzZSB0aGUgZnVsbCBGaXJlc3RvcmUgU0RLLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgb25jZSBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGUgYmF0Y2ggaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgYXMgYW4gYXRvbWljIHVuaXQgKG5vdGUgdGhhdCBpdCB3b24ndFxuICAgICAqIHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICAgICAqLyAgICBjb21taXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKSwgdGhpcy5fY29tbWl0dGVkID0gITAsIHRoaXMuX211dGF0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5fY29tbWl0SGFuZGxlcih0aGlzLl9tdXRhdGlvbnMpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIF92ZXJpZnlOb3RDb21taXR0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHRocm93IG5ldyBRKGouRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIHdyaXRlIGJhdGNoIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBjb21taXQoKSBoYXMgYmVlbiBjYWxsZWQuXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGgodCwgZSkge1xuICAgIGlmICgodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkuZmlyZXN0b3JlICE9PSBlKSB0aHJvdyBuZXcgUShqLklOVkFMSURfQVJHVU1FTlQsIFwiUHJvdmlkZWQgZG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIGluc3RhbmNlLlwiKTtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE8obXJzY2htaWR0KSBDb25zaWRlciB1c2luZyBgQmFzZVRyYW5zYWN0aW9uYCBhcyB0aGUgYmFzZSBjbGFzcyBpbiB0aGVcbi8vIGxlZ2FjeSBTREsuXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnkgd2FpdGluZ1xuICogZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmIHlvdSBhcmVcbiAqIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvciwgaW52b2tlXG4gKiB7QGxpbmsgZ2V0RG9jRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jRnJvbVNlcnZlcn0uXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIFRoZSByZWZlcmVuY2Ugb2YgdGhlIGRvY3VtZW50IHRvIGZldGNoLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi9cbmZ1bmN0aW9uIGxoKHQpIHtcbiAgICB0ID0gRWModCwgUGMpO1xuICAgIGNvbnN0IGUgPSBFYyh0LmZpcmVzdG9yZSwgTWMpO1xuICAgIHJldHVybiBvYyhVYyhlKSwgdC5fa2V5KS50aGVuKChuID0+IGJoKGUsIHQsIG4pKSk7XG59XG5cbmNsYXNzIGZoIGV4dGVuZHMgb2gge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IG51KHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQYyh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBkaCh0KSB7XG4gICAgdCA9IEVjKHQsIFBjKTtcbiAgICBjb25zdCBlID0gRWModC5maXJlc3RvcmUsIE1jKSwgbiA9IFVjKGUpLCBzID0gbmV3IGZoKGUpO1xuICAgIHJldHVybiByYyhuLCB0Ll9rZXkpLnRoZW4oKG4gPT4gbmV3ICR1KGUsIHMsIHQuX2tleSwgbiwgbmV3IHh1KG51bGwgIT09IG4gJiYgbi5oYXNMb2NhbE11dGF0aW9ucywgXG4gICAgLyogZnJvbUNhY2hlPSAqLyAhMCksIHQuY29udmVydGVyKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSB0aGUgc2VydmVyLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gd2godCkge1xuICAgIHQgPSBFYyh0LCBQYyk7XG4gICAgY29uc3QgZSA9IEVjKHQuZmlyZXN0b3JlLCBNYyk7XG4gICAgcmV0dXJuIG9jKFVjKGUpLCB0Ll9rZXksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBiaChlLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jcygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5XG4gKiB3YWl0aW5nIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZlxuICogeW91IGFyZSBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsXG4gKiBpbnZva2Uge0BsaW5rIGdldERvY3NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NzRnJvbVNlcnZlcn0uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIF9oKHQpIHtcbiAgICB0ID0gRWModCwgdmMpO1xuICAgIGNvbnN0IGUgPSBFYyh0LmZpcmVzdG9yZSwgTWMpLCBuID0gVWMoZSksIHMgPSBuZXcgZmgoZSk7XG4gICAgcmV0dXJuIEJ1KHQuX3F1ZXJ5KSwgY2MobiwgdC5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IEZ1KGUsIHMsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gbWgodCkge1xuICAgIHQgPSBFYyh0LCB2Yyk7XG4gICAgY29uc3QgZSA9IEVjKHQuZmlyZXN0b3JlLCBNYyksIG4gPSBVYyhlKSwgcyA9IG5ldyBmaChlKTtcbiAgICByZXR1cm4gYWMobiwgdC5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IEZ1KGUsIHMsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gdGhlXG4gKiBzZXJ2ZXIuIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZ2godCkge1xuICAgIHQgPSBFYyh0LCB2Yyk7XG4gICAgY29uc3QgZSA9IEVjKHQuZmlyZXN0b3JlLCBNYyksIG4gPSBVYyhlKSwgcyA9IG5ldyBmaChlKTtcbiAgICByZXR1cm4gY2MobiwgdC5fcXVlcnksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBuZXcgRnUoZSwgcywgdCwgbikpKTtcbn1cblxuZnVuY3Rpb24geWgodCwgZSwgbikge1xuICAgIHQgPSBFYyh0LCBQYyk7XG4gICAgY29uc3QgcyA9IEVjKHQuZmlyZXN0b3JlLCBNYyksIGkgPSBhaCh0LmNvbnZlcnRlciwgZSwgbik7XG4gICAgcmV0dXJuIFJoKHMsIFsgZnUobHUocyksIFwic2V0RG9jXCIsIHQuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIG4pLnRvTXV0YXRpb24odC5fa2V5LCBZZS5ub25lKCkpIF0pO1xufVxuXG5mdW5jdGlvbiBwaCh0LCBlLCBuLCAuLi5zKSB7XG4gICAgdCA9IEVjKHQsIFBjKTtcbiAgICBjb25zdCBpID0gRWModC5maXJlc3RvcmUsIE1jKSwgciA9IGx1KGkpO1xuICAgIGxldCBvO1xuICAgIG8gPSBcInN0cmluZ1wiID09IHR5cGVvZiAoXG4gICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIHR1ID8gVHUociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlLCBuLCBzKSA6IHB1KHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSk7XG4gICAgcmV0dXJuIFJoKGksIFsgby50b011dGF0aW9uKHQuX2tleSwgWWUuZXhpc3RzKCEwKSkgXSk7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHNwZWNpZmllZCBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gZGVsZXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGRvY3VtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogZGVsZXRlZCBmcm9tIHRoZSBiYWNrZW5kIChub3RlIHRoYXQgaXQgd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gVGgodCkge1xuICAgIHJldHVybiBSaChFYyh0LmZpcmVzdG9yZSwgTWMpLCBbIG5ldyBsbih0Ll9rZXksIFllLm5vbmUoKSkgXSk7XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGRvY3VtZW50IHRvIHNwZWNpZmllZCBgQ29sbGVjdGlvblJlZmVyZW5jZWAgd2l0aCB0aGUgZ2l2ZW4gZGF0YSxcbiAqIGFzc2lnbmluZyBpdCBhIGRvY3VtZW50IElEIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uIHRvIGFkZCB0aGlzIGRvY3VtZW50IHRvLlxuICogQHBhcmFtIGRhdGEgLSBBbiBPYmplY3QgY29udGFpbmluZyB0aGUgZGF0YSBmb3IgdGhlIG5ldyBkb2N1bWVudC5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRSZWZlcmVuY2VgIHBvaW50aW5nIHRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBkb2N1bWVudCBhZnRlciBpdCBoYXMgYmVlbiB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIChOb3RlIHRoYXQgaXRcbiAqIHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIEVoKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRWModC5maXJlc3RvcmUsIE1jKSwgcyA9IENjKHQpLCBpID0gYWgodC5jb252ZXJ0ZXIsIGUpO1xuICAgIHJldHVybiBSaChuLCBbIGZ1KGx1KHQuZmlyZXN0b3JlKSwgXCJhZGREb2NcIiwgcy5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwge30pLnRvTXV0YXRpb24ocy5fa2V5LCBZZS5leGlzdHMoITEpKSBdKS50aGVuKCgoKSA9PiBzKSk7XG59XG5cbmZ1bmN0aW9uIEloKHQsIC4uLmUpIHtcbiAgICB2YXIgbiwgcywgaTtcbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpO1xuICAgIGxldCByID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMVxuICAgIH0sIG8gPSAwO1xuICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIGVbb10gfHwgJGMoZVtvXSkgfHwgKHIgPSBlW29dLCBvKyspO1xuICAgIGNvbnN0IGEgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHIuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xuICAgIH07XG4gICAgaWYgKCRjKGVbb10pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlW29dO1xuICAgICAgICBlW29dID0gbnVsbCA9PT0gKG4gPSB0Lm5leHQpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uYmluZCh0KSwgZVtvICsgMV0gPSBudWxsID09PSAocyA9IHQuZXJyb3IpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuYmluZCh0KSwgXG4gICAgICAgIGVbbyArIDJdID0gbnVsbCA9PT0gKGkgPSB0LmNvbXBsZXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmJpbmQodCk7XG4gICAgfVxuICAgIGxldCBjLCB1LCBoO1xuICAgIGlmICh0IGluc3RhbmNlb2YgUGMpIHUgPSBFYyh0LmZpcmVzdG9yZSwgTWMpLCBoID0geWUodC5fa2V5LnBhdGgpLCBjID0ge1xuICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgIGVbb10gJiYgZVtvXShiaCh1LCB0LCBuKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSBFYyh0LCB2Yyk7XG4gICAgICAgIHUgPSBFYyhuLmZpcmVzdG9yZSwgTWMpLCBoID0gbi5fcXVlcnk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgZmgodSk7XG4gICAgICAgIGMgPSB7XG4gICAgICAgICAgICBuZXh0OiB0ID0+IHtcbiAgICAgICAgICAgICAgICBlW29dICYmIGVbb10obmV3IEZ1KHUsIHMsIG4sIHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICAgICAgfSwgQnUodC5fcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IEthKHMpLCByID0gbmV3IEhvKGUsIGksIG4pO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGpvKGF3YWl0IG5jKHQpLCByKSkpLCAoKSA9PiB7XG4gICAgICAgICAgICBpLm5hKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBRbyhhd2FpdCBuYyh0KSwgcikpKTtcbiAgICAgICAgfTtcbiAgICB9KFVjKHUpLCBoLCBhLCBjKTtcbn1cblxuZnVuY3Rpb24gQWgodCwgZSkge1xuICAgIHJldHVybiB1YyhVYyh0ID0gRWModCwgTWMpKSwgJGMoZSkgPyBlIDoge1xuICAgICAgICBuZXh0OiBlXG4gICAgfSk7XG59XG5cbi8qKlxuICogTG9jYWxseSB3cml0ZXMgYG11dGF0aW9uc2Agb24gdGhlIGFzeW5jIHF1ZXVlLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gUmgodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgVztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB1YShhd2FpdCBlYyh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xuICAgIH0oVWModCksIGUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEge0BsaW5rIFZpZXdTbmFwc2hvdH0gdGhhdCBjb250YWlucyB0aGUgc2luZ2xlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcmVmYFxuICogdG8gYSB7QGxpbmsgRG9jdW1lbnRTbmFwc2hvdH0uXG4gKi8gZnVuY3Rpb24gYmgodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuLmRvY3MuZ2V0KGUuX2tleSksIGkgPSBuZXcgZmgodCk7XG4gICAgcmV0dXJuIG5ldyAkdSh0LCBpLCBlLl9rZXksIHMsIG5ldyB4dShuLmhhc1BlbmRpbmdXcml0ZXMsIG4uZnJvbUNhY2hlKSwgZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi8gY2xhc3MgUGggZXh0ZW5kcyBjbGFzcyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3RyYW5zYWN0aW9uID0gZSwgdGhpcy5fZGF0YVJlYWRlciA9IGx1KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGhoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgY2godGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmxvb2t1cChbIGUuX2tleSBdKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCB8fCAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuIEIoKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0WzBdO1xuICAgICAgICAgICAgaWYgKHMuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgQ3UodGhpcy5fZmlyZXN0b3JlLCBuLCBzLmtleSwgcywgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgaWYgKHMuaXNOb0RvY3VtZW50KCkpIHJldHVybiBuZXcgQ3UodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIG51bGwsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIHRocm93IEIoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gaGgodCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IGFoKHMuY29udmVydGVyLCBlLCBuKSwgciA9IGZ1KHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24uc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uc2V0KHMuX2tleSwgciksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIGNvbnN0IGkgPSBoaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiB0dSA/IFR1KHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSwgbiwgcykgOiBwdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24udXBkYXRlKGkuX2tleSwgciksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgVHJhbnNhY3Rpb25gIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBoaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uZGVsZXRlKGUuX2tleSksIHRoaXM7XG4gICAgfVxufSB7XG4gICAgLy8gVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSBzYW1lIGxvZ2ljIGFzIHRoZSBUcmFuc2FjdGlvbiBBUEkgaW4gdGhlIExpdGUgU0RLXG4gICAgLy8gYnV0IGlzIHN1YmNsYXNzZWQgaW4gb3JkZXIgdG8gcmV0dXJuIGl0cyBvd24gRG9jdW1lbnRTbmFwc2hvdCB0eXBlcy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSksIHRoaXMuX2ZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gaGgodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBmaCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0KHQpLnRoZW4oKHQgPT4gbmV3ICR1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCB0Ll9kb2N1bWVudCwgbmV3IHh1KFxuICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyAhMSwgXG4gICAgICAgIC8qIGZyb21DYWNoZT0gKi8gITEpLCBlLmNvbnZlcnRlcikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIGdpdmVuIGB1cGRhdGVGdW5jdGlvbmAgYW5kIHRoZW4gYXR0ZW1wdHMgdG8gY29tbWl0IHRoZSBjaGFuZ2VzXG4gKiBhcHBsaWVkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24uIElmIGFueSBkb2N1bWVudCByZWFkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGhhcyBjaGFuZ2VkLCBDbG91ZCBGaXJlc3RvcmUgcmV0cmllcyB0aGUgYHVwZGF0ZUZ1bmN0aW9uYC4gSWYgaXQgZmFpbHMgdG9cbiAqIGNvbW1pdCBhZnRlciA1IGF0dGVtcHRzLCB0aGUgdHJhbnNhY3Rpb24gZmFpbHMuXG4gKlxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHRyYW5zYWN0aW9uIGlzIDUwMC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIEZpcmVzdG9yZSBkYXRhYmFzZSB0byBydW4gdGhpc1xuICogdHJhbnNhY3Rpb24gYWdhaW5zdC5cbiAqIEBwYXJhbSB1cGRhdGVGdW5jdGlvbiAtIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGNvbnRleHQuXG4gKiBAcmV0dXJucyBJZiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBvciB3YXMgZXhwbGljaXRseSBhYm9ydGVkXG4gKiAodGhlIGB1cGRhdGVGdW5jdGlvbmAgcmV0dXJuZWQgYSBmYWlsZWQgcHJvbWlzZSksIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZVxuICogYHVwZGF0ZUZ1bmN0aW9uIGBpcyByZXR1cm5lZCBoZXJlLiBPdGhlcndpc2UsIGlmIHRoZSB0cmFuc2FjdGlvbiBmYWlsZWQsIGFcbiAqIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgY29ycmVzcG9uZGluZyBmYWlsdXJlIGVycm9yIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHZoKHQsIGUpIHtcbiAgICByZXR1cm4gaGMoVWModCA9IEVjKHQsIE1jKSksIChuID0+IGUobmV3IFBoKHQsIG4pKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgZm9yIHVzZSB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gb3JcbiAqIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gd2l0aCBge21lcmdlOiB0cnVlfWAgdG8gbWFyayBhIGZpZWxkIGZvciBkZWxldGlvbi5cbiAqLyBmdW5jdGlvbiBWaCgpIHtcbiAgICByZXR1cm4gbmV3IGR1KFwiZGVsZXRlRmllbGRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdG9cbiAqIGluY2x1ZGUgYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcCBpbiB0aGUgd3JpdHRlbiBkYXRhLlxuICovIGZ1bmN0aW9uIFNoKCkge1xuICAgIHJldHVybiBuZXcgX3UoXCJzZXJ2ZXJUaW1lc3RhbXBcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHVuaW9uIHRoZSBnaXZlbiBlbGVtZW50cyB3aXRoIGFueSBhcnJheVxuICogdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBFYWNoIHNwZWNpZmllZCBlbGVtZW50IHRoYXQgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdCBpbiB0aGUgYXJyYXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLiBJZiB0aGUgZmllbGQgYmVpbmdcbiAqIG1vZGlmaWVkIGlzIG5vdCBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBhcnJheVxuICogY29udGFpbmluZyBleGFjdGx5IHRoZSBzcGVjaWZpZWQgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHVuaW9uIGludG8gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgLlxuICovIGZ1bmN0aW9uIERoKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgbXUoXCJhcnJheVVuaW9uXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiB1cGRhdGVEb2M6MX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHJlbW92ZSB0aGUgZ2l2ZW4gZWxlbWVudHMgZnJvbSBhbnlcbiAqIGFycmF5IHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gQWxsIGluc3RhbmNlcyBvZiBlYWNoIGVsZW1lbnRcbiAqIHNwZWNpZmllZCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYXJyYXkuIElmIHRoZSBmaWVsZCBiZWluZyBtb2RpZmllZCBpcyBub3RcbiAqIGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGVtcHR5IGFycmF5LlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byByZW1vdmUgZnJvbSB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiBDaCguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IGd1KFwiYXJyYXlSZW1vdmVcIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIGluY3JlbWVudCB0aGUgZmllbGQncyBjdXJyZW50IHZhbHVlIGJ5XG4gKiB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogSWYgZWl0aGVyIHRoZSBvcGVyYW5kIG9yIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIHVzZXMgZmxvYXRpbmcgcG9pbnRcbiAqIHByZWNpc2lvbiwgYWxsIGFyaXRobWV0aWMgZm9sbG93cyBJRUVFIDc1NCBzZW1hbnRpY3MuIElmIGJvdGggdmFsdWVzIGFyZVxuICogaW50ZWdlcnMsIHZhbHVlcyBvdXRzaWRlIG9mIEphdmFTY3JpcHQncyBzYWZlIG51bWJlciByYW5nZVxuICogKGBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUmAgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYCkgYXJlIGFsc28gc3ViamVjdCB0b1xuICogcHJlY2lzaW9uIGxvc3MuIEZ1cnRoZXJtb3JlLCBvbmNlIHByb2Nlc3NlZCBieSB0aGUgRmlyZXN0b3JlIGJhY2tlbmQsIGFsbFxuICogaW50ZWdlciBvcGVyYXRpb25zIGFyZSBjYXBwZWQgYmV0d2VlbiAtMl42MyBhbmQgMl42My0xLlxuICpcbiAqIElmIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIGlzIG5vdCBvZiB0eXBlIGBudW1iZXJgLCBvciBpZiB0aGUgZmllbGQgZG9lcyBub3RcbiAqIHlldCBleGlzdCwgdGhlIHRyYW5zZm9ybWF0aW9uIHNldHMgdGhlIGZpZWxkIHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbiAtIFRoZSB2YWx1ZSB0byBpbmNyZW1lbnQgYnkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiBOaCh0KSB7XG4gICAgcmV0dXJuIG5ldyB5dShcImluY3JlbWVudFwiLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIHdyaXRlIGJhdGNoLCB1c2VkIGZvciBwZXJmb3JtaW5nIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZVxuICogYXRvbWljIG9wZXJhdGlvbi4gVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHtAbGluayBXcml0ZUJhdGNofVxuICogaXMgNTAwLlxuICpcbiAqIFVubGlrZSB0cmFuc2FjdGlvbnMsIHdyaXRlIGJhdGNoZXMgYXJlIHBlcnNpc3RlZCBvZmZsaW5lIGFuZCB0aGVyZWZvcmUgYXJlXG4gKiBwcmVmZXJhYmxlIHdoZW4geW91IGRvbid0IG5lZWQgdG8gY29uZGl0aW9uIHlvdXIgd3JpdGVzIG9uIHJlYWQgZGF0YS5cbiAqXG4gKiBAcmV0dXJucyBBIHtAbGluayBXcml0ZUJhdGNofSB0aGF0IGNhbiBiZSB1c2VkIHRvIGF0b21pY2FsbHkgZXhlY3V0ZSBtdWx0aXBsZVxuICogd3JpdGVzLlxuICovIGZ1bmN0aW9uIGtoKHQpIHtcbiAgICByZXR1cm4gVWModCA9IEVjKHQsIE1jKSksIG5ldyB1aCh0LCAoZSA9PiBSaCh0LCBlKSkpO1xufVxuXG4vKipcbiAqIENsb3VkIEZpcmVzdG9yZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovICFmdW5jdGlvbih0LCBlID0gITApIHtcbiAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICBOID0gdDtcbiAgICB9KFNES19WRVJTSU9OKSwgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJmaXJlc3RvcmVcIiwgKCh0LCB7b3B0aW9uczogbn0pID0+IHtcbiAgICAgICAgY29uc3QgcyA9IHQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksIGkgPSBuZXcgTWMocywgbmV3IEoodC5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIikpLCBuZXcgdHQodC5nZXRQcm92aWRlcihcImFwcC1jaGVjay1pbnRlcm5hbFwiKSkpO1xuICAgICAgICByZXR1cm4gbiA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdXNlRmV0Y2hTdHJlYW1zOiBlXG4gICAgICAgIH0sIG4pLCBpLl9zZXRTZXR0aW5ncyhuKSwgaTtcbiAgICB9KSwgXCJQVUJMSUNcIikpLCByZWdpc3RlclZlcnNpb24oRCwgXCIzLjQuMlwiLCB0KSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oRCwgXCIzLjQuMlwiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IG9oIGFzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIG51IGFzIEJ5dGVzLCBGYyBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgVmMgYXMgQ29sbGVjdGlvblJlZmVyZW5jZSwgUGMgYXMgRG9jdW1lbnRSZWZlcmVuY2UsICR1IGFzIERvY3VtZW50U25hcHNob3QsIHR1IGFzIEZpZWxkUGF0aCwgc3UgYXMgRmllbGRWYWx1ZSwgTWMgYXMgRmlyZXN0b3JlLCBRIGFzIEZpcmVzdG9yZUVycm9yLCBpdSBhcyBHZW9Qb2ludCwgT2MgYXMgTG9hZEJ1bmRsZVRhc2ssIHZjIGFzIFF1ZXJ5LCBVdSBhcyBRdWVyeUNvbnN0cmFpbnQsIE91IGFzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgRnUgYXMgUXVlcnlTbmFwc2hvdCwgeHUgYXMgU25hcHNob3RNZXRhZGF0YSwgY3QgYXMgVGltZXN0YW1wLCBQaCBhcyBUcmFuc2FjdGlvbiwgdWggYXMgV3JpdGVCYXRjaCwgd2MgYXMgX0RhdGFiYXNlSWQsIER0IGFzIF9Eb2N1bWVudEtleSwgZXQgYXMgX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyLCB6IGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBtdCBhcyBfRmllbGRQYXRoLCBFYyBhcyBfY2FzdCwgcSBhcyBfZGVidWdBc3NlcnQsIHl0IGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgTSBhcyBfbG9nV2FybiwgZ2MgYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIEVoIGFzIGFkZERvYywgQ2ggYXMgYXJyYXlSZW1vdmUsIERoIGFzIGFycmF5VW5pb24sIFdjIGFzIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIFNjIGFzIGNvbGxlY3Rpb24sIERjIGFzIGNvbGxlY3Rpb25Hcm91cCwgYmMgYXMgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBUaCBhcyBkZWxldGVEb2MsIFZoIGFzIGRlbGV0ZUZpZWxkLCBIYyBhcyBkaXNhYmxlTmV0d29yaywgQ2MgYXMgZG9jLCBldSBhcyBkb2N1bWVudElkLCBLYyBhcyBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgamMgYXMgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgemMgYXMgZW5hYmxlTmV0d29yaywgZWggYXMgZW5kQXQsIHRoIGFzIGVuZEJlZm9yZSwgVWMgYXMgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgUmggYXMgZXhlY3V0ZVdyaXRlLCBsaCBhcyBnZXREb2MsIGRoIGFzIGdldERvY0Zyb21DYWNoZSwgd2ggYXMgZ2V0RG9jRnJvbVNlcnZlciwgX2ggYXMgZ2V0RG9jcywgbWggYXMgZ2V0RG9jc0Zyb21DYWNoZSwgZ2ggYXMgZ2V0RG9jc0Zyb21TZXJ2ZXIsIEJjIGFzIGdldEZpcmVzdG9yZSwgTmggYXMgaW5jcmVtZW50LCBMYyBhcyBpbml0aWFsaXplRmlyZXN0b3JlLCB6dSBhcyBsaW1pdCwgSHUgYXMgbGltaXRUb0xhc3QsIFljIGFzIGxvYWRCdW5kbGUsIFhjIGFzIG5hbWVkUXVlcnksIEloIGFzIG9uU25hcHNob3QsIEFoIGFzIG9uU25hcHNob3RzSW5TeW5jLCBXdSBhcyBvcmRlckJ5LCBxdSBhcyBxdWVyeSwga2MgYXMgcXVlcnlFcXVhbCwgTmMgYXMgcmVmRXF1YWwsIHZoIGFzIHJ1blRyYW5zYWN0aW9uLCBTaCBhcyBzZXJ2ZXJUaW1lc3RhbXAsIHloIGFzIHNldERvYywgJCBhcyBzZXRMb2dMZXZlbCwgTHUgYXMgc25hcHNob3RFcXVhbCwgWHUgYXMgc3RhcnRBZnRlciwgWXUgYXMgc3RhcnRBdCwgSmMgYXMgdGVybWluYXRlLCBwaCBhcyB1cGRhdGVEb2MsIEdjIGFzIHdhaXRGb3JQZW5kaW5nV3JpdGVzLCBqdSBhcyB3aGVyZSwga2ggYXMgd3JpdGVCYXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IHJlbmRlclRvZG8gfSBmcm9tIFwiLi9yZW5kZXJUb2RvLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MgfSBmcm9tIFwiLi9jcmVhdGVFbGVtZW50LmpzXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcblxyXG5mdW5jdGlvbiByZW5kZXJQcm9qZWN0SGVhZGVyKHByb2plY3RJZCkge1xyXG4gICAgY2xlYXJQcm9qZWN0c1VJKCk7XHJcbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiaDJcIiwgXCJwcm9qZWN0X190aXRsZVwiKTtcclxuICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RJZDtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG4gICAgY29uc3QgdG9kb3MgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwic2VjdGlvblwiLCBcInRvZG9zXCIpO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RUaXRsZSk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodG9kb3MpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyUHJvamVjdFVJKHByb2plY3RzKSB7XHJcbiAgICBwcm9qZWN0cy5tYXAocHJvamVjdCA9PiB7XHJcbiAgICAgICAgY29uc3QgdG9kb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zXCIpO1xyXG4gICAgICAgIHRvZG9zLmFwcGVuZENoaWxkKFxyXG5cdFx0XHRcdFx0cmVuZGVyVG9kbyhcclxuXHRcdFx0XHRcdFx0cHJvamVjdC50aXRsZSxcclxuXHRcdFx0XHRcdFx0cHJvamVjdC5kZXNjcmlwdGlvbixcclxuXHRcdFx0XHRcdFx0cHJvamVjdC5kdWVEYXRlLFxyXG5cdFx0XHRcdFx0XHRwcm9qZWN0LnByaW9yaXR5LFxyXG5cdFx0XHRcdFx0XHRwcm9qZWN0LnByb2plY3QsXHJcblx0XHRcdFx0XHRcdHByb2plY3QuaWRcclxuXHRcdFx0XHRcdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2Rvcyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJQcm9qZWN0c1VJKCkge1xyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBbLi4uY29udGFpbmVyLmNoaWxkcmVuXTtcclxuICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgIGNoaWxkLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHJlbmRlclByb2plY3RVSSwgcmVuZGVyUHJvamVjdEhlYWRlciB9OyIsImltcG9ydCB7IHJlbmRlclRvZG8gfSBmcm9tIFwiLi9yZW5kZXJUb2RvLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MgfSBmcm9tIFwiLi9jcmVhdGVFbGVtZW50LmpzXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlclRhc2tzSGVhZGVyKHRhc2tJZCkge1xyXG4gIGNsZWFyVGFza3NVSSgpO1xyXG4gIGNvbnN0IHRhc2tUaXRsZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJoMlwiLCBcInRhc2tfX3RpdGxlXCIpO1xyXG4gIHRhc2tJZCA9PT0gXCJ0b2RheVwiID8gdGFza1RpdGxlLnRleHRDb250ZW50ID0gXCJEdWUgVG9kYXlcIiA6IHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRhc2tJZDtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuICBjb25zdCB0b2RvcyA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJzZWN0aW9uXCIsIFwidG9kb3NcIik7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyVGFza3NVSSh0YXNrcykge1xyXG4gIHRhc2tzLm1hcCgodGFzaykgPT4ge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCBpZCB9ID0gdGFzaztcclxuICAgIGNvbnN0IHRvZG9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2Rvc1wiKTtcclxuICAgIHRvZG9zLmFwcGVuZENoaWxkKFxyXG4gICAgICByZW5kZXJUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIGlkKVxyXG4gICAgKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2Rvcyk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVGFza3NVSSgpIHtcclxuICBjb25zdCBjaGlsZHJlbiA9IFsuLi5jb250YWluZXIuY2hpbGRyZW5dO1xyXG4gIGNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICBjaGlsZC5yZW1vdmUoKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IHsgcmVuZGVyVGFza3NVSSwgcmVuZGVyVGFza3NIZWFkZXIgfTtcclxuIiwiaW1wb3J0IHtcclxuICBjcmVhdGVFbGVtZW50V2l0aENsYXNzLFxyXG4gIGNyZWF0ZUlucHV0RWxlbWVudCxcclxuICAgIGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzLFxyXG4gIGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlXHJcbn0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBnZXRUb2RheXNEYXRlIH0gZnJvbSBcIi4vbW9kYWxcIjtcclxuaW1wb3J0IHsgZGVsZXRlSW5ib3hNZXNzYWdlLCBnZXRJbmJveCwgdXBkYXRlRG9jdW1lbnQgfSBmcm9tIFwiLi90b2RvXCI7XHJcblxyXG5sZXQgY291bnQgPSAwO1xyXG5cclxuZnVuY3Rpb24gc2hvd0luYm94KHRvZG9zKSB7XHJcbiAgY2xlYXJJbmJveFVJKCk7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgICBjb25zdCB0aXRsZSA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFwiaDJcIiwgXCJpbmJveF9fdGl0bGVcIiwgXCJJbmJveFwiKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgaWYgKHRvZG9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgY29uc3Qgc3RhdHVzID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICAgIFwicFwiLFxyXG4gICAgICBcImluYm94X19zdGF0dXNcIixcclxuICAgICAgXCJZb3VyIGluYm94IGlzIGVtcHR5XCJcclxuICAgICk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzKTtcclxuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdG9kb3MubWFwKCh0b2RvKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5ib3ggPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwiaW5ib3hcIik7XHJcbiAgICAgIGluYm94LnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIiwgdG9kby5pZCk7XHJcbiAgICAgIGNvbnN0IHN1YmplY3QgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwicFwiLCBcImluYm94X19zdWJqZWN0XCIpO1xyXG4gICAgICBpZiAodG9kby5kdWVEYXRlID09PSBnZXRUb2RheXNEYXRlKCkpIHtcclxuICAgICAgICBzdWJqZWN0LnRleHRDb250ZW50ID0gXCJZb3UgaGF2ZSBhIHRhc2sgdGhhdCdzIGR1ZSB0b2RheVwiO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHRvZG8uZHVlRGF0ZSA8IGdldFRvZGF5c0RhdGUoKSkge1xyXG4gICAgICAgIHN1YmplY3QudGV4dENvbnRlbnQgPSBcIllvdSBoYXZlIGEgdGFzayB0aGF0J3Mgb3ZlcmR1ZSFcIjtcclxuICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRyYXNoQnRuID0gY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcImJ1dHRvblwiLFxyXG4gICAgICAgICAgXCJ0b2RvX19kZWxldGVcIixcclxuICAgICAgICAgIFwiaWRcIixcclxuICAgICAgICAgIFwiZGVsZXRlXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IHRyYXNoSWNvbiA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJpXCIsIFwiZmFzXCIpO1xyXG4gICAgICAgIHRyYXNoSWNvbi5jbGFzc0xpc3QuYWRkKFwiZmEtdHJhc2gtYWx0XCIpO1xyXG4gICAgICB0cmFzaEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZGVsZXRlTWVzc2FnZSh0b2RvLmlkLCBlLmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHJhc2hCdG4uYXBwZW5kQ2hpbGQodHJhc2hJY29uKTtcclxuICAgICAgICBpZiAodG9kby5zdGF0dXMgPT09IFwidW5yZWFkXCIpIHtcclxuICAgICAgICAgICAgc3ViamVjdC5jbGFzc0xpc3QuYWRkKFwiYm9sZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRvZG8uc3RhdHVzID09PSBcInJlYWRcIikge1xyXG4gICAgICAgICAgICBzdWJqZWN0LmNsYXNzTGlzdC5yZW1vdmUoXCJib2xkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgY29uc3QgY2hlY2tib3ggPSBjcmVhdGVJbnB1dEVsZW1lbnQoXHJcbiAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgIFwiY2hlY2tib3hcIixcclxuICAgICAgICBcImNoZWNrYm94XCIsXHJcbiAgICAgICAgXCJjaGVja2JveFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tib3hcIik7XHJcbiAgICAgICAgXHJcbiAgICAgIHN1YmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzaG93TWVzc2FnZSh0b2RvLCBzdWJqZWN0LnRleHRDb250ZW50LCB0b2Rvcyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpbmJveC5hcHBlbmRDaGlsZChjaGVja2JveCk7XHJcbiAgICAgICAgaW5ib3guYXBwZW5kQ2hpbGQoc3ViamVjdCk7XHJcbiAgICAgICAgaW5ib3guYXBwZW5kQ2hpbGQodHJhc2hCdG4pO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5ib3gpO1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWxldGVBbGwgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgICAgXCJidXR0b25cIixcclxuICAgICAgXCJpbmJveF9fYnV0dG9uXCIsXHJcbiAgICAgIFwiRGVsZXRlIFNlbGVjdGVkXCJcclxuICAgICk7XHJcbiAgICBkZWxldGVBbGwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgZGVsZXRlU2VsZWN0ZWQodG9kb3MpO1xyXG4gICAgfSk7XHJcbmNvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVBbGwpO1xyXG5cclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVTZWxlY3RlZCh0b2Rvcykge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgICBjb25zdCBraWRzID0gY29udGFpbmVyLmNoaWxkcmVuO1xyXG4gICAgY29uc3QgY29udGFpbmVyQ2hpbGRyZW4gPSBBcnJheS5mcm9tKGtpZHMpO1xyXG4gICAgY29udGFpbmVyQ2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuWzBdKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlblswXS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGVNZXNzYWdlKGNoaWxkLmRhdGFzZXQuaWQsIGNoaWxkKTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlblsxXS5jbGFzc0xpc3QuY29udGFpbnMoXCJib2xkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSW5ib3hDb3VudChcInN1YnRyYWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEluYm94KCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlTWVzc2FnZShpZCwgdG9kbykge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmJveFwiKTtcclxuICB0b2RvLnJlbW92ZSgpO1xyXG4gIGRlbGV0ZUluYm94TWVzc2FnZShpZCk7XHJcbiAgZ2V0SW5ib3goKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd01lc3NhZ2UodG9kbywgc3ViamVjdCwgdG9kb3MpIHtcclxuICBjbGVhckluYm94VUkoKTtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuICBjb25zdCBtZXNzYWdlID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcIm1lc3NhZ2VfX2NvbnRhaW5lclwiKTtcclxuICBjb25zdCBtZXNzYWdlU3ViamVjdCA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFxyXG4gICAgXCJoM1wiLFxyXG4gICAgXCJtZXNzYWdlX19zdWJqZWN0XCIsXHJcbiAgICBzdWJqZWN0XHJcbiAgKTtcclxuICBjb25zdCBtZXNzYWdlVGl0bGUgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgIFwicFwiLFxyXG4gICAgXCJtZXNzYWdlX190aXRsZVwiLFxyXG4gICAgdG9kby50aXRsZVxyXG4gICk7XHJcbiAgY29uc3QgbWVzc2FnZVByaW9yaXR5ID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICBcInBcIixcclxuICAgIFwibWVzc2FnZV9fcHJpb3JpdHlcIixcclxuICAgIHRvZG8ucHJpb3JpdHlcclxuICApO1xyXG4gIGNvbnN0IG1lc3NhZ2VEdWVEYXRlID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICBcInBcIixcclxuICAgIFwibWVzc2FnZV9fZGF0ZVwiLFxyXG4gICAgdG9kby5kdWVEYXRlXHJcbiAgKTtcclxuICBjb25zdCBtZXNzYWdlRGVzY3JpcHRpb24gPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgIFwicFwiLFxyXG4gICAgXCJtZXNzYWdlX19kZXNjcmlwdGlvblwiLFxyXG4gICAgdG9kby5kZXNjcmlwdGlvblxyXG4gICk7XHJcbiAgY29uc3QgYmFja1RvSW5ib3ggPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgIFwiYnV0dG9uXCIsXHJcbiAgICBcImluYm94X19idXR0b25cIixcclxuICAgIFwiQmFjayBUbyBJbmJveFwiXHJcbiAgICApO1xyXG4gICAgYmFja1RvSW5ib3guY2xhc3NMaXN0LmFkZChcImJ1dHRvblwiKTtcclxuICAgIGJhY2tUb0luYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZ2V0SW5ib3goKTtcclxuICAgIH0pO1xyXG4gIG1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZVN1YmplY3QpO1xyXG4gIG1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZVRpdGxlKTtcclxuICBtZXNzYWdlLmFwcGVuZENoaWxkKG1lc3NhZ2VQcmlvcml0eSk7XHJcbiAgbWVzc2FnZS5hcHBlbmRDaGlsZChtZXNzYWdlRHVlRGF0ZSk7XHJcbiAgbWVzc2FnZS5hcHBlbmRDaGlsZChtZXNzYWdlRGVzY3JpcHRpb24pO1xyXG4gIG1lc3NhZ2UuYXBwZW5kQ2hpbGQoYmFja1RvSW5ib3gpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlKTtcclxuICAgIHVwZGF0ZUluYm94Q291bnQoXCJzdWJ0cmFjdFwiKTtcclxuICB0b2RvLnN0YXR1cyA9IFwicmVhZFwiO1xyXG4gIHVwZGF0ZURvY3VtZW50KHRvZG8udGl0bGUsIHRvZG8uZGVzY3JpcHRpb24sIHRvZG8uZHVlRGF0ZSwgdG9kby5wcmlvcml0eSwgdG9kby5wcm9qZWN0LCBTdHJpbmcodG9kby5pZCksIHRvZG8uc3RhdHVzKTtcclxuICBjb25zb2xlLmxvZyh0b2RvKTtcclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhckluYm94VUkoKSB7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgY29uc3QgY2hpbGRyZW4gPSBbLi4uY29udGFpbmVyLmNoaWxkcmVuXTtcclxuICBjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgY2hpbGQucmVtb3ZlKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUluYm94Q291bnQoc3RhdHVzKSB7XHJcbiAgY29uc3QgYmFja2dyb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibnVtYmVyXCIpO1xyXG4gIGNvbnN0IGNvdW50VUkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdW50XCIpO1xyXG4gIGlmIChzdGF0dXMgPT09IFwiYWRkXCIpIHtcclxuICAgIGNvdW50Kys7XHJcbiAgICBjb3VudFVJLnRleHRDb250ZW50ID0gY291bnQ7XHJcbiAgICBiYWNrZ3JvdW5kLmNsYXNzTGlzdC5hZGQoXCJudW1iZXJcIik7XHJcbiAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFwic3VidHJhY3RcIikge1xyXG4gICAgY291bnQtLTtcclxuICAgIGlmIChjb3VudCA8IDEpIHtcclxuICAgICAgY291bnQgPT09IDA7XHJcbiAgICAgIGNvdW50VUkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICBiYWNrZ3JvdW5kLmNsYXNzTGlzdC5yZW1vdmUoXCJudW1iZXJcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudFVJLnRleHRDb250ZW50ID0gY291bnQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldEluYm94Q291bnQoKSB7XHJcbiAgY29uc3QgYmFja2dyb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibnVtYmVyXCIpO1xyXG4gIGNvbnN0IGNvdW50VUkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdW50XCIpO1xyXG4gIGNvdW50ID0gMDtcclxuICBjb3VudFVJLnRleHRDb250ZW50ID0gY291bnQ7XHJcbiAgYmFja2dyb3VuZC5jbGFzc0xpc3QucmVtb3ZlKFwibnVtYmVyXCIpO1xyXG59XHJcblxyXG5leHBvcnQgeyBzaG93SW5ib3gsIHVwZGF0ZUluYm94Q291bnQsIHJlc2V0SW5ib3hDb3VudCB9O1xyXG4iLCJpbXBvcnQgcHJvZmlsZSBmcm9tIFwiLi4vYXNzZXRzL3VzZXIucG5nXCI7XHJcblxyXG5mdW5jdGlvbiBhZGRIZWFkZXJFdmVudHMoKSB7XHJcblx0Y29uc3QgaGFtYnVyZ2VyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoYW1idXJnZXJcIik7XHJcblx0Y29uc3QgcHJvZmlsZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IHVwbG9hZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1nVXBsb2FkXCIpO1xyXG4gICAgYWRkUHJvZmlsZVBsYWNlaG9sZGVyKHByb2ZpbGVDb250YWluZXIpO1xyXG5cclxuXHRoYW1idXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcblx0dXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgcmVhZFVybCk7XHJcblx0cHJvZmlsZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdXBsb2FkUGljKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVXNlck5hbWUobmFtZSkge1xyXG5cdGNvbnNvbGUubG9nKG5hbWUpO1xyXG5cdGNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX3VzZXJuYW1lXCIpO1xyXG5cdHVzZXJuYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUHJvZmlsZVBsYWNlaG9sZGVyKHByb2ZpbGVDb250YWluZXIpIHtcclxuICAgIHByb2ZpbGVDb250YWluZXIuY2hpbGRyZW5bMF0uc3JjID0gcHJvZmlsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VTaWRlYmFyKCkge1xyXG5cdGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XHJcblx0aWYgKCFzaWRlYmFyLmNsYXNzTGlzdC5jb250YWlucyhcImhpZGVcIikpIHtcclxuXHRcdHNpZGViYXIuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcblx0fVxyXG5cdGVsc2Uge1xyXG5cdFx0c2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwbG9hZFBpYygpIHtcclxuXHRjb25zdCBoZWFkZXJVcGxvYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXBsb2FkXCIpO1xyXG5cdGhlYWRlclVwbG9hZC5jbGFzc0xpc3QudG9nZ2xlKFwidmlzaWJsZVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFVybCgpIHtcclxuXHRjb25zdCBwcm9maWxlUGljID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlXCIpO1xyXG5cdGNvbnN0IHByb2ZpbGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9faW1hZ2VcIik7XHJcblx0aWYgKHRoaXMuZmlsZXMpIHtcclxuXHRcdGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTCh0aGlzLmZpbGVzWzBdKTtcclxuXHRcdHJlYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcblx0XHRcdHByb2ZpbGVQaWMuc3JjID0gcmVhZGVyLnJlc3VsdDtcclxuXHRcdFx0Y29uc29sZS5sb2cocHJvZmlsZVBpYy5zcmMpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHByb2ZpbGVDb250YWluZXIuY2xpY2soKTtcclxufVxyXG5cclxuZXhwb3J0IHsgYWRkSGVhZGVyRXZlbnRzLCBhZGRVc2VyTmFtZSwgY2xvc2VTaWRlYmFyIH07XHJcbiIsImltcG9ydCB7IGdldE51bVRhc2tzLCBnZXRUb2RheXNOdW1UYXNrcywgZ2V0VXBjb21pbmdUYXNrcywgZ2V0T3ZlcmR1ZVRhc2tzLCBnZXRBbGxEYXRhLCBnZXREYXNoYm9hcmRDb3VudHMgfSBmcm9tIFwiLi90b2RvXCI7XHJcbmltcG9ydCB7IGF1dGggfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgZ2V0VXNlcm5hbWUgfSBmcm9tIFwiLi9hdXRoXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuLy9jb25zdCBkYXNoQ291bnQgPSBnZXREYXNoYm9hcmRDb3VudHMoKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckRhc2hib2FyZCgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiZGFzaGJvYXJkIGNsaWNrZWRcIik7XHJcbiAgICAvL2dldEFsbERhdGEoZ2V0VXNlcm5hbWUoKSk7XHJcbiAgICBjbGVhclRhc2tzVUkoKTtcclxuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLXdyYXBwZXJcIj5cclxuICA8cCBjbGFzcz1cImdyZWV0aW5nXCI+SGVsbG8gPHNwYW4gY2xhc3M9XCJ1c2VybmFtZS1ncmVldGluZ1wiPiR7Z2V0VXNlcm5hbWUoKX08L3NwYW4+LDwvcD5cclxuICA8c2VjdGlvbiBjbGFzcz1cInF1b3RlLWNvbnRhaW5lclwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInF1b3RlXCI+XHJcbiAgICAgIDxwIGNsYXNzPVwibW90aXZhdGlvblwiPlF1b3RlIG9mIHRoZSBEYXk6IDwvcD5cclxuICAgICAgPGJsb2NrcXVvdGU+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdC4gTW9sbGl0aWEgaW5jaWR1bnQgdWxsYW0gc2FlcGUgb2ZmaWNpYSBpbGxvIGRvbG9yZW1xdWUgdmVsIHZlcm8gbWludXMgZGVzZXJ1bnQgZG9sb3JlPzwvYmxvY2txdW90ZT5cclxuICAgICAgPHNwYW4gY2xhc3M9XCJhdXRob3JcIj4tYXV0aG9yIG5hbWU8L3NwYW4+XHJcbiAgICA8L2Rpdj5cclxuICA8L3NlY3Rpb24+XHJcbiAgPHNlY3Rpb24gY2xhc3M9XCJkYXNoYm9hcmRcIj5cclxuICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLXRhc2tzXCI+XHJcbiAgICA8aSBjbGFzcz1cImZhcyBmYS10YXNrc1wiPjwvaT5cclxuICAgIDxzcGFuIGNsYXNzPVwidGFza3MtY291bnRcIj5cclxuICAgICAgICAke2dldE51bVRhc2tzKCl9XHJcbiAgICA8L3NwYW4+XHJcbiAgICA8c3Bhbj50b3RhbCB0YXNrczwvc3Bhbj5cclxuICA8L2Rpdj5cclxuICA8ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLXVucmVhZFwiPlxyXG4gICAgPGkgY2xhc3M9XCJmYXIgZmEtZW52ZWxvcGVcIj48L2k+XHJcbiAgICA8c3BhbiBjbGFzcz1cInVucmVhZC1jb3VudFwiPlxyXG4gICAgICAke2dldFVwY29taW5nVGFza3MoKX1cclxuICAgIDwvc3Bhbj5cclxuICAgIDxzcGFuPnVwY29taW5nIHRhc2tzPC9zcGFuPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJkYXNoYm9hcmQtb3ZlcmR1ZVwiPlxyXG4gICAgPGkgY2xhc3M9XCJmYXMgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIj48L2k+XHJcbiAgICA8c3BhbiBjbGFzcz1cIm92ZXJkdWUtY291bnRcIj5cclxuICAgICAgJHtnZXRPdmVyZHVlVGFza3MoKX1cclxuICAgIDwvc3Bhbj5cclxuICAgIDxzcGFuPm92ZXJkdWUgdGFza3M8L3NwYW4+XHJcbiAgPC9kaXY+XHJcbiAgPGRpdiBjbGFzcz1cImRhc2hib2FyZC10b2RheVwiPlxyXG4gICAgPGkgY2xhc3M9XCJmYXMgZmEtY2FsZW5kYXItZGF5XCI+PC9pPlxyXG4gICAgPHNwYW4gY2xhc3M9XCJ0b2RheS1jb3VudFwiPlxyXG4gICAgICAke2dldFRvZGF5c051bVRhc2tzKCl9XHJcbiAgICA8L3NwYW4+XHJcbiAgICA8c3Bhbj50YXNrcyBkdWUgdG9kYXk8L3NwYW4+XHJcbiAgPC9kaXY+XHJcbjwvc2VjdGlvbj5cclxuPC9kaXY+XHJcbiAgICBgO1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufVxyXG5cclxuLy8gZnVuY3Rpb24gZ2V0VXNlcm5hbWUoKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZyhhdXRoKTtcclxuLy8gICAgIHJldHVybjtcclxuLy8gfVxyXG5cclxuZnVuY3Rpb24gY2xlYXJUYXNrc1VJKCkge1xyXG4gIGNvbnN0IGNoaWxkcmVuID0gWy4uLmNvbnRhaW5lci5jaGlsZHJlbl07XHJcbiAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgIGNoaWxkLnJlbW92ZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgeyByZW5kZXJEYXNoYm9hcmQgfTsiLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50V2l0aENsYXNzIH0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNpZ25PdXQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBvbkF1dGhTdGF0ZUNoYW5nZWQsIHVwZGF0ZVByb2ZpbGUgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uXCI7XHJcbmltcG9ydCB7IGFkZFVzZXJOYW1lIH0gZnJvbSBcIi4vaGVhZGVyXCI7XHJcbmltcG9ydCB7IGdldEFsbERhdGEgfSBmcm9tIFwiLi90b2RvXCI7XHJcbmltcG9ydCB7IHJlbmRlckRhc2hib2FyZCB9IGZyb20gXCIuL2Rhc2hib2FyZFwiO1xyXG4vLyBpbXBvcnQgeyByZW5kZXIgfSBmcm9tIFwic2Fzc1wiO1xyXG5cclxuY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbmNvbnN0IGRhc2hib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGFzaGJvYXJkXCIpO1xyXG5sZXQgZmlyc3RMb2dpbiA9IGZhbHNlO1xyXG5cclxuZnVuY3Rpb24gc2hvd0xvZ2luKCkge1xyXG4gIC8vY2xlYXJVSSgpO1xyXG4gIGFkZExvZ2luU2NyZWVuKCk7XHJcbiAgY29uc3QgbG9naW5Db250YWluZXIgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwibG9naW5fX2NvbnRhaW5lclwiKTtcclxuICBcclxuICBsb2dpbkNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX2NvbnRhaW5lclwiPlxyXG4gICAgPGZvcm0gYWN0aW9uPVwiXCIgY2xhc3M9XCJmb3JtXCI+XHJcbiAgICA8aDIgY2xhc3M9XCJsb2dpbl9fdGl0bGVcIj48aSBjbGFzcz1cImZhcyBmYS1idXNpbmVzcy10aW1lXCI+IFByb2R1Y3RpdjwvaT48L2gyPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fd3JhcHBlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtX19zaWdudXAgXCI+U2lnbiBVcDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtX19sb2dpblwiPkxvZ2luPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX2NvdmVyXCI+PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZm9ybTJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fc2VjdGlvbiBzaWdudXBcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fZ3JvdXBcIj5cclxuICAgICAgICAgIDxpbnB1dCBpZD1cInNpZ251cF9fZW1haWxcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBwbGFjZWhvbGRlcj1cIlwiPlxyXG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fbGFiZWxcIiBmb3I9XCJlbWFpbFwiPkVtYWlsPC9sYWJlbD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fZ3JvdXBcIj5cclxuICAgICAgICAgICAgPGlucHV0IGlkPVwic2lnbnVwX19wYXNzd29yZFwiIHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBwbGFjZWhvbGRlcj1cIlwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19sYWJlbFwiIGZvcj1cInBhc3N3b3JkXCI+UGFzc3dvcmQ8L2xhYmVsPlxyXG4gICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fZ3JvdXBcIj5cclxuICAgICAgICAgICAgPGlucHV0IGlkPVwidXNlcm5hbWVcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBwbGFjZWhvbGRlcj1cIlwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19sYWJlbFwiIGZvcj1cInVzZXJuYW1lXCI+VXNlcm5hbWU8L2xhYmVsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGlkPVwic2lnbnVwXCIgY2xhc3M9XCJmb3JtX19idXR0b25cIj5TaWduLVVwPC9idXR0b24+XHJcbiAgICAgICAgXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICAgIFxyXG4gICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX3NlY3Rpb24gbG9naW4gaGlkZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtX19ncm91cFwiPlxyXG4gICAgICAgICAgPGlucHV0IGlkPVwibG9naW5fX2VtYWlsXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm1fX2xhYmVsXCIgZm9yPVwiZW1haWxcIj5FbWFpbDwvbGFiZWw+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX2dyb3VwXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cImxvZ2luX19wYXNzd29yZFwiIHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBwbGFjZWhvbGRlcj1cIlwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19sYWJlbFwiIGZvcj1cInBhc3N3b3JkXCI+UGFzc3dvcmQ8L2xhYmVsPlxyXG4gICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBpZD1cImxvZ2luXCIgY2xhc3M9XCJmb3JtX19idXR0b25cIj5Mb2dpbjwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGlkPVwiZGVtb1wiIGNsYXNzPVwiZm9ybV9fYnV0dG9uXCI+TG9naW4gQXMgRGVtbyBVc2VyPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Zvcm0+XHJcbiAgPC9kaXY+XHJcbiAgICBgO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsb2dpbkNvbnRhaW5lcik7XHJcbiAgYWRkQXV0aEV2ZW50cygpO1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZExvZ2luU2NyZWVuKCkge1xyXG4gIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJcIik7XHJcbiAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRfX2J1dHRvblwiKTtcclxuICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICBhZGRCdG4uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVMb2dpbigpIHtcclxuICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyXCIpO1xyXG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyXCIpO1xyXG4gIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkX19idXR0b25cIik7XHJcbiAgc2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgYWRkQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRBdXRoRXZlbnRzKCkge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIGNvbnN0IHNpZ251cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc2lnbnVwXCIpO1xyXG4gICAgY29uc3QgbG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2xvZ2luXCIpO1xyXG4gICAgY29uc3QgY292ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2NvdmVyXCIpO1xyXG4gICAgY29uc3Qgc2lnbnVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lnbnVwXCIpO1xyXG4gICAgY29uc3QgbG9naW5Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2dpblwiKTtcclxuICAgIGNvbnN0IGxvZ2luQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpblwiKTtcclxuICAgIGNvbnN0IHNpZ251cEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lnbnVwXCIpO1xyXG4gICAgY29uc3QgbG9nb3V0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dvdXRcIik7XHJcbiAgICBjb25zdCBsb2dpblNjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9naW5fX2NvbnRhaW5lclwiKTtcclxuICBjb25zdCBzaWRlYmFyTG9nb3V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlYmFyX19sb2dvdXRcIik7XHJcbiAgY29uc3QgZGVtbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVtb1wiKTtcclxuICAgIGxldCBsb2dnZWRJbjtcclxuXHJcbiAgICBsZXQgYWN0aXZlID0gXCJzaWdudXBcIjtcclxuXHJcbiAgICBpZiAobG9nZ2VkSW4pIHtcclxuICAgICAgICAvL2xvZ2luU2NyZWVuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEFjdGl2ZUxvZ2luKCkge1xyXG4gICAgICAvLyBsb2dpbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAvLyBzaWdudXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgY29uc29sZS5sb2coXCJsb2dpbiBjbGlja2VkXCIpO1xyXG4gICAgICBjb3Zlci5jbGFzc0xpc3QuYWRkKFwibW92ZVJpZ2h0XCIpO1xyXG4gICAgICBjb3Zlci5jbGFzc0xpc3QucmVtb3ZlKFwibW92ZUxlZnRcIik7XHJcbiAgICAgIGxvZ2luRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgc2lnbnVwRm9ybS5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgICAgYWN0aXZlID0gXCJsb2dpblwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEFjdGl2ZVNpZ251cCgpIHtcclxuICAgICAgLy8gc2lnbnVwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgIC8vIGxvZ2luLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwic2lnbnVwIGNsaWNrZWRcIik7XHJcbiAgICAgIGNvdmVyLmNsYXNzTGlzdC5hZGQoXCJtb3ZlTGVmdFwiKTtcclxuICAgICAgY292ZXIuY2xhc3NMaXN0LnJlbW92ZShcIm1vdmVSaWdodFwiKTtcclxuICAgICAgc2lnbnVwRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgbG9naW5Gb3JtLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgICBhY3RpdmUgPSBcInNpZ251cFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvZ2luVXNlcihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vZm9ybSB2YWxpZGF0aW9uXHJcbiAgICAgICAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luX19lbWFpbFwiKS52YWx1ZTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW5fX3Bhc3N3b3JkXCIpLnZhbHVlO1xyXG4gICAgICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZClcclxuICAgICAgICAgICAgLnRoZW4oKGNyZWQpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgbG9nZ2VkIGluXCIsIGNyZWQudXNlci5kaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgYWRkVXNlck5hbWUoY3JlZC51c2VyLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICBpZiAoY3JlZC51c2VyLnBob3RvVVJMKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9maWxlUGljID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgcHJvZmlsZVBpYy5zcmMgPSBjcmVkLnVzZXIucGhvdG9VUkw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGhpZGVMb2dpbigpO1xyXG4gICAgICAgICAgICAgIGNsZWFyVUkoKTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgbG9nZ2luIGluXCIpO1xyXG4gICAgICAgICAgICAgIHNldExvZ2luU3RhdHVzKHRydWUpO1xyXG4gICAgICAgICAgICAgIC8vZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgLy9yZW5kZXJEYXNoYm9hcmQoKTtcclxuICAgICAgICAgICAgICAvL2Rhc2hib2FyZC5jbGljaygpO1xyXG4gICAgICAgICAgICAgIC8vICBkYXNoYm9hcmQuY2xpY2soKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbG9nb3V0VXNlcigpIHtcclxuICAgICAgICBzaWduT3V0KGF1dGgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIHNpZ25lZCBvdXRcIik7XHJcbiAgICAgICAgICBzaG93TG9naW4oKTtcclxuICAgICAgICAgIGZvcm0ucmVzZXQoKTtcclxuICAgICAgICAgIHNldExvZ2luU3RhdHVzKGZhbHNlKTtcclxuICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vbWFrZSBsb2dpbiBzY3JlZW4gc2hvdyBhZ2FpblxyXG4gICAgICBcclxuICB9XHJcbiAgXHJcbiBcclxuXHJcbiAgICBmdW5jdGlvbiBzaWdudXBVc2VyKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0O1xyXG4gICAgICAgIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWdudXBfX2VtYWlsXCIpLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWdudXBfX3Bhc3N3b3JkXCIpLnZhbHVlO1xyXG4gICAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlcm5hbWVcIikudmFsdWU7XHJcbiAgICAgIGNvbnNvbGUubG9nKHVzZXJuYW1lKTtcclxuICAgICAgICAvL2Zvcm0gdmFsaWRhdGlvblxyXG4gICAgICAgIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpXHJcbiAgICAgICAgICAudGhlbigoY3JlZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjcmVkLnVzZXIpO1xyXG4gICAgICAgICAgICB1cGRhdGVQcm9maWxlKGF1dGguY3VycmVudFVzZXIsIHsgZGlzcGxheU5hbWU6IHVzZXJuYW1lIH0pO1xyXG4gICAgICAgICAgICBhZGRVc2VyTmFtZSh1c2VybmFtZSk7XHJcbiAgICAgICAgICAgIGhpZGVMb2dpbigpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgc2lnZWQgdXBcIik7XHJcbiAgICAgICAgICAgIHNldExvZ2luU3RhdHVzKHRydWUpO1xyXG4gICAgICAgICAgICAvL2RvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAvL3JlbmRlckRhc2hib2FyZCgpO1xyXG4gICAgICAgICAgLy8gIGRhc2hib2FyZC5jbGljaygpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICBmb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGREZW1vQ3JlZGVudGlhbHMoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luX19lbWFpbFwiKTtcclxuICAgIGNvbnN0IHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpbl9fcGFzc3dvcmRcIik7XHJcbiAgIC8vIGNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VybmFtZVwiKTtcclxuICAgIGVtYWlsLnZhbHVlID0gXCJkZW1vQGVtYWlsLmNvbVwiO1xyXG4gICAgcGFzc3dvcmQudmFsdWUgPSBcImRlbW8xMjM0XCI7XHJcbiAgICAvL3VzZXJuYW1lLnZhbHVlID0gXCJkZW1vMTIzNFwiO1xyXG4gIH1cclxuICBcclxuXHJcbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKHVzZXIpID0+IHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImF1dGggc3RhdGUgY2hhbmdlZFwiKTtcclxuICAgICAgICBhZGRVc2VyTmFtZSh1c2VyLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICBoaWRlTG9naW4oKTtcclxuICAgICAgICBjbGVhclVJKCk7XHJcbiAgICAgICAgICAgIC8vbG9naW5TY3JlZW4uY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXlcIik7XHJcbiAgICAgICAgICAvL2xvZ2luU2NyZWVuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgICAgZ2V0QWxsRGF0YSh1c2VyLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAvL2RvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgLy9kYXNoYm9hcmQuY2xpY2soKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBlbHNlIHtcclxuICAgICAgLy8gICBsb2dvdXRVc2VyKCk7XHJcbiAgICAgIC8vIH1cclxuICAgIH0pXHJcblxyXG4gICAgbG9naW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZEFjdGl2ZUxvZ2luKTtcclxuICAgIHNpZ251cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkQWN0aXZlU2lnbnVwKTtcclxuICAgIGxvZ2luQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBsb2dpblVzZXIpO1xyXG4gICAgc2lnbnVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaWdudXBVc2VyKTtcclxuICAgIGxvZ291dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbG9nb3V0VXNlcik7XHJcbiAgc2lkZWJhckxvZ291dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbG9nb3V0VXNlcik7XHJcbiAgZGVtby5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkRGVtb0NyZWRlbnRpYWxzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VXNlcm5hbWUoKSB7XHJcbiAgY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fdXNlcm5hbWVcIikudGV4dENvbnRlbnQ7XHJcbiAgcmV0dXJuIHVzZXJuYW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhclVJKCkge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG4gIGNvbnN0IGNoaWxkcmVuID0gWy4uLmNvbnRhaW5lci5jaGlsZHJlbl07XHJcbiAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgIGNoaWxkLnJlbW92ZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtVmFsaWRhdGlvbihhY3RpdmUpIHtcclxuICAgIC8vaWYgYWN0aXZlIGlzIGxvZ2luXHJcbiAgICAvL2lmIGFjdGl2ZSBpcyBzaWdudXBcclxufVxyXG5cclxuIGZ1bmN0aW9uIGdldExvZ2luU3RhdHVzKCkge1xyXG4gICByZXR1cm4gZmlyc3RMb2dpbjtcclxufVxyXG4gXHJcbmZ1bmN0aW9uIHNldExvZ2luU3RhdHVzKG1vZGUpIHtcclxuICBmaXJzdExvZ2luID0gbW9kZTtcclxufVxyXG5cclxuZXhwb3J0IHsgc2hvd0xvZ2luLCBhZGRBdXRoRXZlbnRzLCBnZXRVc2VybmFtZSwgZGFzaGJvYXJkLCBnZXRMb2dpblN0YXR1cywgc2V0TG9naW5TdGF0dXMgfTsiLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYSgpe31mdW5jdGlvbiBiYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZWEpJiZhW2VhXXx8KGFbZWFdPSsrZmEpfXZhciBlYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGZhPTA7ZnVuY3Rpb24gaGEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBpYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9aGE6cT1pYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBqYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiB0KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLlo9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLlZiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGthPTAsbGE9e307di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5uYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5NKCksMCE9a2EpKXt2YXIgYT1kYSh0aGlzKTtkZWxldGUgbGFbYV07fX07di5wcm90b3R5cGUuTT1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbmE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2NvbnN0IGQ9YS5sZW5ndGgsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG9hKGEpe2E6e3ZhciBiPXBhO2NvbnN0IGM9YS5sZW5ndGgsZD1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHNhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgdGE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHcoYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiB1YShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgeDthOnt2YXIgdmE9bC5uYXZpZ2F0b3I7aWYodmEpe3ZhciB3YT12YS51c2VyQWdlbnQ7aWYod2Epe3g9d2E7YnJlYWsgYX19eD1cIlwiO31mdW5jdGlvbiB4YShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHlhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHphPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIEFhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHphLmxlbmd0aDtmKyspYz16YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBDYShhKXtDYVtcIiBcIl0oYSk7cmV0dXJuIGF9Q2FbXCIgXCJdPWFhO2Z1bmN0aW9uIEZhKGEpe3ZhciBiPUdhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiw5KT9iWzldOmJbOV09YSg5KX12YXIgSGE9dyh4LFwiT3BlcmFcIikseT13KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpLElhPXcoeCxcIkVkZ2VcIiksSmE9SWF8fHksS2E9dyh4LFwiR2Vja29cIikmJiEodyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpKSYmISh3KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpKSYmIXcoeCxcIkVkZ2VcIiksTGE9dyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpO2Z1bmN0aW9uIE1hKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIE5hO1xuYTp7dmFyIE9hPVwiXCIsUGE9ZnVuY3Rpb24oKXt2YXIgYT14O2lmKEthKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoSWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKExhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKEhhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO1BhJiYoT2E9UGE/UGFbMV06XCJcIik7aWYoeSl7dmFyIFFhPU1hKCk7aWYobnVsbCE9UWEmJlFhPnBhcnNlRmxvYXQoT2EpKXtOYT1TdHJpbmcoUWEpO2JyZWFrIGF9fU5hPU9hO312YXIgR2E9e307XG5mdW5jdGlvbiBSYSgpe3JldHVybiBGYShmdW5jdGlvbigpe2xldCBhPTA7Y29uc3QgYj10YShTdHJpbmcoTmEpKS5zcGxpdChcIi5cIiksYz10YShcIjlcIikuc3BsaXQoXCIuXCIpLGQ9TWF0aC5tYXgoYi5sZW5ndGgsYy5sZW5ndGgpO2ZvcihsZXQgaD0wOzA9PWEmJmg8ZDtoKyspe3ZhciBlPWJbaF18fFwiXCIsZj1jW2hdfHxcIlwiO2Rve2U9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtmPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGYpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09ZVswXS5sZW5ndGgmJjA9PWZbMF0ubGVuZ3RoKWJyZWFrO2E9dWEoMD09ZVsxXS5sZW5ndGg/MDpwYXJzZUludChlWzFdLDEwKSwwPT1mWzFdLmxlbmd0aD8wOnBhcnNlSW50KGZbMV0sMTApKXx8dWEoMD09ZVsyXS5sZW5ndGgsMD09ZlsyXS5sZW5ndGgpfHx1YShlWzJdLGZbMl0pO2U9ZVszXTtmPWZbM107fXdoaWxlKDA9PWEpfXJldHVybiAwPD1hfSl9dmFyIFNhO1xuaWYobC5kb2N1bWVudCYmeSl7dmFyIFRhPU1hKCk7U2E9VGE/VGE6cGFyc2VJbnQoTmEsMTApfHx2b2lkIDA7fWVsc2UgU2E9dm9pZCAwO3ZhciBVYT1TYTt2YXIgVmE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB6KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO316LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307ZnVuY3Rpb24gQShhLGIpe3ouY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihLYSl7YTp7dHJ5e0NhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpXYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLlouaC5jYWxsKHRoaXMpO319dChBLHopO3ZhciBXYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS5aLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBCPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgWGE9MDtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaWE9ZTt0aGlzLmtleT0rK1hhO3RoaXMuY2E9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gWmEoYSl7YS5jYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5pYT1udWxsO31mdW5jdGlvbiAkYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9JGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPWFiKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBZYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBiYihhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9bWEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihaYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBhYihhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5jYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaWE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBjYj1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLGRiPXt9O2Z1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBnYihhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1oYihjKTtyZXR1cm4gYSYmYVtCXT9hLk4oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmliKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1qYihhKTtufHwoYVtjYl09bj1uZXcgJGEoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9a2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVZhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGxiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBrYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfXZhciBiPW1iO3JldHVybiBhfWZ1bmN0aW9uIGdiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZ2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyluYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz1oYihjKSxhJiZhW0JdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9YWIoZixjLGQsZSksLTE8YyYmKFphKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1qYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9YWIoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmb2IoYykpO31cbmZ1bmN0aW9uIG9iKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuY2Epe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pYmIoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQobGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1qYihiKSk/KGJiKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW2NiXT1udWxsKSk6WmEoYSk7fX19ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEgaW4gZGI/ZGJbYV06ZGJbYV09XCJvblwiK2F9ZnVuY3Rpb24gbWIoYSxiKXtpZihhLmNhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmlhfHxhLnNyYzthLmZhJiZvYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGpiKGEpe2E9YVtjYl07cmV0dXJuIGEgaW5zdGFuY2VvZiAkYT9hOm51bGx9dmFyIHBiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBoYihhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW3BiXXx8KGFbcGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbcGJdfWZ1bmN0aW9uIEMoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyAkYSh0aGlzKTt0aGlzLlA9dGhpczt0aGlzLkk9bnVsbDt9dChDLHYpO0MucHJvdG90eXBlW0JdPSEwO0MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7bmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gRChhLGIpe3ZhciBjLGQ9YS5JO2lmKGQpZm9yKGM9W107ZDtkPWQuSSljLnB1c2goZCk7YT1hLlA7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHooYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB6KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgeihkLGEpO0FhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1xYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1xYihoLGQsITAsYikmJmU7ZT1xYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1xYihoLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0MuWi5NLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkk9bnVsbDt9O0MucHJvdG90eXBlLk49ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qy5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIHFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguY2EmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix1PWguaWF8fGguc3JjO2guZmEmJmJiKGEuaSxoKTtlPSExIT09bi5jYWxsKHUsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgcmI9bC5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBzYigpe3ZhciBhPXRiO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgdWJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9dmIuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciB2Yj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fSgoKT0+bmV3IHdiLGE9PmEucmVzZXQoKSk7XG5jbGFzcyB3Yntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiB5YihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHpiKGEsYil7QWJ8fEJiKCk7Q2J8fChBYigpLENiPSEwKTt0Yi5hZGQoYSxiKTt9dmFyIEFiO2Z1bmN0aW9uIEJiKCl7dmFyIGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtBYj1mdW5jdGlvbigpe2EudGhlbihEYik7fTt9dmFyIENiPSExLHRiPW5ldyB1YjtmdW5jdGlvbiBEYigpe2Zvcih2YXIgYTthPXNiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7eWIoYyk7fXZhciBiPXZiO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fUNiPSExO31mdW5jdGlvbiBFYihhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLmtiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO310KEViLEMpO2s9RWIucHJvdG90eXBlO2suZGE9ITE7ay5TPW51bGw7ay5rYj1mdW5jdGlvbigpe2lmKHRoaXMuZGEpe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuUyYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSx0aGlzLlM9bnVsbCksRCh0aGlzLFwidGlja1wiKSx0aGlzLmRhJiYoRmIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZGE9ITA7dGhpcy5TfHwodGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24gRmIoYSl7YS5kYT0hMTthLlMmJihhLmcuY2xlYXJUaW1lb3V0KGEuUyksYS5TPW51bGwpO31rLk09ZnVuY3Rpb24oKXtFYi5aLk0uY2FsbCh0aGlzKTtGYih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24gR2IoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBIYihhKXthLmc9R2IoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsSGIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgSWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOkhiKHRoaXMpO31NKCl7c3VwZXIuTSgpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEUoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9dChFLHYpO3ZhciBKYj1bXTtmdW5jdGlvbiBLYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEpiWzBdPWMudG9TdHJpbmcoKSksYz1KYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWZiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gTGIoYSl7eGEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZvYihiKTt9LGEpO2EuZz17fTt9RS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0UuWi5NLmNhbGwodGhpcyk7TGIodGhpcyk7fTtFLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIE1iKCl7dGhpcy5nPSEwO31NYi5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHU9MDt1PG4ubGVuZ3RoO3UrKyl7dmFyIG09blt1XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHI9bVswXTttPW1bMV07dmFyIEc9ci5zcGxpdChcIl9cIik7aD0yPD1HLmxlbmd0aCYmXCJ0eXBlXCI9PUdbMV0/aCsocitcIj1cIittK1wiJlwiKTpoKyhyK1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIE9iKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBGKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK1BiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBRYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9TWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gUGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIHJiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgSD17fSxSYj1udWxsO2Z1bmN0aW9uIFNiKCl7cmV0dXJuIFJiPVJifHxuZXcgQ31ILk1hPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gVGIoYSl7ei5jYWxsKHRoaXMsSC5NYSxhKTt9dChUYix6KTtmdW5jdGlvbiBJKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFRiKGIsYSkpO31ILlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBVYihhLGIpe3ouY2FsbCh0aGlzLEguU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9dChVYix6KTtmdW5jdGlvbiBKKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFViKGIsYSkpO31ILk5hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBWYihhLGIpe3ouY2FsbCh0aGlzLEguTmEsYSk7dGhpcy5zaXplPWI7fXQoVmIseik7XG5mdW5jdGlvbiBLKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBXYj17Tk9fRVJST1I6MCxsYjoxLHliOjIseGI6MyxzYjo0LHdiOjUsemI6NixKYTo3LFRJTUVPVVQ6OCxDYjo5fTt2YXIgWGI9e3FiOlwiY29tcGxldGVcIixNYjpcInN1Y2Nlc3NcIixLYTpcImVycm9yXCIsSmE6XCJhYm9ydFwiLEViOlwicmVhZHlcIixGYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEFiOlwiaW5jcmVtZW50YWxkYXRhXCIsRGI6XCJwcm9ncmVzc1wiLHRiOlwiZG93bmxvYWRwcm9ncmVzc1wiLFViOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWWIoKXt9WWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBaYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiAkYigpe312YXIgTD17T1BFTjpcImFcIixwYjpcImJcIixLYTpcImNcIixCYjpcImRcIn07ZnVuY3Rpb24gYWMoKXt6LmNhbGwodGhpcyxcImRcIik7fXQoYWMseik7ZnVuY3Rpb24gYmMoKXt6LmNhbGwodGhpcyxcImNcIik7fXQoYmMseik7dmFyIGNjO2Z1bmN0aW9uIGRjKCl7fXQoZGMsWWIpO2RjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07ZGMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319O2NjPW5ldyBkYztmdW5jdGlvbiBNKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuWD1kfHwxO3RoaXMuVj1uZXcgRSh0aGlzKTt0aGlzLlA9ZWM7YT1KYT8xMjU6dm9pZCAwO3RoaXMuVz1uZXcgRWIoYSk7dGhpcy5IPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuSz10aGlzLkY9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRD1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5OPS0xO3RoaXMuST0hMTt0aGlzLk89MDt0aGlzLkw9bnVsbDt0aGlzLmFhPXRoaXMuSj10aGlzLiQ9dGhpcy5VPSExO3RoaXMuaD1uZXcgZmM7fWZ1bmN0aW9uIGZjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgZWM9NDVFMyxnYz17fSxoYz17fTtrPU0ucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuSz0xO2Eudj1qYyhOKGIpKTthLnM9YzthLlU9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkY9RGF0ZS5ub3coKTtsYyhhKTthLkE9TihhLnYpO3ZhciBjPWEuQSxkPWEuWDtBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5oLFwidFwiLGQpO2EuQz0wO2M9YS5sLkg7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5MPW5ldyBJYihxKGEuSWEsYSxhLmcpLGEuTykpO0tiKGEuVixhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5nYik7Yj1hLkg/eWEoYS5IKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5lYShhLkEsYS51LG51bGwsYikpO0koMSk7TmIoYS5qLGEudSxhLkEsYS5tLGEuWCxhLnMpO31cbmsuZ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTDtiJiYzPT1PKGEpP2IubCgpOnRoaXMuSWEoYSk7fTtcbmsuSWE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCByPU8odGhpcy5nKTt2YXIgYj10aGlzLmcuRGEoKTtjb25zdCBHPXRoaXMuZy5iYSgpO2lmKCEoMz5yKSYmKDMhPXJ8fEphfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmdhKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5JfHw0IT1yfHw3PT1ifHwoOD09Ynx8MD49Rz9JKDMpOkkoMikpO3BjKHRoaXMpO3ZhciBjPXRoaXMuZy5iYSgpO3RoaXMuTj1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09Tyh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7UCh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmdhKCk7dGhpcy5pPTIwMD09YztPYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5YLHIsYyk7aWYodGhpcy5pKXtpZih0aGlzLiQmJiF0aGlzLkope2I6e2lmKHRoaXMuZyl7dmFyIG4sdT10aGlzLmc7aWYoKG49dS5nP3UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYhc2Eobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRih0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5KPSEwLHNjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0ooMTIpO1AodGhpcyk7cmModGhpcyk7YnJlYWsgYX19dGhpcy5VPyh0Yyh0aGlzLHIsaCksSmEmJnRoaXMuaSYmMz09ciYmKEtiKHRoaXMuVix0aGlzLlcsXCJ0aWNrXCIsdGhpcy5mYiksXG50aGlzLlcuc3RhcnQoKSkpOihGKHRoaXMuaix0aGlzLm0saCxudWxsKSxzYyh0aGlzLGgpKTs0PT1yJiZQKHRoaXMpO3RoaXMuaSYmIXRoaXMuSSYmKDQ9PXI/dWModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsbGModGhpcykpKTt9ZWxzZSA0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEooMTIpKToodGhpcy5vPTAsSigxMykpLFAodGhpcykscmModGhpcyk7fX19Y2F0Y2gocil7fWZpbmFsbHl7fX07ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuSyYmYS5sLkJhOiExfVxuZnVuY3Rpb24gdGMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5JJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dmMoYSxjKSxlPT1oYyl7ND09YiYmKGEubz00LEooMTQpLGQ9ITEpO0YoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09Z2Mpe2Eubz00O0ooMTUpO0YoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBGKGEuaixhLm0sZSxudWxsKSxzYyhhLGUpO3FjKGEpJiZlIT1oYyYmZSE9Z2MmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxKKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYWEmJihhLmFhPSEwLGI9YS5sLGIuZz09YSYmYi4kJiYhYi5MJiYoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHdjKGIpLGIuTD0hMCxKKDExKSkpOihGKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksUChhKSxyYyhhKSk7fWsuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPU8odGhpcy5nKSxiPXRoaXMuZy5nYSgpO3RoaXMuQzxiLmxlbmd0aCYmKHBjKHRoaXMpLHRjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmxjKHRoaXMpKTt9fTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBoYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZ2M7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGhjO2I9Yi5zdWJzdHIoZCxjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5JPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBsYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7eGMoYSxhLlApO31cbmZ1bmN0aW9uIHhjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPUsocShhLmViLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5lYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oUWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5LJiYoSSgzKSxKKDE3KSksUCh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuR3x8YS5JfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIFAoYSl7cGMoYSk7dmFyIGI9YS5MO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubmEmJmIubmEoKTthLkw9bnVsbDtGYihhLlcpO0xiKGEuVik7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIubmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuRyYmKGMuZz09YXx8eWMoYy5pLGEpKSlpZihjLkk9YS5OLCFhLkomJnljKGMuaSxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5DYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpemMoYyksQWMoYyk7ZWxzZSBicmVhayBhO0JjKGMpO0ooMTgpO319ZWxzZSBjLnRhPWVbMV0sMDxjLnRhLWMuVSYmMzc1MDA+ZVsyXSYmYy5OJiYwPT1jLkEmJiFjLnYmJihjLnY9SyhxKGMuYWIsYyksNkUzKSk7aWYoMT49Q2MoYy5pKSYmYy5rYSl7dHJ5e2Mua2EoKTt9Y2F0Y2gobSl7fWMua2E9dm9pZCAwO319ZWxzZSBRKGMsMTEpO31lbHNlIGlmKChhLkp8fGMuZz09YSkmJnpjKGMpLCFzYShiKSlmb3IoZT1jLkNhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO1xuYy5VPW1bMF07bT1tWzFdO2lmKDI9PWMuRylpZihcImNcIj09bVswXSl7Yy5KPW1bMV07Yy5sYT1tWzJdO2NvbnN0IHI9bVszXTtudWxsIT1yJiYoYy5tYT1yLGMuaC5pbmZvKFwiVkVSPVwiK2MubWEpKTtjb25zdCBHPW1bNF07bnVsbCE9RyYmKGMuemE9RyxjLmguaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IERhPW1bNV07bnVsbCE9RGEmJlwibnVtYmVyXCI9PT10eXBlb2YgRGEmJjA8RGEmJihkPTEuNSpEYSxjLks9ZCxjLmguaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBjYT1hLmc7aWYoY2Epe2NvbnN0IEVhPWNhLmc/Y2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihFYSl7dmFyIGY9ZC5pOyFmLmcmJih3KEVhLFwic3BkeVwiKXx8dyhFYSxcInF1aWNcIil8fHcoRWEsXCJoMlwiKSkmJihmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKERjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IHhiPVxuY2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDt4YiYmKGQuc2E9eGIsUihkLkYsZC5ELHhiKSk7fX1jLkc9MztjLmomJmMuai54YSgpO2MuJCYmKGMuTz1EYXRlLm5vdygpLWEuRixjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuTytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLm9hPUVjKGQsZC5IP2QubGE6bnVsbCxkLlcpO2lmKGguSil7RmMoZC5pLGgpO3ZhciBuPWgsdT1kLks7dSYmbi5zZXRUaW1lb3V0KHUpO24uQiYmKHBjKG4pLGxjKG4pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMubC5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fFEoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/UShjLDcpOkljKGMpOlwibm9vcFwiIT1tWzBdJiZjLmomJmMuai53YShtKSxjLkE9MCk7fUkoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSmMoYSl7aWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpcmV0dXJuIGEuUigpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihiYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKW5hKGEsYix2b2lkIDApO2Vsc2Uge2lmKGEuVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5UKXZhciBjPWEuVCgpO2Vsc2UgaWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpYz12b2lkIDA7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPUpjKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmg9e307dGhpcy5nPVtdO3RoaXMuaT0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFMpZm9yKGM9YS5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31rPVMucHJvdG90eXBlO2suUj1mdW5jdGlvbigpe0xjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmcubGVuZ3RoO2IrKylhLnB1c2godGhpcy5oW3RoaXMuZ1tiXV0pO3JldHVybiBhfTtrLlQ9ZnVuY3Rpb24oKXtMYyh0aGlzKTtyZXR1cm4gdGhpcy5nLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIExjKGEpe2lmKGEuaSE9YS5nLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5nLmxlbmd0aDspe3ZhciBkPWEuZ1tiXTtUKGEuaCxkKSYmKGEuZ1tjKytdPWQpO2IrKzt9YS5nLmxlbmd0aD1jO31pZihhLmkhPWEuZy5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuZy5sZW5ndGg7KWQ9YS5nW2JdLFQoZSxkKXx8KGEuZ1tjKytdPWQsZVtkXT0xKSxiKys7YS5nLmxlbmd0aD1jO319ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLmgsYSk/dGhpcy5oW2FdOmJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7VCh0aGlzLmgsYSl8fCh0aGlzLmkrKyx0aGlzLmcucHVzaChhKSk7dGhpcy5oW2FdPWI7fTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O1xuZnVuY3Rpb24gVChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgTWM9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gVShhLGIpe3RoaXMuaT10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuZz0hMTtpZihhIGluc3RhbmNlb2YgVSl7dGhpcy5nPXZvaWQgMCE9PWI/YjphLmc7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7UGModGhpcyxhLmkpO1FjKHRoaXMsYS5tKTt0aGlzLmw9YS5sO2I9YS5oO3ZhciBjPW5ldyBSYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgUyhiLmcpLGMuaD1iLmgpO1NjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5nPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1UYyhjWzJdfHxcIlwiKSxQYyh0aGlzLGNbM118fFwiXCIsITApLFFjKHRoaXMsY1s0XSksdGhpcy5sPVRjKGNbNV18fFwiXCIsITApLFNjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5vPVRjKGNbN118fFwiXCIpKToodGhpcy5nPSEhYix0aGlzLmg9bmV3IFJjKG51bGwsdGhpcy5nKSk7fVxuVS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goVWMoYixWYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuaTtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goVWMoYixWYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuaSYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChVYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9XYzpYYywhMCkpOyhjPXRoaXMuaC50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixVYyhjLFljKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFUoYSl9XG5mdW5jdGlvbiBPYyhhLGIsYyl7YS5qPWM/VGMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIFBjKGEsYixjKXthLmk9Yz9UYyhiLCEwKTpiO31mdW5jdGlvbiBRYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFNjKGEsYixjKXtiIGluc3RhbmNlb2YgUmM/KGEuaD1iLFpjKGEuaCxhLmcpKTooY3x8KGI9VWMoYiwkYykpLGEuaD1uZXcgUmMoYixhLmcpKTt9ZnVuY3Rpb24gUihhLGIsYyl7YS5oLnNldChiLGMpO31mdW5jdGlvbiBqYyhhKXtSKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBhZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFU/TihhKTpuZXcgVShhLHZvaWQgMCl9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9bmV3IFUobnVsbCx2b2lkIDApO2EmJk9jKGUsYSk7YiYmUGMoZSxiKTtjJiZRYyhlLGMpO2QmJihlLmw9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFVjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsY2QpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIGNkKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9XG52YXIgVmM9L1sjXFwvXFw/QF0vZyxYYz0vWyNcXD86XS9nLFdjPS9bI1xcP10vZywkYz0vWyNcXD9AXS9nLFljPS8jL2c7ZnVuY3Rpb24gUmMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9ZnVuY3Rpb24gVihhKXthLmd8fChhLmc9bmV3IFMsYS5oPTAsYS5pJiZOYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1SYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O1xuZnVuY3Rpb24gZGQoYSxiKXtWKGEpO2I9VyhhLGIpO1QoYS5nLmgsYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGE9YS5nLFQoYS5oLGIpJiYoZGVsZXRlIGEuaFtiXSxhLmktLSxhLmcubGVuZ3RoPjIqYS5pJiZMYyhhKSkpO31mdW5jdGlvbiBlZChhLGIpe1YoYSk7Yj1XKGEsYik7cmV0dXJuIFQoYS5nLmgsYil9ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe25hKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2suVD1mdW5jdGlvbigpe1YodGhpcyk7Zm9yKHZhciBhPXRoaXMuZy5SKCksYj10aGlzLmcuVCgpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O1xuay5SPWZ1bmN0aW9uKGEpe1YodGhpcyk7dmFyIGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWVkKHRoaXMsYSkmJihiPXFhKGIsdGhpcy5nLmdldChXKHRoaXMsYSkpKSk7ZWxzZSB7YT10aGlzLmcuUigpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9cWEoYixhW2NdKTt9cmV0dXJuIGJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmk9bnVsbDthPVcodGhpcyxhKTtlZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5SKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBtYyhhLGIsYyl7ZGQoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChXKGEsYikscmEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuZy5UKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlIoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBXKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIFpjKGEsYil7YiYmIWEuaiYmKFYoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKGRkKHRoaXMsZCksbWModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGZkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7fX07ZnVuY3Rpb24gZ2QoYSl7dGhpcy5sPWF8fGhkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuRWEmJmwuZy5FYSgpJiZsLmcuRWEoKS5aYik7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgaGQ9MTA7ZnVuY3Rpb24gaWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBDYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geWMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBEYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEZjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31nZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWpkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gamQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIHJhKGEuaSl9ZnVuY3Rpb24ga2QoKXt9a2QucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2tkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24gbGQoKXt0aGlzLmc9bmV3IGtkO31mdW5jdGlvbiBtZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1yYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG5kKGEsYil7Y29uc3QgYz1uZXcgTWI7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG9kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIHBkKGEpe3RoaXMubD1hLiRifHxudWxsO3RoaXMuaj1hLmlifHwhMTt9dChwZCxZYik7cGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFkKHRoaXMubCx0aGlzLmopfTtwZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBxZChhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkQ9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1yZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXQocWQsQyk7dmFyIHJkPTA7az1xZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPXJkKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7c2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkR8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLlZhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHRkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9cmQ7fTtcbmsuVmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixzZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsc2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5UYS5iaW5kKHRoaXMpLHRoaXMuaGEuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7dWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlVhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHVkKGEpe2Euai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7fWsuU2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT90ZCh0aGlzKTpzZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnVkKHRoaXMpO319O1xuay5VYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEsdGQodGhpcykpO307ay5UYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEsdGQodGhpcykpO307ay5oYT1mdW5jdGlvbigpe3RoaXMuZyYmdGQodGhpcyk7fTtmdW5jdGlvbiB0ZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtzZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIHNkKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHZkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFM7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkg9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5GPXRoaXMudj10aGlzLkQ9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5KPXdkO3RoaXMuSz10aGlzLkw9ITE7fXQoWCxDKTt2YXIgd2Q9XCJcIix4ZD0vXmh0dHBzPyQvaSx5ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1YLnByb3RvdHlwZTtcbmsuZWE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSCtcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkg9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkQ9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTpjYy5nKCk7dGhpcy5DPXRoaXMudT9aYih0aGlzLnUpOlpiKGNjKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5GYSx0aGlzKTt0cnl7dGhpcy5GPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjb25zdCBlPW5ldyBTKHRoaXMuaGVhZGVycyk7ZCYmS2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1vYShlLlQoKSk7Yz1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTtcbiEoMDw9bWEoeWQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSiYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5KKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5MJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz10aGlzLkwpO3RyeXtBZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLks9QmQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy5wYSx0aGlzKSk6dGhpcy5BPUdiKHRoaXMucGEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt6ZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gQmQoYSl7cmV0dXJuIHkmJlJhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBwYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWsucGE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEQodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB6ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTtDZChhKTtEZChhKTt9ZnVuY3Rpb24gQ2QoYSl7YS5EfHwoYS5EPSEwLEQoYSxcImNvbXBsZXRlXCIpLEQoYSxcImVycm9yXCIpKTt9XG5rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsRCh0aGlzLFwiY29tcGxldGVcIiksRCh0aGlzLFwiYWJvcnRcIiksRGQodGhpcykpO307ay5NPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLERkKHRoaXMsITApKTtYLlouTS5jYWxsKHRoaXMpO307ay5GYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuRnx8dGhpcy52fHx0aGlzLmw/RWQodGhpcyk6dGhpcy5jYigpKTt9O2suY2I9ZnVuY3Rpb24oKXtFZCh0aGlzKTt9O1xuZnVuY3Rpb24gRWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPU8oYSl8fDIhPWEuYmEoKSkpaWYoYS52JiY0PT1PKGEpKUdiKGEuRmEsMCxhKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5oPSExO3RyeXtjb25zdCBuPWEuYmEoKTthOnN3aXRjaChuKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09bil7dmFyIGU9U3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdfHxudWxsO2lmKCFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbil7dmFyIGY9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2U9Zi5zdWJzdHIoMCxmLmxlbmd0aC0xKTt9ZD0heGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUQoYSxcImNvbXBsZXRlXCIpLEQoYSxcblwic3VjY2Vzc1wiKTtlbHNlIHthLm09Njt0cnl7dmFyIGg9MjxPKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKHUpe2g9XCJcIjt9YS5qPWgrXCIgW1wiK2EuYmEoKStcIl1cIjtDZChhKTt9fWZpbmFsbHl7RGQoYSk7fX19ZnVuY3Rpb24gRGQoYSxiKXtpZihhLmcpe0FkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdP2FhOm51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8RChhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIEFkKGEpe2EuZyYmYS5LJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5iYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmdhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5RYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiB2ZChiKX19O2Z1bmN0aW9uIG9jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkope2Nhc2Ugd2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fWsuRGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtcbmsuTGE9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBGZChhKXtsZXQgYj1cIlwiO3hhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBHZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1GZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpSKGEsYixjKSk7fWZ1bmN0aW9uIEhkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIElkKGEpe3RoaXMuemE9MDt0aGlzLmw9W107dGhpcy5oPW5ldyBNYjt0aGlzLmxhPXRoaXMub2E9dGhpcy5GPXRoaXMuVz10aGlzLmc9dGhpcy5zYT10aGlzLkQ9dGhpcy5hYT10aGlzLm89dGhpcy5QPXRoaXMucz1udWxsO3RoaXMuWmE9dGhpcy5WPTA7dGhpcy5YYT1IZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5OPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaj1udWxsO3RoaXMuWD0hMDt0aGlzLkk9dGhpcy50YT10aGlzLlU9LTE7dGhpcy5ZPXRoaXMuQT10aGlzLkM9MDt0aGlzLlBhPUhkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLiRhPUhkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLllhPUhkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnJhPUhkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMucWE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuQmE9YSYmYS5ZYnx8ITE7XG50aGlzLks9dm9pZCAwO3RoaXMuSD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSj1cIlwiO3RoaXMuaT1uZXcgZ2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkNhPW5ldyBsZDt0aGlzLmphPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5SYT1hJiZhLldifHwhMTthJiZhLkFhJiZ0aGlzLmguQWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLlg9ITEpO3RoaXMuJD0hdGhpcy5qYSYmdGhpcy5YJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLmthPXZvaWQgMDt0aGlzLk89MDt0aGlzLkw9ITE7dGhpcy5CPW51bGw7dGhpcy5XYT0hYXx8ITEhPT1hLlhiO31rPUlkLnByb3RvdHlwZTtrLm1hPTg7ay5HPTE7XG5mdW5jdGlvbiBJYyhhKXtKZChhKTtpZigzPT1hLkcpe3ZhciBiPWEuVisrLGM9TihhLkYpO1IoYyxcIlNJRFwiLGEuSik7UihjLFwiUklEXCIsYik7UihjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0tkKGEsYyk7Yj1uZXcgTShhLGEuaCxiLHZvaWQgMCk7Yi5LPTI7Yi52PWpjKE4oYykpO2M9ITE7bC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIikpOyFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPW5jKGIubCxudWxsKSxiLmcuZWEoYi52KSk7Yi5GPURhdGUubm93KCk7bGMoYik7fUxkKGEpO31rLmhiPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgaW52b2tlZDogXCIrYSk7fWNhdGNoKGIpe319O2Z1bmN0aW9uIEFjKGEpe2EuZyYmKHdjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gSmQoYSl7QWMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7emMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTWQoYSxiKXthLmwucHVzaChuZXcgZmQoYS5aYSsrLGIpKTszPT1hLkcmJkhjKGEpO31mdW5jdGlvbiBIYyhhKXtpZChhLmkpfHxhLm18fChhLm09ITAsemIoYS5IYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIE5kKGEsYil7aWYoQ2MoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEubD1iLkQuY29uY2F0KGEubCksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQz49KGEuWGE/MDphLllhKSlyZXR1cm4gITE7YS5tPUsocShhLkhhLGEsYiksT2QoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkcpe2lmKCFhKXt0aGlzLlY9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlYrKztjb25zdCBlPW5ldyBNKHRoaXMsdGhpcy5oLGEsdm9pZCAwKTtsZXQgZj10aGlzLnM7dGhpcy5QJiYoZj8oZj15YShmKSxBYShmLHRoaXMuUCkpOmY9dGhpcy5QKTtudWxsPT09dGhpcy5vJiYoZS5IPWYpO2lmKHRoaXMuamEpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMubC5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmxbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5nJiYoZD1kLmcuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMubC5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj0xRTM7Yj1cblBkKHRoaXMsZSxiKTtjPU4odGhpcy5GKTtSKGMsXCJSSURcIixhKTtSKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUihjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpO0tkKHRoaXMsYyk7dGhpcy5vJiZmJiZHZChjLHRoaXMubyxmKTtEYyh0aGlzLmksZSk7dGhpcy5SYSYmUihjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLmphPyhSKGMsXCIkcmVxXCIsYiksUihjLFwiU0lEXCIsXCJudWxsXCIpLGUuJD0hMCxpYyhlLGMsbnVsbCkpOmljKGUsYyxiKTt0aGlzLkc9Mjt9fWVsc2UgMz09dGhpcy5HJiYoYT9RZCh0aGlzLGEpOjA9PXRoaXMubC5sZW5ndGh8fGlkKHRoaXMuaSl8fFFkKHRoaXMpKTt9O1xuZnVuY3Rpb24gUWQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5WKys7Y29uc3QgZD1OKGEuRik7UihkLFwiU0lEXCIsYS5KKTtSKGQsXCJSSURcIixjKTtSKGQsXCJBSURcIixhLlUpO0tkKGEsZCk7YS5vJiZhLnMmJkdkKGQsYS5vLGEucyk7Yz1uZXcgTShhLGEuaCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5IPWEucyk7YiYmKGEubD1iLkQuY29uY2F0KGEubCkpO2I9UGQoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5yYSkrTWF0aC5yb3VuZCguNSphLnJhKk1hdGgucmFuZG9tKCkpKTtEYyhhLmksYyk7aWMoYyxkLGIpO31mdW5jdGlvbiBLZChhLGIpe2EuaiYmS2Moe30sZnVuY3Rpb24oYyxkKXtSKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBQZChhLGIsYyl7Yz1NYXRoLm1pbihhLmwubGVuZ3RoLGMpO3ZhciBkPWEuaj9xKGEuai5PYSxhLmosYSk6bnVsbDthOnt2YXIgZT1hLmw7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdT0wO3U8Yzt1Kyspe2xldCBtPWVbdV0uaDtjb25zdCByPWVbdV0uZzttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt1XS5oLTEwMCksbj0hMTtlbHNlIHRyeXttZChyLGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goRyl7ZCYmZChyKTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmwuc3BsaWNlKDAsYyk7Yi5EPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLlk9MSx6YihhLkdhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBCYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLlkrKzthLnU9SyhxKGEuR2EsYSksT2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5HYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO1JkKHRoaXMpO2lmKHRoaXMuJCYmISh0aGlzLkx8fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5PKSl7dmFyIGE9Mip0aGlzLk87dGhpcy5oLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPUsocSh0aGlzLmJiLHRoaXMpLGEpO319O2suYmI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLk49ITEsdGhpcy5MPSEwLEooMTApLEFjKHRoaXMpLFJkKHRoaXMpKTt9O1xuZnVuY3Rpb24gd2MoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIFJkKGEpe2EuZz1uZXcgTShhLGEuaCxcInJwY1wiLGEuWSk7bnVsbD09PWEubyYmKGEuZy5IPWEucyk7YS5nLk89MDt2YXIgYj1OKGEub2EpO1IoYixcIlJJRFwiLFwicnBjXCIpO1IoYixcIlNJRFwiLGEuSik7UihiLFwiQ0lcIixhLk4/XCIwXCI6XCIxXCIpO1IoYixcIkFJRFwiLGEuVSk7S2QoYSxiKTtSKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO2EubyYmYS5zJiZHZChiLGEubyxhLnMpO2EuSyYmYS5nLnNldFRpbWVvdXQoYS5LKTt2YXIgYz1hLmc7YT1hLmxhO2MuSz0xO2Mudj1qYyhOKGIpKTtjLnM9bnVsbDtjLlU9ITA7a2MoYyxhKTt9ay5hYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLEFjKHRoaXMpLEJjKHRoaXMpLEooMTkpKTt9O2Z1bmN0aW9uIHpjKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31cbmZ1bmN0aW9uIHVjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3pjKGEpO3djKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeWMoYS5pLGIpKWM9Yi5ELEZjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47YS5JPWIuTjtpZigwIT1hLkcpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuQztkPVNiKCk7RChkLG5ldyBWYihkLGMsYixlKSk7SGMoYSk7fWVsc2UgR2MoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGEuSXx8ISgxPT1kJiZOZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOlEoYSw1KTticmVhaztjYXNlIDQ6UShhLDEwKTticmVhaztjYXNlIDM6UShhLDYpO2JyZWFrO2RlZmF1bHQ6UShhLDIpO319XG5mdW5jdGlvbiBPZChhLGIpe2xldCBjPWEuUGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuJGEpO2Euanx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gUShhLGIpe2EuaC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaiYmKGM9bnVsbCk7dmFyIGQ9cShhLmpiLGEpO2N8fChjPW5ldyBVKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO25kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBKKDIpO2EuRz0wO2EuaiYmYS5qLnZhKGIpO0xkKGEpO0pkKGEpO31rLmpiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuaC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEooMikpOih0aGlzLmguaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksSigxKSk7fTtcbmZ1bmN0aW9uIExkKGEpe2EuRz0wO2EuST0tMTtpZihhLmope2lmKDAhPWpkKGEuaSkubGVuZ3RofHwwIT1hLmwubGVuZ3RoKWEuaS5pLmxlbmd0aD0wLHJhKGEubCksYS5sLmxlbmd0aD0wO2Euai51YSgpO319ZnVuY3Rpb24gRWMoYSxiLGMpe2xldCBkPWFkKGMpO2lmKFwiXCIhPWQuaSliJiZQYyhkLGIrXCIuXCIrZC5pKSxRYyhkLGQubSk7ZWxzZSB7Y29uc3QgZT1sLmxvY2F0aW9uO2Q9YmQoZS5wcm90b2NvbCxiP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lLCtlLnBvcnQsYyk7fWEuYWEmJnhhKGEuYWEsZnVuY3Rpb24oZSxmKXtSKGQsZixlKTt9KTtiPWEuRDtjPWEuc2E7YiYmYyYmUihkLGIsYyk7UihkLFwiVkVSXCIsYS5tYSk7S2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIG5jKGEsYixjKXtpZihiJiYhYS5IKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5CYSYmIWEucWE/bmV3IFgobmV3IHBkKHtpYjohMH0pKTpuZXcgWChhLnFhKTtiLkw9YS5IO3JldHVybiBifWZ1bmN0aW9uIFNkKCl7fWs9U2QucHJvdG90eXBlO2sueGE9ZnVuY3Rpb24oKXt9O2sud2E9ZnVuY3Rpb24oKXt9O2sudmE9ZnVuY3Rpb24oKXt9O2sudWE9ZnVuY3Rpb24oKXt9O2suT2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRkKCl7aWYoeSYmISgxMDw9TnVtYmVyKFVhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9VGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgSWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueWEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi55YTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueWF9KTt0aGlzLmcuUD1cbmE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXNhKGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXNhKGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaj10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkg9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO2EuV2EmJihhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksemIocShhLmhiLGEsYikpKTtKKDApO2EuVz1iO2EuYWE9Y3x8e307YS5OPWEuWDthLkY9RWMoYSxudWxsLGEuVyk7SGMoYSk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0ljKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7TWQodGhpcy5nLGIpO31lbHNlIHRoaXMudj8oYj17fSxiLl9fZGF0YV9fPXJiKGEpLE1kKHRoaXMuZyxiKSk6TWQodGhpcy5nLGEpO307WS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3RoaXMuZy5qPW51bGw7ZGVsZXRlIHRoaXMuajtJYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk0uY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFVkKGEpe2FjLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9dChVZCxhYyk7ZnVuY3Rpb24gVmQoKXtiYy5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXQoVmQsYmMpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fVxudChaLFNkKTtaLnByb3RvdHlwZS54YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLndhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBVZChhKSk7fTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbihhKXtEKHRoaXMuZyxuZXcgVmQoYSkpO307Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtEKHRoaXMuZyxcImJcIik7fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuVGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9VGQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS51O1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtXYi5OT19FUlJPUj0wO1diLlRJTUVPVVQ9ODtXYi5IVFRQX0VSUk9SPTY7WGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiOyRiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0MucHJvdG90eXBlLmxpc3Rlbj1DLnByb3RvdHlwZS5OO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuTztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuTGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS5EYTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuYmE7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlFhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmdhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7dmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgVGR9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFNiKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVdiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVhiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1IO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3JiOjAsdWI6MSx2YjoyLE9iOjMsVGI6NCxRYjo1LFJiOjYsUGI6NyxOYjo4LFNiOjksUFJPWFk6MTAsTk9QUk9YWToxMSxMYjoxMixIYjoxMyxJYjoxNCxHYjoxNSxKYjoxNixLYjoxNyxuYjoxOCxtYjoxOSxvYjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1wZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPSRiO1xudmFyIFhocklvID0gZXNtLlhocklvPVg7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjYuMlwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IHtcclxuICBjcmVhdGVFbGVtZW50V2l0aENsYXNzLFxyXG4gIGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzLFxyXG59IGZyb20gXCIuL2NyZWF0ZUVsZW1lbnRcIjtcclxuaW1wb3J0IHsgY2xvc2VTaWRlYmFyIH0gZnJvbSBcIi4vaGVhZGVyXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhbGN1bGF0b3IoKSB7XHJcbiAgY2xlYXJVSSgpO1xyXG4gIGNsb3NlU2lkZWJhcigpO1xyXG4gIFxyXG4gIGNvbnN0IHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwiY2FsY19fd3JhcHBlclwiKTtcclxuICBjb25zdCBib2R5ID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXCJkaXZcIiwgXCJjYWxjX19jb250YWluZXJcIik7XHJcbiAgYm9keS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcjJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlzcGxheS13cmFwcGVyXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPVwiZGlzcGxheSBjYWxjXCI+PC9wPlxyXG4gICAgICAgICAgICA8aDEgY2xhc3M9XCJkaXNwbGF5IGtleVByZXNzRGlzcGxheVwiPjA8L2gxPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b25zXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gY2xlYXJcIj5BQzwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJhY2tzcGFjZVwiPiYjODU5Mjs8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBuZWdhdGl2ZVwiPisvLTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGRpdmlkZVwiPi88L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBzZXZlblwiPjc8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBlaWdodFwiPjg8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBuaW5lXCI+OTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIG11bHRpcGx5XCI+eDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGZvdXJcIj40PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gZml2ZVwiPjU8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBzaXhcIj42PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gc3VidHJhY3RcIj4tPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gb25lXCI+MTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIHR3b1wiPjI8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biB0aHJlZVwiPjM8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBhZGRcIj4rPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gemVyb1wiPjA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBkZWNpbWFsXCI+LjwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGVxdWFsc1wiPj08L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB3cmFwcGVyLmFwcGVuZENoaWxkKGJvZHkpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcclxuICBjYWxjKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGMoKSB7XHJcbiAgY29uc3QgY2FsYyA9IFtdO1xyXG4gIGxldCBkaXNwbGF5U3RyaW5nID0gXCJcIjtcclxuICBsZXQgZGlzcGxheUV4cHJlc3Npb24gPSBcIlwiO1xyXG4gIGNvbnN0IGtleVByZXNzZWREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5rZXlQcmVzc0Rpc3BsYXlcIik7XHJcbiAgY29uc3QgZXhwcmVzc2lvbkRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGNcIik7XHJcblxyXG4gIC8vZGlnaXQgYnV0dG9uc1xyXG4gIGNvbnN0IGJ0bk9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub25lXCIpO1xyXG4gIGNvbnN0IGJ0blR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHdvXCIpO1xyXG4gIGNvbnN0IGJ0blRocmVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aHJlZVwiKTtcclxuICBjb25zdCBidG5Gb3VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3VyXCIpO1xyXG4gIGNvbnN0IGJ0bkZpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZpdmVcIik7XHJcbiAgY29uc3QgYnRuU2l4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXhcIik7XHJcbiAgY29uc3QgYnRuU2V2ZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldmVuXCIpO1xyXG4gIGNvbnN0IGJ0bkVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5laWdodFwiKTtcclxuICBjb25zdCBidG5OaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uaW5lXCIpO1xyXG4gIGNvbnN0IGJ0blplcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnplcm9cIik7XHJcbiAgY29uc3QgYnRuRGVjaW1hbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVjaW1hbFwiKTtcclxuXHJcbiAgLy9vcGVyYXRvciBidXR0b25zXHJcbiAgY29uc3QgYnRuQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFkZGApO1xyXG4gIGNvbnN0IGJ0blN1YnRyYWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnN1YnRyYWN0YCk7XHJcbiAgY29uc3QgYnRuTXVsdGlwbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAubXVsdGlwbHlgKTtcclxuICBjb25zdCBidG5EaXZpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGl2aWRlYCk7XHJcbiAgY29uc3QgYnRuRXF1YWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmVxdWFsc2ApO1xyXG5cclxuICAvL2FjY2Vzc29yeSBidXR0b25zXHJcbiAgY29uc3QgYnRuQ2xlYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuY2xlYXJgKTtcclxuICBjb25zdCBidG5CYWNrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhY2tzcGFjZVwiKTtcclxuICBjb25zdCBidG5OZWdhdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmVnYXRpdmVcIik7XHJcblxyXG4gIC8vRVZFTlQgTElTVEVORVJTIC0gRElHSVRTXHJcbiAgYnRuT25lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgYnRuVHdvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMik7XHJcbiAgfSk7XHJcblxyXG4gIGJ0blRocmVlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMyk7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkZvdXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg0KTtcclxuICB9KTtcclxuXHJcbiAgYnRuRml2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KDUpO1xyXG4gIH0pO1xyXG5cclxuICBidG5TaXguYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg2KTtcclxuICB9KTtcclxuXHJcbiAgYnRuU2V2ZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg3KTtcclxuICB9KTtcclxuXHJcbiAgYnRuRWlnaHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg4KTtcclxuICB9KTtcclxuXHJcbiAgYnRuTmluZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KDkpO1xyXG4gIH0pO1xyXG5cclxuICBidG5aZXJvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMCk7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkRlY2ltYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheShcIi5cIik7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEVWRU5UIExJU1RFTkVSUyAtIE9QRVJBVE9SU1xyXG4gIGJ0bkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KFwiK1wiKTtcclxuICB9KTtcclxuXHJcbiAgYnRuU3VidHJhY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheShcIi1cIik7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bk11bHRpcGx5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoXCIqXCIpO1xyXG4gIH0pO1xyXG5cclxuICBidG5EaXZpZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheShcIi9cIik7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkVxdWFscy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KFwiPVwiKTtcclxuICB9KTtcclxuXHJcbiAgLy9FVkVOVCBMSVNURU5FUlMgLSBBQ0NFU1NPUlkgQlVUVE9OU1xyXG4gIGJ0bkNsZWFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvL3NldCBib3RoIGRpc3BsYXkgc3RyaW5ncyB0byBhbiBlbXB0eSBzdHJpbmdcclxuICAgIGRpc3BsYXlFeHByZXNzaW9uID0gXCJcIjtcclxuICAgIGRpc3BsYXlTdHJpbmcgPSBcIlwiO1xyXG4gICAgLy9jbGVhciB0aGUgdGV4dCBjb250ZW50LCBzZXQgZGlzcGxheVN0cmluZyBiYWNrIHRvIDBcclxuICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICAvLyBjbGVhciB0aGUgYXJyYXlcclxuICAgIGNhbGMubGVuZ3RoID0gMDtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gYmFja3NwYWNlKCkge1xyXG4gICAgaWYgKGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50Lmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudCA9IFwiMFwiO1xyXG4gICAgICBleHByZXNzaW9uRGlzcGxheS50ZXh0Q29udGVudCA9IGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50LnNsaWNlKFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgLTFcclxuICAgICAgKTtcclxuICAgICAgZGlzcGxheVN0cmluZyA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBtb3JlIHRoYW4gb25lIG51bWJlciBkZWxldGUgbGFzdCBudW1iZXIgYWRkZWRcclxuICAgIGVsc2UgaWYgKGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50Lmxlbmd0aCA+IDEpIHtcclxuICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudC5zbGljZShcclxuICAgICAgICAwLFxyXG4gICAgICAgIC0xXHJcbiAgICAgICk7XHJcbiAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ID0gZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQuc2xpY2UoXHJcbiAgICAgICAgMCxcclxuICAgICAgICAtMVxyXG4gICAgICApO1xyXG4gICAgICBkaXNwbGF5U3RyaW5nID0gZGlzcGxheVN0cmluZy5zbGljZSgwLCAtMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBidG5CYWNrc3BhY2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJhY2tzcGFjZSk7XHJcblxyXG4gIGJ0bk5lZ2F0aXZlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoXCIrLy1cIik7XHJcbiAgfSk7XHJcblxyXG4gIC8vYWRkXHJcbiAgZnVuY3Rpb24gYWRkKGEsIGIpIHtcclxuICAgIGxldCByZXN1bHQgPSBwYXJzZUZsb2F0KGEpICsgcGFyc2VGbG9hdChiKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvL3N1YnRyYWN0XHJcbiAgZnVuY3Rpb24gc3VidHJhY3QoYSwgYikge1xyXG4gICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQoYSkgLSBwYXJzZUZsb2F0KGIpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vbXVsdGlwbHlcclxuICBmdW5jdGlvbiBtdWx0aXBseShhLCBiKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gcGFyc2VGbG9hdChhKSAqIHBhcnNlRmxvYXQoYik7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLy9kaXZpZGVcclxuICBmdW5jdGlvbiBkaXZpZGUoYSwgYikge1xyXG4gICAgaWYgKGIgPT0gMCkge1xyXG4gICAgICByZXR1cm4gXCJFUlJPUlwiO1xyXG4gICAgfVxyXG4gICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQoYSkgLyBwYXJzZUZsb2F0KGIpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vb3BlcmF0ZVxyXG4gIGZ1bmN0aW9uIG9wZXJhdGUobnVtMSwgb3AsIG51bTIpIHtcclxuICAgIGxldCByZXN1bHQgPSAwO1xyXG4gICAgaWYgKG9wID09PSBcIitcIikge1xyXG4gICAgICByZXN1bHQgPSBhZGQobnVtMSwgbnVtMik7XHJcbiAgICB9IGVsc2UgaWYgKG9wID09PSBcIi1cIikge1xyXG4gICAgICByZXN1bHQgPSBzdWJ0cmFjdChudW0xLCBudW0yKTtcclxuICAgIH0gZWxzZSBpZiAob3AgPT09IFwiKlwiKSB7XHJcbiAgICAgIHJlc3VsdCA9IG11bHRpcGx5KG51bTEsIG51bTIpO1xyXG4gICAgfSBlbHNlIGlmIChvcCA9PT0gXCIvXCIpIHtcclxuICAgICAgcmVzdWx0ID0gZGl2aWRlKG51bTEsIG51bTIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGFycmF5IGhhcyBhIGxlbmd0aCBvZiA0IGFuZCBsYXN0IGlzIGFub3RoZXIgb3BlcmF0b3JcclxuICAgIGlmIChjYWxjLmxlbmd0aCA9PT0gNCAmJiB0eXBlb2YgY2FsY1szXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBsZXQgdXBkYXRlciA9IFwiXCI7XHJcbiAgICAgIHVwZGF0ZXIgKz0gcmVzdWx0O1xyXG4gICAgICB1cGRhdGVyICs9IGNhbGNbM107XHJcbiAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ID0gdXBkYXRlcjtcclxuICAgICAgLy8gcmVtb3ZlIG9wZXJhbmRzIGFuZCBvcGVyYXRvciBmcm9tIHByZXZpb3VzIGNhbGN1bGF0aW9uXHJcbiAgICAgIGNhbGMuc2hpZnQoKTtcclxuICAgICAgY2FsYy5zaGlmdCgpO1xyXG4gICAgICBjYWxjLnNoaWZ0KCk7XHJcbiAgICAgIC8vIGFkZCByZXN1bHQgdG8gY2FsY1xyXG4gICAgICBjYWxjLnVuc2hpZnQocmVzdWx0KTtcclxuICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSByZXN1bHQ7XHJcbiAgICAgIGRpc3BsYXlFeHByZXNzaW9uID0gXCJcIjtcclxuICAgICAgZGlzcGxheVN0cmluZyA9IFwiXCI7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBjYWxjWzNdIGlzIHRoZSBlcXVhbHMgc2lnbiwgZW5wdHkgYXJyYXkgYWRkIHJlc3VsdFxyXG4gICAgZWxzZSBpZiAoY2FsYy5sZW5ndGggPT09IDMpIHtcclxuICAgICAgY2FsYy5sZW5ndGggPSAwO1xyXG4gICAgICBjYWxjLnB1c2gocmVzdWx0KTtcclxuICAgICAgY2FsYy5zaGlmdCgpO1xyXG4gICAgICBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudCA9IHJlc3VsdDtcclxuICAgICAgZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICBkaXNwbGF5RXhwcmVzc2lvbiA9IFwiXCI7XHJcbiAgICAgIGRpc3BsYXlTdHJpbmcgPSBcIlwiO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBvcHVsYXRlRGlzcGxheShpbnB1dCkge1xyXG4gICAgbGV0IG9wID0gXCJcIjtcclxuICAgIC8vIHJlbW92ZSBkZWZhdWx0IHplcm8gZnJvbSBrZXlQcmVzc2VkRGlzcGxheVxyXG4gICAgaWYgKGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50LmNoYXJBdCgwKSA9PT0gXCIwXCIpIHtcclxuICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAoaW5wdXQpIHtcclxuICAgICAgY2FzZSBcIitcIjpcclxuICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgY2FzZSBcIipcIjpcclxuICAgICAgY2FzZSBcIi9cIjpcclxuICAgICAgICAvLyBjaGVjayBpZiB1c2VyIHRyaWVzIHRvIGVudGVyIG9wZXJhdG9yIGZpcnN0XHJcbiAgICAgICAgaWYgKGRpc3BsYXlTdHJpbmcubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWRkIGlucHV0IHRvIGV4cHJlc3Npb24gc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gKz0gaW5wdXQ7XHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gPSBcIlwiO1xyXG4gICAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ICs9IGlucHV0O1xyXG4gICAgICAgIC8vIHB1c2ggd2hhdHMgaW4gZGlzcGxheSBzdHJpbmcgc28gZmFyIHRvIGNhbGMgYXJyYXkgZm9yIGRvdWJsZSBkaWdpdCArIG51bWJlcnNcclxuICAgICAgICBjYWxjLnB1c2goZGlzcGxheVN0cmluZyk7XHJcbiAgICAgICAgLy8gb25jZSBhbiBvcGVyYXRvciBpcyBwcmVzc2VkIGNsZWFyIGRpc3BsYXkgc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheVN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIC8vIHB1c2ggdGhlIG9wZXJhdG9yIHRvIGNhbGMgYXJyYXlcclxuICAgICAgICBjYWxjLnB1c2goaW5wdXQpO1xyXG4gICAgICAgIC8vIGlmIChjYWxjLmluZGV4T2YoaW5wdXQpID09PSAzKSB7XHJcbiAgICAgICAgLy8gICAgIGNhbGMuc2hpZnQoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCIrLy1cIjpcclxuICAgICAgICAvLyBtdWx0aXBseSBieSAtMVxyXG4gICAgICAgIC8vIHN0b3AgdXNlciBmcm9tIHByZXNzaW5nIHRoaXMgYnV0dG9uIGJlZm9yZSBhIG51bWJlclxyXG4gICAgICAgIGlmIChkaXNwbGF5U3RyaW5nLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc3BsYXlTdHJpbmcgPSBwYXJzZUZsb2F0KGRpc3BsYXlTdHJpbmcgKiAtMSk7XHJcbiAgICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBwYXJzZUZsb2F0KFxyXG4gICAgICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgKiAtMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gPSBwYXJzZUZsb2F0KGRpc3BsYXlFeHByZXNzaW9uICogLTEpO1xyXG5cclxuICAgICAgICAvLyBpZiBudW1iZXIgeW91cmUgbmVnYXRpbmcgaXNudCB0aGUgZmlyc3QgbnVtYmVyIGluIHRoZSBvcGVyYXRpb25cclxuICAgICAgICBpZiAoY2FsYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBleHByZXNzaW9uRGlzcGxheS50ZXh0Q29udGVudCA9IGNhbGNbMF0gKyBjYWxjWzFdICsgZGlzcGxheUV4cHJlc3Npb247XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQgPSBkaXNwbGF5RXhwcmVzc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCI9XCI6XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmVzIGEgbnVtYmVyIGZvbGxvd2VkIGJ5IGFuIG9wZXJhdG9yIGluIGNhbGNcclxuICAgICAgICBpZiAoY2FsYy5sZW5ndGggPCAzICYmIHR5cGVvZiBjYWxjWzFdICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsYy5wdXNoKGRpc3BsYXlTdHJpbmcpO1xyXG4gICAgICAgIG9wZXJhdGUoY2FsY1swXSwgY2FsY1sxXSwgY2FsY1syXSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCIuXCI6XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdXNlciBhbHJlYWR5IHByZXNzZWQgYSBkZWNpbWFsXHJcbiAgICAgICAgaWYgKGRpc3BsYXlTdHJpbmcuaW5jbHVkZXMoXCIuXCIpKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gKz0gaW5wdXQ7XHJcbiAgICAgICAgZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQgKz0gaW5wdXQ7XHJcbiAgICAgICAgZGlzcGxheVN0cmluZyArPSBpbnB1dDtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIC8vIGlmIHRoZSBpbnB1dCBpcyBhIG51bWJlclxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ICs9IGlucHV0O1xyXG5cclxuICAgICAgICBpZiAoY2FsYy5sZW5ndGggPT09IDMgJiYgdHlwZW9mIGNhbGNbMV0gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgIGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhbGMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBjYWxjWzFdID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYWxjLmxlbmd0aCA9PT0gNCAmJiB0eXBlb2YgY2FsY1sxXSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgY2FsYy5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcGxheVN0cmluZy5sZW5ndGggPCAxMCkge1xyXG4gICAgICAgICAgZGlzcGxheVN0cmluZyArPSBpbnB1dDtcclxuICAgICAgICAgIGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50ID0gZGlzcGxheVN0cmluZztcclxuICAgICAgICAgIGRpc3BsYXlFeHByZXNzaW9uICs9IGlucHV0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2FsYy5sZW5ndGggPT09IDQpIHtcclxuICAgICAgY29uc3QgeCA9IG9wZXJhdGUoY2FsY1swXSwgY2FsY1sxXSwgY2FsY1syXSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhclVJKCkge1xyXG4gIGNvbnN0IGNoaWxkcmVuID0gWy4uLmNvbnRhaW5lci5jaGlsZHJlbl07XHJcbiAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgIGNoaWxkLnJlbW92ZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgeyByZW5kZXJDYWxjdWxhdG9yIH07XHJcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MsIGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzIH0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBjbG9zZVNpZGViYXIgfSBmcm9tIFwiLi9oZWFkZXJcIjtcclxuXHJcbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5sZXQgc3RhcnRpbmdNaW51dGVzID0gMjU7XHJcbmxldCB0aW1lID0gc3RhcnRpbmdNaW51dGVzICogNjA7XHJcbmxldCBjb3VudCA9IDA7XHJcblxyXG5mdW5jdGlvbiBnZXRQb21vZG9ybygpIHtcclxuICBjbG9zZVNpZGViYXIoKTtcclxuICBjbGVhclVJKCk7XHJcblxyXG4gIGNvbnN0IHRpdGxlID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXCJoMlwiLCBcInBvbW9kb3JvX190aXRsZVwiLCBcIlBvbW9kb3JvXCIpO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuICAgIFxyXG4gICAgY29uc3QgcG9tb2Rvcm9Db250YWluZXIgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwicG9tb2Rvcm9fX2NvbnRhaW5lclwiKTtcclxuICAgIGNvbnN0IHBvbW9kb3JvID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInBvbW9kb3JvXCIpO1xyXG4gICAgY29uc3QgdGltZXIgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcInNwYW5cIiwgXCJwb21vZG9yb19fdGltZXJcIiwgXCIyNTowMFwiKTtcclxuICAgIHRpbWVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGltZXJcIik7XHJcbiAgICBwb21vZG9yby5hcHBlbmRDaGlsZCh0aW1lcik7XHJcbiAgICBwb21vZG9yb0NvbnRhaW5lci5hcHBlbmRDaGlsZChwb21vZG9ybyk7XHJcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwicG9tb2Rvcm9fX2J1dHRvbnNcIik7XHJcbiAgICBjb25zdCBzdGFydEJ0biA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFwiYnV0dG9uXCIsIFwicG9tb2Rvcm9fX2J1dHRvblwiLCBcIlN0YXJ0XCIpO1xyXG4gICAgY29uc3Qgc3RvcEJ0biA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFxyXG4gICAgICBcImJ1dHRvblwiLFxyXG4gICAgICBcInBvbW9kb3JvX19idXR0b25cIixcclxuICAgICAgXCJTdG9wXCJcclxuICAgICk7XHJcbiAgICBzdG9wQnRuLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic3RvcFwiKTtcclxuICAgIGNvbnN0IHJlc2V0QnRuID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICAgIFwiYnV0dG9uXCIsXHJcbiAgICAgIFwicG9tb2Rvcm9fX2J1dHRvblwiLFxyXG4gICAgICBcIlJlc2V0XCJcclxuICAgICk7XHJcbiAgICByZXNldEJ0bi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInJlc2V0XCIpO1xyXG4gICAgc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0VGltZSk7XHJcbiAgICByZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVzZXRUaW1lKTtcclxuICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzdGFydEJ0bik7XHJcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoc3RvcEJ0bik7XHJcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocmVzZXRCdG4pO1xyXG4gICAgcG9tb2Rvcm9Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwb21vZG9yb0NvbnRhaW5lcik7XHJcbiAgICBcclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc3RhcnRUaW1lKCkge1xyXG4gICAgY29uc3QgcG9tb2Rvcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvbW9kb3JvXCIpO1xyXG4gICAgY29uc3QgdGltZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVyXCIpO1xyXG4gICAgY29uc3Qgc3RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcFwiKTtcclxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBtaW51dGVzTGVmdCA9IE1hdGguZmxvb3IodGltZSAvIDYwKTtcclxuICAgICAgICBtaW51dGVzTGVmdCA8IDEwXHJcbiAgICAgICAgICA/IChtaW51dGVzTGVmdCA9IGAwYCArIG1pbnV0ZXNMZWZ0KVxyXG4gICAgICAgICAgOiAobWludXRlc0xlZnQgPSBtaW51dGVzTGVmdCk7XHJcbiAgICAgICAgbGV0IHNlY29uZHMgPSB0aW1lICUgNjA7XHJcbiAgICAgICAgc2Vjb25kcyA8IDEwID8gKHNlY29uZHMgPSBgMGAgKyBzZWNvbmRzKSA6IChzZWNvbmRzID0gc2Vjb25kcyk7XHJcbiAgICAgICAgdGltZXIudGV4dENvbnRlbnQgPSBgJHttaW51dGVzTGVmdH06JHtzZWNvbmRzfWA7XHJcbiAgICAgICAgaWYgKG1pbnV0ZXNMZWZ0IDwgMSAmJiBzZWNvbmRzIDwgMSkge1xyXG4gICAgICAgICAgICBzdG9wVGltZXIoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgc3RhcnRpbmdNaW51dGVzID0gNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0aW5nTWludXRlcyA9IDI1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgICAgIHN0YXJ0aW5nTWludXRlcyA9PT0gNVxyXG4gICAgICAgICAgICAgID8gcG9tb2Rvcm8uY2xhc3NMaXN0LmFkZChcImVuZFwiKVxyXG4gICAgICAgICAgICAgIDogcG9tb2Rvcm8uY2xhc3NMaXN0LnJlbW92ZShcImVuZFwiKTtcclxuICAgICAgICAgICAgdGltZSA9IHN0YXJ0aW5nTWludXRlcyAqIDYwO1xyXG4gICAgICAgICAgICBsZXQgbWludXRlc0xlZnQgPSBNYXRoLmZsb29yKHRpbWUgLyA2MCk7XHJcbiAgICAgICAgICAgIGxldCBzZWNvbmRzID0gdGltZSAlIDYwO1xyXG4gICAgICAgICAgICBtaW51dGVzTGVmdCA8IDEwXHJcbiAgICAgICAgICAgICAgPyAobWludXRlc0xlZnQgPSBgMCR7bWludXRlc0xlZnR9YClcclxuICAgICAgICAgICAgICA6IChtaW51dGVzTGVmdCA9IG1pbnV0ZXNMZWZ0KTtcclxuICAgICAgICAgICAgc2Vjb25kcyA8IDEwID8gKHNlY29uZHMgPSBgMCR7c2Vjb25kc31gKSA6IChzZWNvbmRzID0gc2Vjb25kcyk7XHJcbiAgICAgICAgICAgIHRpbWVyLnRleHRDb250ZW50ID0gYCR7bWludXRlc0xlZnR9OiR7c2Vjb25kc31gO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aW1lLS07XHJcbiAgICB9LCAxMDAwKTtcclxuICAgIFxyXG4gICAgc3RvcC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHN0b3BUaW1lcihpbnRlcnZhbCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHN0b3BUaW1lcihpbnRlcnZhbCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0VGltZSgpIHtcclxuICAgIGNvbnN0IHRpbWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lclwiKTtcclxuICAgIGNvbnN0IHBvbW9kb3JvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb21vZG9yb1wiKTtcclxuICAgIHN0YXJ0aW5nTWludXRlcyA9PT0gNVxyXG4gICAgICA/IHBvbW9kb3JvLmNsYXNzTGlzdC5hZGQoXCJlbmRcIilcclxuICAgICAgOiBwb21vZG9yby5jbGFzc0xpc3QucmVtb3ZlKFwiZW5kXCIpO1xyXG4gICAgaWYgKHN0YXJ0aW5nTWludXRlcyAhPT0gNSkge1xyXG4gICAgICAgIHN0YXJ0aW5nTWludXRlcyA9IDI1O1xyXG4gICAgfVxyXG4gICAgdGltZSA9IHN0YXJ0aW5nTWludXRlcyAqIDYwO1xyXG4gICAgbGV0IG1pbnV0ZXNMZWZ0ID0gTWF0aC5mbG9vcih0aW1lIC8gNjApO1xyXG4gICAgbGV0IHNlY29uZHMgPSB0aW1lICUgNjA7XHJcbiAgICBtaW51dGVzTGVmdCA8IDEwID8gbWludXRlc0xlZnQgPSBgMCR7bWludXRlc0xlZnR9YCA6IG1pbnV0ZXNMZWZ0ID0gbWludXRlc0xlZnQ7XHJcbiAgICBzZWNvbmRzIDwgMTAgPyBzZWNvbmRzID0gYDAke3NlY29uZHN9YCA6IHNlY29uZHMgPSBzZWNvbmRzO1xyXG4gICAgdGltZXIudGV4dENvbnRlbnQgPSBgJHttaW51dGVzTGVmdH06JHtzZWNvbmRzfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVUkoKSB7XHJcbiAgY29uc3QgY2hpbGRyZW4gPSBbLi4uY29udGFpbmVyLmNoaWxkcmVuXTtcclxuICBjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgY2hpbGQucmVtb3ZlKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGdldFBvbW9kb3JvIH07XHJcbiIsImltcG9ydCB7IGF1dGggfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgdXBkYXRlUHJvZmlsZSB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCI7XHJcbmltcG9ydCB7IGdldFVzZXJuYW1lIH0gZnJvbSBcIi4vYXV0aFwiO1xyXG5cclxuXHJcbmNvbnN0IHNldHRpbmdzID0ge307XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlTZXR0aW5ncygpIHtcclxuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNldHRpbmdzXCI+XHJcbiAgPGZvcm0gYWN0aW9uPVwiXCIgY2xhc3M9XCJzZXR0aW5nc19fZm9ybVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInNldHRpbmdzX193cmFwcGVyXCI+XHJcbiAgICAgIDxsYWJlbCBmb3I9XCJpbWFnZVwiIGNsYXNzPVwic2V0dGluZ3NfX2xhYmVsXCI+UHJvZmlsZSBQaWN0dXJlOjwvbGFiZWw+XHJcbiAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cImltZ1NyY1wiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCIgYWNjZXB0PVwiaW1hZ2UvcG5nLCBpbWFnZS9qcGVnXCI+XHJcbiAgICA8L2Rpdj5cclxuICAgICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NfX3dyYXBwZXJcIj5cclxuICAgICAgIDxsYWJlbCBmb3I9XCJkYXJrbW9kZVwiIGNsYXNzPVwic2V0dGluZ3NfX2xhYmVsXCI+RGFyayBNb2RlOjwvbGFiZWw+XHJcbiAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCIgbmFtZT1cImRhcmttb2RlXCIgY2hlY2tlZCB2YWx1ZT1cIk9mZlwiPlxyXG4gICAgPGxhYmVsIGZvcj1cImRhcmttb2RlXCIgY2xhc3M9XCJzZXR0aW5nc19fbGFiZWxcIj5PZmY8L2xhYmVsPlxyXG4gICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCIgbmFtZT1cImRhcmttb2RlXCIgdmFsdWU9XCJPblwiPlxyXG4gICAgPGxhYmVsIGZvcj1cImRhcmttb2RlXCIgY2xhc3M9XCJzZXR0aW5nc19fbGFiZWxcIj5PbjwvbGFiZWw+XHJcbiAgICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NfX3dyYXBwZXJcIj5cclxuICAgICAgPGxhYmVsIGZvcj1cImFjY2VudFwiIGNsYXNzPVwic2V0dGluZ3NfX2xhYmVsXCI+QWNjZW50IENvbG9yOjwvbGFiZWw+XHJcbiAgICA8aW5wdXQgdHlwZT1cImNvbG9yXCIgaWQ9XCJjb2xvclwiIHZhbHVlPVwiI2ZmMDAwMFwiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCI+XHJcbiAgICA8L2Rpdj5cclxuICAgIFxyXG4gICAgXHJcbiAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cInNldHRpbmdzX19idXR0b25cIj5TYXZlIENoYW5nZXM8L2J1dHRvbj5cclxuICA8L2Zvcm0+XHJcbjwvZGl2PlxyXG4gICAgYDtcclxuICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldHRpbmdzX19idXR0b25cIik7XHJcbiAgICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZXR0aW5nc0V2ZW50cyk7XHJcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltZ1NyY1wiKTtcclxuICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHJlYWRVcmwpO1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dGluZ3NFdmVudHMoZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcclxuICBjb25zdCBhY2NlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbG9yXCIpLnZhbHVlO1xyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldHRpbmdzX19mb3JtXCIpO1xyXG4gICAgY29uc3QgZGFya01vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbbmFtZT0nZGFya21vZGUnXTpjaGVja2VkXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgcHJvZmlsZVBpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZVwiKTtcclxuICAgIFxyXG4gICAgLy8gaWYgKGltZykge1xyXG4gICAgLy8gICAgIHNldHRpbmdzLmltZyA9IGltZztcclxuICAgIC8vIH1cclxuICAgIGlmIChhY2NlbnQpIHtcclxuICAgICAgICBzZXR0aW5ncy5hY2NlbnQgPSBhY2NlbnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoZGFya01vZGUpIHtcclxuICAgICAgICBzZXR0aW5ncy5kYXJrTW9kZSA9IGRhcmtNb2RlO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlU2V0dGluZ3MoKTtcclxuICAgIGFkZERvY3VtZW50KGRhcmtNb2RlLCBhY2NlbnQpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBhZGREb2N1bWVudChkYXJrbW9kZSwgYWNjZW50KSB7XHJcbiAgICBjb25zdCByZWYgPSBkb2MoZGIsIGAke2dldFVzZXJuYW1lKCl9dGFza3NgLCBzZXR0aW5ncyk7XHJcbiAgICBhd2FpdCBzZXREb2MocmVmLCB7XHJcbiAgICAgIGRhcmtNb2RlOiBkYXJrbW9kZSxcclxuICAgICAgYWNjZW50OiBhY2NlbnQsXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFVybCgpe1xyXG4gICAgY29uc3QgcHJvZmlsZVBpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZVwiKTtcclxuICAgIC8vY29uc3QgcHJvZmlsZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19pbWFnZVwiKTtcclxuICAgIGlmICh0aGlzLmZpbGVzKSB7XHJcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgcHJvZmlsZVBpYy5zcmMgPSByZWFkZXIucmVzdWx0O1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgICAvL3VwZGF0ZVByb2ZpbGUoYXV0aC5jdXJyZW50VXNlciwgeyBwaG90b1VSTDogcmVhZGVyLnJlc3VsdCB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVNldHRpbmdzKCkge1xyXG4gICAgaWYgKHNldHRpbmdzLmRhcmtNb2RlID09PSBcIk9uXCIpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJkYXJrXCIpO1xyXG4gICAgICAgIC8vZm9ybXNcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2NvbnRhaW5lclwiKS5jbGFzc0xpc3QuYWRkKFwiYmxhY2tcIik7XHJcbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXIyXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluYm94XCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lc3NhZ2VfX2NvbnRhaW5lclwiKS5jbGFzc0xpc3QuYWRkKFwiYmxhY2tcIik7XHJcbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlc2NyaXB0aW9uXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgIH1cclxuICAgIFxyXG4gIC8vc2F2ZSBzZXR0aW5ncyBvYmplY3QgdG8gZmlyZWJhc2VcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcmVJbWFnZSgpIHtcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgeyBkaXNwbGF5U2V0dGluZ3MgfTsiLCJpbXBvcnQgeyBzb3J0VG9kb3NCeVByb2plY3QsIHNob3dBbGxUYXNrcywgc29ydFRvZG9zQnlUYXNrLCBnZXRJbmJveCB9IGZyb20gXCIuL3RvZG8uanNcIjtcclxuaW1wb3J0IHsgc2hvd0luYm94IH0gZnJvbSBcIi4vaW5ib3guanNcIjtcclxuaW1wb3J0IHsgcmVuZGVyQ2FsY3VsYXRvciB9IGZyb20gXCIuL2NhbGN1bGF0b3IuanNcIjtcclxuaW1wb3J0IHsgZ2V0UG9tb2Rvcm8gfSBmcm9tIFwiLi9wb21vZG9yby5qc1wiO1xyXG5pbXBvcnQgeyBkaXNwbGF5U2V0dGluZ3MgfSBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xyXG5pbXBvcnQgeyBjbG9zZVNpZGViYXIgfSBmcm9tIFwiLi9oZWFkZXIuanNcIjtcclxuaW1wb3J0IHsgcmVuZGVyRGFzaGJvYXJkIH0gZnJvbSBcIi4vZGFzaGJvYXJkLmpzXCI7XHJcblxyXG5cclxuY29uc3Qgc2lkZWJhckRpdnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaWRlYmFyX19saW5rXCIpXTtcclxuY29uc3Qgd29ya0xpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndvcmtcIik7XHJcbmNvbnN0IGhvbWVMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJob21lXCIpO1xyXG5jb25zdCBtaXNjTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWlzY2VsbGFuZW91c1wiKTtcclxuXHJcbmZ1bmN0aW9uIGFkZFNpZGViYXJFdmVudHMoKSB7XHJcblx0Y29uc3QgYWxsVGFza3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsbFwiKTtcclxuXHRjb25zdCB0b2RheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kYXlcIik7XHJcblx0Y29uc3QgdXBjb21pbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVwY29taW5nXCIpO1xyXG5cdGNvbnN0IG92ZXJkdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm92ZXJkdWVcIik7XHJcblxyXG5cdGFsbFRhc2tzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93QWxsVGFza3MpO1xyXG5cdHRvZGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0VG9kb3NCeVRhc2spO1xyXG5cdHVwY29taW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0VG9kb3NCeVRhc2spO1xyXG5cdG92ZXJkdWUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRUb2Rvc0J5VGFzayk7XHJcblxyXG5cdHdvcmtMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0VG9kb3NCeVByb2plY3QpO1xyXG5cdGhvbWVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0VG9kb3NCeVByb2plY3QpO1xyXG5cdG1pc2NMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0VG9kb3NCeVByb2plY3QpO1xyXG5cclxuXHRjb25zdCBpbmJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5ib3hcIik7XHJcblx0aW5ib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGdldEluYm94KTtcclxuXHJcblx0Y29uc3QgY2FsY3VsYXRvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FsY3VsYXRvclwiKTtcclxuXHRjYWxjdWxhdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW5kZXJDYWxjdWxhdG9yKTtcclxuXHJcblx0Y29uc3QgcG9tb2Rvcm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvbW9kb3JvXCIpO1xyXG5cdHBvbW9kb3JvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXRQb21vZG9ybyk7XHJcblxyXG5cdC8vIGNvbnN0IHNldHRpbmdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZXR0aW5nc1wiKTtcclxuXHQvLyBzZXR0aW5ncy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGlzcGxheVNldHRpbmdzKTtcclxuXHJcblx0Y29uc3QgZGFzaGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXNoYm9hcmRcIik7XHJcblx0ZGFzaGJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHQvLyBjbG9zZVNpZGViYXIoKTtcclxuXHRcdHJlbmRlckRhc2hib2FyZCgpO1xyXG5cdH0pO1xyXG5cclxuXHRzaWRlYmFyRGl2cy5tYXAoKGRpdikgPT4ge1xyXG4gICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgIG9wZW5TdWJNZW51KGUpO1xyXG5cdH0pO1xyXG59KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblN1Yk1lbnUoZSkge1xyXG4gICAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19kaXNwbGF5XCIpO1xyXG5cdGRpc3BsYXkudGV4dENvbnRlbnQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pZDtcclxuXHRyZW1vdmVBY3RpdmVMaW5rcyhlKTtcclxuXHRjbG9zZVN1Yk1lbnVzKCk7XHJcblx0aWYgKGUuY3VycmVudFRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcpIHtcclxuXHRcdGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG5cdFx0ZS5jdXJyZW50VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1N1YlwiKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVBY3RpdmVMaW5rcygpIHtcclxuXHRzaWRlYmFyRGl2cy5tYXAoKGRpdikgPT4ge1xyXG5cdFx0ZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlU3ViTWVudXMoKSB7XHJcblx0Y29uc3Qgc3VibWVudXMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaWRlYmFyX19zdWJsaW5rc1wiKV07XHJcblx0c3VibWVudXMubWFwKChtZW51KSA9PiB7XHJcblx0XHRpZiAobWVudS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93U3ViXCIpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG1lbnUuY2xhc3NMaXN0LnJlbW92ZShcInNob3dTdWJcIik7XHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGFkZFNpZGViYXJFdmVudHN9O1xyXG4iLCJpbXBvcnQgXCIuL3N0eWxlcy9zdHlsZS5zY3NzXCI7XHJcbmltcG9ydCB7IGFkZFNpZGViYXJFdmVudHMgfSBmcm9tIFwiLi9zY3JpcHRzL3NpZGViYXIuanNcIjtcclxuaW1wb3J0IHsgYWRkSGVhZGVyRXZlbnRzIH0gZnJvbSBcIi4vc2NyaXB0cy9oZWFkZXIuanNcIjtcclxuaW1wb3J0IHsgcmVuZGVyTW9kYWwgfSBmcm9tIFwiLi9zY3JpcHRzL21vZGFsLmpzXCI7XHJcbmltcG9ydCB7IGFkZEJ1dHRvbkV2ZW50cyB9IGZyb20gXCIuL3NjcmlwdHMvbW9kYWwuanNcIjtcclxuaW1wb3J0IHsgZGFzaGJvYXJkIH0gZnJvbSBcIi4vc2NyaXB0cy9hdXRoXCI7XHJcbmltcG9ydCB7IGdldEF1dGgsIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCI7XHJcbmltcG9ydCB7IGFkZEF1dGhFdmVudHMsIHNob3dMb2dpbiB9IGZyb20gXCIuL3NjcmlwdHMvYXV0aFwiO1xyXG5cclxuXHJcbi8vaW5pdCBmaXJlYmFzZSBhcHBcclxuXHJcbi8vaW5pdCBzZXJ2aWNlc1xyXG5jb25zdCBhdXRoID0gZ2V0QXV0aCgpO1xyXG5cclxuLy9jb2xsZWN0aW9uIHJlZmVyZW5jZVxyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzaG93TG9naW4oKSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIC8vYWRkQXV0aEV2ZW50cygpO1xyXG4gIGFkZFNpZGViYXJFdmVudHMoKTtcclxuICBhZGRIZWFkZXJFdmVudHMoKTtcclxuICAvLyBjb25zdCBtb2RhbCA9IHJlbmRlck1vZGFsKCk7XHJcbiAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XHJcbiAgICBhZGRCdXR0b25FdmVudHMoKTtcclxufSk7XHJcblxyXG4vL2FyZ3VtZW50cyBlbWFpbCBhbmQgcGFzc3dvcmRcclxuLy9wYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nXHJcbi8vZmluZCBvdXQgYWJvdXQgZmlyZWJhc2UgZGlzcGxheU5hbWVcclxuXHJcbmV4cG9ydCB7IGF1dGggfTtcclxuIl0sIm5hbWVzIjpbImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJwcm9jZXNzIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwic2V0VGltZW91dCIsImUiLCJjYWxsIiwidGhpcyIsImNsZWFyVGltZW91dCIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwiZHJhaW5pbmciLCJxdWV1ZUluZGV4IiwiY2xlYW5VcE5leHRUaWNrIiwibGVuZ3RoIiwiY29uY2F0IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJsZW4iLCJydW4iLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJub29wIiwibmV4dFRpY2siLCJhcmdzIiwiQXJyYXkiLCJhcmd1bWVudHMiLCJpIiwicHVzaCIsInByb3RvdHlwZSIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsIm5hbWUiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwid2luZG93Iiwib2JqIiwicHJvcCIsImhhc093blByb3BlcnR5Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicmVwbGFjZSIsInAiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJpc0FycmF5IiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsInN0ciIsIm91dCIsImMiLCJjaGFyQ29kZUF0Iiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWZlcnJlZCIsImNvbnN0cnVjdG9yIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJQcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJlcnJvciIsInZhbHVlIiwiY2F0Y2giLCJuYXZpZ2F0b3IiLCJpc01vYmlsZUNvcmRvdmEiLCJ0ZXN0IiwiaXNCcm93c2VyRXh0ZW5zaW9uIiwicnVudGltZSIsImNocm9tZSIsImlkIiwiaXNSZWFjdE5hdGl2ZSIsImlzSUUiLCJ1YSIsImluZGV4T2YiLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJjdXN0b21EYXRhIiwic3VwZXIiLCJzZXRQcm90b3R5cGVPZiIsImNhcHR1cmVTdGFja1RyYWNlIiwiRXJyb3JGYWN0b3J5IiwiY3JlYXRlIiwic2VydmljZSIsInNlcnZpY2VOYW1lIiwiZXJyb3JzIiwiZGF0YSIsImZ1bGxDb2RlIiwidGVtcGxhdGUiLCJQQVRURVJOIiwiXyIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiYSIsImIiLCJhS2V5cyIsImtleXMiLCJiS2V5cyIsImsiLCJpbmNsdWRlcyIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwicXVlcnlzdHJpbmdQYXJhbXMiLCJwYXJhbXMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImFycmF5VmFsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicXVlcnlzdHJpbmdEZWNvZGUiLCJxdWVyeXN0cmluZyIsInNwbGl0IiwidG9rZW4iLCJkZWNvZGVVUklDb21wb25lbnQiLCJleHRyYWN0UXVlcnlzdHJpbmciLCJ1cmwiLCJxdWVyeVN0YXJ0IiwiZnJhZ21lbnRTdGFydCIsInN1YnN0cmluZyIsIk9ic2VydmVyUHJveHkiLCJleGVjdXRvciIsIm9uTm9PYnNlcnZlcnMiLCJvYnNlcnZlcnMiLCJ1bnN1YnNjcmliZXMiLCJvYnNlcnZlckNvdW50IiwidGFzayIsImZpbmFsaXplZCIsInRoZW4iLCJuZXh0IiwiZm9yRWFjaE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJjbG9zZSIsImNvbXBsZXRlIiwic3Vic2NyaWJlIiwibmV4dE9yT2JzZXJ2ZXIiLCJtZXRob2RzIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJ1bnN1YiIsInVuc3Vic2NyaWJlT25lIiwiYmluZCIsImZpbmFsRXJyb3IiLCJmbiIsInNlbmRPbmUiLCJjb25zb2xlIiwiZXJyIiwiX2RlbGVnYXRlIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwidHlwZSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInNldEluc3RhbnRpYXRpb25Nb2RlIiwibW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIkRFRkFVTFRfRU5UUllfTkFNRSIsIlByb3ZpZGVyIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwiaW5zdGFuY2VzIiwiTWFwIiwiaW5zdGFuY2VzRGVmZXJyZWQiLCJpbnN0YW5jZXNPcHRpb25zIiwib25Jbml0Q2FsbGJhY2tzIiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwiX2EiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsImFzeW5jIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwibWFwIiwiSU5URVJOQUwiLCJfZGVsZXRlIiwiaXNDb21wb25lbnRTZXQiLCJnZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImFkZCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJsb2dMZXZlbCIsIm5vdyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIkxvZ2dlciIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwiX3VzZXJMb2dIYW5kbGVyIiwidmFsIiwiVHlwZUVycm9yIiwic2V0TG9nTGV2ZWwiLCJsb2dIYW5kbGVyIiwidXNlckxvZ0hhbmRsZXIiLCJkZWJ1ZyIsImxvZyIsImluZm8iLCJ3YXJuIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhcHAiLCJfcmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiRVJST1JfRkFDVE9SWSIsIkZpcmViYXNlQXBwSW1wbCIsImNvbmZpZyIsIl9pc0RlbGV0ZWQiLCJfb3B0aW9ucyIsImFzc2lnbiIsIl9jb25maWciLCJfbmFtZSIsIl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJfY29udGFpbmVyIiwiY2hlY2tEZXN0cm95ZWQiLCJpc0RlbGV0ZWQiLCJhcHBOYW1lIiwiU0RLX1ZFUlNJT04iLCJnZXRBcHAiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnlNaXNtYXRjaCIsIm1hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIl9fcmVzdCIsInMiLCJ0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJwcm9kRXJyb3JNYXAiLCJfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkiLCJsb2dDbGllbnQiLCJfbG9nRXJyb3IiLCJtc2ciLCJfZmFpbCIsImF1dGhPckNvZGUiLCJyZXN0IiwiY3JlYXRlRXJyb3JJbnRlcm5hbCIsIl9jcmVhdGVFcnJvciIsImZ1bGxQYXJhbXMiLCJzbGljZSIsIl9lcnJvckZhY3RvcnkiLCJfYXNzZXJ0IiwiYXNzZXJ0aW9uIiwiZGVidWdGYWlsIiwiZmFpbHVyZSIsImRlYnVnQXNzZXJ0IiwiaW5zdGFuY2VDYWNoZSIsIl9nZXRJbnN0YW5jZSIsImNscyIsIl9nZXRDdXJyZW50VXJsIiwic2VsZiIsImhyZWYiLCJfZ2V0Q3VycmVudFNjaGVtZSIsInByb3RvY29sIiwiRGVsYXkiLCJzaG9ydERlbGF5IiwibG9uZ0RlbGF5IiwiaXNNb2JpbGUiLCJvbkxpbmUiLCJNYXRoIiwibWluIiwiX2VtdWxhdG9yVXJsIiwicGF0aCIsImVtdWxhdG9yIiwic3RhcnRzV2l0aCIsIkZldGNoUHJvdmlkZXIiLCJzdGF0aWMiLCJmZXRjaEltcGwiLCJoZWFkZXJzSW1wbCIsInJlc3BvbnNlSW1wbCIsImZldGNoIiwiSGVhZGVycyIsIlJlc3BvbnNlIiwiU0VSVkVSX0VSUk9SX01BUCIsIkRFRkFVTFRfQVBJX1RJTUVPVVRfTVMiLCJfYWRkVGlkSWZOZWNlc3NhcnkiLCJhdXRoIiwicmVxdWVzdCIsInRlbmFudElkIiwiX3BlcmZvcm1BcGlSZXF1ZXN0IiwiY3VzdG9tRXJyb3JNYXAiLCJfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmciLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInF1ZXJ5IiwiYXBpS2V5IiwiaGVhZGVycyIsIl9nZXRBZGRpdGlvbmFsSGVhZGVycyIsImxhbmd1YWdlQ29kZSIsIl9nZXRGaW5hbFRhcmdldCIsImFwaUhvc3QiLCJyZWZlcnJlclBvbGljeSIsImZldGNoRm4iLCJfY2FuSW5pdEVtdWxhdG9yIiwiZXJyb3JNYXAiLCJuZXR3b3JrVGltZW91dCIsIk5ldHdvcmtUaW1lb3V0IiwicmVzcG9uc2UiLCJyYWNlIiwiY2xlYXJOZXR3b3JrVGltZW91dCIsImpzb24iLCJfbWFrZVRhZ2dlZEVycm9yIiwib2siLCJlcnJvck1lc3NhZ2UiLCJzZXJ2ZXJFcnJvckNvZGUiLCJzZXJ2ZXJFcnJvck1lc3NhZ2UiLCJhdXRoRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsIl9lcnJvcldpdGhDdXN0b21NZXNzYWdlIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJob3N0IiwiYmFzZSIsImFwaVNjaGVtZSIsInRpbWVyIiwiZXJyb3JQYXJhbXMiLCJlbWFpbCIsInBob25lTnVtYmVyIiwiX3Rva2VuUmVzcG9uc2UiLCJ1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmciLCJ1dGNUaW1lc3RhbXAiLCJkYXRlIiwiTnVtYmVyIiwiaXNOYU4iLCJnZXRUaW1lIiwidG9VVENTdHJpbmciLCJzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMiLCJzZWNvbmRzIiwiX3BhcnNlVG9rZW4iLCJhbGdvcml0aG0iLCJwYXlsb2FkIiwic2lnbmF0dXJlIiwiZGVjb2RlZCIsImJhc2U2NERlY29kZSIsInBhcnNlIiwiX2xvZ291dElmSW52YWxpZGF0ZWQiLCJ1c2VyIiwiYnlwYXNzQXV0aFN0YXRlIiwiaXNVc2VySW52YWxpZGF0ZWQiLCJjdXJyZW50VXNlciIsInNpZ25PdXQiLCJQcm9hY3RpdmVSZWZyZXNoIiwiaXNSdW5uaW5nIiwidGltZXJJZCIsImVycm9yQmFja29mZiIsIl9zdGFydCIsInNjaGVkdWxlIiwiX3N0b3AiLCJnZXRJbnRlcnZhbCIsIndhc0Vycm9yIiwiaW50ZXJ2YWwiLCJzdHNUb2tlbk1hbmFnZXIiLCJleHBpcmF0aW9uVGltZSIsIm1heCIsIml0ZXJhdGlvbiIsImdldElkVG9rZW4iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwiX2NvcHkiLCJtZXRhZGF0YSIsInRvSlNPTiIsIl9yZWxvYWRXaXRob3V0U2F2aW5nIiwiaWRUb2tlbiIsImdldEFjY291bnRJbmZvIiwidXNlcnMiLCJjb3JlQWNjb3VudCIsIl9ub3RpZnlSZWxvYWRMaXN0ZW5lciIsIm5ld1Byb3ZpZGVyRGF0YSIsInByb3ZpZGVyVXNlckluZm8iLCJwcm92aWRlcklkIiwidWlkIiwicmF3SWQiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicGhvdG9VcmwiLCJwcm92aWRlckRhdGEiLCJvcmlnaW5hbCIsIm5ld0RhdGEiLCJzb21lIiwibiIsIm9sZElzQW5vbnltb3VzIiwiaXNBbm9ueW1vdXMiLCJuZXdJc0Fub255bW91cyIsInBhc3N3b3JkSGFzaCIsInVwZGF0ZXMiLCJsb2NhbElkIiwiZW1haWxWZXJpZmllZCIsIlN0c1Rva2VuTWFuYWdlciIsInJlZnJlc2hUb2tlbiIsImFjY2Vzc1Rva2VuIiwiaXNFeHBpcmVkIiwidXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlIiwiZXhwaXJlc0luIiwicGFyc2VkVG9rZW4iLCJleHAiLCJpYXQiLCJfdG9rZW5FeHBpcmVzSW4iLCJ1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uIiwiZm9yY2VSZWZyZXNoIiwicmVmcmVzaCIsImNsZWFyUmVmcmVzaFRva2VuIiwib2xkVG9rZW4iLCJ0b2tlbkFwaUhvc3QiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2luIiwicmVmcmVzaF90b2tlbiIsInJlcXVlc3RTdHNUb2tlbiIsImV4cGlyZXNJblNlYyIsIm9iamVjdCIsIm1hbmFnZXIiLCJfYXNzaWduIiwiX2Nsb25lIiwiX3BlcmZvcm1SZWZyZXNoIiwiYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQiLCJVc2VySW1wbCIsIm9wdCIsInByb2FjdGl2ZVJlZnJlc2giLCJyZWxvYWRVc2VySW5mbyIsInJlbG9hZExpc3RlbmVyIiwiZ2V0VG9rZW4iLCJfcGVyc2lzdFVzZXJJZkN1cnJlbnQiLCJfbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50IiwiZ2V0SWRUb2tlblJlc3VsdCIsInVzZXJJbnRlcm5hbCIsImNsYWltcyIsImF1dGhfdGltZSIsImZpcmViYXNlIiwic2lnbkluUHJvdmlkZXIiLCJhdXRoVGltZSIsImlzc3VlZEF0VGltZSIsInNpZ25JblNlY29uZEZhY3RvciIsInJlbG9hZCIsInVzZXJJbmZvIiwiX29uUmVsb2FkIiwiX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCIsIl9zdG9wUHJvYWN0aXZlUmVmcmVzaCIsInRva2Vuc1JlZnJlc2hlZCIsImRlbGV0ZUFjY291bnQiLCJfcmVkaXJlY3RFdmVudElkIiwiX2IiLCJfYyIsIl9kIiwiX2UiLCJfZiIsIl9nIiwiX2giLCJwbGFpbk9iamVjdFRva2VuTWFuYWdlciIsImZyb21KU09OIiwiaWRUb2tlblJlc3BvbnNlIiwiSW5NZW1vcnlQZXJzaXN0ZW5jZSIsInN0b3JhZ2UiLCJfYWRkTGlzdGVuZXIiLCJfa2V5IiwiX2xpc3RlbmVyIiwiX3JlbW92ZUxpc3RlbmVyIiwiaW5NZW1vcnlQZXJzaXN0ZW5jZSIsIl9wZXJzaXN0ZW5jZUtleU5hbWUiLCJQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIiwicGVyc2lzdGVuY2UiLCJ1c2VyS2V5IiwiZnVsbFVzZXJLZXkiLCJmdWxsUGVyc2lzdGVuY2VLZXkiLCJib3VuZEV2ZW50SGFuZGxlciIsIl9vblN0b3JhZ2VFdmVudCIsInNldEN1cnJlbnRVc2VyIiwiX3NldCIsImJsb2IiLCJfZ2V0IiwiX2Zyb21KU09OIiwicmVtb3ZlQ3VycmVudFVzZXIiLCJfcmVtb3ZlIiwic2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QiLCJuZXdQZXJzaXN0ZW5jZSIsImdldEN1cnJlbnRVc2VyIiwicGVyc2lzdGVuY2VIaWVyYXJjaHkiLCJhdmFpbGFibGVQZXJzaXN0ZW5jZXMiLCJfaXNBdmFpbGFibGUiLCJzZWxlY3RlZFBlcnNpc3RlbmNlIiwidXNlclRvTWlncmF0ZSIsIm1pZ3JhdGlvbkhpZXJhcmNoeSIsIl9zaG91bGRBbGxvd01pZ3JhdGlvbiIsIl9nZXRCcm93c2VyTmFtZSIsInVzZXJBZ2VudCIsIl9pc0lFTW9iaWxlIiwiX2lzRmlyZWZveCIsIl9pc0JsYWNrQmVycnkiLCJfaXNXZWJPUyIsIl9pc1NhZmFyaSIsIl9pc0Nocm9tZUlPUyIsIl9pc0FuZHJvaWQiLCJyZSIsIm1hdGNoZXMiLCJfaXNJT1MiLCJfaXNNb2JpbGVCcm93c2VyIiwiX2dldENsaWVudFZlcnNpb24iLCJjbGllbnRQbGF0Zm9ybSIsImZyYW1ld29ya3MiLCJyZXBvcnRlZFBsYXRmb3JtIiwiQXV0aEltcGwiLCJlbXVsYXRvckNvbmZpZyIsIm9wZXJhdGlvbnMiLCJhdXRoU3RhdGVTdWJzY3JpcHRpb24iLCJTdWJzY3JpcHRpb24iLCJpZFRva2VuU3Vic2NyaXB0aW9uIiwicmVkaXJlY3RVc2VyIiwiaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCIsIl9pc0luaXRpYWxpemVkIiwiX2RlbGV0ZWQiLCJfaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiX3BvcHVwUmVkaXJlY3RSZXNvbHZlciIsImxhc3ROb3RpZmllZFVpZCIsInNldHRpbmdzIiwiYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nIiwiY2xpZW50VmVyc2lvbiIsInNka0NsaWVudFZlcnNpb24iLCJfaW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZSIsInBvcHVwUmVkaXJlY3RSZXNvbHZlciIsInBlcnNpc3RlbmNlTWFuYWdlciIsIl9zaG91bGRJbml0UHJvYWN0aXZlbHkiLCJfaW5pdGlhbGl6ZSIsImluaXRpYWxpemVDdXJyZW50VXNlciIsImFzc2VydGVkUGVyc2lzdGVuY2UiLCJfY3VycmVudFVzZXIiLCJfdXBkYXRlQ3VycmVudFVzZXIiLCJzdG9yZWRVc2VyIiwiYXV0aERvbWFpbiIsImdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIiwicmVkaXJlY3RVc2VyRXZlbnRJZCIsInN0b3JlZFVzZXJFdmVudElkIiwicmVzdWx0IiwidHJ5UmVkaXJlY3RTaWduSW4iLCJkaXJlY3RseVNldEN1cnJlbnRVc2VyIiwicmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyIiwicmVkaXJlY3RSZXNvbHZlciIsIl9jb21wbGV0ZVJlZGlyZWN0Rm4iLCJfc2V0UmVkaXJlY3RVc2VyIiwidXNlRGV2aWNlTGFuZ3VhZ2UiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVzZXJFeHRlcm4iLCJub3RpZnlBdXRoTGlzdGVuZXJzIiwicmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJzZXRQZXJzaXN0ZW5jZSIsIl9nZXRQZXJzaXN0ZW5jZSIsIl91cGRhdGVFcnJvck1hcCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsImNvbXBsZXRlZCIsInJlZ2lzdGVyU3RhdGVMaXN0ZW5lciIsIm9uSWRUb2tlbkNoYW5nZWQiLCJyZWRpcmVjdE1hbmFnZXIiLCJyZXNvbHZlciIsIl9yZWRpcmVjdFBlcnNpc3RlbmNlIiwiY3VycmVudFVpZCIsInN1YnNjcmlwdGlvbiIsImNiIiwiYWRkT2JzZXJ2ZXIiLCJhY3Rpb24iLCJfbG9nRnJhbWV3b3JrIiwiZnJhbWV3b3JrIiwic29ydCIsIl9nZXRGcmFtZXdvcmtzIiwiYXBwSWQiLCJfY2FzdEF1dGgiLCJwcm94eSIsImNyZWF0ZVN1YnNjcmliZSIsIkF1dGhDcmVkZW50aWFsIiwic2lnbkluTWV0aG9kIiwiX2dldElkVG9rZW5SZXNwb25zZSIsIl9hdXRoIiwiX2xpbmtUb0lkVG9rZW4iLCJfaWRUb2tlbiIsIl9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIiLCJFbWFpbEF1dGhDcmVkZW50aWFsIiwiX2VtYWlsIiwiX3Bhc3N3b3JkIiwiX3RlbmFudElkIiwicGFzc3dvcmQiLCJvb2JDb2RlIiwiX2Zyb21FbWFpbEFuZFBhc3N3b3JkIiwiX2Zyb21FbWFpbEFuZENvZGUiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJyZXR1cm5TZWN1cmVUb2tlbiIsInNpZ25JbldpdGhFbWFpbExpbmskMSIsInVwZGF0ZUVtYWlsUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyIsInNpZ25JbldpdGhJZHAiLCJPQXV0aENyZWRlbnRpYWwiLCJwZW5kaW5nVG9rZW4iLCJjcmVkIiwibm9uY2UiLCJvYXV0aFRva2VuIiwib2F1dGhUb2tlblNlY3JldCIsInNlY3JldCIsImJ1aWxkUmVxdWVzdCIsImF1dG9DcmVhdGUiLCJyZXF1ZXN0VXJpIiwicG9zdEJvZHkiLCJWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfIiwiUGhvbmVBdXRoQ3JlZGVudGlhbCIsInZlcmlmaWNhdGlvbklkIiwidmVyaWZpY2F0aW9uQ29kZSIsInRlbXBvcmFyeVByb29mIiwic2lnbkluV2l0aFBob25lTnVtYmVyJDEiLCJfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QiLCJsaW5rV2l0aFBob25lTnVtYmVyJDEiLCJvcGVyYXRpb24iLCJ2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nIiwic2Vzc2lvbkluZm8iLCJBY3Rpb25Db2RlVVJMIiwiYWN0aW9uTGluayIsInNlYXJjaFBhcmFtcyIsInBhcnNlTW9kZSIsImNvbnRpbnVlVXJsIiwibGluayIsImRvdWJsZURlZXBMaW5rIiwiaU9TRGVlcExpbmsiLCJwYXJzZURlZXBMaW5rIiwiRW1haWxBdXRoUHJvdmlkZXIiLCJQUk9WSURFUl9JRCIsImVtYWlsTGluayIsImFjdGlvbkNvZGVVcmwiLCJwYXJzZUxpbmsiLCJFTUFJTF9QQVNTV09SRF9TSUdOX0lOX01FVEhPRCIsIkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QiLCJGZWRlcmF0ZWRBdXRoUHJvdmlkZXIiLCJkZWZhdWx0TGFuZ3VhZ2VDb2RlIiwiY3VzdG9tUGFyYW1ldGVycyIsInNldERlZmF1bHRMYW5ndWFnZSIsInNldEN1c3RvbVBhcmFtZXRlcnMiLCJjdXN0b21PQXV0aFBhcmFtZXRlcnMiLCJnZXRDdXN0b21QYXJhbWV0ZXJzIiwiQmFzZU9BdXRoUHJvdmlkZXIiLCJzY29wZXMiLCJhZGRTY29wZSIsInNjb3BlIiwiZ2V0U2NvcGVzIiwiRmFjZWJvb2tBdXRoUHJvdmlkZXIiLCJfZnJvbVBhcmFtcyIsIkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EIiwidXNlckNyZWRlbnRpYWwiLCJjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCIsInRva2VuUmVzcG9uc2UiLCJvYXV0aEFjY2Vzc1Rva2VuIiwiY3JlZGVudGlhbCIsIkdvb2dsZUF1dGhQcm92aWRlciIsIkdPT0dMRV9TSUdOX0lOX01FVEhPRCIsIm9hdXRoSWRUb2tlbiIsIkdpdGh1YkF1dGhQcm92aWRlciIsIkdJVEhVQl9TSUdOX0lOX01FVEhPRCIsIlR3aXR0ZXJBdXRoUHJvdmlkZXIiLCJUV0lUVEVSX1NJR05fSU5fTUVUSE9EIiwiVXNlckNyZWRlbnRpYWxJbXBsIiwib3BlcmF0aW9uVHlwZSIsIl9mcm9tSWRUb2tlblJlc3BvbnNlIiwicHJvdmlkZXJJZEZvclJlc3BvbnNlIiwiX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5IiwiTXVsdGlGYWN0b3JFcnJvciIsIl9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeSIsIl9mcm9tRXJyb3JBbmRPcGVyYXRpb24iLCJfc2lnbkluV2l0aENyZWRlbnRpYWwiLCJXZWFrTWFwIiwiU1RPUkFHRV9BVkFJTEFCTEVfS0VZIiwiQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3MiLCJzdG9yYWdlUmV0cmlldmVyIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwiQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJsb2NhbFN0b3JhZ2UiLCJldmVudCIsInBvbGwiLCJvblN0b3JhZ2VFdmVudCIsImxvY2FsQ2FjaGUiLCJwb2xsVGltZXIiLCJzYWZhcmlMb2NhbFN0b3JhZ2VOb3RTeW5jZWQiLCJfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UiLCJ0b3AiLCJfaXNJZnJhbWUiLCJmYWxsYmFja1RvUG9sbGluZyIsImZvckFsbENoYW5nZWRLZXlzIiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsIl9vbGRWYWx1ZSIsIm5vdGlmeUxpc3RlbmVycyIsImRldGFjaExpc3RlbmVyIiwic3RvcFBvbGxpbmciLCJzdG9yZWRWYWx1ZSIsInRyaWdnZXJMaXN0ZW5lcnMiLCJkb2N1bWVudE1vZGUiLCJsaXN0ZW5lciIsInN0YXJ0UG9sbGluZyIsInNldEludGVydmFsIiwiU3RvcmFnZUV2ZW50IiwiY2xlYXJJbnRlcnZhbCIsImF0dGFjaExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzaXplIiwiYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIiwic2Vzc2lvblN0b3JhZ2UiLCJicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIiwiUmVjZWl2ZXIiLCJldmVudFRhcmdldCIsImhhbmRsZXJzTWFwIiwiaGFuZGxlRXZlbnQiLCJyZWNlaXZlcnMiLCJmaW5kIiwicmVjZWl2ZXIiLCJpc0xpc3RlbmluZ3RvIiwibmV3SW5zdGFuY2UiLCJtZXNzYWdlRXZlbnQiLCJldmVudElkIiwiZXZlbnRUeXBlIiwiaGFuZGxlcnMiLCJwb3J0cyIsInBvc3RNZXNzYWdlIiwic3RhdHVzIiwicHJvbWlzZXMiLCJoYW5kbGVyIiwib3JpZ2luIiwiZnVsZmlsbGVkIiwicmVhc29uIiwiX2FsbFNldHRsZWQiLCJfc3Vic2NyaWJlIiwiZXZlbnRIYW5kbGVyIiwiX3Vuc3Vic2NyaWJlIiwiX2dlbmVyYXRlRXZlbnRJZCIsInByZWZpeCIsImRpZ2l0cyIsInJhbmRvbSIsImZsb29yIiwiU2VuZGVyIiwidGFyZ2V0IiwicmVtb3ZlTWVzc2FnZUhhbmRsZXIiLCJtZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25NZXNzYWdlIiwiTWVzc2FnZUNoYW5uZWwiLCJjb21wbGV0aW9uVGltZXIiLCJzdGFydCIsImFja1RpbWVyIiwicG9ydDIiLCJmaW5hbGx5IiwiX3dpbmRvdyIsIl9pc1dvcmtlciIsIkRCX05BTUUiLCJEQl9PQkpFQ1RTVE9SRV9OQU1FIiwiREJfREFUQV9LRVlQQVRIIiwiREJQcm9taXNlIiwidG9Qcm9taXNlIiwiZ2V0T2JqZWN0U3RvcmUiLCJkYiIsImlzUmVhZFdyaXRlIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsIl9vcGVuRGF0YWJhc2UiLCJpbmRleGVkREIiLCJvcGVuIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwiZGVsZXRlRGF0YWJhc2UiLCJfZGVsZXRlRGF0YWJhc2UiLCJfcHV0T2JqZWN0IiwicHV0IiwiX2RlbGV0ZU9iamVjdCIsIkluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UiLCJwZW5kaW5nV3JpdGVzIiwic2VuZGVyIiwic2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlIiwiYWN0aXZlU2VydmljZVdvcmtlciIsIl93b3JrZXJJbml0aWFsaXphdGlvblByb21pc2UiLCJpbml0aWFsaXplU2VydmljZVdvcmtlck1lc3NhZ2luZyIsIm9wIiwibnVtQXR0ZW1wdHMiLCJfb3BlbkRiIiwiaW5pdGlhbGl6ZVJlY2VpdmVyIiwiaW5pdGlhbGl6ZVNlbmRlciIsIl9vcmlnaW4iLCJrZXlQcm9jZXNzZWQiLCJfcG9sbCIsIl9kYXRhIiwic2VydmljZVdvcmtlciIsInJlYWR5IiwiYWN0aXZlIiwiX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJyZXN1bHRzIiwiX3NlbmQiLCJjb250cm9sbGVyIiwid3JpdGUiLCJfd2l0aFBlbmRpbmdXcml0ZSIsIl93aXRoUmV0cmllcyIsIm5vdGlmeVNlcnZpY2VXb3JrZXIiLCJnZXRPYmplY3QiLCJnZXRBbGxSZXF1ZXN0IiwiZ2V0QWxsIiwia2V5c0luUmVzdWx0IiwiZmJhc2Vfa2V5IiwibG9jYWxLZXkiLCJpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwiX2dlbmVyYXRlQ2FsbGJhY2tOYW1lIiwiUGhvbmVBdXRoUHJvdmlkZXIiLCJ2ZXJpZnlQaG9uZU51bWJlciIsInBob25lT3B0aW9ucyIsImFwcGxpY2F0aW9uVmVyaWZpZXIiLCJ2ZXJpZmllciIsInJlY2FwdGNoYVRva2VuIiwidmVyaWZ5IiwicGhvbmVJbmZvT3B0aW9ucyIsInNlc3Npb24iLCJzdGFydEVucm9sbFBob25lTWZhIiwicGhvbmVFbnJvbGxtZW50SW5mbyIsInBob25lU2Vzc2lvbkluZm8iLCJtZmFFbnJvbGxtZW50SWQiLCJtdWx0aUZhY3RvckhpbnQiLCJtdWx0aUZhY3RvclVpZCIsInN0YXJ0U2lnbkluUGhvbmVNZmEiLCJtZmFQZW5kaW5nQ3JlZGVudGlhbCIsInBob25lU2lnbkluSW5mbyIsInBob25lUmVzcG9uc2VJbmZvIiwic2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZSIsIl9yZXNldCIsIl92ZXJpZnlQaG9uZU51bWJlciIsIl9mcm9tVmVyaWZpY2F0aW9uIiwiX2Zyb21Ub2tlblJlc3BvbnNlIiwiUEhPTkVfU0lHTl9JTl9NRVRIT0QiLCJJZHBDcmVkZW50aWFsIiwiX2J1aWxkSWRwUmVxdWVzdCIsInNlc3Npb25JZCIsInJldHVybklkcENyZWRlbnRpYWwiLCJfc2lnbkluIiwiX3JlYXV0aCIsInBhcnNlZCIsInN1YiIsIl9mb3JPcGVyYXRpb24iLCJfcmVhdXRoZW50aWNhdGUiLCJfbGluayIsIl9saW5rJDEiLCJBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24iLCJwZW5kaW5nUHJvbWlzZSIsImV2ZW50TWFuYWdlciIsImV4ZWN1dGUiLCJvbkV4ZWN1dGlvbiIsInJlZ2lzdGVyQ29uc3VtZXIiLCJ1cmxSZXNwb25zZSIsImdldElkcFRhc2siLCJvbkVycm9yIiwidW5yZWdpc3RlckFuZENsZWFuVXAiLCJ1bnJlZ2lzdGVyQ29uc3VtZXIiLCJjbGVhblVwIiwiX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQiLCJQb3B1cE9wZXJhdGlvbiIsImF1dGhXaW5kb3ciLCJwb2xsSWQiLCJjdXJyZW50UG9wdXBBY3Rpb24iLCJjYW5jZWwiLCJfb3BlblBvcHVwIiwiYXNzb2NpYXRlZEV2ZW50IiwiX29yaWdpblZhbGlkYXRpb24iLCJfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkIiwiaXNTdXBwb3J0ZWQiLCJwb2xsVXNlckNhbmNlbGxhdGlvbiIsImNsb3NlZCIsInJlZGlyZWN0T3V0Y29tZU1hcCIsIlJlZGlyZWN0QWN0aW9uIiwicmVhZHlPdXRjb21lIiwiaGFzUGVuZGluZ1JlZGlyZWN0IiwicGVuZGluZ1JlZGlyZWN0S2V5IiwicmVzb2x2ZXJQZXJzaXN0ZW5jZSIsIl9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsIm9uQXV0aEV2ZW50IiwiX3JlZGlyZWN0VXNlckZvcklkIiwiX2dldFJlZGlyZWN0UmVzdWx0IiwicmVzb2x2ZXJFeHRlcm4iLCJhdXRoSW50ZXJuYWwiLCJyZXNvbHZlck92ZXJyaWRlIiwiX3dpdGhEZWZhdWx0UmVzb2x2ZXIiLCJBdXRoRXZlbnRNYW5hZ2VyIiwiY2FjaGVkRXZlbnRVaWRzIiwiY29uc3VtZXJzIiwicXVldWVkUmVkaXJlY3RFdmVudCIsImhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCIsImxhc3RQcm9jZXNzZWRFdmVudFRpbWUiLCJhdXRoRXZlbnRDb25zdW1lciIsImlzRXZlbnRGb3JDb25zdW1lciIsInNlbmRUb0NvbnN1bWVyIiwic2F2ZUV2ZW50VG9DYWNoZSIsIm9uRXZlbnQiLCJoYXNFdmVudEJlZW5IYW5kbGVkIiwiaGFuZGxlZCIsImNvbnN1bWVyIiwiaXNOdWxsUmVkaXJlY3RFdmVudCIsImlzUmVkaXJlY3RFdmVudCIsImV2ZW50SWRNYXRjaGVzIiwiY2xlYXIiLCJldmVudFVpZCIsInYiLCJJUF9BRERSRVNTX1JFR0VYIiwiSFRUUF9SRUdFWCIsIm1hdGNoRG9tYWluIiwiZXhwZWN0ZWQiLCJjdXJyZW50VXJsIiwiaG9zdG5hbWUiLCJVUkwiLCJjZVVybCIsImVzY2FwZWREb21haW5QYXR0ZXJuIiwiUmVnRXhwIiwiTkVUV09SS19USU1FT1VUIiwicmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzIiwiYmVhY29uIiwiX19fanNsIiwiSCIsImhpbnQiLCJyIiwiTCIsIkNQIiwiY2FjaGVkR0FwaUxvYWRlciIsIl9sb2FkR2FwaSIsImxvYWRHYXBpSWZyYW1lIiwiZ2FwaSIsImxvYWQiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIm9udGltZW91dCIsIklmcmFtZSIsImNiTmFtZSIsImVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJjaGFyc2V0IiwiYXBwZW5kQ2hpbGQiLCJsb2FkR2FwaSIsIlBJTkdfVElNRU9VVCIsIklGUkFNRV9BVFRSSUJVVEVTIiwic3R5bGUiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwidGFiaW5kZXgiLCJFSURfRlJPTV9BUElIT1NUIiwiZ2V0SWZyYW1lVXJsIiwiZWlkIiwiZnciLCJCQVNFX1BPUFVQX09QVElPTlMiLCJyZXNpemFibGUiLCJzdGF0dXNiYXIiLCJ0b29sYmFyIiwiQXV0aFBvcHVwIiwiX2dldFJlZGlyZWN0VXJsIiwiYXV0aFR5cGUiLCJyZWRpcmVjdFVybCIsImFkZGl0aW9uYWxQYXJhbXMiLCJpc0VtcHR5IiwidGlkIiwicGFyYW1zRGljdCIsImdldEhhbmRsZXJCYXNlIiwiV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkiLCJicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIiwiZXZlbnRNYW5hZ2VycyIsIm9yaWdpblZhbGlkYXRpb25Qcm9taXNlcyIsInNjcmVlbiIsImF2YWlsSGVpZ2h0IiwidG9TdHJpbmciLCJsZWZ0IiwiYXZhaWxXaWR0aCIsInNjcm9sbGJhcnMiLCJvcHRpb25zU3RyaW5nIiwicmVkdWNlIiwiYWNjdW0iLCJzdGFuZGFsb25lIiwiX2lzSU9TU3RhbmRhbG9uZSIsImNsaWNrIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJvcGVuQXNOZXdXaW5kb3dJT1MiLCJuZXdXaW4iLCJmb2N1cyIsIl9vcGVuIiwiaW5pdEFuZEdldE1hbmFnZXIiLCJpZnJhbWUiLCJjb250ZXh0Iiwid2hlcmUiLCJtZXNzYWdlSGFuZGxlcnNGaWx0ZXIiLCJDUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIiLCJhdHRyaWJ1dGVzIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJzZW5kIiwiYXV0aG9yaXplZERvbWFpbnMiLCJfZ2V0UHJvamVjdENvbmZpZyIsImRvbWFpbiIsIl92YWxpZGF0ZU9yaWdpbiIsIkF1dGhJbnRlcm9wIiwiaW50ZXJuYWxMaXN0ZW5lcnMiLCJnZXRVaWQiLCJhc3NlcnRBdXRoQ29uZmlndXJlZCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwidW5zdWJzY3JpYmUiLCJ1cGRhdGVQcm9hY3RpdmVSZWZyZXNoIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJnZXRUb2RheXNEYXRlIiwiY3VycmVudERhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsImdldE1vbnRoIiwiZGF5IiwiZ2V0RGF0ZSIsInRvZ2dsZU1vZGFsIiwibW9kYWwiLCJxdWVyeVNlbGVjdG9yIiwiZm9ybSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlc2V0IiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsImNsYXNzTmFtZSIsImNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzIiwidGV4dCIsInRleHRDb250ZW50IiwiY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGUiLCJhdHRyIiwiYXR0ck5hbWUiLCJyZW5kZXJUb2RvIiwiZGVzY3JpcHRpb24iLCJwcmlvcml0eSIsInByb2plY3QiLCJ0b2RvX19jb250YWluZXIiLCJ0b2RvIiwidG9kb19fZGF0ZSIsImRhdGUxIiwidG9kb19fcHJvamVjdCIsInRvZG9fX2NvbnRlbnQiLCJ0b2RvX190aXRsZSIsInRvZG9fX3ByaW9yaXR5IiwicHJpb3JpdHkxIiwidG9kb19fYnV0dG9ucyIsInRvZG9fX21vcmUiLCJtb3JlQnRuIiwic2hvd0RldGFpbHMiLCJ0b2RvX19lZGl0IiwiZWRpdEJ0biIsImVkaXRUb2RvIiwidG9kb19fZGVsZXRlIiwiZGVsZXRlQnRuIiwiZGVsZXRlVG9kb1VJIiwiYXBwZW5kIiwidG9kb19fZGV0YWlscyIsInRvZG9fX2Rlc2NyaXB0aW9uIiwidG9kb19fZnVsbHRpdGxlIiwiY3VycmVudFRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0b2RvcyIsInJlbW92ZUNoaWxkIiwiZGF0YXNldCIsImluZGV4Iiwic3BsaWNlIiwicmVmIiwiZmlyZXN0b3JlIiwiYXN5bmNRdWV1ZSIsImVucXVldWVBbmRGb3JnZXQiLCJRbyIsImRvY3MiLCJmcm9tQ2FjaGUiLCJqIiwiVU5BVkFJTEFCTEUiLCJzb3VyY2UiLCJIbyIsInllIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIndvIiwiam8iLCJmaCIsIiR1IiwieHUiLCJoYXNQZW5kaW5nV3JpdGVzIiwiY29udmVydGVyIiwiYmgiLCJleGlzdHMiLCJSaCIsImxuIiwiWWUiLCJub25lIiwiZGVsZXRlRG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRvZG8yIiwiZ2V0VG9kb0J5SWQiLCJlbGVtZW50cyIsIm5hbWVkSXRlbSIsImR1ZURhdGUiLCJ1cGRhdGVCdG4iLCJyZW1vdmUiLCJkaXNwbGF5IiwidXBkYXRlVG9kb1VJIiwibWlzYyIsImhvbWUiLCJ3b3JrIiwidXBkYXRlVG9kbyIsImRlcHMiLCJhdXRoSW5zdGFuY2UiLCJoaWVyYXJjaHkiLCJfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZSIsIl9pbnN0YW5jZUlkZW50aWZpZXIiLCJfaW5zdGFuY2UiLCJnZXRWZXJzaW9uRm9yUGxhdGZvcm0iLCJjbGVhclByb2plY3RzVUkiLCJjaGlsZHJlbiIsImNoaWxkIiwicmVuZGVyVGFza3NIZWFkZXIiLCJ0YXNrSWQiLCJ0YXNrVGl0bGUiLCJyZW5kZXJUYXNrc1VJIiwidGFza3MiLCJjb3VudCIsInNob3dJbmJveCIsImNsZWFySW5ib3hVSSIsImluYm94Iiwic3ViamVjdCIsInRyYXNoQnRuIiwidHJhc2hJY29uIiwiZGVsZXRlTWVzc2FnZSIsImNoZWNrYm94IiwiY3JlYXRlSW5wdXRFbGVtZW50IiwibWVzc2FnZVN1YmplY3QiLCJtZXNzYWdlVGl0bGUiLCJtZXNzYWdlUHJpb3JpdHkiLCJtZXNzYWdlRHVlRGF0ZSIsIm1lc3NhZ2VEZXNjcmlwdGlvbiIsImJhY2tUb0luYm94IiwiZ2V0SW5ib3giLCJ1cGRhdGVJbmJveENvdW50IiwidXBkYXRlRG9jdW1lbnQiLCJzaG93TWVzc2FnZSIsImRlbGV0ZUFsbCIsImtpZHMiLCJjaGVja2VkIiwiZGVsZXRlU2VsZWN0ZWQiLCJkZWxldGVJbmJveE1lc3NhZ2UiLCJiYWNrZ3JvdW5kIiwiY291bnRVSSIsImFkZFVzZXJOYW1lIiwiY2xvc2VTaWRlYmFyIiwic2lkZWJhciIsInVwbG9hZFBpYyIsInJlYWRVcmwiLCJwcm9maWxlUGljIiwicHJvZmlsZUNvbnRhaW5lciIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJyZW5kZXJEYXNoYm9hcmQiLCJpbm5lckhUTUwiLCJnZXRBbGxEYXRhIiwiZ2V0TnVtVGFza3MiLCJ1bnJlYWQiLCJnZXRVcGNvbWluZ1Rhc2tzIiwib3ZlcmR1ZSIsImdldE92ZXJkdWVUYXNrcyIsInRvZGF5IiwiZ2V0VG9kYXlzTnVtVGFza3MiLCJkYXNoYm9hcmQiLCJmaXJzdExvZ2luIiwiaGlkZUxvZ2luIiwiaGVhZGVyIiwiYWRkQnRuIiwiY2xlYXJVSSIsInNldExvZ2luU3RhdHVzIiwiY29tbW9uanNHbG9iYWwiLCJlc20iLCJnb29nIiwibCIsImFhIiwiYmEiLCJlYSIsImZhIiwiaGEiLCJpYSIsInVuc2hpZnQiLCJxIiwiamEiLCJaIiwiVmIiLCJmIiwiaCIsImxhIiwibmEiLCJNIiwiZGEiLCJzaGlmdCIsIm1hIiwicWEiLCJyYSIsInNhIiwieCIsInRhIiwidHJpbSIsImV4ZWMiLCJ3IiwidmEiLCJ3YSIsInhhIiwieWEiLCJ6YSIsIkFhIiwiQ2EiLCJOYSIsIkhhIiwieSIsIklhIiwiSmEiLCJLYSIsIkxhIiwiTWEiLCJPYSIsIlBhIiwiUWEiLCJwYXJzZUZsb2F0IiwiU2EiLCJHYSIsIlJhIiwicGFyc2VJbnQiLCJVYSIsIlZhIiwieiIsImRlZmF1bHRQcmV2ZW50ZWQiLCJBIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbiIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic3RhdGUiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiV2EiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiQiIsIlhhIiwiWWEiLCJjYXB0dXJlIiwiY2EiLCJaYSIsIiRhIiwiYmIiLCJhYiIsImZiIiwiZ2IiLCJoYiIsIk4iLCJpYiIsImpiIiwibWIiLCJrYiIsImF0dGFjaEV2ZW50IiwibGIiLCJPIiwibmIiLCJvYiIsImRldGFjaEV2ZW50IiwicGIiLCJDIiwiUCIsIkkiLCJEIiwicWIiLCJyYiIsInNiIiwidGIiLCJBYiIsInZiIiwid2IiLCJ5YiIsInpiIiwiRGIiLCJCYiIsIkNiIiwiRWIiLCJGYiIsIlMiLCJHYiIsIkhiIiwibSIsIkliIiwiRSIsIkpiIiwiS2IiLCJMYiIsIk1iIiwiRiIsIlBiIiwiUmIiLCJTYiIsIlRiIiwiVWIiLCJTVEFUX0VWRU5UIiwic3RhdCIsIkoiLCJLIiwiV2IiLCJOT19FUlJPUiIsInhiIiwiVElNRU9VVCIsIlhiIiwiWWIiLCJaYiIsIiRiIiwiY2MiLCJPUEVOIiwiYWMiLCJiYyIsImRjIiwiWCIsIlYiLCJlYyIsIlciLCJZIiwiJCIsIlUiLCJmYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZ2MiLCJoYyIsImljIiwiamMiLCJrYyIsImxjIiwibWMiLCJuYyIsIkciLCJOYiIsInFjIiwiQmEiLCJ0YyIsInZjIiwic2MiLCJ3YyIsInJjIiwic3Vic3RyIiwieGMiLCJlYiIsInBjIiwidWMiLCJhYm9ydCIsInljIiwiemMiLCJBYyIsIkJjIiwiQ2MiLCJrYSIsIlEiLCJEYSIsIkVhIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJEYyIsIlIiLCJvYSIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiSWMiLCJLYyIsIlQiLCJKYyIsIkxjIiwiZ2EiLCJvYyIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwic3RyZWFtIiwiT2IiLCJRYiIsIk1jIiwiT2MiLCJQYyIsIlFjIiwiUmMiLCJTYyIsIlRjIiwiZGQiLCJaYyIsIlVjIiwiJGMiLCJhYnMiLCJkZWNvZGVVUkkiLCJlbmNvZGVVUkkiLCJjZCIsIlZjIiwiV2MiLCJYYyIsIlljIiwiTmMiLCJlZCIsImdkIiwiaGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJqZCIsImtkIiwibGQiLCJtZCIsIm9kIiwib25hYm9ydCIsInBkIiwicWQiLCJyZWFkeVN0YXRlIiwicmQiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwidWQiLCJyZWFkIiwidGQiLCJzZCIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJUYSIsIlJlYWRhYmxlU3RyZWFtIiwiZ2V0UmVhZGVyIiwiVWludDhBcnJheSIsImRvbmUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwidmQiLCJ3ZCIsInhkIiwieWQiLCJwYSIsInpkIiwiQ2QiLCJEZCIsIkVkIiwiRmEiLCJBZCIsIm1velJlc3BvbnNlQXJyYXlCdWZmZXIiLCJHZCIsIkZkIiwiSGQiLCJpbnRlcm5hbENoYW5uZWxQYXJhbXMiLCJJZCIsInhtbEh0dHBGYWN0b3J5Iiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImNvbmN1cnJlbnRSZXF1ZXN0TGltaXQiLCJmYXN0SGFuZHNoYWtlIiwiZm9yY2VMb25nUG9sbGluZyIsImRldGVjdEJ1ZmZlcmluZ1Byb3h5IiwiSmQiLCJLZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkxkIiwiTWQiLCJRZCIsIlBkIiwicm91bmQiLCJPZCIsIlJkIiwiTmQiLCJuZCIsImFkIiwiYmQiLCJwb3J0IiwiU2QiLCJUZCIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJodHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtIiwic2VuZFJhd0pzb24iLCJodHRwU2Vzc2lvbklkUGFyYW0iLCJVZCIsIl9fc21fXyIsIlZkIiwidG9VcHBlckNhc2UiLCJGb3JtRGF0YSIsIndpdGhDcmVkZW50aWFscyIsIkJkIiwiX19kYXRhX18iLCJjcmVhdGVXZWJDaGFubmVsIiwiSFRUUF9FUlJPUiIsIkNPTVBMRVRFIiwiRXZlbnRUeXBlIiwiQ0xPU0UiLCJNRVNTQUdFIiwibGlzdGVuIiwibGlzdGVuT25jZSIsImdldExhc3RFcnJvciIsImdldExhc3RFcnJvckNvZGUiLCJnZXRTdGF0dXMiLCJnZXRSZXNwb25zZUpzb24iLCJnZXRSZXNwb25zZVRleHQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiZ2V0U3RhdEV2ZW50VGFyZ2V0IiwiRXJyb3JDb2RlIiwiRXZlbnQiLCJTdGF0IiwidWIiLCJQUk9YWSIsIk5PUFJPWFkiLCJGZXRjaFhtbEh0dHBGYWN0b3J5IiwiV2ViQ2hhbm5lbCIsIlhocklvIiwiaXNBdXRoZW50aWNhdGVkIiwidG9LZXkiLCJpc0VxdWFsIiwiVU5BVVRIRU5USUNBVEVEIiwiR09PR0xFX0NSRURFTlRJQUxTIiwiRklSU1RfUEFSVFkiLCJNT0NLX1VTRVIiLCJPSyIsIkNBTkNFTExFRCIsIlVOS05PV04iLCJJTlZBTElEX0FSR1VNRU5UIiwiREVBRExJTkVfRVhDRUVERUQiLCJOT1RfRk9VTkQiLCJBTFJFQURZX0VYSVNUUyIsIlBFUk1JU1NJT05fREVOSUVEIiwiUkVTT1VSQ0VfRVhIQVVTVEVEIiwiRkFJTEVEX1BSRUNPTkRJVElPTiIsIkFCT1JURUQiLCJPVVRfT0ZfUkFOR0UiLCJVTklNUExFTUVOVEVEIiwiREFUQV9MT1NTIiwiaW52YWxpZGF0ZVRva2VuIiwiZW5xdWV1ZVJldHJ5YWJsZSIsInNodXRkb3duIiwiZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSIsInR0IiwiYXBwQ2hlY2siLCJhZGRUb2tlbkxpc3RlbmVyIiwicmVtb3ZlVG9rZW5MaXN0ZW5lciIsIm50IiwicHJldmlvdXNWYWx1ZSIsInNlcXVlbmNlTnVtYmVySGFuZGxlciIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJzdCIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiaXQiLCJydCIsIm90IiwiZXZlcnkiLCJjdCIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsInRvRGF0ZSIsInRvTWlsbGlzIiwiX2NvbXBhcmVUbyIsInZhbHVlT2YiLCJwYWRTdGFydCIsInV0IiwidGltZXN0YW1wIiwiY29tcGFyZVRvIiwidG9NaWNyb3NlY29uZHMiLCJ0b1RpbWVzdGFtcCIsImh0IiwibHQiLCJmdCIsImR0Iiwic2VnbWVudHMiLCJvZmZzZXQiLCJjb21wYXJhdG9yIiwibGltaXQiLCJjb25zdHJ1Y3QiLCJwb3BGaXJzdCIsInBvcExhc3QiLCJmaXJzdFNlZ21lbnQiLCJsYXN0U2VnbWVudCIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwidG9BcnJheSIsInd0IiwiY2Fub25pY2FsU3RyaW5nIiwiX3QiLCJtdCIsImlzVmFsaWRJZGVudGlmaWVyIiwiaXNLZXlGaWVsZCIsImd0IiwiZmllbGRzIiwiY292ZXJzIiwicHQiLCJiaW5hcnlTdHJpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiVHQiLCJFdCIsIm5hbm9zIiwiSXQiLCJBdCIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlJ0IiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwiYnQiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJQdCIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJ2dCIsIlZ0IiwiRHQiLCJmcm9tU3RyaW5nIiwiaGFzQ29sbGVjdGlvbklkIiwiQ3QiLCJOdCIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsImt0IiwieHQiLCIkdCIsIk90IiwiRnQiLCJmcm9tTmFtZSIsIkx0IiwiQnQiLCJVdCIsInF0IiwiS3QiLCJqdCIsIlF0IiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJlbXB0eVBhdGgiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsIld0IiwiR3QiLCJkb2N1bWVudFR5cGUiLCJkb2N1bWVudFN0YXRlIiwiZW1wdHkiLCJjb252ZXJ0VG9Gb3VuZERvY3VtZW50IiwiY29udmVydFRvTm9Eb2N1bWVudCIsImNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsInNldEhhc0xvY2FsTXV0YXRpb25zIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJpc1ZhbGlkRG9jdW1lbnQiLCJpc0ZvdW5kRG9jdW1lbnQiLCJpc05vRG9jdW1lbnQiLCJpc1Vua25vd25Eb2N1bWVudCIsIm11dGFibGVDb3B5IiwienQiLCJjb2xsZWN0aW9uR3JvdXAiLCJvcmRlckJ5IiwiZmlsdGVycyIsInN0YXJ0QXQiLCJlbmRBdCIsIkh0IiwiSnQiLCJlZSIsImxlIiwiWHQiLCJkZSIsIlp0IiwiaXNEb2N1bWVudEtleSIsInRlIiwibmUiLCJvZSIsImFlIiwiY2UiLCJ1ZSIsInNlIiwiaWUiLCJudWxsVmFsdWUiLCJoZSIsImJlZm9yZSIsImZlIiwid2UiLCJtZSIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsInBlIiwiVGUiLCJSZSIsIkllIiwiRWUiLCJrZXlGaWVsZCIsImJlIiwidmUiLCJWZSIsIlNlIiwiWXQiLCJEZSIsIkNlIiwiTmUiLCJrZSIsInhlIiwiJGUiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIlN0IiwiT2UiLCJGZSIsIkJlIiwiVWUiLCJxZSIsIktlIiwiamUiLCJMZSIsIldlIiwiTWUiLCJRZSIsIkdlIiwiSmUiLCJ0cmFuc2Zvcm1SZXN1bHRzIiwidXBkYXRlVGltZSIsImlzTm9uZSIsIlhlIiwiWmUiLCJ0biIsInVuIiwiZmllbGRUcmFuc2Zvcm1zIiwiYW4iLCJwcmVjb25kaXRpb24iLCJjbiIsImVuIiwiaG4iLCJybiIsIm5uIiwidHJhbnNmb3JtIiwic24iLCJIZSIsImZpZWxkTWFzayIsImRuIiwid24iLCJfbiIsImduIiwieW4iLCJyb290IiwiVG4iLCJFTVBUWSIsImluc2VydCIsImNvcHkiLCJCTEFDSyIsInJpZ2h0IiwibWluS2V5IiwibWF4S2V5IiwiaW5vcmRlclRyYXZlcnNhbCIsInJldmVyc2VUcmF2ZXJzYWwiLCJnZXRJdGVyYXRvciIsInBuIiwiZ2V0SXRlcmF0b3JGcm9tIiwiZ2V0UmV2ZXJzZUl0ZXJhdG9yIiwiZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSIsImlzUmV2ZXJzZSIsIm5vZGVTdGFjayIsImdldE5leHQiLCJwb3AiLCJoYXNOZXh0IiwicGVlayIsImNvbG9yIiwiUkVEIiwiZml4VXAiLCJyZW1vdmVNaW4iLCJpc1JlZCIsIm1vdmVSZWRMZWZ0Iiwicm90YXRlUmlnaHQiLCJtb3ZlUmVkUmlnaHQiLCJyb3RhdGVMZWZ0IiwiY29sb3JGbGlwIiwiY2hlY2tNYXhEZXB0aCIsImNoZWNrIiwicG93IiwiRW4iLCJmaXJzdCIsImxhc3QiLCJmb3JFYWNoSW5SYW5nZSIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiSW4iLCJ1bmlvbldpdGgiLCJpdGVyIiwiQW4iLCJSbiIsImJuIiwiUG4iLCJ2biIsIlNuIiwiRG4iLCJDbiIsIk5uIiwia24iLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJ4biIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiJG4iLCJyZW1vdmVkVGFyZ2V0SWRzIiwiT24iLCJ0YXJnZXRJZCIsIkZuIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJNbiIsIlVuIiwiTG4iLCJldCIsIkJuIiwiYXQiLCJmb3JFYWNoVGFyZ2V0IiwicmVtb3ZlVGFyZ2V0IiwibmV3Tm9Eb2N1bWVudCIsInl0IiwicHVycG9zZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJxbiIsImFzYyIsImRlc2MiLCJLbiIsImluIiwiam4iLCJkYXRhYmFzZUlkIiwiUW4iLCJXbiIsIkduIiwiem4iLCJmcm9tVGltZXN0YW1wIiwiSG4iLCJwcm9qZWN0SWQiLCJkYXRhYmFzZSIsIkpuIiwiUnMiLCJZbiIsIlhuIiwibnMiLCJabiIsImVzIiwic3MiLCJocyIsImRvY3VtZW50cyIsImxzIiwic3RydWN0dXJlZFF1ZXJ5IiwicGFyZW50IiwiY29sbGVjdGlvbklkIiwiYWxsRGVzY2VuZGFudHMiLCJ1bmFyeUZpbHRlciIsInBzIiwiZmllbGRGaWx0ZXIiLCJ5cyIsImNvbXBvc2l0ZUZpbHRlciIsImRpcmVjdGlvbiIsImdzIiwiX3MiLCJmcyIsInRzIiwid3MiLCJUcyIsIm1zIiwiZ2UiLCJJcyIsIkVzIiwiZmllbGRQYXRoIiwiZnJvbVNlcnZlckZvcm1hdCIsIk5hTiIsIkFzIiwiZmllbGRQYXRocyIsImJzIiwidnMiLCJQcyIsIkRzIiwib3duZXJJZCIsImFsbG93VGFiU3luY2hyb25pemF0aW9uIiwibGVhc2VUaW1lc3RhbXBNcyIsInN0b3JlIiwiQ3MiLCJ1c2VySWQiLCJsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCIsImxhc3RTdHJlYW1Ub2tlbiIsIk5zIiwiYmF0Y2hJZCIsImxvY2FsV3JpdGVUaW1lTXMiLCJiYXNlTXV0YXRpb25zIiwibXV0YXRpb25zIiwidXNlck11dGF0aW9uc0luZGV4IiwidXNlck11dGF0aW9uc0tleVBhdGgiLCJrcyIsIlBMQUNFSE9MREVSIiwiT3MiLCJ1bmtub3duRG9jdW1lbnQiLCJub0RvY3VtZW50IiwicmVhZFRpbWUiLCJwYXJlbnRQYXRoIiwicmVhZFRpbWVJbmRleCIsInJlYWRUaW1lSW5kZXhQYXRoIiwiY29sbGVjdGlvblJlYWRUaW1lSW5kZXgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGgiLCJGcyIsImJ5dGVTaXplIiwiTXMiLCJjYW5vbmljYWxJZCIsImxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciIsImxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJxdWVyeVRhcmdldHNJbmRleE5hbWUiLCJxdWVyeVRhcmdldHNLZXlQYXRoIiwiTHMiLCJzZXF1ZW5jZU51bWJlciIsImRvY3VtZW50VGFyZ2V0c0luZGV4IiwiZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCIsIkJzIiwiaGlnaGVzdFRhcmdldElkIiwiaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsInRhcmdldENvdW50IiwiVXMiLCJxcyIsImNsaWVudElkIiwidXBkYXRlVGltZU1zIiwibmV0d29ya0VuYWJsZWQiLCJpbkZvcmVncm91bmQiLCJLcyIsImJ1bmRsZUlkIiwiY3JlYXRlVGltZSIsImpzIiwiYnVuZGxlZFF1ZXJ5IiwienMiLCJuZXh0Q2FsbGJhY2siLCJjYXRjaENhbGxiYWNrIiwiaXNEb25lIiwiY2FsbGJhY2tBdHRhY2hlZCIsIndyYXBGYWlsdXJlIiwid3JhcFN1Y2Nlc3MiLCJ3cmFwVXNlckZ1bmN0aW9uIiwid2FpdEZvciIsIlpzIiwib2kiLCJsb2NhbFdyaXRlVGltZSIsImFwcGx5VG9SZW1vdGVEb2N1bWVudCIsIm11dGF0aW9uUmVzdWx0cyIsImFwcGx5VG9Mb2NhbFZpZXciLCJhcHBseVRvTG9jYWxEb2N1bWVudFNldCIsImFpIiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJjaSIsIndpdGhTZXF1ZW5jZU51bWJlciIsIndpdGhSZXN1bWVUb2tlbiIsIndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwidWkiLCJwaSIsIlBlIiwiQWkiLCJSaSIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRFbnRyaWVzIiwiVmkiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSIsIkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCIsIkRFRkFVTFQiLCJESVNBQkxFRCIsIk9pIiwiVWkiLCJ6aSIsIm1hcEtleUZuIiwiZXF1YWxzRm4iLCJpbm5lciIsInVyIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJnZXRFbnRyeSIsIlZuIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSIsIkFlIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkiLCJuZXdJbnZhbGlkRG9jdW1lbnQiLCJociIsImRvY0NoYW5nZXMiLCJkb2MiLCJsciIsImZyIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFJlbW90ZURvY3VtZW50Q2FjaGUiLCJnZXRUYXJnZXRDYWNoZSIsImdldEluZGV4TWFuYWdlciIsImdldEJ1bmRsZUNhY2hlIiwiY29sbGVjdEdhcmJhZ2UiLCJydW5UcmFuc2FjdGlvbiIsImNvbGxlY3QiLCJ3ciIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJtciIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJwciIsImdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkIiwiRXIiLCJyZWZlcmVuY2VEZWxlZ2F0ZSIsIklyIiwiZ2V0VGFyZ2V0RGF0YSIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiVnIiLCJnZXRCdW5kbGVNZXRhZGF0YSIsInNhdmVCdW5kbGVNZXRhZGF0YSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsIlNyIiwiRHIiLCJhZGRSZWZlcmVuY2UiLCJycyIsInJlbW92ZVJlZmVyZW5jZSIsIm9zIiwiY3MiLCJ1cyIsImNvbnRhaW5zS2V5IiwiQ3IiLCJkcyIsImNoZWNrRW1wdHkiLCJhZGRNdXRhdGlvbkJhdGNoIiwibG9va3VwTXV0YXRpb25CYXRjaCIsImdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQiLCJQT1NJVElWRV9JTkZJTklUWSIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwiTnIiLCJhZGRFbnRyeSIsInJlbW92ZUVudHJ5IiwibmV3Q2hhbmdlQnVmZmVyIiwia3IiLCJnZXRTaXplIiwiY2hhbmdlcyIsImNoYW5nZXNBcHBsaWVkIiwiZ2V0UmVhZFRpbWUiLCJhc3NlcnROb3RBcHBsaWVkIiwiZ2V0RnJvbUNhY2hlIiwiZ2V0QWxsRnJvbUNhY2hlIiwieHIiLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJhbGxvY2F0ZVRhcmdldElkIiwic2V0VGFyZ2V0c01ldGFkYXRhIiwiYWRkVGFyZ2V0RGF0YSIsInVwZGF0ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0cyIsInJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiZ2V0VGFyZ2V0Q291bnQiLCJhZGRNYXRjaGluZ0tleXMiLCJyZW1vdmVNYXRjaGluZ0tleXMiLCIkciIsInN0YXJ0ZWQiLCJzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lciIsInNldE5ldHdvcmtFbmFibGVkIiwiT3IiLCJWcyIsIlNzIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50Iiwib3IiLCJvbkNvbW1pdHRlZExpc3RlbmVycyIsImFkZE9uQ29tbWl0dGVkTGlzdGVuZXIiLCJjdXJyZW50U2VxdWVuY2VOdW1iZXIiLCJGciIsInhzIiwiZnJvbVBhdGgiLCIkcyIsInVwZGF0ZUxpbWJvRG9jdW1lbnQiLCJRciIsImFjdGl2ZVRhcmdldElkcyIsIkdyIiwiVGkiLCJvbmxpbmVTdGF0ZUhhbmRsZXIiLCJhZGRQZW5kaW5nTXV0YXRpb24iLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsInVwZGF0ZVF1ZXJ5U3RhdGUiLCJyZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0IiwiaXNMb2NhbFF1ZXJ5VGFyZ2V0IiwiY2xlYXJRdWVyeVN0YXRlIiwiZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzIiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImhhbmRsZVVzZXJDaGFuZ2UiLCJzZXRPbmxpbmVTdGF0ZSIsIm5vdGlmeUJ1bmRsZUxvYWRlZCIsInpyIiwiRWkiLCJIciIsIklpIiwiYmkiLCJQaSIsInZpIiwiSnIiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiWXIiLCJTaSIsIkRpIiwiQ2kiLCJOaSIsImtpIiwieGkiLCIkaSIsIkZpIiwiWHIiLCJkYXRhYmFzZUluZm8iLCJzc2wiLCJNaSIsIkxpIiwiQmkiLCJxaSIsIktpIiwiamkiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJ1c2VGZXRjaFN0cmVhbXMiLCJRaSIsImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNcyIsInRvIiwiZW8iLCJubyIsIldpIiwiR2kiLCJIaSIsIkppIiwiWWkiLCJYaSIsIlppIiwidHIiLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsImVyIiwic2tpcERlbGF5Iiwic28iLCJuciIsInNyIiwiaXIiLCJhdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciIsInJyIiwiYXIiLCJjciIsImRyIiwiX3IiLCJnciIsInlyIiwiVHIiLCJBciIsIlJyIiwiaW8iLCJ0YXJnZXRDaGFuZ2UiLCJ0YXJnZXRDaGFuZ2VUeXBlIiwiZG9jdW1lbnRDaGFuZ2UiLCJuZXdGb3VuZERvY3VtZW50IiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsImJyIiwiUHIiLCJhZGRUYXJnZXQiLCJsYWJlbHMiLCJ2ciIsInJvIiwic3RyZWFtVG9rZW4iLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwid3JpdGVzIiwidXBkYXRlIiwidXBkYXRlTWFzayIsInVwZGF0ZVRyYW5zZm9ybXMiLCJzZXRUb1NlcnZlclZhbHVlIiwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzIiwicmVtb3ZlQWxsRnJvbUFycmF5IiwiaW5jcmVtZW50IiwiY3VycmVudERvY3VtZW50IiwiYXMiLCJvbyIsImF1dGhDcmVkZW50aWFscyIsImFwcENoZWNrQ3JlZGVudGlhbHMiLCJ0ZXJtaW5hdGUiLCJhbyIsIk1yIiwiTHIiLCJCciIsIlVyIiwicXIiLCJLciIsImpyIiwiY28iLCJsb2NhbFN0b3JlIiwiZGF0YXN0b3JlIiwicmVtb3RlU3luY2VyIiwiV3IiLCJ5byIsImhvIiwidW8iLCJsbyIsImdvIiwibW8iLCIkbyIsImZvIiwiX28iLCJwbyIsIlRvIiwiRW8iLCJJbyIsInJlamVjdExpc3RlbiIsIkFvIiwiYXBwbHlSZW1vdGVFdmVudCIsIlJvIiwiYm8iLCJPbyIsIlBvIiwidm8iLCJWbyIsIlNvIiwiRG8iLCJDbyIsIk5vIiwiYXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJrbyIsIm1uIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJzdG9wIiwiWnIiLCJGbyIsInRhcmdldFRpbWVNcyIsInJlbW92YWxDYWxsYmFjayIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwiTW8iLCJMbyIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiQm8iLCJ0cmFjayIsIlVvIiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiZW1wdHlTZXQiLCJxbyIsIktvIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwib25MaXN0ZW4iLCJ6byIsIm9uVW5saXN0ZW4iLCJXbyIsIkdvIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJzbmFwc2hvdCIsInhvIiwidmlldyIsInJlbW90ZVN0b3JlIiwic2hhcmVkQ2xpZW50U3RhdGUiLCJtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyIsImlzUHJpbWFyeUNsaWVudCIsInRyYWNrUmVtb3ZhbHMiLCJzeW5jaHJvbml6ZVRhYnMiLCJKbyIsIllvIiwiZ2NTY2hlZHVsZXIiLCJYbyIsIlpvIiwiaW5pdGlhbFVzZXIiLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIm11dGVkIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIm9ubGluZUNvbXBvbmVudHMiLCJvZmZsaW5lQ29tcG9uZW50cyIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJnZXRDb25maWd1cmF0aW9uIiwicGVyc2lzdGVuY2VLZXkiLCJpc0RlZmF1bHREYXRhYmFzZSIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJjYWNoZVNpemVCeXRlcyIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJfYXV0aENyZWRlbnRpYWxzIiwiX2FwcENoZWNrQ3JlZGVudGlhbHMiLCJfcGVyc2lzdGVuY2VLZXkiLCJfc2V0dGluZ3MiLCJfc2V0dGluZ3NGcm96ZW4iLCJfZGF0YWJhc2VJZCIsIl9hcHAiLCJfaW5pdGlhbGl6ZWQiLCJfdGVybWluYXRlZCIsIl90ZXJtaW5hdGVUYXNrIiwiX3NldFNldHRpbmdzIiwiY2xpZW50Iiwic2Vzc2lvbkluZGV4IiwiaWFtVG9rZW4iLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwiX3BhdGgiLCJ3aXRoQ29udmVydGVyIiwiX3F1ZXJ5IiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsInN0YWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwidHUiLCJfaW50ZXJuYWxQYXRoIiwibnUiLCJfYnl0ZVN0cmluZyIsInN1IiwiX21ldGhvZE5hbWUiLCJpdSIsImlzRmluaXRlIiwiX2xhdCIsIl9sb25nIiwicnUiLCJvdSIsInRvTXV0YXRpb24iLCJhdSIsImN1IiwidXUiLCJTdSIsIm1ldGhvZE5hbWUiLCJodSIsImx1IiwiZnUiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiYnUiLCJBdSIsIlB1IiwiRHUiLCJkdSIsIl90b0ZpZWxkVHJhbnNmb3JtIiwiSXUiLCJSdSIsImZyb21EYXRlIiwiZ2V0UHJvdG90eXBlT2YiLCJWdSIsInZ1Iiwic2VhcmNoIiwiQ3UiLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsIk51IiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsImt1IiwiX2ZpcmVzdG9yZUltcGwiLCJPdSIsInNlcnZlclRpbWVzdGFtcHMiLCJGdSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsIk11IiwiY29udmVydFRpbWVzdGFtcCIsImNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAiLCJjb252ZXJ0Qnl0ZXMiLCJjb252ZXJ0UmVmZXJlbmNlIiwiY29udmVydEdlb1BvaW50IiwiY29udmVydEFycmF5IiwiY29udmVydE9iamVjdCIsImNvbnZlcnREb2N1bWVudEtleSIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwiaW5pdGlhbGl6ZUFwcCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsIm1lYXN1cmVtZW50SWQiLCJ1c2VybmFtZSIsInF1ZXJ5U25hcHNob3QiLCJCdSIsInJlc2V0SW5ib3hDb3VudCIsIlR1IiwicHUiLCJUb2RvcyIsImdldFRpdGxlIiwic2V0VGl0bGUiLCJnZXREZXNjcmlwdGlvbiIsInNldERlc2NyaXB0aW9uIiwiZ2V0RHVlRGF0ZSIsInNldER1ZURhdGUiLCJnZXRQcmlvcml0eSIsInNldFByaW9yaXR5IiwiZ2V0SWQiLCJnZXRQcm9qZWN0Iiwic2V0UHJvamVjdCIsInNldElkIiwic2V0U3RhdHVzIiwic29ydFRvZG9zQnlQcm9qZWN0Iiwic29ydGVkQnlQcm9qZWN0IiwicHJvamVjdFRpdGxlIiwicmVuZGVyUHJvamVjdEhlYWRlciIsInNvcnRUb2Rvc0J5VGFzayIsInNvcnRlZFRvZG9zIiwic2hvd0FsbFRhc2tzIiwicmVuZGVyQ2FsY3VsYXRvciIsIndyYXBwZXIiLCJjYWxjIiwiZGlzcGxheVN0cmluZyIsImRpc3BsYXlFeHByZXNzaW9uIiwia2V5UHJlc3NlZERpc3BsYXkiLCJleHByZXNzaW9uRGlzcGxheSIsImJ0bk9uZSIsImJ0blR3byIsImJ0blRocmVlIiwiYnRuRm91ciIsImJ0bkZpdmUiLCJidG5TaXgiLCJidG5TZXZlbiIsImJ0bkVpZ2h0IiwiYnRuTmluZSIsImJ0blplcm8iLCJidG5EZWNpbWFsIiwiYnRuQWRkIiwiYnRuU3VidHJhY3QiLCJidG5NdWx0aXBseSIsImJ0bkRpdmlkZSIsImJ0bkVxdWFscyIsImJ0bkNsZWFyIiwiYnRuQmFja3NwYWNlIiwiYnRuTmVnYXRpdmUiLCJvcGVyYXRlIiwibnVtMSIsIm51bTIiLCJzdWJ0cmFjdCIsIm11bHRpcGx5IiwiZGl2aWRlIiwidXBkYXRlciIsInBvcHVsYXRlRGlzcGxheSIsInN0YXJ0aW5nTWludXRlcyIsInRpbWUiLCJnZXRQb21vZG9ybyIsInBvbW9kb3JvQ29udGFpbmVyIiwicG9tb2Rvcm8iLCJidXR0b25Db250YWluZXIiLCJzdGFydEJ0biIsInN0b3BCdG4iLCJyZXNldEJ0biIsInN0YXJ0VGltZSIsInJlc2V0VGltZSIsIm1pbnV0ZXNMZWZ0Iiwic3RvcFRpbWVyIiwic2lkZWJhckRpdnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwid29ya0xpbmsiLCJob21lTGluayIsIm1pc2NMaW5rIiwiaW5pdGlhbGl6ZUF1dGgiLCJnZXRBdXRoIiwic2hvd0xvZ2luIiwiYWRkTG9naW5TY3JlZW4iLCJsb2dpbkNvbnRhaW5lciIsInNpZ251cCIsImxvZ2luIiwiY292ZXIiLCJzaWdudXBGb3JtIiwibG9naW5Gb3JtIiwibG9naW5CdG4iLCJzaWdudXBCdG4iLCJsb2dvdXRCdG4iLCJzaWRlYmFyTG9nb3V0IiwiZGVtbyIsImxvZ291dFVzZXIiLCJzaWduSW5XaXRoQ3JlZGVudGlhbCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnblVwIiwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwicHJvZmlsZVJlcXVlc3QiLCJ1cGRhdGVQcm9maWxlJDEiLCJwYXNzd29yZFByb3ZpZGVyIiwidXBkYXRlUHJvZmlsZSIsImFkZEF1dGhFdmVudHMiLCJhbGxUYXNrcyIsInVwY29taW5nIiwiZGl2IiwibWVudSIsIm9wZW5TdWJNZW51IiwiYWRkU2lkZWJhckV2ZW50cyIsImhhbWJ1cmdlckJ0biIsInVwbG9hZCIsImFkZFByb2ZpbGVQbGFjZWhvbGRlciIsImFkZEhlYWRlckV2ZW50cyIsImNyZWF0ZUJ0biIsImNsb3NlQnRuIiwidGl0bGVFcnJvciIsImRhdGVFcnJvciIsIm5ld1RvZG8iLCJ0b0ZpcmVzdG9yZSIsImFoIiwiYWRkRG9jdW1lbnRDdXN0b21JRCIsInBvcHVsYXRlVG9kbyIsInZhbGlkYXRlRm9ybSIsInByb2plY3RzIiwid2lkZ2V0cyIsInJlbG9hZEFjdGl2ZVBhZ2UiLCJhZGRCdXR0b25FdmVudHMiXSwic291cmNlUm9vdCI6IiJ9