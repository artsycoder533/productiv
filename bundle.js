/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={917:(t,e,n)=>{t.exports=n.p+"6d4b16957e06b7a61672.png"}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})();var s={};(()=>{function t(){const t=new Date;return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}function e(){const t=document.querySelector(".modal"),e=document.querySelector(".modal__form");t.classList.toggle("showModal"),e.reset()}function i(t,e){const n=document.createElement(t);return n.classList.add(e),n}function r(t,e,n){const s=document.createElement(t);return s.classList.add(e),s.textContent=n,s}function o(t,e,n,s){const i=document.createElement(t);return i.className=e,i.setAttribute(n,s),i}function a(t,e,n,s,a,h){const d=i("div","todo__container");d.setAttribute("data-id",h);const f=i("article","todo"),p=i("div","todo__date"),m=r("small","date",n);p.appendChild(m);const g=r("div","todo__project",a);p.appendChild(g),f.appendChild(p);const y=i("div","todo__content"),v=r("div","todo__title",t),w=i("div","todo__priority"),E=r("small","priority",s);"high"===s?E.classList.add("high"):E.classList.add("normal"),w.appendChild(E),y.appendChild(v),y.appendChild(w);const I=i("div","todo__buttons"),b=o("button","todo__more","id","more"),_=i("i","fas");_.classList.add("fa-caret-down"),_.addEventListener("click",c),b.appendChild(_),I.appendChild(b);const T=o("button","todo__edit","id","edit"),S=i("i","fas");S.classList.add("fa-edit"),S.addEventListener("click",l),T.appendChild(S),I.appendChild(T);const k=o("button","todo__delete","id","delete"),C=i("i","fas");C.classList.add("fa-trash-alt"),C.addEventListener("click",u),k.appendChild(C),I.appendChild(k),y.append(I),f.appendChild(y),d.appendChild(f);const A=i("div","todo__details"),N=i("p","description");N.textContent=e;const R=i("p","fulltitle");return R.textContent=t,A.appendChild(R),A.appendChild(N),d.appendChild(A),d}function c(t){t.currentTarget.parentElement.parentElement.parentElement.parentElement.nextElementSibling.classList.toggle("showDetails")}function u(t){const e=document.querySelector(".todos"),n=t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement;var s;e.removeChild(n),s=n.dataset.id,Wf.forEach(((t,e)=>{console.log(t),t.id===s&&(Wf.splice(e,1),console.log("here"),async function(t){const e=uf(Gf,`${Hn()}tasks`,t);(await function(t){t=nf(t,of);const e=nf(t.firestore,hf);return function(t,e,n={}){const s=new ga;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,i){const r=new $d({next:r=>{e.enqueueAndForget((()=>fd(t,o)));const a=r.docs.has(n);!a&&r.fromCache?i.reject(new ma(pa.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&s&&"server"===s.source?i.reject(new ma(pa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(r)},error:t=>i.reject(t)}),o=new yd(Oc(n.path),r,{includeMetadataChanges:!0,wo:!0});return dd(t,o)}(await Wd(t),t.asyncQueue,e,n,s))),s.promise}(df(e),t._key).then((n=>function(t,e,n){const s=n.docs.get(e._key),i=new $f(t);return new qf(t,i,e._key,s,new Vf(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}(e)).exists()&&function(t){Kf(nf(t.firestore,hf),[new wu(t._key,ou.none())])}(e)}(s))}))}function l(t){const n=document.getElementById("form");document.querySelector(".form__heading").textContent="Edit Task";const s=function(t){const e=[];return Wf.forEach((n=>{console.log(typeof n.id,typeof t),n.id==t&&e.push(n)})),e[0]}(t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement.dataset.id);console.log(s),document.querySelector(".modal"),e(),n.elements.namedItem("title").value=s.title,n.elements.namedItem("description").value=s.description,n.elements.namedItem("priority").value=s.priority,n.elements.namedItem("project").value=s.project,n.elements.namedItem("date").value=s.dueDate,document.getElementById("create").classList.add("hide");const i=document.getElementById("update");i.classList.remove("hide"),i.addEventListener("click",(()=>{const t=document.querySelector(".project__title");if(console.log(t),t&&n.elements.namedItem("project").value===t.textContent)return console.log(s),h(s),void e();h(s);const i=document.getElementById("miscellaneous"),r=document.getElementById("home"),o=document.getElementById("work"),a=n.elements.namedItem("title").value,c=n.elements.namedItem("description").value,u=n.elements.namedItem("priority").value,l=n.elements.namedItem("project").value,d=n.elements.namedItem("date").value;"work"===l&&(tp(a,c,d,u,l,s.id,s.status),e(),o.click()),"home"===l&&(tp(a,c,d,u,l,s.id,s.status),e(),r.click()),"miscellaneous"===l&&(tp(a,c,d,u,l,s.id,s.status),e(),i.click())}))}function h(t){const e=document.getElementById("form"),n=e.elements.namedItem("title").value,s=e.elements.namedItem("description").value,i=e.elements.namedItem("priority").value,r=e.elements.namedItem("project").value,o=e.elements.namedItem("date").value;console.log(n,s,i,r,o),document.querySelector(".todo__title").textContent=n,document.querySelector(".description").textContent=s,document.querySelector(".priority").textContent=i,"normal"===i?(document.querySelector(".priority").classList.remove("high"),document.querySelector(".priority").classList.add("normal")):"high"===i&&(document.querySelector(".priority").classList.remove("normal"),document.querySelector(".priority").classList.add("high")),document.querySelector(".todo__date").textContent=o,document.querySelector(".description").textContent=s,console.log(t.id),tp(n,s,o,i,r,t.id,t.status)}n.d(s,{I:()=>gp}),i("section","todos");const d=document.querySelector(".container");function f(){[...d.children].forEach((t=>{t.remove()}))}const p=document.querySelector(".container");function m(t){[...p.children].forEach((t=>{t.remove()}));const e=i("h2","task__title");e.textContent="today"===t?"Due Today":t;const n=document.querySelector(".container"),s=i("section","todos");n.appendChild(e),n.appendChild(s)}function g(t){t.map((t=>{const{title:e,description:n,dueDate:s,priority:i,project:r,id:o}=t,c=document.querySelector(".todos");c.appendChild(a(e,n,s,i,r,o)),p.appendChild(c)}))}let y=0;function v(e){E();const n=document.querySelector(".container"),s=r("h2","inbox__title","Inbox");if(n.appendChild(s),0===e.length){const t=r("p","inbox__status","Your inbox is empty");return n.appendChild(s),n.appendChild(t),n}e.map((e=>{const s=i("div","inbox");s.setAttribute("data-id",e.id);const a=i("p","inbox__subject");e.dueDate===t()?a.textContent="You have a task that's due today":e.dueDate<t()&&(a.textContent="You have a task that's overdue!");const c=o("button","todo__delete","id","delete"),u=i("i","fas");u.classList.add("fa-trash-alt"),c.addEventListener("click",(function(t){w(e.id,t.currentTarget.parentElement)})),c.appendChild(u),"unread"===e.status&&a.classList.add("bold"),"read"===e.status&&a.classList.remove("bold");const l=function(t,e,n,s){const i=document.createElement("input");return i.setAttribute("type","checkbox"),i.setAttribute("name","checkbox"),i.setAttribute("id","checkbox"),i}();l.classList.add("checkbox"),a.addEventListener("click",(function(){!function(t,e,n){E();const s=document.querySelector(".container"),o=i("div","message__container"),a=r("h3","message__subject",e),c=r("p","message__title",t.title),u=r("p","message__priority",t.priority),l=r("p","message__date",t.dueDate),h=r("p","message__description",t.description),d=r("button","inbox__button","Back To Inbox");d.classList.add("button"),d.addEventListener("click",(function(){ep()})),o.appendChild(a),o.appendChild(c),o.appendChild(u),o.appendChild(l),o.appendChild(h),o.appendChild(d),s.appendChild(o),I("subtract"),t.status="read",Jf(t.title,t.description,t.dueDate,t.priority,t.project,String(t.id),t.status),console.log(t)}(e,a.textContent)})),s.appendChild(l),s.appendChild(a),s.appendChild(c),n.appendChild(s)}));const a=r("button","inbox__button","Delete Selected");return a.addEventListener("click",(function(){!function(t){const e=document.querySelector(".container").children;Array.from(e).forEach(((t,e)=>{t.children[0]&&t.children[0].checked&&(w(t.dataset.id,t),t.children[1].classList.contains("bold")&&I("subtract")),ep()}))}()})),n.appendChild(a),n}function w(t,e){document.querySelector(".container"),document.querySelector(".inbox"),e.remove(),function(t){zf.forEach(((e,n)=>{e.id===t&&zf.splice(n,1)}))}(t),ep()}function E(){[...document.querySelector(".container").children].forEach((t=>{t.remove()}))}function I(t){const e=document.getElementById("number"),n=document.getElementById("count");"add"===t?(y++,n.textContent=y,e.classList.add("number")):"subtract"===t&&(y--,y<1?(n.textContent="",e.classList.remove("number")):n.textContent=y)}const b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let e=0;e<t.length;e+=3){const i=t[e],r=e+1<t.length,o=r?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(h=64)),s.push(n[u],n[l],n[h],n[d])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&s+1<t.length&&56320==(64512&t.charCodeAt(s+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++s)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((31&i)<<6|63&r)}else if(i>239&&i<365){const r=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[s++]=String.fromCharCode(55296+(r>>10)),e[s++]=String.fromCharCode(56320+(1023&r))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],r=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==r||null==o||null==a)throw Error();const c=i<<2|r>>4;if(s.push(c),64!==o){const t=r<<4&240|o>>2;if(s.push(t),64!==a){const t=o<<6&192|a;s.push(t)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function T(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function S(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function k(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function C(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function A(){const t=T();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}class N extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,i=this.errors[t],r=i?function(t,e){return t.replace(D,((t,n)=>{const s=e[n];return null!=s?String(s):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${r} (${s}).`;return new N(s,o,n)}}const D=/\{\$([^}]+)}/g;function L(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const n=t[i],r=e[i];if(O(n)&&O(r)){if(!L(n,r))return!1}else if(n!==r)return!1}for(const t of s)if(!n.includes(t))return!1;return!0}function O(t){return null!==t&&"object"==typeof t}function P(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function M(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,s]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(s)}})),e}function x(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class U{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let s;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");s=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===s.next&&(s.next=F),void 0===s.error&&(s.error=F),void 0===s.complete&&(s.complete=F);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch(t){}})),this.observers.push(s),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function F(){}function V(t){return t&&t._delegate?t._delegate:t}class q{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const j="[DEFAULT]";class B{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new _;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),s=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(s)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:j})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(s);return s}onInit(t,e){var n;const s=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===j?void 0:s),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var s;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:j:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new B(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const $=[];var K,z;(z=K||(K={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT";const G={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},W=K.INFO,J={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Q=(t,e,...n)=>{if(e<t.logLevel)return;const s=(new Date).toISOString(),i=J[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${s}]  ${t.name}:`,...n)};class X{constructor(t){this.name=t,this._logLevel=W,this._logHandler=Q,this._userLogHandler=null,$.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in K))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?G[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...t),this._logHandler(this,K.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...t),this._logHandler(this,K.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,K.INFO,...t),this._logHandler(this,K.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,K.WARN,...t),this._logHandler(this,K.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...t),this._logHandler(this,K.ERROR,...t)}}class Y{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Z="@firebase/app",tt="0.7.11",et=new X("@firebase/app"),nt={[Z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},st=new Map,it=new Map;function rt(t,e){try{t.container.addComponent(e)}catch(n){et.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ot(t){const e=t.name;if(it.has(e))return et.debug(`There were multiple attempts to register component ${e}.`),!1;it.set(e,t);for(const e of st.values())rt(e,t);return!0}function at(t,e){return t.container.getProvider(e)}const ct=new R("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class ut{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new q("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}const lt="9.6.1";function ht(t="[DEFAULT]"){const e=st.get(t);if(!e)throw ct.create("no-app",{appName:t});return e}function dt(t,e,n){var s;let i=null!==(s=nt[t])&&void 0!==s?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const t=[`Unable to register library "${i}" with version "${e}":`];return r&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void et.warn(t.join(" "))}ot(new q(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}function ft(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]])}return n}ot(new q("platform-logger",(t=>new Y(t)),"PRIVATE")),dt(Z,tt,""),dt(Z,tt,"esm2017"),dt("fire-js",""),Object.create,Object.create;const pt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},mt=new R("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gt=new X("@firebase/auth");function yt(t,...e){gt.logLevel<=K.ERROR&&gt.error(`Auth (9.6.1): ${t}`,...e)}function vt(t,...e){throw Et(t,...e)}function wt(t,...e){return Et(t,...e)}function Et(t,...e){if("string"!=typeof t){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return mt.create(t,...e)}function It(t,e,...n){if(!t)throw Et(e,...n)}function bt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yt(e),new Error(e)}function _t(t,e){t||bt(e)}const Tt=new Map;function St(t){_t(t instanceof Function,"Expected a class definition");let e=Tt.get(t);return e?(_t(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tt.set(t,e),e)}function kt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Ct(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class At{constructor(t,e){this.shortDelay=t,this.longDelay=e,_t(e>t,"Short delay should be less than long delay!"),this.isMobile=S()||C()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Ct()||"https:"===Ct()||k()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Nt(t,e){_t(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Rt{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Lt=new At(3e4,6e4);function Ot(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pt(t,e,n,s,i={}){return Mt(t,i,(async()=>{let i={},r={};s&&("GET"===e?r=s:i={body:JSON.stringify(s)});const o=P(Object.assign({key:t.config.apiKey},r)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Rt.fetch()(Ut(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Mt(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},Dt),e);try{const e=new Ft(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const r=await i.json();if("needConfirmation"in r)throw Vt(t,"account-exists-with-different-credential",r);if(i.ok&&!("errorMessage"in r))return r;{const e=i.ok?r.errorMessage:r.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Vt(t,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw Vt(t,"email-already-in-use",r);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const s=Object.assign(Object.assign({},pt()),{[e]:n});return new R("auth","Firebase",s).create(e,{appName:t.name})}(t,a,o);vt(t,a)}}catch(e){if(e instanceof N)throw e;vt(t,"network-request-failed")}}async function xt(t,e,n,s,i={}){const r=await Pt(t,e,n,s,i);return"mfaPendingCredential"in r&&vt(t,"multi-factor-auth-required",{_serverResponse:r}),r}function Ut(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?Nt(t.config,i):`${t.config.apiScheme}://${i}`}class Ft{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(wt(this.auth,"timeout"))),Lt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vt(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=wt(t,e,s);return i.customData._tokenResponse=n,i}function qt(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function jt(t){return 1e3*Number(t)}function Bt(t){const[e,n,s]=t.split(".");if(void 0===e||void 0===n||void 0===s)return yt("JWT malformed, contained fewer than 3 sections"),null;try{const t=function(t){try{return b.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(n);return t?JSON.parse(t):(yt("Failed to decode base64 JWT payload"),null)}catch(t){return yt("Caught error parsing JWT payload as JSON",t),null}}async function Ht(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof N&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class $t{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class Kt{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=qt(this.lastLoginAt),this.creationTime=qt(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function zt(t){var e;const n=t.auth,s=await t.getIdToken(),i=await Ht(t,async function(t,e){return Pt(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:s}));It(null==i?void 0:i.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(null===(e=r.providerUserInfo)||void 0===e?void 0:e.length)?r.providerUserInfo.map((t=>{var{providerId:e}=t,n=ft(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,u=o,[...c.filter((t=>!u.some((e=>e.providerId===t.providerId)))),...u]);var c,u;const l=t.isAnonymous,h=!(t.email&&r.passwordHash||(null==a?void 0:a.length)),d=!!l&&h,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Kt(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class Gt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){It(t.idToken,"internal-error"),It(void 0!==t.idToken,"internal-error"),It(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Bt(t);return It(e,"internal-error"),It(void 0!==e.exp,"internal-error"),It(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return It(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:s,expiresIn:i}=await async function(t,e){const n=await Mt(t,{},(async()=>{const n=P({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,r=Ut(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Rt.fetch()(r,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:s,expirationTime:i}=e,r=new Gt;return n&&(It("string"==typeof n,"internal-error",{appName:t}),r.refreshToken=n),s&&(It("string"==typeof s,"internal-error",{appName:t}),r.accessToken=s),i&&(It("number"==typeof i,"internal-error",{appName:t}),r.expirationTime=i),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Gt,this.toJSON())}_performRefresh(){return bt("not implemented")}}function Wt(t,e){It("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Jt{constructor(t){var{uid:e,auth:n,stsTokenManager:s}=t,i=ft(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new $t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new Kt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await Ht(this,this.stsTokenManager.getToken(this.auth,t));return It(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=V(t),s=await n.getIdToken(e),i=Bt(s);It(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r="object"==typeof i.firebase?i.firebase:void 0,o=null==r?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:qt(jt(i.auth_time)),issuedAtTime:qt(jt(i.iat)),expirationTime:qt(jt(i.exp)),signInProvider:o||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=V(t);await zt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(It(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new Jt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await zt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Ht(this,async function(t,e){return Pt(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,s,i,r,o,a,c,u;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(s=e.email)&&void 0!==s?s:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(r=e.photoURL)&&void 0!==r?r:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(u=e.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:E,providerData:I,stsTokenManager:b}=e;It(v&&b,t,"internal-error");const _=Gt.fromJSON(this.name,b);It("string"==typeof v,t,"internal-error"),Wt(l,t.name),Wt(h,t.name),It("boolean"==typeof w,t,"internal-error"),It("boolean"==typeof E,t,"internal-error"),Wt(d,t.name),Wt(f,t.name),Wt(p,t.name),Wt(m,t.name),Wt(g,t.name),Wt(y,t.name);const T=new Jt({uid:v,auth:t,email:h,emailVerified:w,displayName:l,isAnonymous:E,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:_,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&(T.providerData=I.map((t=>Object.assign({},t)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(t,e,n=!1){const s=new Gt;s.updateFromServerResponse(e);const i=new Jt({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:n});return await zt(i),i}}class Qt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Qt.type="NONE";const Xt=Qt;function Yt(t,e,n){return`firebase:${t}:${e}:${n}`}class Zt{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Yt(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yt("persistence",s.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Jt._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Zt(St(Xt),t,n);const s=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=s[0]||St(Xt);const r=Yt(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(r);if(e){const s=Jt._fromJSON(t,e);n!==i&&(o=s),i=n;break}}catch(t){}const a=s.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(r,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(r)}catch(t){}}))),new Zt(i,t,n)):new Zt(i,t,n)}}function te(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ie(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ee(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oe(e))return"Blackberry";if(ae(e))return"Webos";if(ne(e))return"Safari";if((e.includes("chrome/")||se(e))&&!e.includes("edge/"))return"Chrome";if(re(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ee(t=T()){return/firefox\//i.test(t)}function ne(t=T()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function se(t=T()){return/crios\//i.test(t)}function ie(t=T()){return/iemobile/i.test(t)}function re(t=T()){return/android/i.test(t)}function oe(t=T()){return/blackberry/i.test(t)}function ae(t=T()){return/webos/i.test(t)}function ce(t=T()){return/iphone|ipad|ipod/i.test(t)}function ue(t=T()){return ce(t)||re(t)||ae(t)||oe(t)||/windows phone/i.test(t)||ie(t)}function le(t,e=[]){let n;switch(t){case"Browser":n=te(T());break;case"Worker":n=`${te(T())}-${t}`;break;default:n=t}return`${n}/JsCore/9.6.1/${e.length?e.join(","):"FirebaseCore-web"}`}class he{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fe(this),this.idTokenSubscription=new fe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=St(e)),this._initializationPromise=this.queue((async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Zt.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,i=null==n?void 0:n._redirectEventId,r=await this.tryRedirectSignIn(t);s&&s!==i||!(null==r?void 0:r.user)||(n=r.user)}return n?n._redirectEventId?(It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await zt(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?V(t):null;return e&&It(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&It(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(St(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new R("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&St(t)||this._popupRedirectResolver;It(e,this,"argument-error"),this.redirectPersistenceManager=await Zt.create(this,[St(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,s){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e),r=this._isInitialized?Promise.resolve():this._initializationPromise;return It(r,this,"internal-error"),r.then((()=>i(this.currentUser))),"function"==typeof e?t.addObserver(e,n,s):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),t}}function de(t){return V(t)}class fe{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new U(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class pe{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return bt("not implemented")}_getIdTokenResponse(t){return bt("not implemented")}_linkToIdToken(t,e){return bt("not implemented")}_getReauthenticationResolver(t){return bt("not implemented")}}class me extends pe{constructor(t,e,n,s=null){super("password",n),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new me(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new me(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return xt(t,"POST","/v1/accounts:signInWithPassword",Ot(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return xt(t,"POST","/v1/accounts:signInWithEmailLink",Ot(t,e))}(t,{email:this._email,oobCode:this._password});default:vt(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return Pt(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return xt(t,"POST","/v1/accounts:signInWithEmailLink",Ot(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:vt(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ge(t,e){return xt(t,"POST","/v1/accounts:signInWithIdp",Ot(t,e))}class ye extends pe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ye(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):vt("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:s}=e,i=ft(e,["providerId","signInMethod"]);if(!n||!s)return null;const r=new ye(n,s);return r.idToken=i.idToken||void 0,r.accessToken=i.accessToken||void 0,r.secret=i.secret,r.nonce=i.nonce,r.pendingToken=i.pendingToken||null,r}_getIdTokenResponse(t){return ge(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,ge(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ge(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=P(e)}return t}}const ve={USER_NOT_FOUND:"user-not-found"};class we extends pe{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new we({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new we({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return xt(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await xt(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,e));if(n.temporaryProof)throw Vt(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return xt(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),ve)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:s}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:s}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:s,temporaryProof:i}=t;return n||e||s||i?new we({verificationId:e,verificationCode:n,phoneNumber:s,temporaryProof:i}):null}}class Ee{constructor(t){var e,n,s,i,r,o;const a=M(x(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=a.mode)&&void 0!==s?s:null);It(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(r=a.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=M(x(t)).link,n=e?M(x(e)).deep_link_id:null,s=M(x(t)).deep_link_id;return(s?M(x(s)).link:null)||s||n||e||t}(t);try{return new Ee(e)}catch(t){return null}}}class Ie{constructor(){this.providerId=Ie.PROVIDER_ID}static credential(t,e){return me._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ee.parseLink(e);return It(n,"argument-error"),me._fromEmailAndCode(t,n.code,n.tenantId)}}Ie.PROVIDER_ID="password",Ie.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ie.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class be{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class _e extends be{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Te extends _e{constructor(){super("facebook.com")}static credential(t){return ye._fromParams({providerId:Te.PROVIDER_ID,signInMethod:Te.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Te.credentialFromTaggedObject(t)}static credentialFromError(t){return Te.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Te.credential(t.oauthAccessToken)}catch(t){return null}}}Te.FACEBOOK_SIGN_IN_METHOD="facebook.com",Te.PROVIDER_ID="facebook.com";class Se extends _e{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ye._fromParams({providerId:Se.PROVIDER_ID,signInMethod:Se.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Se.credentialFromTaggedObject(t)}static credentialFromError(t){return Se.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Se.credential(e,n)}catch(t){return null}}}Se.GOOGLE_SIGN_IN_METHOD="google.com",Se.PROVIDER_ID="google.com";class ke extends _e{constructor(){super("github.com")}static credential(t){return ye._fromParams({providerId:ke.PROVIDER_ID,signInMethod:ke.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ke.credentialFromTaggedObject(t)}static credentialFromError(t){return ke.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ke.credential(t.oauthAccessToken)}catch(t){return null}}}ke.GITHUB_SIGN_IN_METHOD="github.com",ke.PROVIDER_ID="github.com";class Ce extends _e{constructor(){super("twitter.com")}static credential(t,e){return ye._fromParams({providerId:Ce.PROVIDER_ID,signInMethod:Ce.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ce.credentialFromTaggedObject(t)}static credentialFromError(t){return Ce.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Ce.credential(e,n)}catch(t){return null}}}Ce.TWITTER_SIGN_IN_METHOD="twitter.com",Ce.PROVIDER_ID="twitter.com";class Ae{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,s=!1){const i=await Jt._fromIdTokenResponse(t,n,s),r=Ne(n);return new Ae({user:i,providerId:r,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const s=Ne(n);return new Ae({user:t,providerId:s,_tokenResponse:n,operationType:e})}}function Ne(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Re extends N{constructor(t,e,n,s){var i;super(e.code,e.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Re.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,s){return new Re(t,e,n,s)}}function De(t,e,n,s){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Re._fromErrorAndOperation(t,n,e,s);throw n}))}async function Le(t,e,n=!1){const s="signIn",i=await De(t,s,e),r=await Ae._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}new WeakMap;const Oe="__sak";class Pe{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Oe,"1"),this.storage.removeItem(Oe),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Me extends Pe{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=T();return ne(t)||ce(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=ue(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),s=this.localCache[e];n!==s&&t(e,s,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(n);if(t.newValue!==s)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const s=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);A()&&10===document.documentMode&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,10):s()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Me.type="LOCAL";const xe=Me;class Ue extends Pe{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Ue.type="SESSION";const Fe=Ue;class Ve{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Ve(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:s,data:i}=e.data,r=this.handlersMap[s];if(!(null==r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(r).map((async t=>t(e.origin,i))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function qe(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Ve.receivers=[];class je{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,r;return new Promise(((o,a)=>{const c=qe("",20);s.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:s,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(r),s.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[s.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function Be(){return window}function He(){return void 0!==Be().WorkerGlobalScope&&"function"==typeof Be().importScripts}const $e="firebaseLocalStorageDb",Ke="firebaseLocalStorage",ze="fbase_key";class Ge{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function We(t,e){return t.transaction([Ke],e?"readwrite":"readonly").objectStore(Ke)}function Je(){const t=indexedDB.open($e,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Ke,{keyPath:ze})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Ke)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase($e);return new Ge(t).toPromise()}(),e(await Je()))}))}))}async function Qe(t,e,n){const s=We(t,!0).put({[ze]:e,value:n});return new Ge(s).toPromise()}function Xe(t,e){const n=We(t,!0).delete(e);return new Ge(n).toPromise()}class Ye{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Je()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return He()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ve._getInstance(He()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new je(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Je();return await Qe(t,Oe,"1"),await Xe(t,Oe),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Qe(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=We(t,!1).get(e),s=await new Ge(n).toPromise();return void 0===s?null:s.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Xe(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=We(t,!1).getAll();return new Ge(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:s,value:i}of t)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),e.push(s));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ye.type="LOCAL";const Ze=Ye;function tn(t){return`__${t}${Math.floor(1e6*Math.random())}`}tn("rcb"),new At(3e4,6e4);class en{constructor(t){this.providerId=en.PROVIDER_ID,this.auth=de(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var s;const i=await n.verify();try{let r;if(It("string"==typeof i,t,"argument-error"),It("recaptcha"===n.type,t,"argument-error"),r="string"==typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){It("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Pt(t,"POST","/v2/accounts/mfaEnrollment:start",Ot(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{It("signin"===e.type,t,"internal-error");const n=(null===(s=r.multiFactorHint)||void 0===s?void 0:s.uid)||r.multiFactorUid;It(n,t,"missing-multi-factor-info");const o=await function(t,e){return Pt(t,"POST","/v2/accounts/mfaSignIn:start",Ot(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Pt(t,"POST","/v1/accounts:sendVerificationCode",Ot(t,e))}(t,{phoneNumber:r.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}}(this.auth,t,V(e))}static credential(t,e){return we._fromVerification(t,e)}static credentialFromResult(t){const e=t;return en.credentialFromTaggedObject(e)}static credentialFromError(t){return en.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?we._fromTokenResponse(e,n):null}}en.PROVIDER_ID="phone",en.PHONE_SIGN_IN_METHOD="phone";class nn extends pe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ge(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ge(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ge(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function sn(t){return Le(t.auth,new nn(t),t.bypassAuthState)}function rn(t){const{auth:e,user:n}=t;return It(n,e,"internal-error"),async function(t,e,n=!1){const{auth:s}=t,i="reauthenticate";try{const r=await Ht(t,De(s,i,e,t),n);It(r.idToken,s,"internal-error");const o=Bt(r.idToken);It(o,s,"internal-error");const{sub:a}=o;return It(t.uid===a,s,"user-mismatch"),Ae._forOperation(t,i,r)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&vt(s,"user-mismatch"),t}}(n,new nn(t),t.bypassAuthState)}async function on(t){const{auth:e,user:n}=t;return It(n,e,"internal-error"),async function(t,e,n=!1){const s=await Ht(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ae._forOperation(t,"link",s)}(n,new nn(t),t.bypassAuthState)}class an{constructor(t,e,n,s,i=!1){this.auth=t,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:s,tenantId:i,error:r,type:o}=t;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return sn;case"linkViaPopup":case"linkViaRedirect":return on;case"reauthViaPopup":case"reauthViaRedirect":return rn;default:vt(this.auth,"internal-error")}}resolve(t){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cn=new At(2e3,1e4);class un extends an{constructor(t,e,n,s,i){super(t,e,s,i),this.provider=n,this.authWindow=null,this.pollId=null,un.currentPopupAction&&un.currentPopupAction.cancel(),un.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return It(t,this.auth,"internal-error"),t}async onExecution(){_t(1===this.filter.length,"Popup operations only handle one event");const t=qe();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(wt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,un.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(wt(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,cn.get())};t()}}un.currentPopupAction=null;const ln=new Map;class hn extends an{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=ln.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return Yt("pendingRedirect",t.config.apiKey,t.name)}(e),s=function(t){return St(t._redirectPersistence)}(t);if(!await s._isAvailable())return!1;const i="true"===await s._get(n);return await s._remove(n),i}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}ln.set(this.auth._key(),t)}return this.bypassAuthState||ln.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function dn(t,e,n=!1){const s=de(t),i=function(t,e){return e?St(e):(It(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(s,e),r=new hn(s,i,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}class fn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mn(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!mn(t)){const s=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(wt(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pn(t))}saveEventToCache(t){this.cachedEventUids.add(pn(t)),this.lastProcessedEventTime=Date.now()}}function pn(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function mn({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const gn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yn=/^https?/;function vn(t){const e=kt(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===s?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===s}if(!yn.test(n))return!1;if(gn.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}const wn=new At(3e4,6e4);function En(){const t=Be().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let In=null;function bn(t){return In=In||function(t){return new Promise(((e,n)=>{var s,i,r,o;function a(){En(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{En(),n(wt(t,"network-request-failed"))},timeout:wn.get()})}if(null===(i=null===(s=Be().gapi)||void 0===s?void 0:s.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(r=Be().gapi)||void 0===r?void 0:r.load)){const e=tn("iframefcb");return Be()[e]=()=>{gapi.load?a():n(wt(t,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise(((t,e)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=t,n.onerror=t=>{const n=wt("internal-error");n.customData=t,e(n)},n.type="text/javascript",n.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(n)}))).catch((t=>n(t)))}a()}})).catch((t=>{throw In=null,t}))}(t),In}const _n=new At(5e3,15e3),Tn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kn(t){const e=t.config;It(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Nt(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,s={apiKey:e.apiKey,appName:t.name,v:lt},i=Sn.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${P(s).slice(1)}`}const Cn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class An{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Nn(t,e,n,s,i,r){It(t.config.authDomain,t,"auth-domain-config-required"),It(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:lt,eventId:i};if(e instanceof be){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(r||{}))o[t]=e}if(e instanceof _e){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];return`${function({config:t}){return t.emulator?Nt(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${P(a).slice(1)}`}const Rn="webStorageSupport",Dn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fe,this._completeRedirectFn=dn}async _openPopup(t,e,n,s){var i;return _t(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(t,e,n,s=500,i=600){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Cn),{width:s.toString(),height:i.toString(),top:r,left:o}),u=T().toLowerCase();n&&(a=se(u)?"_blank":n),ee(u)&&(e=e||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=T()){var e;return ce(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}(e||"",a),new An(null);const h=window.open(e||"",a,l);It(h,t,"popup-blocked");try{h.focus()}catch(t){}return new An(h)}(t,Nn(t,e,n,kt(),s),qe())}async _openRedirect(t,e,n,s){var i;return await this._originValidation(t),i=Nn(t,e,n,kt(),s),Be().location.href=i,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(_t(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await bn(t),n=Be().gapi;return It(n,t,"internal-error"),e.open({where:document.body,url:kn(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tn,dontclear:!0},(e=>new Promise((async(n,s)=>{await e.restyle({setHideOnLeave:!1});const i=wt(t,"network-request-failed"),r=Be().setTimeout((()=>{s(i)}),_n.get());function o(){Be().clearTimeout(r),n(e)}e.ping(o).then(o,(()=>{s(i)}))}))))}(t),n=new fn(t);return e.register("authEvent",(e=>(It(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Rn,{type:Rn},(n=>{var s;const i=null===(s=null==n?void 0:n[0])||void 0===s?void 0:s.webStorageSupport;void 0!==i&&e(!!i),vt(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Pt(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(vn(t))return}catch(t){}vt(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return ue()||ne()||ce()}};var Ln,On="@firebase/auth",Pn="0.19.4";class Mn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Ln="Browser",ot(new q("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:s,authDomain:i}=n.options;return(t=>{It(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),It(!(null==i?void 0:i.includes(":")),"argument-error",{appName:t.name});const n={apiKey:s,authDomain:i,clientPlatform:Ln,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(Ln)},r=new he(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(St);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,null==e?void 0:e.popupRedirectResolver)}(r,e),r})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),ot(new q("auth-internal",(t=>(t=>new Mn(t))(de(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),dt(On,Pn,void 0),dt(On,Pn,"esm2017");var xn=n(917);function Un(t){console.log(t),document.querySelector(".header__username").textContent=t}function Fn(){const t=document.querySelector(".sidebar");t.classList.contains("hide")?t.classList.remove("hide"):t.classList.add("hide")}function Vn(){document.querySelector(".header__upload").classList.toggle("visible")}function qn(){const t=document.getElementById("profile"),e=document.querySelector(".header__image");if(this.files){const e=new FileReader;e.readAsDataURL(this.files[0]),e.addEventListener("load",(()=>{t.src=e.result,console.log(t.src)}))}e.click()}const jn=document.querySelector(".container");function Bn(){const t=document.querySelector(".sidebar"),e=document.querySelector(".header"),n=document.querySelector(".add__button");t.classList.remove("hide"),e.classList.remove("hide"),n.classList.remove("hide")}function Hn(){return document.querySelector(".header__username").textContent}function $n(){[...document.querySelector(".container").children].forEach((t=>{t.remove()}))}var Kn,zn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Gn={},Wn=Wn||{},Jn=zn||self;function Qn(){}function Xn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Yn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Zn="closure_uid_"+(1e9*Math.random()>>>0),ts=0;function es(t,e,n){return t.call.apply(t.bind,arguments)}function ns(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ss(t,e,n){return(ss=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?es:ns).apply(null,arguments)}function is(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function rs(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,s){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return e.prototype[n].apply(t,i)}}function os(){this.s=this.s,this.o=this.o}var as={};os.prototype.s=!1,os.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Zn)&&t[Zn]||(t[Zn]=++ts)}(this);delete as[t]}},os.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cs=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},us=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const s=t.length,i="string"==typeof t?t.split(""):t;for(let r=0;r<s;r++)r in i&&e.call(n,i[r],r,t)};function ls(t){return Array.prototype.concat.apply([],arguments)}function hs(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function ds(t){return/^[\s\xa0]*$/.test(t)}var fs,ps=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ms(t,e){return-1!=t.indexOf(e)}function gs(t,e){return t<e?-1:t>e?1:0}t:{var ys=Jn.navigator;if(ys){var vs=ys.userAgent;if(vs){fs=vs;break t}}fs=""}function ws(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function Es(t){const e={};for(const n in t)e[n]=t[n];return e}var Is="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bs(t,e){let n,s;for(let e=1;e<arguments.length;e++){for(n in s=arguments[e],s)t[n]=s[n];for(let e=0;e<Is.length;e++)n=Is[e],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function _s(t){return _s[" "](t),t}_s[" "]=Qn;var Ts,Ss,ks=ms(fs,"Opera"),Cs=ms(fs,"Trident")||ms(fs,"MSIE"),As=ms(fs,"Edge"),Ns=As||Cs,Rs=ms(fs,"Gecko")&&!(ms(fs.toLowerCase(),"webkit")&&!ms(fs,"Edge"))&&!(ms(fs,"Trident")||ms(fs,"MSIE"))&&!ms(fs,"Edge"),Ds=ms(fs.toLowerCase(),"webkit")&&!ms(fs,"Edge");function Ls(){var t=Jn.document;return t?t.documentMode:void 0}t:{var Os="",Ps=(Ss=fs,Rs?/rv:([^\);]+)(\)|;)/.exec(Ss):As?/Edge\/([\d\.]+)/.exec(Ss):Cs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ss):Ds?/WebKit\/(\S+)/.exec(Ss):ks?/(?:Version)[ \/]?(\S+)/.exec(Ss):void 0);if(Ps&&(Os=Ps?Ps[1]:""),Cs){var Ms=Ls();if(null!=Ms&&Ms>parseFloat(Os)){Ts=String(Ms);break t}}Ts=Os}var xs,Us={};function Fs(){return t=Us,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=ps(String(Ts)).split("."),n=ps("9").split("."),s=Math.max(e.length,n.length);for(let o=0;0==t&&o<s;o++){var i=e[o]||"",r=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==i[0].length&&0==r[0].length)break;t=gs(0==i[1].length?0:parseInt(i[1],10),0==r[1].length?0:parseInt(r[1],10))||gs(0==i[2].length,0==r[2].length)||gs(i[2],r[2]),i=i[3],r=r[3]}while(0==t)}return 0<=t}();var t}Jn.document&&Cs?xs=Ls()||parseInt(Ts,10)||void 0:xs=void 0;var Vs=xs,qs=function(){if(!Jn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Jn.addEventListener("test",Qn,e),Jn.removeEventListener("test",Qn,e)}catch(t){}return t}();function js(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Bs(t,e){if(js.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Rs){t:{try{_s(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Hs[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Bs.Z.h.call(this)}}js.prototype.h=function(){this.defaultPrevented=!0},rs(Bs,js);var Hs={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var $s="closure_listenable_"+(1e6*Math.random()|0),Ks=0;function zs(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ia=i,this.key=++Ks,this.ca=this.fa=!1}function Gs(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ws(t){this.src=t,this.g={},this.h=0}function Js(t,e){var n=e.type;if(n in t.g){var s,i=t.g[n],r=cs(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Gs(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Qs(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.ca&&r.listener==e&&r.capture==!!n&&r.ia==s)return i}return-1}Ws.prototype.add=function(t,e,n,s,i){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=Qs(t,e,s,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new zs(e,this.src,r,!!s,i)).fa=n,t.push(e)),e};var Xs="closure_lm_"+(1e6*Math.random()|0),Ys={};function Zs(t,e,n,s,i){if(s&&s.once)return ei(t,e,n,s,i);if(Array.isArray(e)){for(var r=0;r<e.length;r++)Zs(t,e[r],n,s,i);return null}return n=ci(n),t&&t[$s]?t.N(e,n,Yn(s)?!!s.capture:!!s,i):ti(t,e,n,!1,s,i)}function ti(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var o=Yn(i)?!!i.capture:!!i,a=oi(t);if(a||(t[Xs]=a=new Ws(t)),(n=a.add(e,n,s,o,r)).proxy)return n;if(s=function(){var t=ri;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)qs||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent(ii(e.toString()),s);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(s)}return n}function ei(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)ei(t,e[r],n,s,i);return null}return n=ci(n),t&&t[$s]?t.O(e,n,Yn(s)?!!s.capture:!!s,i):ti(t,e,n,!0,s,i)}function ni(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)ni(t,e[r],n,s,i);else s=Yn(s)?!!s.capture:!!s,n=ci(n),t&&t[$s]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Qs(r=t.g[e],n,s,i))&&(Gs(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--))):t&&(t=oi(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Qs(e,n,s,i)),(n=-1<t?e[t]:null)&&si(n))}function si(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[$s])Js(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(ii(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=oi(e))?(Js(n,t),0==n.h&&(n.src=null,e[Xs]=null)):Gs(t)}}}function ii(t){return t in Ys?Ys[t]:Ys[t]="on"+t}function ri(t,e){if(t.ca)t=!0;else{e=new Bs(e,this);var n=t.listener,s=t.ia||t.src;t.fa&&si(t),t=n.call(s,e)}return t}function oi(t){return(t=t[Xs])instanceof Ws?t:null}var ai="__closure_events_fn_"+(1e9*Math.random()>>>0);function ci(t){return"function"==typeof t?t:(t[ai]||(t[ai]=function(e){return t.handleEvent(e)}),t[ai])}function ui(){os.call(this),this.i=new Ws(this),this.P=this,this.I=null}function li(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,"string"==typeof e)e=new js(e,t);else if(e instanceof js)e.target=e.target||t;else{var i=e;bs(e=new js(s,t),i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=hi(o,s,!0,e)&&i}if(i=hi(o=e.g=t,s,!0,e)&&i,i=hi(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)i=hi(o=e.g=n[r],s,!1,e)&&i}function hi(t,e,n,s){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&Js(t.i,o),i=!1!==a.call(c,s)&&i}}return i&&!s.defaultPrevented}rs(ui,os),ui.prototype[$s]=!0,ui.prototype.removeEventListener=function(t,e,n,s){ni(this,t,e,n,s)},ui.prototype.M=function(){if(ui.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)Gs(n[s]);delete e.g[t],e.h--}}this.I=null},ui.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)},ui.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};var di=Jn.JSON.stringify;function fi(){var t=Ei;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var pi,mi=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new gi),(t=>t.reset()));class gi{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function yi(t){Jn.setTimeout((()=>{throw t}),0)}function vi(t,e){pi||function(){var t=Jn.Promise.resolve(void 0);pi=function(){t.then(Ii)}}(),wi||(pi(),wi=!0),Ei.add(t,e)}var wi=!1,Ei=new class{constructor(){this.h=this.g=null}add(t,e){const n=mi.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Ii(){for(var t;t=fi();){try{t.h.call(t.g)}catch(t){yi(t)}var e=mi;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}wi=!1}function bi(t,e){ui.call(this),this.h=t||1,this.g=e||Jn,this.j=ss(this.kb,this),this.l=Date.now()}function _i(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ti(t,e,n){if("function"==typeof t)n&&(t=ss(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ss(t.handleEvent,t)}return 2147483647<Number(e)?-1:Jn.setTimeout(t,e||0)}function Si(t){t.g=Ti((()=>{t.g=null,t.i&&(t.i=!1,Si(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}rs(bi,ui),(Kn=bi.prototype).da=!1,Kn.S=null,Kn.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),li(this,"tick"),this.da&&(_i(this),this.start()))}},Kn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kn.M=function(){bi.Z.M.call(this),_i(this),delete this.g};class ki extends os{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Si(this)}M(){super.M(),this.g&&(Jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(t){os.call(this),this.h=t,this.g={}}rs(Ci,os);var Ai=[];function Ni(t,e,n,s){Array.isArray(n)||(n&&(Ai[0]=n.toString()),n=Ai);for(var i=0;i<n.length;i++){var r=Zs(e,n[i],s||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function Ri(t){ws(t.g,(function(t,e){this.g.hasOwnProperty(e)&&si(t)}),t),t.g={}}function Di(){this.g=!0}function Li(t,e,n,s){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return di(n)}catch(t){return e}}(t,n)+(s?" "+s:"")}))}Ci.prototype.M=function(){Ci.Z.M.call(this),Ri(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Di.prototype.Aa=function(){this.g=!1},Di.prototype.info=function(){};var Oi={},Pi=null;function Mi(){return Pi=Pi||new ui}function xi(t){js.call(this,Oi.Ma,t)}function Ui(t){const e=Mi();li(e,new xi(e,t))}function Fi(t,e){js.call(this,Oi.STAT_EVENT,t),this.stat=e}function Vi(t){const e=Mi();li(e,new Fi(e,t))}function qi(t,e){js.call(this,Oi.Na,t),this.size=e}function ji(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Jn.setTimeout((function(){t()}),e)}Oi.Ma="serverreachability",rs(xi,js),Oi.STAT_EVENT="statevent",rs(Fi,js),Oi.Na="timingevent",rs(qi,js);var Bi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $i(){}function Ki(t){return t.h||(t.h=t.i())}function zi(){}$i.prototype.h=null;var Gi,Wi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ji(){js.call(this,"d")}function Qi(){js.call(this,"c")}function Xi(){}function Yi(t,e,n,s){this.l=t,this.j=e,this.m=n,this.X=s||1,this.V=new Ci(this),this.P=tr,t=Ns?125:void 0,this.W=new bi(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zi}function Zi(){this.i=null,this.g="",this.h=!1}rs(Ji,js),rs(Qi,js),rs(Xi,$i),Xi.prototype.g=function(){return new XMLHttpRequest},Xi.prototype.i=function(){return{}},Gi=new Xi;var tr=45e3,er={},nr={};function sr(t,e,n){t.K=1,t.v=kr(Er(e)),t.s=n,t.U=!0,ir(t,null)}function ir(t,e){t.F=Date.now(),cr(t),t.A=Er(t.v);var n=t.A,s=t.X;Array.isArray(s)||(s=[String(s)]),Vr(n.h,"t",s),t.C=0,n=t.l.H,t.h=new Zi,t.g=qo(t.l,n?e:null,!t.s),0<t.O&&(t.L=new ki(ss(t.Ia,t,t.g),t.O)),Ni(t.V,t.g,"readystatechange",t.gb),e=t.H?Es(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ui(1),function(t,e,n,s,i,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function rr(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function or(t,e,n){let s,i=!0;for(;!t.I&&t.C<n.length;){if(s=ar(t,n),s==nr){4==e&&(t.o=4,Vi(14),i=!1),Li(t.j,t.m,null,"[Incomplete Response]");break}if(s==er){t.o=4,Vi(15),Li(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Li(t.j,t.m,s,null),fr(t,s)}rr(t)&&s!=nr&&s!=er&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Vi(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lo(e),e.L=!0,Vi(11))):(Li(t.j,t.m,n,"[Invalid Chunked Response]"),dr(t),hr(t))}function ar(t,e){var n=t.C,s=e.indexOf("\n",n);return-1==s?nr:(n=Number(e.substring(n,s)),isNaN(n)?er:(s+=1)+n>e.length?nr:(e=e.substr(s,n),t.C=s+n,e))}function cr(t){t.Y=Date.now()+t.P,ur(t,t.P)}function ur(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ji(ss(t.eb,t),e)}function lr(t){t.B&&(Jn.clearTimeout(t.B),t.B=null)}function hr(t){0==t.l.G||t.I||Mo(t.l,t)}function dr(t){lr(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,_i(t.W),Ri(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function fr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Kr(n.i,t)))if(n.I=t.N,!t.J&&Kr(n.i,t)&&3==n.G){try{var s=n.Ca.g.parse(e)}catch(t){s=null}if(Array.isArray(s)&&3==s.length){var i=s;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Po(n),_o(n)}Do(n),Vi(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ji(ss(n.ab,n),6e3));if(1>=$r(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Uo(n,11)}else if((t.J||n.g==t)&&Po(n),!ds(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const e=u[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(s=1.5*l,n.K=s,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=s.i;!r.g&&(ms(t,"spdy")||ms(t,"quic")||ms(t,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(zr(r,r.h),r.h=null))}if(s.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(s.sa=t,Sr(s.F,s.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((s=n).oa=Vo(s,s.H?s.la:null,s.W),o.J){Gr(s.i,o);var a=o,c=s.K;c&&a.setTimeout(c),a.B&&(lr(a),cr(a)),s.g=o}else Ro(s);0<n.l.length&&ko(n)}else"stop"!=u[0]&&"close"!=u[0]||Uo(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Uo(n,7):bo(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}Ui(4)}catch(t){}}function pr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Xn(t)||"string"==typeof t)us(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Xn(t)||"string"==typeof t){n=[];for(var s=t.length,i=0;i<s;i++)n.push(i)}else for(i in n=[],s=0,t)n[s++]=i;s=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Xn(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}for(s in e=[],n=0,t)e[n++]=t[s];return e}(t),i=s.length;for(var r=0;r<i;r++)e.call(void 0,s[r],n&&n[r],t)}}function mr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(t)if(t instanceof mr)for(n=t.T(),s=0;s<n.length;s++)this.set(n[s],t.get(n[s]));else for(s in t)this.set(s,t[s])}function gr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var s=t.g[e];yr(t.h,s)&&(t.g[n++]=s),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)yr(i,s=t.g[e])||(t.g[n++]=s,i[s]=1),e++;t.g.length=n}}function yr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Kn=Yi.prototype).setTimeout=function(t){this.P=t},Kn.gb=function(t){t=t.target;const e=this.L;e&&3==yo(t)?e.l():this.Ia(t)},Kn.Ia=function(t){try{if(t==this.g)t:{const l=yo(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||Ns||this.g&&(this.h.h||this.g.ga()||vo(this.g)))){this.I||4!=l||7==e||Ui(8==e||0>=h?3:2),lr(this);var n=this.g.ba();this.N=n;e:if(rr(this)){var s=vo(this.g);t="";var i=s.length,r=4==yo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){dr(this),hr(this);var o="";break e}this.h.i=new Jn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:r&&e==i-1});s.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,s,i,r,o){t.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ds(a)){var u=a;break e}}u=null}if(!(n=u)){this.i=!1,this.o=3,Vi(12),dr(this),hr(this);break t}Li(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fr(this,n)}this.U?(or(this,l,o),Ns&&this.i&&3==l&&(Ni(this.V,this.W,"tick",this.fb),this.W.start())):(Li(this.j,this.m,o,null),fr(this,o)),4==l&&dr(this),this.i&&!this.I&&(4==l?Mo(this.l,this):(this.i=!1,cr(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Vi(12)):(this.o=0,Vi(13)),dr(this),hr(this)}}}catch(t){}},Kn.fb=function(){if(this.g){var t=yo(this.g),e=this.g.ga();this.C<e.length&&(lr(this),or(this,t,e),this.i&&4!=t&&cr(this))}},Kn.cancel=function(){this.I=!0,dr(this)},Kn.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Ui(3),Vi(17)),dr(this),this.o=2,hr(this)):ur(this,this.Y-t)},(Kn=mr.prototype).R=function(){gr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Kn.T=function(){return gr(this),this.g.concat()},Kn.get=function(t,e){return yr(this.h,t)?this.h[t]:e},Kn.set=function(t,e){yr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Kn.forEach=function(t,e){for(var n=this.T(),s=0;s<n.length;s++){var i=n[s],r=this.get(i);t.call(e,r,i,this)}};var vr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof wr){this.g=void 0!==e?e:t.g,Ir(this,t.j),this.s=t.s,br(this,t.i),_r(this,t.m),this.l=t.l,e=t.h;var n=new Mr;n.i=e.i,e.g&&(n.g=new mr(e.g),n.h=e.h),Tr(this,n),this.o=t.o}else t&&(n=String(t).match(vr))?(this.g=!!e,Ir(this,n[1]||"",!0),this.s=Cr(n[2]||""),br(this,n[3]||"",!0),_r(this,n[4]),this.l=Cr(n[5]||"",!0),Tr(this,n[6]||"",!0),this.o=Cr(n[7]||"")):(this.g=!!e,this.h=new Mr(null,this.g))}function Er(t){return new wr(t)}function Ir(t,e,n){t.j=n?Cr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function br(t,e,n){t.i=n?Cr(e,!0):e}function _r(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Tr(t,e,n){e instanceof Mr?(t.h=e,function(t,e){e&&!t.j&&(xr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ur(this,e),Vr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Ar(e,Or)),t.h=new Mr(e,t.g))}function Sr(t,e,n){t.h.set(e,n)}function kr(t){return Sr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Cr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ar(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Nr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Nr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}wr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ar(e,Rr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ar(e,Rr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ar(n,"/"==n.charAt(0)?Lr:Dr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ar(n,Pr)),t.join("")};var Rr=/[#\/\?@]/g,Dr=/[#\?:]/g,Lr=/[#\?]/g,Or=/[#\?@]/g,Pr=/#/g;function Mr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xr(t){t.g||(t.g=new mr,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ur(t,e){xr(t),e=qr(t,e),yr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,yr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&gr(t)))}function Fr(t,e){return xr(t),e=qr(t,e),yr(t.g.h,e)}function Vr(t,e,n){Ur(t,e),0<n.length&&(t.i=null,t.g.set(qr(t,e),hs(n)),t.h+=n.length)}function qr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function jr(t){this.l=t||Br,t=Jn.PerformanceNavigationTiming?0<(t=Jn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Jn.g&&Jn.g.Ea&&Jn.g.Ea()&&Jn.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Kn=Mr.prototype).add=function(t,e){xr(this),this.i=null,t=qr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Kn.forEach=function(t,e){xr(this),this.g.forEach((function(n,s){us(n,(function(n){t.call(e,n,s,this)}),this)}),this)},Kn.T=function(){xr(this);for(var t=this.g.R(),e=this.g.T(),n=[],s=0;s<e.length;s++)for(var i=t[s],r=0;r<i.length;r++)n.push(e[s]);return n},Kn.R=function(t){xr(this);var e=[];if("string"==typeof t)Fr(this,t)&&(e=ls(e,this.g.get(qr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ls(e,t[n])}return e},Kn.set=function(t,e){return xr(this),this.i=null,Fr(this,t=qr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Kn.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Kn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var s=e[n],i=encodeURIComponent(String(s));s=this.R(s);for(var r=0;r<s.length;r++){var o=i;""!==s[r]&&(o+="="+encodeURIComponent(String(s[r]))),t.push(o)}}return this.i=t.join("&")};var Br=10;function Hr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function $r(t){return t.h?1:t.g?t.g.size:0}function Kr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function zr(t,e){t.g?t.g.add(e):t.h=e}function Gr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Wr(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return hs(t.i)}function Jr(){}function Qr(){this.g=new Jr}function Xr(t,e,n){const s=n||"";try{pr(t,(function(t,n){let i=t;Yn(t)&&(i=di(t)),e.push(s+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}function Yr(t,e,n,s,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(s)}catch(t){}}function Zr(t){this.l=t.$b||null,this.j=t.ib||!1}function to(t,e){ui.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=eo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jr.prototype.cancel=function(){if(this.i=Wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Jr.prototype.stringify=function(t){return Jn.JSON.stringify(t,void 0)},Jr.prototype.parse=function(t){return Jn.JSON.parse(t,void 0)},rs(Zr,$i),Zr.prototype.g=function(){return new to(this.l,this.j)},Zr.prototype.i=function(t){return function(){return t}}({}),rs(to,ui);var eo=0;function no(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function so(t){t.readyState=4,t.l=null,t.j=null,t.A=null,io(t)}function io(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Kn=to.prototype).open=function(t,e){if(this.readyState!=eo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,io(this)},Kn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Jn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Kn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,so(this)),this.readyState=eo},Kn.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Jn.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;no(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Kn.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?so(this):io(this),3==this.readyState&&no(this)}},Kn.Ua=function(t){this.g&&(this.response=this.responseText=t,so(this))},Kn.Ta=function(t){this.g&&(this.response=t,so(this))},Kn.ha=function(){this.g&&so(this)},Kn.setRequestHeader=function(t,e){this.v.append(t,e)},Kn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Kn.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(to.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ro=Jn.JSON.parse;function oo(t){ui.call(this),this.headers=new mr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ao,this.K=this.L=!1}rs(oo,ui);var ao="",co=/^https?$/i,uo=["POST","PUT"];function lo(t){return"content-type"==t.toLowerCase()}function ho(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fo(t),mo(t)}function fo(t){t.D||(t.D=!0,li(t,"complete"),li(t,"error"))}function po(t){if(t.h&&void 0!==Wn&&(!t.C[1]||4!=yo(t)||2!=t.ba()))if(t.v&&4==yo(t))Ti(t.Fa,0,t);else if(li(t,"readystatechange"),4==yo(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===a){var i=String(t.H).match(vr)[1]||null;if(!i&&Jn.self&&Jn.self.location){var r=Jn.self.location.protocol;i=r.substr(0,r.length-1)}s=!co.test(i?i.toLowerCase():"")}n=s}if(n)li(t,"complete"),li(t,"success");else{t.m=6;try{var o=2<yo(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",fo(t)}}finally{mo(t)}}}function mo(t,e){if(t.g){go(t);const n=t.g,s=t.C[0]?Qn:null;t.g=null,t.C=null,e||li(t,"ready");try{n.onreadystatechange=s}catch(t){}}}function go(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Jn.clearTimeout(t.A),t.A=null)}function yo(t){return t.g?t.g.readyState:0}function vo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ao:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function wo(t,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=function(t){let e="";return ws(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Sr(t,e,n))}function Eo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Io(t){this.za=0,this.l=[],this.h=new Di,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Eo("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Eo("baseRetryDelayMs",5e3,t),this.$a=Eo("retryDelaySeedMs",1e4,t),this.Ya=Eo("forwardChannelMaxRetries",2,t),this.ra=Eo("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new jr(t&&t.concurrentRequestLimit),this.Ca=new Qr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function bo(t){if(To(t),3==t.G){var e=t.V++,n=Er(t.F);Sr(n,"SID",t.J),Sr(n,"RID",e),Sr(n,"TYPE","terminate"),Ao(t,n),(e=new Yi(t,t.h,e,void 0)).K=2,e.v=kr(Er(n)),n=!1,Jn.navigator&&Jn.navigator.sendBeacon&&(n=Jn.navigator.sendBeacon(e.v.toString(),"")),!n&&Jn.Image&&((new Image).src=e.v,n=!0),n||(e.g=qo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),cr(e)}Fo(t)}function _o(t){t.g&&(Lo(t),t.g.cancel(),t.g=null)}function To(t){_o(t),t.u&&(Jn.clearTimeout(t.u),t.u=null),Po(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Jn.clearTimeout(t.m),t.m=null)}function So(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&ko(t)}function ko(t){Hr(t.i)||t.m||(t.m=!0,vi(t.Ha,t),t.C=0)}function Co(t,e){var n;n=e?e.m:t.V++;const s=Er(t.F);Sr(s,"SID",t.J),Sr(s,"RID",n),Sr(s,"AID",t.U),Ao(t,s),t.o&&t.s&&wo(s,t.o,t.s),n=new Yi(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=No(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),zr(t.i,n),sr(n,s,e)}function Ao(t,e){t.j&&pr({},(function(t,n){Sr(e,n,t)}))}function No(t,e,n){n=Math.min(t.l.length,n);var s=t.j?ss(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let r=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),r=!1;else try{Xr(a,t,"req"+n+"_")}catch(t){s&&s(a)}}if(r){s=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,s}function Ro(t){t.g||t.u||(t.Y=1,vi(t.Ga,t),t.A=0)}function Do(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=ji(ss(t.Ga,t),xo(t,t.A)),t.A++,0))}function Lo(t){null!=t.B&&(Jn.clearTimeout(t.B),t.B=null)}function Oo(t){t.g=new Yi(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Er(t.oa);Sr(e,"RID","rpc"),Sr(e,"SID",t.J),Sr(e,"CI",t.N?"0":"1"),Sr(e,"AID",t.U),Ao(t,e),Sr(e,"TYPE","xmlhttp"),t.o&&t.s&&wo(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=kr(Er(e)),n.s=null,n.U=!0,ir(n,t)}function Po(t){null!=t.v&&(Jn.clearTimeout(t.v),t.v=null)}function Mo(t,e){var n=null;if(t.g==e){Po(t),Lo(t),t.g=null;var s=2}else{if(!Kr(t.i,e))return;n=e.D,Gr(t.i,e),s=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;li(s=Mi(),new qi(s,n,e,i)),ko(t)}else Ro(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==s&&function(t,e){return!($r(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ji(ss(t.Ha,t,e),xo(t,t.C)),t.C++,0)))}(t,e)||2==s&&Do(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Uo(t,5);break;case 4:Uo(t,10);break;case 3:Uo(t,6);break;default:Uo(t,2)}}function xo(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Uo(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var s=ss(t.jb,t);n||(n=new wr("//www.google.com/images/cleardot.gif"),Jn.location&&"http"==Jn.location.protocol||Ir(n,"https"),kr(n)),function(t,e){const n=new Di;if(Jn.Image){const s=new Image;s.onload=is(Yr,n,s,"TestLoadImage: loaded",!0,e),s.onerror=is(Yr,n,s,"TestLoadImage: error",!1,e),s.onabort=is(Yr,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=is(Yr,n,s,"TestLoadImage: timeout",!1,e),Jn.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=t}else e(!1)}(n.toString(),s)}else Vi(2);t.G=0,t.j&&t.j.va(e),Fo(t),To(t)}function Fo(t){t.G=0,t.I=-1,t.j&&(0==Wr(t.i).length&&0==t.l.length||(t.i.i.length=0,hs(t.l),t.l.length=0),t.j.ua())}function Vo(t,e,n){let s=function(t){return t instanceof wr?Er(t):new wr(t,void 0)}(n);if(""!=s.i)e&&br(s,e+"."+s.i),_r(s,s.m);else{const t=Jn.location;s=function(t,e,n,s){var i=new wr(null,void 0);return t&&Ir(i,t),e&&br(i,e),n&&_r(i,n),s&&(i.l=s),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&ws(t.aa,(function(t,e){Sr(s,e,t)})),e=t.D,n=t.sa,e&&n&&Sr(s,e,n),Sr(s,"VER",t.ma),Ao(t,s),s}function qo(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new oo(new Zr({ib:!0})):new oo(t.qa)).L=t.H,e}function jo(){}function Bo(){if(Cs&&!(10<=Number(Vs)))throw Error("Environmental error: no available transport.")}function Ho(t,e){ui.call(this),this.g=new Io(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ds(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ds(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new zo(this)}function $o(t){Ji.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Ko(){Qi.call(this),this.status=1}function zo(t){this.g=t}(Kn=oo.prototype).ea=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gi.g(),this.C=this.u?Ki(this.u):Ki(Gi),this.g.onreadystatechange=ss(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void ho(this,t)}t=n||"";const i=new mr(this.headers);s&&pr(s,(function(t,e){i.set(e,t)})),s=function(t){t:{var e=lo;const n=t.length,s="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in s&&e.call(void 0,s[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Jn.FormData&&t instanceof Jn.FormData,!(0<=cs(uo,e))||s||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{go(this),0<this.B&&((this.K=function(t){return Cs&&Fs()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ss(this.pa,this)):this.A=Ti(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){ho(this,t)}},Kn.pa=function(){void 0!==Wn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},Kn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,li(this,"complete"),li(this,"abort"),mo(this))},Kn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mo(this,!0)),oo.Z.M.call(this)},Kn.Fa=function(){this.s||(this.F||this.v||this.l?po(this):this.cb())},Kn.cb=function(){po(this)},Kn.ba=function(){try{return 2<yo(this)?this.g.status:-1}catch(t){return-1}},Kn.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Kn.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ro(e)}},Kn.Da=function(){return this.m},Kn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Kn=Io.prototype).ma=8,Kn.G=1,Kn.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Kn.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Yi(this,this.h,t,void 0);let r=this.s;if(this.P&&(r?(r=Es(r),bs(r,this.P)):r=this.P),null===this.o&&(i.H=r),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var s=this.l[n];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=No(this,i,e),Sr(n=Er(this.F),"RID",t),Sr(n,"CVER",22),this.D&&Sr(n,"X-HTTP-Session-Id",this.D),Ao(this,n),this.o&&r&&wo(n,this.o,r),zr(this.i,i),this.Ra&&Sr(n,"TYPE","init"),this.ja?(Sr(n,"$req",e),Sr(n,"SID","null"),i.$=!0,sr(i,n,null)):sr(i,n,e),this.G=2}}else 3==this.G&&(t?Co(this,t):0==this.l.length||Hr(this.i)||Co(this))},Kn.Ga=function(){if(this.u=null,Oo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ji(ss(this.bb,this),t)}},Kn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Vi(10),_o(this),Oo(this))},Kn.ab=function(){null!=this.v&&(this.v=null,_o(this),Do(this),Vi(19))},Kn.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Vi(2)):(this.h.info("Failed to ping google.com"),Vi(1))},(Kn=jo.prototype).xa=function(){},Kn.wa=function(){},Kn.va=function(){},Kn.ua=function(){},Kn.Oa=function(){},Bo.prototype.g=function(t,e){return new Ho(t,e)},rs(Ho,ui),Ho.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),vi(ss(t.hb,t,e))),Vi(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Vo(t,null,t.W),ko(t)},Ho.prototype.close=function(){bo(this.g)},Ho.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,So(this.g,e)}else this.v?((e={}).__data__=di(t),So(this.g,e)):So(this.g,t)},Ho.prototype.M=function(){this.g.j=null,delete this.j,bo(this.g),delete this.g,Ho.Z.M.call(this)},rs($o,Ji),rs(Ko,Qi),rs(zo,jo),zo.prototype.xa=function(){li(this.g,"a")},zo.prototype.wa=function(t){li(this.g,new $o(t))},zo.prototype.va=function(t){li(this.g,new Ko(t))},zo.prototype.ua=function(){li(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,Ho.prototype.send=Ho.prototype.u,Ho.prototype.open=Ho.prototype.m,Ho.prototype.close=Ho.prototype.close,Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,Hi.COMPLETE="complete",zi.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",ui.prototype.listen=ui.prototype.N,oo.prototype.listenOnce=oo.prototype.O,oo.prototype.getLastError=oo.prototype.La,oo.prototype.getLastErrorCode=oo.prototype.Da,oo.prototype.getStatus=oo.prototype.ba,oo.prototype.getResponseJson=oo.prototype.Qa,oo.prototype.getResponseText=oo.prototype.ga,oo.prototype.send=oo.prototype.ea;var Go=Gn.createWebChannelTransport=function(){return new Bo},Wo=Gn.getStatEventTarget=function(){return Mi()},Jo=Gn.ErrorCode=Bi,Qo=Gn.EventType=Hi,Xo=Gn.Event=Oi,Yo=Gn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Zo=Gn.FetchXmlHttpFactory=Zr,ta=Gn.WebChannel=zi,ea=Gn.XhrIo=oo;const na="@firebase/firestore";class sa{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}sa.UNAUTHENTICATED=new sa(null),sa.GOOGLE_CREDENTIALS=new sa("google-credentials-uid"),sa.FIRST_PARTY=new sa("first-party-uid"),sa.MOCK_USER=new sa("mock-user");let ia="9.6.1";const ra=new X("@firebase/firestore");function oa(){return ra.logLevel}function aa(t,...e){if(ra.logLevel<=K.DEBUG){const n=e.map(la);ra.debug(`Firestore (${ia}): ${t}`,...n)}}function ca(t,...e){if(ra.logLevel<=K.ERROR){const n=e.map(la);ra.error(`Firestore (${ia}): ${t}`,...n)}}function ua(t,...e){if(ra.logLevel<=K.WARN){const n=e.map(la);ra.warn(`Firestore (${ia}): ${t}`,...n)}}function la(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function ha(t="Unexpected state"){const e=`FIRESTORE (${ia}) INTERNAL ASSERTION FAILED: `+t;throw ca(e),new Error(e)}function da(t,e){t||ha()}function fa(t,e){return t}const pa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ma extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ga{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ya{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class va{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(sa.UNAUTHENTICATED)))}shutdown(){}}class wa{constructor(t){this.t=t,this.currentUser=sa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const s=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ga,t.enqueueRetryable((()=>s(this.currentUser)))};const r=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await s(this.currentUser)}))},o=t=>{aa("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(aa("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ga)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(aa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(da("string"==typeof e.accessToken),new ya(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return da(null===t||"string"==typeof t),new sa(t)}}class Ea{constructor(t,e,n){this.type="FirstParty",this.user=sa.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const s=t.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Ia{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Ea(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(sa.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ba{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _a{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,e){this.o=n=>{t.enqueueRetryable((()=>(t=>(null!=t.error&&aa("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`),e(t.token)))(n)))};const n=t=>{aa("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>n(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?n(t):aa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(da("string"==typeof t.token),new ba(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ta{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.p(t),this.T=t=>e.writeSequenceNumber(t))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function Sa(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}Ta.I=-1;class ka{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const s=Sa(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<e&&(n+=t.charAt(s[i]%t.length))}return n}}function Ca(t,e){return t<e?-1:t>e?1:0}function Aa(t,e,n){return t.length===e.length&&t.every(((t,s)=>n(t,e[s])))}class Na{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ma(pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ma(pa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ma(pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ma(pa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Na.fromMillis(Date.now())}static fromDate(t){return Na.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Na(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ca(this.nanoseconds,t.nanoseconds):Ca(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ra{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ra(t)}static min(){return new Ra(new Na(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Da(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function La(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Oa(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Pa{constructor(t,e,n){void 0===e?e=0:e>t.length&&ha(),void 0===n?n=t.length-e:n>t.length-e&&ha(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Pa.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Pa?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const n=t.get(s),i=e.get(s);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ma extends Pa{construct(t,e,n){return new Ma(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ma(pa.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Ma(e)}static emptyPath(){return new Ma([])}}const xa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ua extends Pa{construct(t,e,n){return new Ua(t,e,n)}static isValidIdentifier(t){return xa.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ua.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ua(["__name__"])}static fromServerFormat(t){const e=[];let n="",s=0;const i=()=>{if(0===n.length)throw new ma(pa.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;s<t.length;){const e=t[s];if("\\"===e){if(s+1===t.length)throw new ma(pa.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[s+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ma(pa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,s+=2}else"`"===e?(r=!r,s++):"."!==e||r?(n+=e,s++):(i(),s++)}if(i(),r)throw new ma(pa.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ua(e)}static emptyPath(){return new Ua([])}}class Fa{constructor(t){this.fields=t,t.sort(Ua.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Aa(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Va{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Va(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Va(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ca(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Va.EMPTY_BYTE_STRING=new Va("");const qa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(t){if(da(!!t),"string"==typeof t){let e=0;const n=qa.exec(t);if(da(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ba(t.seconds),nanos:Ba(t.nanos)}}function Ba(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ha(t){return"string"==typeof t?Va.fromBase64String(t):Va.fromUint8Array(t)}function $a(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ka(t){const e=t.mapValue.fields.__previous_value__;return $a(e)?Ka(e):e}function za(t){const e=ja(t.mapValue.fields.__local_write_time__.timestampValue);return new Na(e.seconds,e.nanos)}function Ga(t){return null==t}function Wa(t){return 0===t&&1/t==-1/0}class Ja{constructor(t){this.path=t}static fromPath(t){return new Ja(Ma.fromString(t))}static fromName(t){return new Ja(Ma.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===Ma.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ma.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ja(new Ma(t.slice()))}}function Qa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$a(t)?4:10:ha()}function Xa(t,e){const n=Qa(t);if(n!==Qa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return za(t).isEqual(za(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ja(t.timestampValue),s=ja(e.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ha(t.bytesValue).isEqual(Ha(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ba(t.geoPointValue.latitude)===Ba(e.geoPointValue.latitude)&&Ba(t.geoPointValue.longitude)===Ba(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ba(t.integerValue)===Ba(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ba(t.doubleValue),s=Ba(e.doubleValue);return n===s?Wa(n)===Wa(s):isNaN(n)&&isNaN(s)}return!1}(t,e);case 9:return Aa(t.arrayValue.values||[],e.arrayValue.values||[],Xa);case 10:return function(t,e){const n=t.mapValue.fields||{},s=e.mapValue.fields||{};if(Da(n)!==Da(s))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===s[t]||!Xa(n[t],s[t])))return!1;return!0}(t,e);default:return ha()}}function Ya(t,e){return void 0!==(t.values||[]).find((t=>Xa(t,e)))}function Za(t,e){const n=Qa(t),s=Qa(e);if(n!==s)return Ca(n,s);switch(n){case 0:return 0;case 1:return Ca(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ba(t.integerValue||t.doubleValue),s=Ba(e.integerValue||e.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(t,e);case 3:return tc(t.timestampValue,e.timestampValue);case 4:return tc(za(t),za(e));case 5:return Ca(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Ha(t),s=Ha(e);return n.compareTo(s)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),s=e.split("/");for(let t=0;t<n.length&&t<s.length;t++){const e=Ca(n[t],s[t]);if(0!==e)return e}return Ca(n.length,s.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ca(Ba(t.latitude),Ba(e.latitude));return 0!==n?n:Ca(Ba(t.longitude),Ba(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],s=e.values||[];for(let t=0;t<n.length&&t<s.length;++t){const e=Za(n[t],s[t]);if(e)return e}return Ca(n.length,s.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},s=Object.keys(n),i=e.fields||{},r=Object.keys(i);s.sort(),r.sort();for(let t=0;t<s.length&&t<r.length;++t){const e=Ca(s[t],r[t]);if(0!==e)return e;const o=Za(n[s[t]],i[r[t]]);if(0!==o)return o}return Ca(s.length,r.length)}(t.mapValue,e.mapValue);default:throw ha()}}function tc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ca(t,e);const n=ja(t),s=ja(e),i=Ca(n.seconds,s.seconds);return 0!==i?i:Ca(n.nanos,s.nanos)}function ec(t){return nc(t)}function nc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ja(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ha(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ja.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const s of t.values||[])n?n=!1:e+=",",e+=nc(s);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",s=!0;for(const i of e)s?s=!1:n+=",",n+=`${i}:${nc(t.fields[i])}`;return n+"}"}(t.mapValue):ha();var e,n}function sc(t){return!!t&&"integerValue"in t}function ic(t){return!!t&&"arrayValue"in t}function rc(t){return!!t&&"nullValue"in t}function oc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ac(t){return!!t&&"mapValue"in t}function cc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return La(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=cc(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(t.arrayValue.values[n]);return e}return Object.assign({},t)}class uc{constructor(t){this.value=t}static empty(){return new uc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ac(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=cc(e)}setAll(t){let e=Ua.emptyPath(),n={},s=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,s),n={},s=[],e=i.popLast()}t?n[i.lastSegment()]=cc(t):s.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,s)}delete(t){const e=this.field(t.popLast());ac(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Xa(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];ac(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){La(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new uc(cc(this.value))}}function lc(t){const e=[];return La(t.fields,((t,n)=>{const s=new Ua([t]);if(ac(n)){const t=lc(n.mapValue).fields;if(0===t.length)e.push(s);else for(const n of t)e.push(s.child(n))}else e.push(s)})),new Fa(e)}class hc{constructor(t,e,n,s,i){this.key=t,this.documentType=e,this.version=n,this.data=s,this.documentState=i}static newInvalidDocument(t){return new hc(t,0,Ra.min(),uc.empty(),0)}static newFoundDocument(t,e,n){return new hc(t,1,e,n,0)}static newNoDocument(t,e){return new hc(t,2,e,uc.empty(),0)}static newUnknownDocument(t,e){return new hc(t,3,e,uc.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=uc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=uc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof hc&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new hc(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dc{constructor(t,e=null,n=[],s=[],i=null,r=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=r,this.endAt=o,this.R=null}}function fc(t,e=null,n=[],s=[],i=null,r=null,o=null){return new dc(t,e,n,s,i,r,o)}function pc(t){const e=fa(t);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+ec(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Ga(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Cc(e.startAt)),e.endAt&&(t+="|ub:",t+=Cc(e.endAt)),e.R=t}return e.R}function mc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Nc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],s=e.filters[i],n.op!==s.op||!n.field.isEqual(s.field)||!Xa(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dc(t.startAt,e.startAt)&&Dc(t.endAt,e.endAt)}function gc(t){return Ja.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class yc extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,n):new vc(t,e,n):"array-contains"===e?new bc(t,n):"in"===e?new _c(t,n):"not-in"===e?new Tc(t,n):"array-contains-any"===e?new Sc(t,n):new yc(t,e,n)}static P(t,e,n){return"in"===e?new wc(t,n):new Ec(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Za(e,this.value)):null!==e&&Qa(this.value)===Qa(e)&&this.v(Za(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ha()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class vc extends yc{constructor(t,e,n){super(t,e,n),this.key=Ja.fromName(n.referenceValue)}matches(t){const e=Ja.comparator(t.key,this.key);return this.v(e)}}class wc extends yc{constructor(t,e){super(t,"in",e),this.keys=Ic(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ec extends yc{constructor(t,e){super(t,"not-in",e),this.keys=Ic(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Ic(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Ja.fromName(t.referenceValue)))}class bc extends yc{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ic(e)&&Ya(e.arrayValue,this.value)}}class _c extends yc{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Ya(this.value.arrayValue,e)}}class Tc extends yc{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Ya(this.value.arrayValue,e)}}class Sc extends yc{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ic(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Ya(this.value.arrayValue,t)))}}class kc{constructor(t,e){this.position=t,this.before=e}}function Cc(t){return`${t.before?"b":"a"}:${t.position.map((t=>ec(t))).join(",")}`}class Ac{constructor(t,e="asc"){this.field=t,this.dir=e}}function Nc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Rc(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(s=r.field.isKeyField()?Ja.comparator(Ja.fromName(o.referenceValue),n.key):Za(o,n.data.field(r.field)),"desc"===r.dir&&(s*=-1),0!==s)break}return t.before?s<=0:s<0}function Dc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xa(t.position[n],e.position[n]))return!1;return!0}class Lc{constructor(t,e=null,n=[],s=[],i=null,r="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=r,this.startAt=o,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function Oc(t){return new Lc(t)}function Pc(t){return!Ga(t.limit)&&"F"===t.limitType}function Mc(t){return!Ga(t.limit)&&"L"===t.limitType}function xc(t){const e=fa(t);if(null===e.S){e.S=[];const t=function(t){for(const e of t.filters)if(e.V())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.S.push(new Ac(t)),e.S.push(new Ac(Ua.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.S.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Ac(Ua.keyField(),t))}}}return e.S}function Uc(t){const e=fa(t);if(!e.D)if("F"===e.limitType)e.D=fc(e.path,e.collectionGroup,xc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of xc(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Ac(n.field,e))}const n=e.endAt?new kc(e.endAt.position,!e.endAt.before):null,s=e.startAt?new kc(e.startAt.position,!e.startAt.before):null;e.D=fc(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}return e.D}function Fc(t,e){return mc(Uc(t),Uc(e))&&t.limitType===e.limitType}function Vc(t){return`${pc(Uc(t))}|lt:${t.limitType}`}function qc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${ec(e.value)}`;var e})).join(", ")}]`),Ga(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+Cc(t.startAt)),t.endAt&&(e+=", endAt: "+Cc(t.endAt)),`Target(${e})`}(Uc(t))}; limitType=${t.limitType})`}function jc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ja.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Rc(t.startAt,xc(t),e)||t.endAt&&Rc(t.endAt,xc(t),e))}(t,e)}function Bc(t){return(e,n)=>{let s=!1;for(const i of xc(t)){const t=Hc(i,e,n);if(0!==t)return t;s=s||i.field.isKeyField()}return 0}}function Hc(t,e,n){const s=t.field.isKeyField()?Ja.comparator(e.key,n.key):function(t,e,n){const s=e.data.field(t),i=n.data.field(t);return null!==s&&null!==i?Za(s,i):ha()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ha()}}function $c(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wa(e)?"-0":e}}function Kc(t){return{integerValue:""+t}}function zc(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Wa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Kc(e):$c(t,e)}class Gc{constructor(){this._=void 0}}function Wc(t,e,n){return t instanceof Xc?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Yc?Zc(t,e):t instanceof tu?eu(t,e):function(t,e){const n=Qc(t,e),s=su(n)+su(t.N);return sc(n)&&sc(t.N)?Kc(s):$c(t.k,s)}(t,e)}function Jc(t,e,n){return t instanceof Yc?Zc(t,e):t instanceof tu?eu(t,e):n}function Qc(t,e){return t instanceof nu?sc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Xc extends Gc{}class Yc extends Gc{constructor(t){super(),this.elements=t}}function Zc(t,e){const n=iu(e);for(const e of t.elements)n.some((t=>Xa(t,e)))||n.push(e);return{arrayValue:{values:n}}}class tu extends Gc{constructor(t){super(),this.elements=t}}function eu(t,e){let n=iu(e);for(const e of t.elements)n=n.filter((t=>!Xa(t,e)));return{arrayValue:{values:n}}}class nu extends Gc{constructor(t,e){super(),this.k=t,this.N=e}}function su(t){return Ba(t.integerValue||t.doubleValue)}function iu(t){return ic(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ru{constructor(t,e){this.version=t,this.transformResults=e}}class ou{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ou}static exists(t){return new ou(void 0,t)}static updateTime(t){return new ou(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function au(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class cu{}function uu(t,e,n){t instanceof pu?function(t,e,n){const s=t.value.clone(),i=yu(t.fieldTransforms,e,n.transformResults);s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):t instanceof mu?function(t,e,n){if(!au(t.precondition,e))return void e.convertToUnknownDocument(n.version);const s=yu(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(gu(t)),i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function lu(t,e,n){t instanceof pu?function(t,e,n){if(!au(t.precondition,e))return;const s=t.value.clone(),i=vu(t.fieldTransforms,n,e);s.setAll(i),e.convertToFoundDocument(fu(e),s).setHasLocalMutations()}(t,e,n):t instanceof mu?function(t,e,n){if(!au(t.precondition,e))return;const s=vu(t.fieldTransforms,n,e),i=e.data;i.setAll(gu(t)),i.setAll(s),e.convertToFoundDocument(fu(e),i).setHasLocalMutations()}(t,e,n):function(t,e){au(t.precondition,e)&&e.convertToNoDocument(Ra.min())}(t,e)}function hu(t,e){let n=null;for(const s of t.fieldTransforms){const t=e.data.field(s.field),i=Qc(s.transform,t||null);null!=i&&(null==n&&(n=uc.empty()),n.set(s.field,i))}return n||null}function du(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Aa(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Yc&&e instanceof Yc||t instanceof tu&&e instanceof tu?Aa(t.elements,e.elements,Xa):t instanceof nu&&e instanceof nu?Xa(t.N,e.N):t instanceof Xc&&e instanceof Xc}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function fu(t){return t.isFoundDocument()?t.version:Ra.min()}class pu extends cu{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}}class mu extends cu{constructor(t,e,n,s,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}}function gu(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function yu(t,e,n){const s=new Map;da(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,Jc(o,a,n[i]))}return s}function vu(t,e,n){const s=new Map;for(const i of t){const t=i.transform,r=n.data.field(i.field);s.set(i.field,Wc(t,r,e))}return s}class wu extends cu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Eu extends cu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Iu{constructor(t){this.count=t}}var bu,_u;function Tu(t){if(void 0===t)return ca("GRPC error has no .code"),pa.UNKNOWN;switch(t){case bu.OK:return pa.OK;case bu.CANCELLED:return pa.CANCELLED;case bu.UNKNOWN:return pa.UNKNOWN;case bu.DEADLINE_EXCEEDED:return pa.DEADLINE_EXCEEDED;case bu.RESOURCE_EXHAUSTED:return pa.RESOURCE_EXHAUSTED;case bu.INTERNAL:return pa.INTERNAL;case bu.UNAVAILABLE:return pa.UNAVAILABLE;case bu.UNAUTHENTICATED:return pa.UNAUTHENTICATED;case bu.INVALID_ARGUMENT:return pa.INVALID_ARGUMENT;case bu.NOT_FOUND:return pa.NOT_FOUND;case bu.ALREADY_EXISTS:return pa.ALREADY_EXISTS;case bu.PERMISSION_DENIED:return pa.PERMISSION_DENIED;case bu.FAILED_PRECONDITION:return pa.FAILED_PRECONDITION;case bu.ABORTED:return pa.ABORTED;case bu.OUT_OF_RANGE:return pa.OUT_OF_RANGE;case bu.UNIMPLEMENTED:return pa.UNIMPLEMENTED;case bu.DATA_LOSS:return pa.DATA_LOSS;default:return ha()}}(_u=bu||(bu={}))[_u.OK=0]="OK",_u[_u.CANCELLED=1]="CANCELLED",_u[_u.UNKNOWN=2]="UNKNOWN",_u[_u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_u[_u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_u[_u.NOT_FOUND=5]="NOT_FOUND",_u[_u.ALREADY_EXISTS=6]="ALREADY_EXISTS",_u[_u.PERMISSION_DENIED=7]="PERMISSION_DENIED",_u[_u.UNAUTHENTICATED=16]="UNAUTHENTICATED",_u[_u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_u[_u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_u[_u.ABORTED=10]="ABORTED",_u[_u.OUT_OF_RANGE=11]="OUT_OF_RANGE",_u[_u.UNIMPLEMENTED=12]="UNIMPLEMENTED",_u[_u.INTERNAL=13]="INTERNAL",_u[_u.UNAVAILABLE=14]="UNAVAILABLE",_u[_u.DATA_LOSS=15]="DATA_LOSS";class Su{constructor(t,e){this.comparator=t,this.root=e||Cu.EMPTY}insert(t,e){return new Su(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Cu.BLACK,null,null))}remove(t){return new Su(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cu.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(0===s)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ku(this.root,t,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ku(this.root,t,this.comparator,!0)}}class ku{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Cu{constructor(t,e,n,s,i){this.key=t,this.value=e,this.color=null!=n?n:Cu.RED,this.left=null!=s?s:Cu.EMPTY,this.right=null!=i?i:Cu.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,i){return new Cu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const i=n(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,e,n),null):0===i?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Cu.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===e(t,s.key)){if(s.right.isEmpty())return Cu.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Cu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Cu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ha();if(this.right.isRed())throw ha();const t=this.left.check();if(t!==this.right.check())throw ha();return t+(this.isRed()?0:1)}}Cu.EMPTY=null,Cu.RED=!0,Cu.BLACK=!1,Cu.EMPTY=new class{constructor(){this.size=0}get key(){throw ha()}get value(){throw ha()}get color(){throw ha()}get left(){throw ha()}get right(){throw ha()}copy(t,e,n,s,i){return this}insert(t,e,n){return new Cu(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Au{constructor(t){this.comparator=t,this.data=new Su(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Nu(this.data.getIterator())}getIteratorFrom(t){return new Nu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Au))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(0!==this.comparator(t,s))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Au(this.comparator);return e.data=t,e}}class Nu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Ru=new Su(Ja.comparator);function Du(){return Ru}const Lu=new Su(Ja.comparator);function Ou(){return Lu}const Pu=new Su(Ja.comparator);const Mu=new Au(Ja.comparator);function xu(...t){let e=Mu;for(const n of t)e=e.add(n);return e}const Uu=new Au(Ca);function Fu(){return Uu}class Vu{constructor(t,e,n,s,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,qu.createSynthesizedTargetChangeForCurrentChange(t,e)),new Vu(Ra.min(),n,Fu(),Du(),xu())}}class qu{constructor(t,e,n,s,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new qu(Va.EMPTY_BYTE_STRING,e,xu(),xu(),xu())}}class ju{constructor(t,e,n,s){this.$=t,this.removedTargetIds=e,this.key=n,this.F=s}}class Bu{constructor(t,e){this.targetId=t,this.O=e}}class Hu{constructor(t,e,n=Va.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class $u{constructor(){this.M=0,this.L=Gu(),this.B=Va.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=xu(),e=xu(),n=xu();return this.L.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:ha()}})),new qu(this.B,this.U,t,e,n)}H(){this.q=!1,this.L=Gu()}J(t,e){this.q=!0,this.L=this.L.insert(t,e)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Ku{constructor(t){this.et=t,this.nt=new Map,this.st=Du(),this.it=zu(),this.rt=new Au(Ca)}ot(t){for(const e of t.$)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ut(t){this.forEachTarget(t,(e=>{const n=this.ht(e);switch(t.state){case 0:this.lt(e)&&n.W(t.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(t.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(e);break;case 3:this.lt(e)&&(n.tt(),n.W(t.resumeToken));break;case 4:this.lt(e)&&(this.ft(e),n.W(t.resumeToken));break;default:ha()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach(((t,n)=>{this.lt(n)&&e(n)}))}dt(t){const e=t.targetId,n=t.O.count,s=this.wt(e);if(s){const t=s.target;if(gc(t))if(0===n){const n=new Ja(t.path);this.ct(e,n,hc.newNoDocument(n,Ra.min()))}else da(1===n);else this._t(e)!==n&&(this.ft(e),this.rt=this.rt.add(e))}}gt(t){const e=new Map;this.nt.forEach(((n,s)=>{const i=this.wt(s);if(i){if(n.current&&gc(i.target)){const e=new Ja(i.target.path);null!==this.st.get(e)||this.yt(s,e)||this.ct(s,e,hc.newNoDocument(e,t))}n.j&&(e.set(s,n.G()),n.H())}}));let n=xu();this.it.forEach(((t,e)=>{let s=!0;e.forEachWhile((t=>{const e=this.wt(t);return!e||2===e.purpose||(s=!1,!1)})),s&&(n=n.add(t))}));const s=new Vu(t,e,this.rt,this.st,n);return this.st=Du(),this.it=zu(),this.rt=new Au(Ca),s}at(t,e){if(!this.lt(t))return;const n=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,n),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,n){if(!this.lt(t))return;const s=this.ht(t);this.yt(t,e)?s.J(e,1):s.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),n&&(this.st=this.st.insert(e,n))}removeTarget(t){this.nt.delete(t)}_t(t){const e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let e=this.nt.get(t);return e||(e=new $u,this.nt.set(t,e)),e}Tt(t){let e=this.it.get(t);return e||(e=new Au(Ca),this.it=this.it.insert(t,e)),e}lt(t){const e=null!==this.wt(t);return e||aa("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new $u),this.et.getRemoteKeysForTarget(t).forEach((e=>{this.ct(t,e,null)}))}yt(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}function zu(){return new Su(Ja.comparator)}function Gu(){return new Su(Ja.comparator)}const Wu={asc:"ASCENDING",desc:"DESCENDING"},Ju={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Qu{constructor(t,e){this.databaseId=t,this.C=e}}function Xu(t,e){return t.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yu(t,e){return t.C?e.toBase64():e.toUint8Array()}function Zu(t,e){return Xu(t,e.toTimestamp())}function tl(t){return da(!!t),Ra.fromTimestamp(function(t){const e=ja(t);return new Na(e.seconds,e.nanos)}(t))}function el(t,e){return function(t){return new Ma(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function nl(t){const e=Ma.fromString(t);return da(bl(e)),e}function sl(t,e){return el(t.databaseId,e.path)}function il(t,e){const n=nl(e);if(n.get(1)!==t.databaseId.projectId)throw new ma(pa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ma(pa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ja(al(n))}function rl(t,e){return el(t.databaseId,e)}function ol(t){return new Ma(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function al(t){return da(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function cl(t,e,n){return{name:sl(t,e),fields:n.value.mapValue.fields}}function ul(t,e){return{documents:[rl(t,e.path)]}}function ll(t,e){const n={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(n.parent=rl(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=rl(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(oc(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(rc(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(oc(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(rc(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:gl(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const r=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:yl(t.field),direction:ml(t.dir)}}(t)))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(t,e){return t.C||Ga(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=fl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=fl(e.endAt)),n}function hl(t){let e=function(t){const e=nl(t);return 4===e.length?Ma.emptyPath():al(e)}(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){da(1===s);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=dl(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Ac(vl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Ga(e)?null:e}(n.limit));let c=null;n.startAt&&(c=pl(n.startAt));let u=null;return n.endAt&&(u=pl(n.endAt)),function(t,e,n,s,i,r,o,a){return new Lc(t,e,n,s,i,r,o,a)}(e,i,o,r,a,"F",c,u)}function dl(t){return t?void 0!==t.unaryFilter?[El(t)]:void 0!==t.fieldFilter?[wl(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>dl(t))).reduce(((t,e)=>t.concat(e))):ha():[]}function fl(t){return{before:t.before,values:t.position}}function pl(t){const e=!!t.before,n=t.values||[];return new kc(n,e)}function ml(t){return Wu[t]}function gl(t){return Ju[t]}function yl(t){return{fieldPath:t.canonicalString()}}function vl(t){return Ua.fromServerFormat(t.fieldPath)}function wl(t){return yc.create(vl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ha()}}(t.fieldFilter.op),t.fieldFilter.value)}function El(t){switch(t.unaryFilter.op){case"IS_NAN":const e=vl(t.unaryFilter.field);return yc.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=vl(t.unaryFilter.field);return yc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vl(t.unaryFilter.field);return yc.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=vl(t.unaryFilter.field);return yc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ha()}}function Il(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function _l(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Sl(e)),e=Tl(t.get(n),e);return Sl(e)}function Tl(t,e){let n=e;const s=t.length;for(let e=0;e<s;e++){const s=t.charAt(e);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Sl(t){return t+""}class kl{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}kl.store="owner",kl.key="owner";class Cl{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}Cl.store="mutationQueues",Cl.keyPath="userId";class Al{constructor(t,e,n,s,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=s,this.mutations=i}}Al.store="mutations",Al.keyPath="batchId",Al.userMutationsIndex="userMutationsIndex",Al.userMutationsKeyPath=["userId","batchId"];class Nl{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,_l(e)]}static key(t,e,n){return[t,_l(e),n]}}Nl.store="documentMutations",Nl.PLACEHOLDER=new Nl;class Rl{constructor(t,e,n,s,i,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=s,this.readTime=i,this.parentPath=r}}Rl.store="remoteDocuments",Rl.readTimeIndex="readTimeIndex",Rl.readTimeIndexPath="readTime",Rl.collectionReadTimeIndex="collectionReadTimeIndex",Rl.collectionReadTimeIndexPath=["parentPath","readTime"];class Dl{constructor(t){this.byteSize=t}}Dl.store="remoteDocumentGlobal",Dl.key="remoteDocumentGlobalKey";class Ll{constructor(t,e,n,s,i,r,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=s,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=r,this.query=o}}Ll.store="targets",Ll.keyPath="targetId",Ll.queryTargetsIndexName="queryTargetsIndex",Ll.queryTargetsKeyPath=["canonicalId","targetId"];class Ol{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Ol.store="targetDocuments",Ol.keyPath=["targetId","path"],Ol.documentTargetsIndex="documentTargetsIndex",Ol.documentTargetsKeyPath=["path","targetId"];class Pl{constructor(t,e,n,s){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=s}}Pl.key="targetGlobalKey",Pl.store="targetGlobal";class Ml{constructor(t,e){this.collectionId=t,this.parent=e}}Ml.store="collectionParents",Ml.keyPath=["collectionId","parent"];class xl{constructor(t,e,n,s){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=s}}xl.store="clientMetadata",xl.keyPath="clientId";class Ul{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}Ul.store="bundles",Ul.keyPath="bundleId";class Fl{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}Fl.store="namedQueries",Fl.keyPath="name",Cl.store,Al.store,Nl.store,Rl.store,Ll.store,kl.store,Pl.store,Ol.store,xl.store,Dl.store,Ml.store,Ul.store,Fl.store;class Vl{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ha(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Vl(((n,s)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,s)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Vl?e:Vl.resolve(e)}catch(t){return Vl.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Vl.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Vl.reject(e)}static resolve(t){return new Vl(((e,n)=>{e(t)}))}static reject(t){return new Vl(((e,n)=>{n(t)}))}static waitFor(t){return new Vl(((e,n)=>{let s=0,i=0,r=!1;t.forEach((t=>{++s,t.next((()=>{++i,r&&i===s&&e()}),(t=>n(t)))})),r=!0,i===s&&e()}))}static or(t){let e=Vl.resolve(!1);for(const n of t)e=e.next((t=>t?Vl.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,s)=>{n.push(e.call(this,t,s))})),this.waitFor(n)}}function ql(t){return"IndexedDbTransactionError"===t.name}class jl{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const s=this.mutations[e];s.key.isEqual(t.key)&&uu(s,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&lu(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&lu(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),s=n;this.applyToLocalView(s),n.isValidDocument()||s.convertToNoDocument(Ra.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),xu())}isEqual(t){return this.batchId===t.batchId&&Aa(this.mutations,t.mutations,((t,e)=>du(t,e)))&&Aa(this.baseMutations,t.baseMutations,((t,e)=>du(t,e)))}}class Bl{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){da(t.mutations.length===n.length);let s=Pu;const i=t.mutations;for(let t=0;t<i.length;t++)s=s.insert(i[t].key,n[t].version);return new Bl(t,e,n,s)}}class Hl{constructor(t,e,n,s,i=Ra.min(),r=Ra.min(),o=Va.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(t){return new Hl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Hl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class $l{constructor(t){this.Gt=t}}function Kl(t){const e=hl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new Lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class zl{constructor(){this.zt=new Gl}addToCollectionParentIndex(t,e){return this.zt.add(e),Vl.resolve()}getCollectionParents(t,e){return Vl.resolve(this.zt.getEntries(e))}}class Gl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new Au(Ma.comparator),i=!s.has(n);return this.index[e]=s.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new Au(Ma.comparator)).toArray()}}class Wl{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Wl(t,Wl.DEFAULT_COLLECTION_PERCENTILE,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Wl.DEFAULT_COLLECTION_PERCENTILE=10,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wl.DEFAULT=new Wl(41943040,Wl.DEFAULT_COLLECTION_PERCENTILE,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wl.DISABLED=new Wl(-1,0,0);class Jl{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new Jl(0)}static re(){return new Jl(-1)}}async function Ql(t){if(t.code!==pa.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;aa("LocalStore","Unexpectedly lost primary lease")}class Xl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,s]of n)if(this.equalsFn(e,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(void 0!==s){for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],t))return void(s[n]=[t,e]);s.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return 1===n.length?delete this.inner[e]:n.splice(s,1),!0;return!1}forEach(t){La(this.inner,((e,n)=>{for(const[e,s]of n)t(e,s)}))}isEmpty(){return Oa(this.inner)}}class Yl{constructor(t,e,n){this.Je=t,this.An=e,this.Jt=n}Rn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Pn(t,e,n)))}Pn(t,e,n){return this.Je.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}bn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}vn(t,e){return this.Je.getEntries(t,e).next((e=>this.Vn(t,e).next((()=>e))))}Vn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.bn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Ja.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Sn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Dn(t,e,n):this.Cn(t,e,n)}Sn(t,e){return this.Rn(t,new Ja(e)).next((t=>{let e=Ou();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Dn(t,e,n){const s=e.collectionGroup;let i=Ou();return this.Jt.getCollectionParents(t,s).next((r=>Vl.forEach(r,(r=>{const o=function(t,e){return new Lc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,r.child(s));return this.Cn(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}Cn(t,e,n){let s,i;return this.Je.getDocumentsMatchingQuery(t,e,n).next((n=>(s=n,this.An.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(i=e,this.Nn(t,i,s).next((t=>{s=t;for(const t of i)for(const e of t.mutations){const n=e.key;let i=s.get(n);null==i&&(i=hc.newInvalidDocument(n),s=s.insert(n,i)),lu(e,i,t.localWriteTime),i.isFoundDocument()||(s=s.remove(n))}}))))).next((()=>(s.forEach(((t,n)=>{jc(e,n)||(s=s.remove(t))})),s)))}Nn(t,e,n){let s=xu();for(const t of e)for(const e of t.mutations)e instanceof mu&&null===n.get(e.key)&&(s=s.add(e.key));let i=n;return this.Je.getEntries(t,s).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))})),i)))}}class Zl{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.kn=n,this.xn=s}static $n(t,e){let n=xu(),s=xu();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:s=s.add(t.doc.key)}return new Zl(t,e.fromCache,n,s)}}class th{Fn(t){this.On=t}getDocumentsMatchingQuery(t,e,n,s){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ra.min())?this.Mn(t,e):this.On.vn(t,s).next((i=>{const r=this.Ln(e,i);return(Pc(e)||Mc(e))&&this.Bn(e.limitType,r,s,n)?this.Mn(t,e):(oa()<=K.DEBUG&&aa("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qc(e)),this.On.getDocumentsMatchingQuery(t,e,n).next((t=>(r.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Ln(t,e){let n=new Au(Bc(t));return e.forEach(((e,s)=>{jc(t,s)&&(n=n.add(s))})),n}Bn(t,e,n,s){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Mn(t,e){return oa()<=K.DEBUG&&aa("QueryEngine","Using full collection scan to execute query:",qc(e)),this.On.getDocumentsMatchingQuery(t,e,Ra.min())}}class eh{constructor(t,e,n,s){this.persistence=t,this.Un=e,this.k=s,this.qn=new Su(Ca),this.Kn=new Xl((t=>pc(t)),mc),this.jn=Ra.min(),this.An=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Yl(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.qn)))}}async function nh(t,e){const n=fa(t);let s=n.An,i=n.Wn;const r=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.An.getAllMutationBatches(t).next((o=>(r=o,s=n.persistence.getMutationQueue(e),i=new Yl(n.Qn,s,n.persistence.getIndexManager()),s.getAllMutationBatches(t)))).next((e=>{const n=[],s=[];let o=xu();for(const t of r){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.vn(t,o).next((t=>({Gn:t,removedBatchIds:n,addedBatchIds:s})))}))}));return n.An=s,n.Wn=i,n.Un.Fn(n.Wn),r}function sh(t){const e=fa(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.He.getLastRemoteSnapshotVersion(t)))}function ih(t,e){const n=fa(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.An.getNextMutationBatchAfterBatchId(t,e))))}async function rh(t,e,n){const s=fa(t),i=s.qn.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(t=>s.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!ql(t))throw t;aa("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}s.qn=s.qn.remove(e),s.Kn.delete(i.target)}function oh(t,e,n){const s=fa(t);let i=Ra.min(),r=xu();return s.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const s=fa(t),i=s.Kn.get(n);return void 0!==i?Vl.resolve(s.qn.get(i)):s.He.getTargetData(e,n)}(s,t,Uc(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>s.Un.getDocumentsMatchingQuery(t,e,n?i:Ra.min(),n?r:xu()))).next((t=>({documents:t,zn:r})))))}class ah{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,e){return Vl.resolve(this.Xn.get(e))}saveBundleMetadata(t,e){var n;return this.Xn.set(e.id,{id:(n=e).id,version:n.version,createTime:tl(n.createTime)}),Vl.resolve()}getNamedQuery(t,e){return Vl.resolve(this.Zn.get(e))}saveNamedQuery(t,e){return this.Zn.set(e.name,function(t){return{name:t.name,query:Kl(t.bundledQuery),readTime:tl(t.readTime)}}(e)),Vl.resolve()}}class ch{constructor(){this.ts=new Au(uh.es),this.ns=new Au(uh.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,e){const n=new uh(t,e);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.os(new uh(t,e))}cs(t,e){t.forEach((t=>this.removeReference(t,e)))}us(t){const e=new Ja(new Ma([])),n=new uh(e,t),s=new uh(e,t+1),i=[];return this.ns.forEachInRange([n,s],(t=>{this.os(t),i.push(t.key)})),i}hs(){this.ts.forEach((t=>this.os(t)))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const e=new Ja(new Ma([])),n=new uh(e,t),s=new uh(e,t+1);let i=xu();return this.ns.forEachInRange([n,s],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new uh(t,0),n=this.ts.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class uh{constructor(t,e){this.key=t,this.fs=e}static es(t,e){return Ja.comparator(t.key,e.key)||Ca(t.fs,e.fs)}static ss(t,e){return Ca(t.fs,e.fs)||Ja.comparator(t.key,e.key)}}class lh{constructor(t,e){this.Jt=t,this.referenceDelegate=e,this.An=[],this.ds=1,this.ws=new Au(uh.es)}checkEmpty(t){return Vl.resolve(0===this.An.length)}addMutationBatch(t,e,n,s){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const r=new jl(i,e,n,s);this.An.push(r);for(const e of s)this.ws=this.ws.add(new uh(e.key,i)),this.Jt.addToCollectionParentIndex(t,e.key.path.popLast());return Vl.resolve(r)}lookupMutationBatch(t,e){return Vl.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.gs(n),i=s<0?0:s;return Vl.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return Vl.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(t){return Vl.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new uh(e,0),s=new uh(e,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,s],(t=>{const e=this._s(t.fs);i.push(e)})),Vl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Au(Ca);return e.forEach((t=>{const e=new uh(t,0),s=new uh(t,Number.POSITIVE_INFINITY);this.ws.forEachInRange([e,s],(t=>{n=n.add(t.fs)}))})),Vl.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let i=n;Ja.isDocumentKey(i)||(i=i.child(""));const r=new uh(new Ja(i),0);let o=new Au(Ca);return this.ws.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===s&&(o=o.add(t.fs)),!0)}),r),Vl.resolve(this.ys(o))}ys(t){const e=[];return t.forEach((t=>{const n=this._s(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){da(0===this.ps(e.batchId,"removed")),this.An.shift();let n=this.ws;return Vl.forEach(e.mutations,(s=>{const i=new uh(s.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.ws=n}))}ee(t){}containsKey(t,e){const n=new uh(e,0),s=this.ws.firstAfterOrEqual(n);return Vl.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.An.length,Vl.resolve()}ps(t,e){return this.gs(t)}gs(t){return 0===this.An.length?0:t-this.An[0].batchId}_s(t){const e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}class hh{constructor(t,e){this.Jt=t,this.Ts=e,this.docs=new Su(Ja.comparator),this.size=0}addEntry(t,e,n){const s=e.key,i=this.docs.get(s),r=i?i.size:0,o=this.Ts(e);return this.docs=this.docs.insert(s,{document:e.clone(),size:o,readTime:n}),this.size+=o-r,this.Jt.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Vl.resolve(n?n.document.clone():hc.newInvalidDocument(e))}getEntries(t,e){let n=Du();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():hc.newInvalidDocument(t))})),Vl.resolve(n)}getDocumentsMatchingQuery(t,e,n){let s=Du();const i=new Ja(e.path.child("")),r=this.docs.getIteratorFrom(i);for(;r.hasNext();){const{key:t,value:{document:i,readTime:o}}=r.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||jc(e,i)&&(s=s.insert(i.key,i.clone()))}return Vl.resolve(s)}Es(t,e){return Vl.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new dh(this)}getSize(t){return Vl.resolve(this.size)}}class dh extends class{constructor(){this.changes=new Xl((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Ra.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:hc.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Vl.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}{constructor(t){super(),this.De=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.document.isValidDocument()?e.push(this.De.addEntry(t,s.document,this.getReadTime(n))):this.De.removeEntry(n)})),Vl.waitFor(e)}getFromCache(t,e){return this.De.getEntry(t,e)}getAllFromCache(t,e){return this.De.getEntries(t,e)}}class fh{constructor(t){this.persistence=t,this.Is=new Xl((t=>pc(t)),mc),this.lastRemoteSnapshotVersion=Ra.min(),this.highestTargetId=0,this.As=0,this.Rs=new ch,this.targetCount=0,this.Ps=Jl.ie()}forEachTarget(t,e){return this.Is.forEach(((t,n)=>e(n))),Vl.resolve()}getLastRemoteSnapshotVersion(t){return Vl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Vl.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.Ps.next(),Vl.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.As&&(this.As=e),Vl.resolve()}ce(t){this.Is.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ps=new Jl(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,Vl.resolve()}updateTargetData(t,e){return this.ce(e),Vl.resolve()}removeTargetData(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,Vl.resolve()}removeTargets(t,e,n){let s=0;const i=[];return this.Is.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Is.delete(r),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)})),Vl.waitFor(i).next((()=>s))}getTargetCount(t){return Vl.resolve(this.targetCount)}getTargetData(t,e){const n=this.Is.get(e)||null;return Vl.resolve(n)}addMatchingKeys(t,e,n){return this.Rs.rs(e,n),Vl.resolve()}removeMatchingKeys(t,e,n){this.Rs.cs(e,n);const s=this.persistence.referenceDelegate,i=[];return s&&e.forEach((e=>{i.push(s.markPotentiallyOrphaned(t,e))})),Vl.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Rs.us(e),Vl.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Rs.ls(e);return Vl.resolve(n)}containsKey(t,e){return Vl.resolve(this.Rs.containsKey(e))}}class ph{constructor(t,e){this.bs={},this.Be=new Ta(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new fh(this),this.Jt=new zl,this.Je=function(t,e){return new hh(t,e)}(this.Jt,(t=>this.referenceDelegate.vs(t))),this.k=new $l(e),this.Ye=new ah(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new lh(this.Jt,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,e,n){aa("MemoryPersistence","Starting transaction:",t);const s=new mh(this.Be.next());return this.referenceDelegate.Vs(),n(s).next((t=>this.referenceDelegate.Ss(s).next((()=>t)))).toPromise().then((t=>(s.raiseOnCommittedEvent(),t)))}Ds(t,e){return Vl.or(Object.values(this.bs).map((n=>()=>n.containsKey(t,e))))}}class mh extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}{constructor(t){super(),this.currentSequenceNumber=t}}class gh{constructor(t){this.persistence=t,this.Cs=new ch,this.Ns=null}static ks(t){return new gh(t)}get xs(){if(this.Ns)return this.Ns;throw ha()}addReference(t,e,n){return this.Cs.addReference(n,e),this.xs.delete(n.toString()),Vl.resolve()}removeReference(t,e,n){return this.Cs.removeReference(n,e),this.xs.add(n.toString()),Vl.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Vl.resolve()}removeTarget(t,e){this.Cs.us(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Vs(){this.Ns=new Set}Ss(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vl.forEach(this.xs,(n=>{const s=Ja.fromPath(n);return this.$s(t,s).next((t=>{t||e.removeEntry(s)}))})).next((()=>(this.Ns=null,e.apply(t))))}updateLimboDocument(t,e){return this.$s(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}vs(t){return 0}$s(t,e){return Vl.or([()=>Vl.resolve(this.Cs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ds(t,e)])}}class yh{constructor(){this.activeTargetIds=Fu()}Ms(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class vh{constructor(){this.pi=new yh,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}updateQueryState(t,e,n){this.Ti[t]=e}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new yh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class wh{Ei(t){}shutdown(){}}class Eh{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){aa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Pi(){aa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ih={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class bh{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Fi(t){this.ki(t)}Oi(t){this.xi(t)}}class _h extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Mi=e+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,e,n,s,i){const r=this.Ui(t,e);aa("RestConnection","Sending: ",r,n);const o={};return this.qi(o,s,i),this.Ki(t,r,o,n).then((t=>(aa("RestConnection","Received: ",t),t)),(e=>{throw ua("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}ji(t,e,n,s,i){return this.Bi(t,e,n,s,i)}qi(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ia,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Ui(t,e){const n=Ih[t];return`${this.Mi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,e,n,s){return new Promise(((i,r)=>{const o=new ea;o.listenOnce(Qo.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Jo.NO_ERROR:const e=o.getResponseJson();aa("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Jo.TIMEOUT:aa("Connection",'RPC "'+t+'" timed out'),r(new ma(pa.DEADLINE_EXCEEDED,"Request time out"));break;case Jo.HTTP_ERROR:const n=o.getStatus();if(aa("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(pa).indexOf(e)>=0?e:pa.UNKNOWN}(t.status);r(new ma(e,t.message))}else r(new ma(pa.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new ma(pa.UNAVAILABLE,"Connection failed."));break;default:ha()}}finally{aa("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(s);o.send(e,"POST",a,n,15)}))}Qi(t,e,n){const s=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Go(),r=Wo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Zo({})),this.qi(o.initMessageHeaders,e,n),S()||C()||T().indexOf("Electron/")>=0||A()||T().indexOf("MSAppHost/")>=0||k()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=s.join("");aa("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,l=!1;const h=new bh({Vi:t=>{l?aa("Connection","Not sending because WebChannel is closed:",t):(u||(aa("Connection","Opening WebChannel transport."),c.open(),u=!0),aa("Connection","WebChannel sending:",t),c.send(t))},Si:()=>c.close()}),d=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return d(c,ta.EventType.OPEN,(()=>{l||aa("Connection","WebChannel transport opened.")})),d(c,ta.EventType.CLOSE,(()=>{l||(l=!0,aa("Connection","WebChannel transport closed"),h.Fi())})),d(c,ta.EventType.ERROR,(t=>{l||(l=!0,ua("Connection","WebChannel transport errored:",t),h.Fi(new ma(pa.UNAVAILABLE,"The operation could not be completed")))})),d(c,ta.EventType.MESSAGE,(t=>{var e;if(!l){const n=t.data[0];da(!!n);const s=n,i=s.error||(null===(e=s[0])||void 0===e?void 0:e.error);if(i){aa("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=bu[t];if(void 0!==e)return Tu(e)}(t),n=i.message;void 0===e&&(e=pa.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,h.Fi(new ma(e,n)),c.close()}else aa("Connection","WebChannel received:",n),h.Oi(n)}})),d(r,Xo.STAT_EVENT,(t=>{t.stat===Yo.PROXY?aa("Connection","Detected buffering proxy"):t.stat===Yo.NOPROXY&&aa("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.$i()}),0),h}}function Th(){return"undefined"!=typeof document?document:null}function Sh(t){return new Qu(t,!0)}class kh{constructor(t,e,n=1e3,s=1.5,i=6e4){this.Oe=t,this.timerId=e,this.Wi=n,this.Gi=s,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const e=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),s=Math.max(0,e-n);s>0&&aa("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Hi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,s,(()=>(this.Yi=Date.now(),t()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Ch{constructor(t,e,n,s,i,r,o,a){this.Oe=t,this.nr=n,this.sr=s,this.ir=i,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new kh(t,e)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(()=>this.mr())))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,e){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():e&&e.code===pa.RESOURCE_EXHAUSTED?(ca(e.toString()),ca("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):e&&e.code===pa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(e)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),e=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.rr===e&&this.Ir(t,n)}),(e=>{t((()=>{const t=new ma(pa.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ar(t)}))}))}Ir(t,e){const n=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di((()=>{n((()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,(()=>(this.lr()&&(this.state=3),Promise.resolve()))),this.listener.Di())))})),this.stream.Ni((t=>{n((()=>this.Ar(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}dr(){this.state=5,this.ur.Zi((async()=>{this.state=0,this.start()}))}Ar(t){return aa("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return e=>{this.Oe.enqueueAndForget((()=>this.rr===t?e():(aa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ah extends Ch{constructor(t,e,n,s,i,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,r),this.k=i}Rr(t,e){return this.ir.Qi("Listen",t,e)}onMessage(t){this.ur.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ha()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(t,e){return t.C?(da(void 0===e||"string"==typeof e),Va.fromBase64String(e||"")):(da(void 0===e||e instanceof Uint8Array),Va.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?pa.UNKNOWN:Tu(t.code);return new ma(e,t.message||"")}(o);n=new Hu(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=il(t,s.document.name),r=tl(s.document.updateTime),o=new uc({mapValue:{fields:s.document.fields}}),a=hc.newFoundDocument(i,r,o),c=s.targetIds||[],u=s.removedTargetIds||[];n=new ju(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=il(t,s.document),r=s.readTime?tl(s.readTime):Ra.min(),o=hc.newNoDocument(i,r),a=s.removedTargetIds||[];n=new ju([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=il(t,s.document),r=s.removedTargetIds||[];n=new ju([],r,i,null)}else{if(!("filter"in e))return ha();{e.filter;const t=e.filter;t.targetId;const s=t.count||0,i=new Iu(s),r=t.targetId;n=new Bu(r,i)}}return n}(this.k,t),n=function(t){if(!("targetChange"in t))return Ra.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Ra.min():e.readTime?tl(e.readTime):Ra.min()}(t);return this.listener.Pr(e,n)}br(t){const e={};e.database=ol(this.k),e.addTarget=function(t,e){let n;const s=e.target;return n=gc(s)?{documents:ul(t,s)}:{query:ll(t,s)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Yu(t,e.resumeToken):e.snapshotVersion.compareTo(Ra.min())>0&&(n.readTime=Xu(t,e.snapshotVersion.toTimestamp())),n}(this.k,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ha()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,t);n&&(e.labels=n),this.gr(e)}vr(t){const e={};e.database=ol(this.k),e.removeTarget=t,this.gr(e)}}class Nh extends Ch{constructor(t,e,n,s,i,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,r),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,e){return this.ir.Qi("Write",t,e)}onMessage(t){if(da(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const e=function(t,e){return t&&t.length>0?(da(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?tl(t.updateTime):tl(e);return n.isEqual(Ra.min())&&(n=tl(e)),new ru(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=tl(t.commitTime);return this.listener.Cr(n,e)}return da(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=ol(this.k),this.gr(t)}Dr(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof pu)n={update:cl(t,e.key,e.value)};else if(e instanceof wu)n={delete:sl(t,e.key)};else if(e instanceof mu)n={update:cl(t,e.key,e.data),updateMask:Il(e.fieldMask)};else{if(!(e instanceof Eu))return ha();n={verify:sl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Xc)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Yc)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tu)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof nu)return{fieldPath:e.field.canonicalString(),increment:n.N};throw ha()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Zu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ha()}(t,e.precondition)),n}(this.k,t)))};this.gr(e)}}class Rh extends class{}{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.ir=n,this.k=s,this.$r=!1}Fr(){if(this.$r)throw new ma(pa.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.Bi(t,e,n,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===pa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ma(pa.UNKNOWN,t.toString())}))}ji(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.ir.ji(t,e,n,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===pa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ma(pa.UNKNOWN,t.toString())}))}terminate(){this.$r=!0}}class Dh{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve()))))}Kr(t){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Or=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(ca(e),this.Lr=!1):aa("OnlineStateTracker",e)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Lh{constructor(t,e,n,s,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei((t=>{n.enqueueAndForget((async()=>{jh(this)&&(aa("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=fa(t);e.Gr.add(4),await Ph(e),e.Jr.set("Unknown"),e.Gr.delete(4),await Oh(e)}(this))}))})),this.Jr=new Dh(n,s)}}async function Oh(t){if(jh(t))for(const e of t.zr)await e(!0)}async function Ph(t){for(const e of t.zr)await e(!1)}function Mh(t,e){const n=fa(t);n.Wr.has(e.targetId)||(n.Wr.set(e.targetId,e),qh(n)?Vh(n):sd(n).lr()&&Uh(n,e))}function xh(t,e){const n=fa(t),s=sd(n);n.Wr.delete(e),s.lr()&&Fh(n,e),0===n.Wr.size&&(s.lr()?s._r():jh(n)&&n.Jr.set("Unknown"))}function Uh(t,e){t.Yr.X(e.targetId),sd(t).br(e)}function Fh(t,e){t.Yr.X(e),sd(t).vr(e)}function Vh(t){t.Yr=new Ku({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Wr.get(e)||null}),sd(t).start(),t.Jr.Br()}function qh(t){return jh(t)&&!sd(t).hr()&&t.Wr.size>0}function jh(t){return 0===fa(t).Gr.size}function Bh(t){t.Yr=void 0}async function Hh(t){t.Wr.forEach(((e,n)=>{Uh(t,e)}))}async function $h(t,e){Bh(t),qh(t)?(t.Jr.Kr(e),Vh(t)):t.Jr.set("Unknown")}async function Kh(t,e,n){if(t.Jr.set("Online"),e instanceof Hu&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const s of e.targetIds)t.Wr.has(s)&&(await t.remoteSyncer.rejectListen(s,n),t.Wr.delete(s),t.Yr.removeTarget(s))}(t,e)}catch(n){aa("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await zh(t,n)}else if(e instanceof ju?t.Yr.ot(e):e instanceof Bu?t.Yr.dt(e):t.Yr.ut(e),!n.isEqual(Ra.min()))try{const e=await sh(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Yr.gt(e);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Wr.get(s);i&&t.Wr.set(s,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.Wr.get(e);if(!n)return;t.Wr.set(e,n.withResumeToken(Va.EMPTY_BYTE_STRING,n.snapshotVersion)),Fh(t,e);const s=new Hl(n.target,e,1,n.sequenceNumber);Uh(t,s)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){aa("RemoteStore","Failed to raise snapshot:",e),await zh(t,e)}}async function zh(t,e,n){if(!ql(e))throw e;t.Gr.add(1),await Ph(t),t.Jr.set("Offline"),n||(n=()=>sh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{aa("RemoteStore","Retrying IndexedDB access"),await n(),t.Gr.delete(1),await Oh(t)}))}function Gh(t,e){return e().catch((n=>zh(t,n,e)))}async function Wh(t){const e=fa(t),n=id(e);let s=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;Jh(e);)try{const t=await ih(e.localStore,s);if(null===t){0===e.Qr.length&&n._r();break}s=t.batchId,Qh(e,t)}catch(t){await zh(e,t)}Xh(e)&&Yh(e)}function Jh(t){return jh(t)&&t.Qr.length<10}function Qh(t,e){t.Qr.push(e);const n=id(t);n.lr()&&n.Sr&&n.Dr(e.mutations)}function Xh(t){return jh(t)&&!id(t).hr()&&t.Qr.length>0}function Yh(t){id(t).start()}async function Zh(t){id(t).kr()}async function td(t){const e=id(t);for(const n of t.Qr)e.Dr(n.mutations)}async function ed(t,e,n){const s=t.Qr.shift(),i=Bl.from(s,e,n);await Gh(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Wh(t)}async function nd(t,e){e&&id(t).Sr&&await async function(t,e){if(function(t){switch(t){default:return ha();case pa.CANCELLED:case pa.UNKNOWN:case pa.DEADLINE_EXCEEDED:case pa.RESOURCE_EXHAUSTED:case pa.INTERNAL:case pa.UNAVAILABLE:case pa.UNAUTHENTICATED:return!1;case pa.INVALID_ARGUMENT:case pa.NOT_FOUND:case pa.ALREADY_EXISTS:case pa.PERMISSION_DENIED:case pa.FAILED_PRECONDITION:case pa.ABORTED:case pa.OUT_OF_RANGE:case pa.UNIMPLEMENTED:case pa.DATA_LOSS:return!0}}(n=e.code)&&n!==pa.ABORTED){const n=t.Qr.shift();id(t).wr(),await Gh(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Wh(t)}var n}(t,e),Xh(t)&&Yh(t)}function sd(t){return t.Xr||(t.Xr=function(t,e,n){const s=fa(t);return s.Fr(),new Ah(e,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(t.datastore,t.asyncQueue,{Di:Hh.bind(null,t),Ni:$h.bind(null,t),Pr:Kh.bind(null,t)}),t.zr.push((async e=>{e?(t.Xr.wr(),qh(t)?Vh(t):t.Jr.set("Unknown")):(await t.Xr.stop(),Bh(t))}))),t.Xr}function id(t){return t.Zr||(t.Zr=function(t,e,n){const s=fa(t);return s.Fr(),new Nh(e,s.ir,s.authCredentials,s.appCheckCredentials,s.k,n)}(t.datastore,t.asyncQueue,{Di:Zh.bind(null,t),Ni:nd.bind(null,t),Nr:td.bind(null,t),Cr:ed.bind(null,t)}),t.zr.push((async e=>{e?(t.Zr.wr(),await Wh(t)):(await t.Zr.stop(),t.Qr.length>0&&(aa("RemoteStore",`Stopping write stream with ${t.Qr.length} pending writes`),t.Qr=[]))}))),t.Zr}class rd{constructor(t,e,n,s,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,s,i){const r=Date.now()+n,o=new rd(t,e,r,s,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ma(pa.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(t,e){if(ca("AsyncQueue",`${e}: ${t}`),ql(t))return new ma(pa.UNAVAILABLE,`${e}: ${t}`);throw t}class ad{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ja.comparator(e.key,n.key):(t,e)=>Ja.comparator(t.key,e.key),this.keyedMap=Ou(),this.sortedSet=new Su(this.comparator)}static emptySet(t){return new ad(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ad))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(!t.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new ad;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class cd{constructor(){this.eo=new Su(Ja.comparator)}track(t){const e=t.doc.key,n=this.eo.get(e);n?0!==t.type&&3===n.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==n.type?this.eo=this.eo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.eo=this.eo.remove(e):1===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):ha():this.eo=this.eo.insert(e,t)}no(){const t=[];return this.eo.inorderTraversal(((e,n)=>{t.push(n)})),t}}class ud{constructor(t,e,n,s,i,r,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,s){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new ud(t,e,ad.emptySet(e),i,n,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Fc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class ld{constructor(){this.so=void 0,this.listeners=[]}}class hd{constructor(){this.queries=new Xl((t=>Vc(t)),Fc),this.onlineState="Unknown",this.io=new Set}}async function dd(t,e){const n=fa(t),s=e.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new ld),i)try{r.so=await n.onListen(s)}catch(t){const n=od(t,`Initialization of query '${qc(e.query)}' failed`);return void e.onError(n)}n.queries.set(s,r),r.listeners.push(e),e.ro(n.onlineState),r.so&&e.oo(r.so)&&gd(n)}async function fd(t,e){const n=fa(t),s=e.query;let i=!1;const r=n.queries.get(s);if(r){const t=r.listeners.indexOf(e);t>=0&&(r.listeners.splice(t,1),i=0===r.listeners.length)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function pd(t,e){const n=fa(t);let s=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.oo(t)&&(s=!0);i.so=t}}s&&gd(n)}function md(t,e,n){const s=fa(t),i=s.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);s.queries.delete(e)}function gd(t){t.io.forEach((t=>{t.next()}))}class yd{constructor(t,e,n){this.query=t,this.ao=e,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new ud(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.ho(t)&&(this.ao.next(t),e=!0):this.lo(t,this.onlineState)&&(this.fo(t),e=!0),this.uo=t,e}onError(t){this.ao.error(t)}ro(t){this.onlineState=t;let e=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}lo(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.wo&&n||t.docs.isEmpty()&&"Offline"!==e)}ho(t){if(t.docChanges.length>0)return!0;const e=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}fo(t){t=ud.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}class vd{constructor(t){this.key=t}}class wd{constructor(t){this.key=t}}class Ed{constructor(t,e){this.query=t,this.To=e,this.Eo=null,this.current=!1,this.Io=xu(),this.mutatedKeys=xu(),this.Ao=Bc(t),this.Ro=new ad(this.Ao)}get Po(){return this.To}bo(t,e){const n=e?e.vo:new cd,s=e?e.Ro:this.Ro;let i=e?e.mutatedKeys:this.mutatedKeys,r=s,o=!1;const a=Pc(this.query)&&s.size===this.query.limit?s.last():null,c=Mc(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((t,e)=>{const u=s.get(t),l=jc(this.query,e)?e:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Vo(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Ao(l,a)>0||c&&this.Ao(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(r=r.add(l),i=d?i.add(t):i.delete(t)):(r=r.delete(t),i=i.delete(t)))})),Pc(this.query)||Mc(this.query))for(;r.size>this.query.limit;){const t=Pc(this.query)?r.last():r.first();r=r.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ro:r,vo:n,Bn:o,mutatedKeys:i}}Vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const s=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const i=t.vo.no();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ha()}};return n(t)-n(e)}(t.type,e.type)||this.Ao(t.doc,e.doc))),this.So(n);const r=e?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new ud(this.query,t.Ro,s,i,t.mutatedKeys,0===o,a,!1),Co:r}:{Co:r}}ro(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new cd,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach((t=>this.To=this.To.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.To=this.To.delete(t))),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=xu(),this.Ro.forEach((t=>{this.No(t.key)&&(this.Io=this.Io.add(t.key))}));const e=[];return t.forEach((t=>{this.Io.has(t)||e.push(new wd(t))})),this.Io.forEach((n=>{t.has(n)||e.push(new vd(n))})),e}ko(t){this.To=t.zn,this.Io=xu();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return ud.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Id{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class bd{constructor(t){this.key=t,this.$o=!1}}class _d{constructor(t,e,n,s,i,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=r,this.Fo={},this.Oo=new Xl((t=>Vc(t)),Fc),this.Mo=new Map,this.Lo=new Set,this.Bo=new Su(Ja.comparator),this.Uo=new Map,this.qo=new ch,this.Ko={},this.jo=new Map,this.Qo=Jl.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function Td(t,e){const n=function(t){const e=fa(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ad.bind(null,e),e.Fo.Pr=pd.bind(null,e.eventManager),e.Fo.zo=md.bind(null,e.eventManager),e}(t);let s,i;const r=n.Oo.get(e);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.xo();else{const t=await function(t,e){const n=fa(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let s;return n.He.getTargetData(t,e).next((i=>i?(s=i,Vl.resolve(s)):n.He.allocateTargetId(t).next((i=>(s=new Hl(e,i,0,t.currentSequenceNumber),n.He.addTargetData(t,s).next((()=>s)))))))})).then((t=>{const s=n.qn.get(t.targetId);return(null===s||t.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qn=n.qn.insert(t.targetId,t),n.Kn.set(e,t.targetId)),t}))}(n.localStore,Uc(e)),r=n.sharedClientState.addLocalQueryTarget(t.targetId);s=t.targetId,i=await async function(t,e,n,s){t.Go=(e,n,s)=>async function(t,e,n,s){let i=e.view.bo(n);i.Bn&&(i=await oh(t.localStore,e.query,!1).then((({documents:t})=>e.view.bo(t,i))));const r=s&&s.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,r);return Md(t,e.targetId,o.Co),o.snapshot}(t,e,n,s);const i=await oh(t.localStore,e,!0),r=new Ed(e,i.zn),o=r.bo(i.documents),a=qu.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==t.onlineState),c=r.applyChanges(o,t.isPrimaryClient,a);Md(t,n,c.Co);const u=new Id(e,n,r);return t.Oo.set(e,u),t.Mo.has(n)?t.Mo.get(n).push(e):t.Mo.set(n,[e]),c.snapshot}(n,e,s,"current"===r),n.isPrimaryClient&&Mh(n.remoteStore,t)}return i}async function Sd(t,e){const n=fa(t),s=n.Oo.get(e),i=n.Mo.get(s.targetId);if(i.length>1)return n.Mo.set(s.targetId,i.filter((t=>!Fc(t,e)))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await rh(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),xh(n.remoteStore,s.targetId),Od(n,s.targetId)})).catch(Ql)):(Od(n,s.targetId),await rh(n.localStore,s.targetId,!0))}async function kd(t,e){const n=fa(t);try{const t=await function(t,e){const n=fa(t),s=e.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];e.targetChanges.forEach(((e,r)=>{const a=i.get(r);if(!a)return;o.push(n.He.removeMatchingKeys(t,e.removedDocuments,r).next((()=>n.He.addMatchingKeys(t,e.addedDocuments,r))));const c=e.resumeToken;if(c.approximateByteSize()>0){const u=a.withResumeToken(c,s).withSequenceNumber(t.currentSequenceNumber);i=i.insert(r,u),function(t,e,n){return da(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,e)&&o.push(n.He.updateTargetData(t,u))}}));let a=Du();if(e.documentUpdates.forEach(((s,i)=>{e.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,s))})),o.push(function(t,e,n,s,i){let r=xu();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Du();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==i?void 0:i.get(n))||s;o.isNoDocument()&&o.version.isEqual(Ra.min())?(e.removeEntry(n,c),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),r=r.insert(n,o)):aa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),r}))}(t,r,e.documentUpdates,s,void 0).next((t=>{a=t}))),!s.isEqual(Ra.min())){const e=n.He.getLastRemoteSnapshotVersion(t).next((e=>n.He.setTargetsMetadata(t,t.currentSequenceNumber,s)));o.push(e)}return Vl.waitFor(o).next((()=>r.apply(t))).next((()=>n.Wn.Vn(t,a))).next((()=>a))})).then((t=>(n.qn=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const s=n.Uo.get(e);s&&(da(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?s.$o=!0:t.modifiedDocuments.size>0?da(s.$o):t.removedDocuments.size>0&&(da(s.$o),s.$o=!1))})),await Fd(n,t,e)}catch(t){await Ql(t)}}function Cd(t,e,n){const s=fa(t);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const t=[];s.Oo.forEach(((n,s)=>{const i=s.view.ro(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=fa(t);n.onlineState=e;let s=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.ro(e)&&(s=!0)})),s&&gd(n)}(s.eventManager,e),t.length&&s.Fo.Pr(t),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Ad(t,e,n){const s=fa(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Uo.get(e),r=i&&i.key;if(r){let t=new Su(Ja.comparator);t=t.insert(r,hc.newNoDocument(r,Ra.min()));const n=xu().add(r),i=new Vu(Ra.min(),new Map,new Au(Ca),t,n);await kd(s,i),s.Bo=s.Bo.remove(r),s.Uo.delete(e),Ud(s)}else await rh(s.localStore,e,!1).then((()=>Od(s,e,n))).catch(Ql)}async function Nd(t,e){const n=fa(t),s=e.batch.batchId;try{const t=await function(t,e){const n=fa(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const s=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,s){const i=n.batch,r=i.keys();let o=Vl.resolve();return r.forEach((t=>{o=o.next((()=>s.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);da(null!==r),e.version.compareTo(r)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&s.addEntry(e,n.commitVersion))}))})),o.next((()=>t.An.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.An.performConsistencyCheck(t))).next((()=>n.Wn.vn(t,s)))}))}(n.localStore,e);Ld(n,s,null),Dd(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Fd(n,t)}catch(t){await Ql(t)}}async function Rd(t,e,n){const s=fa(t);try{const t=await function(t,e){const n=fa(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let s;return n.An.lookupMutationBatch(t,e).next((e=>(da(null!==e),s=e.keys(),n.An.removeMutationBatch(t,e)))).next((()=>n.An.performConsistencyCheck(t))).next((()=>n.Wn.vn(t,s)))}))}(s.localStore,e);Ld(s,e,n),Dd(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Fd(s,t)}catch(n){await Ql(n)}}function Dd(t,e){(t.jo.get(e)||[]).forEach((t=>{t.resolve()})),t.jo.delete(e)}function Ld(t,e,n){const s=fa(t);let i=s.Ko[s.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),s.Ko[s.currentUser.toKey()]=i}}function Od(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Mo.get(e))t.Oo.delete(s),n&&t.Fo.zo(s,n);t.Mo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach((e=>{t.qo.containsKey(e)||Pd(t,e)}))}function Pd(t,e){t.Lo.delete(e.path.canonicalString());const n=t.Bo.get(e);null!==n&&(xh(t.remoteStore,n),t.Bo=t.Bo.remove(e),t.Uo.delete(n),Ud(t))}function Md(t,e,n){for(const s of n)s instanceof vd?(t.qo.addReference(s.key,e),xd(t,s)):s instanceof wd?(aa("SyncEngine","Document no longer in limbo: "+s.key),t.qo.removeReference(s.key,e),t.qo.containsKey(s.key)||Pd(t,s.key)):ha()}function xd(t,e){const n=e.key,s=n.path.canonicalString();t.Bo.get(n)||t.Lo.has(s)||(aa("SyncEngine","New document in limbo: "+n),t.Lo.add(s),Ud(t))}function Ud(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){const e=t.Lo.values().next().value;t.Lo.delete(e);const n=new Ja(Ma.fromString(e)),s=t.Qo.next();t.Uo.set(s,new bd(n)),t.Bo=t.Bo.insert(n,s),Mh(t.remoteStore,new Hl(Uc(Oc(n.path)),s,2,Ta.I))}}async function Fd(t,e,n){const s=fa(t),i=[],r=[],o=[];s.Oo.isEmpty()||(s.Oo.forEach(((t,a)=>{o.push(s.Go(a,e,n).then((t=>{if(t){s.isPrimaryClient&&s.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=Zl.$n(a.targetId,t);r.push(e)}})))})),await Promise.all(o),s.Fo.Pr(i),await async function(t,e){const n=fa(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Vl.forEach(e,(e=>Vl.forEach(e.kn,(s=>n.persistence.referenceDelegate.addReference(t,e.targetId,s))).next((()=>Vl.forEach(e.xn,(s=>n.persistence.referenceDelegate.removeReference(t,e.targetId,s)))))))))}catch(t){if(!ql(t))throw t;aa("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.qn.get(e),s=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(s);n.qn=n.qn.insert(e,i)}}}(s.localStore,r))}async function Vd(t,e){const n=fa(t);if(!n.currentUser.isEqual(e)){aa("SyncEngine","User change. New user:",e.toKey());const t=await nh(n.localStore,e);n.currentUser=e,function(t,e){t.jo.forEach((t=>{t.forEach((t=>{t.reject(new ma(pa.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.jo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Fd(n,t.Gn)}}function qd(t,e){const n=fa(t),s=n.Uo.get(e);if(s&&s.$o)return xu().add(s.key);{let t=xu();const s=n.Mo.get(e);if(!s)return t;for(const e of s){const s=n.Oo.get(e);t=t.unionWith(s.view.Po)}return t}}function jd(t){const e=fa(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rd.bind(null,e),e}class Bd{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=Sh(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return function(t,e,n,s){return new eh(t,e,n,s)}(this.persistence,new th,t.initialUser,this.k)}Yo(t){return new ph(gh.ks,this.k)}Jo(t){return new vh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Hd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Cd(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vd.bind(null,this.syncEngine),await async function(t,e){const n=fa(t);e?(n.Gr.delete(2),await Oh(n)):e||(n.Gr.add(2),await Ph(n),n.Jr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new hd}createDatastore(t){const e=Sh(t.databaseInfo.databaseId),n=(s=t.databaseInfo,new _h(s));var s;return function(t,e,n,s){return new Rh(t,e,n,s)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,s=t.asyncQueue,i=t=>Cd(this.syncEngine,t,0),r=Eh.bt()?new Eh:new wh,new Lh(e,n,s,i,r);var e,n,s,i,r}createSyncEngine(t,e){return function(t,e,n,s,i,r,o){const a=new _d(t,e,n,s,i,r);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=fa(t);aa("RemoteStore","RemoteStore shutting down."),e.Gr.add(5),await Ph(e),e.Hr.shutdown(),e.Jr.set("Unknown")}(this.remoteStore)}}class $d{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ea(this.observer.next,t)}error(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}na(){this.muted=!0}ea(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Kd{constructor(t,e,n,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=sa.UNAUTHENTICATED,this.clientId=ka.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{aa("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(()=>Promise.resolve()))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ma(pa.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=od(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function zd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(aa("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),aa("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async t=>{s.isEqual(t)||(await nh(e.localStore,t),s=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new Bd)),t.offlineComponents}(t);aa("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener((t=>async function(t,e){const n=fa(t);n.asyncQueue.verifyOperationInProgress(),aa("RemoteStore","RemoteStore received new credentials");const s=jh(n);n.Gr.add(3),await Ph(n),s&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Gr.delete(3),await Oh(n)}(e.remoteStore,t))),t.onlineComponents=e}async function Gd(t){return t.onlineComponents||(aa("FirestoreClient","Using default OnlineComponentProvider"),await zd(t,new Hd)),t.onlineComponents}async function Wd(t){const e=await Gd(t),n=e.eventManager;return n.onListen=Td.bind(null,e.syncEngine),n.onUnlisten=Sd.bind(null,e.syncEngine),n}class Jd{constructor(t,e,n,s,i,r,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Qd{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Qd&&t.projectId===this.projectId&&t.database===this.database}}const Xd=new Map;function Yd(t,e,n){if(!n)throw new ma(pa.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Zd(t){if(!Ja.isDocumentKey(t))throw new ma(pa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tf(t){if(Ja.isDocumentKey(t))throw new ma(pa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ef(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ha()}function nf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ma(pa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ef(t);throw new ma(pa.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class sf{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ma(pa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ma(pa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,s){if(!0===e&&!0===s)throw new ma(pa.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rf{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sf({}),this._settingsFrozen=!1,t instanceof Qd?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ma(pa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qd(t.options.projectId)}(t))}get app(){if(!this._app)throw new ma(pa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ma(pa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sf(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new va;switch(t.type){case"gapi":const e=t.client;return da(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ia(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ma(pa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Xd.get(t);e&&(aa("ComponentProvider","Removing Datastore"),Xd.delete(t),e.terminate())}(this),Promise.resolve()}}class of{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new of(this.firestore,t,this._key)}}class af{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new af(this.firestore,t,this._query)}}class cf extends af{constructor(t,e,n){super(t,e,Oc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new of(this.firestore,null,new Ja(t))}withConverter(t){return new cf(this.firestore,t,this._path)}}function uf(t,e,...n){if(t=V(t),1===arguments.length&&(e=ka.A()),Yd("doc","path",e),t instanceof rf){const s=Ma.fromString(e,...n);return Zd(s),new of(t,null,new Ja(s))}{if(!(t instanceof of||t instanceof cf))throw new ma(pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ma.fromString(e,...n));return Zd(s),new of(t.firestore,t instanceof cf?t.converter:null,new Ja(s))}}class lf{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new kh(this,"async_queue_retry"),this.Ra=()=>{const t=Th();t&&aa("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const t=Th();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pa(),this.ba(t)}enterRestrictedMode(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;const e=Th();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ra)}}enqueue(t){if(this.Pa(),this.ya)return new Promise((()=>{}));const e=new ga;return this.ba((()=>this.ya&&this.Ia?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.ga.push(t),this.va())))}async va(){if(0!==this.ga.length){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(t){if(!ql(t))throw t;aa("AsyncQueue","Operation failed with retryable error: "+t)}this.ga.length>0&&this.ur.Zi((()=>this.va()))}}ba(t){const e=this.ma.then((()=>(this.Ea=!0,t().catch((t=>{this.Ta=t,this.Ea=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw ca("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Ea=!1,t))))));return this.ma=e,e}enqueueAfterDelay(t,e,n){this.Pa(),this.Aa.indexOf(t)>-1&&(e=0);const s=rd.createAndSchedule(this,t,e,n,(t=>this.Va(t)));return this.pa.push(s),s}Pa(){this.Ta&&ha()}verifyOperationInProgress(){}async Sa(){let t;do{t=this.ma,await t}while(t!==this.ma)}Da(t){for(const e of this.pa)if(e.timerId===t)return!0;return!1}Ca(t){return this.Sa().then((()=>{this.pa.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.pa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sa()}))}Na(t){this.Aa.push(t)}Va(t){const e=this.pa.indexOf(t);this.pa.splice(e,1)}}class hf extends rf{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new lf,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ff(this),this._firestoreClient.terminate()}}function df(t){return t._firestoreClient||ff(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ff(t){var e;const n=t._freezeSettings(),s=function(t,e,n,s){return new Jd(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Kd(t._authCredentials,t._appCheckCredentials,t._queue,s)}class pf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ma(pa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ua(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class mf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mf(Va.fromBase64String(t))}catch(t){throw new ma(pa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new mf(Va.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class gf{constructor(t){this._methodName=t}}class yf{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ma(pa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ma(pa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ca(this._lat,t._lat)||Ca(this._long,t._long)}}const vf=/^__.*__$/;class wf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new mu(t,this.data,this.fieldMask,e,this.fieldTransforms):new pu(t,this.data,e,this.fieldTransforms)}}class Ef{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new mu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function If(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ha()}}class bf{constructor(t,e,n,s,i,r){this.settings=t,this.databaseId=e,this.k=n,this.ignoreUndefinedProperties=s,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=r||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(t){return new bf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.$a({path:n,Oa:!1});return s.Ma(t),s}La(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.$a({path:n,Oa:!1});return s.ka(),s}Ba(t){return this.$a({path:void 0,Oa:!0})}Ua(t){return Pf(t,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ka(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ma(this.path.get(t))}Ma(t){if(0===t.length)throw this.Ua("Document fields must not be empty");if(If(this.xa)&&vf.test(t))throw this.Ua('Document fields cannot begin and end with "__"')}}class _f{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.k=n||Sh(t)}ja(t,e,n,s=!1){return new bf({xa:t,methodName:e,Ka:n,path:Ua.emptyPath(),Oa:!1,qa:s},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Tf(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new _f(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sf(t,e,n,s,i,r={}){const o=t.ja(r.merge||r.mergeFields?2:0,e,n,i);Rf("Data must be an object, but it was:",o,s);const a=Af(s,o);let c,u;if(r.merge)c=new Fa(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const s of r.mergeFields){const i=Df(e,s,n);if(!o.contains(i))throw new ma(pa.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Mf(t,i)||t.push(i)}c=new Fa(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new wf(new uc(a),c,u)}class kf extends gf{_toFieldTransform(t){if(2!==t.xa)throw 1===t.xa?t.Ua(`${this._methodName}() can only appear at the top level of your update data`):t.Ua(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof kf}}function Cf(t,e){if(Nf(t=V(t)))return Rf("Unsupported field value:",e,t),Af(t,e);if(t instanceof gf)return function(t,e){if(!If(e.xa))throw e.Ua(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Ua(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,e){const n=[];let s=0;for(const i of t){let t=Cf(i,e.Ba(s));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),s++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=V(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zc(e.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Na.fromDate(t);return{timestampValue:Xu(e.k,n)}}if(t instanceof Na){const n=new Na(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xu(e.k,n)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mf)return{bytesValue:Yu(e.k,t._byteString)};if(t instanceof of){const n=e.databaseId,s=t.firestore._databaseId;if(!s.isEqual(n))throw e.Ua(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:el(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Ua(`Unsupported field value: ${ef(t)}`)}(t,e)}function Af(t,e){const n={};return Oa(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):La(t,((t,s)=>{const i=Cf(s,e.Fa(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Nf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Na||t instanceof yf||t instanceof mf||t instanceof of||t instanceof gf)}function Rf(t,e,n){if(!Nf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const s=ef(n);throw"an object"===s?e.Ua(t+" a custom object"):e.Ua(t+" "+s)}}function Df(t,e,n){if((e=V(e))instanceof pf)return e._internalPath;if("string"==typeof e)return Of(t,e);throw Pf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const Lf=new RegExp("[~\\*/\\[\\]]");function Of(t,e,n){if(e.search(Lf)>=0)throw Pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pf(...e.split("."))._internalPath}catch(s){throw Pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pf(t,e,n,s,i){const r=s&&!s.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new ma(pa.INVALID_ARGUMENT,a+t+c)}function Mf(t,e){return t.some((t=>t.isEqual(e)))}class xf{constructor(t,e,n,s,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new of(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ff("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Uf extends xf{data(){return super.data()}}function Ff(t,e){return"string"==typeof e?Of(t,e):e instanceof pf?e._internalPath:e._delegate._internalPath}class Vf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qf extends xf{constructor(t,e,n,s,i,r){super(t,e,n,s,r),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Ff("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class jf extends qf{data(t={}){return super.data(t)}}class Bf{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Vf(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new jf(this._firestore,this._userDataWriter,n.key,n,new Vf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ma(pa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new jf(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Vf(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const s=new jf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Vf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,r=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:Hf(e.type),doc:s,oldIndex:i,newIndex:r}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Hf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ha()}}class $f extends class{convertValue(t,e="none"){switch(Qa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ba(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ha(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ha()}}convertObject(t,e){const n={};return La(t.fields,((t,s)=>{n[t]=this.convertValue(s,e)})),n}convertGeoPoint(t){return new yf(Ba(t.latitude),Ba(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ka(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(za(t));default:return null}}convertTimestamp(t){const e=ja(t);return new Na(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Ma.fromString(t);da(bl(n));const s=new Qd(n.get(1),n.get(3)),i=new Ja(n.popFirst(5));return s.isEqual(e)||ca(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new mf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new of(this.firestore,null,e)}}function Kf(t,e){return function(t,e){const n=new ga;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const s=jd(t);try{const t=await function(t,e){const n=fa(t),s=Na.now(),i=e.reduce(((t,e)=>t.add(e.key)),xu());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Wn.vn(t,i).next((i=>{r=i;const o=[];for(const t of e){const e=hu(t,r.get(t.key));null!=e&&o.push(new mu(t.key,e,lc(e.value.mapValue),ou.exists(!0)))}return n.An.addMutationBatch(t,s,o,e)})))).then((t=>(t.applyToLocalDocumentSet(r),{batchId:t.batchId,changes:r})))}(s.localStore,e);s.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let s=t.Ko[t.currentUser.toKey()];s||(s=new Su(Ca)),s=s.insert(e,n),t.Ko[t.currentUser.toKey()]=s}(s,t.batchId,n),await Fd(s,t.changes),await Wh(s.remoteStore)}catch(t){const e=od(t,"Failed to persist write");n.reject(e)}}(await function(t){return Gd(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(df(t),e)}!function(t,e=!0){ia="9.6.1",ot(new q("firestore",((t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=new hf(s,new wa(t.getProvider("auth-internal")),new _a(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i}),"PUBLIC")),dt(na,"3.4.1",t),dt(na,"3.4.1","esm2017")}(),dt("firebase","9.6.1","app");const zf=[];!function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw ct.create("bad-app-name",{appName:String(s)});const i=st.get(s);if(i){if(L(t,i.options)&&L(n,i.config))return i;throw ct.create("duplicate-app",{appName:s})}const r=new H(s);for(const t of it.values())r.addComponent(t);const o=new ut(t,n,r);st.set(s,o)}({apiKey:"AIzaSyBPwH-PsSrwzFjr6v8LUMwbZkbFs8x7Uac",authDomain:"productiv-932c9.firebaseapp.com",projectId:"productiv-932c9",storageBucket:"productiv-932c9.appspot.com",messagingSenderId:"232110405285",appId:"1:232110405285:web:d37d1437bc93f077c13f4c",measurementId:"G-CR193YXW7R"});const Gf=function(t=ht()){return at(t,"firestore").getImmediate()}(),Wf=[];async function Jf(t,e,n,s,i,r,o){const a=uf(Gf,`${Hn()}tasks`,String(r));await function(t,e,n,...s){t=nf(t,of);const i=nf(t.firestore,hf),r=Tf(i);let o;return o="string"==typeof(e=V(e))||e instanceof pf?function(t,e,n,s,i,r){const o=t.ja(1,e,n),a=[Df(e,s,n)],c=[i];if(r.length%2!=0)throw new ma(pa.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<r.length;t+=2)a.push(Df(e,r[t])),c.push(r[t+1]);const u=[],l=uc.empty();for(let t=a.length-1;t>=0;--t)if(!Mf(u,a[t])){const e=a[t];let n=c[t];n=V(n);const s=o.La(e);if(n instanceof kf)u.push(e);else{const t=Cf(n,s);null!=t&&(u.push(e),l.set(e,t))}}const h=new Fa(u);return new Ef(l,h,o.fieldTransforms)}(r,"updateDoc",t._key,e,n,s):function(t,e,n,s){const i=t.ja(1,e,n);Rf("Data must be an object, but it was:",i,s);const r=[],o=uc.empty();La(s,((t,s)=>{const a=Of(e,t,n);s=V(s);const c=i.La(a);if(s instanceof kf)r.push(a);else{const t=Cf(s,c);null!=t&&(r.push(a),o.set(a,t))}}));const a=new Fa(r);return new Ef(o,a,i.fieldTransforms)}(r,"updateDoc",t._key,e),Kf(i,[o.toMutation(t._key,ou.exists(!0))])}(a,{title:t,description:e,dueDate:n,priority:s,project:i,id:r,status:o})}class Qf{constructor(t,e,n,s,i,r,o){this.title=t,this.description=e,this.dueDate=n,this.priority=s,this.project=i,this.id=r,this.status=o}getTitle(){return this.title}setTitle(t){this.title=t}getDescription(){return this.description}setDescription(t){this.description=t}getDueDate(){return this.dueDate}setDueDate(t){this.dueDate=t}getPriority(){return this.priority}setPriority(t){this.priority=t}getId(){return this.id}getProject(){return this.project}setProject(t){this.project=t}setId(t){this.id=t}getStatus(){return this.status}setStatus(t){this.status=t}}function Xf(t){Fn();const e=Wf.filter((e=>{for(const n in e)if(e[n]===t.currentTarget.id)return e}));!function(t){f();const e=i("h2","project__title");e.textContent=t;const n=document.querySelector(".container"),s=i("section","todos");n.appendChild(e),n.appendChild(s)}(t.currentTarget.id),e.map((t=>{const e=document.querySelector(".todos");e.appendChild(a(t.title,t.description,t.dueDate,t.priority,t.project,t.id)),d.appendChild(e)}))}function Yf(e){Fn();let n=[];"today"===e.currentTarget.id?n=Wf.filter((e=>e.dueDate===t())):"overdue"===e.currentTarget.id?n=Wf.filter((e=>e.dueDate<t())):"upcoming"===e.currentTarget.id&&(n=Wf.filter((e=>e.dueDate>t()))),m(e.currentTarget.id),g(n)}function Zf(t){Fn(),m(t.currentTarget.id),g(Wf)}function tp(t,e,n,s,i,r,o){Wf.forEach((a=>{console.log(a.id,r),a.id===r&&(a.title=t,a.description=e,a.dueDate=n,a.priority=s,a.project=i,a.status=o),console.log(a)})),console.log(t,e,n,s,i,r,o),console.log(Wf),Jf(t,e,n,s,i,r,o)}function ep(){Fn(),v(zf)}const np=document.querySelector(".container");function sp(){[...np.children].forEach((t=>{t.remove()})),Fn();const t=i("div","calc__wrapper"),e=r("div","calc__container");e.innerHTML='\n        <div class="container2">\n        <div class="display-wrapper">\n            <p class="display calc"></p>\n            <h1 class="display keyPressDisplay">0</h1>\n        </div>\n        <div class="buttons">\n            <button class="btn clear">AC</button>\n            <button class="btn backspace">&#8592;</button>\n            <button class="btn negative">+/-</button>\n            <button class="btn divide">/</button>\n            <button class="btn seven">7</button>\n            <button class="btn eight">8</button>\n            <button class="btn nine">9</button>\n            <button class="btn multiply">x</button>\n            <button class="btn four">4</button>\n            <button class="btn five">5</button>\n            <button class="btn six">6</button>\n            <button class="btn subtract">-</button>\n            <button class="btn one">1</button>\n            <button class="btn two">2</button>\n            <button class="btn three">3</button>\n            <button class="btn add">+</button>\n            <button class="btn zero">0</button>\n            <button class="btn decimal">.</button>\n            <button class="btn equals">=</button>\n        </div>\n    </div>\n    ',t.appendChild(e),np.appendChild(t),function(){const t=[];let e="",n="";const s=document.querySelector(".keyPressDisplay"),i=document.querySelector(".calc"),r=document.querySelector(".one"),o=document.querySelector(".two"),a=document.querySelector(".three"),c=document.querySelector(".four"),u=document.querySelector(".five"),l=document.querySelector(".six"),h=document.querySelector(".seven"),d=document.querySelector(".eight"),f=document.querySelector(".nine"),p=document.querySelector(".zero"),m=document.querySelector(".decimal"),g=document.querySelector(".add"),y=document.querySelector(".subtract"),v=document.querySelector(".multiply"),w=document.querySelector(".divide"),E=document.querySelector(".equals"),I=document.querySelector(".clear"),b=document.querySelector(".backspace"),_=document.querySelector(".negative");function T(r,o,a){let c=0;if("+"===o?c=function(t,e){return parseFloat(t)+parseFloat(e)}(r,a):"-"===o?c=function(t,e){return parseFloat(t)-parseFloat(e)}(r,a):"*"===o?c=function(t,e){return parseFloat(t)*parseFloat(e)}(r,a):"/"===o&&(c=function(t,e){return 0==e?"ERROR":parseFloat(t)/parseFloat(e)}(r,a)),4===t.length&&"string"==typeof t[3]){let r="";return r+=c,r+=t[3],i.textContent=r,t.shift(),t.shift(),t.shift(),t.unshift(c),s.textContent=c,n="",e="",c}return 3===t.length?(t.length=0,t.push(c),t.shift(),s.textContent=c,i.textContent="",n="",e="",c):c}function S(r){switch("0"===s.textContent.charAt(0)&&(s.textContent=""),r){case"+":case"-":case"*":case"/":if(0===e.length)break;n+=r,n="",i.textContent+=r,t.push(e),e="",s.textContent="",t.push(r);break;case"+/-":if(0===e.length)break;if(e=parseFloat(-1*e),s.textContent=parseFloat(-1*s.textContent),n=parseFloat(-1*n),t.length>0){i.textContent=t[0]+t[1]+n;break}i.textContent=n;break;case"=":if(t.length<3&&"string"!=typeof t[1])break;t.push(e),T(t[0],t[1],t[2]);break;case".":if(e.includes("."))break;n+=r,i.textContent+=r,e+=r;break;default:i.textContent+=r,3===t.length&&"string"==typeof t[1]||2===t.length&&"string"==typeof t[1]?s.textContent="":4===t.length&&"number"==typeof t[1]&&t.shift(),e.length<10&&(e+=r,s.textContent=e,n+=r)}4===t.length&&T(t[0],t[1],t[2])}r.addEventListener("click",(()=>{S(1)})),o.addEventListener("click",(()=>{S(2)})),a.addEventListener("click",(()=>{S(3)})),c.addEventListener("click",(()=>{S(4)})),u.addEventListener("click",(()=>{S(5)})),l.addEventListener("click",(()=>{S(6)})),h.addEventListener("click",(()=>{S(7)})),d.addEventListener("click",(()=>{S(8)})),f.addEventListener("click",(()=>{S(9)})),p.addEventListener("click",(()=>{S(0)})),m.addEventListener("click",(()=>{S(".")})),g.addEventListener("click",(()=>{S("+")})),y.addEventListener("click",(()=>{S("-")})),v.addEventListener("click",(()=>{S("*")})),w.addEventListener("click",(()=>{S("/")})),E.addEventListener("click",(()=>{S("=")})),I.addEventListener("click",(()=>{n="",e="",i.textContent="",s.textContent="0",t.length=0})),b.addEventListener("click",(function(){1===s.textContent.length?(s.textContent="0",i.textContent=i.textContent.slice(0,-1),e=""):s.textContent.length>1&&(s.textContent=s.textContent.slice(0,-1),i.textContent=i.textContent.slice(0,-1),e=e.slice(0,-1))})),_.addEventListener("click",(()=>{S("+/-")}))}()}const ip=document.querySelector(".container");let rp=25,op=60*rp,ap=0;function cp(){Fn(),[...ip.children].forEach((t=>{t.remove()}));const t=r("h2","pomodoro__title","Pomodoro");ip.appendChild(t);const e=i("div","pomodoro__container"),n=i("div","pomodoro"),s=r("span","pomodoro__timer","25:00");s.setAttribute("id","timer"),n.appendChild(s),e.appendChild(n);const o=i("div","pomodoro__buttons"),a=r("button","pomodoro__button","Start"),c=r("button","pomodoro__button","Stop");c.setAttribute("id","stop");const u=r("button","pomodoro__button","Reset");return u.setAttribute("id","reset"),a.addEventListener("click",up),u.addEventListener("click",hp),o.appendChild(a),o.appendChild(c),o.appendChild(u),e.appendChild(o),ip.appendChild(e),ip}function up(){const t=document.querySelector(".pomodoro"),e=document.getElementById("timer"),n=document.getElementById("stop"),s=setInterval((function(){let n=Math.floor(op/60);n=n<10?"0"+n:n;let i=op%60;if(i=i<10?"0"+i:i,e.textContent=`${n}:${i}`,n<1&&i<1){lp(s),ap++,rp=ap>0?5:25,ap--,5===rp?t.classList.add("end"):t.classList.remove("end"),op=60*rp;let n=Math.floor(op/60),i=op%60;n=n<10?`0${n}`:n,i=i<10?`0${i}`:i,e.textContent=`${n}:${i}`}op--}),1e3);n.addEventListener("click",(function(){lp(s)}))}function lp(t){clearInterval(t)}function hp(){const t=document.getElementById("timer"),e=document.querySelector(".pomodoro");5===rp?e.classList.add("end"):e.classList.remove("end"),5!==rp&&(rp=25),op=60*rp;let n=Math.floor(op/60),s=op%60;n=n<10?`0${n}`:n,s=s<10?`0${s}`:s,t.textContent=`${n}:${s}`}document.querySelector(".container");const dp=[...document.querySelectorAll(".sidebar__link")],fp=document.getElementById("work"),pp=document.getElementById("home"),mp=document.getElementById("miscellaneous");const gp=function(t=ht()){const e=at(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=at(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(L(n.getOptions(),null!=e?e:{}))return t;vt(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Dn,persistence:[Ze,xe,Fe]})}();document.body.appendChild(function e(){!function(){const t=document.querySelector(".sidebar"),e=document.querySelector(".header"),n=document.querySelector(".add__button");t.classList.add("hide"),e.classList.add("hide"),n.classList.add("hide")}();const n=i("div","login__container");return n.innerHTML='\n        <div class="form__container">\n    <form action="" class="form">\n    <h2 class="login__title"><i class="fas fa-business-time"> Productiv</i></h2>\n      <div class="form__wrapper">\n        <div class="form__signup ">Sign Up</div>\n        <div class="form__login">Login</div>\n        <div class="form__cover"></div>\n      </div>\n      <div class="form2">\n        <div class="form__section signup">\n        <div class="form__group">\n          <input id="signup__email" type="text" class="form__input" placeholder="">\n          <label class="form__label" for="email">Email</label>\n        </div>\n        <div class="form__group">\n            <input id="signup__password" type="password" class="form__input" placeholder="">\n            <label class="form__label" for="password">Password</label>\n         </div>\n        <div class="form__group">\n            <input id="username" type="text" class="form__input" placeholder="">\n            <label class="form__label" for="username">Username</label>\n        </div>\n        <button type="submit" id="signup" class="form__button">Sign-Up</button>\n        \n      </div>\n        \n       <div class="form__section login hide">\n        <div class="form__group">\n          <input id="login__email" type="text" class="form__input" placeholder="">\n          <label class="form__label" for="email">Email</label>\n        </div>\n        <div class="form__group">\n            <input id="login__password" type="password" class="form__input" placeholder="">\n            <label class="form__label" for="password">Password</label>\n         </div>\n        <button type="submit" id="login" class="form__button">Login</button>\n        <button type="submit" id="demo" class="form__button">Login As Demo User</button>\n      </div>\n      </div>\n      </div>\n    </form>\n  </div>\n    ',jn.appendChild(n),function(){const n=document.querySelector(".form"),s=document.querySelector(".form__signup"),i=document.querySelector(".form__login"),r=document.querySelector(".form__cover"),o=document.querySelector(".signup"),a=document.querySelector(".login"),c=document.getElementById("login"),u=document.getElementById("signup"),l=document.getElementById("logout"),h=(document.querySelector(".login__container"),document.getElementById("sidebar__logout")),d=document.getElementById("demo");let f="signup";function p(){(function(t){return V(t).signOut()})(gp).then((()=>{console.log("user signed out"),e(),n.reset(),document.location.reload()})).catch((t=>{console.log(t.message)}))}(function(e,n,s,i){V(e).onAuthStateChanged((e=>{e&&(console.log(e),Un(e.displayName),Bn(),$n(),async function(e){console.log("get all data called"),console.log(e),(await function(t){t=nf(t,af);const e=nf(t.firestore,hf),n=df(e),s=new $f(e);return function(t){if(Mc(t)&&0===t.explicitOrderBy.length)throw new ma(pa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const s=new ga;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,i){const r=new $d({next:n=>{e.enqueueAndForget((()=>fd(t,o))),n.fromCache&&"server"===s.source?i.reject(new ma(pa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new yd(n,r,{includeMetadataChanges:!0,wo:!0});return dd(t,o)}(await Wd(t),t.asyncQueue,e,n,s))),s.promise}(n,t._query).then((n=>new Bf(e,s,t,n)))}(function(t,e,...n){if(t=V(t),Yd("collection","path",e),t instanceof rf){const s=Ma.fromString(e,...n);return tf(s),new cf(t,null,s)}{if(!(t instanceof of||t instanceof cf))throw new ma(pa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ma.fromString(e,...n));return tf(s),new cf(t.firestore,null,s)}}(Gf,`${e}tasks`))).forEach((e=>{console.log(e.data()),e.data().dueDate<=t()&&"unread"===e.data().status&&(zf.push(e.data()),I("add")),Wf.push(e.data())}))}(e.displayName))}),void 0,void 0)})(gp),i.addEventListener("click",(function(){console.log("login clicked"),r.classList.add("moveRight"),r.classList.remove("moveLeft"),a.classList.remove("hide"),o.classList.add("hide"),f="login"})),s.addEventListener("click",(function(){console.log("signup clicked"),r.classList.add("moveLeft"),r.classList.remove("moveRight"),o.classList.remove("hide"),a.classList.add("hide"),f="signup"})),c.addEventListener("click",(function(t){t.preventDefault();const e=document.getElementById("login__email").value,n=document.getElementById("login__password").value;(function(t,e,n){return async function(t,e){return Le(de(t),e)}(V(t),Ie.credential(e,n))})(gp,e,n).then((t=>{console.log("user logged in",t.user.displayName),Un(t.user.displayName),t.user.photoURL&&(document.getElementById("profile").src=t.user.photoURL),Bn(),$n(),document.location.reload()})).catch((t=>{console.log(t.message)}))})),u.addEventListener("click",(function(t){t.preventDefault;const e=document.getElementById("signup__email").value,s=document.getElementById("signup__password").value,i=document.getElementById("username").value;console.log(i),async function(t,e,n){const s=de(t),i=await async function(t,e){return xt(t,"POST","/v1/accounts:signUp",Ot(t,e))}(s,{returnSecureToken:!0,email:e,password:n}),r=await Ae._fromIdTokenResponse(s,"signIn",i);return await s._updateCurrentUser(r.user),r}(gp,e,s).then((t=>{console.log(t.user),async function(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const s=V(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},r=await Ht(s,async function(t,e){return Pt(t,"POST","/v1/accounts:update",e)}(s.auth,i));s.displayName=r.displayName||null,s.photoURL=r.photoUrl||null;const o=s.providerData.find((({providerId:t})=>"password"===t));o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(r)}(gp.currentUser,{displayName:i}),Un(i),Bn()})).catch((t=>{console.log(t.message)})),n.reset()})),l.addEventListener("click",p),h.addEventListener("click",p),d.addEventListener("click",(function(t){t.preventDefault();const e=document.getElementById("login__email"),n=document.getElementById("login__password");e.value="demo@email.com",n.value="demo1234"}))}(),jn}()),window.addEventListener("DOMContentLoaded",(()=>{(function(){const t=document.getElementById("all"),e=document.getElementById("today"),n=document.getElementById("upcoming"),s=document.getElementById("overdue");t.addEventListener("click",Zf),e.addEventListener("click",Yf),n.addEventListener("click",Yf),s.addEventListener("click",Yf),fp.addEventListener("click",Xf),pp.addEventListener("click",Xf),mp.addEventListener("click",Xf),document.getElementById("inbox").addEventListener("click",ep),document.getElementById("calculator").addEventListener("click",sp),document.getElementById("pomodoro").addEventListener("click",cp),document.getElementById("dashboard").addEventListener("click",(function(){Fn()})),dp.map((t=>{t.addEventListener("click",(t=>{!function(t){document.querySelector(".header__display").textContent=t.currentTarget.dataset.id,dp.map((t=>{t.classList.remove("active")})),[...document.querySelectorAll(".sidebar__sublinks")].map((t=>{t.classList.contains("showSub")||t.classList.remove("showSub")})),t.currentTarget.nextElementSibling?(t.currentTarget.classList.toggle("active"),t.currentTarget.nextElementSibling.classList.toggle("showSub")):t.currentTarget.classList.add("active")}(t)}))}))})(),function(){const t=document.getElementById("hamburger"),e=document.querySelector(".header__image"),n=document.getElementById("imgUpload");!function(t){t.children[0].src=xn}(e),t.addEventListener("click",Fn),n.addEventListener("change",qn),e.addEventListener("click",Vn)}(),function(){const n=document.getElementById("add"),s=document.getElementById("create");n.addEventListener("click",(function(){document.querySelector(".form__heading").textContent="Add Task",e()}));const i=document.getElementById("close");document.getElementById("cancel").addEventListener("click",e),i.addEventListener("click",e),s.addEventListener("click",(n=>{!function(n){n.preventDefault();const s=document.getElementById("title").value,i=(document.getElementById("description").value,document.getElementById("date").value),r=(document.getElementById("priority").value,document.getElementById("project").value,document.querySelector(".title__error")),o=document.querySelector(".date__error");""===s.trim()&&(r.textContent="Title must not be blank",setTimeout((function(){r.textContent=" "}),2e3)),""===i&&(o.textContent="Please select a date",setTimeout((function(){o.textContent=" "}),2e3)),i<t()?(o.textContent="Date must not be in the past",setTimeout((function(){o.textContent=" "}),3e3)):function(n){n.preventDefault();const s=document.getElementById("title").value,i=document.getElementById("description").value,r=document.getElementById("date").value,o=document.getElementById("priority").value,a=document.getElementById("project").value,c=Math.random(),u=new Qf(s,i,r,o,a,c,"unread");Wf.push(u),async function(t,e,n,s,i,r,o){const a=uf(Gf,`${Hn()}tasks`,String(r));await function(t,e,n){t=nf(t,of);const s=nf(t.firestore,hf),i=function(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}(t.converter,e,n);return Kf(s,[Sf(Tf(s),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ou.none())])}(a,{title:t,description:e,dueDate:n,priority:s,project:i,id:r,status:"unread"})}(s,i,r,o,a,c),r===t()&&(zf.unshift(u),I("add")),e(),"Inbox"===document.querySelector(".header__display").textContent&&v(zf)}(n)}(n)}))}()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixHQUFNNGxDLFFBQVFxMUMsR0FDZGo2RSxFQUFpQixRQUVsQjNKLElBRThCLFVBRFpmLFNBQVNpQixjQUFjLG9CQUMzQmEsYUFDYjBILEVBQVVFLElIdkxKcTdFLENBQWF6bEYsR0FuQ2IwbEYsQ0FBYTFsRixNc0JzQmpCMmxGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Byb2R1Y3Rpdi93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL21vZGFsLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL2NyZWF0ZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vc3JjL3NjcmlwdHMvcmVuZGVyVG9kby5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy90b2RvLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy90YXNrcy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9pbmJveC5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoL2Rpc3QvZXNtMjAxNy9pbmRleC04MzlkZTUxMC5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vc3JjL3NjcmlwdHMvYXV0aC5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly9wcm9kdWN0aXYvLi9zcmMvc2NyaXB0cy9jYWxjdWxhdG9yLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL3BvbW9kb3JvLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL3NldHRpbmdzLmpzIiwid2VicGFjazovL3Byb2R1Y3Rpdi8uL3NyYy9zY3JpcHRzL3NpZGViYXIuanMiLCJ3ZWJwYWNrOi8vcHJvZHVjdGl2Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCB7cG9wdWxhdGVUb2RvfSBmcm9tIFwiLi90b2RvLmpzXCJcclxuXHJcbmZ1bmN0aW9uIGFkZEJ1dHRvbkV2ZW50cygpIHtcclxuICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkXCIpO1xyXG4gICAgY29uc3QgY3JlYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjcmVhdGVcIik7XHJcbiAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faGVhZGluZ1wiKTtcclxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IFwiQWRkIFRhc2tcIjtcclxuICAgICAgICB0b2dnbGVNb2RhbCgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VcIik7XHJcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbFwiKTtcclxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlTW9kYWwpO1xyXG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZU1vZGFsKTtcclxuICAgIGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgdmFsaWRhdGVGb3JtKGUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlRm9ybShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XHJcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XHJcbiAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xyXG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdFwiKS52YWx1ZTtcclxuICAgIGNvbnN0IHRpdGxlRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlX19lcnJvclwiKTtcclxuICAgIGNvbnN0IGRhdGVFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGF0ZV9fZXJyb3JcIik7XHJcbiAgICBcclxuICAgIGlmICh0aXRsZS50cmltKCkgPT09IFwiXCIpIHtcclxuICAgICAgICB0aXRsZUVycm9yLnRleHRDb250ZW50ID0gXCJUaXRsZSBtdXN0IG5vdCBiZSBibGFua1wiO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aXRsZUVycm9yLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBpZiAoZGF0ZSA9PT0gXCJcIikge1xyXG4gICAgICAgIGRhdGVFcnJvci50ZXh0Q29udGVudCA9IFwiUGxlYXNlIHNlbGVjdCBhIGRhdGVcIjtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGF0ZUVycm9yLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICAgICAgfSwgMjAwMCk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0ZSA8IGdldFRvZGF5c0RhdGUoKSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGRhdGVFcnJvci50ZXh0Q29udGVudCA9IFwiRGF0ZSBtdXN0IG5vdCBiZSBpbiB0aGUgcGFzdFwiO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgZGF0ZUVycm9yLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBwb3B1bGF0ZVRvZG8oZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRvZGF5c0RhdGUoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCB5ZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGNvbnN0IG1vbnRoID0gY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBjb25zdCBkYXkgPSBjdXJyZW50RGF0ZS5nZXREYXRlKCk7XHJcbiAgICBjb25zdCBmdWxsRGF0ZSA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XHJcbiAgICByZXR1cm4gZnVsbERhdGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU1vZGFsKCkge1xyXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICBtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd01vZGFsXCIpO1xyXG4gICAgZm9ybS5yZXNldCgpO1xyXG59XHJcblxyXG5leHBvcnQgeyBhZGRCdXR0b25FdmVudHMsIHRvZ2dsZU1vZGFsLCBnZXRUb2RheXNEYXRlIH07IiwiXHJcbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3ModHlwZSwgY2xhc3NOYW1lKSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKHR5cGUsIGNsYXNzTmFtZSwgdGV4dCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xyXG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVJbWFnZVdpdGhJZCh0eXBlLCBzcmMsIGFsdCwgaWQpIHtcclxuICAgIGNvbnN0IGVsID0gbmV3IEltYWdlKCk7XHJcbiAgICBlbC5zcmMgPSBzcmM7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgYWx0KTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgIHJldHVybiBlbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGV4dEVsZW1lbnRXaXRoSWQodHlwZSwgY2xhc3NOYW1lLCB0ZXh0LCBpZCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xyXG4gICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZSh0eXBlLCBjbGFzc05hbWUsIGF0dHIsIGF0dHJOYW1lKSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0ck5hbWUpO1xyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMYWJlbEVsZW1lbnQodHlwZSwgYXR0ciwgdGV4dCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIGF0dHIpO1xyXG4gICAgZWwudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVJbnB1dEVsZW1lbnQodHlwZSwgYXR0ciwgbmFtZSwgaWQpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgYXR0cik7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIG5hbWUpO1xyXG4gICAgZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgaWQpO1xyXG4gICAgcmV0dXJuIGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVUZXh0QXJlYSh0eXBlLCBuYW1lLCBpZCwgY29sLCByb3cpIHtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgbmFtZSk7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJjb2xzXCIsIGNvbCk7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJyb3dzXCIsIHJvdyk7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoVHdvQXR0cmlidXRlcyh0eXBlLCBhdHRyMSwgYXR0cjFOYW1lLCBhdHRyMiwgYXR0cjJOYW1lKXtcclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyMSwgYXR0cjFOYW1lKTtcclxuICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyMiwgYXR0cjJOYW1lKTtcclxuICAgIHJldHVybiBlbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlT3B0aW9uKHZhbHVlLCB0ZXh0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB2YWx1ZSk7XHJcbiAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICByZXR1cm4gZWw7XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IHsgY3JlYXRlRWxlbWVudFdpdGhDbGFzcywgY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MsIGNyZWF0ZUltYWdlV2l0aElkLCBjcmVhdGVUZXh0RWxlbWVudFdpdGhJZCwgY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGUsIGNyZWF0ZUxhYmVsRWxlbWVudCwgY3JlYXRlSW5wdXRFbGVtZW50LCBjcmVhdGVUZXh0QXJlYSwgY3JlYXRlRWxlbWVudFdpdGhUd29BdHRyaWJ1dGVzLCBjcmVhdGVPcHRpb24gfTtcclxuIiwiaW1wb3J0IHsgY3JlYXRlRWxlbWVudFdpdGhDbGFzcywgY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MsIGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlIH0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudC5qc1wiO1xyXG5pbXBvcnQgeyB0b2dnbGVNb2RhbCB9IGZyb20gXCIuL21vZGFsLmpzXCI7XHJcbmltcG9ydCB7IGdldFRvZG9CeUlkLCB1cGRhdGVUb2RvLCBkZWxldGVUb2RvLCBnZXRBRG9jdW1lbnR9IGZyb20gXCIuL3RvZG8uanNcIjtcclxuXHJcbmNvbnN0IHRvZG9zID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcInNlY3Rpb25cIiwgXCJ0b2Rvc1wiKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlclRvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgaWQpIHtcclxuICAgIGNvbnN0IHRvZG9fX2NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJkaXZcIiwgXCJ0b2RvX19jb250YWluZXJcIik7XHJcbiAgICB0b2RvX19jb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCBpZCk7XHJcbiAgICBjb25zdCB0b2RvID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImFydGljbGVcIiwgXCJ0b2RvXCIpO1xyXG4gICAgY29uc3QgdG9kb19fZGF0ZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJkaXZcIiwgXCJ0b2RvX19kYXRlXCIpO1xyXG4gICAgY29uc3QgZGF0ZTEgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcInNtYWxsXCIsIFwiZGF0ZVwiLCBkYXRlKTtcclxuICAgIHRvZG9fX2RhdGUuYXBwZW5kQ2hpbGQoZGF0ZTEpO1xyXG4gICAgY29uc3QgdG9kb19fcHJvamVjdCA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFxyXG4gICAgICBcImRpdlwiLFxyXG4gICAgICBcInRvZG9fX3Byb2plY3RcIixcclxuICAgICAgcHJvamVjdFxyXG4gICAgKTtcclxuICAgIHRvZG9fX2RhdGUuYXBwZW5kQ2hpbGQodG9kb19fcHJvamVjdCk7XHJcbiAgICB0b2RvLmFwcGVuZENoaWxkKHRvZG9fX2RhdGUpO1xyXG4gICAgXHJcblxyXG4gICAgY29uc3QgdG9kb19fY29udGVudCA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJkaXZcIiwgXCJ0b2RvX19jb250ZW50XCIpO1xyXG4gICAgY29uc3QgdG9kb19fdGl0bGUgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInRvZG9fX3RpdGxlXCIsIHRpdGxlKTtcclxuICAgIGNvbnN0IHRvZG9fX3ByaW9yaXR5ID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInRvZG9fX3ByaW9yaXR5XCIpO1xyXG5cclxuICAgIGNvbnN0IHByaW9yaXR5MSA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFwic21hbGxcIiwgXCJwcmlvcml0eVwiLCBwcmlvcml0eSk7XHJcbiAgICBpZiAocHJpb3JpdHkgPT09IFwiaGlnaFwiKSB7XHJcbiAgICAgICAgcHJpb3JpdHkxLmNsYXNzTGlzdC5hZGQoXCJoaWdoXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcHJpb3JpdHkxLmNsYXNzTGlzdC5hZGQoXCJub3JtYWxcIik7XHJcbiAgICB9XHJcbiAgICB0b2RvX19wcmlvcml0eS5hcHBlbmRDaGlsZChwcmlvcml0eTEpO1xyXG4gICAgdG9kb19fY29udGVudC5hcHBlbmRDaGlsZCh0b2RvX190aXRsZSk7XHJcbiAgICB0b2RvX19jb250ZW50LmFwcGVuZENoaWxkKHRvZG9fX3ByaW9yaXR5KTtcclxuXHJcbiAgICAvL3RvZG8gYnV0dG9uc1xyXG4gICAgY29uc3QgdG9kb19fYnV0dG9ucyA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJkaXZcIiwgXCJ0b2RvX19idXR0b25zXCIpO1xyXG4gICAgY29uc3QgdG9kb19fbW9yZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlKFwiYnV0dG9uXCIsIFwidG9kb19fbW9yZVwiLCBcImlkXCIsIFwibW9yZVwiKTtcclxuICAgIGNvbnN0IG1vcmVCdG4gPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiaVwiLCBcImZhc1wiKTtcclxuICAgIG1vcmVCdG4uY2xhc3NMaXN0LmFkZChcImZhLWNhcmV0LWRvd25cIik7XHJcbiAgICBtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93RGV0YWlscyk7XHJcbiAgICB0b2RvX19tb3JlLmFwcGVuZENoaWxkKG1vcmVCdG4pO1xyXG4gICAgdG9kb19fYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvX19tb3JlKTtcclxuICAgIGNvbnN0IHRvZG9fX2VkaXQgPSBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZShcImJ1dHRvblwiLCBcInRvZG9fX2VkaXRcIiwgXCJpZFwiLCBcImVkaXRcIik7XHJcbiAgICBjb25zdCBlZGl0QnRuID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImlcIiwgXCJmYXNcIik7XHJcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJmYS1lZGl0XCIpO1xyXG4gICAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdFRvZG8pO1xyXG4gICAgdG9kb19fZWRpdC5hcHBlbmRDaGlsZChlZGl0QnRuKTtcclxuICAgIHRvZG9fX2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb19fZWRpdCk7XHJcbiAgICBjb25zdCB0b2RvX19kZWxldGUgPSBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZShcImJ1dHRvblwiLCBcInRvZG9fX2RlbGV0ZVwiLCBcImlkXCIsIFwiZGVsZXRlXCIpO1xyXG4gICAgY29uc3QgZGVsZXRlQnRuID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImlcIiwgXCJmYXNcIik7XHJcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImZhLXRyYXNoLWFsdFwiKTtcclxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVG9kb1VJKTtcclxuICAgIHRvZG9fX2RlbGV0ZS5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xyXG4gICAgdG9kb19fYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvX19kZWxldGUpO1xyXG4gICAgdG9kb19fY29udGVudC5hcHBlbmQodG9kb19fYnV0dG9ucyk7XHJcbiAgICB0b2RvLmFwcGVuZENoaWxkKHRvZG9fX2NvbnRlbnQpO1xyXG5cclxuICAgIFxyXG4gICAgLy90b2RvLmFwcGVuZENoaWxkKHRvZG9fX3Byb2plY3QpO1xyXG4gICAgdG9kb19fY29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG8pO1xyXG4gICAgXHJcblxyXG4gICAgLy8gZGVzY3JpcHRpb25cclxuICAgIGNvbnN0IHRvZG9fX2RldGFpbHMgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwidG9kb19fZGV0YWlsc1wiKTtcclxuICAgIGNvbnN0IHRvZG9fX2Rlc2NyaXB0aW9uID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcInBcIiwgXCJkZXNjcmlwdGlvblwiKTtcclxuICAgIHRvZG9fX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgICBjb25zdCB0b2RvX19mdWxsdGl0bGUgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwicFwiLCBcImZ1bGx0aXRsZVwiKTtcclxuICAgIHRvZG9fX2Z1bGx0aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgdG9kb19fZGV0YWlscy5hcHBlbmRDaGlsZCh0b2RvX19mdWxsdGl0bGUpO1xyXG4gICAgdG9kb19fZGV0YWlscy5hcHBlbmRDaGlsZCh0b2RvX19kZXNjcmlwdGlvbik7XHJcbiAgICB0b2RvX19jb250YWluZXIuYXBwZW5kQ2hpbGQodG9kb19fZGV0YWlscyk7XHJcbiAgICByZXR1cm4gdG9kb19fY29udGFpbmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RGV0YWlscyhlKSB7XHJcbiAgICBlLmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnRvZ2dsZShcclxuXHRcdFx0XCJzaG93RGV0YWlsc1wiXHJcblx0XHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVUb2RvVUkoZSkge1xyXG4gICAgY29uc3QgdG9kb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zXCIpO1xyXG4gICAgY29uc3QgdG9kbyA9XHJcblx0XHRcdGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50XHJcbiAgICAgICAgICAgIC5wYXJlbnRFbGVtZW50O1xyXG4gICAgdG9kb3MucmVtb3ZlQ2hpbGQodG9kbyk7XHJcbiAgICBkZWxldGVUb2RvKHRvZG8uZGF0YXNldC5pZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVkaXRUb2RvKGUpIHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvcm1cIik7XHJcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faGVhZGluZ1wiKTtcclxuICAgIHRpdGxlLnRleHRDb250ZW50ID0gXCJFZGl0IFRhc2tcIjtcclxuXHRjb25zdCB0b2RvMiA9IGdldFRvZG9CeUlkKFxyXG5cdFx0ZS5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcclxuXHRcdFx0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZFxyXG4gICAgKTtcclxuICAgIGNvbnNvbGUubG9nKHRvZG8yKTtcclxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcclxuICAgIHRvZ2dsZU1vZGFsKCk7XHJcbiAgICBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcInRpdGxlXCIpLnZhbHVlID0gdG9kbzIudGl0bGU7XHJcbiAgICBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcImRlc2NyaXB0aW9uXCIpLnZhbHVlID0gdG9kbzIuZGVzY3JpcHRpb247XHJcbiAgICBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcInByaW9yaXR5XCIpLnZhbHVlID0gdG9kbzIucHJpb3JpdHk7XHJcbiAgICBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcInByb2plY3RcIikudmFsdWUgPSB0b2RvMi5wcm9qZWN0O1xyXG4gICAgZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJkYXRlXCIpLnZhbHVlID0gdG9kbzIuZHVlRGF0ZTtcclxuICAgIC8vZ2V0QURvY3VtZW50KCk7XHJcbiAgICBjb25zdCBjcmVhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNyZWF0ZVwiKTtcclxuICAgIGNyZWF0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgIGNvbnN0IHVwZGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXBkYXRlXCIpO1xyXG4gICAgdXBkYXRlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG4gICAgdXBkYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdF9fdGl0bGVcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGlzcGxheSk7XHJcbiAgICAgICAgLy9nZXQgY3VycmVudCBwcm9qZWN0IHBhZ2UgeW91cmUgb24gaXMgdGhlIHNhbWUgYXMgbmV3IHByb2plY3QsIHJlIHJlbmRlciBVSVxyXG4gICAgICAgIGlmIChkaXNwbGF5KSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcInByb2plY3RcIikudmFsdWUgPT09IGRpc3BsYXkudGV4dENvbnRlbnRcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b2RvMik7XHJcbiAgICAgICAgICAgICAgdXBkYXRlVG9kb1VJKHRvZG8yKTtcclxuICAgICAgICAgICAgICB0b2dnbGVNb2RhbCgpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIHVwZGF0ZVRvZG9VSSh0b2RvMik7XHJcbiAgICAgICAgLy9jb25zdCBwcm9qZWN0VHlwZSA9IGRpc3BsYXkudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgY29uc3QgbWlzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWlzY2VsbGFuZW91c1wiKTtcclxuICAgICAgICBjb25zdCBob21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJob21lXCIpO1xyXG4gICAgICAgIGNvbnN0IHdvcmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndvcmtcIik7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcInRpdGxlXCIpLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJkZXNjcmlwdGlvblwiKS52YWx1ZTtcclxuICAgICAgICBjb25zdCBwcmlvcml0eSA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwicHJpb3JpdHlcIikudmFsdWU7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwicHJvamVjdFwiKS52YWx1ZTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJkYXRlXCIpLnZhbHVlO1xyXG5cclxuICAgICAgICBpZiAocHJvamVjdCA9PT0gXCJ3b3JrXCIpIHtcclxuICAgICAgICAgICAgdXBkYXRlVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCB0b2RvMi5pZCwgdG9kbzIuc3RhdHVzKTtcclxuICAgICAgICAgICAgdG9nZ2xlTW9kYWwoKTtcclxuICAgICAgICAgICAgd29yay5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvamVjdCA9PT0gXCJob21lXCIpIHtcclxuICAgICAgICAgICAgdXBkYXRlVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCB0b2RvMi5pZCwgdG9kbzIuc3RhdHVzKTtcclxuICAgICAgICAgICAgdG9nZ2xlTW9kYWwoKTtcclxuICAgICAgICAgICAgaG9tZS5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvamVjdCA9PT0gXCJtaXNjZWxsYW5lb3VzXCIpIHtcclxuICAgICAgICAgICAgdXBkYXRlVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCB0b2RvMi5pZCwgdG9kbzIuc3RhdHVzKTtcclxuICAgICAgICAgICAgdG9nZ2xlTW9kYWwoKTtcclxuICAgICAgICAgICAgbWlzYy5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVUb2RvVUkodG9kbykge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybVwiKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJ0aXRsZVwiKS52YWx1ZTtcclxuICAgIC8vY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9fX3RpdGxlXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgcHJpb3JpdHkgPSBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcInByaW9yaXR5XCIpLnZhbHVlO1xyXG4gICAgY29uc3QgcHJvamVjdCA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKFwicHJvamVjdFwiKS52YWx1ZTtcclxuICAgIGNvbnN0IGRhdGUgPSBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbShcImRhdGVcIikudmFsdWU7XHJcbiAgICBjb25zb2xlLmxvZyh0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBwcm9qZWN0LCBkYXRlKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb19fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpb3JpdHlcIikudGV4dENvbnRlbnQgPSBwcmlvcml0eTtcclxuICAgXHJcbiAgICBpZiAocHJpb3JpdHkgPT09IFwibm9ybWFsXCIpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByaW9yaXR5XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWdoXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpb3JpdHlcIikuY2xhc3NMaXN0LmFkZChcIm5vcm1hbFwiKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHByaW9yaXR5ID09PSBcImhpZ2hcIikge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpb3JpdHlcIikuY2xhc3NMaXN0LnJlbW92ZShcIm5vcm1hbFwiKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByaW9yaXR5XCIpLmNsYXNzTGlzdC5hZGQoXCJoaWdoXCIpO1xyXG4gICAgfVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvX19kYXRlXCIpLnRleHRDb250ZW50ID0gZGF0ZTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgIC8vY29uc29sZS5sb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvX19wcm9qZWN0XCIpKTtcclxuICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb19fcHJvamVjdFwiKS50ZXh0Q29udGVudCA9IHByb2plY3Q7XHJcbiAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZ1bGx0aXRsZVwiKS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgY29uc29sZS5sb2codG9kby5pZCk7XHJcbiAgICB1cGRhdGVUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIHRvZG8uaWQsIHRvZG8uc3RhdHVzKTtcclxuICAgIC8vZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHJlbmRlclRvZG8gfTsiLCJpbXBvcnQgeyB0b2dnbGVNb2RhbCwgZ2V0VG9kYXlzRGF0ZSB9IGZyb20gXCIuL21vZGFsLmpzXCI7XHJcbmltcG9ydCB7IHJlbmRlclByb2plY3RVSSwgcmVuZGVyUHJvamVjdEhlYWRlciB9IGZyb20gXCIuL3Byb2plY3RzLmpzXCI7XHJcbmltcG9ydCB7IHJlbmRlclRhc2tzVUksIHJlbmRlclRhc2tzSGVhZGVyIH0gZnJvbSBcIi4vdGFza3MuanNcIjtcclxuaW1wb3J0IHsgcmVuZGVyVG9kbyB9IGZyb20gXCIuL3JlbmRlclRvZG8uanNcIjtcclxuaW1wb3J0IHsgc2hvd0luYm94LCB1cGRhdGVJbmJveENvdW50IH0gZnJvbSBcIi4vaW5ib3guanNcIjtcclxuaW1wb3J0IHsgZ2V0VXNlcm5hbWUgfSBmcm9tIFwiLi9hdXRoLmpzXCI7XHJcbmltcG9ydCB7IGdldEZpcmVzdG9yZSwgZG9jLCBnZXREb2MsIHNldERvYywgY29sbGVjdGlvbiwgdXBkYXRlRG9jLCBkZWxldGVEb2MsIGFkZERvYywgZ2V0RG9jcywgb25TbmFwc2hvdH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG5pbXBvcnQgeyBjbG9zZVNpZGViYXIgfSBmcm9tIFwiLi9oZWFkZXIuanNcIjtcclxuXHJcblxyXG5jb25zdCBpbmJveCA9IFtdO1xyXG5cclxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgYXBpS2V5OiBcIkFJemFTeUJQd0gtUHNTcnd6RmpyNnY4TFVNd2Jaa2JGczh4N1VhY1wiLFxyXG4gIGF1dGhEb21haW46IFwicHJvZHVjdGl2LTkzMmM5LmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gIHByb2plY3RJZDogXCJwcm9kdWN0aXYtOTMyYzlcIixcclxuICBzdG9yYWdlQnVja2V0OiBcInByb2R1Y3Rpdi05MzJjOS5hcHBzcG90LmNvbVwiLFxyXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjIzMjExMDQwNTI4NVwiLFxyXG4gIGFwcElkOiBcIjE6MjMyMTEwNDA1Mjg1OndlYjpkMzdkMTQzN2JjOTNmMDc3YzEzZjRjXCIsXHJcbiAgbWVhc3VyZW1lbnRJZDogXCJHLUNSMTkzWVhXN1JcIixcclxufTtcclxuXHJcbmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoKTtcclxuY29uc3QgdG9kb3MgPSBbXTtcclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRBbGxEYXRhKHVzZXJuYW1lKSB7XHJcblx0Y29uc29sZS5sb2coXCJnZXQgYWxsIGRhdGEgY2FsbGVkXCIpO1xyXG5cdGNvbnNvbGUubG9nKHVzZXJuYW1lKTtcclxuXHRjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCBgJHt1c2VybmFtZX10YXNrc2ApKTtcclxuXHJcblx0cXVlcnlTbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhkb2MuZGF0YSgpKTtcclxuXHRcdGlmIChkb2MuZGF0YSgpLmR1ZURhdGUgPD0gZ2V0VG9kYXlzRGF0ZSgpICYmIGRvYy5kYXRhKCkuc3RhdHVzID09PSBcInVucmVhZFwiKSB7XHJcblx0XHRcdGluYm94LnB1c2goZG9jLmRhdGEoKSk7XHJcblx0XHRcdHVwZGF0ZUluYm94Q291bnQoXCJhZGRcIik7XHJcblx0XHR9XHJcblx0XHR0b2Rvcy5wdXNoKGRvYy5kYXRhKCkpXHJcblx0fSlcclxufVxyXG5cclxuXHJcblxyXG4vL2FkZCB0byBmaXJlc3RvcmUgYXV0byBpZFxyXG5hc3luYyBmdW5jdGlvbiBhZGREb2N1bWVudChcclxuICB0aXRsZSxcclxuICBkZXNjcmlwdGlvbixcclxuICBkdWVEYXRlLFxyXG4gIHByaW9yaXR5LFxyXG4gIHByb2plY3QsXHJcbiAgaWQsXHJcbiAgc3RhdHVzXHJcbikge1xyXG4gIGNvbnN0IHJlZiA9IGNvbGxlY3Rpb24oZGIsIGAke2dldFVzZXJuYW1lKCl9dGFza3NgKTtcclxuXHRjb25zdCBkb2NyZWYgPSBhd2FpdCBhZGREb2MocmVmLCB7XHJcblx0XHR0aXRsZTogdGl0bGUsXHJcblx0XHRkZXNjaXB0aW9uOiBkZXNjcmlwdGlvbixcclxuXHRcdGR1ZURhdGU6IGR1ZURhdGUsXHJcblx0XHRwcmlvcml0eTogcHJpb3JpdHksXHJcblx0XHRwcm9qZWN0OiBwcm9qZWN0LFxyXG5cdFx0aWQ6IGlkLFxyXG5cdFx0c3RhdHVzOiBzdGF0dXNcclxuICB9KTtcclxufVxyXG5cclxuLy9hZGQgdG8gZmlyZXN0b3JlIGN1c3RvbSBpZFxyXG5hc3luYyBmdW5jdGlvbiBhZGREb2N1bWVudEN1c3RvbUlEKFxyXG4gIHRpdGxlLFxyXG4gIGRlc2NyaXB0aW9uLFxyXG4gIGR1ZURhdGUsXHJcbiAgcHJpb3JpdHksXHJcbiAgcHJvamVjdCxcclxuICBpZCxcclxuICBzdGF0dXNcclxuKSB7XHJcbiAgY29uc3QgcmVmID0gZG9jKGRiLCBgJHtnZXRVc2VybmFtZSgpfXRhc2tzYCwgU3RyaW5nKGlkKSk7XHJcbiAgYXdhaXQgc2V0RG9jKHJlZiwge1xyXG4gICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxyXG4gICAgZHVlRGF0ZTogZHVlRGF0ZSxcclxuICAgIHByaW9yaXR5OiBwcmlvcml0eSxcclxuICAgIHByb2plY3Q6IHByb2plY3QsXHJcbiAgICBpZDogaWQsXHJcbiAgICBzdGF0dXM6IHN0YXR1cyxcclxuICB9KTtcclxufVxyXG5cclxuLy9nZXQgYSBkb2N1bWVudFxyXG5hc3luYyBmdW5jdGlvbiBnZXRBRG9jdW1lbnQoKSB7XHJcblx0Y29uc3QgcmVmID0gZG9jKGRiLCBgJHtnZXRVc2VybmFtZSgpfXRhc2tzYCwgaWQpO1xyXG5cdGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MocmVmKTtcclxuXHRpZiAoZG9jU25hcC5leGlzdHMoKSkge1xyXG5cdFx0dGl0bGUudmFsdWUgPSBkb2NTbmFwLmRhdGEoKS50aXRsZTtcclxuXHRcdGRlc2NyaXB0aW9uLnZhbHVlID0gZG9jU25hcC5kYXRhKCkuZGVzY3JpcHRpb247XHJcblx0XHRkdWVEYXRlLnZhbHVlID0gZG9jU25hcC5kYXRhKCkuZHVlRGF0ZTtcclxuXHRcdHByaW9yaXR5LnZhbHVlID0gZG9jU25hcC5kYXRhKCkucHJpb3JpdHk7XHJcblx0XHRwcm9qZWN0LnZhbHVlID0gZG9jU25hcC5kYXRhKCkucHJvamVjdDtcclxuXHRcdGlkLnZhbHVlID0gZG9jU25hcC5kYXRhKCkuaWQ7XHJcblx0XHRcclxuXHR9XHJcbn1cclxuXHJcbi8vdXBkYXRlIGEgZG9jdW1lbnRcclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRG9jdW1lbnQoXHJcbiAgdGl0bGUsXHJcbiAgZGVzY3JpcHRpb24sXHJcbiAgZHVlRGF0ZSxcclxuICBwcmlvcml0eSxcclxuICBwcm9qZWN0LFxyXG4gIGlkLFxyXG4gIHN0YXR1c1xyXG4pIHtcclxuICBjb25zdCByZWYgPSBkb2MoZGIsIGAke2dldFVzZXJuYW1lKCl9dGFza3NgLCBTdHJpbmcoaWQpKTtcclxuICBhd2FpdCB1cGRhdGVEb2MocmVmLCB7XHJcbiAgICB0aXRsZTogdGl0bGUsXHJcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICBkdWVEYXRlOiBkdWVEYXRlLFxyXG4gICAgcHJpb3JpdHk6IHByaW9yaXR5LFxyXG4gICAgcHJvamVjdDogcHJvamVjdCxcclxuICAgIGlkOiBpZCxcclxuICAgIHN0YXR1czogc3RhdHVzLFxyXG4gIH0pO1xyXG59XHJcblxyXG4vL2RlbGV0ZSBhIGRvY3VtZW50XHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZURvY3VtZW50KGlkKSB7XHJcblx0Y29uc3QgcmVmID0gZG9jKGRiLCBgJHtnZXRVc2VybmFtZSgpfXRhc2tzYCwgaWQpO1xyXG5cdGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MocmVmKTtcclxuXHJcblx0aWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcclxuXHRcdGRlbGV0ZURvYyhyZWYpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgVG9kb3Mge1xyXG5cdGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIGlkLCBzdGF0dXMpIHtcclxuXHRcdHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHRcdHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuXHRcdHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcblx0XHR0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcblx0XHR0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG5cdFx0dGhpcy5pZCA9IGlkO1xyXG5cdFx0dGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcblx0fVxyXG5cclxuXHRnZXRUaXRsZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLnRpdGxlO1xyXG5cdH1cclxuXHJcblx0c2V0VGl0bGUodGl0bGUpIHtcclxuXHRcdHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHR9XHJcblxyXG5cdGdldERlc2NyaXB0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZGVzY3JpcHRpb247XHJcblx0fVxyXG5cclxuXHRzZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbikge1xyXG5cdFx0dGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG5cdH1cclxuXHJcblx0Z2V0RHVlRGF0ZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLmR1ZURhdGU7XHJcblx0fVxyXG5cclxuXHRzZXREdWVEYXRlKGR1ZURhdGUpIHtcclxuXHRcdHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcblx0fVxyXG5cclxuXHRnZXRQcmlvcml0eSgpIHtcclxuXHRcdHJldHVybiB0aGlzLnByaW9yaXR5O1xyXG5cdH1cclxuXHJcblx0c2V0UHJpb3JpdHkocHJpb3JpdHkpIHtcclxuXHRcdHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuXHR9XHJcblxyXG5cdGdldElkKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuaWQ7XHJcblx0fVxyXG5cclxuXHRnZXRQcm9qZWN0KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMucHJvamVjdDtcclxuXHR9XHJcblxyXG5cdHNldFByb2plY3QocHJvamVjdCkge1xyXG5cdFx0dGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuXHR9XHJcblxyXG5cdHNldElkKGlkKSB7XHJcblx0XHR0aGlzLmlkID0gaWQ7XHJcblx0fVxyXG5cclxuXHRnZXRTdGF0dXMoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zdGF0dXM7XHJcblx0fVxyXG5cclxuXHRzZXRTdGF0dXMoc3RhdHVzKSB7XHJcblx0XHR0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvcHVsYXRlVG9kbyhlKSB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZVwiKS52YWx1ZTtcclxuXHRjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlcIikudmFsdWU7XHJcblx0Y29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdFwiKS52YWx1ZTtcclxuXHRjb25zdCBpZCA9IE1hdGgucmFuZG9tKCk7XHJcblx0Y29uc3Qgc3RhdHVzID0gXCJ1bnJlYWRcIjtcclxuXHRjb25zdCBuZXdUb2RvID0gbmV3IFRvZG9zKFxyXG5cdFx0dGl0bGUsXHJcblx0XHRkZXNjcmlwdGlvbixcclxuXHRcdGRhdGUsXHJcblx0XHRwcmlvcml0eSxcclxuXHRcdHByb2plY3QsXHJcblx0XHRpZCxcclxuXHRcdHN0YXR1c1xyXG4gICAgKTtcclxuXHRcclxuXHR0b2Rvcy5wdXNoKG5ld1RvZG8pO1xyXG5cdGFkZERvY3VtZW50Q3VzdG9tSUQodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgaWQsIHN0YXR1cyk7XHJcblx0aWYgKGRhdGUgPT09IGdldFRvZGF5c0RhdGUoKSkge1xyXG5cdFx0aW5ib3gudW5zaGlmdChuZXdUb2RvKTtcclxuXHRcdHVwZGF0ZUluYm94Q291bnQoXCJhZGRcIik7XHJcblx0fVxyXG5cdHRvZ2dsZU1vZGFsKCk7XHJcblx0Y29uc3QgbWFpblRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2Rpc3BsYXlcIik7XHJcblx0aWYgKG1haW5UaXRsZS50ZXh0Q29udGVudCA9PT0gXCJJbmJveFwiKSB7XHJcblx0XHRzaG93SW5ib3goaW5ib3gpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNvcnRUb2Rvc0J5UHJvamVjdChlKSB7XHJcblx0Y2xvc2VTaWRlYmFyKCk7XHJcblx0Y29uc3Qgc29ydGVkQnlQcm9qZWN0ID0gdG9kb3MuZmlsdGVyKHRvZG8gPT4ge1xyXG5cdFx0Zm9yIChjb25zdCBwcm9wIGluIHRvZG8pIHtcclxuXHRcdFx0aWYgKHRvZG9bcHJvcF0gPT09IGUuY3VycmVudFRhcmdldC5pZCkge1xyXG5cdFx0XHRcdHJldHVybiB0b2RvO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxuXHRyZW5kZXJQcm9qZWN0SGVhZGVyKGUuY3VycmVudFRhcmdldC5pZCk7XHJcblx0cmVuZGVyUHJvamVjdFVJKHNvcnRlZEJ5UHJvamVjdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvcnRUb2Rvc0J5VGFzayhlKSB7XHJcblx0Y2xvc2VTaWRlYmFyKCk7XHJcblx0bGV0IHNvcnRlZFRvZG9zID0gW107XHJcblx0aWYgKGUuY3VycmVudFRhcmdldC5pZCA9PT0gXCJ0b2RheVwiKSB7XHJcblx0XHRzb3J0ZWRUb2RvcyA9IHRvZG9zLmZpbHRlcigodG9kbykgPT4ge1xyXG5cdFx0XHRyZXR1cm4gdG9kby5kdWVEYXRlID09PSBnZXRUb2RheXNEYXRlKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0ZWxzZSBpZiAoZS5jdXJyZW50VGFyZ2V0LmlkID09PSBcIm92ZXJkdWVcIikge1xyXG5cdFx0c29ydGVkVG9kb3MgPSB0b2Rvcy5maWx0ZXIodG9kbyA9PiB7XHJcblx0XHRcdHJldHVybiB0b2RvLmR1ZURhdGUgPCBnZXRUb2RheXNEYXRlKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0ZWxzZSBpZiAoZS5jdXJyZW50VGFyZ2V0LmlkID09PSBcInVwY29taW5nXCIpIHtcclxuXHRcdHNvcnRlZFRvZG9zID0gdG9kb3MuZmlsdGVyKHRvZG8gPT4ge1xyXG5cdFx0XHRyZXR1cm4gdG9kby5kdWVEYXRlID4gZ2V0VG9kYXlzRGF0ZSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJlbmRlclRhc2tzSGVhZGVyKGUuY3VycmVudFRhcmdldC5pZCk7XHJcbiAgXHRyZW5kZXJUYXNrc1VJKHNvcnRlZFRvZG9zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0FsbFRhc2tzKGUpIHtcclxuXHRjbG9zZVNpZGViYXIoKTtcclxuXHRyZW5kZXJUYXNrc0hlYWRlcihlLmN1cnJlbnRUYXJnZXQuaWQpO1xyXG4gIFx0cmVuZGVyVGFza3NVSSh0b2Rvcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRvZG9CeUlkKGlkKSB7XHJcblx0Y29uc3QgbWF0Y2ggPSBbXTtcclxuXHR0b2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xyXG5cdFx0Y29uc29sZS5sb2codHlwZW9mIHRvZG8uaWQsIHR5cGVvZiBpZCk7XHJcblx0XHRpZiAodG9kby5pZCA9PSBpZCkge1xyXG5cdFx0XHRcclxuXHRcdFx0bWF0Y2gucHVzaCh0b2RvKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRyZXR1cm4gbWF0Y2hbMF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVRvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgaWQsIHN0YXR1cykge1xyXG5cdHRvZG9zLmZvckVhY2godG9kbyA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyh0b2RvLmlkLCBpZCk7XHJcblx0XHRpZiAodG9kby5pZCA9PT0gaWQpIHtcclxuXHRcdFx0Ly8gdG9kby5zZXRUaXRsZSh0aXRsZSk7XHJcblx0XHRcdC8vIHRvZG8uc2V0RGVzY3JpcHRpb24oZGVzY3JpcHRpb24pO1xyXG5cdFx0XHQvLyB0b2RvLnNldER1ZURhdGUoZHVlRGF0ZSk7XHJcblx0XHRcdC8vIHRvZG8uc2V0UHJpb3JpdHkocHJpb3JpdHkpO1xyXG5cdFx0XHQvLyB0b2RvLnNldFByb2plY3QocHJvamVjdCk7XHJcblx0XHRcdC8vIHRvZG8uc2V0U3RhdHVzKHN0YXR1cyk7XHJcblx0XHRcdHRvZG8udGl0bGUgPSB0aXRsZTtcclxuXHRcdFx0dG9kby5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG5cdFx0XHR0b2RvLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG5cdFx0XHR0b2RvLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcblx0XHRcdHRvZG8ucHJvamVjdCA9IHByb2plY3Q7XHJcblx0XHRcdHRvZG8uc3RhdHVzID0gc3RhdHVzO1xyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS5sb2codG9kbyk7XHJcblx0fSk7XHJcblx0Y29uc29sZS5sb2codGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdCwgaWQsIHN0YXR1cyk7XHJcblx0Y29uc29sZS5sb2codG9kb3MpO1xyXG5cdHVwZGF0ZURvY3VtZW50KHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIGlkLCBzdGF0dXMpO1xyXG5cdC8vZ2V0QWxsRGF0YSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVUb2RvKGlkKSB7XHJcblx0dG9kb3MuZm9yRWFjaCgodG9kbywgaW5kZXgpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKHRvZG8pO1xyXG5cdFx0aWYgKHRvZG8uaWQgPT09IGlkKSB7XHJcblx0XHRcdHRvZG9zLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiaGVyZVwiKTtcclxuXHRcdFx0ZGVsZXRlRG9jdW1lbnQoaWQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVJbmJveE1lc3NhZ2UoaWQpIHtcclxuXHRpbmJveC5mb3JFYWNoKCh0b2RvLCBpbmRleCkgPT4ge1xyXG4gICAgaWYgKHRvZG8uaWQgPT09IGlkKSB7XHJcbiAgICAgIGluYm94LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEluYm94KCkge1xyXG5cdGNsb3NlU2lkZWJhcigpO1xyXG5cdHNob3dJbmJveChpbmJveCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7cG9wdWxhdGVUb2RvLCBzb3J0VG9kb3NCeVByb2plY3QsIGdldFRvZG9CeUlkLCB1cGRhdGVUb2RvLCBkZWxldGVUb2RvLCBzaG93QWxsVGFza3MsIHNvcnRUb2Rvc0J5VGFzaywgZ2V0SW5ib3gsIGRlbGV0ZUluYm94TWVzc2FnZSwgZ2V0QURvY3VtZW50LCB1cGRhdGVEb2N1bWVudCwgZ2V0QWxsRGF0YX07IiwiaW1wb3J0IHsgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24sIF9nZXRQcm92aWRlciwgZ2V0QXBwLCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBTREtfVkVSU0lPTiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBjcmVhdGVNb2NrVXNlclRva2VuLCBnZXRNb2R1bGFySW5zdGFuY2UsIGRlZXBFcXVhbCwgZ2V0VUEsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc1NhZmFyaSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc1JlYWN0TmF0aXZlLCBpc0VsZWN0cm9uLCBpc0lFLCBpc1VXUCwgaXNCcm93c2VyRXh0ZW5zaW9uIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgWGhySW8sIEV2ZW50VHlwZSwgRXJyb3JDb2RlLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBnZXRTdGF0RXZlbnRUYXJnZXQsIEZldGNoWG1sSHR0cEZhY3RvcnksIFdlYkNoYW5uZWwsIEV2ZW50LCBTdGF0IH0gZnJvbSAnQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlcic7XG5cbmNvbnN0IFMgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGEgbnVsbGFibGUgVUlELiBNb3N0bHkgZXhpc3RzIHRvIG1ha2UgY29kZSBtb3JlXG4gKiByZWFkYWJsZS5cbiAqL1xuY2xhc3MgRCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnVpZCA9IHQ7XG4gICAgfVxuICAgIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy51aWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBrZXkgcmVwcmVzZW50aW5nIHRoaXMgdXNlciwgc3VpdGFibGUgZm9yIGluY2x1c2lvbiBpbiBhXG4gICAgICogZGljdGlvbmFyeS5cbiAgICAgKi8gICAgdG9LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQXV0aGVudGljYXRlZCgpID8gXCJ1aWQ6XCIgKyB0aGlzLnVpZCA6IFwiYW5vbnltb3VzLXVzZXJcIjtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnVpZCA9PT0gdGhpcy51aWQ7XG4gICAgfVxufVxuXG4vKiogQSB1c2VyIHdpdGggYSBudWxsIFVJRC4gKi8gRC5VTkFVVEhFTlRJQ0FURUQgPSBuZXcgRChudWxsKSwgXG4vLyBUT0RPKG1pa2VsZWhlbik6IExvb2sgaW50byBnZXR0aW5nIGEgcHJvcGVyIHVpZC1lcXVpdmFsZW50IGZvclxuLy8gbm9uLUZpcmViYXNlQXV0aCBwcm92aWRlcnMuXG5ELkdPT0dMRV9DUkVERU5USUFMUyA9IG5ldyBEKFwiZ29vZ2xlLWNyZWRlbnRpYWxzLXVpZFwiKSwgRC5GSVJTVF9QQVJUWSA9IG5ldyBEKFwiZmlyc3QtcGFydHktdWlkXCIpLCBcbkQuTU9DS19VU0VSID0gbmV3IEQoXCJtb2NrLXVzZXJcIik7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5sZXQgQyA9IFwiOS42LjFcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IE4gPSBuZXcgTG9nZ2VyKFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcblxuLy8gSGVscGVyIG1ldGhvZHMgYXJlIG5lZWRlZCBiZWNhdXNlIHZhcmlhYmxlcyBjYW4ndCBiZSBleHBvcnRlZCBhcyByZWFkL3dyaXRlXG5mdW5jdGlvbiBrKCkge1xuICAgIHJldHVybiBOLmxvZ0xldmVsO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHZlcmJvc2l0eSBvZiBDbG91ZCBGaXJlc3RvcmUgbG9ncyAoZGVidWcsIGVycm9yLCBvciBzaWxlbnQpLlxuICpcbiAqIEBwYXJhbSBsb2dMZXZlbCAtIFRoZSB2ZXJib3NpdHkgeW91IHNldCBmb3IgYWN0aXZpdHkgYW5kIGVycm9yIGxvZ2dpbmcuIENhblxuICogICBiZSBhbnkgb2YgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gKlxuICogICA8dWw+XG4gKiAgICAgPGxpPmBkZWJ1Z2AgZm9yIHRoZSBtb3N0IHZlcmJvc2UgbG9nZ2luZyBsZXZlbCwgcHJpbWFyaWx5IGZvclxuICogICAgIGRlYnVnZ2luZy48L2xpPlxuICogICAgIDxsaT5gZXJyb3JgIHRvIGxvZyBlcnJvcnMgb25seS48L2xpPlxuICogICAgIDxsaT48Y29kZT5gc2lsZW50YCB0byB0dXJuIG9mZiBsb2dnaW5nLjwvbGk+XG4gKiAgIDwvdWw+XG4gKi8gZnVuY3Rpb24geCh0KSB7XG4gICAgTi5zZXRMb2dMZXZlbCh0KTtcbn1cblxuZnVuY3Rpb24gJCh0LCAuLi5lKSB7XG4gICAgaWYgKE4ubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKE0pO1xuICAgICAgICBOLmRlYnVnKGBGaXJlc3RvcmUgKCR7Q30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBGKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTSk7XG4gICAgICAgIE4uZXJyb3IoYEZpcmVzdG9yZSAoJHtDfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gTyh0LCAuLi5lKSB7XG4gICAgaWYgKE4ubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTSk7XG4gICAgICAgIE4ud2FybihgRmlyZXN0b3JlICgke0N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhZGRpdGlvbmFsIGxvZyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gTSh0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0O1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBlID0gdCwgSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDb252ZXJ0aW5nIHRvIEpTT04gZmFpbGVkLCBqdXN0IGxvZyB0aGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKiBGb3JtYXRzIGFuIG9iamVjdCBhcyBhIEpTT04gc3RyaW5nLCBzdWl0YWJsZSBmb3IgbG9nZ2luZy4gKi9cbiAgICB2YXIgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICpcbiAqIFJldHVybnMgYG5ldmVyYCBhbmQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnM6XG4gKiBAZXhhbXBsZVxuICogbGV0IGZ1dHVyZVZhciA9IGZhaWwoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAqLyBmdW5jdGlvbiBMKHQgPSBcIlVuZXhwZWN0ZWQgc3RhdGVcIikge1xuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxuICAgIGNvbnN0IGUgPSBgRklSRVNUT1JFICgke0N9KSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgdDtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZXN0b3JlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcbiAgICB0aHJvdyBGKGUpLCBuZXcgRXJyb3IoZSk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKi8gZnVuY3Rpb24gQih0LCBlKSB7XG4gICAgdCB8fCBMKCk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBUaGUgY29kZSBvZiBjYWxsc2l0ZXMgaW52b2tpbmcgdGhpcyBmdW5jdGlvbiBhcmUgc3RyaXBwZWQgb3V0IGluIHByb2R1Y3Rpb25cbiAqIGJ1aWxkcy4gQW55IHNpZGUtZWZmZWN0cyBvZiBjb2RlIHdpdGhpbiB0aGUgZGVidWdBc3NlcnQoKSBpbnZvY2F0aW9uIHdpbGwgbm90XG4gKiBoYXBwZW4gaW4gdGhpcyBjYXNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIFUodCwgZSkge1xuICAgIHQgfHwgTCgpO1xufVxuXG4vKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYC4gSW4gbm9uLXByb2R1Y3Rpb24gYnVpbGRzLCB2ZXJpZmllcyB0aGF0IGBvYmpgIGlzIGFuXG4gKiBpbnN0YW5jZSBvZiBgVGAgYmVmb3JlIGNhc3RpbmcuXG4gKi8gZnVuY3Rpb24gcSh0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5lKSB7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEsgPSB7XG4gICAgLy8gQ2F1c2VzIGFyZSBjb3BpZWQgZnJvbTpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXG4gICAgT0s6IFwib2tcIixcbiAgICAvKiogVGhlIG9wZXJhdGlvbiB3YXMgY2FuY2VsbGVkICh0eXBpY2FsbHkgYnkgdGhlIGNhbGxlcikuICovXG4gICAgQ0FOQ0VMTEVEOiBcImNhbmNlbGxlZFwiLFxuICAgIC8qKiBVbmtub3duIGVycm9yIG9yIGFuIGVycm9yIGZyb20gYSBkaWZmZXJlbnQgZXJyb3IgZG9tYWluLiAqL1xuICAgIFVOS05PV046IFwidW5rbm93blwiLFxuICAgIC8qKlxuICAgICAqIENsaWVudCBzcGVjaWZpZWQgYW4gaW52YWxpZCBhcmd1bWVudC4gTm90ZSB0aGF0IHRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogRkFJTEVEX1BSRUNPTkRJVElPTi4gSU5WQUxJRF9BUkdVTUVOVCBpbmRpY2F0ZXMgYXJndW1lbnRzIHRoYXQgYXJlXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxuICAgICAqIG5hbWUpLlxuICAgICAqL1xuICAgIElOVkFMSURfQVJHVU1FTlQ6IFwiaW52YWxpZC1hcmd1bWVudFwiLFxuICAgIC8qKlxuICAgICAqIERlYWRsaW5lIGV4cGlyZWQgYmVmb3JlIG9wZXJhdGlvbiBjb3VsZCBjb21wbGV0ZS4gRm9yIG9wZXJhdGlvbnMgdGhhdFxuICAgICAqIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSwgdGhpcyBlcnJvciBtYXkgYmUgcmV0dXJuZWQgZXZlbiBpZiB0aGVcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgKiBmcm9tIGEgc2VydmVyIGNvdWxkIGhhdmUgYmVlbiBkZWxheWVkIGxvbmcgZW5vdWdoIGZvciB0aGUgZGVhZGxpbmUgdG9cbiAgICAgKiBleHBpcmUuXG4gICAgICovXG4gICAgREVBRExJTkVfRVhDRUVERUQ6IFwiZGVhZGxpbmUtZXhjZWVkZWRcIixcbiAgICAvKiogU29tZSByZXF1ZXN0ZWQgZW50aXR5IChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgd2FzIG5vdCBmb3VuZC4gKi9cbiAgICBOT1RfRk9VTkQ6IFwibm90LWZvdW5kXCIsXG4gICAgLyoqXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBBTFJFQURZX0VYSVNUUzogXCJhbHJlYWR5LWV4aXN0c1wiLFxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgdGhlIHNwZWNpZmllZCBvcGVyYXRpb24uXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBmb3IgcmVqZWN0aW9ucyBjYXVzZWQgYnkgZXhoYXVzdGluZ1xuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGlmIHRoZSBjYWxsZXIgY2FuIG5vdCBiZSBpZGVudGlmaWVkXG4gICAgICogKHVzZSBVTkFVVEhFTlRJQ0FURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKi9cbiAgICBQRVJNSVNTSU9OX0RFTklFRDogXCJwZXJtaXNzaW9uLWRlbmllZFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0IGRvZXMgbm90IGhhdmUgdmFsaWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZVxuICAgICAqIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBVTkFVVEhFTlRJQ0FURUQ6IFwidW5hdXRoZW50aWNhdGVkXCIsXG4gICAgLyoqXG4gICAgICogU29tZSByZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWQsIHBlcmhhcHMgYSBwZXItdXNlciBxdW90YSwgb3IgcGVyaGFwcyB0aGVcbiAgICAgKiBlbnRpcmUgZmlsZSBzeXN0ZW0gaXMgb3V0IG9mIHNwYWNlLlxuICAgICAqL1xuICAgIFJFU09VUkNFX0VYSEFVU1RFRDogXCJyZXNvdXJjZS1leGhhdXN0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIHJlamVjdGVkIGJlY2F1c2UgdGhlIHN5c3RlbSBpcyBub3QgaW4gYSBzdGF0ZSByZXF1aXJlZCBmb3JcbiAgICAgKiB0aGUgb3BlcmF0aW9uJ3MgZXhlY3V0aW9uLiBGb3IgZXhhbXBsZSwgZGlyZWN0b3J5IHRvIGJlIGRlbGV0ZWQgbWF5IGJlXG4gICAgICogbm9uLWVtcHR5LCBhbiBybWRpciBvcGVyYXRpb24gaXMgYXBwbGllZCB0byBhIG5vbi1kaXJlY3RvcnksIGV0Yy5cbiAgICAgKlxuICAgICAqIEEgbGl0bXVzIHRlc3QgdGhhdCBtYXkgaGVscCBhIHNlcnZpY2UgaW1wbGVtZW50b3IgaW4gZGVjaWRpbmdcbiAgICAgKiBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsIGFuZCBVTkFWQUlMQUJMRTpcbiAgICAgKiAgKGEpIFVzZSBVTkFWQUlMQUJMRSBpZiB0aGUgY2xpZW50IGNhbiByZXRyeSBqdXN0IHRoZSBmYWlsaW5nIGNhbGwuXG4gICAgICogIChiKSBVc2UgQUJPUlRFRCBpZiB0aGUgY2xpZW50IHNob3VsZCByZXRyeSBhdCBhIGhpZ2hlci1sZXZlbFxuICAgICAqICAgICAgKGUuZy4sIHJlc3RhcnRpbmcgYSByZWFkLW1vZGlmeS13cml0ZSBzZXF1ZW5jZSkuXG4gICAgICogIChjKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW50aWxcbiAgICAgKiAgICAgIHRoZSBzeXN0ZW0gc3RhdGUgaGFzIGJlZW4gZXhwbGljaXRseSBmaXhlZC4gRS5nLiwgaWYgYW4gXCJybWRpclwiXG4gICAgICogICAgICBmYWlscyBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgaXMgbm9uLWVtcHR5LCBGQUlMRURfUFJFQ09ORElUSU9OXG4gICAgICogICAgICBzaG91bGQgYmUgcmV0dXJuZWQgc2luY2UgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVubGVzc1xuICAgICAqICAgICAgdGhleSBoYXZlIGZpcnN0IGZpeGVkIHVwIHRoZSBkaXJlY3RvcnkgYnkgZGVsZXRpbmcgZmlsZXMgZnJvbSBpdC5cbiAgICAgKiAgKGQpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgcGVyZm9ybXMgY29uZGl0aW9uYWxcbiAgICAgKiAgICAgIFJFU1QgR2V0L1VwZGF0ZS9EZWxldGUgb24gYSByZXNvdXJjZSBhbmQgdGhlIHJlc291cmNlIG9uIHRoZVxuICAgICAqICAgICAgc2VydmVyIGRvZXMgbm90IG1hdGNoIHRoZSBjb25kaXRpb24uIEUuZy4sIGNvbmZsaWN0aW5nXG4gICAgICogICAgICByZWFkLW1vZGlmeS13cml0ZSBvbiB0aGUgc2FtZSByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBGQUlMRURfUFJFQ09ORElUSU9OOiBcImZhaWxlZC1wcmVjb25kaXRpb25cIixcbiAgICAvKipcbiAgICAgKiBUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLCB0eXBpY2FsbHkgZHVlIHRvIGEgY29uY3VycmVuY3kgaXNzdWUgbGlrZVxuICAgICAqIHNlcXVlbmNlciBjaGVjayBmYWlsdXJlcywgdHJhbnNhY3Rpb24gYWJvcnRzLCBldGMuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgQUJPUlRFRDogXCJhYm9ydGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyBhdHRlbXB0ZWQgcGFzdCB0aGUgdmFsaWQgcmFuZ2UuIEUuZy4sIHNlZWtpbmcgb3IgcmVhZGluZ1xuICAgICAqIHBhc3QgZW5kIG9mIGZpbGUuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgSU5WQUxJRF9BUkdVTUVOVCwgdGhpcyBlcnJvciBpbmRpY2F0ZXMgYSBwcm9ibGVtIHRoYXQgbWF5IGJlIGZpeGVkXG4gICAgICogaWYgdGhlIHN5c3RlbSBzdGF0ZSBjaGFuZ2VzLiBGb3IgZXhhbXBsZSwgYSAzMi1iaXQgZmlsZSBzeXN0ZW0gd2lsbFxuICAgICAqIGdlbmVyYXRlIElOVkFMSURfQVJHVU1FTlQgaWYgYXNrZWQgdG8gcmVhZCBhdCBhbiBvZmZzZXQgdGhhdCBpcyBub3QgaW4gdGhlXG4gICAgICogcmFuZ2UgWzAsMl4zMi0xXSwgYnV0IGl0IHdpbGwgZ2VuZXJhdGUgT1VUX09GX1JBTkdFIGlmIGFza2VkIHRvIHJlYWQgZnJvbVxuICAgICAqIGFuIG9mZnNldCBwYXN0IHRoZSBjdXJyZW50IGZpbGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIFRoZXJlIGlzIGEgZmFpciBiaXQgb2Ygb3ZlcmxhcCBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICogT1VUX09GX1JBTkdFLiBXZSByZWNvbW1lbmQgdXNpbmcgT1VUX09GX1JBTkdFICh0aGUgbW9yZSBzcGVjaWZpYyBlcnJvcilcbiAgICAgKiB3aGVuIGl0IGFwcGxpZXMgc28gdGhhdCBjYWxsZXJzIHdobyBhcmUgaXRlcmF0aW5nIHRocm91Z2ggYSBzcGFjZSBjYW5cbiAgICAgKiBlYXNpbHkgbG9vayBmb3IgYW4gT1VUX09GX1JBTkdFIGVycm9yIHRvIGRldGVjdCB3aGVuIHRoZXkgYXJlIGRvbmUuXG4gICAgICovXG4gICAgT1VUX09GX1JBTkdFOiBcIm91dC1vZi1yYW5nZVwiLFxuICAgIC8qKiBPcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIG9yIG5vdCBzdXBwb3J0ZWQvZW5hYmxlZCBpbiB0aGlzIHNlcnZpY2UuICovXG4gICAgVU5JTVBMRU1FTlRFRDogXCJ1bmltcGxlbWVudGVkXCIsXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgZXJyb3JzLiBNZWFucyBzb21lIGludmFyaWFudHMgZXhwZWN0ZWQgYnkgdW5kZXJseWluZyBTeXN0ZW0gaGFzXG4gICAgICogYmVlbiBicm9rZW4uIElmIHlvdSBzZWUgb25lIG9mIHRoZXNlIGVycm9ycywgU29tZXRoaW5nIGlzIHZlcnkgYnJva2VuLlxuICAgICAqL1xuICAgIElOVEVSTkFMOiBcImludGVybmFsXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHNlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiBUaGlzIGlzIGEgbW9zdCBsaWtlbHkgYSB0cmFuc2llbnRcbiAgICAgKiBjb25kaXRpb24gYW5kIG1heSBiZSBjb3JyZWN0ZWQgYnkgcmV0cnlpbmcgd2l0aCBhIGJhY2tvZmYuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgVU5BVkFJTEFCTEU6IFwidW5hdmFpbGFibGVcIixcbiAgICAvKiogVW5yZWNvdmVyYWJsZSBkYXRhIGxvc3Mgb3IgY29ycnVwdGlvbi4gKi9cbiAgICBEQVRBX0xPU1M6IFwiZGF0YS1sb3NzXCJcbn07XG5cbi8qKiBBbiBlcnJvciByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBvcGVyYXRpb24uICovIGNsYXNzIGogZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgYmFja2VuZCBlcnJvciBjb2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVycm9yLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgY3VzdG9tIGVycm9yIGRlc2NyaXB0aW9uLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMuY29kZSA9IHQsIHRoaXMubWVzc2FnZSA9IGUsIFxuICAgICAgICAvKiogVGhlIGN1c3RvbSBuYW1lIGZvciBhbGwgRmlyZXN0b3JlRXJyb3JzLiAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkZpcmViYXNlRXJyb3JcIiwgXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5uYW1lfTogW2NvZGU9JHt0aGlzLmNvZGV9XTogJHt0aGlzLm1lc3NhZ2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFEge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHQsIHRoaXMucmVqZWN0ID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgVyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLnR5cGUgPSBcIk9BdXRoXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0fWApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgRyB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoRC5VTkFVVEhFTlRJQ0FURUQpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgcmV0dXJucyBhIGNvbnN0YW50IHRva2VuLiBVc2VkIGZvclxuICogZW11bGF0b3IgdG9rZW4gbW9ja2luZy5cbiAqLyBjbGFzcyB6IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyB0aGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKClcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcbiAgICAgICAgICogdG8gdmVyaWZ5IHRoZSBsaXN0ZW4gY29udHJhY3QgaXMgYWRoZXJlZCB0byBpbiB0ZXN0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnRva2VuKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBlLCBcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKHRoaXMudG9rZW4udXNlcikpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgSCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnQgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gRC5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIGUodCkpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8vIEEgcHJvbWlzZSB0aGF0IGNhbiBiZSB3YWl0ZWQgb24gdG8gYmxvY2sgb24gdGhlIG5leHQgdG9rZW4gY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIHByb21pc2UgaXMgcmUtY3JlYXRlZCBhZnRlciBlYWNoIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBsZXQgaSA9IG5ldyBRO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBRLCB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IHModGhpcy5jdXJyZW50VXNlcikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBpO1xuICAgICAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZS5wcm9taXNlLCBhd2FpdCBzKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBvID0gdCA9PiB7XG4gICAgICAgICAgICAkKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggZGV0ZWN0ZWRcIiksIHRoaXMuYXV0aCA9IHQsIHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pLCBcbiAgICAgICAgICAgIHIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50Lm9uSW5pdCgodCA9PiBvKHQpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXV0aCByaWdodCBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsgYmVmb3JlIHdlXG4gICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRvIHN0YXJ0IHVwIGluIHVuYXV0aGVudGljYXRlZCBtb2RlLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnQuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IG8odCkgOiAoXG4gICAgICAgICAgICAgICAgLy8gSWYgYXV0aCBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGggYG51bGxgIHVzZXJcbiAgICAgICAgICAgICAgICAkKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggbm90IHlldCBkZXRlY3RlZFwiKSwgaS5yZXNvbHZlKCksIGkgPSBuZXcgUSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKSwgcigpO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgLy8gVGFrZSBub3RlIG9mIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB0b2tlbkNvdW50ZXIgc28gdGhhdCB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBjYW4gZmFpbCAod2l0aCBhbiBBQk9SVEVEIGVycm9yKSBpZiB0aGVyZSBpcyBhIHRva2VuIGNoYW5nZSB3aGlsZSB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBpcyBvdXRzdGFuZGluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuaSwgZSA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID8gdGhpcy5hdXRoLmdldFRva2VuKGUpLnRoZW4oKGUgPT4gXG4gICAgICAgIC8vIENhbmNlbCB0aGUgcmVxdWVzdCBzaW5jZSB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSB0aGUgcmVxdWVzdCB3YXNcbiAgICAgICAgLy8gb3V0c3RhbmRpbmcgc28gdGhlIHJlc3BvbnNlIGlzIHBvdGVudGlhbGx5IGZvciBhIHByZXZpb3VzIHVzZXIgKHdoaWNoXG4gICAgICAgIC8vIHVzZXIsIHdlIGNhbid0IGJlIHN1cmUpLlxuICAgICAgICB0aGlzLmkgIT09IHQgPyAoJChcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IGUgPyAoQihcInN0cmluZ1wiID09IHR5cGVvZiBlLmFjY2Vzc1Rva2VuKSwgbmV3IFcoZS5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBCKG51bGwgPT09IHQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCksIG5ldyBEKHQpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIEoge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IEQuRklSU1RfUEFSVFksIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJYLUdvb2ctQXV0aFVzZXJcIiwgZSk7XG4gICAgICAgIGNvbnN0IHMgPSB0LmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eShbXSk7XG4gICAgICAgIHMgJiYgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgcyksIG4gJiYgdGhpcy5oZWFkZXJzLnNldChcIlgtR29vZy1JYW0tQXV0aG9yaXphdGlvbi1Ub2tlblwiLCBuKTtcbiAgICB9XG59XG5cbi8qXG4gKiBQcm92aWRlcyB1c2VyIGNyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciB0aGUgRmlyZXN0b3JlIEphdmFTY3JpcHQgU0RLXG4gKiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIsIHVzaW5nIHRlY2huaXF1ZSB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cbiAqLyBjbGFzcyBZIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaCA9IHQsIHRoaXMubCA9IGUsIHRoaXMubSA9IG47XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBKKHRoaXMuaCwgdGhpcy5sLCB0aGlzLm0pKTtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShELkZJUlNUX1BBUlRZKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbn1cblxuY2xhc3MgWCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdCwgdGhpcy50eXBlID0gXCJBcHBDaGVja1wiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0ICYmIHQubGVuZ3RoID4gMCAmJiB0aGlzLmhlYWRlcnMuc2V0KFwieC1maXJlYmFzZS1hcHBjaGVja1wiLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbmNsYXNzIFoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5nID0gdCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5vID0gbiA9PiB7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+ICh0ID0+IChudWxsICE9IHQuZXJyb3IgJiYgJChcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBFcnJvciBnZXR0aW5nIEFwcCBDaGVjayB0b2tlbjsgdXNpbmcgcGxhY2Vob2xkZXIgdG9rZW4gaW5zdGVhZC4gRXJyb3I6ICR7dC5lcnJvci5tZXNzYWdlfWApLCBcbiAgICAgICAgICAgIGUodC50b2tlbikpKShuKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBuID0gdCA9PiB7XG4gICAgICAgICAgICAkKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBkZXRlY3RlZFwiKSwgdGhpcy5hcHBDaGVjayA9IHQsIHRoaXMuYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmcub25Jbml0KCh0ID0+IG4odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBcHBDaGVjayBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmcuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IG4odCkgOiBcbiAgICAgICAgICAgICAgICAvLyBJZiBBcHBDaGVjayBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGhvdXQgaXQuXG4gICAgICAgICAgICAgICAgJChcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgbm90IHlldCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA/IHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4odCkudGhlbigodCA9PiB0ID8gKEIoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50b2tlbiksIFxuICAgICAgICBuZXcgWCh0LnRva2VuKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgJiYgdGhpcy5hcHBDaGVjay5yZW1vdmVUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIEFwcENoZWNrIHRva2VuIHByb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHR0IHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgWChcIlwiKSk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge31cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovXG5jbGFzcyBldCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSB0LCBlICYmIChlLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IHQgPT4gdGhpcy5wKHQpLCB0aGlzLlQgPSB0ID0+IGUud3JpdGVTZXF1ZW5jZU51bWJlcih0KSk7XG4gICAgfVxuICAgIHAodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlID0gTWF0aC5tYXgodCwgdGhpcy5wcmV2aW91c1ZhbHVlKSwgdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCB0ID0gKyt0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzLlQgJiYgdGhpcy5UKHQpLCB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGBuQnl0ZXNgIG9mIHJhbmRvbSBieXRlcy5cbiAqXG4gKiBJZiBgbkJ5dGVzIDwgMGAgLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZnVuY3Rpb24gbnQodCkge1xuICAgIC8vIFBvbHlmaWxscyBmb3IgSUUgYW5kIFdlYldvcmtlciBieSB1c2luZyBgc2VsZmAgYW5kIGBtc0NyeXB0b2Agd2hlbiBgY3J5cHRvYCBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGNvbnN0IGUgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNlbGYgJiYgKHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG8pLCBuID0gbmV3IFVpbnQ4QXJyYXkodCk7XG4gICAgaWYgKGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLmdldFJhbmRvbVZhbHVlcykgZS5nZXRSYW5kb21WYWx1ZXMobik7IGVsc2UgXG4gICAgLy8gRmFsbHMgYmFjayB0byBNYXRoLnJhbmRvbVxuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdDsgZSsrKSBuW2VdID0gTWF0aC5mbG9vcigyNTYgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICByZXR1cm4gbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZXQuSSA9IC0xO1xuXG5jbGFzcyBzdCB7XG4gICAgc3RhdGljIEEoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IHQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIGUgPSBNYXRoLmZsb29yKDI1NiAvIHQubGVuZ3RoKSAqIHQubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbnQoNDApO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmxlbmd0aDsgKytpKSBcbiAgICAgICAgICAgIC8vIE9ubHkgYWNjZXB0IHZhbHVlcyB0aGF0IGFyZSBbMCwgbWF4TXVsdGlwbGUpLCB0aGlzIGVuc3VyZXMgdGhleSBjYW5cbiAgICAgICAgICAgIC8vIGJlIGV2ZW5seSBtYXBwZWQgdG8gaW5kaWNlcyBvZiBgY2hhcnNgIHZpYSBhIG1vZHVsbyBvcGVyYXRpb24uXG4gICAgICAgICAgICBuLmxlbmd0aCA8IDIwICYmIHNbaV0gPCBlICYmIChuICs9IHQuY2hhckF0KHNbaV0gJSB0Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXQodCwgZSkge1xuICAgIHJldHVybiB0IDwgZSA/IC0xIDogdCA+IGUgPyAxIDogMDtcbn1cblxuLyoqIEhlbHBlciB0byBjb21wYXJlIGFycmF5cyB1c2luZyBpc0VxdWFsKCkuICovIGZ1bmN0aW9uIHJ0KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdC5sZW5ndGggPT09IGUubGVuZ3RoICYmIHQuZXZlcnkoKCh0LCBzKSA9PiBuKHQsIGVbc10pKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1tZWRpYXRlIGxleGljb2dyYXBoaWNhbGx5LWZvbGxvd2luZyBzdHJpbmcuIFRoaXMgaXMgdXNlZnVsIHRvXG4gKiBjb25zdHJ1Y3QgYW4gaW5jbHVzaXZlIHJhbmdlIGZvciBpbmRleGVkZGIgaXRlcmF0b3JzLlxuICovIGZ1bmN0aW9uIG90KHQpIHtcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxuICAgIHJldHVybiB0ICsgXCJcXDBcIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBlYXJsaWVzdCBkYXRlIHN1cHBvcnRlZCBieSBGaXJlc3RvcmUgdGltZXN0YW1wcyAoMDAwMS0wMS0wMVQwMDowMDowMFopLlxuLyoqXG4gKiBBIGBUaW1lc3RhbXBgIHJlcHJlc2VudHMgYSBwb2ludCBpbiB0aW1lIGluZGVwZW5kZW50IG9mIGFueSB0aW1lIHpvbmUgb3JcbiAqIGNhbGVuZGFyLCByZXByZXNlbnRlZCBhcyBzZWNvbmRzIGFuZCBmcmFjdGlvbnMgb2Ygc2Vjb25kcyBhdCBuYW5vc2Vjb25kXG4gKiByZXNvbHV0aW9uIGluIFVUQyBFcG9jaCB0aW1lLlxuICpcbiAqIEl0IGlzIGVuY29kZWQgdXNpbmcgdGhlIFByb2xlcHRpYyBHcmVnb3JpYW4gQ2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuIEl0IGlzIGVuY29kZWQgYXNzdW1pbmcgYWxsIG1pbnV0ZXNcbiAqIGFyZSA2MCBzZWNvbmRzIGxvbmcsIGkuZS4gbGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXAgc2Vjb25kXG4gKiB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLiBSYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gKiA5OTk5LTEyLTMxVDIzOjU5OjU5Ljk5OTk5OTk5OVouXG4gKlxuICogRm9yIGV4YW1wbGVzIGFuZCBmdXJ0aGVyIHNwZWNpZmljYXRpb25zLCByZWZlciB0byB0aGVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3Byb3RvYnVmL2Jsb2IvbWFzdGVyL3NyYy9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvIHwgVGltZXN0YW1wIGRlZmluaXRpb259LlxuICovXG5jbGFzcyBhdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vjb25kcyAtIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLiBNdXN0IGJlIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAgICAgKiAgICAgOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgICAqIEBwYXJhbSBuYW5vc2Vjb25kcyAtIFRoZSBub24tbmVnYXRpdmUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmRcbiAgICAgKiAgICAgcmVzb2x1dGlvbi4gTmVnYXRpdmUgc2Vjb25kIHZhbHVlcyB3aXRoIGZyYWN0aW9ucyBtdXN0IHN0aWxsIGhhdmVcbiAgICAgKiAgICAgbm9uLW5lZ2F0aXZlIG5hbm9zZWNvbmRzIHZhbHVlcyB0aGF0IGNvdW50IGZvcndhcmQgaW4gdGltZS4gTXVzdCBiZVxuICAgICAqICAgICBmcm9tIDAgdG8gOTk5LDk5OSw5OTkgaW5jbHVzaXZlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZCByZXNvbHV0aW9uLipcbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZSwgZSA8IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAoZSA+PSAxZTkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAodCA8IC02MjEzNTU5NjgwMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJyZWFrIGluIHRoZSB5ZWFyIDEwLDAwMC5cbiAgICAgICAgICAgICAgICBpZiAodCA+PSAyNTM0MDIzMDA4MDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIHdpdGggdGhlIGN1cnJlbnQgZGF0ZSwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIG5ldyB0aW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBhdC5mcm9tTWlsbGlzKERhdGUubm93KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSB0byBpbml0aWFsaXplIHRoZSBgVGltZXN0YW1wYCBmcm9tLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbURhdGUodCkge1xuICAgICAgICByZXR1cm4gYXQuZnJvbU1pbGxpcyh0LmdldFRpbWUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWlsbGlzZWNvbmRzIC0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbU1pbGxpcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHQgLyAxZTMpLCBuID0gTWF0aC5mbG9vcigxZTYgKiAodCAtIDFlMyAqIGUpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdC4gVGhpcyBjb252ZXJzaW9uXG4gICAgICogY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24gc2luY2UgYERhdGVgIG9iamVjdHMgb25seSBzdXBwb3J0IG1pbGxpc2Vjb25kXG4gICAgICogcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzXG4gICAgICogICAgIHRoaXMgYFRpbWVzdGFtcGAsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqLyAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgbnVtZXJpYyB0aW1lc3RhbXAgKGluIG1pbGxpc2Vjb25kcyBzaW5jZVxuICAgICAqIGVwb2NoKS4gVGhpcyBvcGVyYXRpb24gY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcG9pbnQgaW4gdGltZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgdGltZXN0YW1wLCByZXByZXNlbnRlZCBhc1xuICAgICAqICAgICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqLyAgICB0b01pbGxpcygpIHtcbiAgICAgICAgcmV0dXJuIDFlMyAqIHRoaXMuc2Vjb25kcyArIHRoaXMubmFub3NlY29uZHMgLyAxZTY7XG4gICAgfVxuICAgIF9jb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzID09PSB0LnNlY29uZHMgPyBpdCh0aGlzLm5hbm9zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKSA6IGl0KHRoaXMuc2Vjb25kcywgdC5zZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgVGltZXN0YW1wYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgdC5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJUaW1lc3RhbXAoc2Vjb25kcz1cIiArIHRoaXMuc2Vjb25kcyArIFwiLCBuYW5vc2Vjb25kcz1cIiArIHRoaXMubmFub3NlY29uZHMgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnNlY29uZHMsXG4gICAgICAgICAgICBuYW5vc2Vjb25kczogdGhpcy5uYW5vc2Vjb25kc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIHByaW1pdGl2ZSBzdHJpbmcsIHdoaWNoIGFsbG93cyBgVGltZXN0YW1wYCBvYmplY3RzXG4gICAgICogdG8gYmUgY29tcGFyZWQgdXNpbmcgdGhlIGA+YCwgYDw9YCwgYD49YCBhbmQgYD5gIG9wZXJhdG9ycy5cbiAgICAgKi8gICAgdmFsdWVPZigpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHN0cmluZyBvZiB0aGUgZm9ybSA8c2Vjb25kcz4uPG5hbm9zZWNvbmRzPiB3aGVyZVxuICAgICAgICAvLyA8c2Vjb25kcz4gaXMgdHJhbnNsYXRlZCB0byBoYXZlIGEgbm9uLW5lZ2F0aXZlIHZhbHVlIGFuZCBib3RoIDxzZWNvbmRzPlxuICAgICAgICAvLyBhbmQgPG5hbm9zZWNvbmRzPiBhcmUgbGVmdC1wYWRkZWQgd2l0aCB6ZXJvZXMgdG8gYmUgYSBjb25zaXN0ZW50IGxlbmd0aC5cbiAgICAgICAgLy8gU3RyaW5ncyB3aXRoIHRoaXMgZm9ybWF0IHRoZW4gaGF2ZSBhIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nIHRoYXQgbWF0Y2hlc1xuICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZCBoYXZpbmdcbiAgICAgICAgLy8gYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmdcbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlY29uZHMgLSAtNjIxMzU1OTY4MDA7XG4gICAgICAgIC8vIE5vdGU6IFVwIHRvIDEyIGRlY2ltYWwgZGlnaXRzIGFyZSByZXF1aXJlZCB0byByZXByZXNlbnQgYWxsIHZhbGlkXG4gICAgICAgIC8vICdzZWNvbmRzJyB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh0KS5wYWRTdGFydCgxMiwgXCIwXCIpICsgXCIuXCIgKyBTdHJpbmcodGhpcy5uYW5vc2Vjb25kcykucGFkU3RhcnQoOSwgXCIwXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSB2ZXJzaW9uXG4gKiB0aW1lc3RhbXAsIHN1Y2ggYXMgdXBkYXRlX3RpbWUgb3IgcmVhZF90aW1lLlxuICovIGNsYXNzIGN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UaW1lc3RhbXAodCkge1xuICAgICAgICByZXR1cm4gbmV3IGN0KHQpO1xuICAgIH1cbiAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IGN0KG5ldyBhdCgwLCAwKSk7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqLyAgICB0b01pY3Jvc2Vjb25kcygpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXG4gICAgICAgIHJldHVybiAxZTYgKiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxZTM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJTbmFwc2hvdFZlcnNpb24oXCIgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIHRvVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiB1dCh0KSB7XG4gICAgbGV0IGUgPSAwO1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZSsrO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBodCh0LCBlKSB7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKG4sIHRbbl0pO1xufVxuXG5mdW5jdGlvbiBsdCh0KSB7XG4gICAgZm9yIChjb25zdCBlIGluIHQpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgZSkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqL1xuY2xhc3MgZnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdm9pZCAwID09PSBlID8gZSA9IDAgOiBlID4gdC5sZW5ndGggJiYgTCgpLCB2b2lkIDAgPT09IG4gPyBuID0gdC5sZW5ndGggLSBlIDogbiA+IHQubGVuZ3RoIC0gZSAmJiBMKCksIFxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gdCwgdGhpcy5vZmZzZXQgPSBlLCB0aGlzLmxlbiA9IG47XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbjtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiAwID09PSBmdC5jb21wYXJhdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBjaGlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGZ0ID8gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0KTtcbiAgICAgICAgfSkpIDogZS5wdXNoKHQpLCB0aGlzLmNvbnN0cnVjdChlKTtcbiAgICB9XG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqLyAgICBsaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIHBvcEZpcnN0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB2b2lkIDAgPT09IHQgPyAxIDogdCwgdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyB0LCB0aGlzLmxlbmd0aCAtIHQpO1xuICAgIH1cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGZpcnN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xuICAgIH1cbiAgICBsYXN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgdF07XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgaXNQcmVmaXhPZih0KSB7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA8IHRoaXMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlzSW1tZWRpYXRlUGFyZW50T2YodCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IHRoaXMub2Zmc2V0LCBuID0gdGhpcy5saW1pdCgpOyBlIDwgbjsgZSsrKSB0KHRoaXMuc2VnbWVudHNbZV0pO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4odC5sZW5ndGgsIGUubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuOyBzKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChzKSwgaSA9IGUuZ2V0KHMpO1xuICAgICAgICAgICAgaWYgKG4gPCBpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAobiA+IGkpIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCA8IGUubGVuZ3RoID8gLTEgOiB0Lmxlbmd0aCA+IGUubGVuZ3RoID8gMSA6IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxuICogd2l0aGluIEZpcmVzdG9yZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBkdCBleHRlbmRzIGZ0IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IGR0KHQsIGUsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLiBJZiBtdWx0aXBsZVxuICAgICAqIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQsIGFsbCBjb21wb25lbnRzIGFyZSBjb21iaW5lZC4gTGVhZGluZyBhbmQgdHJhaWxpbmdcbiAgICAgKiBzbGFzaGVzIGZyb20gYWxsIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU3RyaW5nKC4uLnQpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkge1xuICAgICAgICAgICAgaWYgKG4uaW5kZXhPZihcIi8vXCIpID49IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgc2VnbWVudCAoJHtufSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5gKTtcbiAgICAgICAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKHQgPT4gdC5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgZHQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgZHQoW10pO1xuICAgIH1cbn1cblxuY29uc3Qgd3QgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcblxuLyoqXG4gKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIF90IGV4dGVuZHMgZnQge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgX3QodCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXG4gICAgICovICAgIHN0YXRpYyBpc1ZhbGlkSWRlbnRpZmllcih0KSB7XG4gICAgICAgIHJldHVybiB3dC50ZXN0KHQpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKHQgPT4gKHQgPSB0LnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBfdC5pc1ZhbGlkSWRlbnRpZmllcih0KSB8fCAodCA9IFwiYFwiICsgdCArIFwiYFwiKSwgdCkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIFwiX19uYW1lX19cIiA9PT0gdGhpcy5nZXQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIHN0YXRpYyBrZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfdChbIFwiX19uYW1lX19cIiBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlcnZlckZvcm1hdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBcIlwiLCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2ApO1xuICAgICAgICAgICAgZS5wdXNoKG4pLCBuID0gXCJcIjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgZm9yICg7cyA8IHQubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0W3NdO1xuICAgICAgICAgICAgaWYgKFwiXFxcXFwiID09PSBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMgKyAxID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRbcyArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gZSAmJiBcIi5cIiAhPT0gZSAmJiBcImBcIiAhPT0gZSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIGludmFsaWQgZXNjYXBlIHNlcXVlbmNlOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIG4gKz0gZSwgcyArPSAyO1xuICAgICAgICAgICAgfSBlbHNlIFwiYFwiID09PSBlID8gKHIgPSAhciwgcysrKSA6IFwiLlwiICE9PSBlIHx8IHIgPyAobiArPSBlLCBzKyspIDogKGkoKSwgcysrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSgpLCByKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogXCIgKyB0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBfdChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfdChbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdXNlZCB0byBwYXJ0aWFsbHkgcGF0Y2ggYSBkb2N1bWVudC5cbiAqIEZpZWxkTWFzayBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggT2JqZWN0VmFsdWUuXG4gKiBFeGFtcGxlczpcbiAqICAgZm9vIC0gT3ZlcndyaXRlcyBmb28gZW50aXJlbHkgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuIElmIGZvbyBpcyBub3RcbiAqICAgICAgICAgcHJlc2VudCBpbiB0aGUgY29tcGFuaW9uIE9iamVjdFZhbHVlLCB0aGUgZmllbGQgaXMgZGVsZXRlZC5cbiAqICAgZm9vLmJhciAtIE92ZXJ3cml0ZXMgb25seSB0aGUgZmllbGQgYmFyIG9mIHRoZSBvYmplY3QgZm9vLlxuICogICAgICAgICAgICAgSWYgZm9vIGlzIG5vdCBhbiBvYmplY3QsIGZvbyBpcyByZXBsYWNlZCB3aXRoIGFuIG9iamVjdFxuICogICAgICAgICAgICAgY29udGFpbmluZyBmb29cbiAqLyBjbGFzcyBtdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IHQsIFxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpZWxkIG1hc2sgdG8gc3VwcG9ydCBgRmllbGRNYXNrLmlzRXF1YWwoKWAgYW5kIGFzc2VydCBiZWxvdy5cbiAgICAgICAgdC5zb3J0KF90LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXG4gICAgICogbWFzay5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cbiAgICAgKi8gICAgY292ZXJzKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZmllbGRzKSBpZiAoZS5pc1ByZWZpeE9mKHQpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBydCh0aGlzLmZpZWxkcywgdC5maWVsZHMsICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIENvbnZlcnRzIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIGEgYmluYXJ5IHN0cmluZy4gKi9cbi8qKiBUcnVlIGlmIGFuZCBvbmx5IGlmIHRoZSBCYXNlNjQgY29udmVyc2lvbiBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIGd0KCkge1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBhdG9iO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbW11dGFibGUgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgXCJwcm90b1wiIGJ5dGUgc3RyaW5nLlxuICpcbiAqIFByb3RvIGJ5dGUgc3RyaW5ncyBjYW4gZWl0aGVyIGJlIEJhc2U2NC1lbmNvZGVkIHN0cmluZ3Mgb3IgVWludDhBcnJheXMgd2hlblxuICogc2VudCBvbiB0aGUgd2lyZS4gVGhpcyBjbGFzcyBhYnN0cmFjdHMgYXdheSB0aGlzIGRpZmZlcmVudGlhdGlvbiBieSBob2xkaW5nXG4gKiB0aGUgcHJvdG8gYnl0ZSBzdHJpbmcgaW4gYSBjb21tb24gY2xhc3MgdGhhdCBtdXN0IGJlIGNvbnZlcnRlZCBpbnRvIGEgc3RyaW5nXG4gKiBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIHByb3RvLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgeXQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5iaW5hcnlTdHJpbmcgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBhdG9iKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHl0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkodCkge1xuICAgICAgICBjb25zdCBlID0gXG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYW4gVWludDhhcnJheSB0byBhIGJpbmFyeSBzdHJpbmcuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgbGV0IGUgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSBlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodFtuXSk7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGEgYmluYXJ5IHN0cmluZyB0byBhbiBVaW50OEFycmF5LlxuICovICh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyB5dChlKTtcbiAgICB9XG4gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0ID0gdGhpcy5iaW5hcnlTdHJpbmcsIGJ0b2EodCk7XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovXG4gICAgICAgIHZhciB0O1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlW25dID0gdC5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLy8gQSBSZWdFeHAgbWF0Y2hpbmcgSVNPIDg2MDEgVVRDIHRpbWVzdGFtcHMgd2l0aCBvcHRpb25hbCBmcmFjdGlvbi5cbiAgICAgICAgKHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgYXBwcm94aW1hdGVCeXRlU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBpdCh0aGlzLmJpbmFyeVN0cmluZywgdC5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5U3RyaW5nID09PSB0LmJpbmFyeVN0cmluZztcbiAgICB9XG59XG5cbnl0LkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IHl0KFwiXCIpO1xuXG5jb25zdCBwdCA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdmFsdWVzIGZvciBhIHRpbWVzdGFtcCB2YWx1ZSBpbnRvIGEgXCJzZWNvbmRzIGFuZFxuICogbmFub3NcIiByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBUdCh0KSB7XG4gICAgLy8gVGhlIGpzb24gaW50ZXJmYWNlIChmb3IgdGhlIGJyb3dzZXIpIHdpbGwgcmV0dXJuIGFuIGlzbyB0aW1lc3RhbXAgc3RyaW5nLFxuICAgIC8vIHdoaWxlIHRoZSBwcm90byBqcyBsaWJyYXJ5IChmb3Igbm9kZSkgd2lsbCByZXR1cm4gYVxuICAgIC8vIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgaW5zdGFuY2UuXG4gICAgaWYgKEIoISF0KSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBwdC5leGVjKHQpO1xuICAgICAgICBpZiAoQighIW4pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IHQgPSBuWzFdO1xuICAgICAgICAgICAgdCA9ICh0ICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCBlID0gTnVtYmVyKHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IERhdGUodCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHMuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IEV0KHQuc2Vjb25kcyksXG4gICAgICAgIG5hbm9zOiBFdCh0Lm5hbm9zKVxuICAgIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBudW1iZXJzIGludG8gYSBKYXZhU2NyaXB0IG51bWJlci5cbiAqIFJldHVybnMgMCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bWVyaWMuXG4gKi8gZnVuY3Rpb24gRXQodCkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgPyB0IDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IE51bWJlcih0KSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiBJdCh0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyB5dC5mcm9tQmFzZTY0U3RyaW5nKHQpIDogeXQuZnJvbVVpbnQ4QXJyYXkodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxuICpcbiAqIFNlcnZlciBUaW1lc3RhbXBzIGFyZSBiYWNrZWQgYnkgTWFwVmFsdWVzIHRoYXQgY29udGFpbiBhbiBpbnRlcm5hbCBmaWVsZFxuICogYF9fdHlwZV9fYCB3aXRoIGEgdmFsdWUgb2YgYHNlcnZlcl90aW1lc3RhbXBgLiBUaGUgcHJldmlvdXMgdmFsdWUgYW5kIGxvY2FsXG4gKiB3cml0ZSB0aW1lIGFyZSBzdG9yZWQgaW4gaXRzIGBfX3ByZXZpb3VzX3ZhbHVlX19gIGFuZCBgX19sb2NhbF93cml0ZV90aW1lX19gXG4gKiBmaWVsZHMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIE5vdGVzOlxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXG4gKiAgIHRyYW5zZm9ybS4gVGhleSBjYW4gb25seSBleGlzdCBpbiB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBUaGVyZWZvcmVcbiAqICAgdGhleSBkbyBub3QgbmVlZCB0byBiZSBwYXJzZWQgb3Igc2VyaWFsaXplZC5cbiAqIC0gV2hlbiBldmFsdWF0ZWQgbG9jYWxseSAoZS5nLiBmb3Igc25hcHNob3QuZGF0YSgpKSwgdGhleSBieSBkZWZhdWx0XG4gKiAgIGV2YWx1YXRlIHRvIGBudWxsYC4gVGhpcyBiZWhhdmlvciBjYW4gYmUgY29uZmlndXJlZCBieSBwYXNzaW5nIGN1c3RvbVxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxuICogLSBXaXRoIHJlc3BlY3QgdG8gb3RoZXIgU2VydmVyVGltZXN0YW1wVmFsdWVzLCB0aGV5IHNvcnQgYnkgdGhlaXJcbiAqICAgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gQXQodCkge1xuICAgIHZhciBlLCBuO1xuICAgIHJldHVybiBcInNlcnZlcl90aW1lc3RhbXBcIiA9PT0gKG51bGwgPT09IChuID0gKChudWxsID09PSAoZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQubWFwVmFsdWUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZmllbGRzKSB8fCB7fSkuX190eXBlX18pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uc3RyaW5nVmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU2VydmVyVGltZXN0YW1wIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYmVmb3JlIHRoaXMgU2VydmVyVGltZXN0YW1wIHdhcyBzZXQuXG4gKlxuICogUHJlc2VydmluZyB0aGUgcHJldmlvdXMgdmFsdWVzIGFsbG93cyB0aGUgdXNlciB0byBkaXNwbGF5IHRoZSBsYXN0IHJlc29sZWRcbiAqIHZhbHVlIHVudGlsIHRoZSBiYWNrZW5kIHJlc3BvbmRzIHdpdGggdGhlIHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24gUnQodCkge1xuICAgIGNvbnN0IGUgPSB0Lm1hcFZhbHVlLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX187XG4gICAgcmV0dXJuIEF0KGUpID8gUnQoZSkgOiBlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBQdCh0KSB7XG4gICAgY29uc3QgZSA9IFR0KHQubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtcbiAgICByZXR1cm4gbmV3IGF0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VudGluZWwgdmFsdWUgdGhhdCBzb3J0cyBiZWZvcmUgYW55IE11dGF0aW9uIEJhdGNoIElELiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YXJpYWJsZSBpcyBlaXRoZXIgdW5kZWZpbmVkIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIGJ0KHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0O1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIC0wLiAqLyBmdW5jdGlvbiB2dCh0KSB7XG4gICAgLy8gRGV0ZWN0IGlmIHRoZSB2YWx1ZSBpcyAtMC4wLiBCYXNlZCBvbiBwb2x5ZmlsbCBmcm9tXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gICAgcmV0dXJuIDAgPT09IHQgJiYgMSAvIHQgPT0gLTEgLyAwO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhbHVlIGlzIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2VcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byB0ZXN0IGZvciBiZWluZyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSByYW5nZVxuICovIGZ1bmN0aW9uIFZ0KHQpIHtcbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCAmJiBOdW1iZXIuaXNJbnRlZ2VyKHQpICYmICF2dCh0KSAmJiB0IDw9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSICYmIHQgPj0gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIFN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUGF0aCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU3QoZHQuZnJvbVN0cmluZyh0KSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTmFtZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU3QoZHQuZnJvbVN0cmluZyh0KS5wb3BGaXJzdCg1KSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqLyAgICBoYXNDb2xsZWN0aW9uSWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmxlbmd0aCA+PSAyICYmIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpID09PSB0O1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgMCA9PT0gZHQuY29tcGFyYXRvcih0aGlzLnBhdGgsIHQucGF0aCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGR0LmNvbXBhcmF0b3IodC5wYXRoLCBlLnBhdGgpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEb2N1bWVudEtleSh0KSB7XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCAlIDIgPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgLSBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcbiAgICAgKi8gICAgc3RhdGljIGZyb21TZWdtZW50cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU3QobmV3IGR0KHQuc2xpY2UoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBFeHRyYWN0cyB0aGUgYmFja2VuZCdzIHR5cGUgb3JkZXIgZm9yIHRoZSBwcm92aWRlZCB2YWx1ZS4gKi8gZnVuY3Rpb24gRHQodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyAwIC8qIE51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IDEgLyogQm9vbGVhblZhbHVlICovIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0IHx8IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gMiAvKiBOdW1iZXJWYWx1ZSAqLyA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gNSAvKiBTdHJpbmdWYWx1ZSAqLyA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyA2IC8qIEJsb2JWYWx1ZSAqLyA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gNyAvKiBSZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gOSAvKiBBcnJheVZhbHVlICovIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBBdCh0KSA/IDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOiAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6IEwoKTtcbn1cblxuLyoqIFRlc3RzIGBsZWZ0YCBhbmQgYHJpZ2h0YCBmb3IgZXF1YWxpdHkgYmFzZWQgb24gdGhlIGJhY2tlbmQgc2VtYW50aWNzLiAqLyBmdW5jdGlvbiBDdCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IER0KHQpO1xuICAgIGlmIChuICE9PSBEdChlKSkgcmV0dXJuICExO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZSA9PT0gZS5ib29sZWFuVmFsdWU7XG5cbiAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBQdCh0KS5pc0VxdWFsKFB0KGUpKTtcblxuICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUudGltZXN0YW1wVmFsdWUgJiYgdC50aW1lc3RhbXBWYWx1ZS5sZW5ndGggPT09IGUudGltZXN0YW1wVmFsdWUubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFVzZSBzdHJpbmcgZXF1YWxpdHkgZm9yIElTTyA4NjAxIHRpbWVzdGFtcHNcbiAgICAgICAgICAgIHJldHVybiB0LnRpbWVzdGFtcFZhbHVlID09PSBlLnRpbWVzdGFtcFZhbHVlO1xuICAgICAgICAgICAgY29uc3QgbiA9IFR0KHQudGltZXN0YW1wVmFsdWUpLCBzID0gVHQoZS50aW1lc3RhbXBWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5zZWNvbmRzID09PSBzLnNlY29uZHMgJiYgbi5uYW5vcyA9PT0gcy5uYW5vcztcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWUgPT09IGUuc3RyaW5nVmFsdWU7XG5cbiAgICAgIGNhc2UgNiAvKiBCbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIEl0KHQuYnl0ZXNWYWx1ZSkuaXNFcXVhbChJdChlLmJ5dGVzVmFsdWUpKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQucmVmZXJlbmNlVmFsdWUgPT09IGUucmVmZXJlbmNlVmFsdWU7XG5cbiAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBFdCh0Lmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpID09PSBFdChlLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpICYmIEV0KHQuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpID09PSBFdChlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmIChcImludGVnZXJWYWx1ZVwiIGluIHQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiBlKSByZXR1cm4gRXQodC5pbnRlZ2VyVmFsdWUpID09PSBFdChlLmludGVnZXJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gRXQodC5kb3VibGVWYWx1ZSksIHMgPSBFdChlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gcyA/IHZ0KG4pID09PSB2dChzKSA6IGlzTmFOKG4pICYmIGlzTmFOKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBydCh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCBlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCBDdCk7XG5cbiAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubWFwVmFsdWUuZmllbGRzIHx8IHt9LCBzID0gZS5tYXBWYWx1ZS5maWVsZHMgfHwge307XG4gICAgICAgICAgICBpZiAodXQobikgIT09IHV0KHMpKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgaW4gbikgaWYgKG4uaGFzT3duUHJvcGVydHkodCkgJiYgKHZvaWQgMCA9PT0gc1t0XSB8fCAhQ3Qoblt0XSwgc1t0XSkpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgQXJyYXlWYWx1ZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuICovICh0LCBlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE50KHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSAodC52YWx1ZXMgfHwgW10pLmZpbmQoKHQgPT4gQ3QodCwgZSkpKTtcbn1cblxuZnVuY3Rpb24ga3QodCwgZSkge1xuICAgIGNvbnN0IG4gPSBEdCh0KSwgcyA9IER0KGUpO1xuICAgIGlmIChuICE9PSBzKSByZXR1cm4gaXQobiwgcyk7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gaXQodC5ib29sZWFuVmFsdWUsIGUuYm9vbGVhblZhbHVlKTtcblxuICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBFdCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKSwgcyA9IEV0KGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPCBzID8gLTEgOiBuID4gcyA/IDEgOiBuID09PSBzID8gMCA6IFxuICAgICAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cbiAgICAgICAgICAgIGlzTmFOKG4pID8gaXNOYU4ocykgPyAwIDogLTEgOiAxO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4geHQodC50aW1lc3RhbXBWYWx1ZSwgZS50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB4dChQdCh0KSwgUHQoZSkpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gaXQodC5zdHJpbmdWYWx1ZSwgZS5zdHJpbmdWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNiAvKiBCbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEl0KHQpLCBzID0gSXQoZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5jb21wYXJlVG8ocyk7XG4gICAgICAgIH0odC5ieXRlc1ZhbHVlLCBlLmJ5dGVzVmFsdWUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuc3BsaXQoXCIvXCIpLCBzID0gZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGl0KG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQucmVmZXJlbmNlVmFsdWUsIGUucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gaXQoRXQodC5sYXRpdHVkZSksIEV0KGUubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBpdChFdCh0LmxvbmdpdHVkZSksIEV0KGUubG9uZ2l0dWRlKSk7XG4gICAgICAgIH0odC5nZW9Qb2ludFZhbHVlLCBlLmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC52YWx1ZXMgfHwgW10sIHMgPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0ga3Qoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpZWxkcyB8fCB7fSwgcyA9IE9iamVjdC5rZXlzKG4pLCBpID0gZS5maWVsZHMgfHwge30sIHIgPSBPYmplY3Qua2V5cyhpKTtcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIE1hcFZhbHVlcyBhcmUgbGlrZWx5IHNvcnRlZCBjb3JyZWN0bHkgYmFzZWQgb24gdGhlaXIgaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBvcmRlciAoZS5nLiB3aGVuIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQpLCBsb2NhbCBtb2RpZmljYXRpb25zIGNhbiBicmluZ1xuICAgICAgICAgICAgLy8gZWxlbWVudHMgb3V0IG9mIG9yZGVyLiBXZSBuZWVkIHRvIHJlLXNvcnQgdGhlIGVsZW1lbnRzIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgICAgICAvLyBjYW5vbmljYWwgSURzIGFyZSBpbmRlcGVuZGVudCBvZiBpbnNlcnRpb24gb3JkZXIuXG4gICAgICAgICAgICBzLnNvcnQoKSwgci5zb3J0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoICYmIHQgPCByLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGl0KHNbdF0sIHJbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0ga3QobltzW3RdXSwgaVtyW3RdXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0KHMubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlIHByb3ZpZGVkIGZpZWxkIHZhbHVlIChhcyB1c2VkIGluIFRhcmdldFxuICogc2VyaWFsaXphdGlvbikuXG4gKi8gKHQubWFwVmFsdWUsIGUubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB4dCh0LCBlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGgpIHJldHVybiBpdCh0LCBlKTtcbiAgICBjb25zdCBuID0gVHQodCksIHMgPSBUdChlKSwgaSA9IGl0KG4uc2Vjb25kcywgcy5zZWNvbmRzKTtcbiAgICByZXR1cm4gMCAhPT0gaSA/IGkgOiBpdChuLm5hbm9zLCBzLm5hbm9zKTtcbn1cblxuZnVuY3Rpb24gJHQodCkge1xuICAgIHJldHVybiBGdCh0KTtcbn1cblxuZnVuY3Rpb24gRnQodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFR0KHQpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHtlLnNlY29uZHN9LCR7ZS5uYW5vc30pYDtcbiAgICB9KHQudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB0LnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IEl0KHQuYnl0ZXNWYWx1ZSkudG9CYXNlNjQoKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gKG4gPSB0LnJlZmVyZW5jZVZhbHVlLCBcbiAgICBTdC5mcm9tTmFtZShuKS50b1N0cmluZygpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyBgZ2VvKCR7KGUgPSB0Lmdlb1BvaW50VmFsdWUpLmxhdGl0dWRlfSwke2UubG9uZ2l0dWRlfSlgIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdC52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiBlICs9IFwiLFwiLCBlICs9IEZ0KHMpO1xuICAgICAgICByZXR1cm4gZSArIFwiXVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHJlZmVyZW5jZSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIGRhdGFiYXNlIGFuZCBrZXkuICovICh0LmFycmF5VmFsdWUpIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0ZXJhdGlvbiBvcmRlciBpbiBKYXZhU2NyaXB0IGlzIG5vdCBndWFyYW50ZWVkLiBUbyBlbnN1cmUgdGhhdCB3ZSBnZW5lcmF0ZVxuICAgICAgICAvLyBtYXRjaGluZyBjYW5vbmljYWwgSURzIGZvciBpZGVudGljYWwgbWFwcywgd2UgbmVlZCB0byBzb3J0IHRoZSBrZXlzLlxuICAgICAgICBjb25zdCBlID0gT2JqZWN0LmtleXModC5maWVsZHMgfHwge30pLnNvcnQoKTtcbiAgICAgICAgbGV0IG4gPSBcIntcIiwgcyA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkgcyA/IHMgPSAhMSA6IG4gKz0gXCIsXCIsIG4gKz0gYCR7aX06JHtGdCh0LmZpZWxkc1tpXSl9YDtcbiAgICAgICAgcmV0dXJuIG4gKyBcIn1cIjtcbiAgICB9KHQubWFwVmFsdWUpIDogTCgpO1xuICAgIHZhciBlLCBuO1xufVxuXG5mdW5jdGlvbiBPdCh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGBwcm9qZWN0cy8ke3QucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0LmRhdGFiYXNlfS9kb2N1bWVudHMvJHtlLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YFxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBJbnRlZ2VyVmFsdWUgLiAqLyBmdW5jdGlvbiBNdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBMdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImFycmF5VmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBOdWxsVmFsdWUuICovIGZ1bmN0aW9uIEJ0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibnVsbFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24gVXQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgaXNOYU4oTnVtYmVyKHQuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIHF0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibWFwVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYC4gKi8gZnVuY3Rpb24gS3QodCkge1xuICAgIGlmICh0Lmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQuZ2VvUG9pbnRWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0LnRpbWVzdGFtcFZhbHVlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUpIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0LnRpbWVzdGFtcFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQubWFwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaHQodC5tYXBWYWx1ZS5maWVsZHMsICgodCwgbikgPT4gZS5tYXBWYWx1ZS5maWVsZHNbdF0gPSBLdChuKSkpLCBlO1xuICAgIH1cbiAgICBpZiAodC5hcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8ICh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5sZW5ndGg7ICsrbikgZS5hcnJheVZhbHVlLnZhbHVlc1tuXSA9IEt0KHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBPYmplY3RWYWx1ZSByZXByZXNlbnRzIGEgTWFwVmFsdWUgaW4gdGhlIEZpcmVzdG9yZSBQcm90byBhbmQgb2ZmZXJzIHRoZVxuICogYWJpbGl0eSB0byBhZGQgYW5kIHJlbW92ZSBmaWVsZHMgKHZpYSB0aGUgT2JqZWN0VmFsdWVCdWlsZGVyKS5cbiAqLyBjbGFzcyBqdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IGp0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIHBhdGggb3IgbnVsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gdGhlIHBhdGggdG8gc2VhcmNoXG4gICAgICogQHJldHVybnMgVGhlIHZhbHVlIGF0IHRoZSBwYXRoIG9yIG51bGwgaWYgdGhlIHBhdGggaXMgbm90IHNldC5cbiAgICAgKi8gICAgZmllbGQodCkge1xuICAgICAgICBpZiAodC5pc0VtcHR5KCkpIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoIC0gMTsgKytuKSBpZiAoZSA9IChlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbdC5nZXQobildLCBcbiAgICAgICAgICAgICFxdChlKSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gZSA9IChlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbdC5sYXN0U2VnbWVudCgpXSwgZSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGZpZWxkIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gc2V0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2V0RmllbGRzTWFwKHQucG9wTGFzdCgpKVt0Lmxhc3RTZWdtZW50KCldID0gS3QoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHByb3ZpZGVkIGZpZWxkcyB0byB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGEgLSBBIG1hcCBvZiBmaWVsZHMgdG8gdmFsdWVzIChvciBudWxsIGZvciBkZWxldGVzKS5cbiAgICAgKi8gICAgc2V0QWxsKHQpIHtcbiAgICAgICAgbGV0IGUgPSBfdC5lbXB0eVBhdGgoKSwgbiA9IHt9LCBzID0gW107XG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGkpID0+IHtcbiAgICAgICAgICAgIGlmICghZS5pc0ltbWVkaWF0ZVBhcmVudE9mKGkpKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGF0IHRoaXMgcGFyZW50IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0RmllbGRzTWFwKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKHQsIG4sIHMpLCBuID0ge30sIHMgPSBbXSwgZSA9IGkucG9wTGFzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCA/IG5baS5sYXN0U2VnbWVudCgpXSA9IEt0KHQpIDogcy5wdXNoKGkubGFzdFNlZ21lbnQoKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZ2V0RmllbGRzTWFwKGUpO1xuICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhpLCBuLCBzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZmllbGQgYXQgdGhlIHNwZWNpZmllZCBwYXRoLiBJZiB0aGVyZSBpcyBubyBmaWVsZCBhdCB0aGVcbiAgICAgKiBzcGVjaWZpZWQgcGF0aCwgbm90aGluZyBpcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byByZW1vdmUuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmZpZWxkKHQucG9wTGFzdCgpKTtcbiAgICAgICAgcXQoZSkgJiYgZS5tYXBWYWx1ZS5maWVsZHMgJiYgZGVsZXRlIGUubWFwVmFsdWUuZmllbGRzW3QubGFzdFNlZ21lbnQoKV07XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gQ3QodGhpcy52YWx1ZSwgdC52YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hcCB0aGF0IGNvbnRhaW5zIHRoZSBsZWFmIGVsZW1lbnQgb2YgYHBhdGhgLiBJZiB0aGUgcGFyZW50XG4gICAgICogZW50cnkgZG9lcyBub3QgeWV0IGV4aXN0LCBvciBpZiBpdCBpcyBub3QgYSBtYXAsIGEgbmV3IG1hcCB3aWxsIGJlIGNyZWF0ZWQuXG4gICAgICovICAgIGdldEZpZWxkc01hcCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgZS5tYXBWYWx1ZS5maWVsZHMgfHwgKGUubWFwVmFsdWUgPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgIGxldCBzID0gZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildO1xuICAgICAgICAgICAgcXQocykgJiYgcy5tYXBWYWx1ZS5maWVsZHMgfHwgKHMgPSB7XG4gICAgICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXSA9IHMpLCBlID0gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZS5tYXBWYWx1ZS5maWVsZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIGBmaWVsZHNNYXBgIGJ5IGFkZGluZywgcmVwbGFjaW5nIG9yIGRlbGV0aW5nIHRoZSBzcGVjaWZpZWRcbiAgICAgKiBlbnRyaWVzLlxuICAgICAqLyAgICBhcHBseUNoYW5nZXModCwgZSwgbikge1xuICAgICAgICBodChlLCAoKGUsIG4pID0+IHRbZV0gPSBuKSk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBkZWxldGUgdFtlXTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcganQoS3QodGhpcy52YWx1ZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRNYXNrIGJ1aWx0IGZyb20gYWxsIGZpZWxkcyBpbiBhIE1hcFZhbHVlLlxuICovIGZ1bmN0aW9uIFF0KHQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgcmV0dXJuIGh0KHQuZmllbGRzLCAoKHQsIG4pID0+IHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBfdChbIHQgXSk7XG4gICAgICAgIGlmIChxdChuKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IFF0KG4ubWFwVmFsdWUpLmZpZWxkcztcbiAgICAgICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgZW1wdHkgbWFwIGJ5IGFkZGluZyBpdCB0byB0aGUgRmllbGRNYXNrLlxuICAgICAgICAgICAgZS5wdXNoKHMpOyBlbHNlIFxuICAgICAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlXG4gICAgICAgICAgICAvLyBsZWFmIG5vZGVzLlxuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGUucHVzaChzLmNoaWxkKG4pKTtcbiAgICAgICAgfSBlbHNlIFxuICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGUgbGVhZlxuICAgICAgICAvLyBub2Rlcy5cbiAgICAgICAgZS5wdXNoKHMpO1xuICAgIH0pKSwgbmV3IG10KGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlIHdpdGggYSBrZXksIHZlcnNpb24sIGRhdGEgYW5kIHdoZXRoZXIgaXRcbiAqIGhhcyBsb2NhbCBtdXRhdGlvbnMgYXBwbGllZCB0byBpdC5cbiAqXG4gKiBEb2N1bWVudHMgY2FuIHRyYW5zaXRpb24gYmV0d2VlbiBzdGF0ZXMgdmlhIGBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KClgLFxuICogYGNvbnZlcnRUb05vRG9jdW1lbnQoKWAgYW5kIGBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQoKWAuIElmIGEgZG9jdW1lbnQgZG9lc1xuICogbm90IHRyYW5zaXRpb24gdG8gb25lIG9mIHRoZXNlIHN0YXRlcyBldmVuIGFmdGVyIGFsbCBtdXRhdGlvbnMgaGF2ZSBiZWVuXG4gKiBhcHBsaWVkLCBgaXNWYWxpZERvY3VtZW50KClgIHJldHVybnMgZmFsc2UgYW5kIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgcmVtb3ZlZFxuICogZnJvbSBhbGwgdmlld3MuXG4gKi8gY2xhc3MgV3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IGUsIHRoaXMudmVyc2lvbiA9IG4sIHRoaXMuZGF0YSA9IHMsIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCB3aXRoIG5vIGtub3duIHZlcnNpb24gb3IgZGF0YSwgYnV0IHdoaWNoIGNhbiBzZXJ2ZSBhc1xuICAgICAqIGJhc2UgZG9jdW1lbnQgZm9yIG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ludmFsaWREb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgV3QodCwgMCAvKiBJTlZBTElEICovICwgY3QubWluKCksIGp0LmVtcHR5KCksIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IHdpdGggdGhlIGdpdmVuIGRhdGEgYXQgdGhlXG4gICAgICogZ2l2ZW4gdmVyc2lvbi5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ZvdW5kRG9jdW1lbnQodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFd0KHQsIDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gLCBlLCBuLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gbm90IGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uLiAqLyAgICBzdGF0aWMgbmV3Tm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgV3QodCwgMiAvKiBOT19ET0NVTUVOVCAqLyAsIGUsIGp0LmVtcHR5KCksIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHdob3NlIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgc3RhdGljIG5ld1Vua25vd25Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgV3QodCwgMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovICwgZSwganQuZW1wdHkoKSwgMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYW5kIHRoYXQgaXRzIHZlcnNpb25cbiAgICAgKiBhbmQgZGF0YSBhcmUga25vd24uXG4gICAgICovICAgIGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAxIC8qIEZPVU5EX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gZSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGRvZXNuJ3QgZXhpc3QgYXQgdGhlIGdpdmVuXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi8gICAgY29udmVydFRvTm9Eb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDIgLyogTk9fRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBqdC5lbXB0eSgpLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBTWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGF0IGEgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB0aGF0IGl0cyBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IGp0LmVtcHR5KCksIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMSAvKiBIQVNfTE9DQUxfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgZ2V0IGhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBIQVNfTE9DQUxfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICB9XG4gICAgaXNWYWxpZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMCAvKiBJTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNGb3VuZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMSAvKiBGT1VORF9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzTm9Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogTk9fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc1Vua25vd25Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFd0ICYmIHRoaXMua2V5LmlzRXF1YWwodC5rZXkpICYmIHRoaXMudmVyc2lvbi5pc0VxdWFsKHQudmVyc2lvbikgJiYgdGhpcy5kb2N1bWVudFR5cGUgPT09IHQuZG9jdW1lbnRUeXBlICYmIHRoaXMuZG9jdW1lbnRTdGF0ZSA9PT0gdC5kb2N1bWVudFN0YXRlICYmIHRoaXMuZGF0YS5pc0VxdWFsKHQuZGF0YSk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFd0KHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLmRhdGEuY2xvbmUoKSwgdGhpcy5kb2N1bWVudFN0YXRlKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgRG9jdW1lbnQoJHt0aGlzLmtleX0sICR7dGhpcy52ZXJzaW9ufSwgJHtKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEudmFsdWUpfSwge2RvY3VtZW50VHlwZTogJHt0aGlzLmRvY3VtZW50VHlwZX19KSwge2RvY3VtZW50U3RhdGU6ICR7dGhpcy5kb2N1bWVudFN0YXRlfX0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdGhlIHZhbHVlIGZvciBmaWVsZCBgZmllbGRgIGluIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuIFRocm93cyBpZlxuICogdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIGJvdGggZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgR3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMub3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIHRoaXMubGltaXQgPSBpLCBcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gciwgdGhpcy5lbmRBdCA9IG8sIHRoaXMuUiA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIHp0KHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgIHJldHVybiBuZXcgR3QodCwgZSwgbiwgcywgaSwgciwgbyk7XG59XG5cbmZ1bmN0aW9uIEh0KHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5SKSB7XG4gICAgICAgIGxldCB0ID0gZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAodCArPSBcInxjZzpcIiArIGUuY29sbGVjdGlvbkdyb3VwKSwgdCArPSBcInxmOlwiLCB0ICs9IGUuZmlsdGVycy5tYXAoKHQgPT4gdGUodCkpKS5qb2luKFwiLFwiKSwgXG4gICAgICAgIHQgKz0gXCJ8b2I6XCIsIHQgKz0gZS5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cbiAgICAgICAgICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5kaXI7XG4gICAgICAgIH0odCkpKS5qb2luKFwiLFwiKSwgYnQoZS5saW1pdCkgfHwgKHQgKz0gXCJ8bDpcIiwgdCArPSBlLmxpbWl0KSwgZS5zdGFydEF0ICYmICh0ICs9IFwifGxiOlwiLCBcbiAgICAgICAgdCArPSBoZShlLnN0YXJ0QXQpKSwgZS5lbmRBdCAmJiAodCArPSBcInx1YjpcIiwgdCArPSBoZShlLmVuZEF0KSksIGUuUiA9IHQ7XG4gICAgfVxuICAgIHJldHVybiBlLlI7XG59XG5cbmZ1bmN0aW9uIEp0KHQpIHtcbiAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKGUgKz0gXCIgY29sbGVjdGlvbkdyb3VwPVwiICsgdC5jb2xsZWN0aW9uR3JvdXApLCBcbiAgICB0LmZpbHRlcnMubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBmaWx0ZXJzOiBbJHt0LmZpbHRlcnMubWFwKCh0ID0+IHtcbiAgICAgICAgcmV0dXJuIGAkeyhlID0gdCkuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICR7ZS5vcH0gJHskdChlLnZhbHVlKX1gO1xuICAgICAgICAvKiogUmV0dXJucyBhIGRlYnVnIGRlc2NyaXB0aW9uIGZvciBgZmlsdGVyYC4gKi9cbiAgICAgICAgdmFyIGU7XG4gICAgICAgIC8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovICAgIH0pKS5qb2luKFwiLCBcIil9XWApLCBcbiAgICBidCh0LmxpbWl0KSB8fCAoZSArPSBcIiwgbGltaXQ6IFwiICsgdC5saW1pdCksIHQub3JkZXJCeS5sZW5ndGggPiAwICYmIChlICs9IGAsIG9yZGVyQnk6IFske3Qub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gYCR7dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gKCR7dC5kaXJ9KWA7XG4gICAgfSh0KSkpLmpvaW4oXCIsIFwiKX1dYCksIHQuc3RhcnRBdCAmJiAoZSArPSBcIiwgc3RhcnRBdDogXCIgKyBoZSh0LnN0YXJ0QXQpKSwgdC5lbmRBdCAmJiAoZSArPSBcIiwgZW5kQXQ6IFwiICsgaGUodC5lbmRBdCkpLCBcbiAgICBgVGFyZ2V0KCR7ZX0pYDtcbn1cblxuZnVuY3Rpb24gWXQodCwgZSkge1xuICAgIGlmICh0LmxpbWl0ICE9PSBlLmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKHQub3JkZXJCeS5sZW5ndGggIT09IGUub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCFmZSh0Lm9yZGVyQnlbbl0sIGUub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAodC5maWx0ZXJzLmxlbmd0aCAhPT0gZS5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5maWx0ZXJzLmxlbmd0aDsgaSsrKSBpZiAobiA9IHQuZmlsdGVyc1tpXSwgcyA9IGUuZmlsdGVyc1tpXSwgXG4gICAgbi5vcCAhPT0gcy5vcCB8fCAhbi5maWVsZC5pc0VxdWFsKHMuZmllbGQpIHx8ICFDdChuLnZhbHVlLCBzLnZhbHVlKSkgcmV0dXJuICExO1xuICAgIHZhciBuLCBzO1xuICAgIHJldHVybiB0LmNvbGxlY3Rpb25Hcm91cCA9PT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKCEhdC5wYXRoLmlzRXF1YWwoZS5wYXRoKSAmJiAoISF3ZSh0LnN0YXJ0QXQsIGUuc3RhcnRBdCkgJiYgd2UodC5lbmRBdCwgZS5lbmRBdCkpKTtcbn1cblxuZnVuY3Rpb24gWHQodCkge1xuICAgIHJldHVybiBTdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbn1cblxuY2xhc3MgWnQgZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpZWxkID0gdCwgdGhpcy5vcCA9IGUsIHRoaXMudmFsdWUgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdC5pc0tleUZpZWxkKCkgPyBcImluXCIgLyogSU4gKi8gPT09IGUgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IGUgPyB0aGlzLlAodCwgZSwgbikgOiBuZXcgZWUodCwgZSwgbikgOiBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUgPyBuZXcgcmUodCwgbikgOiBcImluXCIgLyogSU4gKi8gPT09IGUgPyBuZXcgb2UodCwgbikgOiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gZSA/IG5ldyBhZSh0LCBuKSA6IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlID8gbmV3IGNlKHQsIG4pIDogbmV3IFp0KHQsIGUsIG4pO1xuICAgIH1cbiAgICBzdGF0aWMgUCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBcImluXCIgLyogSU4gKi8gPT09IGUgPyBuZXcgbmUodCwgbikgOiBuZXcgc2UodCwgbik7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICAvLyBUeXBlcyBkbyBub3QgaGF2ZSB0byBtYXRjaCBpbiBOT1RfRVFVQUwgZmlsdGVycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA9PT0gdGhpcy5vcCA/IG51bGwgIT09IGUgJiYgdGhpcy52KGt0KGUsIHRoaXMudmFsdWUpKSA6IG51bGwgIT09IGUgJiYgRHQodGhpcy52YWx1ZSkgPT09IER0KGUpICYmIHRoaXMudihrdChlLCB0aGlzLnZhbHVlKSk7XG4gICAgICAgIC8vIE9ubHkgY29tcGFyZSB0eXBlcyB3aXRoIG1hdGNoaW5nIGJhY2tlbmQgb3JkZXIgKHN1Y2ggYXMgZG91YmxlIGFuZCBpbnQpLlxuICAgICAgICB9XG4gICAgdih0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDwgMDtcblxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8PSAwO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgIT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPj0gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFYoKSB7XG4gICAgICAgIHJldHVybiBbIFwiPFwiIC8qIExFU1NfVEhBTiAqLyAsIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gLCBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi8gLCBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovICwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF0uaW5kZXhPZih0aGlzLm9wKSA+PSAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdGUodCkge1xuICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IFRlY2huaWNhbGx5LCB0aGlzIHdvbid0IGJlIHVuaXF1ZSBpZiB0d28gdmFsdWVzIGhhdmVcbiAgICAvLyB0aGUgc2FtZSBkZXNjcmlwdGlvbiwgc3VjaCBhcyB0aGUgaW50IDMgYW5kIHRoZSBzdHJpbmcgXCIzXCIuIFNvIHdlIHNob3VsZFxuICAgIC8vIGFkZCB0aGUgdHlwZXMgaW4gaGVyZSBzb21laG93LCB0b28uXG4gICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0Lm9wLnRvU3RyaW5nKCkgKyAkdCh0LnZhbHVlKTtcbn1cblxuY2xhc3MgZWUgZXh0ZW5kcyBadCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCBuKSwgdGhpcy5rZXkgPSBTdC5mcm9tTmFtZShuLnJlZmVyZW5jZVZhbHVlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBTdC5jb21wYXJhdG9yKHQua2V5LCB0aGlzLmtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLnYoZSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgbmUgZXh0ZW5kcyBadCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gaWUoXCJpblwiIC8qIElOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyBub3QgcHJlc2VudCB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIHNlIGV4dGVuZHMgWnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gaWUoXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaWUodCwgZSkge1xuICAgIHZhciBuO1xuICAgIHJldHVybiAoKG51bGwgPT09IChuID0gZS5hcnJheVZhbHVlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnZhbHVlcykgfHwgW10pLm1hcCgodCA9PiBTdC5mcm9tTmFtZSh0LnJlZmVyZW5jZVZhbHVlKSkpO1xufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucyBvcGVyYXRvci4gKi8gY2xhc3MgcmUgZXh0ZW5kcyBadCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBMdChlKSAmJiBOdChlLmFycmF5VmFsdWUsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovIGNsYXNzIG9lIGV4dGVuZHMgWnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIElOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiBOdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgbm90LWluIG9wZXJhdG9yLiAqLyBjbGFzcyBhZSBleHRlbmRzIFp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBpZiAoTnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmICFOdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMtYW55IG9wZXJhdG9yLiAqLyBjbGFzcyBjZSBleHRlbmRzIFp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gISghTHQoZSkgfHwgIWUuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIGUuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgodCA9PiBOdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHQpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBib3VuZCBvZiBhIHF1ZXJ5LlxuICpcbiAqIFRoZSBib3VuZCBpcyBzcGVjaWZpZWQgd2l0aCB0aGUgZ2l2ZW4gY29tcG9uZW50cyByZXByZXNlbnRpbmcgYSBwb3NpdGlvbiBhbmRcbiAqIHdoZXRoZXIgaXQncyBqdXN0IGJlZm9yZSBvciBqdXN0IGFmdGVyIHRoZSBwb3NpdGlvbiAocmVsYXRpdmUgdG8gd2hhdGV2ZXIgdGhlXG4gKiBxdWVyeSBvcmRlciBpcykuXG4gKlxuICogVGhlIHBvc2l0aW9uIHJlcHJlc2VudHMgYSBsb2dpY2FsIGluZGV4IHBvc2l0aW9uIGZvciBhIHF1ZXJ5LiBJdCdzIGEgcHJlZml4XG4gKiBvZiB2YWx1ZXMgZm9yIHRoZSAocG90ZW50aWFsbHkgaW1wbGljaXQpIG9yZGVyIGJ5IGNsYXVzZXMgb2YgYSBxdWVyeS5cbiAqXG4gKiBCb3VuZCBwcm92aWRlcyBhIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZG9jdW1lbnQgY29tZXMgYmVmb3JlIG9yXG4gKiBhZnRlciBhIGJvdW5kLiBUaGlzIGlzIGluZmx1ZW5jZWQgYnkgd2hldGhlciB0aGUgcG9zaXRpb24gaXMganVzdCBiZWZvcmUgb3JcbiAqIGp1c3QgYWZ0ZXIgdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAqLyBjbGFzcyB1ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdCwgdGhpcy5iZWZvcmUgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGUodCkge1xuICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgIHJldHVybiBgJHt0LmJlZm9yZSA/IFwiYlwiIDogXCJhXCJ9OiR7dC5wb3NpdGlvbi5tYXAoKHQgPT4gJHQodCkpKS5qb2luKFwiLFwiKX1gO1xufVxuXG4vKipcbiAqIEFuIG9yZGVyaW5nIG9uIGEgZmllbGQsIGluIHNvbWUgRGlyZWN0aW9uLiBEaXJlY3Rpb24gZGVmYXVsdHMgdG8gQVNDRU5ESU5HLlxuICovIGNsYXNzIGxlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8pIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMuZGlyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZlKHQsIGUpIHtcbiAgICByZXR1cm4gdC5kaXIgPT09IGUuZGlyICYmIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi8gZnVuY3Rpb24gZGUodCwgZSwgbikge1xuICAgIGxldCBzID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IGVbaV0sIG8gPSB0LnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAoci5maWVsZC5pc0tleUZpZWxkKCkpIHMgPSBTdC5jb21wYXJhdG9yKFN0LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgcyA9IGt0KG8sIG4uZGF0YS5maWVsZChyLmZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gPT09IHIuZGlyICYmIChzICo9IC0xKSwgMCAhPT0gcykgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0LmJlZm9yZSA/IHMgPD0gMCA6IHMgPCAwO1xufVxuXG5mdW5jdGlvbiB3ZSh0LCBlKSB7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsID09PSBlO1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgaWYgKHQuYmVmb3JlICE9PSBlLmJlZm9yZSB8fCB0LnBvc2l0aW9uLmxlbmd0aCAhPT0gZS5wb3NpdGlvbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQucG9zaXRpb24ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKCFDdCh0LnBvc2l0aW9uW25dLCBlLnBvc2l0aW9uW25dKSkgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFF1ZXJ5IGVuY2Fwc3VsYXRlcyBhbGwgdGhlIHF1ZXJ5IGF0dHJpYnV0ZXMgd2Ugc3VwcG9ydCBpbiB0aGUgU0RLLiBJdCBjYW5cbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXG4gKiBxdWVyeSB0aGUgUmVtb3RlU3RvcmUgcmVzdWx0cy5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovIGNsYXNzIF9lIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IFwiRlwiIC8qIEZpcnN0ICovICwgbyA9IG51bGwsIGEgPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5leHBsaWNpdE9yZGVyQnkgPSBuLCB0aGlzLmZpbHRlcnMgPSBzLCBcbiAgICAgICAgdGhpcy5saW1pdCA9IGksIHRoaXMubGltaXRUeXBlID0gciwgdGhpcy5zdGFydEF0ID0gbywgdGhpcy5lbmRBdCA9IGEsIHRoaXMuUyA9IG51bGwsIFxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UuXG4gICAgICAgIHRoaXMuRCA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIG1lKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpIHtcbiAgICByZXR1cm4gbmV3IF9lKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24gZ2UodCkge1xuICAgIHJldHVybiBuZXcgX2UodCk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IGludG8gYSBjb2xsZWN0aW9uIHF1ZXJ5IGF0IGFcbiAqIHNwZWNpZmljIHBhdGguIFRoaXMgaXMgdXNlZCB3aGVuIGV4ZWN1dGluZyBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMsIHNpbmNlXG4gKiB3ZSBoYXZlIHRvIHNwbGl0IHRoZSBxdWVyeSBpbnRvIGEgc2V0IG9mIGNvbGxlY3Rpb24gcXVlcmllcyBhdCBtdWx0aXBsZVxuICogcGF0aHMuXG4gKi8gZnVuY3Rpb24geWUodCkge1xuICAgIHJldHVybiAhYnQodC5saW1pdCkgJiYgXCJGXCIgLyogRmlyc3QgKi8gPT09IHQubGltaXRUeXBlO1xufVxuXG5mdW5jdGlvbiBwZSh0KSB7XG4gICAgcmV0dXJuICFidCh0LmxpbWl0KSAmJiBcIkxcIiAvKiBMYXN0ICovID09PSB0LmxpbWl0VHlwZTtcbn1cblxuZnVuY3Rpb24gVGUodCkge1xuICAgIHJldHVybiB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwID8gdC5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBFZSh0KSB7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZmlsdGVycykgaWYgKGUuVigpKSByZXR1cm4gZS5maWVsZDtcbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBPcGVyYXRvcnMgYXJlIGluY2x1ZGVkIGluIHRoZSBxdWVyeSBhbmRcbiAqIHJldHVybnMgdGhlIGZpcnN0IG9uZSB0aGF0IGlzLCBvciBudWxsIGlmIG5vbmUgYXJlLlxuICovXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcmF0aGVyIHRoYW4gYSBzcGVjaWZpY1xuICogY29sbGVjdGlvbi5cbiAqL1xuZnVuY3Rpb24gSWUodCkge1xuICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbXBsaWNpdCBvcmRlciBieSBjb25zdHJhaW50IHRoYXQgaXMgdXNlZCB0byBleGVjdXRlIHRoZSBRdWVyeSxcbiAqIHdoaWNoIGNhbiBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JkZXIgYnkgY29uc3RyYWludHMgdGhlIHVzZXIgcHJvdmlkZWQgKGUuZy5cbiAqIHRoZSBTREsgYW5kIGJhY2tlbmQgYWx3YXlzIG9yZGVycyBieSBgX19uYW1lX19gKS5cbiAqLyBmdW5jdGlvbiBBZSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgaWYgKG51bGwgPT09IGUuUykge1xuICAgICAgICBlLlMgPSBbXTtcbiAgICAgICAgY29uc3QgdCA9IEVlKGUpLCBuID0gVGUoZSk7XG4gICAgICAgIGlmIChudWxsICE9PSB0ICYmIG51bGwgPT09IG4pIFxuICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXG4gICAgICAgIC8vIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkIGZvciBpdCB0byBiZSBhIHZhbGlkIHF1ZXJ5LlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaW5lcXVhbGl0eSBmaWVsZCBhbmQga2V5IG9yZGVyaW5nIGlzIGFzY2VuZGluZy5cbiAgICAgICAgdC5pc0tleUZpZWxkKCkgfHwgZS5TLnB1c2gobmV3IGxlKHQpKSwgZS5TLnB1c2gobmV3IGxlKF90LmtleUZpZWxkKCksIFwiYXNjXCIgLyogQVNDRU5ESU5HICovKSk7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmV4cGxpY2l0T3JkZXJCeSkgZS5TLnB1c2gobiksIG4uZmllbGQuaXNLZXlGaWVsZCgpICYmICh0ID0gITApO1xuICAgICAgICAgICAgaWYgKCF0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIG9yZGVyIG9mIHRoZSBpbXBsaWNpdCBrZXkgb3JkZXJpbmcgYWx3YXlzIG1hdGNoZXMgdGhlIGxhc3RcbiAgICAgICAgICAgICAgICAvLyBleHBsaWNpdCBvcmRlciBieVxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwID8gZS5leHBsaWNpdE9yZGVyQnlbZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIC0gMV0uZGlyIDogXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi87XG4gICAgICAgICAgICAgICAgZS5TLnB1c2gobmV3IGxlKF90LmtleUZpZWxkKCksIHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZS5TO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdCdzIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gUmUodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIGlmICghZS5EKSBpZiAoXCJGXCIgLyogRmlyc3QgKi8gPT09IGUubGltaXRUeXBlKSBlLkQgPSB6dChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBBZShlKSwgZS5maWx0ZXJzLCBlLmxpbWl0LCBlLnN0YXJ0QXQsIGUuZW5kQXQpOyBlbHNlIHtcbiAgICAgICAgLy8gRmxpcCB0aGUgb3JkZXJCeSBkaXJlY3Rpb25zIHNpbmNlIHdlIHdhbnQgdGhlIGxhc3QgcmVzdWx0c1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBBZShlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gPT09IG4uZGlyID8gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8gOiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovO1xuICAgICAgICAgICAgdC5wdXNoKG5ldyBsZShuLmZpZWxkLCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbmVlZCB0byBzd2FwIHRoZSBjdXJzb3JzIHRvIG1hdGNoIHRoZSBub3ctZmxpcHBlZCBxdWVyeSBvcmRlcmluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5lbmRBdCA/IG5ldyB1ZShlLmVuZEF0LnBvc2l0aW9uLCAhZS5lbmRBdC5iZWZvcmUpIDogbnVsbCwgcyA9IGUuc3RhcnRBdCA/IG5ldyB1ZShlLnN0YXJ0QXQucG9zaXRpb24sICFlLnN0YXJ0QXQuYmVmb3JlKSA6IG51bGw7XG4gICAgICAgIC8vIE5vdyByZXR1cm4gYXMgYSBMaW1pdFR5cGUuRmlyc3QgcXVlcnkuXG4gICAgICAgIGUuRCA9IHp0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIHQsIGUuZmlsdGVycywgZS5saW1pdCwgbiwgcyk7XG4gICAgfVxuICAgIHJldHVybiBlLkQ7XG59XG5cbmZ1bmN0aW9uIFBlKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gbmV3IF9lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCBlLCBuLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiBiZSh0LCBlKSB7XG4gICAgcmV0dXJuIFl0KFJlKHQpLCBSZShlKSkgJiYgdC5saW1pdFR5cGUgPT09IGUubGltaXRUeXBlO1xufVxuXG4vLyBUT0RPKGIvMjkxODMxNjUpOiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgdW5pcXVlIHN0cmluZyBmcm9tIGEgcXVlcnkgdG8sIGZvclxuLy8gZXhhbXBsZSwgdXNlIGFzIGEgZGljdGlvbmFyeSBrZXksIGJ1dCB0aGUgaW1wbGVtZW50YXRpb24gaXMgc3ViamVjdCB0b1xuLy8gY29sbGlzaW9ucy4gTWFrZSBpdCBjb2xsaXNpb24tZnJlZS5cbmZ1bmN0aW9uIHZlKHQpIHtcbiAgICByZXR1cm4gYCR7SHQoUmUodCkpfXxsdDoke3QubGltaXRUeXBlfWA7XG59XG5cbmZ1bmN0aW9uIFZlKHQpIHtcbiAgICByZXR1cm4gYFF1ZXJ5KHRhcmdldD0ke0p0KFJlKHQpKX07IGxpbWl0VHlwZT0ke3QubGltaXRUeXBlfSlgO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIGBkb2NgIG1hdGNoZXMgdGhlIGNvbnN0cmFpbnRzIG9mIGBxdWVyeWAuICovIGZ1bmN0aW9uIFNlKHQsIGUpIHtcbiAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmtleS5wYXRoO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgPyBlLmtleS5oYXNDb2xsZWN0aW9uSWQodC5jb2xsZWN0aW9uR3JvdXApICYmIHQucGF0aC5pc1ByZWZpeE9mKG4pIDogU3QuaXNEb2N1bWVudEtleSh0LnBhdGgpID8gdC5wYXRoLmlzRXF1YWwobikgOiB0LnBhdGguaXNJbW1lZGlhdGVQYXJlbnRPZihuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIGRvY3VtZW50IG11c3QgaGF2ZSBhIHZhbHVlIGZvciBldmVyeSBvcmRlcmluZyBjbGF1c2UgaW4gb3JkZXIgdG8gc2hvdyB1cFxuICogaW4gdGhlIHJlc3VsdHMuXG4gKi8gKHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZXhwbGljaXRPcmRlckJ5KSBcbiAgICAgICAgLy8gb3JkZXIgYnkga2V5IGFsd2F5cyBtYXRjaGVzXG4gICAgICAgIGlmICghbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgbnVsbCA9PT0gZS5kYXRhLmZpZWxkKG4uZmllbGQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9KHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZmlsdGVycykgaWYgKCFuLm1hdGNoZXMoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogTWFrZXMgc3VyZSBhIGRvY3VtZW50IGlzIHdpdGhpbiB0aGUgYm91bmRzLCBpZiBwcm92aWRlZC4gKi8gKHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKHQuc3RhcnRBdCAmJiAhZGUodC5zdGFydEF0LCBBZSh0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHQuZW5kQXQgJiYgZGUodC5lbmRBdCwgQWUodCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBEZSh0KSB7XG4gICAgcmV0dXJuIChlLCBuKSA9PiB7XG4gICAgICAgIGxldCBzID0gITE7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBBZSh0KSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IENlKGksIGUsIG4pO1xuICAgICAgICAgICAgaWYgKDAgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgcyA9IHMgfHwgaS5maWVsZC5pc0tleUZpZWxkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gQ2UodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LmZpZWxkLmlzS2V5RmllbGQoKSA/IFN0LmNvbXBhcmF0b3IoZS5rZXksIG4ua2V5KSA6IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUuZGF0YS5maWVsZCh0KSwgaSA9IG4uZGF0YS5maWVsZCh0KTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHMgJiYgbnVsbCAhPT0gaSA/IGt0KHMsIGkpIDogTCgpO1xuICAgIH0odC5maWVsZCwgZSwgbik7XG4gICAgc3dpdGNoICh0LmRpcikge1xuICAgICAgY2FzZSBcImFzY1wiIC8qIEFTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiBzO1xuXG4gICAgICBjYXNlIFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiBzO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhbiBEb3VibGVWYWx1ZSBmb3IgYHZhbHVlYCB0aGF0IGlzIGVuY29kZWQgYmFzZWQgdGhlIHNlcmlhbGl6ZXInc1xuICogYHVzZVByb3RvM0pzb25gIHNldHRpbmcuXG4gKi8gZnVuY3Rpb24gTmUodCwgZSkge1xuICAgIGlmICh0LkMpIHtcbiAgICAgICAgaWYgKGlzTmFOKGUpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IHZ0KGUpID8gXCItMFwiIDogZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBJbnRlZ2VyVmFsdWUgZm9yIGB2YWx1ZWAuXG4gKi8gZnVuY3Rpb24ga2UodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiB4ZSh0LCBlKSB7XG4gICAgcmV0dXJuIFZ0KGUpID8ga2UoZSkgOiBOZSh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBVc2VkIHRvIHJlcHJlc2VudCBhIGZpZWxkIHRyYW5zZm9ybSBvbiBhIG11dGF0aW9uLiAqLyBjbGFzcyAkZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gRmUodCwgZSwgbikge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgTGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJzZXJ2ZXJfdGltZXN0YW1wXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9fbG9jYWxfd3JpdGVfdGltZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW5vczogdC5uYW5vc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZSAmJiAobi5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fID0gZSksIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiBuXG4gICAgICAgIH07XG4gICAgfShuLCBlKSA6IHQgaW5zdGFuY2VvZiBCZSA/IFVlKHQsIGUpIDogdCBpbnN0YW5jZW9mIHFlID8gS2UodCwgZSkgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXG4gICAgICAgIGNvbnN0IG4gPSBNZSh0LCBlKSwgcyA9IFFlKG4pICsgUWUodC5OKTtcbiAgICAgICAgcmV0dXJuIE10KG4pICYmIE10KHQuTikgPyBrZShzKSA6IE5lKHQuaywgcyk7XG4gICAgfSh0LCBlKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGZpbmFsIHRyYW5zZm9ybSByZXN1bHQgYWZ0ZXIgdGhlIHRyYW5zZm9ybSBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAqIGJ5IHRoZSBzZXJ2ZXIsIHBvdGVudGlhbGx5IHVzaW5nIHRoZSBzZXJ2ZXItcHJvdmlkZWQgdHJhbnNmb3JtUmVzdWx0LlxuICovIGZ1bmN0aW9uIE9lKHQsIGUsIG4pIHtcbiAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcbiAgICAvLyBhcHBsaWNhdGlvbnMuXG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBCZSA/IFVlKHQsIGUpIDogdCBpbnN0YW5jZW9mIHFlID8gS2UodCwgZSkgOiBuO1xufVxuXG4vKipcbiAqIElmIHRoaXMgdHJhbnNmb3JtIG9wZXJhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0b1xuICogcGVyc2lzdCBmb3IgdGhpcyB0cmFuc2Zvcm0uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIHRyYW5zZm9ybVxuICogb3BlcmF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXNcbiAqIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIEJhc2UgdmFsdWVzIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmRcbiAqIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZSBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmRcbiAqIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlIHRyYW5zZm9ybSBvcGVyYXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMsIGFzIHRoZXkgY2FuIGJlIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhc1xuICogYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLlxuICovIGZ1bmN0aW9uIE1lKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGplID8gTXQobiA9IGUpIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGVpdGhlciBhbiBJbnRlZ2VyVmFsdWUgb3IgYSBEb3VibGVWYWx1ZS4gKi8gKG4pID8gZSA6IHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiAwXG4gICAgfSA6IG51bGw7XG4gICAgdmFyIG47XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xuY2xhc3MgTGUgZXh0ZW5kcyAkZSB7fVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovIGNsYXNzIEJlIGV4dGVuZHMgJGUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBVZSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFdlKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuLnNvbWUoKHQgPT4gQ3QodCwgZSkpKSB8fCBuLnB1c2goZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBxZSBleHRlbmRzICRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gS2UodCwgZSkge1xuICAgIGxldCBuID0gV2UoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4gPSBuLmZpbHRlcigodCA9PiAhQ3QodCwgZSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxuICovIGNsYXNzIGplIGV4dGVuZHMgJGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rID0gdCwgdGhpcy5OID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFFlKHQpIHtcbiAgICByZXR1cm4gRXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIFdlKHQpIHtcbiAgICByZXR1cm4gTHQodCkgJiYgdC5hcnJheVZhbHVlLnZhbHVlcyA/IHQuYXJyYXlWYWx1ZS52YWx1ZXMuc2xpY2UoKSA6IFtdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovIGNsYXNzIEdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLnRyYW5zZm9ybSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB6ZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgQmUgJiYgZSBpbnN0YW5jZW9mIEJlIHx8IHQgaW5zdGFuY2VvZiBxZSAmJiBlIGluc3RhbmNlb2YgcWUgPyBydCh0LmVsZW1lbnRzLCBlLmVsZW1lbnRzLCBDdCkgOiB0IGluc3RhbmNlb2YgamUgJiYgZSBpbnN0YW5jZW9mIGplID8gQ3QodC5OLCBlLk4pIDogdCBpbnN0YW5jZW9mIExlICYmIGUgaW5zdGFuY2VvZiBMZTtcbiAgICB9KHQudHJhbnNmb3JtLCBlLnRyYW5zZm9ybSk7XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xuY2xhc3MgSGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxuICAgICAqXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhIG11dGF0aW9uXG4gICAgICogY29udGFpbmluZyBmaWVsZCB0cmFuc2Zvcm1zIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWVcbiAgICAgKiBmb3IgZWFjaCBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXG4gICAgICpcbiAgICAgKiBXaWxsIGJlIGVtcHR5IGlmIHRoZSBtdXRhdGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IGZpZWxkIHRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXG4gKi8gY2xhc3MgSmUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gdCwgdGhpcy5leGlzdHMgPSBlO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBlbXB0eSBQcmVjb25kaXRpb24uICovICAgIHN0YXRpYyBub25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IEplO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi8gICAgc3RhdGljIGV4aXN0cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSmUodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi8gICAgc3RhdGljIHVwZGF0ZVRpbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IEplKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqLyAgICBnZXQgaXNOb25lKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0aGlzLnVwZGF0ZVRpbWUgJiYgdm9pZCAwID09PSB0aGlzLmV4aXN0cztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gdC5leGlzdHMgJiYgKHRoaXMudXBkYXRlVGltZSA/ICEhdC51cGRhdGVUaW1lICYmIHRoaXMudXBkYXRlVGltZS5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiAhdC51cGRhdGVUaW1lKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gZnVuY3Rpb24gWWUodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6IHZvaWQgMCA9PT0gdC5leGlzdHMgfHwgdC5leGlzdHMgPT09IGUuaXNGb3VuZERvY3VtZW50KCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXG4gKlxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0cyB2ZXJzaW9uLlxuICpcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gRm9yIERlbGV0ZSBtdXRhdGlvbnMsIHdlXG4gKiByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxuICpcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cbiAqXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cbiAqXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcbiAqIFNldE11dGF0aW9uICAgICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgRG9jdW1lbnQodjApXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBVbmtub3duRG9jdW1lbnQodjMpXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIE5vRG9jdW1lbnQodjApXG4gKlxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gQXMgZGVsZXRlcyBoYXZlIG5vXG4gKiBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxuICogRGVsZXRlIG11dGF0aW9ucy5cbiAqXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xuICogbG9jYWxseSwgd2UgdHJhbnNpdGlvbiB0byBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzXG4gKiB0aGUgdXBkYXRlZCB2ZXJzaW9uLlxuICpcbiAqIEZpZWxkIHRyYW5zZm9ybXMgYXJlIHVzZWQgb25seSB3aXRoIFBhdGNoIGFuZCBTZXQgTXV0YXRpb25zLiBXZSB1c2UgdGhlXG4gKiBgdXBkYXRlVHJhbnNmb3Jtc2AgbWVzc2FnZSB0byBzdG9yZSB0cmFuc2Zvcm1zLCByYXRoZXIgdGhhbiB0aGUgYHRyYW5zZm9ybXNgc1xuICogbWVzc2FnZXMuXG4gKlxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcbiAqXG4gKiBFdmVyeSB0eXBlIG9mIG11dGF0aW9uIG5lZWRzIHRvIGltcGxlbWVudCBpdHMgb3duIGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQgKHNlZSBgc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoKWAgZm9yIGFuXG4gKiBleGFtcGxlKS5cbiAqLyBjbGFzcyBYZSB7fVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmcgYVxuICogbmV3IHJlbW90ZSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHN0YXRlXG4gKiAoZS5nLiBpdCBpcyBpbnZhbGlkIG9yIG91dGRhdGVkKSwgdGhlIGRvY3VtZW50IHR5cGUgbWF5IHRyYW5zaXRpb24gdG9cbiAqIHVua25vd24uXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbXV0YXRpb25SZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvbiBmcm9tIHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIFplKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2Ygcm4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBzZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYVxuICAgICAgICAvLyByZW1vdGUgZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbXVzdCBoYXZlIGhlbGQuXG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSBjbih0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIHMpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiB0IGluc3RhbmNlb2Ygb24gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghWWUodC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXG4gICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIGNvbnZlcnQgdG8gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggYVxuICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxuICAgICAgICByZXR1cm4gdm9pZCBlLmNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChuLnZlcnNpb24pO1xuICAgICAgICBjb25zdCBzID0gY24odC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKGFuKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIGkpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQobi52ZXJzaW9uKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KDAsIGUsIG4pO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmdcbiAqIHRoZSBuZXcgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGVcbiAqIGV4cGVjdGVkIHN0YXRlLCB0aGUgZG9jdW1lbnQgaXMgbm90IG1vZGlmaWVkLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gQSB0aW1lc3RhbXAgaW5kaWNhdGluZyB0aGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGVcbiAqICAgICBiYXRjaCB0aGlzIG11dGF0aW9uIGlzIGEgcGFydCBvZi5cbiAqLyBmdW5jdGlvbiB0bih0LCBlLCBuKSB7XG4gICAgdCBpbnN0YW5jZW9mIHJuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIVllKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFRoZSBtdXRhdGlvbiBmYWlsZWQgdG8gYXBwbHkgKGUuZy4gYSBkb2N1bWVudCBJRCBjcmVhdGVkIHdpdGggYWRkKClcbiAgICAgICAgLy8gY2F1c2VkIGEgbmFtZSBjb2xsaXNpb24pLlxuICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSB1bih0LmZpZWxkVHJhbnNmb3JtcywgbiwgZSk7XG4gICAgICAgIHMuc2V0QWxsKGkpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoc24oZSksIHMpLnNldEhhc0xvY2FsTXV0YXRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogZ2l2ZW4gdmFsdWVzLiBUaGUgdmFsdWVzIGFyZSBhcHBsaWVkIHRocm91Z2ggYSBmaWVsZCBtYXNrOlxuICpcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBib3RoIHRoZSBtYXNrIGFuZCB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgdXBkYXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBuZWl0aGVyIHRoZSBtYXNrIG5vciB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZ1xuICogICAgZmllbGQgaXMgdW5tb2RpZmllZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiB0aGUgbWFzayBidXQgbm90IGluIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyBkZWxldGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIG5vdCBpbiB0aGUgbWFzayBidXQgaXMgaW4gdGhlIHZhbHVlcywgdGhlIHZhbHVlcyBtYXAgaXNcbiAqICAgIGlnbm9yZWQuXG4gKi8gKHQsIGUsIG4pIDogdCBpbnN0YW5jZW9mIG9uID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIVllKHQucHJlY29uZGl0aW9uLCBlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdW4odC5maWVsZFRyYW5zZm9ybXMsIG4sIGUpLCBpID0gZS5kYXRhO1xuICAgICAgICBpLnNldEFsbChhbih0KSksIGkuc2V0QWxsKHMpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoc24oZSksIGkpLnNldEhhc0xvY2FsTXV0YXRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIEZpZWxkUGF0aC9WYWx1ZSBtYXAgd2l0aCB0aGUgY29udGVudCBvZiB0aGUgUGF0Y2hNdXRhdGlvbi5cbiAqLyAodCwgZSwgbikgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIFllKHQucHJlY29uZGl0aW9uLCBlKSAmJiBcbiAgICAgICAgLy8gV2UgZG9uJ3QgY2FsbCBgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKWAgc2luY2Ugd2Ugd2FudCB0byBiZSBiYWNrd2FyZHNcbiAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBleGlzdGluZyBTREsgYmVoYXZpb3IuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudChjdC5taW4oKSk7XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IHZlcmlmaWVzIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aFxuICogdGhlIHByb3ZpZGVkIHByZWNvbmRpdGlvbi5cbiAqXG4gKiBUaGUgYHZlcmlmeWAgb3BlcmF0aW9uIGlzIG9ubHkgdXNlZCBpbiBUcmFuc2FjdGlvbnMsIGFuZCB0aGlzIGNsYXNzIHNlcnZlc1xuICogcHJpbWFyaWx5IHRvIGZhY2lsaXRhdGUgc2VyaWFsaXphdGlvbiBpbnRvIHByb3Rvcy5cbiAqLyAodCwgZSk7XG59XG5cbi8qKlxuICogSWYgdGhpcyBtdXRhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0byBwZXJzaXN0IHdpdGhcbiAqIHRoaXMgbXV0YXRpb24uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIG11dGF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkXG4gKiB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIGEgc3BhcnNlIG9iamVjdCB0aGF0IGNvbnNpc3RzIG9mIG9ubHkgdGhlIGRvY3VtZW50XG4gKiBmaWVsZHMgZm9yIHdoaWNoIHRoaXMgbXV0YXRpb24gY29udGFpbnMgYSBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1hdGlvblxuICogKGUuZy4gYSBudW1lcmljIGluY3JlbWVudCkuIFRoZSBwcm92aWRlZCB2YWx1ZSBndWFyYW50ZWVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZCBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWVcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZVxuICogbXV0YXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yIGlkZW1wb3RlbnQgbXV0YXRpb25zLCBhcyB0aGV5IGNhbiBiZVxuICogcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIGVuKHQsIGUpIHtcbiAgICBsZXQgbiA9IG51bGw7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuZmllbGRUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQocy5maWVsZCksIGkgPSBNZShzLnRyYW5zZm9ybSwgdCB8fCBudWxsKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChudWxsID09IG4gJiYgKG4gPSBqdC5lbXB0eSgpKSwgbi5zZXQocy5maWVsZCwgaSkpO1xuICAgIH1cbiAgICByZXR1cm4gbiB8fCBudWxsO1xufVxuXG5mdW5jdGlvbiBubih0LCBlKSB7XG4gICAgcmV0dXJuIHQudHlwZSA9PT0gZS50eXBlICYmICghIXQua2V5LmlzRXF1YWwoZS5rZXkpICYmICghIXQucHJlY29uZGl0aW9uLmlzRXF1YWwoZS5wcmVjb25kaXRpb24pICYmICghIWZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCAmJiB2b2lkIDAgPT09IGUgfHwgISghdCB8fCAhZSkgJiYgcnQodCwgZSwgKCh0LCBlKSA9PiB6ZSh0LCBlKSkpO1xuICAgIH0odC5maWVsZFRyYW5zZm9ybXMsIGUuZmllbGRUcmFuc2Zvcm1zKSAmJiAoMCAvKiBTZXQgKi8gPT09IHQudHlwZSA/IHQudmFsdWUuaXNFcXVhbChlLnZhbHVlKSA6IDEgLyogUGF0Y2ggKi8gIT09IHQudHlwZSB8fCB0LmRhdGEuaXNFcXVhbChlLmRhdGEpICYmIHQuZmllbGRNYXNrLmlzRXF1YWwoZS5maWVsZE1hc2spKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB1c2UgYXMgdGhlIHJlc3VsdCBvZiBhXG4gKiBtdXRhdGlvbi4gTXV0YXRpb25zIGFyZSBkZWZpbmVkIHRvIHJldHVybiB0aGUgdmVyc2lvbiBvZiB0aGUgYmFzZSBkb2N1bWVudFxuICogb25seSBpZiBpdCBpcyBhbiBleGlzdGluZyBkb2N1bWVudC4gRGVsZXRlZCBhbmQgdW5rbm93biBkb2N1bWVudHMgaGF2ZSBhXG4gKiBwb3N0LW11dGF0aW9uIHZlcnNpb24gb2YgU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICovIGZ1bmN0aW9uIHNuKHQpIHtcbiAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSA/IHQudmVyc2lvbiA6IGN0Lm1pbigpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gdGhhdCBjcmVhdGVzIG9yIHJlcGxhY2VzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBvYmplY3QgdmFsdWUgY29udGVudHMuXG4gKi8gY2xhc3Mgcm4gZXh0ZW5kcyBYZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcyA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy52YWx1ZSA9IGUsIHRoaXMucHJlY29uZGl0aW9uID0gbiwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBzLCBcbiAgICAgICAgdGhpcy50eXBlID0gMCAvKiBTZXQgKi87XG4gICAgfVxufVxuXG5jbGFzcyBvbiBleHRlbmRzIFhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IG4sIHRoaXMucHJlY29uZGl0aW9uID0gcywgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSwgdGhpcy50eXBlID0gMSAvKiBQYXRjaCAqLztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFuKHQpIHtcbiAgICBjb25zdCBlID0gbmV3IE1hcDtcbiAgICByZXR1cm4gdC5maWVsZE1hc2suZmllbGRzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICBpZiAoIW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5kYXRhLmZpZWxkKG4pO1xuICAgICAgICAgICAgZS5zZXQobiwgcyk7XG4gICAgICAgIH1cbiAgICB9KSksIGU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2UgYWZ0ZXIgYSBtdXRhdGlvblxuICogY29udGFpbmluZyB0cmFuc2Zvcm1zIGhhcyBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEBwYXJhbSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIC0gVGhlIHRyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IHRoZSBzZXJ2ZXIuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBjbih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgQih0Lmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gdFtpXSwgbyA9IHIudHJhbnNmb3JtLCBhID0gZS5kYXRhLmZpZWxkKHIuZmllbGQpO1xuICAgICAgICBzLnNldChyLmZpZWxkLCBPZShvLCBhLCBuW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIHdoZW4gYXBwbHlpbmcgYVxuICogdHJhbnNmb3JtIGxvY2FsbHkuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgbXV0YXRpb24gKHVzZWQgdG9cbiAqICAgICBnZW5lcmF0ZSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMpLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqICAgICBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiB1bih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGkudHJhbnNmb3JtLCByID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICBzLnNldChpLmZpZWxkLCBGZSh0LCByLCBlKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIGhuIGV4dGVuZHMgWGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDIgLyogRGVsZXRlICovICwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIGxuIGV4dGVuZHMgWGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDMgLyogVmVyaWZ5ICovICwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGZuIHtcbiAgICAvLyBUT0RPKGIvMzMwNzgxNjMpOiBqdXN0IHVzZSBzaW1wbGVzdCBmb3JtIG9mIGV4aXN0ZW5jZSBmaWx0ZXIgZm9yIG5vd1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb3VudCA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAqXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgb3IgY2hhbmdlIHRoaXMgaW50byBhIGNvbnN0IGVudW0uXG4gKi8gdmFyIGRuLCB3bjtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIF9uKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG5cbiAgICAgIGNhc2UgSy5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIEsuVU5LTk9XTjpcbiAgICAgIGNhc2UgSy5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgSy5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIEsuSU5URVJOQUw6XG4gICAgICBjYXNlIEsuVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgSy5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBLLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIEsuTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBLLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBLLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBLLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBLLkFCT1JURUQ6XG4gICAgICBjYXNlIEsuT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBLLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIEsuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiBtbih0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgXG4gICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcbiAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXG4gICAgcmV0dXJuIEYoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgSy5VTktOT1dOO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSBkbi5PSzpcbiAgICAgICAgcmV0dXJuIEsuT0s7XG5cbiAgICAgIGNhc2UgZG4uQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gSy5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgZG4uVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIEsuVU5LTk9XTjtcblxuICAgICAgY2FzZSBkbi5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIEsuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgZG4uUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gSy5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgZG4uSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBLLklOVEVSTkFMO1xuXG4gICAgICBjYXNlIGRuLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gSy5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSBkbi5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBLLlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSBkbi5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gSy5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIGRuLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIEsuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIGRuLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gSy5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSBkbi5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIEsuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgZG4uRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIEsuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSBkbi5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gSy5BQk9SVEVEO1xuXG4gICAgICBjYXNlIGRuLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIEsuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIGRuLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBLLlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgZG4uREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gSy5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKHduID0gZG4gfHwgKGRuID0ge30pKVt3bi5PSyA9IDBdID0gXCJPS1wiLCB3blt3bi5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxud25bd24uVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIHduW3duLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbnduW3duLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIHduW3duLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG53blt3bi5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCB3blt3bi5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbnduW3duLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIHduW3duLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG53blt3bi5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgd25bd24uQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbnduW3duLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIHduW3duLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG53blt3bi5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgd25bd24uVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIHduW3duLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4vLyB0cmVlLlxuY2xhc3MgZ24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5yb290ID0gZSB8fCBwbi5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGduKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290Lmluc2VydCh0LCBlLCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgcG4uQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZ24odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QucmVtb3ZlKHQsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBwbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFlLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb21wYXJhdG9yKHQsIGUua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gZS52YWx1ZTtcbiAgICAgICAgICAgIG4gPCAwID8gZSA9IGUubGVmdCA6IG4gPiAwICYmIChlID0gZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxuICAgIC8vIGV4aXN0LlxuICAgIGluZGV4T2YodCkge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcbiAgICAgICAgbGV0IGUgPSAwLCBuID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshbi5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY29tcGFyYXRvcih0LCBuLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGUgKyBuLmxlZnQuc2l6ZTtcbiAgICAgICAgICAgIHMgPCAwID8gbiA9IG4ubGVmdCA6IChcbiAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICBlICs9IG4ubGVmdC5zaXplICsgMSwgbiA9IG4ucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSwgbiksICExKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQucHVzaChgJHtlfToke259YCksICExKSkpLCBgeyR7dC5qb2luKFwiLCBcIil9fWA7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcbiAgICAvLyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB5bih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IHluKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB5bih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB5bih0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG5jbGFzcyB5biB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IHMsIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIGlmIChpID0gZSA/IG4odC5rZXksIGUpIDogMSwgXG4gICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxuICAgICAgICBzICYmIChpICo9IC0xKSwgaSA8IDApIFxuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxuICAgICAgICB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LmxlZnQgOiB0LnJpZ2h0OyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgwID09PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGV4YWN0bHkgZXF1YWwgdG8gb3VyIHN0YXJ0IGtleS4gUHVzaCBpdCBvbiB0aGUgc3RhY2ssXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmVcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5yaWdodCA6IHQubGVmdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMubm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkgZm9yICh0ID0gdC5sZWZ0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHQucmlnaHQ7IGVsc2UgZm9yICh0ID0gdC5yaWdodDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIFxuICAgICAgICB0ID0gdC5sZWZ0O1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm5vZGVTdGFjay5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwSXRlcmF0b3Jcbi8vIFJlcHJlc2VudHMgYSBub2RlIGluIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFjayB0cmVlLlxuY2xhc3MgcG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5jb2xvciA9IG51bGwgIT0gbiA/IG4gOiBwbi5SRUQsIHRoaXMubGVmdCA9IG51bGwgIT0gcyA/IHMgOiBwbi5FTVBUWSwgXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsICE9IGkgPyBpIDogcG4uRU1QVFksIHRoaXMuc2l6ZSA9IHRoaXMubGVmdC5zaXplICsgMSArIHRoaXMucmlnaHQuc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZSwgb3B0aW9uYWxseSByZXBsYWNpbmcgcGllY2VzIG9mIGl0LlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gbmV3IHBuKG51bGwgIT0gdCA/IHQgOiB0aGlzLmtleSwgbnVsbCAhPSBlID8gZSA6IHRoaXMudmFsdWUsIG51bGwgIT0gbiA/IG4gOiB0aGlzLmNvbG9yLCBudWxsICE9IHMgPyBzIDogdGhpcy5sZWZ0LCBudWxsICE9IGkgPyBpIDogdGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLnJpZ2h0Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cbiAgICBtaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaXNFbXB0eSgpID8gdGhpcyA6IHRoaXMubGVmdC5taW4oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oKS5rZXk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuaXNFbXB0eSgpID8gdGhpcy5rZXkgOiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpID0gbih0LCBzLmtleSk7XG4gICAgICAgIHJldHVybiBzID0gaSA8IDAgPyBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0Lmluc2VydCh0LCBlLCBuKSwgbnVsbCkgOiAwID09PSBpID8gcy5jb3B5KG51bGwsIGUsIG51bGwsIG51bGwsIG51bGwpIDogcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQuaW5zZXJ0KHQsIGUsIG4pKSwgXG4gICAgICAgIHMuZml4VXAoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWluKCkge1xuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkgcmV0dXJuIHBuLkVNUFRZO1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LmxlZnQuaXNSZWQoKSB8fCB0LmxlZnQubGVmdC5pc1JlZCgpIHx8ICh0ID0gdC5tb3ZlUmVkTGVmdCgpKSwgdCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCB0LmxlZnQucmVtb3ZlTWluKCksIG51bGwpLCBcbiAgICAgICAgdC5maXhVcCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzID0gdGhpcztcbiAgICAgICAgaWYgKGUodCwgcy5rZXkpIDwgMCkgcy5sZWZ0LmlzRW1wdHkoKSB8fCBzLmxlZnQuaXNSZWQoKSB8fCBzLmxlZnQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkTGVmdCgpKSwgXG4gICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0LnJlbW92ZSh0LCBlKSwgbnVsbCk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHMubGVmdC5pc1JlZCgpICYmIChzID0gcy5yb3RhdGVSaWdodCgpKSwgcy5yaWdodC5pc0VtcHR5KCkgfHwgcy5yaWdodC5pc1JlZCgpIHx8IHMucmlnaHQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkUmlnaHQoKSksIFxuICAgICAgICAgICAgMCA9PT0gZSh0LCBzLmtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocy5yaWdodC5pc0VtcHR5KCkpIHJldHVybiBwbi5FTVBUWTtcbiAgICAgICAgICAgICAgICBuID0gcy5yaWdodC5taW4oKSwgcyA9IHMuY29weShuLmtleSwgbi52YWx1ZSwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmVNaW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlKHQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5maXhVcCgpO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cbiAgICBmaXhVcCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5pc1JlZCgpICYmICF0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlTGVmdCgpKSwgdC5sZWZ0LmlzUmVkKCkgJiYgdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0LmxlZnQuaXNSZWQoKSAmJiB0LnJpZ2h0LmlzUmVkKCkgJiYgKHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZExlZnQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQucmlnaHQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHQucmlnaHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0ID0gdC5yb3RhdGVMZWZ0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZFJpZ2h0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIHJvdGF0ZUxlZnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgcG4uUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIHQsIG51bGwpO1xuICAgIH1cbiAgICByb3RhdGVSaWdodCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBwbi5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCB0KTtcbiAgICB9XG4gICAgY29sb3JGbGlwKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCksIGUgPSB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMucmlnaHQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCB0LCBlKTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDIsIHQpIDw9IHRoaXMuc2l6ZSArIDE7XG4gICAgfVxuICAgIC8vIEluIGEgYmFsYW5jZWQgUkIgdHJlZSwgdGhlIGJsYWNrLWRlcHRoIChudW1iZXIgb2YgYmxhY2sgbm9kZXMpIGZyb20gcm9vdCB0b1xuICAgIC8vIGxlYXZlcyBpcyBlcXVhbCBvbiBib3RoIHNpZGVzLiAgVGhpcyBmdW5jdGlvbiB2ZXJpZmllcyB0aGF0IG9yIGFzc2VydHMuXG4gICAgY2hlY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHRocm93IEwoKTtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkgdGhyb3cgTCgpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNoZWNrKCk7XG4gICAgICAgIGlmICh0ICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHRocm93IEwoKTtcbiAgICAgICAgcmV0dXJuIHQgKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xuICAgIH1cbn1cblxuIC8vIGVuZCBMTFJCTm9kZVxuLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5wbi5FTVBUWSA9IG51bGwsIHBuLlJFRCA9ICEwLCBwbi5CTEFDSyA9ICExO1xuXG4vLyBlbmQgTExSQkVtcHR5Tm9kZVxucG4uRU1QVFkgPSBuZXcgXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgcG4odCwgZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIFRuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMuZGF0YSA9IG5ldyBnbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5kYXRhLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XG4gICAgfVxuICAgIGluZGV4T2YodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YodCk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdICZsdDs9IGVsZW0gJmx0OyByYW5nZVsxXS4gKi8gICAgZm9yRWFjaEluUmFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0WzBdKTtcbiAgICAgICAgZm9yICg7bi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihzLmtleSwgdFsxXSkgPj0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgZShzLmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgJmx0Oz0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZm9yRWFjaFdoaWxlKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiA9IHZvaWQgMCAhPT0gZSA/IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSkgOiB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTsgbi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKCF0KG4uZ2V0TmV4dCgpLmtleSkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi8gICAgZmlyc3RBZnRlck9yRXF1YWwodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KTtcbiAgICAgICAgcmV0dXJuIGUuaGFzTmV4dCgpID8gZS5nZXROZXh0KCkua2V5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW4odGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IEVuKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpLmluc2VydCh0LCAhMCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyh0KSA/IHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xuICAgIH1cbiAgICB1bmlvbldpdGgodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBgcmVzdWx0YCBhbHdheXMgcmVmZXJzIHRvIHRoZSBsYXJnZXIgb25lIG9mIHRoZSB0d28gc2V0cy5cbiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaXplIDwgdC5zaXplICYmIChlID0gdCwgdCA9IHRoaXMpLCB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZSA9IGUuYWRkKHQpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgVG4pKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSB0LmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IodCwgcykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgXCJTb3J0ZWRTZXQoXCIgKyB0LnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgVG4odGhpcy5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIGUuZGF0YSA9IHQsIGU7XG4gICAgfVxufVxuXG5jbGFzcyBFbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLml0ZXIgPSB0O1xuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmdldE5leHQoKS5rZXk7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSW4gPSBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIEFuKCkge1xuICAgIHJldHVybiBJbjtcbn1cblxuY29uc3QgUm4gPSBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIFBuKCkge1xuICAgIHJldHVybiBSbjtcbn1cblxuY29uc3QgYm4gPSBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIHZuKCkge1xuICAgIHJldHVybiBibjtcbn1cblxuY29uc3QgVm4gPSBuZXcgVG4oU3QuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIFNuKC4uLnQpIHtcbiAgICBsZXQgZSA9IFZuO1xuICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5hZGQobik7XG4gICAgcmV0dXJuIGU7XG59XG5cbmNvbnN0IERuID0gbmV3IFRuKGl0KTtcblxuZnVuY3Rpb24gQ24oKSB7XG4gICAgcmV0dXJuIERuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxuICovIGNsYXNzIE5uIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQuIExpc3RlbnMgZm9yIHRoZXNlXG4gICAgICogdGFyZ2V0cyBzaG91bGQgYmUgcmUtZXN0YWJsaXNoZWQgd2l0aG91dCByZXN1bWUgdG9rZW5zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IHQsIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IGUsIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IG4sIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gcywgXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBuLnNldCh0LCBrbi5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodCwgZSkpLCBuZXcgTm4oY3QubWluKCksIG4sIENuKCksIEFuKCksIFNuKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFRhcmdldENoYW5nZSBzcGVjaWZpZXMgdGhlIHNldCBvZiBjaGFuZ2VzIGZvciBhIHNwZWNpZmljIHRhcmdldCBhcyBwYXJ0IG9mXG4gKiBhIFJlbW90ZUV2ZW50LiBUaGVzZSBjaGFuZ2VzIHRyYWNrIHdoaWNoIGRvY3VtZW50cyBhcmUgYWRkZWQsIG1vZGlmaWVkIG9yXG4gKiByZW1vdmVkLCBhcyB3ZWxsIGFzIHRoZSB0YXJnZXQncyByZXN1bWUgdG9rZW4gYW5kIHdoZXRoZXIgdGhlIHRhcmdldCBpc1xuICogbWFya2VkIENVUlJFTlQuXG4gKiBUaGUgYWN0dWFsIGNoYW5nZXMgKnRvKiBkb2N1bWVudHMgYXJlIG5vdCBwYXJ0IG9mIHRoZSBUYXJnZXRDaGFuZ2Ugc2luY2VcbiAqIGRvY3VtZW50cyBtYXkgYmUgcGFydCBvZiBtdWx0aXBsZSB0YXJnZXRzLlxuICovIGNsYXNzIGtuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlIHJlc3VtZWRcbiAgICAgKiBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXQgbWF0Y2hlcyB0aGVcbiAgICAgKiBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoXG4gICAgICogdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgXCJjdXJyZW50XCIgKHN5bmNlZCkgc3RhdHVzIG9mIHRoaXMgdGFyZ2V0LiBOb3RlIHRoYXQgXCJjdXJyZW50XCJcbiAgICAgKiBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2wgdGhhdCBpbXBsaWVzIHRoYXQgYSB0YXJnZXQgaXNcbiAgICAgKiBib3RoIHVwLXRvLWRhdGUgYW5kIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2ggc3RyZWFtLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBuZXdseSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mXG4gICAgICogdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIGFscmVhZHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYnV0IHJlY2VpdmVkXG4gICAgICogYW4gdXBkYXRlIGR1cmluZyB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2YgdGhpc1xuICAgICAqIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSB0LCB0aGlzLmN1cnJlbnQgPSBlLCB0aGlzLmFkZGVkRG9jdW1lbnRzID0gbiwgdGhpcy5tb2RpZmllZERvY3VtZW50cyA9IHMsIFxuICAgICAgICB0aGlzLnJlbW92ZWREb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFRhcmdldENoYW5nZXMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIGFwcGx5IGEgQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldyAoZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnRcbiAgICAgKiB0YWIpIG9yIGZvciBuZXcgcXVlcmllcyAodG8gcmFpc2Ugc25hcHNob3RzIHdpdGggY29ycmVjdCBDVVJSRU5UIHN0YXR1cykuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGtuKHl0LkVNUFRZX0JZVEVfU1RSSU5HLCBlLCBTbigpLCBTbigpLCBTbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxuICogYXBwbGllcy5cbiAqXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cbiAqLyBjbGFzcyB4biB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuJCA9IHQsIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IGUsIHRoaXMua2V5ID0gbiwgdGhpcy5GID0gcztcbiAgICB9XG59XG5cbmNsYXNzICRuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLk8gPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgRm4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIG4gPSB5dC5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKiBBbiBSUEMgZXJyb3IgaW5kaWNhdGluZyB3aHkgdGhlIHdhdGNoIGZhaWxlZC4gKi8gLCBzID0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdCwgdGhpcy50YXJnZXRJZHMgPSBlLCB0aGlzLnJlc3VtZVRva2VuID0gbiwgdGhpcy5jYXVzZSA9IHM7XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldC4gKi8gY2xhc3MgT24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5MID0gQm4oKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuQiA9IHl0LkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLlUgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IHN0YXRlIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgbmV4dCBzbmFwc2hvdC4gV2VcbiAgICAgICAgICogaW5pdGlhbGl6ZSB0byB0cnVlIHNvIHRoYXQgbmV3bHktYWRkZWQgdGFyZ2V0cyBhcmUgaW5jbHVkZWQgaW4gdGhlIG5leHRcbiAgICAgICAgICogUmVtb3RlRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnEgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxuICAgICAqXG4gICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxuICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcbiAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLlxuICAgICAqLyAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVTtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgcGVuZGluZyB0YXJnZXQgYWRkcyBvciB0YXJnZXQgcmVtb3Zlcy4gKi8gICAgZ2V0IEsoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLk07XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IGooKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgKi8gICAgVyh0KSB7XG4gICAgICAgIHQuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5xID0gITAsIHRoaXMuQiA9IHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXG4gICAgICovICAgIEcoKSB7XG4gICAgICAgIGxldCB0ID0gU24oKSwgZSA9IFNuKCksIG4gPSBTbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5MLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICB0ID0gdC5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIG4gPSBuLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIEwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBuZXcga24odGhpcy5CLCB0aGlzLlUsIHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGRvY3VtZW50IGNoYW5nZXMgYW5kIHNldHMgYGhhc1BlbmRpbmdDaGFuZ2VzYCB0byBmYWxzZS5cbiAgICAgKi8gICAgSCgpIHtcbiAgICAgICAgdGhpcy5xID0gITEsIHRoaXMuTCA9IEJuKCk7XG4gICAgfVxuICAgIEoodCwgZSkge1xuICAgICAgICB0aGlzLnEgPSAhMCwgdGhpcy5MID0gdGhpcy5MLmluc2VydCh0LCBlKTtcbiAgICB9XG4gICAgWSh0KSB7XG4gICAgICAgIHRoaXMucSA9ICEwLCB0aGlzLkwgPSB0aGlzLkwucmVtb3ZlKHQpO1xuICAgIH1cbiAgICBYKCkge1xuICAgICAgICB0aGlzLk0gKz0gMTtcbiAgICB9XG4gICAgWigpIHtcbiAgICAgICAgdGhpcy5NIC09IDE7XG4gICAgfVxuICAgIHR0KCkge1xuICAgICAgICB0aGlzLnEgPSAhMCwgdGhpcy5VID0gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXG4gKi9cbmNsYXNzIE1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZXQgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhbGwgdHJhY2tlZCB0YXJnZXRzLiAqL1xuICAgICAgICB0aGlzLm50ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnRzIHRvIHVwZGF0ZSBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuICovXG4gICAgICAgIHRoaXMuc3QgPSBBbigpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLml0ID0gTG4oKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcbiAgICAgICAgICoga25vd24gdG8gYmUgaW5jb25zaXN0ZW50IGFuZCB0aGVpciBsaXN0ZW5zIG5lZWRzIHRvIGJlIHJlLWVzdGFibGlzaGVkIGJ5XG4gICAgICAgICAqIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ydCA9IG5ldyBUbihpdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgRG9jdW1lbnRXYXRjaENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cbiAgICAgKi8gICAgb3QodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC4kKSB0LkYgJiYgdC5GLmlzRm91bmREb2N1bWVudCgpID8gdGhpcy5hdChlLCB0LkYpIDogdGhpcy5jdChlLCB0LmtleSwgdC5GKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQucmVtb3ZlZFRhcmdldElkcykgdGhpcy5jdChlLCB0LmtleSwgdC5GKTtcbiAgICB9XG4gICAgLyoqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgV2F0Y2hUYXJnZXRDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuICovICAgIHV0KHQpIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoVGFyZ2V0KHQsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmh0KGUpO1xuICAgICAgICAgICAgc3dpdGNoICh0LnN0YXRlKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBOb0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5sdChlKSAmJiBuLlcodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uWigpLCBuLksgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi5IKCksIG4uVyh0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDIgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uWigpLCBuLksgfHwgdGhpcy5yZW1vdmVUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzIC8qIEN1cnJlbnQgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSkgJiYgKG4udHQoKSwgbi5XKHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogUmVzZXQgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0YXJnZXQgYW5kIHN5bnRoZXNpemVzIHJlbW92ZXMgZm9yIGFsbCBleGlzdGluZ1xuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cy4gVGhlIGJhY2tlbmQgd2lsbCByZS1hZGQgYW55IGRvY3VtZW50cyB0aGF0IHN0aWxsXG4gICAgICAgICAgICAgICAgLy8gbWF0Y2ggdGhlIHRhcmdldCBiZWZvcmUgaXQgc2VuZHMgdGhlIG5leHQgZ2xvYmFsIHNuYXBzaG90LlxuICAgICAgICAgICAgICAgIHRoaXMuZnQoZSksIG4uVyh0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBMKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICB0LnRhcmdldElkcy5sZW5ndGggPiAwID8gdC50YXJnZXRJZHMuZm9yRWFjaChlKSA6IHRoaXMubnQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMubHQobikgJiYgZShuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgZHQodCkge1xuICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZCwgbiA9IHQuTy5jb3VudCwgcyA9IHRoaXMud3QoZSk7XG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoWHQodCkpIGlmICgwID09PSBuKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0ZW5jZSBmaWx0ZXIgdG9sZCB1cyB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QuIFdlIGRlZHVjZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhbmQgYXBwbHkgYSBkZWxldGVkIGRvY3VtZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gb3VyIHVwZGF0ZXMuIFdpdGhvdXQgYXBwbHlpbmcgdGhpcyBkZWxldGVkIGRvY3VtZW50IHRoZXJlIG1pZ2h0IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5vdGhlciBxdWVyeSB0aGF0IHdpbGwgcmFpc2UgdGhpcyBkb2N1bWVudCBhcyBwYXJ0IG9mIGEgc25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyByZXNvbHZlZCwgZXNzZW50aWFsbHkgZXhwb3NpbmcgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgLy8gcXVlcmllcy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IFN0KHQucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdChlLCBuLCBXdC5uZXdOb0RvY3VtZW50KG4sIGN0Lm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgQigxID09PSBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdChlKSAhPT0gbiAmJiAoXG4gICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaDogV2UgcmVzZXQgdGhlIG1hcHBpbmcgYW5kIHJhaXNlIGEgbmV3XG4gICAgICAgICAgICAgICAgLy8gc25hcHNob3Qgd2l0aCBgaXNGcm9tQ2FjaGU6dHJ1ZWAuXG4gICAgICAgICAgICAgICAgdGhpcy5mdChlKSwgdGhpcy5ydCA9IHRoaXMucnQuYWRkKGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudGx5IGFjY3VtdWxhdGVkIHN0YXRlIGludG8gYSByZW1vdGUgZXZlbnQgYXQgdGhlXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICovICAgIGd0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMubnQuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnd0KHMpO1xuICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICBpZiAobi5jdXJyZW50ICYmIFh0KGkudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb2N1bWVudCBxdWVyaWVzIGZvciBkb2N1bWVudCB0aGF0IGRvbid0IGV4aXN0IGNhbiBwcm9kdWNlIGFuIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgaWYgd2UgaGF2ZSBub3QgcHJldmlvdXNseSByZWNlaXZlZCB0aGUgZG9jdW1lbnQuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXQgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBTdChpLnRhcmdldC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdGhpcy5zdC5nZXQoZSkgfHwgdGhpcy55dChzLCBlKSB8fCB0aGlzLmN0KHMsIGUsIFd0Lm5ld05vRG9jdW1lbnQoZSwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLmogJiYgKGUuc2V0KHMsIG4uRygpKSwgbi5IKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gU24oKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy5pdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgIGUuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy53dCh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWUgfHwgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gPT09IGUucHVycG9zZSB8fCAocyA9ICExLCAhMSk7XG4gICAgICAgICAgICB9KSksIHMgJiYgKG4gPSBuLmFkZCh0KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBObih0LCBlLCB0aGlzLnJ0LCB0aGlzLnN0LCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3QgPSBBbigpLCB0aGlzLml0ID0gTG4oKSwgdGhpcy5ydCA9IG5ldyBUbihpdCksIHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICogaXRzIGRvY3VtZW50IGtleSB0byB0aGUgZ2l2ZW4gdGFyZ2V0J3MgbWFwcGluZy5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGF0KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmx0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnl0KHQsIGUua2V5KSA/IDIgLyogTW9kaWZpZWQgKi8gOiAwIC8qIEFkZGVkICovO1xuICAgICAgICB0aGlzLmh0KHQpLkooZS5rZXksIG4pLCB0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQoZS5rZXksIGUpLCB0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQoZS5rZXksIHRoaXMuVHQoZS5rZXkpLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGN0KHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmx0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmh0KHQpO1xuICAgICAgICB0aGlzLnl0KHQsIGUpID8gcy5KKGUsIDEgLyogUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICBzLlkoZSksIHRoaXMuaXQgPSB0aGlzLml0Lmluc2VydChlLCB0aGlzLlR0KGUpLmRlbGV0ZSh0KSksIG4gJiYgKHRoaXMuc3QgPSB0aGlzLnN0Lmluc2VydChlLCBuKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMubnQuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgdGFyZ2V0LiBUaGlzIGluY2x1ZGVzIGJvdGhcbiAgICAgKiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHRhcmdldCBhcyB3ZWxsIGFzIGFueSBhY2N1bXVsYXRlZCBjaGFuZ2VzLlxuICAgICAqLyAgICBfdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmh0KHQpLkcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplICsgZS5hZGRlZERvY3VtZW50cy5zaXplIC0gZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBYKHQpIHtcbiAgICAgICAgdGhpcy5odCh0KS5YKCk7XG4gICAgfVxuICAgIGh0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm50LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgT24sIHRoaXMubnQuc2V0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgVHQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuaXQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBUbihpdCksIHRoaXMuaXQgPSB0aGlzLml0Lmluc2VydCh0LCBlKSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIHVzZXIgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldCAoYnkgY2FsbGluZ1xuICAgICAqIGBnZXRUYXJnZXREYXRhRm9yVGFyZ2V0KClgKSBhbmQgdGhhdCB3ZSBhcmUgbm90IHdhaXRpbmcgZm9yIHBlbmRpbmcgQUREc1xuICAgICAqIGZyb20gd2F0Y2guXG4gICAgICovICAgIGx0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG51bGwgIT09IHRoaXMud3QodCk7XG4gICAgICAgIHJldHVybiBlIHx8ICQoXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgdCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgZm9yIGFuIGFjdGl2ZSB0YXJnZXQgKGkuZS4gYSB0YXJnZXQgdGhhdCB0aGUgdXNlclxuICAgICAqIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhhdCBoYXMgbm8gb3V0c3RhbmRpbmcgdGFyZ2V0IGNoYW5nZSByZXF1ZXN0cykuXG4gICAgICovICAgIHd0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubnQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSAmJiBlLksgPyBudWxsIDogdGhpcy5ldC5FdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBmdCh0KSB7XG4gICAgICAgIHRoaXMubnQuc2V0KHQsIG5ldyBPbik7XG4gICAgICAgIHRoaXMuZXQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3QodCwgZSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICB5dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuaGFzKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTG4oKSB7XG4gICAgcmV0dXJuIG5ldyBnbihTdC5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gQm4oKSB7XG4gICAgcmV0dXJuIG5ldyBnbihTdC5jb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgVW4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgcW4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBnZW5lcmF0ZXMgSnNvbk9iamVjdCB2YWx1ZXMgZm9yIHRoZSBEYXRhc3RvcmUgQVBJIHN1aXRhYmxlIGZvclxuICogc2VuZGluZyB0byBlaXRoZXIgR1JQQyBzdHViIG1ldGhvZHMgb3IgdmlhIHRoZSBKU09OL0hUVFAgUkVTVCBBUEkuXG4gKlxuICogVGhlIHNlcmlhbGl6ZXIgc3VwcG9ydHMgYm90aCBQcm90b2J1Zi5qcyBhbmQgUHJvdG8zIEpTT04gZm9ybWF0cy4gQnlcbiAqIHNldHRpbmcgYHVzZVByb3RvM0pzb25gIHRvIHRydWUsIHRoZSBzZXJpYWxpemVyIHdpbGwgdXNlIHRoZSBQcm90bzMgSlNPTlxuICogZm9ybWF0LlxuICpcbiAqIEZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBQcm90bzMgSlNPTiBmb3JtYXQgY2hlY2tcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3Byb3RvY29sLWJ1ZmZlcnMvZG9jcy9wcm90bzMjanNvblxuICpcbiAqIFRPRE8oa2xpbXQpOiBXZSBjYW4gcmVtb3ZlIHRoZSBkYXRhYmFzZUlkIGFyZ3VtZW50IGlmIHdlIGtlZXAgdGhlIGZ1bGxcbiAqIHJlc291cmNlIG5hbWUgaW4gZG9jdW1lbnRzLlxuICovXG5jbGFzcyBLbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLkMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gam4odCwgZSkge1xuICAgIGlmICh0LkMpIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIGUuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyBlLm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBRbih0LCBlKSB7XG4gICAgcmV0dXJuIHQuQyA/IGUudG9CYXNlNjQoKSA6IGUudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBXbih0LCBlKSB7XG4gICAgcmV0dXJuIGpuKHQsIGUudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIEduKHQpIHtcbiAgICByZXR1cm4gQighIXQpLCBjdC5mcm9tVGltZXN0YW1wKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFR0KHQpO1xuICAgICAgICByZXR1cm4gbmV3IGF0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfSh0KSk7XG59XG5cbmZ1bmN0aW9uIHpuKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGR0KFsgXCJwcm9qZWN0c1wiLCB0LnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZSBdKTtcbiAgICB9KHQpLmNoaWxkKFwiZG9jdW1lbnRzXCIpLmNoaWxkKGUpLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBIbih0KSB7XG4gICAgY29uc3QgZSA9IGR0LmZyb21TdHJpbmcodCk7XG4gICAgcmV0dXJuIEIoQXMoZSkpLCBlO1xufVxuXG5mdW5jdGlvbiBKbih0LCBlKSB7XG4gICAgcmV0dXJuIHpuKHQuZGF0YWJhc2VJZCwgZS5wYXRoKTtcbn1cblxuZnVuY3Rpb24gWW4odCwgZSkge1xuICAgIGNvbnN0IG4gPSBIbihlKTtcbiAgICBpZiAobi5nZXQoMSkgIT09IHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyBTdChlcyhuKSk7XG59XG5cbmZ1bmN0aW9uIFhuKHQsIGUpIHtcbiAgICByZXR1cm4gem4odC5kYXRhYmFzZUlkLCBlKTtcbn1cblxuZnVuY3Rpb24gWm4odCkge1xuICAgIGNvbnN0IGUgPSBIbih0KTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IGUubGVuZ3RoID8gZHQuZW1wdHlQYXRoKCkgOiBlcyhlKTtcbn1cblxuZnVuY3Rpb24gdHModCkge1xuICAgIHJldHVybiBuZXcgZHQoWyBcInByb2plY3RzXCIsIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSBdKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gZXModCkge1xuICAgIHJldHVybiBCKHQubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSB0LmdldCg0KSksIHQucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gbnModCwgZSwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IEpuKHQsIGUpLFxuICAgICAgICBmaWVsZHM6IG4udmFsdWUubWFwVmFsdWUuZmllbGRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gc3ModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBZbih0LCBlLm5hbWUpLCBpID0gR24oZS51cGRhdGVUaW1lKSwgciA9IG5ldyBqdCh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgbyA9IFd0Lm5ld0ZvdW5kRG9jdW1lbnQocywgaSwgcik7XG4gICAgcmV0dXJuIG4gJiYgby5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSwgbiA/IG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkgOiBvO1xufVxuXG5mdW5jdGlvbiBpcyh0LCBlKSB7XG4gICAgcmV0dXJuIFwiZm91bmRcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBCKCEhZS5mb3VuZCksIGUuZm91bmQubmFtZSwgZS5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gWW4odCwgZS5mb3VuZC5uYW1lKSwgcyA9IEduKGUuZm91bmQudXBkYXRlVGltZSksIGkgPSBuZXcganQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gV3QubmV3Rm91bmREb2N1bWVudChuLCBzLCBpKTtcbiAgICB9KHQsIGUpIDogXCJtaXNzaW5nXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgQighIWUubWlzc2luZyksIEIoISFlLnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IFluKHQsIGUubWlzc2luZyksIHMgPSBHbihlLnJlYWRUaW1lKTtcbiAgICAgICAgcmV0dXJuIFd0Lm5ld05vRG9jdW1lbnQobiwgcyk7XG4gICAgfSh0LCBlKSA6IEwoKTtcbn1cblxuZnVuY3Rpb24gcnModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChcInRhcmdldENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xuICAgICAgICAvLyBpZiB1bnNldFxuICAgICAgICBjb25zdCBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9fQ0hBTkdFXCIgPT09IHQgPyAwIC8qIE5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gdCA/IDEgLyogQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSB0ID8gMiAvKiBSZW1vdmVkICovIDogXCJDVVJSRU5UXCIgPT09IHQgPyAzIC8qIEN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IHQgPyA0IC8qIFJlc2V0ICovIDogTCgpO1xuICAgICAgICB9KGUudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSBlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5DID8gKEIodm9pZCAwID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCB5dC5mcm9tQmFzZTY0U3RyaW5nKGUgfHwgXCJcIikpIDogKEIodm9pZCAwID09PSBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICB5dC5mcm9tVWludDhBcnJheShlIHx8IG5ldyBVaW50OEFycmF5KSk7XG4gICAgICAgIH0odCwgZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pLCBvID0gZS50YXJnZXRDaGFuZ2UuY2F1c2UsIGEgPSBvICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgPT09IHQuY29kZSA/IEsuVU5LTk9XTiA6IG1uKHQuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGooZSwgdC5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovIChvKTtcbiAgICAgICAgbiA9IG5ldyBGbihzLCBpLCByLCBhIHx8IG51bGwpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIHMuZG9jdW1lbnQsIHMuZG9jdW1lbnQubmFtZSwgcy5kb2N1bWVudC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBpID0gWW4odCwgcy5kb2N1bWVudC5uYW1lKSwgciA9IEduKHMuZG9jdW1lbnQudXBkYXRlVGltZSksIG8gPSBuZXcganQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHMuZG9jdW1lbnQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBhID0gV3QubmV3Rm91bmREb2N1bWVudChpLCByLCBvKSwgYyA9IHMudGFyZ2V0SWRzIHx8IFtdLCB1ID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IHhuKGMsIHUsIGEua2V5LCBhKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnREZWxldGVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gWW4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlYWRUaW1lID8gR24ocy5yZWFkVGltZSkgOiBjdC5taW4oKSwgbyA9IFd0Lm5ld05vRG9jdW1lbnQoaSwgciksIGEgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgeG4oW10sIGEsIG8ua2V5LCBvKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRSZW1vdmVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gWW4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgeG4oW10sIHIsIGksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiZmlsdGVyXCIgaW4gZSkpIHJldHVybiBMKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGUuZmlsdGVyO1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVyO1xuICAgICAgICAgICAgdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmNvdW50IHx8IDAsIGkgPSBuZXcgZm4ocyksIHIgPSB0LnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyAkbihyLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gb3ModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlIGluc3RhbmNlb2Ygcm4pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogbnModCwgZS5rZXksIGUudmFsdWUpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIGhuKSBuID0ge1xuICAgICAgICBkZWxldGU6IEpuKHQsIGUua2V5KVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBvbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBucyh0LCBlLmtleSwgZS5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogSXMoZS5maWVsZE1hc2spXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBsbikpIHJldHVybiBMKCk7XG4gICAgICAgIG4gPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IEpuKHQsIGUua2V5KVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZS5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID4gMCAmJiAobi51cGRhdGVUcmFuc2Zvcm1zID0gZS5maWVsZFRyYW5zZm9ybXMubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudHJhbnNmb3JtO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIExlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIEJlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgcWUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICByZW1vdmVBbGxGcm9tQXJyYXk6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBqZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGluY3JlbWVudDogbi5OXG4gICAgICAgIH07XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9KDAsIHQpKSkpLCBlLnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBXbih0LCBlLnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IGUuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiBlLmV4aXN0c1xuICAgICAgICB9IDogTCgpO1xuICAgIH0odCwgZS5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gYXModCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmN1cnJlbnREb2N1bWVudCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gSmUudXBkYXRlVGltZShHbih0LnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyBKZS5leGlzdHModC5leGlzdHMpIDogSmUubm9uZSgpO1xuICAgIH0oZS5jdXJyZW50RG9jdW1lbnQpIDogSmUubm9uZSgpLCBzID0gZS51cGRhdGVUcmFuc2Zvcm1zID8gZS51cGRhdGVUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIGUpIEIoXCJSRVFVRVNUX1RJTUVcIiA9PT0gZS5zZXRUb1NlcnZlclZhbHVlKSwgbiA9IG5ldyBMZTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBCZSh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IHFlKHQpO1xuICAgICAgICB9IGVsc2UgXCJpbmNyZW1lbnRcIiBpbiBlID8gbiA9IG5ldyBqZSh0LCBlLmluY3JlbWVudCkgOiBMKCk7XG4gICAgICAgIGNvbnN0IHMgPSBfdC5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBHZShzLCBuKTtcbiAgICB9KHQsIGUpKSkgOiBbXTtcbiAgICBpZiAoZS51cGRhdGUpIHtcbiAgICAgICAgZS51cGRhdGUubmFtZTtcbiAgICAgICAgY29uc3QgaSA9IFluKHQsIGUudXBkYXRlLm5hbWUpLCByID0gbmV3IGp0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLnVwZGF0ZS5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlLnVwZGF0ZU1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZmllbGRQYXRocyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IG10KGUubWFwKCh0ID0+IF90LmZyb21TZXJ2ZXJGb3JtYXQodCkpKSk7XG4gICAgICAgICAgICB9KGUudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG9uKGksIHIsIHQsIG4sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgcm4oaSwgciwgbiwgcyk7XG4gICAgfVxuICAgIGlmIChlLmRlbGV0ZSkge1xuICAgICAgICBjb25zdCBzID0gWW4odCwgZS5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IGhuKHMsIG4pO1xuICAgIH1cbiAgICBpZiAoZS52ZXJpZnkpIHtcbiAgICAgICAgY29uc3QgcyA9IFluKHQsIGUudmVyaWZ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBsbihzLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuZnVuY3Rpb24gY3ModCwgZSkge1xuICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID4gMCA/IChCKHZvaWQgMCAhPT0gZSksIHQubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gdC51cGRhdGVUaW1lID8gR24odC51cGRhdGVUaW1lKSA6IEduKGUpO1xuICAgICAgICByZXR1cm4gbi5pc0VxdWFsKGN0Lm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gR24oZSkpLCBuZXcgSGUobiwgdC50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KHQsIGUpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIHVzKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb2N1bWVudHM6IFsgWG4odCwgZS5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaHModCwgZSkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHMgPSBlLnBhdGg7XG4gICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBYbih0LCBzKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gWG4odCwgcy5wb3BMYXN0KCkpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogcy5sYXN0U2VnbWVudCgpXG4gICAgfSBdKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmIChcIj09XCIgLyogRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoVXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogeXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoQnQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogeXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoVXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogeXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKEJ0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHlzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHlzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogZ3ModC5vcCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBlWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IFwiQU5EXCIsXG4gICAgICAgICAgICAgICAgZmlsdGVyczogZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0oZS5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZDogeXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBtcyh0LmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICB9KGUub3JkZXJCeSk7XG4gICAgciAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHIpO1xuICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LkMgfHwgYnQoZSkgPyBlIDoge1xuICAgICAgICAgICAgdmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi8gKHQsIGUubGltaXQpO1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCBlLnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSB3cyhlLnN0YXJ0QXQpKSwgXG4gICAgZS5lbmRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSB3cyhlLmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIGxzKHQpIHtcbiAgICBsZXQgZSA9IFpuKHQucGFyZW50KTtcbiAgICBjb25zdCBuID0gdC5zdHJ1Y3R1cmVkUXVlcnksIHMgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHMgPiAwKSB7XG4gICAgICAgIEIoMSA9PT0gcyk7XG4gICAgICAgIGNvbnN0IHQgPSBuLmZyb21bMF07XG4gICAgICAgIHQuYWxsRGVzY2VuZGFudHMgPyBpID0gdC5jb2xsZWN0aW9uSWQgOiBlID0gZS5jaGlsZCh0LmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCByID0gW107XG4gICAgbi53aGVyZSAmJiAociA9IGRzKG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IG4ub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGxlKHBzKHQuZmllbGQpLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgKHQuZGlyZWN0aW9uKSk7XG4gICAgfSh0KSkpKTtcbiAgICBsZXQgYSA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAoYSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHJldHVybiBlID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiB0LCBidChlKSA/IG51bGwgOiBlO1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBjID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGMgPSBfcyhuLnN0YXJ0QXQpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKHUgPSBfcyhuLmVuZEF0KSksIG1lKGUsIGksIG8sIHIsIGEsIFwiRlwiIC8qIEZpcnN0ICovICwgYywgdSk7XG59XG5cbmZ1bmN0aW9uIGZzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfSgwLCBlLnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGRzKHQpIHtcbiAgICByZXR1cm4gdCA/IHZvaWQgMCAhPT0gdC51bmFyeUZpbHRlciA/IFsgRXModCkgXSA6IHZvaWQgMCAhPT0gdC5maWVsZEZpbHRlciA/IFsgVHModCkgXSA6IHZvaWQgMCAhPT0gdC5jb21wb3NpdGVGaWx0ZXIgPyB0LmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgodCA9PiBkcyh0KSkpLnJlZHVjZSgoKHQsIGUpID0+IHQuY29uY2F0KGUpKSkgOiBMKCkgOiBbXTtcbn1cblxuZnVuY3Rpb24gd3ModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGJlZm9yZTogdC5iZWZvcmUsXG4gICAgICAgIHZhbHVlczogdC5wb3NpdGlvblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9zKHQpIHtcbiAgICBjb25zdCBlID0gISF0LmJlZm9yZSwgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgIHJldHVybiBuZXcgdWUobiwgZSk7XG59XG5cbi8vIHZpc2libGUgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIG1zKHQpIHtcbiAgICByZXR1cm4gVW5bdF07XG59XG5cbmZ1bmN0aW9uIGdzKHQpIHtcbiAgICByZXR1cm4gcW5bdF07XG59XG5cbmZ1bmN0aW9uIHlzKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IHQuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBwcyh0KSB7XG4gICAgcmV0dXJuIF90LmZyb21TZXJ2ZXJGb3JtYXQodC5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBUcyh0KSB7XG4gICAgcmV0dXJuIFp0LmNyZWF0ZShwcyh0LmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE5PVF9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxcIiAvKiBMRVNTX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgIGNhc2UgXCJJTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU19BTllcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfSh0LmZpZWxkRmlsdGVyLm9wKSwgdC5maWVsZEZpbHRlci52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIEVzKHQpIHtcbiAgICBzd2l0Y2ggKHQudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgIGNhc2UgXCJJU19OQU5cIjpcbiAgICAgICAgY29uc3QgZSA9IHBzKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gWnQuY3JlYXRlKGUsIFwiPT1cIiAvKiBFUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgIGNvbnN0IG4gPSBwcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIFp0LmNyZWF0ZShuLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05BTlwiOlxuICAgICAgICBjb25zdCBzID0gcHModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBadC5jcmVhdGUocywgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OT1RfTlVMTFwiOlxuICAgICAgICBjb25zdCBpID0gcHModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBadC5jcmVhdGUoaSwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBJcyh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiB0LmZpZWxkcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0LmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBBcyh0KSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiB0Lmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gdC5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gdC5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cbiAqL1xuZnVuY3Rpb24gUnModCkge1xuICAgIGxldCBlID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGUubGVuZ3RoID4gMCAmJiAoZSA9IGJzKGUpKSwgZSA9IFBzKHQuZ2V0KG4pLCBlKTtcbiAgICByZXR1cm4gYnMoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBQcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBlO1xuICAgIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHM7IGUrKykge1xuICAgICAgICBjb25zdCBzID0gdC5jaGFyQXQoZSk7XG4gICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgIGNhc2UgXCJcXDBcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMVwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiArPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBicyh0KSB7XG4gICAgcmV0dXJuIHQgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gdnModCkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKEIoZSA+PSAyKSwgMiA9PT0gZSkgcmV0dXJuIEIoXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMCkgJiYgXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMSkpLCBkdC5lbXB0eVBhdGgoKTtcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gc291cmNlIHZhbHVlLlxuICAgICAgICBjb25zdCBuID0gZSAtIDIsIHMgPSBbXTtcbiAgICBsZXQgaSA9IFwiXCI7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBlOyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCBlID0gdC5pbmRleE9mKFwiXHUwMDAxXCIsIHIpO1xuICAgICAgICAoZSA8IDAgfHwgZSA+IG4pICYmIEwoKTtcbiAgICAgICAgc3dpdGNoICh0LmNoYXJBdChlICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zdWJzdHJpbmcociwgZSk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IGkubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSBuIDogKGkgKz0gbiwgbyA9IGksIGkgPSBcIlwiKSwgcy5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUpLCBpICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIGkgKz0gdC5zdWJzdHJpbmcociwgZSArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgTCgpO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBlICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBkdChzKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICovXG4vKipcbiAqIFdyYXBwZXIgY2xhc3MgdG8gc3RvcmUgdGltZXN0YW1wcyAoc2Vjb25kcyBhbmQgbmFub3MpIGluIEluZGV4ZWREYiBvYmplY3RzLlxuICovXG5jbGFzcyBWcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzaW5nbGV0b24gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ293bmVyJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogQSBnaXZlbiBkYXRhYmFzZSBjYW4gaGF2ZSBhIHNpbmdsZSBwcmltYXJ5IHRhYiBhc3NpZ25lZCBhdCBhIGdpdmVuIHRpbWUuIFRoYXRcbiAqIHRhYiBtdXN0IHZhbGlkYXRlIHRoYXQgaXQgaXMgc3RpbGwgaG9sZGluZyB0aGUgcHJpbWFyeSBsZWFzZSBiZWZvcmUgZXZlcnlcbiAqIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIGxvY2tlZCBhY2Nlc3MuIFRoZSBwcmltYXJ5IHRhYiBzaG91bGQgcmVndWxhcmx5XG4gKiB3cml0ZSBhbiB1cGRhdGVkIHRpbWVzdGFtcCB0byB0aGlzIGxlYXNlIHRvIHByZXZlbnQgb3RoZXIgdGFicyBmcm9tXG4gKiBcInN0ZWFsaW5nXCIgdGhlIHByaW1hcnkgbGVhc2VcbiAqLyBjbGFzcyBTcyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIFdoZXRoZXIgdG8gYWxsb3cgc2hhcmVkIGFjY2VzcyBmcm9tIG11bHRpcGxlIHRhYnMuICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLm93bmVySWQgPSB0LCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZSwgdGhpcy5sZWFzZVRpbWVzdGFtcE1zID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovIFNzLnN0b3JlID0gXCJvd25lclwiLCBcbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlByaW1hcnlDbGllbnQgc3RvcmUuXG4gKi9cblNzLmtleSA9IFwib3duZXJcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25RdWV1ZXMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBFYWNoIHVzZXIgZ2V0cyBhIHNpbmdsZSBxdWV1ZSBvZiBNdXRhdGlvbkJhdGNoZXMgdG8gYXBwbHkgdG8gdGhlIHNlcnZlci5cbiAqIERiTXV0YXRpb25RdWV1ZSB0cmFja3MgdGhlIG1ldGFkYXRhIGFib3V0IHRoZSBxdWV1ZS5cbiAqL1xuY2xhc3MgRHMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBxdWV1ZSBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBoaWdoZXN0IG51bWJlcmVkIGJhdGNoIHRoYXQgaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gICAgICogYnkgdGhlIHNlcnZlci4gQWxsIE11dGF0aW9uQmF0Y2hlcyBpbiB0aGlzIHF1ZXVlIHdpdGggYmF0Y2hJZHMgbGVzc1xuICAgICAqIHRoYW4gb3IgZXF1YWwgdG8gdGhpcyB2YWx1ZSBhcmUgY29uc2lkZXJlZCB0byBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIGJ5XG4gICAgICogdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIE5PVEU6IHRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGNvZGUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzdHJlYW0gdG9rZW4gdGhhdCB3YXMgcHJldmlvdXNseSBzZW50IGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBTZWUgU3RyZWFtaW5nV3JpdGVSZXF1ZXN0IGluIGRhdGFzdG9yZS5wcm90byBmb3IgbW9yZSBkZXRhaWxzIGFib3V0XG4gICAgICogdXNhZ2UuXG4gICAgICpcbiAgICAgKiBBZnRlciBzZW5kaW5nIHRoaXMgdG9rZW4sIGVhcmxpZXIgdG9rZW5zIG1heSBub3QgYmUgdXNlZCBhbnltb3JlIHNvXG4gICAgICogb25seSBhIHNpbmdsZSBzdHJlYW0gdG9rZW4gaXMgcmV0YWluZWQuXG4gICAgICpcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkID0gZSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyBEcy5zdG9yZSA9IFwibXV0YXRpb25RdWV1ZXNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCBwcm9wZXJ0eS4gKi9cbkRzLmtleVBhdGggPSBcInVzZXJJZFwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBSZXByZXNlbnRzIGEgYmF0Y2ggb2YgdXNlci1sZXZlbCBtdXRhdGlvbnMgaW50ZW5kZWQgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gKiBpbiBhIHNpbmdsZSB3cml0ZS4gRWFjaCB1c2VyLWxldmVsIGJhdGNoIGdldHMgYSBzZXBhcmF0ZSBEYk11dGF0aW9uQmF0Y2hcbiAqIHdpdGggYSBuZXcgYmF0Y2hJZC5cbiAqL1xuY2xhc3MgQ3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBiYXRjaCBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoaXMgYmF0Y2gsIGFsbG9jYXRlZCB1c2luZyBhbiBhdXRvLWdlbmVyYXRlZCBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlIGJhdGNoLCBzdG9yZWQgYXMgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZVxuICAgICAqIGVwb2NoLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBcIm11dGF0aW9uc1wiIHRoYXQgcmVwcmVzZW50IGEgcGFydGlhbCBiYXNlIHN0YXRlIGZyb20gd2hlbiB0aGlzXG4gICAgICogd3JpdGUgYmF0Y2ggd2FzIGluaXRpYWxseSBjcmVhdGVkLiBEdXJpbmcgbG9jYWwgYXBwbGljYXRpb24gb2YgdGhlIHdyaXRlXG4gICAgICogYmF0Y2gsIHRoZXNlIGJhc2VNdXRhdGlvbnMgYXJlIGFwcGxpZWQgcHJpb3IgdG8gdGhlIHJlYWwgd3JpdGVzIGluIG9yZGVyXG4gICAgICogdG8gb3ZlcnJpZGUgY2VydGFpbiBkb2N1bWVudCBmaWVsZHMgZnJvbSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBUaGlzXG4gICAgICogaXMgbmVjZXNzYXJ5IGluIHRoZSBjYXNlIG9mIG5vbi1pZGVtcG90ZW50IHdyaXRlcyAoZS5nLiBgaW5jcmVtZW50KClgXG4gICAgICogdHJhbnNmb3JtcykgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIG1vZGlmaWVkIGRvY3VtZW50c1xuICAgICAqIGRvZXNuJ3QgZmxpY2tlciBpZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHJlY2VpdmVzIHRoZSByZXN1bHQgb2YgdGhlXG4gICAgICogbm9uLWlkZW1wb3RlbnQgd3JpdGUgYmVmb3JlIHRoZSB3cml0ZSBpcyByZW1vdmVkIGZyb20gdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogVGhlc2UgbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBtdXRhdGlvbnMgdG8gYXBwbHkuIEFsbCBtdXRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIGF0b21pY2FsbHkuXG4gICAgICpcbiAgICAgKiBNdXRhdGlvbnMgYXJlIHNlcmlhbGl6ZWQgdmlhIHRvTXV0YXRpb24oKS5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5sb2NhbFdyaXRlVGltZU1zID0gbiwgdGhpcy5iYXNlTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gaTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gQ3Muc3RvcmUgPSBcIm11dGF0aW9uc1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkLCBiYXRjaElkIHByb3BlcnRpZXMuICovXG5Dcy5rZXlQYXRoID0gXCJiYXRjaElkXCIsIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciBsb29rdXAgb2YgbXV0YXRpb25zIGJ5IHVzZXIuICovXG5Dcy51c2VyTXV0YXRpb25zSW5kZXggPSBcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBcbi8qKiBUaGUgdXNlciBtdXRhdGlvbnMgaW5kZXggaXMga2V5ZWQgYnkgW3VzZXJJZCwgYmF0Y2hJZF0gcGFpcnMuICovXG5Dcy51c2VyTXV0YXRpb25zS2V5UGF0aCA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnZG9jdW1lbnRNdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBBIG1hbnVhbGx5IG1haW50YWluZWQgaW5kZXggb2YgYWxsIHRoZSBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgYWZmZWN0IGEgZ2l2ZW5cbiAqIGRvY3VtZW50IGtleS4gVGhlIHJvd3MgaW4gdGhpcyB0YWJsZSBhcmUgcmVmZXJlbmNlcyBiYXNlZCBvbiB0aGUgY29udGVudHMgb2ZcbiAqIERiTXV0YXRpb25CYXRjaC5tdXRhdGlvbnMuXG4gKi9cbmNsYXNzIE5zIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcbiAgICAgKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBwcmVmaXhGb3JVc2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIFsgdCBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gICAgICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAgICAgKi8gICAgc3RhdGljIHByZWZpeEZvclBhdGgodCwgZSkge1xuICAgICAgICByZXR1cm4gWyB0LCBScyhlKSBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAgICAgKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAgICAgKi8gICAgc3RhdGljIGtleSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBbIHQsIFJzKGUpLCBuIF07XG4gICAgfVxufVxuXG5Ocy5zdG9yZSA9IFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi9cbk5zLlBMQUNFSE9MREVSID0gbmV3IE5zO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGtub3duIGFic2VuY2Ugb2YgYSBkb2N1bWVudCBhdCBhIHBhcnRpY3VsYXIgdmVyc2lvbi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovXG5jbGFzcyBrcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLnJlYWRUaW1lID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYnV0IHdob3NlIGRhdGEgaXMgdW5rbm93bi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovIGNsYXNzIHhzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMudmVyc2lvbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdyZW1vdGVEb2N1bWVudHMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyOlxuICpcbiAqIC0gQSBjb21wbGV0ZSBkb2N1bWVudC5cbiAqIC0gQSBcIm5vIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biBub3QgdG8gZXhpc3QgKGF0XG4gKiBzb21lIHZlcnNpb24pLlxuICogLSBBbiBcInVua25vd24gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IChhdFxuICogc29tZSB2ZXJzaW9uKSBidXQgd2hvc2UgY29udGVudHMgYXJlIHVua25vd24uXG4gKlxuICogTm90ZTogVGhpcyBpcyB0aGUgcGVyc2lzdGVkIGVxdWl2YWxlbnQgb2YgYSBNYXliZURvY3VtZW50IGFuZCBjb3VsZCBwZXJoYXBzXG4gKiBiZSBtYWRlIG1vcmUgZ2VuZXJhbCBpZiBuZWNlc3NhcnkuXG4gKi8gY2xhc3MgJHMge1xuICAgIC8vIFRPRE86IFdlIGFyZSBjdXJyZW50bHkgc3RvcmluZyBmdWxsIGRvY3VtZW50IGtleXMgYWxtb3N0IHRocmVlIHRpbWVzXG4gICAgLy8gKG9uY2UgYXMgcGFydCBvZiB0aGUgcHJpbWFyeSBrZXksIG9uY2UgLSBwYXJ0bHkgLSBhcyBgcGFyZW50UGF0aGAgYW5kIG9uY2VcbiAgICAvLyBpbnNpZGUgdGhlIGVuY29kZWQgZG9jdW1lbnRzKS4gRHVyaW5nIG91ciBuZXh0IG1pZ3JhdGlvbiwgd2Ugc2hvdWxkXG4gICAgLy8gcmV3cml0ZSB0aGUgcHJpbWFyeSBrZXkgYXMgcGFyZW50UGF0aCArIGRvY3VtZW50IElEIHdoaWNoIHdvdWxkIGFsbG93IHVzXG4gICAgLy8gdG8gZHJvcCBvbmUgdmFsdWUuXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIERiVW5rbm93bkRvY3VtZW50IGlmIHRoZSBkYXRhIGZvciBhIGRvY3VtZW50IGlzXG4gICAgICogbm90IGtub3duLCBidXQgaXQgaXMga25vd24gdGhhdCBhIGRvY3VtZW50IGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkXG4gICAgICogdmVyc2lvbiAoZS5nLiBpdCBoYWQgYSBzdWNjZXNzZnVsIHVwZGF0ZSBhcHBsaWVkIHRvIGl0KVxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERiTm9Eb2N1bWVudCBpZiBpdCBpcyBrbm93biB0aGF0IG5vIGRvY3VtZW50XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERvY3VtZW50IGlmIHRoZXJlJ3MgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGVcbiAgICAgKiBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBEb2N1bWVudHMgdGhhdCB3ZXJlIHdyaXR0ZW4gdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBzdG9yZSBiYXNlZCBvblxuICAgICAqIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgYXJlIG1hcmtlZCB3aXRoIGBoYXNDb21taXR0ZWRNdXRhdGlvbnNgLiBUaGVzZVxuICAgICAqIGRvY3VtZW50cyBhcmUgcG90ZW50aWFsbHkgaW5jb25zaXN0ZW50IHdpdGggdGhlIGJhY2tlbmQncyBjb3B5IGFuZCB1c2VcbiAgICAgKiB0aGUgd3JpdGUncyBjb21taXQgdmVyc2lvbiBhcyB0aGVpciBkb2N1bWVudCB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGRvY3VtZW50IHdhcyByZWFkIGZyb20gdGhlIGJhY2tlbmQuIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuXG4gICAgICogcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCBvZiB0aGUgY29sbGVjdGlvbiB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuIFVuZGVmaW5lZCBmb3IgZGF0YVxuICAgICAqIHdyaXR0ZW4gcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMudW5rbm93bkRvY3VtZW50ID0gdCwgdGhpcy5ub0RvY3VtZW50ID0gZSwgdGhpcy5kb2N1bWVudCA9IG4sIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSBpLCB0aGlzLnBhcmVudFBhdGggPSByO1xuICAgIH1cbn1cblxuJHMuc3RvcmUgPSBcInJlbW90ZURvY3VtZW50c1wiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gYWxsIGVudHJpZXMgc29ydGVkIGJ5IHJlYWQgdGltZSAod2hpY2hcbiAqIGNvcnJlc3BvbmRzIHRvIHRoZSBsYXN0IG1vZGlmaWNhdGlvbiB0aW1lIG9mIGVhY2ggcm93KS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gcHJvdmlkZSBhIGNoYW5nZWxvZyBmb3IgTXVsdGktVGFiLlxuICovXG4kcy5yZWFkVGltZUluZGV4ID0gXCJyZWFkVGltZUluZGV4XCIsICRzLnJlYWRUaW1lSW5kZXhQYXRoID0gXCJyZWFkVGltZVwiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbiBzb3J0ZWQgYnkgcmVhZFxuICogdGltZS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gYWxsb3cgdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgdG8gZmV0Y2ggbmV3bHkgY2hhbmdlZFxuICogZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbi5cbiAqL1xuJHMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXggPSBcImNvbGxlY3Rpb25SZWFkVGltZUluZGV4XCIsICRzLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCA9IFsgXCJwYXJlbnRQYXRoXCIsIFwicmVhZFRpbWVcIiBdO1xuXG4vKipcbiAqIENvbnRhaW5zIGEgc2luZ2xlIGVudHJ5IHRoYXQgaGFzIG1ldGFkYXRhIGFib3V0IHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gKi9cbmNsYXNzIEZzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYnl0ZVNpemUgLSBBcHByb3hpbWF0ZWx5IHRoZSB0b3RhbCBzaXplIGluIGJ5dGVzIG9mIGFsbCB0aGVcbiAgICAgKiBkb2N1bWVudHMgaW4gdGhlIGRvY3VtZW50IGNhY2hlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ieXRlU2l6ZSA9IHQ7XG4gICAgfVxufVxuXG5Gcy5zdG9yZSA9IFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiwgRnMua2V5ID0gXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICd0YXJnZXRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogVGhpcyBpcyBiYXNlZCBvbiBhbmQgc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1NcbiAqIGNsaWVudC5cbiAqXG4gKiBFYWNoIHF1ZXJ5IHRoZSBjbGllbnQgbGlzdGVucyB0byBhZ2FpbnN0IHRoZSBzZXJ2ZXIgaXMgdHJhY2tlZCBvbiBkaXNrIHNvXG4gKiB0aGF0IHRoZSBxdWVyeSBjYW4gYmUgZWZmaWNpZW50bHkgcmVzdW1lZCBvbiByZXN0YXJ0LlxuICovXG5jbGFzcyBPcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gYXV0by1nZW5lcmF0ZWQgc2VxdWVudGlhbCBudW1lcmljIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIFF1ZXJpZXMgYXJlIHN0b3JlZCB1c2luZyB0aGVpciBjYW5vbmljYWxJZCBhcyB0aGUga2V5LCBidXQgdGhlc2VcbiAgICAgKiBjYW5vbmljYWxJZHMgY2FuIGJlIHF1aXRlIGxvbmcgc28gd2UgYWRkaXRpb25hbGx5IGFzc2lnbiBhIHVuaXF1ZVxuICAgICAqIHF1ZXJ5SWQgd2hpY2ggY2FuIGJlIHVzZWQgYnkgcmVmZXJlbmNlZCBkYXRhIHN0cnVjdHVyZXMgKGUuZy5cbiAgICAgKiBpbmRleGVzKSB0byBtaW5pbWl6ZSB0aGUgb24tZGlzayBjb3N0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBjYW5vbmljYWwgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LiBUaGlzIGlzIG5vdCB1bmlxdWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVhZFRpbWUgcmVjZWl2ZWQgZnJvbSB0aGUgV2F0Y2ggU2VydmljZSBmb3IgdGhpcyBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlYWRfdGltZSBpbiB0aGUgcHJvdG9zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGFcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYVxuICAgICAqIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyByZWxhdGVkIHRvIHRoZSBzbmFwc2hvdFZlcnNpb24gaW4gdGhhdCB0aGUgcmVzdW1lVG9rZW5cbiAgICAgKiBlZmZlY3RpdmVseSBhbHNvIGVuY29kZXMgdGhhdCB2YWx1ZSwgYnV0IHRoZSByZXN1bWVUb2tlbiBpcyBvcGFxdWVcbiAgICAgKiBhbmQgc29tZXRpbWVzIGVuY29kZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0IHRoZSByZXN1bWVUb2tlbiBzaG91bGQgYmUgdXNlZCB3aGVuXG4gICAgICogYXNraW5nIHRoZSBzZXJ2ZXIgdG8gcmVhc29uIGFib3V0IHdoZXJlIHRoaXMgY2xpZW50IGlzIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSwgYnV0IHRoZSBjbGllbnQgc2hvdWxkIHVzZSB0aGUgc25hcHNob3RWZXJzaW9uIGZvciBpdHMgb3duXG4gICAgICogcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZXN1bWVfdG9rZW4gaW4gdGhlIHByb3Rvcy5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNlcXVlbmNlIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGxhc3QgdGltZSB0aGlzIHF1ZXJ5IHdhc1xuICAgICAqIGxpc3RlbmVkIHRvLCB1c2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBDb252ZW50aW9uYWxseSB0aGlzIHdvdWxkIGJlIGEgdGltZXN0YW1wIHZhbHVlLCBidXQgZGV2aWNlLWxvY2FsXG4gICAgICogY2xvY2tzIGFyZSB1bnJlbGlhYmxlIGFuZCB0aGV5IG11c3QgYmUgYWJsZSB0byBjcmVhdGUgbmV3IGxpc3RlbnNcbiAgICAgKiBldmVuIHdoaWxlIGRpc2Nvbm5lY3RlZC4gSW5zdGVhZCB0aGlzIHNob3VsZCBiZSBhIG1vbm90b25pY2FsbHlcbiAgICAgKiBpbmNyZWFzaW5nIG51bWJlciB0aGF0J3MgaW5jcmVtZW50ZWQgb24gZWFjaCBsaXN0ZW4gY2FsbC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHF1ZXJ5SWQgc2luY2UgdGhlIHF1ZXJ5SWQgaXMgYW5cbiAgICAgKiBpbW11dGFibGUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgUXVlcnkgb24gZmlyc3QgdXNlIHdoaWxlXG4gICAgICogbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIHVwZGF0ZWQgZXZlcnkgdGltZSB0aGUgcXVlcnkgaXNcbiAgICAgKiBsaXN0ZW5lZCB0by5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBEZW5vdGVzIHRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgcXVlcnkgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuICBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlbiBwcmlvciB0b1xuICAgICAqIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGZvciB0aGlzIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEJlY2F1c2UgY2Fub25pY2FsIGlkcyBhcmUgbm90IHVuaXF1ZSB3ZSBtdXN0IHN0b3JlIHRoZSBhY3R1YWwgcXVlcnkuIFdlXG4gICAgICogdXNlIHRoZSBwcm90byB0byBoYXZlIGFuIG9iamVjdCB3ZSBjYW4gcGVyc2lzdCB3aXRob3V0IGhhdmluZyB0b1xuICAgICAqIGR1cGxpY2F0ZSB0cmFuc2xhdGlvbiBsb2dpYyB0byBhbmQgZnJvbSBhIGBRdWVyeWAgb2JqZWN0LlxuICAgICAqL1xuICAgIG8pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuY2Fub25pY2FsSWQgPSBlLCB0aGlzLnJlYWRUaW1lID0gbiwgdGhpcy5yZXN1bWVUb2tlbiA9IHMsIFxuICAgICAgICB0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGksIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHIsIHRoaXMucXVlcnkgPSBvO1xuICAgIH1cbn1cblxuT3Muc3RvcmUgPSBcInRhcmdldHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkIHByb3BlcnR5LiAqL1xuT3Mua2V5UGF0aCA9IFwidGFyZ2V0SWRcIiwgXG4vKiogVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleC4gKi9cbk9zLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSA9IFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgXG4vKipcbiAqIFRoZSBpbmRleCBvZiBhbGwgY2Fub25pY2FsSWRzIHRvIHRoZSB0YXJnZXRzIHRoYXQgdGhleSBtYXRjaC4gVGhpcyBpcyBub3RcbiAqIGEgdW5pcXVlIG1hcHBpbmcgYmVjYXVzZSBjYW5vbmljYWxJZCBkb2VzIG5vdCBwcm9taXNlIGEgdW5pcXVlIG5hbWUgZm9yIGFsbFxuICogcG9zc2libGUgcXVlcmllcywgc28gd2UgYXBwZW5kIHRoZSB0YXJnZXRJZCB0byBtYWtlIHRoZSBtYXBwaW5nIHVuaXF1ZS5cbiAqL1xuT3MucXVlcnlUYXJnZXRzS2V5UGF0aCA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSB0YXJnZXQgYW5kIGEgZG9jdW1lbnQsIG9yIGFcbiAqIHNlbnRpbmVsIHJvdyBtYXJraW5nIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhdCB3aGljaCBhIGRvY3VtZW50IHdhcyB1c2VkLlxuICogRWFjaCBkb2N1bWVudCBjYWNoZWQgbXVzdCBoYXZlIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3cgYmVmb3JlIGxydVxuICogZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIGVuYWJsZWQuXG4gKlxuICogVGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgYW5kIHNlbnRpbmVsIHJvd3MgYXJlIGNvLWxvY2F0ZWQgc28gdGhhdCBvcnBoYW5lZFxuICogZG9jdW1lbnRzIGFuZCB0aGVpciBzZXF1ZW5jZSBudW1iZXJzIGNhbiBiZSBpZGVudGlmaWVkIGVmZmljaWVudGx5IHZpYSBhIHNjYW5cbiAqIG9mIHRoaXMgc3RvcmUuXG4gKi9cbmNsYXNzIE1zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0SWQgaWRlbnRpZnlpbmcgYSB0YXJnZXQgb3IgMCBmb3IgYSBzZW50aW5lbCByb3cuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIGRvY3VtZW50LCBhcyBlbmNvZGVkIGluIHRoZSBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogSWYgdGhpcyBpcyBhIHNlbnRpbmVsIHJvdywgdGhpcyBzaG91bGQgYmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdFxuICAgICAqIHRpbWUgdGhlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcGF0aGAgd2FzIHVzZWQuIE90aGVyd2lzZSwgaXQgc2hvdWxkIGJlXG4gICAgICogYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5wYXRoID0gZSwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovIE1zLnN0b3JlID0gXCJ0YXJnZXREb2N1bWVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkLCBwYXRoIHByb3BlcnRpZXMuICovXG5Ncy5rZXlQYXRoID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciB0aGUgcmV2ZXJzZSBpbmRleC4gKi9cbk1zLmRvY3VtZW50VGFyZ2V0c0luZGV4ID0gXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBcbi8qKiBXZSBhbHNvIG5lZWQgdG8gY3JlYXRlIHRoZSByZXZlcnNlIGluZGV4IGZvciB0aGVzZSBwcm9wZXJ0aWVzLiAqL1xuTXMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdO1xuXG4vKipcbiAqIEEgcmVjb3JkIG9mIGdsb2JhbCBzdGF0ZSB0cmFja2VkIGFjcm9zcyBhbGwgVGFyZ2V0cywgdHJhY2tlZCBzZXBhcmF0ZWx5XG4gKiB0byBhdm9pZCB0aGUgbmVlZCBmb3IgZXh0cmEgaW5kZXhlcy5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IGluLXN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TIGNsaWVudC5cbiAqL1xuY2xhc3MgTHMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBpZCBhY3Jvc3MgYWxsIHRhcmdldHMuXG4gICAgICpcbiAgICAgKiBTZWUgRGJUYXJnZXQudGFyZ2V0SWQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGFjcm9zcyBhbGwgdGFyZ2V0cy5cbiAgICAgKlxuICAgICAqIFNlZSBEYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBnbG9iYWwgc25hcHNob3QgdmVyc2lvbiByZXByZXNlbnRpbmcgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCB3ZVxuICAgICAqIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQuIFRoaXMgaXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGFuZCBhbnlcbiAgICAgKiBzbmFwc2hvdHMgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCBwcmlvciB0byB0aGlzIHZlcnNpb24gKGUuZy4gZm9yXG4gICAgICogdGFyZ2V0cyByZXN1bWVkIHdpdGggYSByZXN1bWVUb2tlbikgc2hvdWxkIGJlIHN1cHByZXNzZWQgKGJ1ZmZlcmVkKVxuICAgICAqIHVudGlsIHRoZSBiYWNrZW5kIGhhcyBjYXVnaHQgdXAgdG8gdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIGFnYWluLiBUaGlzXG4gICAgICogcHJldmVudHMgb3VyIGNhY2hlIGZyb20gZXZlciBnb2luZyBiYWNrd2FyZHMgaW4gdGltZS5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRhcmdldHMgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0LCB0aGlzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4sIFxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gcztcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlRhcmdldEdsb2JhbCBzdG9yZS5cbiAqLyBMcy5rZXkgPSBcInRhcmdldEdsb2JhbEtleVwiLCBMcy5zdG9yZSA9IFwidGFyZ2V0R2xvYmFsXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgQ29sbGVjdGlvbiBpZCAoZS5nLiAnbWVzc2FnZXMnKVxuICogdG8gYSBwYXJlbnQgcGF0aCAoZS5nLiAnL2NoYXRzLzEyMycpIHRoYXQgY29udGFpbnMgaXQgYXMgYSAoc3ViKWNvbGxlY3Rpb24uXG4gKiBUaGlzIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgZmluZCBhbGwgY29sbGVjdGlvbnMgdG8gcXVlcnkgd2hlbiBwZXJmb3JtaW5nXG4gKiBhIENvbGxlY3Rpb24gR3JvdXAgcXVlcnkuXG4gKi9cbmNsYXNzIEJzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbklkIChlLmcuICdtZXNzYWdlcycpXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIHBhcmVudCAoZWl0aGVyIGEgZG9jdW1lbnQgbG9jYXRpb24gb3IgYW4gZW1wdHkgcGF0aCBmb3JcbiAgICAgKiBhIHJvb3QtbGV2ZWwgY29sbGVjdGlvbikuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IHQsIHRoaXMucGFyZW50ID0gZTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBCcy5zdG9yZSA9IFwiY29sbGVjdGlvblBhcmVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNvbGxlY3Rpb25JZCwgcGFyZW50IHByb3BlcnRpZXMuICovXG5Ccy5rZXlQYXRoID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF07XG5cbi8qKlxuICogQSByZWNvcmQgb2YgdGhlIG1ldGFkYXRhIHN0YXRlIG9mIGVhY2ggY2xpZW50LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpLXRhYiBzdGF0ZSBhbmQgZG9lcyBub3QgbmVlZFxuICogdG8gYmUgcG9ydGVkIHRvIGlPUyBvciBBbmRyb2lkLlxuICovXG5jbGFzcyBVcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gTm90ZTogUHJldmlvdXMgc2NoZW1hIHZlcnNpb25zIGluY2x1ZGVkIGEgZmllbGRcbiAgICAvLyBcImxhc3RQcm9jZXNzZWREb2N1bWVudENoYW5nZUlkXCIuIERvbid0IHVzZSBhbnltb3JlLlxuICAgIC8qKiBUaGUgYXV0by1nZW5lcmF0ZWQgY2xpZW50IGlkIGFzc2lnbmVkIGF0IGNsaWVudCBzdGFydHVwLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbGFzdCB0aW1lIHRoaXMgc3RhdGUgd2FzIHVwZGF0ZWQuICovXG4gICAgZSwgXG4gICAgLyoqIFdoZXRoZXIgdGhlIGNsaWVudCdzIG5ldHdvcmsgY29ubmVjdGlvbiBpcyBlbmFibGVkLiAqL1xuICAgIG4sIFxuICAgIC8qKiBXaGV0aGVyIHRoaXMgY2xpZW50IGlzIHJ1bm5pbmcgaW4gYSBmb3JlZ3JvdW5kIHRhYi4gKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLnVwZGF0ZVRpbWVNcyA9IGUsIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuLCB0aGlzLmluRm9yZWdyb3VuZCA9IHM7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gVXMuc3RvcmUgPSBcImNsaWVudE1ldGFkYXRhXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjbGllbnRJZCBwcm9wZXJ0aWVzLiAqL1xuVXMua2V5UGF0aCA9IFwiY2xpZW50SWRcIjtcblxuLyoqXG4gKiBBIG9iamVjdCByZXByZXNlbnRpbmcgYSBidW5kbGUgbG9hZGVkIGJ5IHRoZSBTREsuXG4gKi9cbmNsYXNzIHFzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIElEIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY3JlYXRlIHRpbWUgb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuYnVuZGxlSWQgPSB0LCB0aGlzLmNyZWF0ZVRpbWUgPSBlLCB0aGlzLnZlcnNpb24gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIHFzLnN0b3JlID0gXCJidW5kbGVzXCIsIHFzLmtleVBhdGggPSBcImJ1bmRsZUlkXCI7XG5cbi8qKlxuICogQSBvYmplY3QgcmVwcmVzZW50aW5nIGEgbmFtZWQgcXVlcnkgbG9hZGVkIGJ5IHRoZSBTREsgdmlhIGEgYnVuZGxlLlxuICovXG5jbGFzcyBLcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHJlYWQgdGltZSBvZiB0aGUgcmVzdWx0cyBzYXZlZCBpbiB0aGUgYnVuZGxlIGZyb20gdGhlIG5hbWVkIHF1ZXJ5LiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcXVlcnkgc2F2ZWQgaW4gdGhlIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzLmJ1bmRsZWRRdWVyeSA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gS3Muc3RvcmUgPSBcIm5hbWVkUXVlcmllc1wiLCBLcy5rZXlQYXRoID0gXCJuYW1lXCI7XG5cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNvbnN0IGpzID0gWyAuLi5bIC4uLlsgLi4uWyAuLi5bIERzLnN0b3JlLCBDcy5zdG9yZSwgTnMuc3RvcmUsICRzLnN0b3JlLCBPcy5zdG9yZSwgU3Muc3RvcmUsIExzLnN0b3JlLCBNcy5zdG9yZSBdLCBVcy5zdG9yZSBdLCBGcy5zdG9yZSBdLCBCcy5zdG9yZSBdLCBxcy5zdG9yZSwgS3Muc3RvcmUgXSwgUXMgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLy8gVjIgaXMgbm8gbG9uZ2VyIHVzYWJsZSAoc2VlIGNvbW1lbnQgYXQgdG9wIG9mIGZpbGUpXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqL1xuY2xhc3MgV3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2godCk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKCh0ID0+IHQoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIEdzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgdCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IHQsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sodCk7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gdCwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgbmV4dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgTCgpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZShlLCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3ModCwgdGhpcy5yZXN1bHQpIDogbmV3IEdzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBTdWNjZXNzKHQsIGUpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9LCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBGYWlsdXJlKGUsIHQpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyYXBVc2VyRnVuY3Rpb24odCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQoKTtcbiAgICAgICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgR3MgPyBlIDogR3MucmVzb2x2ZShlKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIEdzLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cmFwU3VjY2Vzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBHcy5yZXNvbHZlKGUpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBHcy5yZWplY3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcygoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR3MoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR3MoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9IDAsIGkgPSAwLCByID0gITE7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICsrcywgdC5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgciAmJiBpID09PSBzICYmIGUoKTtcbiAgICAgICAgICAgICAgICB9KSwgKHQgPT4gbih0KSkpO1xuICAgICAgICAgICAgfSkpLCByID0gITAsIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcih0KSB7XG4gICAgICAgIGxldCBlID0gR3MucmVzb2x2ZSghMSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5uZXh0KCh0ID0+IHQgPyBHcy5yZXNvbHZlKHQpIDogbigpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaChlLmNhbGwodGhpcywgdCwgcykpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIHpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdCwgdGhpcy50cmFuc2FjdGlvbiA9IGUsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkl0ID0gbmV3IFEsIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuSXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBlLmVycm9yID8gdGhpcy5JdC5yZWplY3QobmV3IFlzKHQsIGUuZXJyb3IpKSA6IHRoaXMuSXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuaShlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB0aGlzLkl0LnJlamVjdChuZXcgWXModCwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3Blbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHpzKGUsIHQudHJhbnNhY3Rpb24ocywgbikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgWXMoZSwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IEF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5JdC5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydCh0KSB7XG4gICAgICAgIHQgJiYgdGhpcy5JdC5yZWplY3QodCksIHRoaXMuYWJvcnRlZCB8fCAoJChcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQgPyB0Lm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodCk7XG4gICAgICAgIHJldHVybiBuZXcgWnMoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgSHMge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLlJ0ID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBIcy5QdChnZXRVQSgpKSAmJiBGKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovICAgIHN0YXRpYyBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gJChcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIHQpLCB0aSh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHQpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgYnQoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoSHMudnQoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZ2V0VUEoKSwgZSA9IEhzLlB0KHQpLCBuID0gMCA8IGUgJiYgZSA8IDEwLCBzID0gSHMuVnQodCksIGkgPSAwIDwgcyAmJiBzIDwgNC41O1xuICAgICAgICAvLyBJRSAxMFxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcbiAgICAgICAgLy8gSUUgMTFcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XG4gICAgICAgIC8vIEVkZ2VcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXG4gICAgICAgICAgICAgICAgcmV0dXJuICEodC5pbmRleE9mKFwiTVNJRSBcIikgPiAwIHx8IHQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gMCB8fCB0LmluZGV4T2YoXCJFZGdlL1wiKSA+IDAgfHwgbiB8fCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxuICAgICAqLyAgICBzdGF0aWMgdnQoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKHQgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5TdCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyBEdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgUHQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBWdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiLlwiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICAgKi8gICAgYXN5bmMgQ3QodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoJChcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgcyA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHMub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBlKG4pO1xuICAgICAgICAgICAgfSwgcy5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgWXModCwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCBzLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSkgOiBcIkludmFsaWRTdGF0ZUVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyBzKSkgOiBuKG5ldyBZcyh0LCBzKSk7XG4gICAgICAgICAgICB9LCBzLm9udXBncmFkZW5lZWRlZCA9IHQgPT4ge1xuICAgICAgICAgICAgICAgICQoXCJTaW1wbGVEYlwiLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIHQub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLlJ0Lk50KGUsIHMudHJhbnNhY3Rpb24sIHQub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkRhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiBcIiArIHRoaXMudmVyc2lvbiArIFwiIGNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSksIHRoaXMua3QgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiB0aGlzLmt0KHQpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgeHQodCkge1xuICAgICAgICB0aGlzLmt0ID0gdCwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBlID0+IHQoZSkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IGU7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5DdCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0genMub3Blbih0aGlzLmRiLCB0LCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHIgPSBzKGUpLmNhdGNoKCh0ID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIGUuYWJvcnQodCksIEdzLnJlamVjdCh0KSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiByLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgZS5BdCwgcjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiByIDwgMztcbiAgICAgICAgICAgICAgICBpZiAoJChcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIHQubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgZSksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIWUpIHJldHVybiBQcm9taXNlLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxuICovIGNsYXNzIEpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuJHQgPSB0LCB0aGlzLkZ0ID0gITEsIHRoaXMuT3QgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5GdDtcbiAgICB9XG4gICAgZ2V0IE10KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5PdDtcbiAgICB9XG4gICAgc2V0IGN1cnNvcih0KSB7XG4gICAgICAgIHRoaXMuJHQgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLkZ0ID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgTHQodCkge1xuICAgICAgICB0aGlzLk90ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aSh0aGlzLiR0LmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIFlzIGV4dGVuZHMgaiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcihLLlVOQVZBSUxBQkxFLCBgSW5kZXhlZERCIHRyYW5zYWN0aW9uICcke3R9JyBmYWlsZWQ6ICR7ZX1gKSwgdGhpcy5uYW1lID0gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCI7XG4gICAgfVxufVxuXG4vKiogVmVyaWZpZXMgd2hldGhlciBgZWAgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gKi8gZnVuY3Rpb24gWHModCkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSB0Lm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIFpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSB0O1xuICAgIH1cbiAgICBwdXQodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/ICgkKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgbiA9IHRoaXMuc3RvcmUucHV0KGUsIHQpKSA6ICgkKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBcIjxhdXRvLWtleT5cIiwgdCksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQodCkpLCB0aShuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZCh0KSB7XG4gICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkFERFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIHQpO1xuICAgICAgICByZXR1cm4gdGkodGhpcy5zdG9yZS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gdGkodGhpcy5zdG9yZS5nZXQodCkpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IG51bGwpLCAkKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgZSkpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgdCk7XG4gICAgICAgIHJldHVybiB0aSh0aGlzLnN0b3JlLmRlbGV0ZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIHRpKHRoaXMuc3RvcmUuY291bnQoKSk7XG4gICAgfVxuICAgIEJ0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY3Vyc29yKHRoaXMub3B0aW9ucyh0LCBlKSksIHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVXQobiwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIHF0KHQsIGUpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICBuLkt0ID0gITE7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVXQocywgKCh0LCBlLCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIGp0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGUgPyBuID0gdCA6IChuID0ge30sIGUgPSB0KTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5VdChzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAgUXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3Ioe30pO1xuICAgICAgICByZXR1cm4gbmV3IEdzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5pKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBzKGUpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHMgPyB0KHMucHJpbWFyeUtleSwgcy52YWx1ZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQgPyBzLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBVdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBHcygoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgSnMoaSksIG8gPSBlKGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcik7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBHcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5jYXRjaCgodCA9PiAoci5kb25lKCksIEdzLnJlamVjdCh0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByLmlzRG9uZSA/IHMoKSA6IG51bGwgPT09IHIuTXQgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHIuTXQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IEdzLndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gbiA9IHQgOiBlID0gdCksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKHQucmV2ZXJzZSAmJiAoZSA9IFwicHJldlwiKSwgdC5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgodC5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdC5LdCA/IG4ub3BlbktleUN1cnNvcih0LnJhbmdlLCBlKSA6IG4ub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIHRpKHQpIHtcbiAgICByZXR1cm4gbmV3IEdzKCgoZSwgbikgPT4ge1xuICAgICAgICB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGUobik7XG4gICAgICAgIH0sIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5pKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBlaSA9ICExO1xuXG5mdW5jdGlvbiBuaSh0KSB7XG4gICAgY29uc3QgZSA9IEhzLlB0KGdldFVBKCkpO1xuICAgIGlmIChlID49IDEyLjIgJiYgZSA8IDEzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKHQubWVzc2FnZS5pbmRleE9mKGUpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaihcImludGVybmFsXCIsIGBJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICcke2V9Jy4gVGhpcyBpcyBsaWtlbHkgZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIGVpIHx8IChlaSA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgfSksIDApKSwgdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3Mgc2kgZXh0ZW5kcyBXcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLld0ID0gdCwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaWkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHJldHVybiBIcy5EdChuLld0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXG4gKi8gY2xhc3Mgcmkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gZSwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubXV0YXRpb25zW2VdO1xuICAgICAgICAgICAgaWYgKHMua2V5LmlzRXF1YWwodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgWmUocywgdCwgbltlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXG4gICAgICogYmF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KHQpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdG4oZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLm11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdG4oZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KGUua2V5KSwgcyA9IG47XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRvTG9jYWxWaWV3KHMpLCBuLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudChjdC5taW4oKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIFNuKCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gdC5iYXRjaElkICYmIHJ0KHRoaXMubXV0YXRpb25zLCB0Lm11dGF0aW9ucywgKCh0LCBlKSA9PiBubih0LCBlKSkpICYmIHJ0KHRoaXMuYmFzZU11dGF0aW9ucywgdC5iYXNlTXV0YXRpb25zLCAoKHQsIGUpID0+IG5uKHQsIGUpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyBvaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSB0LCB0aGlzLmNvbW1pdFZlcnNpb24gPSBlLCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbSh0LCBlLCBuKSB7XG4gICAgICAgIEIodC5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCBzID0gdm4oKTtcbiAgICAgICAgY29uc3QgaSA9IHQubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGkubGVuZ3RoOyB0KyspIHMgPSBzLmluc2VydChpW3RdLmtleSwgblt0XS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBvaSh0LCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBhaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gY3QubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHIgPSBjdC5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IHl0LkVNUFRZX0JZVEVfU1RSSU5HKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnJlc3VtZVRva2VuID0gbztcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0LCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgYWkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgZSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdCwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIGNpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuR3QgPSB0O1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24gdWkodCwgZSkge1xuICAgIGlmIChlLmRvY3VtZW50KSByZXR1cm4gc3ModC5HdCwgZS5kb2N1bWVudCwgISFlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgaWYgKGUubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gU3QuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSwgbiA9IHdpKGUubm9Eb2N1bWVudC5yZWFkVGltZSksIHMgPSBXdC5uZXdOb0RvY3VtZW50KHQsIG4pO1xuICAgICAgICByZXR1cm4gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPyBzLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogcztcbiAgICB9XG4gICAgaWYgKGUudW5rbm93bkRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHQgPSBTdC5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCksIG4gPSB3aShlLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIFd0Lm5ld1Vua25vd25Eb2N1bWVudCh0LCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBoaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGxpKG4pLCBpID0gZS5rZXkucGF0aC5wb3BMYXN0KCkudG9BcnJheSgpO1xuICAgIGlmIChlLmlzRm91bmREb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IEpuKHQsIGUua2V5KSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZGF0YS52YWx1ZS5tYXBWYWx1ZS5maWVsZHMsXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogam4odCwgZS52ZXJzaW9uLnRvVGltZXN0YW1wKCkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQuR3QsIGUpLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgJHMoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIG4sIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc05vRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aC50b0FycmF5KCksIG4gPSBkaShlLnZlcnNpb24pLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgJHMoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgbmV3IGtzKHQsIG4pLCBcbiAgICAgICAgLyogZG9jdW1lbnQ9ICovIG51bGwsIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc1Vua25vd25Eb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmtleS5wYXRoLnRvQXJyYXkoKSwgbiA9IGRpKGUudmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgJHMobmV3IHhzKHQsIG4pLCBcbiAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCBcbiAgICAgICAgLyogaGFzQ29tbWl0dGVkTXV0YXRpb25zPSAqLyAhMCwgcywgaSk7XG4gICAgfVxuICAgIHJldHVybiBMKCk7XG59XG5cbmZ1bmN0aW9uIGxpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBmaSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBhdCh0WzBdLCB0WzFdKTtcbiAgICByZXR1cm4gY3QuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuZnVuY3Rpb24gZGkodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIG5ldyBWcyhlLnNlY29uZHMsIGUubmFub3NlY29uZHMpO1xufVxuXG5mdW5jdGlvbiB3aSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBhdCh0LnNlY29uZHMsIHQubmFub3NlY29uZHMpO1xuICAgIHJldHVybiBjdC5mcm9tVGltZXN0YW1wKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xuLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cbmZ1bmN0aW9uIF9pKHQsIGUpIHtcbiAgICBjb25zdCBuID0gKGUuYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKChlID0+IGFzKHQuR3QsIGUpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLm11dGF0aW9ucy5sZW5ndGggLSAxOyArK3QpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25zW3RdO1xuICAgICAgICBpZiAodCArIDEgPCBlLm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSBlLm11dGF0aW9uc1t0ICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5tdXRhdGlvbnNbdCArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gcy50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCBlLm11dGF0aW9ucy5zcGxpY2UodCArIDEsIDEpLCBcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzID0gZS5tdXRhdGlvbnMubWFwKChlID0+IGFzKHQuR3QsIGUpKSksIGkgPSBhdC5mcm9tTWlsbGlzKGUubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyByaShlLmJhdGNoSWQsIGksIG4sIHMpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBtaSh0KSB7XG4gICAgY29uc3QgZSA9IHdpKHQucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyB3aSh0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogY3QubWluKCk7XG4gICAgbGV0IHM7XG4gICAgdmFyIGk7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC5xdWVyeS5kb2N1bWVudHMgPyAoQigxID09PSAoaSA9IHQucXVlcnkpLmRvY3VtZW50cy5sZW5ndGgpLCBcbiAgICBzID0gUmUoZ2UoWm4oaS5kb2N1bWVudHNbMF0pKSkpIDogcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFJlKGxzKHQpKTtcbiAgICB9KHQucXVlcnkpLCBuZXcgYWkocywgdC50YXJnZXRJZCwgMCAvKiBMaXN0ZW4gKi8gLCB0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgZSwgbiwgeXQuZnJvbUJhc2U2NFN0cmluZyh0LnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIGdpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZGkoZS5zbmFwc2hvdFZlcnNpb24pLCBzID0gZGkoZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gWHQoZS50YXJnZXQpID8gdXModC5HdCwgZS50YXJnZXQpIDogaHModC5HdCwgZS50YXJnZXQpO1xuICAgIC8vIFdlIGNhbid0IHN0b3JlIHRoZSByZXN1bWVUb2tlbiBhcyBhIEJ5dGVTdHJpbmcgaW4gSW5kZXhlZERiLCBzbyB3ZVxuICAgIC8vIGNvbnZlcnQgaXQgdG8gYSBiYXNlNjQgc3RyaW5nIGZvciBzdG9yYWdlLlxuICAgICAgICBjb25zdCByID0gZS5yZXN1bWVUb2tlbi50b0Jhc2U2NCgpO1xuICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxuICAgICAgICByZXR1cm4gbmV3IE9zKGUudGFyZ2V0SWQsIEh0KGUudGFyZ2V0KSwgbiwgciwgZS5zZXF1ZW5jZU51bWJlciwgcywgaSk7XG59XG5cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIHlpKHQpIHtcbiAgICBjb25zdCBlID0gbHMoe1xuICAgICAgICBwYXJlbnQ6IHQucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHQuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSB0LmxpbWl0VHlwZSA/IFBlKGUsIGUubGltaXQsIFwiTFwiIC8qIExhc3QgKi8pIDogZTtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIHBpIHtcbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBUaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogKGUgPSB0KS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiB3aShlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgdG8gYSBEYkJ1bmRsZS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFRpKHQpLnB1dCh7XG4gICAgICAgICAgICBidW5kbGVJZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IGRpKEduKG4uY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgLyoqIEVuY29kZXMgYSBEYk5hbWVkUXVlcnkgdG8gYSBOYW1lZFF1ZXJ5LiAqLyAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBFaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoZSA9IHQpLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHlpKGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogd2koZS5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBmcm9tIGEgYnVuZGxlIHByb3RvIHRvIGEgRGJOYW1lZFF1ZXJ5LiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBFaSh0KS5wdXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGRpKEduKHQucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IHQuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBUaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIHFzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gRWkodCkge1xuICAgIHJldHVybiBpaSh0LCBLcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgSWkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnp0ID0gbmV3IEFpO1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnp0LmFkZChlKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuenQuZ2V0RW50cmllcyhlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBBaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgZW50cnkgYWxyZWFkeSBleGlzdGVkLlxuICAgIGFkZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV0gfHwgbmV3IFRuKGR0LmNvbXBhcmF0b3IpLCBpID0gIXMuaGFzKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFtlXSA9IHMuYWRkKG4pLCBpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdO1xuICAgICAgICByZXR1cm4gcyAmJiBzLmhhcyhuKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbmRleFt0XSB8fCBuZXcgVG4oZHQuY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyBSaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZSB1c2VkIHRvXG4gICAgICAgICAqIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkh0ID0gbmV3IEFpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cbiAgICAgKlxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAqLyAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5IdC5oYXMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmxhc3RTZWdtZW50KCksIHMgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXG4gICAgICAgICAgICAgICAgdGhpcy5IdC5hZGQoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbixcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IFJzKHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFBpKHQpLnB1dChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSwgXCJcIiBdLCBbIG90KGUpLCBcIlwiIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFBpKHQpLkJ0KHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAocy5jb2xsZWN0aW9uSWQgIT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaCh2cyhzLnBhcmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gUGkodCkge1xuICAgIHJldHVybiBpaSh0LCBCcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGJpID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIHZpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICB0LCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICBlLCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gdCwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gZSwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHZpKHQsIHZpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCB2aS5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIFZpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5zdG9yZShDcy5zdG9yZSksIGkgPSB0LnN0b3JlKE5zLnN0b3JlKSwgciA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCBhID0gMDtcbiAgICBjb25zdCBjID0gcy5qdCh7XG4gICAgICAgIHJhbmdlOiBvXG4gICAgfSwgKCh0LCBlLCBuKSA9PiAoYSsrLCBuLmRlbGV0ZSgpKSkpO1xuICAgIHIucHVzaChjLm5leHQoKCgpID0+IHtcbiAgICAgICAgQigxID09PSBhKTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IHUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcyA9IE5zLmtleShlLCB0LmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICByLnB1c2goaS5kZWxldGUocykpLCB1LnB1c2godC5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4gR3Mud2FpdEZvcihyKS5uZXh0KCgoKSA9PiB1KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKi8gZnVuY3Rpb24gU2kodCkge1xuICAgIGlmICghdCkgcmV0dXJuIDA7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQuZG9jdW1lbnQpIGUgPSB0LmRvY3VtZW50OyBlbHNlIGlmICh0LnVua25vd25Eb2N1bWVudCkgZSA9IHQudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0Lm5vRG9jdW1lbnQpIHRocm93IEwoKTtcbiAgICAgICAgZSA9IHQubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIHZpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxudmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCB2aS5ERUZBVUxUID0gbmV3IHZpKDQxOTQzMDQwLCB2aS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgdmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG52aS5ESVNBQkxFRCA9IG5ldyB2aSgtMSwgMCwgMCk7XG5cbmNsYXNzIERpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5rID0gZSwgdGhpcy5KdCA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLll0ID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBYdCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBCKFwiXCIgIT09IHQudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IHQuaXNBdXRoZW50aWNhdGVkKCkgPyB0LnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgRGkoaSwgZSwgbiwgcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICBsZXQgZSA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIE5pKHQpLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBDcy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogblxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUgPSAhMSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0ga2kodCksIHIgPSBOaSh0KTtcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHIuYWRkKHt9KS5uZXh0KChvID0+IHtcbiAgICAgICAgICAgIEIoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbyk7XG4gICAgICAgICAgICBjb25zdCBhID0gbmV3IHJpKG8sIGUsIG4sIHMpLCBjID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmJhc2VNdXRhdGlvbnMubWFwKChlID0+IG9zKHQuR3QsIGUpKSksIGkgPSBuLm11dGF0aW9ucy5tYXAoKGUgPT4gb3ModC5HdCwgZSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENzKGUsIG4uYmF0Y2hJZCwgbi5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLCBzLCBpKTtcbiAgICAgICAgICAgIH0odGhpcy5rLCB0aGlzLnVzZXJJZCwgYSksIHUgPSBbXTtcbiAgICAgICAgICAgIGxldCBoID0gbmV3IFRuKCgodCwgZSkgPT4gaXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IE5zLmtleSh0aGlzLnVzZXJJZCwgdC5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgaCA9IGguYWRkKHQua2V5LnBhdGgucG9wTGFzdCgpKSwgdS5wdXNoKHIucHV0KGMpKSwgdS5wdXNoKGkucHV0KGUsIE5zLlBMQUNFSE9MREVSKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB1LnB1c2godGhpcy5KdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSk7XG4gICAgICAgICAgICB9KSksIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuWXRbb10gPSBhLmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwgR3Mud2FpdEZvcih1KS5uZXh0KCgoKSA9PiBhKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBOaSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gKEIodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgX2kodGhpcy5rLCB0KSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBadCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLll0W2VdID8gR3MucmVzb2x2ZSh0aGlzLll0W2VdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLll0W2VdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBOaSh0KS5qdCh7XG4gICAgICAgICAgICBpbmRleDogQ3MudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKEIoZS5iYXRjaElkID49IG4pLCBpID0gX2kodGhpcy5rLCBlKSksIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgbiA9IC0xO1xuICAgICAgICByZXR1cm4gTmkodCkuanQoe1xuICAgICAgICAgICAgaW5kZXg6IENzLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBlLFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gZS5iYXRjaElkLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIE5pKHQpLkJ0KENzLnVzZXJNdXRhdGlvbnNJbmRleCwgZSkubmV4dCgodCA9PiB0Lm1hcCgodCA9PiBfaSh0aGlzLmssIHQpKSkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxuICAgICAgICBjb25zdCBuID0gTnMucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobiksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIGtpKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgobiwgcywgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgW28sIGEsIGNdID0gbiwgdSA9IHZzKGEpO1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwodSkpIFxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxuICAgICAgICAgICAgcmV0dXJuIE5pKHQpLmdldChjKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXQpIHRocm93IEwoKTtcbiAgICAgICAgICAgICAgICBCKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGkucHVzaChfaSh0aGlzLmssIHQpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBUbihpdCk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gTnMucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSksIG8gPSBraSh0KS5qdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgICAgIH0sICgodCwgcywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyLCBvLCBhXSA9IHQsIGMgPSB2cyhvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwoYykgPyBuID0gbi5hZGQoYSkgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMucHVzaChvKTtcbiAgICAgICAgfSkpLCBHcy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHRoaXMudGUodCwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxLCBpID0gTnMucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgbiksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpO1xuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXG4gICAgICAgIGxldCBvID0gbmV3IFRuKGl0KTtcbiAgICAgICAgcmV0dXJuIGtpKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgodCwgZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3IsIGEsIGNdID0gdCwgdSA9IHZzKGEpO1xuICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKHUpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZChjKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMudGUodCwgbykpKTtcbiAgICB9XG4gICAgdGUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKE5pKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkgdGhyb3cgTCgpO1xuICAgICAgICAgICAgICAgIEIodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKF9pKHRoaXMuaywgdCkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCBHcy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBWaSh0Lld0LCB0aGlzLnVzZXJJZCwgZSkubmV4dCgobiA9PiAodC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVlKGUuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwgR3MuZm9yRWFjaChuLCAoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBlZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLll0W3RdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiBHcy5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKE5zLnByZWZpeEZvclVzZXIodGhpcy51c2VySWQpKSwgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGtpKHQpLmp0KHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB2cyh0WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBuLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgQigwID09PSBzLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4gQ2kodCwgdGhpcy51c2VySWQsIGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cbiAgICBuZSh0KSB7XG4gICAgICAgIHJldHVybiB4aSh0KS5nZXQodGhpcy51c2VySWQpLm5leHQoKHQgPT4gdCB8fCBuZXcgRHModGhpcy51c2VySWQsIC0xLCBcbiAgICAgICAgLypsYXN0U3RyZWFtVG9rZW49Ki8gXCJcIikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cbiAqLyBmdW5jdGlvbiBDaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IE5zLnByZWZpeEZvclBhdGgoZSwgbi5wYXRoKSwgaSA9IHNbMV0sIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHMpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIGtpKHQpLmp0KHtcbiAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgIEt0OiAhMFxuICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICBjb25zdCBbciwgYSwgLypiYXRjaElEKi8gY10gPSB0O1xuICAgICAgICByID09PSBlICYmIGEgPT09IGkgJiYgKG8gPSAhMCksIHMuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBOaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIENzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBraSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIE5zLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiB4aSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIERzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBPZmZzZXQgdG8gZW5zdXJlIG5vbi1vdmVybGFwcGluZyB0YXJnZXQgaWRzLiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcbiAqIHdhdGNoIHN0cmVhbS5cbiAqXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgYW5kIG9uZSBmb3JcbiAqIGZvciB0aGUgc3luYyBlbmdpbmUgKHRvIGdlbmVyYXRlIGxpbWJvIGRvY3VtZW50cyB0YXJnZXRzKS4gVGhlc2VcbiAqIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXG4gKiByZXNwZWN0aXZlbHkpLlxuICpcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXG4gKiByZXN0YXJ0LlxuICovXG5jbGFzcyAkaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlID0gdDtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2UgKz0gMiwgdGhpcy5zZTtcbiAgICB9XG4gICAgc3RhdGljIGllKCkge1xuICAgICAgICAvLyBUaGUgdGFyZ2V0IGNhY2hlIGdlbmVyYXRvciBtdXN0IHJldHVybiAnMicgaW4gaXRzIGZpcnN0IGNhbGwgdG8gYG5leHQoKWBcbiAgICAgICAgLy8gYXMgdGhlcmUgaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0XG4gICAgICAgIC8vIG51bWJlciBhbmQgdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRFxuICAgICAgICAvLyAnMCcsIHRoZSBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cbiAgICAgICAgcmV0dXJuIG5ldyAkaSgwKTtcbiAgICB9XG4gICAgc3RhdGljIHJlKCkge1xuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cbiAgICAgICAgcmV0dXJuIG5ldyAkaSgtMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBGaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgdGhpcy5rID0gZTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXG4gICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxuICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcbiAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXG4gICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcbiAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgJGkoZS5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuaGlnaGVzdFRhcmdldElkID0gbi5uZXh0KCksIHRoaXMuYWUodCwgZSkubmV4dCgoKCkgPT4gZS5oaWdoZXN0VGFyZ2V0SWQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgodCA9PiBjdC5mcm9tVGltZXN0YW1wKG5ldyBhdCh0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgdC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgodCA9PiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KChzID0+IChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIG4gJiYgKHMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4udG9UaW1lc3RhbXAoKSksIFxuICAgICAgICBlID4gcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSksIHRoaXMuYWUodCwgcykpKSk7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZSh0LCBlKS5uZXh0KCgoKSA9PiB0aGlzLm9lKHQpLm5leHQoKG4gPT4gKG4udGFyZ2V0Q291bnQgKz0gMSwgdGhpcy51ZShlLCBuKSwgXG4gICAgICAgIHRoaXMuYWUodCwgbikpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgoKCkgPT4gT2kodCkuZGVsZXRlKGUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gdGhpcy5vZSh0KSkpLm5leHQoKGUgPT4gKEIoZS50YXJnZXRDb3VudCA+IDApLCBcbiAgICAgICAgZS50YXJnZXRDb3VudCAtPSAxLCB0aGlzLmFlKHQsIGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxuICAgICAqLyAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBPaSh0KS5qdCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBtaShvKTtcbiAgICAgICAgICAgIGEuc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChhLnRhcmdldElkKSAmJiAocysrLCBpLnB1c2godGhpcy5yZW1vdmVUYXJnZXREYXRhKHQsIGEpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBHcy53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBPaSh0KS5qdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBtaShuKTtcbiAgICAgICAgICAgIGUocyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgb2UodCkge1xuICAgICAgICByZXR1cm4gTWkodCkuZ2V0KExzLmtleSkubmV4dCgodCA9PiAoQihudWxsICE9PSB0KSwgdCkpKTtcbiAgICB9XG4gICAgYWUodCwgZSkge1xuICAgICAgICByZXR1cm4gTWkodCkucHV0KExzLmtleSwgZSk7XG4gICAgfVxuICAgIGNlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE9pKHQpLnB1dChnaSh0aGlzLmssIGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICB1ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiB0LnRhcmdldElkID4gZS5oaWdoZXN0VGFyZ2V0SWQgJiYgKGUuaGlnaGVzdFRhcmdldElkID0gdC50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIHQuc2VxdWVuY2VOdW1iZXIgPiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KCh0ID0+IHQudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IEh0KGUpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIE9pKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzLFxuICAgICAgICAgICAgaW5kZXg6IE9zLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZVxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBtaShuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBZdChlLCByLnRhcmdldCkgJiYgKGkgPSByLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gW10sIGkgPSBMaSh0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gUnMoZS5wYXRoKTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dChuZXcgTXMobiwgcikpKSwgcy5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIG4sIGUpKTtcbiAgICAgICAgfSkpLCBHcy53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IExpKHQpO1xuICAgICAgICByZXR1cm4gR3MuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gUnMoZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBHcy53YWl0Rm9yKFsgcy5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBuLCBlKSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBMaSh0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHMgPSBMaSh0KTtcbiAgICAgICAgbGV0IGkgPSBTbigpO1xuICAgICAgICByZXR1cm4gcy5qdCh7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIEt0OiAhMFxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB2cyh0WzFdKSwgciA9IG5ldyBTdChzKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChyKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gUnMoZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIG90KG4pIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gTGkodCkuanQoe1xuICAgICAgICAgICAgaW5kZXg6IE1zLmRvY3VtZW50VGFyZ2V0c0luZGV4LFxuICAgICAgICAgICAgS3Q6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChbdCwgZV0sIG4sIHMpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gdCAmJiAoaSsrLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBFdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBPaSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gbWkodCkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gT2kodCkge1xuICAgIHJldHVybiBpaSh0LCBPcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gTWkodCkge1xuICAgIHJldHVybiBpaSh0LCBMcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIExpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgTXMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gQmkodCkge1xuICAgIGlmICh0LmNvZGUgIT09IEsuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCB0Lm1lc3NhZ2UgIT09IFFzKSB0aHJvdyB0O1xuICAgICQoXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gVWkoW3QsIGVdLCBbbiwgc10pIHtcbiAgICBjb25zdCBpID0gaXQodCwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBpdChlLCBzKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIHFpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaGUgPSB0LCB0aGlzLmJ1ZmZlciA9IG5ldyBUbihVaSksIHRoaXMubGUgPSAwO1xuICAgIH1cbiAgICBmZSgpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5sZTtcbiAgICB9XG4gICAgZGUodCkge1xuICAgICAgICBjb25zdCBlID0gWyB0LCB0aGlzLmZlKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLmhlKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgVWkoZSwgdCkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZSh0KS5hZGQoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3MgS2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy53ZSA9ICExLCB0aGlzLl9lID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMubWUodCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuX2UgJiYgKHRoaXMuX2UuY2FuY2VsKCksIHRoaXMuX2UgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9lO1xuICAgIH1cbiAgICBtZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLndlID8gM2U1IDogNmU0O1xuICAgICAgICAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiAke2V9bXNgKSwgdGhpcy5fZSA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIiAvKiBMcnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIGUsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9lID0gbnVsbCwgdGhpcy53ZSA9ICEwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0LmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgWHModCkgPyAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIiwgdCkgOiBhd2FpdCBCaSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gKi8gY2xhc3Mgamkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZSA9IHQsIHRoaXMucGFyYW1zID0gZTtcbiAgICB9XG4gICAgY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZS55ZSh0KS5uZXh0KCh0ID0+IE1hdGguZmxvb3IoZSAvIDEwMCAqIHQpKSk7XG4gICAgfVxuICAgIG50aFNlcXVlbmNlTnVtYmVyKHQsIGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUpIHJldHVybiBHcy5yZXNvbHZlKGV0LkkpO1xuICAgICAgICBjb25zdCBuID0gbmV3IHFpKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZS5mb3JFYWNoVGFyZ2V0KHQsICh0ID0+IG4uZGUodC5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLmdlLnBlKHQsICh0ID0+IG4uZGUodCkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSk7XG4gICAgfVxuICAgIGNvbGxlY3QodCwgZSkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgZGlzYWJsZWRcIiksIFxuICAgICAgICBHcy5yZXNvbHZlKGJpKSkgOiB0aGlzLmdldENhY2hlU2l6ZSh0KS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKCQoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgQ2FjaGUgc2l6ZSAke259IGlzIGxvd2VyIHRoYW4gdGhyZXNob2xkICR7dGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZH1gKSwgXG4gICAgICAgIGJpKSA6IHRoaXMuVGUodCwgZSkpKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UuZ2V0Q2FjaGVTaXplKHQpO1xuICAgIH1cbiAgICBUZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzLCBpLCByLCBvLCBjLCB1O1xuICAgICAgICBjb25zdCBoID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdCkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIENhcCBhdCB0aGUgY29uZmlndXJlZCBtYXhcbiAgICAgICAgZSA+IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPyAoJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYENhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gdG8gdGhlIG1heGltdW0gb2YgJHt0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0fSBmcm9tICR7ZX1gKSwgXG4gICAgICAgIHMgPSB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSA6IHMgPSBlLCByID0gRGF0ZS5ub3coKSwgdGhpcy5udGhTZXF1ZW5jZU51bWJlcih0LCBzKSkpKS5uZXh0KChzID0+IChuID0gcywgXG4gICAgICAgIG8gPSBEYXRlLm5vdygpLCB0aGlzLnJlbW92ZVRhcmdldHModCwgbiwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIGMgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBuKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh1ID0gRGF0ZS5ub3coKSwgaygpIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgICAgICAgICAgJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYExSVSBHYXJiYWdlIENvbGxlY3Rpb25cXG5cXHRDb3VudGVkIHRhcmdldHMgaW4gJHtyIC0gaH1tc1xcblxcdERldGVybWluZWQgbGVhc3QgcmVjZW50bHkgdXNlZCAke3N9IGluIGAgKyAobyAtIHIpICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHtpfSB0YXJnZXRzIGluIGAgKyAoYyAtIG8pICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHt0fSBkb2N1bWVudHMgaW4gYCArICh1IC0gYykgKyBcIm1zXFxuXCIgKyBgVG90YWwgRHVyYXRpb246ICR7dSAtIGh9bXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkaWRSdW46ICEwLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogcyxcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQcm92aWRlcyBMUlUgZnVuY3Rpb25hbGl0eSBmb3IgSW5kZXhlZERCIHBlcnNpc3RlbmNlLiAqL1xuY2xhc3MgUWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYiA9IHQsIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgamkodCwgZSk7XG4gICAgICAgIH0odGhpcywgZSk7XG4gICAgfVxuICAgIHllKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuRWUodCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodCkubmV4dCgodCA9PiBlLm5leHQoKGUgPT4gdCArIGUpKSkpO1xuICAgIH1cbiAgICBFZSh0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMucGUodCwgKHQgPT4ge1xuICAgICAgICAgICAgZSsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KHQsIGUpO1xuICAgIH1cbiAgICBwZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkllKHQsICgodCwgbikgPT4gZShuKSkpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gV2kodCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBXaSh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gV2kodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnl0aGluZyB3b3VsZCBwcmV2ZW50IHRoaXMgZG9jdW1lbnQgZnJvbSBiZWluZyBnYXJiYWdlXG4gICAgICogY29sbGVjdGVkLCBnaXZlbiB0aGF0IHRoZSBkb2N1bWVudCBpbiBxdWVzdGlvbiBpcyBub3QgcHJlc2VudCBpbiBhbnlcbiAgICAgKiB0YXJnZXRzIGFuZCBoYXMgYSBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCBmb3JcbiAgICAgKiB0aGUgY29sbGVjdGlvbiBydW4uXG4gICAgICovICAgIEFlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuID0gITE7XG4gICAgICAgICAgICByZXR1cm4geGkodCkuUXQoKHMgPT4gQ2kodCwgcywgZSkubmV4dCgodCA9PiAodCAmJiAobiA9ICEwKSwgR3MucmVzb2x2ZSghdCkpKSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpLCBzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuSWUodCwgKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBpZiAobyA8PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuQWUodCwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZSkgXG4gICAgICAgICAgICAgICAgICAgIC8vIE91ciBzaXplIGFjY291bnRpbmcgcmVxdWlyZXMgdXMgdG8gcmVhZCBhbGwgZG9jdW1lbnRzIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSsrLCBuLmdldEVudHJ5KHQsIHIpLm5leHQoKCgpID0+IChuLnJlbW92ZUVudHJ5KHIpLCBMaSh0KS5kZWxldGUoWyAwLCBScyhyLnBhdGgpIF0pKSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBHcy53YWl0Rm9yKHMpKSkubmV4dCgoKCkgPT4gbi5hcHBseSh0KSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHQsIG4pO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFdpKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBjYWNoZSB0aGF0IGlzICdvcnBoYW5lZCcuIE9ycGhhbmVkXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxuICAgICAqIHRoYXQgZG9jdW1lbnQgd2lsbCBiZSB0aGUgc2VudGluZWwgcm93ICh0YXJnZXRJZCAwKSwgd2hpY2ggd2lsbCBhbHNvIGhhdmUgdGhlIHNlcXVlbmNlXG4gICAgICogbnVtYmVyIGZvciB0aGUgbGFzdCB0aW1lIHRoZSBkb2N1bWVudCB3YXMgYWNjZXNzZWQuXG4gICAgICovICAgIEllKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IExpKHQpO1xuICAgICAgICBsZXQgcywgaSA9IGV0Lkk7XG4gICAgICAgIHJldHVybiBuLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBNcy5kb2N1bWVudFRhcmdldHNJbmRleFxuICAgICAgICB9LCAoKFt0LCBuXSwge3BhdGg6IHIsIHNlcXVlbmNlTnVtYmVyOiBvfSkgPT4ge1xuICAgICAgICAgICAgMCA9PT0gdCA/IChcbiAgICAgICAgICAgIC8vIGlmIG5leHRUb1JlcG9ydCBpcyB2YWxpZCwgcmVwb3J0IGl0LCB0aGlzIGlzIGEgbmV3IGtleSBzbyB0aGVcbiAgICAgICAgICAgIC8vIGxhc3Qgb25lIG11c3Qgbm90IGJlIGEgbWVtYmVyIG9mIGFueSB0YXJnZXRzLlxuICAgICAgICAgICAgaSAhPT0gZXQuSSAmJiBlKG5ldyBTdCh2cyhzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBldC5JO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVwb3J0IHNlcXVlbmNlIG51bWJlcnMgYWZ0ZXIgZ2V0dGluZyB0byB0aGUgbmV4dCBrZXksIHdlXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgYW5kIHJlcG9ydCBpdC5cbiAgICAgICAgICAgIGkgIT09IGV0LkkgJiYgZShuZXcgU3QodnMocykpLCBpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFdpKHQsIGUpIHtcbiAgICByZXR1cm4gTGkodCkucHV0KFxuICAgIC8qKlxuICogQHJldHVybnMgQSB2YWx1ZSBzdWl0YWJsZSBmb3Igd3JpdGluZyBhIHNlbnRpbmVsIHJvdyBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50XG4gKiBzdG9yZS5cbiAqL1xuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNcygwLCBScyh0LnBhdGgpLCBlKTtcbiAgICB9KGUsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovIGNsYXNzIEdpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubWFwS2V5Rm4gPSB0LCB0aGlzLmVxdWFsc0ZuID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5uZXIgbWFwIGZvciBhIGtleS92YWx1ZSBwYWlyLiBEdWUgdG8gdGhlIHBvc3NpYmlsaXR5IG9mIGNvbGxpc2lvbnMgd2VcbiAgICAgICAgICoga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoIHRvIGZpbmQgYW4gYWN0dWFsXG4gICAgICAgICAqIG1hdGNoLiBOb3RlIHRoYXQgY29sbGlzaW9ucyBzaG91bGQgYmUgcmFyZSwgc28gd2Ugc3RpbGwgZXhwZWN0IG5lYXJcbiAgICAgICAgICogY29uc3RhbnQgdGltZSBsb29rdXBzIGluIHByYWN0aWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbm5lciA9IHt9O1xuICAgIH1cbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgZm9yIChjb25zdCBbZSwgc10gb2YgbikgaWYgKHRoaXMuZXF1YWxzRm4oZSwgdCkpIHJldHVybiBzO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmdldCh0KTtcbiAgICB9XG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubWFwS2V5Rm4odCksIHMgPSB0aGlzLmlubmVyW25dO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHMubGVuZ3RoOyBuKyspIGlmICh0aGlzLmVxdWFsc0ZuKHNbbl1bMF0sIHQpKSByZXR1cm4gdm9pZCAoc1tuXSA9IFsgdCwgZSBdKTtcbiAgICAgICAgICAgIHMucHVzaChbIHQsIGUgXSk7XG4gICAgICAgIH0gZWxzZSB0aGlzLmlubmVyW25dID0gWyBbIHQsIGUgXSBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgbWFwLiBSZXR1cm5zIGEgYm9vbGVhbiBpZiBhbnl0aGluZyB3YXMgZGVsZXRlZC5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubWFwS2V5Rm4odCksIG4gPSB0aGlzLmlubmVyW2VdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgbi5sZW5ndGg7IHMrKykgaWYgKHRoaXMuZXF1YWxzRm4obltzXVswXSwgdCkpIHJldHVybiAxID09PSBuLmxlbmd0aCA/IGRlbGV0ZSB0aGlzLmlubmVyW2VdIDogbi5zcGxpY2UocywgMSksIFxuICAgICAgICAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgaHQodGhpcy5pbm5lciwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtlLCBzXSBvZiBuKSB0KGUsIHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBsdCh0aGlzLmlubmVyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGJhdGNoIHVwIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgd3JpdHRlbiB0byB0aGUgY2FjaGUsIGJ1dFxuICogYWRkaXRpb25hbGx5IHN1cHBvcnRzIHJlYWRpbmcgZW50cmllcyBiYWNrIHdpdGggdGhlIGBnZXRFbnRyeSgpYCBtZXRob2QsXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xuICogYnVmZmVyZWQuXG4gKlxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUgZGVsdGEgb2YgdGhlIHBlbmRpbmcgY2hhbmdlcy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cbiAqIElmIGJ5dGUtY291bnRpbmcgZW5kcyB1cCBiZWluZyBuZWVkZWQgb24gdGhlIG90aGVyIHBsYXRmb3JtcywgY29uc2lkZXJcbiAqIHBvcnRpbmcgdGhpcyBjbGFzcyBhcyBwYXJ0IG9mIHRoYXQgaW1wbGVtZW50YXRpb24gd29yay5cbiAqLyBjbGFzcyB6aSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXkgdG8gdGhlIG5ldyBjYWNoZSBlbnRyeSB0aGF0IHNob3VsZCBiZSB3cml0dGVuIChvciBudWxsIGlmIGFueVxuICAgICAgICAvLyBleGlzdGluZyBjYWNoZSBlbnRyeSBzaG91bGQgYmUgcmVtb3ZlZCkuXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IG5ldyBHaSgodCA9PiB0LnRvU3RyaW5nKCkpLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITE7XG4gICAgfVxuICAgIGdldFJlYWRUaW1lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY2hhbmdlcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gZS5yZWFkVGltZSA6IGN0Lm1pbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSBtb2RpZnkgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodC5rZXksIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0LFxuICAgICAgICAgICAgcmVhZFRpbWU6IGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IHJlbW92ZSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCwgZSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodCwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IFd0Lm5ld0ludmFsaWREb2N1bWVudCh0KSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcbiAgICAgKiBhbmQgaWYgbm8gYnVmZmVyZWQgY2hhbmdlIGFwcGxpZXMsIHRoaXMgd2lsbCBmb3J3YXJkIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgb3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZiB3ZSBoYXZlIG5vdGhpbmdcbiAgICAgKiBjYWNoZWQuXG4gICAgICovICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNoYW5nZXMuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBuID8gR3MucmVzb2x2ZShuLmRvY3VtZW50KSA6IHRoaXMuZ2V0RnJvbUNhY2hlKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBjYWNoZWQgZG9jdW1lbnRzLCBpbmRleGVkIGJ5IGtleS4gSWYgYW4gZW50cnkgY2Fubm90IGJlXG4gICAgICogICAgIGZvdW5kLCB0aGUgY29ycmVzcG9uZGluZyBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gYW4gaW52YWxpZCBkb2N1bWVudC5cbiAgICAgKi8gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXG4gICAgICogdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uLlxuICAgICAqLyAgICBhcHBseSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICEwLCB0aGlzLmFwcGx5Q2hhbmdlcyh0KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqLyAgICBhc3NlcnROb3RBcHBsaWVkKCkge31cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovIGNsYXNzIEhpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICAgICAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBUaGUgcXVlcnkgaW5kZXhlcyB0aGF0IG5lZWQgdG8gYmUgbWFpbnRhaW5lZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuayA9IHQsIHRoaXMuSnQgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyaWVzIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBYaSh0KS5wdXQoWmkoZSksIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFhpKHQpLCBzID0gWmkoZSk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY3VycmVudCBjYWNoZSBzaXplLlxuICAgICAqXG4gICAgICogQ2FsbGVycyB0byBgYWRkRW50cnkoKWAgYW5kIGByZW1vdmVFbnRyeSgpYCAqbXVzdCogY2FsbCB0aGlzIGFmdGVyd2FyZHMgdG8gdXBkYXRlIHRoZVxuICAgICAqIGNhY2hlJ3MgbWV0YWRhdGEuXG4gICAgICovICAgIHVwZGF0ZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodCkubmV4dCgobiA9PiAobi5ieXRlU2l6ZSArPSBlLCB0aGlzLlJlKHQsIG4pKSkpO1xuICAgIH1cbiAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBYaSh0KS5nZXQoWmkoZSkpLm5leHQoKHQgPT4gdGhpcy5QZShlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgZW50cnkgYW5kIGl0cyBzaXplLlxuICAgICAqLyAgICBiZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBYaSh0KS5nZXQoWmkoZSkpLm5leHQoKHQgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLlBlKGUsIHQpLFxuICAgICAgICAgICAgc2l6ZTogU2kodClcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gQW4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmUodCwgZSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5QZSh0LCBlKTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUgc2V0IG9mIGtleXMgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGRvY3VtZW50cyBpbmRleGVkIGJ5IGtleSBhbmQgYSBtYXAgb2Ygc2l6ZXMgaW5kZXhlZCBieVxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0KS5cbiAgICAgKi8gICAgVmUodCwgZSkge1xuICAgICAgICBsZXQgbiA9IEFuKCksIHMgPSBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLnZlKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuUGUodCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgaSksIHMgPSBzLmluc2VydCh0LCBTaShlKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgZG9jdW1lbnRzOiBuLFxuICAgICAgICAgICAgU2U6IHNcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgdmUodCwgZSwgbikge1xuICAgICAgICBpZiAoZS5pc0VtcHR5KCkpIHJldHVybiBHcy5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChlLmZpcnN0KCkucGF0aC50b0FycmF5KCksIGUubGFzdCgpLnBhdGgudG9BcnJheSgpKSwgaSA9IGUuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgbGV0IHIgPSBpLmdldE5leHQoKTtcbiAgICAgICAgcmV0dXJuIFhpKHQpLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IFN0LmZyb21TZWdtZW50cyh0KTtcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2gga2V5cyBub3QgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtyICYmIFN0LmNvbXBhcmF0b3IociwgbykgPCAwOyApIG4ociwgbnVsbCksIHIgPSBpLmdldE5leHQoKTtcbiAgICAgICAgICAgIHIgJiYgci5pc0VxdWFsKG8pICYmIChcbiAgICAgICAgICAgIC8vIEtleSBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgIG4ociwgZSksIHIgPSBpLmhhc05leHQoKSA/IGkuZ2V0TmV4dCgpIDogbnVsbCksIFxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgbmV4dCBrZXkgKGlmIHRoZXJlIGlzIG9uZSkuXG4gICAgICAgICAgICByID8gcy5MdChyLnBhdGgudG9BcnJheSgpKSA6IHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGtleXMgYXJlIG5vdCBpbiB0aGUgY2FjaGUuIE9uZSBjYXNlIHdoZXJlIGBpdGVyYXRlYFxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAgICAgICAgZm9yICg7cjsgKSBuKHIsIG51bGwpLCByID0gaS5oYXNOZXh0KCkgPyBpLmdldE5leHQoKSA6IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gQW4oKTtcbiAgICAgICAgY29uc3QgaSA9IGUucGF0aC5sZW5ndGggKyAxLCByID0ge307XG4gICAgICAgIGlmIChuLmlzRXF1YWwoY3QubWluKCkpKSB7XG4gICAgICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93XG4gICAgICAgICAgICAvLyBkb3duIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgci5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQodCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGluZGV4LWZyZWUgcXVlcnkgYW5kIGZpbHRlciBieSByZWFkIHRpbWUuIFRoaXMgaXMgc2FmZVxuICAgICAgICAgICAgLy8gc2luY2UgYWxsIGRvY3VtZW50IGNoYW5nZXMgdG8gcXVlcmllcyB0aGF0IGhhdmUgYVxuICAgICAgICAgICAgLy8gbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAoYHNpbmNlUmVhZFRpbWVgKSBoYXZlIGEgcmVhZCB0aW1lIHNldC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnBhdGgudG9BcnJheSgpLCBzID0gbGkobik7XG4gICAgICAgICAgICByLnJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHQsIHMgXSwgXG4gICAgICAgICAgICAvKiBvcGVuPSAqLyAhMCksIHIuaW5kZXggPSAkcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWGkodCkuanQociwgKCh0LCBuLCByKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgcXVlcnkgaXMgYWN0dWFsbHkgcmV0dXJuaW5nIGFueSBwYXRoIHRoYXQgc3RhcnRzIHdpdGggdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIHByZWZpeCB3aGljaCBtYXkgaW5jbHVkZSBkb2N1bWVudHMgaW4gc3ViY29sbGVjdGlvbnMuIEZvclxuICAgICAgICAgICAgLy8gZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIHdpbGwgcmV0dXJuIHJvb21zL2FiYy9tZXNzYWdlcy94eXggYnV0IHdlXG4gICAgICAgICAgICAvLyBzaG91bGRuJ3QgbWF0Y2ggaXQuIEZpeCB0aGlzIGJ5IGRpc2NhcmRpbmcgcm93cyB3aXRoIGRvY3VtZW50IGtleXNcbiAgICAgICAgICAgIC8vIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnkgcGF0aC5cbiAgICAgICAgICAgIGlmICh0Lmxlbmd0aCAhPT0gaSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbyA9IHVpKHRoaXMuaywgbik7XG4gICAgICAgICAgICBlLnBhdGguaXNQcmVmaXhPZihvLmtleS5wYXRoKSA/IFNlKGUsIG8pICYmIChzID0gcy5pbnNlcnQoby5rZXksIG8pKSA6IHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IEppKHRoaXMsICEhdCAmJiB0LnRyYWNrUmVtb3ZhbHMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodCkubmV4dCgodCA9PiB0LmJ5dGVTaXplKSk7XG4gICAgfVxuICAgIGdldE1ldGFkYXRhKHQpIHtcbiAgICAgICAgcmV0dXJuIFlpKHQpLmdldChGcy5rZXkpLm5leHQoKHQgPT4gKEIoISF0KSwgdCkpKTtcbiAgICB9XG4gICAgUmUodCwgZSkge1xuICAgICAgICByZXR1cm4gWWkodCkucHV0KEZzLmtleSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYHJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBudWxsLCBpZiB0aGUgZG9jdW1lbnRcbiAgICAgKiBjb3JyZXNwb25kcyB0byB0aGUgZm9ybWF0IHVzZWQgZm9yIHNlbnRpbmVsIGRlbGV0ZXMpLlxuICAgICAqLyAgICBQZSh0LCBlKSB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdWkodGhpcy5rLCBlKTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHQuaXNOb0RvY3VtZW50KCkgJiYgdC52ZXJzaW9uLmlzRXF1YWwoY3QubWluKCkpKSkgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFd0Lm5ld0ludmFsaWREb2N1bWVudCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIGRvY3VtZW50IHNlcmlhbGl6ZXIuXG4gKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBVbmxpa2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLCB0aGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGNvbXB1dGVzIHRoZSBzaXplXG4gKiBkZWx0YSBmb3IgYWxsIHN1Ym1pdHRlZCBjaGFuZ2VzLiBUaGlzIGF2b2lkcyBoYXZpbmcgdG8gcmUtcmVhZCBhbGwgZG9jdW1lbnRzIGZyb20gSW5kZXhlZERiXG4gKiB3aGVuIHdlIGFwcGx5IHRoZSBjaGFuZ2VzLlxuICovXG5jbGFzcyBKaSBleHRlbmRzIHppIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSAtIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxuICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIC0gV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XG4gICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuRGUgPSB0LCB0aGlzLnRyYWNrUmVtb3ZhbHMgPSBlLCBcbiAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW4gdGhpcyBidWZmZXIuXG4gICAgICAgIHRoaXMuQ2UgPSBuZXcgR2koKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IDAsIHMgPSBuZXcgVG4oKCh0LCBlKSA9PiBpdCh0LmNhbm9uaWNhbFN0cmluZygpLCBlLmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy5DZS5nZXQoaSk7XG4gICAgICAgICAgICBpZiAoci5kb2N1bWVudC5pc1ZhbGlkRG9jdW1lbnQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBoaSh0aGlzLkRlLmssIHIuZG9jdW1lbnQsIHRoaXMuZ2V0UmVhZFRpbWUoaSkpO1xuICAgICAgICAgICAgICAgIHMgPSBzLmFkZChpLnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gU2koYSk7XG4gICAgICAgICAgICAgICAgbiArPSBjIC0gbywgZS5wdXNoKHRoaXMuRGUuYWRkRW50cnkodCwgaSwgYSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuIC09IG8sIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBoaSh0aGlzLkRlLmssIFd0Lm5ld05vRG9jdW1lbnQoaSwgY3QubWluKCkpLCB0aGlzLmdldFJlYWRUaW1lKGkpKTtcbiAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5EZS5hZGRFbnRyeSh0LCBpLCBuKSk7XG4gICAgICAgICAgICB9IGVsc2UgZS5wdXNoKHRoaXMuRGUucmVtb3ZlRW50cnkodCwgaSkpO1xuICAgICAgICB9KSksIHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLnB1c2godGhpcy5EZS5KdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBuKSk7XG4gICAgICAgIH0pKSwgZS5wdXNoKHRoaXMuRGUudXBkYXRlTWV0YWRhdGEodCwgbikpLCBHcy53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLkRlLmJlKHQsIGUpLm5leHQoKHQgPT4gKHRoaXMuQ2Uuc2V0KGUsIHQuc2l6ZSksIHQuZG9jdW1lbnQpKSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcbiAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuRGUuVmUodCwgZSkubmV4dCgoKHtkb2N1bWVudHM6IHQsIFNlOiBlfSkgPT4gKFxuICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cbiAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXG4gICAgICAgIC8vIGBNdXRhYmxlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cbiAgICAgICAgZS5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5DZS5zZXQodCwgZSk7XG4gICAgICAgIH0pKSwgdCkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFlpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgRnMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBYaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsICRzLnN0b3JlKTtcbn1cblxuZnVuY3Rpb24gWmkodCkge1xuICAgIHJldHVybiB0LnBhdGgudG9BcnJheSgpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovIGNsYXNzIHRyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuayA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaW4gcHJvZHVjdGlvbiwgdGhpcyBtZXRob2QgaXMgb25seSBldmVyIHVzZWQgdG8gdXBncmFkZSB0aGUgc2NoZW1hXG4gICAgICogdG8gU0NIRU1BX1ZFUlNJT04uIERpZmZlcmVudCB2YWx1ZXMgb2YgdG9WZXJzaW9uIGFyZSBvbmx5IHVzZWQgZm9yIHRlc3RpbmdcbiAgICAgKiBhbmQgbG9jYWwgZmVhdHVyZSBkZXZlbG9wbWVudC5cbiAgICAgKi8gICAgTnQodCwgZSwgbiwgcykge1xuICAgICAgICBCKG4gPCBzICYmIG4gPj0gMCAmJiBzIDw9IDExKTtcbiAgICAgICAgY29uc3QgaSA9IG5ldyB6cyhcImNyZWF0ZU9yVXBncmFkZVwiLCBlKTtcbiAgICAgICAgbiA8IDEgJiYgcyA+PSAxICYmIChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFNzLnN0b3JlKTtcbiAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShEcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IERzLmtleVBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShDcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IENzLmtleVBhdGgsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KENzLnVzZXJNdXRhdGlvbnNJbmRleCwgQ3MudXNlck11dGF0aW9uc0tleVBhdGgsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShOcy5zdG9yZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBVcGdyYWRlIGZ1bmN0aW9uIHRvIG1pZ3JhdGUgdGhlICdtdXRhdGlvbnMnIHN0b3JlIGZyb20gVjEgdG8gVjMuIExvYWRzXG4gKiBhbmQgcmV3cml0ZXMgYWxsIGRhdGEuXG4gKi8gKHQpLCBlcih0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZSgkcy5zdG9yZSk7XG4gICAgICAgIH0odCkpO1xuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBHcy5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiBzID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoTXMuc3RvcmUpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKE9zLnN0b3JlKSwgdC5kZWxldGVPYmplY3RTdG9yZShMcy5zdG9yZSk7XG4gICAgICAgIH0odCksIGVyKHQpKSwgciA9IHIubmV4dCgoKCkgPT4gXG4gICAgICAgIC8qKlxuICogQ3JlYXRlcyB0aGUgdGFyZ2V0IGdsb2JhbCBzaW5nbGV0b24gcm93LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUaGUgdmVyc2lvbiB1cGdyYWRlIHRyYW5zYWN0aW9uIGZvciBpbmRleGVkZGJcbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5zdG9yZShMcy5zdG9yZSksIG4gPSBuZXcgTHMoXG4gICAgICAgICAgICAvKmhpZ2hlc3RUYXJnZXRJZD0qLyAwLCBcbiAgICAgICAgICAgIC8qbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyPSovIDAsIGN0Lm1pbigpLnRvVGltZXN0YW1wKCksIFxuICAgICAgICAgICAgLyp0YXJnZXRDb3VudD0qLyAwKTtcbiAgICAgICAgICAgIHJldHVybiBlLnB1dChMcy5rZXksIG4pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlcyBpbmRpY2VzIG9uIHRoZSBSZW1vdGVEb2N1bWVudHMgc3RvcmUgdXNlZCBmb3IgYm90aCBtdWx0aS10YWJcbiAqIGFuZCBJbmRleC1GcmVlIHF1ZXJpZXMuXG4gKi8gKGkpKSkpLCBuIDwgNCAmJiBzID49IDQgJiYgKDAgIT09IG4gJiYgKFxuICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcbiAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcbiAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXG4gICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcbiAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXG4gICAgICAgIHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKENzLnN0b3JlKS5CdCgpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoQ3Muc3RvcmUpO1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoQ3Muc3RvcmUsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogQ3Mua2V5UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChDcy51c2VyTXV0YXRpb25zSW5kZXgsIENzLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS5zdG9yZShDcy5zdG9yZSksIGkgPSBuLm1hcCgodCA9PiBzLnB1dCh0KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBHcy53YWl0Rm9yKGkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KHQsIGkpKSkpLCByID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoVXMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogVXMua2V5UGF0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDUgJiYgcyA+PSA1ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLk5lKGkpKSkpLCBuIDwgNiAmJiBzID49IDYgJiYgKHIgPSByLm5leHQoKCgpID0+IChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEZzLnN0b3JlKTtcbiAgICAgICAgfSh0KSwgdGhpcy5rZShpKSkpKSksIG4gPCA3ICYmIHMgPj0gNyAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy54ZShpKSkpKSwgbiA8IDggJiYgcyA+PSA4ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLiRlKHQsIGkpKSkpLCBcbiAgICAgICAgbiA8IDkgJiYgcyA+PSA5ICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXG4gICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKSAmJiB0LmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpO1xuICAgICAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lm9iamVjdFN0b3JlKCRzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZUluZGV4KCRzLnJlYWRUaW1lSW5kZXgsICRzLnJlYWRUaW1lSW5kZXhQYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KSwgZS5jcmVhdGVJbmRleCgkcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleCwgJHMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXhQYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCAxMCAmJiBzID49IDEwICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLkZlKGkpKSkpLCBuIDwgMTEgJiYgcyA+PSAxMSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKHFzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IHFzLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEtzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IEtzLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0KTtcbiAgICAgICAgfSkpKSwgcjtcbiAgICB9XG4gICAga2UodCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKCRzLnN0b3JlKS5qdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgKz0gU2kobik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IEZzKGUpO1xuICAgICAgICAgICAgcmV0dXJuIHQuc3RvcmUoRnMuc3RvcmUpLnB1dChGcy5rZXksIG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIE5lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoRHMuc3RvcmUpLCBuID0gdC5zdG9yZShDcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiBlLkJ0KCkubmV4dCgoZSA9PiBHcy5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUudXNlcklkLCAtMSBdLCBbIGUudXNlcklkLCBlLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG4uQnQoQ3MudXNlck11dGF0aW9uc0luZGV4LCBzKS5uZXh0KChuID0+IEdzLmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIEIobi51c2VySWQgPT09IGUudXNlcklkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gX2kodGhpcy5rLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gVmkodCwgZS51c2VySWQsIHMpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgeGUodCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShNcy5zdG9yZSksIG4gPSB0LnN0b3JlKCRzLnN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoTHMuc3RvcmUpLmdldChMcy5rZXkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIG4uanQoKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBkdChuKSwgbyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCwgUnModCkgXTtcbiAgICAgICAgICAgICAgICB9KHIpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlLmdldChvKS5uZXh0KChuID0+IG4gPyBHcy5yZXNvbHZlKCkgOiAobiA9PiBlLnB1dChuZXcgTXMoMCwgUnMobiksIHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSkpKHIpKSkpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IEdzLndhaXRGb3IocykpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAkZSh0LCBlKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW5kZXguXG4gICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoQnMuc3RvcmUsIHtcbiAgICAgICAgICAgIGtleVBhdGg6IEJzLmtleVBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG4gPSBlLnN0b3JlKEJzLnN0b3JlKSwgcyA9IG5ldyBBaSwgaSA9IHQgPT4ge1xuICAgICAgICAgICAgaWYgKHMuYWRkKHQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgcyA9IHQucG9wTGFzdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBScyhzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cbiAgICAgICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxuICAgICAgICByZXR1cm4gZS5zdG9yZSgkcy5zdG9yZSkuanQoe1xuICAgICAgICAgICAgS3Q6ICEwXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBkdCh0KTtcbiAgICAgICAgICAgIHJldHVybiBpKG4ucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUuc3RvcmUoTnMuc3RvcmUpLmp0KHtcbiAgICAgICAgICAgIEt0OiAhMFxuICAgICAgICB9LCAoKFt0LCBlLCBuXSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHZzKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGkoci5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgRmUodCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShPcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiBlLmp0KCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG1pKG4pLCBpID0gZ2kodGhpcy5rLCBzKTtcbiAgICAgICAgICAgIHJldHVybiBlLnB1dChpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZXIodCkge1xuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoTXMuc3RvcmUsIHtcbiAgICAgICAga2V5UGF0aDogTXMua2V5UGF0aFxuICAgIH0pLmNyZWF0ZUluZGV4KE1zLmRvY3VtZW50VGFyZ2V0c0luZGV4LCBNcy5kb2N1bWVudFRhcmdldHNLZXlQYXRoLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgdC5jcmVhdGVPYmplY3RTdG9yZShPcy5zdG9yZSwge1xuICAgICAgICBrZXlQYXRoOiBPcy5rZXlQYXRoXG4gICAgfSkuY3JlYXRlSW5kZXgoT3MucXVlcnlUYXJnZXRzSW5kZXhOYW1lLCBPcy5xdWVyeVRhcmdldHNLZXlQYXRoLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShMcy5zdG9yZSk7XG59XG5cbmNvbnN0IG5yID0gXCJGYWlsZWQgdG8gb2J0YWluIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlIGxheWVyLiBUbyBhbGxvdyBzaGFyZWQgYWNjZXNzLCBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uIGhhcyB0byBiZSBlbmFibGVkIGluIGFsbCB0YWJzLiBJZiB5b3UgYXJlIHVzaW5nIGBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjp0cnVlYCwgbWFrZSBzdXJlIHRoYXQgb25seSBvbmUgdGFiIGhhcyBwZXJzaXN0ZW5jZSBlbmFibGVkIGF0IGFueSBnaXZlbiB0aW1lLlwiO1xuXG4vKipcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIGFnZSBpbiBtaWxsaXNlY29uZHMgZm9yIGNsaWVudCBtZXRhZGF0YSBiZWZvcmUgdGhlIGNsaWVudFxuICogaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSBpcyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAqL1xuLyoqXG4gKiBBbiBJbmRleGVkREItYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBwZXJzaXN0ZW50bHlcbiAqIGFjcm9zcyBzZXNzaW9ucy5cbiAqXG4gKiBPbiBXZWIgb25seSwgdGhlIEZpcmVzdG9yZSBTREtzIHN1cHBvcnQgc2hhcmVkIGFjY2VzcyB0byBpdHMgcGVyc2lzdGVuY2VcbiAqIGxheWVyLiBUaGlzIGFsbG93cyBtdWx0aXBsZSBicm93c2VyIHRhYnMgdG8gcmVhZCBhbmQgd3JpdGUgdG8gSW5kZXhlZERiIGFuZFxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXG4gKiBjdXJyZW50bHkgb3B0aW9uYWwgYW5kIG5vdCBlbmFibGVkIHVubGVzcyBhbGwgY2xpZW50cyBpbnZva2VcbiAqIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGB7c3luY2hyb25pemVUYWJzOnRydWV9YC5cbiAqXG4gKiBJbiBtdWx0aS10YWIgbW9kZSwgaWYgbXVsdGlwbGUgY2xpZW50cyBhcmUgYWN0aXZlIGF0IHRoZSBzYW1lIHRpbWUsIHRoZSBTREtcbiAqIHdpbGwgZGVzaWduYXRlIG9uZSBjbGllbnQgYXMgdGhlIOKAnHByaW1hcnkgY2xpZW504oCdLiBBbiBlZmZvcnQgaXMgbWFkZSB0byBwaWNrXG4gKiBhIHZpc2libGUsIG5ldHdvcmstY29ubmVjdGVkIGFuZCBhY3RpdmUgY2xpZW50LCBhbmQgdGhpcyBjbGllbnQgaXNcbiAqIHJlc3BvbnNpYmxlIGZvciBsZXR0aW5nIG90aGVyIGNsaWVudHMga25vdyBhYm91dCBpdHMgcHJlc2VuY2UuIFRoZSBwcmltYXJ5XG4gKiBjbGllbnQgd3JpdGVzIGEgdW5pcXVlIGNsaWVudC1nZW5lcmF0ZWQgaWRlbnRpZmllciAodGhlIGNsaWVudCBJRCkgdG9cbiAqIEluZGV4ZWREYuKAmXMg4oCcb3duZXLigJ0gc3RvcmUgZXZlcnkgNCBzZWNvbmRzLiBJZiB0aGUgcHJpbWFyeSBjbGllbnQgZmFpbHMgdG9cbiAqIHVwZGF0ZSB0aGlzIGVudHJ5LCBhbm90aGVyIGNsaWVudCBjYW4gYWNxdWlyZSB0aGUgbGVhc2UgYW5kIHRha2Ugb3ZlciBhc1xuICogcHJpbWFyeS5cbiAqXG4gKiBTb21lIHBlcnNpc3RlbmNlIG9wZXJhdGlvbnMgaW4gdGhlIFNESyBhcmUgZGVzaWduYXRlZCBhcyBwcmltYXJ5LWNsaWVudCBvbmx5XG4gKiBvcGVyYXRpb25zLiBUaGlzIGluY2x1ZGVzIHRoZSBhY2tub3dsZWRnbWVudCBvZiBtdXRhdGlvbnMgYW5kIGFsbCB1cGRhdGVzIG9mXG4gKiByZW1vdGUgZG9jdW1lbnRzLiBUaGUgZWZmZWN0cyBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSB3cml0dGVuIHRvIHBlcnNpc3RlbmNlXG4gKiBhbmQgdGhlbiBicm9hZGNhc3QgdG8gb3RoZXIgdGFicyB2aWEgTG9jYWxTdG9yYWdlIChzZWVcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgKSwgd2hpY2ggdGhlbiByZWZyZXNoIHRoZWlyIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIFNpbWlsYXJseSwgdGhlIHByaW1hcnkgY2xpZW50IGxpc3RlbnMgdG8gbm90aWZpY2F0aW9ucyBzZW50IGJ5IHNlY29uZGFyeVxuICogY2xpZW50cyB0byBkaXNjb3ZlciBwZXJzaXN0ZW5jZSBjaGFuZ2VzIHdyaXR0ZW4gYnkgc2Vjb25kYXJ5IGNsaWVudHMsIHN1Y2ggYXNcbiAqIHRoZSBhZGRpdGlvbiBvZiBuZXcgbXV0YXRpb25zIGFuZCBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIElmIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZCBhbmQgYW5vdGhlciB0YWIgYWxyZWFkeSBvYnRhaW5lZCB0aGUgcHJpbWFyeVxuICogbGVhc2UsIEluZGV4ZWREYlBlcnNpc3RlbmNlIGVudGVycyBhIGZhaWxlZCBzdGF0ZSBhbmQgYWxsIHN1YnNlcXVlbnRcbiAqIG9wZXJhdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGZhaWwuXG4gKlxuICogQWRkaXRpb25hbGx5LCB0aGVyZSBpcyBhbiBvcHRpbWl6YXRpb24gc28gdGhhdCB3aGVuIGEgdGFiIGlzIGNsb3NlZCwgdGhlXG4gKiBwcmltYXJ5IGxlYXNlIGlzIHJlbGVhc2VkIGltbWVkaWF0ZWx5ICh0aGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IHRvIG1ha2VcbiAqIHN1cmUgdGhhdCBhIHJlZnJlc2hlZCB0YWIgaXMgYWJsZSB0byBpbW1lZGlhdGVseSByZS1hY3F1aXJlIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSkuIFVuZm9ydHVuYXRlbHksIEluZGV4ZWREQiBjYW5ub3QgYmUgcmVsaWFibHkgdXNlZCBpbiB3aW5kb3cudW5sb2FkXG4gKiBzaW5jZSBpdCBpcyBhbiBhc3luY2hyb25vdXMgQVBJLiBTbyBpbiBhZGRpdGlvbiB0byBhdHRlbXB0aW5nIHRvIGdpdmUgdXAgdGhlXG4gKiBsZWFzZSwgdGhlIGxlYXNlaG9sZGVyIHdyaXRlcyBpdHMgY2xpZW50IElEIHRvIGEgXCJ6b21iaWVkQ2xpZW50XCIgZW50cnkgaW5cbiAqIExvY2FsU3RvcmFnZSB3aGljaCBhY3RzIGFzIGFuIGluZGljYXRvciB0aGF0IGFub3RoZXIgdGFiIHNob3VsZCBnbyBhaGVhZCBhbmRcbiAqIHRha2UgdGhlIHByaW1hcnkgbGVhc2UgaW1tZWRpYXRlbHkgcmVnYXJkbGVzcyBvZiB0aGUgY3VycmVudCBsZWFzZSB0aW1lc3RhbXAuXG4gKlxuICogVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSBgc3luY2hyb25pemVUYWJzYCBzZWN0aW9uIHdoZW4gbXVsdGktdGFiIGlzIG5vXG4gKiBsb25nZXIgb3B0aW9uYWwuXG4gKi9cbmNsYXNzIHNyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN5bmNocm9uaXplIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgbXVsdGlwbGUgdGFicyBhbmQgc2hhcmVcbiAgICAgKiBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcywgaSwgciwgbywgYSwgYywgXG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRvIHRydWUsIGZvcmNlZnVsbHkgb2J0YWlucyBkYXRhYmFzZSBhY2Nlc3MuIEV4aXN0aW5nIHRhYnMgd2lsbFxuICAgICAqIG5vIGxvbmdlciBiZSBhYmxlIHRvIGFjY2VzcyBJbmRleGVkREIuXG4gICAgICovXG4gICAgdSkge1xuICAgICAgICBpZiAodGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IHQsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBlLCB0aGlzLmNsaWVudElkID0gbiwgXG4gICAgICAgIHRoaXMuT2UgPSBpLCB0aGlzLndpbmRvdyA9IHIsIHRoaXMuZG9jdW1lbnQgPSBvLCB0aGlzLk1lID0gYywgdGhpcy5MZSA9IHUsIHRoaXMuQmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5VZSA9ICExLCB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gITAsIFxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5xZSA9IG51bGwsIHRoaXMuaW5Gb3JlZ3JvdW5kID0gITEsIFxuICAgICAgICAvKiogT3VyICd2aXNpYmlsaXR5Y2hhbmdlJyBsaXN0ZW5lciBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLktlID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cbiAgICAgICAgdGhpcy5qZSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cbiAgICAgICAgdGhpcy5RZSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgXG4gICAgICAgIC8qKiBBIGxpc3RlbmVyIHRvIG5vdGlmeSBvbiBwcmltYXJ5IHN0YXRlIGNoYW5nZXMuICovXG4gICAgICAgIHRoaXMuV2UgPSB0ID0+IFByb21pc2UucmVzb2x2ZSgpLCAhc3IuYnQoKSkgdGhyb3cgbmV3IGooSy5VTklNUExFTUVOVEVELCBcIlRoaXMgcGxhdGZvcm0gaXMgZWl0aGVyIG1pc3NpbmcgSW5kZXhlZERCIG9yIGlzIGtub3duIHRvIGhhdmUgYW4gaW5jb21wbGV0ZSBpbXBsZW1lbnRhdGlvbi4gT2ZmbGluZSBwZXJzaXN0ZW5jZSBoYXMgYmVlbiBkaXNhYmxlZC5cIik7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgUWkodGhpcywgcyksIHRoaXMuR2UgPSBlICsgXCJtYWluXCIsIHRoaXMuayA9IG5ldyBjaShhKSwgXG4gICAgICAgIHRoaXMuemUgPSBuZXcgSHModGhpcy5HZSwgMTEsIG5ldyB0cih0aGlzLmspKSwgdGhpcy5IZSA9IG5ldyBGaSh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLCB0aGlzLmspLCBcbiAgICAgICAgdGhpcy5KdCA9IG5ldyBSaSwgdGhpcy5KZSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSGkodCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBzcGVjaWZpZWQgcmVhZFxuICogdGltZS5cbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAodGhpcy5rLCB0aGlzLkp0KSwgdGhpcy5ZZSA9IG5ldyBwaSwgdGhpcy53aW5kb3cgJiYgdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlID8gdGhpcy5YZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA6ICh0aGlzLlhlID0gbnVsbCwgXG4gICAgICAgICExID09PSB1ICYmIEYoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBhbHJlYWR5IGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZFxuICAgICAgICAvLyBkby5cbiAgICAgICAgcmV0dXJuIHRoaXMuWmUoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgIC8vIEZhaWwgYHN0YXJ0KClgIGlmIGBzeW5jaHJvbml6ZVRhYnNgIGlzIGRpc2FibGVkIGFuZCB3ZSBjYW5ub3RcbiAgICAgICAgICAgIC8vIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgbnIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG4oKSwgdGhpcy5lbigpLCB0aGlzLm5uKCksIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcIiwgXCJyZWFkb25seVwiLCAodCA9PiB0aGlzLkhlLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSkpO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLkJlID0gbmV3IGV0KHQsIHRoaXMuTWUpO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5VZSA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4gKHRoaXMuemUgJiYgdGhpcy56ZS5jbG9zZSgpLCBQcm9taXNlLnJlamVjdCh0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNuKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuV2UgPSBhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiB0KGUpO1xuICAgICAgICB9LCB0KHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLnplLnh0KChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMuWmUoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBaZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gcnIodCkucHV0KG5ldyBVcyh0aGlzLmNsaWVudElkLCBEYXRlLm5vdygpLCB0aGlzLm5ldHdvcmtFbmFibGVkLCB0aGlzLmluRm9yZWdyb3VuZCkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMucm4odCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLldlKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMub24odCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5hbih0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMuY24odCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKFhzKHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLk9lLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuV2UodCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJuKHQpIHtcbiAgICAgICAgcmV0dXJuIGlyKHQpLmdldChTcy5rZXkpLm5leHQoKHQgPT4gR3MucmVzb2x2ZSh0aGlzLnVuKHQpKSkpO1xuICAgIH1cbiAgICBobih0KSB7XG4gICAgICAgIHJldHVybiBycih0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBsbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmZuKHRoaXMuUWUsIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLlFlID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGlpKHQsIFVzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5CdCgpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5kbih0LCAxOGU1KSwgcyA9IHQuZmlsdGVyKCh0ID0+IC0xID09PSBuLmluZGV4T2YodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdzLmZvckVhY2gocywgKHQgPT4gZS5kZWxldGUodC5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5YZSkgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuWGUucmVtb3ZlSXRlbSh0aGlzLnduKGUuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIG5uKCkge1xuICAgICAgICB0aGlzLmplID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogQ2xpZW50TWV0YWRhdGFSZWZyZXNoICovICwgNGUzLCAoKCkgPT4gdGhpcy5aZSgpLnRoZW4oKCgpID0+IHRoaXMubG4oKSkpLnRoZW4oKCgpID0+IHRoaXMubm4oKSkpKSk7XG4gICAgfVxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqLyAgICB1bih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgdC5vd25lcklkID09PSB0aGlzLmNsaWVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxuICAgICAqLyAgICBvbih0KSB7XG4gICAgICAgIGlmICh0aGlzLkxlKSByZXR1cm4gR3MucmVzb2x2ZSghMCk7XG4gICAgICAgIHJldHVybiBpcih0KS5nZXQoU3Mua2V5KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSB0aGUgYGZvcmNlT3duaW5nVGFiYCBzZXR0aW5nIHdhcyBwYXNzZWQgaW4uXG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLmZuKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5fbihlLm93bmVySWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudW4oZSkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy51bihlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgbnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEoIXRoaXMubmV0d29ya0VuYWJsZWQgfHwgIXRoaXMuaW5Gb3JlZ3JvdW5kKSB8fCBycih0KS5CdCgpLm5leHQoKHQgPT4gdm9pZCAwID09PSB0aGlzLmRuKHQsIDVlMykuZmluZCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IHQuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIHQubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgdC5pbkZvcmVncm91bmQsIHMgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSB0Lm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSB8fCBuICYmIHMpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke3QgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5VZSA9ICExLCB0aGlzLm1uKCksIHRoaXMuamUgJiYgKHRoaXMuamUuY2FuY2VsKCksIHRoaXMuamUgPSBudWxsKSwgdGhpcy5nbigpLCBcbiAgICAgICAgdGhpcy55bigpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuemUucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFNzLnN0b3JlLCBVcy5zdG9yZSBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IHNpKHQsIGV0LkkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW4oZSkubmV4dCgoKCkgPT4gdGhpcy5obihlKSkpO1xuICAgICAgICB9KSksIHRoaXMuemUuY2xvc2UoKSwgXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZW50cnkgbWFya2luZyB0aGUgY2xpZW50IGFzIHpvbWJpZWQgZnJvbSBMb2NhbFN0b3JhZ2Ugc2luY2VcbiAgICAgICAgLy8gd2Ugc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgaXRzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLlxuICAgICAgICB0aGlzLnBuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcbiAgICAgKiBwcm92aWRlZCB0aHJlc2hvbGQuXG4gICAgICovICAgIGRuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuZmlsdGVyKCh0ID0+IHRoaXMuZm4odC51cGRhdGVUaW1lTXMsIGUpICYmICF0aGlzLl9uKHQuY2xpZW50SWQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiBJZiBtdWx0aS10YWJcbiAgICAgKiBpcyBub3Qgc3VwcG9ydGVkLCByZXR1cm5zIGFuIGFycmF5IHRoYXQgb25seSBjb250YWlucyB0aGUgbG9jYWwgY2xpZW50J3NcbiAgICAgKiBJRC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIFRuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEFjdGl2ZUNsaWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBycih0KS5CdCgpLm5leHQoKHQgPT4gdGhpcy5kbih0LCAxOGU1KS5tYXAoKHQgPT4gdC5jbGllbnRJZCkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVlO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQpIHtcbiAgICAgICAgcmV0dXJuIERpLlh0KHQsIHRoaXMuaywgdGhpcy5KdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmU7XG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnQ7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZZTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBcInJlYWRvbmx5XCIgPT09IGUgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuemUucnVuVHJhbnNhY3Rpb24odCwgcywganMsIChzID0+IChpID0gbmV3IHNpKHMsIHRoaXMuQmUgPyB0aGlzLkJlLm5leHQoKSA6IGV0LkkpLCBcbiAgICAgICAgXCJyZWFkd3JpdGUtcHJpbWFyeVwiID09PSBlID8gdGhpcy5ybihpKS5uZXh0KCh0ID0+ICEhdCB8fCB0aGlzLm9uKGkpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHRocm93IEYoYEZhaWxlZCB0byBvYnRhaW4gcHJpbWFyeSBsZWFzZSBmb3IgYWN0aW9uICcke3R9Jy5gKSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgXG4gICAgICAgICAgICB0aGlzLk9lLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuV2UoITEpKSksIG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgUXMpO1xuICAgICAgICAgICAgcmV0dXJuIG4oaSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+IHRoaXMuY24oaSkubmV4dCgoKCkgPT4gdCkpKSkgOiB0aGlzLkVuKGkpLm5leHQoKCgpID0+IG4oaSkpKSkpKS50aGVuKCh0ID0+IChpLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgY3VycmVudCB0YWIgaXMgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIgb3IgYWx0ZXJuYXRpdmVseVxuICAgICAqIHRoYXQgdGhlIGxlYXNlaG9sZGVyIGhhcyBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuIG5vIGxvbmdlclxuICAgIC8vIGJlIHR1cm5lZCBvZmYuXG4gICAgRW4odCkge1xuICAgICAgICByZXR1cm4gaXIodCkuZ2V0KFNzLmtleSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiB0aGlzLmZuKHQubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5fbih0Lm93bmVySWQpICYmICF0aGlzLnVuKHQpICYmICEodGhpcy5MZSB8fCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uICYmIHQuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIG5yKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXG4gICAgICogbWV0aG9kIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoaXMgbGVhc2UuXG4gICAgICovICAgIGNuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBTcyh0aGlzLmNsaWVudElkLCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uLCBEYXRlLm5vdygpKTtcbiAgICAgICAgcmV0dXJuIGlyKHQpLnB1dChTcy5rZXksIGUpO1xuICAgIH1cbiAgICBzdGF0aWMgYnQoKSB7XG4gICAgICAgIHJldHVybiBIcy5idCgpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHRoZSBwcmltYXJ5IGxlYXNlIGFuZCByZW1vdmVzIGl0IGlmIHdlIGFyZSB0aGUgY3VycmVudCBwcmltYXJ5LiAqLyAgICBhbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBpcih0KTtcbiAgICAgICAgcmV0dXJuIGUuZ2V0KFNzLmtleSkubmV4dCgodCA9PiB0aGlzLnVuKHQpID8gKCQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBwcmltYXJ5IGxlYXNlLlwiKSwgXG4gICAgICAgIGUuZGVsZXRlKFNzLmtleSkpIDogR3MucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqLyAgICBmbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gISh0IDwgbiAtIGUpICYmICghKHQgPiBuKSB8fCAoRihgRGV0ZWN0ZWQgYW4gdXBkYXRlIHRpbWUgdGhhdCBpcyBpbiB0aGUgZnV0dXJlOiAke3R9ID4gJHtufWApLCBcbiAgICAgICAgITEpKTtcbiAgICB9XG4gICAgdG4oKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuZG9jdW1lbnQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgKHRoaXMuS2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLk9lLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSwgXG4gICAgICAgICAgICB0aGlzLlplKCkpKSk7XG4gICAgICAgIH0sIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5LZSksIHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICB9XG4gICAgZ24oKSB7XG4gICAgICAgIHRoaXMuS2UgJiYgKHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5LZSksIHRoaXMuS2UgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0YWNoZXMgYSB3aW5kb3cudW5sb2FkIGhhbmRsZXIgdGhhdCB3aWxsIHN5bmNocm9ub3VzbHkgd3JpdGUgb3VyXG4gICAgICogY2xpZW50SWQgdG8gYSBcInpvbWJpZSBjbGllbnQgaWRcIiBsb2NhdGlvbiBpbiBMb2NhbFN0b3JhZ2UuIFRoaXMgY2FuIGJlIHVzZWRcbiAgICAgKiBieSB0YWJzIHRyeWluZyB0byBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIHRvIGRldGVybWluZSB0aGF0IHRoZSBsZWFzZVxuICAgICAqIGlzIG5vIGxvbmdlciB2YWxpZCBldmVuIGlmIHRoZSB0aW1lc3RhbXAgaXMgcmVjZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseVxuICAgICAqIGltcG9ydGFudCBmb3IgdGhlIHJlZnJlc2ggY2FzZSAoc28gdGhlIHRhYiBjb3JyZWN0bHkgcmUtYWNxdWlyZXMgdGhlXG4gICAgICogcHJpbWFyeSBsZWFzZSkuIExvY2FsU3RvcmFnZSBpcyB1c2VkIGZvciB0aGlzIHJhdGhlciB0aGFuIEluZGV4ZWREYiBiZWNhdXNlXG4gICAgICogaXQgaXMgYSBzeW5jaHJvbm91cyBBUEkgYW5kIHNvIGNhbiBiZSB1c2VkIHJlbGlhYmx5IGZyb20gIGFuIHVubG9hZFxuICAgICAqIGhhbmRsZXIuXG4gICAgICovICAgIGVuKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiAobnVsbCA9PT0gKHQgPSB0aGlzLndpbmRvdykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5hZGRFdmVudExpc3RlbmVyKSAmJiAodGhpcy5xZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEluIHRoZW9yeSwgdGhpcyBzaG91bGQgYmUgc2NoZWR1bGVkIG9uIHRoZSBBc3luY1F1ZXVlIHNpbmNlIGl0XG4gICAgICAgICAgICAvLyBhY2Nlc3NlcyBpbnRlcm5hbCBzdGF0ZS4gV2UgZXhlY3V0ZSB0aGlzIGNvZGUgZGlyZWN0bHkgZHVyaW5nIHNodXRkb3duXG4gICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBhIGNoYW5jZSB0byBydW4uXG4gICAgICAgICAgICB0aGlzLm1uKCksIGlzU2FmYXJpKCkgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL1ZlcnNpb25cXC8xWzQ1XS8pICYmIFxuICAgICAgICAgICAgLy8gT24gU2FmYXJpIDE0IGFuZCAxNSwgd2UgZG8gbm90IHJ1biBhbnkgY2xlYW51cCBhY3Rpb25zIGFzIGl0IG1pZ2h0XG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGEgYnVnIHRoYXQgcHJldmVudHMgU2FmYXJpIGZyb20gcmUtb3BlbmluZyBJbmRleGVkREIgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGUgbmV4dCBwYWdlIGxvYWQuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyNjU0N1xuICAgICAgICAgICAgdGhpcy5PZS5lbnRlclJlc3RyaWN0ZWRNb2RlKC8qIHB1cmdlRXhpc3RpbmdUYXNrcz0gKi8gITApLCB0aGlzLk9lLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpO1xuICAgICAgICB9LCB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5xZSkpO1xuICAgIH1cbiAgICB5bigpIHtcbiAgICAgICAgdGhpcy5xZSAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMucWUpLCB0aGlzLnFlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXG4gICAgICovICAgIF9uKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKG51bGwgPT09IChlID0gdGhpcy5YZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5nZXRJdGVtKHRoaXMud24odCkpKTtcbiAgICAgICAgICAgIHJldHVybiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAnJHt0fScgJHtuID8gXCJpc1wiIDogXCJpcyBub3RcIn0gem9tYmllZCBpbiBMb2NhbFN0b3JhZ2VgKSwgXG4gICAgICAgICAgICBuO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgIHJldHVybiBGKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLCB0KSwgITE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXG4gICAgICovICAgIG1uKCkge1xuICAgICAgICBpZiAodGhpcy5YZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWGUuc2V0SXRlbSh0aGlzLnduKHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cbiAgICAgICAgICAgIEYoXCJGYWlsZWQgdG8gc2V0IHpvbWJpZSBjbGllbnQgaWQuXCIsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBSZW1vdmVzIHRoZSB6b21iaWVkIGNsaWVudCBlbnRyeSBpZiBpdCBleGlzdHMuICovICAgIHBuKCkge1xuICAgICAgICBpZiAodGhpcy5YZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWGUucmVtb3ZlSXRlbSh0aGlzLnduKHRoaXMuY2xpZW50SWQpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH1cbiAgICB9XG4gICAgd24odCkge1xuICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV96b21iaWVfJHt0aGlzLnBlcnNpc3RlbmNlS2V5fV8ke3R9YDtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBwcmltYXJ5IGNsaWVudCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gaXIodCkge1xuICAgIHJldHVybiBpaSh0LCBTcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHJyKHQpIHtcbiAgICByZXR1cm4gaWkodCwgVXMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBvcih0LCBlKSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IHQucHJvamVjdElkO1xuICAgIHJldHVybiB0LmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgdC5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgZSArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgYXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHQsIHRoaXMuSW4gPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyBjciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLkplID0gdCwgdGhpcy5BbiA9IGUsIHRoaXMuSnQgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxuICAgICAqIHN0YXRlIGZvciBpdC5cbiAgICAgKi8gICAgUm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Bbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKS5uZXh0KChuID0+IHRoaXMuUG4odCwgZSwgbikpKTtcbiAgICB9XG4gICAgLyoqIEludGVybmFsIHZlcnNpb24gb2YgYGdldERvY3VtZW50YCB0aGF0IGFsbG93cyByZXVzaW5nIGJhdGNoZXMuICovICAgIFBuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmUuZ2V0RW50cnkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZS5hcHBseVRvTG9jYWxWaWV3KHQpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmlldyBvZiB0aGUgZ2l2ZW4gYGRvY3NgIGFzIHRoZXkgd291bGQgYXBwZWFyIGFmdGVyIGFwcGx5aW5nXG4gICAgLy8gYWxsIG11dGF0aW9ucyBpbiB0aGUgZ2l2ZW4gYGJhdGNoZXNgLlxuICAgIGJuKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHQuYXBwbHlUb0xvY2FsVmlldyhuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgaWRlbnRpZmllZCBieSBga2V5c2AuXG4gICAgICpcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXG4gICAgICogYmUgc3RvcmVkIGZvciB0aGF0IGtleSBpbiB0aGUgcmVzdWx0aW5nIHNldC5cbiAgICAgKi8gICAgdm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5KZS5nZXRFbnRyaWVzKHQsIGUpLm5leHQoKGUgPT4gdGhpcy5Wbih0LCBlKS5uZXh0KCgoKSA9PiBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbG9jYWwgdmlldyB0aGUgZ2l2ZW4gYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzXG4gICAgICogZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICovICAgIFZuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpLm5leHQoKHQgPT4gdGhpcy5ibihlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHZpZXcgb2YgYWxsIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXG4gICAgICogQHBhcmFtIHNpbmNlUmVhZFRpbWUgLSBJZiBub3Qgc2V0IHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcmV0dXJuIG9ubHlcbiAgICAgKiAgICAgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHJlYWQgc2luY2UgdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIChleGNsdXNpdmUpLlxuICAgICAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBTdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgfShlKSA/IHRoaXMuU24odCwgZS5wYXRoKSA6IEllKGUpID8gdGhpcy5Ebih0LCBlLCBuKSA6IHRoaXMuQ24odCwgZSwgbik7XG4gICAgfVxuICAgIFNuKHQsIGUpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLlJuKHQsIG5ldyBTdChlKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IFBuKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoZSA9IGUuaW5zZXJ0KHQua2V5LCB0KSksIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRG4odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBpID0gUG4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnQuZ2V0Q29sbGVjdGlvblBhcmVudHModCwgcykubmV4dCgociA9PiBHcy5mb3JFYWNoKHIsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBfZShlLCBcbiAgICAgICAgICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovIChlLCByLmNoaWxkKHMpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkNuKHQsIG8sIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKSkpO1xuICAgIH1cbiAgICBDbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IHMsIGk7XG4gICAgICAgIHJldHVybiB0aGlzLkplLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgobiA9PiAocyA9IG4sIHRoaXMuQW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIFxuICAgICAgICB0aGlzLk5uKHQsIGksIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgaSkgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUua2V5O1xuICAgICAgICAgICAgICAgIGxldCBpID0gcy5nZXQobik7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSBpICYmIChcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaW52YWxpZCBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgb24gdG9wIG9mXG4gICAgICAgICAgICAgICAgaSA9IFd0Lm5ld0ludmFsaWREb2N1bWVudChuKSwgcyA9IHMuaW5zZXJ0KG4sIGkpKSwgdG4oZSwgaSwgdC5sb2NhbFdyaXRlVGltZSksIGkuaXNGb3VuZERvY3VtZW50KCkgfHwgKHMgPSBzLnJlbW92ZShuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSkpKS5uZXh0KCgoKSA9PiAoXG4gICAgICAgIC8vIEZpbmFsbHksIGZpbHRlciBvdXQgYW55IGRvY3VtZW50cyB0aGF0IGRvbid0IGFjdHVhbGx5IG1hdGNoXG4gICAgICAgIC8vIHRoZSBxdWVyeS5cbiAgICAgICAgcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgU2UoZSwgbikgfHwgKHMgPSBzLnJlbW92ZSh0KSk7XG4gICAgICAgIH0pKSwgcykpKTtcbiAgICB9XG4gICAgTm4odCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFNuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIGUgaW5zdGFuY2VvZiBvbiAmJiBudWxsID09PSBuLmdldChlLmtleSkgJiYgKHMgPSBzLmFkZChlLmtleSkpO1xuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIHJldHVybiB0aGlzLkplLmdldEVudHJpZXModCwgcykubmV4dCgodCA9PiAodC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuaW5zZXJ0KHQsIGUpKTtcbiAgICAgICAgfSkpLCBpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqLyBjbGFzcyB1ciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlLCB0aGlzLmtuID0gbiwgdGhpcy54biA9IHM7XG4gICAgfVxuICAgIHN0YXRpYyAkbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gU24oKSwgcyA9IFNuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmRvY0NoYW5nZXMpIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgIG4gPSBuLmFkZCh0LmRvYy5rZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICBzID0gcy5hZGQodC5kb2Mua2V5KTtcbiAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHVyKHQsIGUuZnJvbUNhY2hlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcXVlcnkgZW5naW5lIHRoYXQgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXQgZG9jdW1lbnQgbWFwcGluZyBpbiB0aGVcbiAqIFF1ZXJ5Q2FjaGUuIFF1ZXJ5IGV4ZWN1dGlvbiBpcyBvcHRpbWl6ZWQgYnkgb25seSByZWFkaW5nIHRoZSBkb2N1bWVudHMgdGhhdFxuICogcHJldmlvdXNseSBtYXRjaGVkIGEgcXVlcnkgcGx1cyBhbnkgZG9jdW1lbnRzIHRoYXQgd2VyZSBlZGl0ZWQgYWZ0ZXIgdGhlXG4gKiBxdWVyeSB3YXMgbGFzdCBsaXN0ZW5lZCB0by5cbiAqXG4gKiBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVuIHRoaXMgb3B0aW1pemF0aW9uIGlzIG5vdCBndWFyYW50ZWVkIHRvIHByb2R1Y2VcbiAqIHRoZSBzYW1lIHJlc3VsdHMgYXMgZnVsbCBjb2xsZWN0aW9uIHNjYW5zLiBJbiB0aGVzZSBjYXNlcywgcXVlcnlcbiAqIHByb2Nlc3NpbmcgZmFsbHMgYmFjayB0byBmdWxsIHNjYW5zLiBUaGVzZSBjYXNlcyBhcmU6XG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBwcmV2aW91c2x5IG5vIGxvbmdlclxuICogICBtYXRjaGVzIHRoZSBxdWVyeS5cbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCBlZGl0IG1heSBjYXVzZSB0aGUgZG9jdW1lbnQgdG8gc29ydCBiZWxvd1xuICogICBhbm90aGVyIGRvY3VtZW50IHRoYXQgaXMgaW4gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIC0gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBDVVJSRU5UIG9yIGZyZWUgb2YgbGltYm8gZG9jdW1lbnRzLlxuICovIGNsYXNzIGhyIHtcbiAgICAvKiogU2V0cyB0aGUgZG9jdW1lbnQgdmlldyB0byBxdWVyeSBhZ2FpbnN0LiAqL1xuICAgIEZuKHQpIHtcbiAgICAgICAgdGhpcy5PbiA9IHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSB0LmxpbWl0ICYmIG51bGwgPT0gdC5zdGFydEF0ICYmIG51bGwgPT0gdC5lbmRBdCAmJiAoMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xuICAgICAgICB9KGUpIHx8IG4uaXNFcXVhbChjdC5taW4oKSkgPyB0aGlzLk1uKHQsIGUpIDogdGhpcy5Pbi52bih0LCBzKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLkxuKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuICh5ZShlKSB8fCBwZShlKSkgJiYgdGhpcy5CbihlLmxpbWl0VHlwZSwgciwgcywgbikgPyB0aGlzLk1uKHQsIGUpIDogKGsoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiAkKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCBuLnRvU3RyaW5nKCksIFZlKGUpKSwgXG4gICAgICAgICAgICB0aGlzLk9uLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgodCA9PiAoXG4gICAgICAgICAgICAvLyBXZSBtZXJnZSBgcHJldmlvdXNSZXN1bHRzYCBpbnRvIGB1cGRhdGVSZXN1bHRzYCwgc2luY2VcbiAgICAgICAgICAgIC8vIGB1cGRhdGVSZXN1bHRzYCBpcyBhbHJlYWR5IGEgRG9jdW1lbnRNYXAuIElmIGEgZG9jdW1lbnQgaXNcbiAgICAgICAgICAgIC8vIGNvbnRhaW5lZCBpbiBib3RoIGxpc3RzLCB0aGVuIGl0cyBjb250ZW50cyBhcmUgdGhlIHNhbWUuXG4gICAgICAgICAgICByLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLmtleSwgZSk7XG4gICAgICAgICAgICB9KSksIHQpKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgTG4odCwgZSkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgVG4oRGUodCkpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcykgPT4ge1xuICAgICAgICAgICAgU2UodCwgcykgJiYgKG4gPSBuLmFkZChzKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICBCbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIGlmIChuLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdCA/IGUubGFzdCgpIDogZS5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhzKSA+IDApO1xuICAgIH1cbiAgICBNbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBrKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgJChcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgVmUoZSkpLCBcbiAgICAgICAgdGhpcy5Pbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIGN0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgbHIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLlVuID0gZSwgdGhpcy5rID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xbiA9IG5ldyBnbihpdCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLktuID0gbmV3IEdpKCh0ID0+IEh0KHQpKSwgWXQpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZWFkIHRpbWUgb2YgdGhlIGxhc3QgZW50cnkgcHJvY2Vzc2VkIGJ5IGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmpuID0gY3QubWluKCksIHRoaXMuQW4gPSB0LmdldE11dGF0aW9uUXVldWUobiksIHRoaXMuUW4gPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuSGUgPSB0LmdldFRhcmdldENhY2hlKCksIHRoaXMuV24gPSBuZXcgY3IodGhpcy5RbiwgdGhpcy5BbiwgdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSksIFxuICAgICAgICB0aGlzLlllID0gdC5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLlVuLkZuKHRoaXMuV24pO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdC5jb2xsZWN0KGUsIHRoaXMucW4pKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmcihcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbnQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gbmV3IGxyKHQsIGUsIG4sIHMpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIGRyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBsZXQgcyA9IG4uQW4sIGkgPSBuLlduO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLkFuLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KS5uZXh0KChvID0+IChyID0gbywgcyA9IG4ucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShlKSwgXG4gICAgICAgIC8vIFJlY3JlYXRlIG91ciBMb2NhbERvY3VtZW50c1ZpZXcgdXNpbmcgdGhlIG5ld1xuICAgICAgICAvLyBNdXRhdGlvblF1ZXVlLlxuICAgICAgICBpID0gbmV3IGNyKG4uUW4sIHMsIG4ucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpLCBzLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBTbigpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHtcbiAgICAgICAgICAgICAgICBuLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgIHMucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS52bih0LCBvKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgR246IHQsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBuLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHNcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIG4uQW4gPSBzLCBuLlduID0gaSwgbi5Vbi5GbihuLlduKSwgcjtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIHdyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLlFuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IEdzLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBCKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICBzLmFkZEVudHJ5KGUsIG4uY29tbWl0VmVyc2lvbikpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiB0LkFuLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCB0LCBlLCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5Bbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uV24udm4odCwgcykpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBfcih0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuSGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gbXIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5zbmFwc2hvdFZlcnNpb247XG4gICAgbGV0IGkgPSBuLnFuO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgcmVtb3RlIGV2ZW50XCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gbi5Rbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXG4gICAgICAgICAgICAgICAgaSA9IG4ucW47XG4gICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChlLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gaS5nZXQocik7XG4gICAgICAgICAgICBpZiAoIWEpIHJldHVybjtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobi5IZS5yZW1vdmVNYXRjaGluZ0tleXModCwgZS5yZW1vdmVkRG9jdW1lbnRzLCByKS5uZXh0KCgoKSA9PiBuLkhlLmFkZE1hdGNoaW5nS2V5cyh0LCBlLmFkZGVkRG9jdW1lbnRzLCByKSkpKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBlLnJlc3VtZVRva2VuO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXN1bWUgdG9rZW4gaWYgdGhlIGNoYW5nZSBpbmNsdWRlcyBvbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IGEud2l0aFJlc3VtZVRva2VuKGMsIHMpLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHIsIHUpLCBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChCKGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksIDAgPT09IHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChhLCB1LCBlKSAmJiBvLnB1c2gobi5IZS51cGRhdGVUYXJnZXREYXRhKHQsIHUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgYSA9IEFuKCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmIChlLmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgZS5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhzKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHQsIHMpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbCB0aGUgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaChncih0LCByLCBlLmRvY3VtZW50VXBkYXRlcywgcywgdm9pZCAwKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGEgPSB0O1xuICAgICAgICB9KSkpLCAhcy5pc0VxdWFsKGN0Lm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4uSGUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KS5uZXh0KChlID0+IG4uSGUuc2V0VGFyZ2V0c01ldGFkYXRhKHQsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyLCBzKSkpO1xuICAgICAgICAgICAgby5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHcy53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHIuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLlduLlZuKHQsIGEpKSkubmV4dCgoKCkgPT4gYSkpO1xuICAgIH0pKS50aGVuKCh0ID0+IChuLnFuID0gaSwgdCkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICogQHBhcmFtIGdsb2JhbFZlcnNpb24gLSBBIGBTbmFwc2hvdFZlcnNpb25gIHJlcHJlc2VudGluZyB0aGUgcmVhZCB0aW1lIGlmIGFsbFxuICogICAgICAgIGRvY3VtZW50cyBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZS5cbiAqIEBwYXJhbSBkb2N1bWVudFZlcnNpb25zIC0gQSBEb2N1bWVudEtleS10by1TbmFwc2hvdFZlcnNpb24gbWFwIGlmIGRvY3VtZW50c1xuICogICAgICAgIGhhdmUgdGhlaXIgb3duIHJlYWQgdGltZS5cbiAqXG4gKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIHdpbGwgdXNlIGBkb2N1bWVudFZlcnNpb25zYCBpZiBpdCBpcyBkZWZpbmVkO1xuICogd2hlbiBpdCBpcyBub3QgZGVmaW5lZCwgcmVzb3J0cyB0byBgZ2xvYmFsVmVyc2lvbmAuXG4gKi8gZnVuY3Rpb24gZ3IodCwgZSwgbiwgcywgXG4vLyBUT0RPKHd1YW5keSk6IFdlIGNvdWxkIGFkZCBgcmVhZFRpbWVgIHRvIE1heWJlRG9jdW1lbnQgaW5zdGVhZCB0byByZW1vdmVcbi8vIHRoaXMgcGFyYW1ldGVyLlxuaSkge1xuICAgIGxldCByID0gU24oKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHIgPSByLmFkZCh0KSkpLCBlLmdldEVudHJpZXModCwgcikubmV4dCgodCA9PiB7XG4gICAgICAgIGxldCByID0gQW4oKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0LmdldChuKSwgYyA9IChudWxsID09IGkgPyB2b2lkIDAgOiBpLmdldChuKSkgfHwgcztcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICBvLmlzTm9Eb2N1bWVudCgpICYmIG8udmVyc2lvbi5pc0VxdWFsKGN0Lm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgZS5yZW1vdmVFbnRyeShuLCBjKSwgciA9IHIuaW5zZXJ0KG4sIG8pKSA6ICFhLmlzVmFsaWREb2N1bWVudCgpIHx8IG8udmVyc2lvbi5jb21wYXJlVG8oYS52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gby52ZXJzaW9uLmNvbXBhcmVUbyhhLnZlcnNpb24pICYmIGEuaGFzUGVuZGluZ1dyaXRlcyA/IChlLmFkZEVudHJ5KG8sIGMpLCBcbiAgICAgICAgICAgIHIgPSByLmluc2VydChuLCBvKSkgOiAkKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIGEudmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgby52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCByO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiB5cih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4uQW4uZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBwcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4uSGUuZ2V0VGFyZ2V0RGF0YSh0LCBlKS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgcyA9IGksIEdzLnJlc29sdmUocykpIDogbi5IZS5hbGxvY2F0ZVRhcmdldElkKHQpLm5leHQoKGkgPT4gKHMgPSBuZXcgYWkoZSwgaSwgMCAvKiBMaXN0ZW4gKi8gLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLkhlLmFkZFRhcmdldERhdGEodCwgcykubmV4dCgoKCkgPT4gcykpKSkpKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCBzID0gbi5xbi5nZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gcyB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocy5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4ucW4gPSBuLnFuLmluc2VydCh0LnRhcmdldElkLCB0KSwgXG4gICAgICAgIG4uS24uc2V0KGUsIHQudGFyZ2V0SWQpKSwgdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBUcih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBzLnFuLmdldChlKSwgciA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHIsICh0ID0+IHMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHQsIGkpKSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBpZiAoIVhzKHQpKSB0aHJvdyB0O1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgJChcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7ZX06ICR7dH1gKTtcbiAgICB9XG4gICAgcy5xbiA9IHMucW4ucmVtb3ZlKGUpLCBzLktuLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIEVyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICBsZXQgaSA9IGN0Lm1pbigpLCByID0gU24oKTtcbiAgICByZXR1cm4gcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gcy5Lbi5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyBHcy5yZXNvbHZlKHMucW4uZ2V0KGkpKSA6IHMuSGUuZ2V0VGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9KHMsIHQsIFJlKGUpKS5uZXh0KChlID0+IHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBpID0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBzLkhlLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gcy5Vbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4gPyBpIDogY3QubWluKCksIG4gPyByIDogU24oKSkpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgIGRvY3VtZW50czogdCxcbiAgICAgICAgem46IHJcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBJcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBxKG4uSGUpLCBpID0gbi5xbi5nZXQoZSk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuRXQodCwgZSkubmV4dCgodCA9PiB0ID8gdC50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gQXIodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gcSh0KTtcbiAgICAgICAgbGV0IGkgPSBBbigpLCByID0gbGkobik7XG4gICAgICAgIGNvbnN0IG8gPSBYaShlKSwgYSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQociwgITApO1xuICAgICAgICByZXR1cm4gby5qdCh7XG4gICAgICAgICAgICBpbmRleDogJHMucmVhZFRpbWVJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBhXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgLy8gVW5saWtlIGBnZXRFbnRyeSgpYCBhbmQgb3RoZXJzLCBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgIHBhcnNlc1xuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50cyBkaXJlY3RseSBzaW5jZSB3ZSB3YW50IHRvIGtlZXAgc2VudGluZWwgZGVsZXRlcy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB1aShzLmssIGUpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KG4ua2V5LCBuKSwgciA9IGUucmVhZFRpbWU7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgSW46IGksXG4gICAgICAgICAgICByZWFkVGltZTogZmkocilcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSByZWFkIHRpbWUgb2YgdGhlIG1vc3QgcmVjZW50bHkgcmVhZCBkb2N1bWVudCBpbiB0aGUgY2FjaGUsIG9yXG4gKiBTbmFwc2hvdFZlcnNpb24ubWluKCkgaWYgbm90IGF2YWlsYWJsZS5cbiAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgKGUuUW4sIHQsIGUuam4pKSkudGhlbigoKHtJbjogdCwgcmVhZFRpbWU6IG59KSA9PiAoZS5qbiA9IG4sIHQpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIG5ld2VzdCBkb2N1bWVudCBjaGFuZ2UgZnJvbSBwZXJzaXN0ZW5jZSBhbmQgbW92ZXMgdGhlIGludGVybmFsXG4gKiBzeW5jaHJvbml6YXRpb24gbWFya2VyIGZvcndhcmQgc28gdGhhdCBjYWxscyB0byBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gKiBvbmx5IHJldHVybiBjaGFuZ2VzIHRoYXQgaGFwcGVuZWQgYWZ0ZXIgY2xpZW50IGluaXRpYWxpemF0aW9uLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gUnIodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU3luY2hyb25pemUgbGFzdCBkb2N1bWVudCBjaGFuZ2UgcmVhZCB0aW1lXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gWGkodCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBleGlzdGluZyBlbnRyaWVzLCB3ZSByZXR1cm4gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAgICAgICAgIGxldCBuID0gY3QubWluKCk7XG4gICAgICAgIHJldHVybiBlLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiAkcy5yZWFkVGltZUluZGV4LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnJlYWRUaW1lICYmIChuID0gZmkoZS5yZWFkVGltZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9KHQpKSkudGhlbigodCA9PiB7XG4gICAgICAgIGUuam4gPSB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBQcih0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHEodCk7XG4gICAgbGV0IHIgPSBTbigpLCBvID0gQW4oKSwgYSA9IHZuKCk7XG4gICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUuSG4odC5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgdC5kb2N1bWVudCAmJiAociA9IHIuYWRkKG4pKSwgbyA9IG8uaW5zZXJ0KG4sIGUuSm4odCkpLCBhID0gYS5pbnNlcnQobiwgZS5Zbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIGNvbnN0IGMgPSBpLlFuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIHUgPSBhd2FpdCBwcihpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBSZShnZShkdC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHt0fWApKSk7XG4gICAgfShzKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gZ3IodCwgYywgbywgY3QubWluKCksIGEpLm5leHQoKGUgPT4gKGMuYXBwbHkodCksIFxuICAgIGUpKSkubmV4dCgoZSA9PiBpLkhlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHUudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuSGUuYWRkTWF0Y2hpbmdLZXlzKHQsIHIsIHUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Xbi5Wbih0LCBlKSkpLm5leHQoKCgpID0+IGUpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBicih0LCBlLCBuID0gU24oKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgcyA9IGF3YWl0IHByKHQsIFJlKHlpKGUuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gcSh0KTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gR24oZS5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHMuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyKSA+PSAwKSByZXR1cm4gaS5ZZS5zYXZlTmFtZWRRdWVyeSh0LCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gcy53aXRoUmVzdW1lVG9rZW4oeXQuRU1QVFlfQllURV9TVFJJTkcsIHIpO1xuICAgICAgICByZXR1cm4gaS5xbiA9IGkucW4uaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLkhlLnVwZGF0ZVRhcmdldERhdGEodCwgbykubmV4dCgoKCkgPT4gaS5IZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuSGUuYWRkTWF0Y2hpbmdLZXlzKHQsIG4sIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5ZZS5zYXZlTmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgdnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rID0gdCwgdGhpcy5YbiA9IG5ldyBNYXAsIHRoaXMuWm4gPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuWG4uZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuWG4uc2V0KGUuaWQsIHtcbiAgICAgICAgICAgIGlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogR24obi5jcmVhdGVUaW1lKVxuICAgICAgICB9KSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5abi5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlpuLnNldChlLm5hbWUsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB5aSh0LmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IEduKHQucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBWciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLnRzID0gbmV3IFRuKFNyLmVzKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLm5zID0gbmV3IFRuKFNyLnNzKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTcih0LCBlKTtcbiAgICAgICAgdGhpcy50cyA9IHRoaXMudHMuYWRkKG4pLCB0aGlzLm5zID0gdGhpcy5ucy5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBycyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLmFkZFJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICB0aGlzLm9zKG5ldyBTcih0LCBlKSk7XG4gICAgfVxuICAgIGNzKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIHVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBTdChuZXcgZHQoW10pKSwgbiA9IG5ldyBTcihlLCB0KSwgcyA9IG5ldyBTcihlLCB0ICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMub3ModCksIGkucHVzaCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgaHMoKSB7XG4gICAgICAgIHRoaXMudHMuZm9yRWFjaCgodCA9PiB0aGlzLm9zKHQpKSk7XG4gICAgfVxuICAgIG9zKHQpIHtcbiAgICAgICAgdGhpcy50cyA9IHRoaXMudHMuZGVsZXRlKHQpLCB0aGlzLm5zID0gdGhpcy5ucy5kZWxldGUodCk7XG4gICAgfVxuICAgIGxzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBTdChuZXcgZHQoW10pKSwgbiA9IG5ldyBTcihlLCB0KSwgcyA9IG5ldyBTcihlLCB0ICsgMSk7XG4gICAgICAgIGxldCBpID0gU24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFNyKHQsIDApLCBuID0gdGhpcy50cy5maXJzdEFmdGVyT3JFcXVhbChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgdC5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIFNyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5mcyA9IGU7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyBlcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBTdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSkgfHwgaXQodC5mcywgZS5mcyk7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBpdCh0LmZzLCBlLmZzKSB8fCBTdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBEciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkp0ID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5BbiA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMuZHMgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMud3MgPSBuZXcgVG4oU3IuZXMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUoMCA9PT0gdGhpcy5Bbi5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZHM7XG4gICAgICAgIHRoaXMuZHMrKywgdGhpcy5Bbi5sZW5ndGggPiAwICYmIHRoaXMuQW5bdGhpcy5Bbi5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgciA9IG5ldyByaShpLCBlLCBuLCBzKTtcbiAgICAgICAgdGhpcy5Bbi5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy53cyA9IHRoaXMud3MuYWRkKG5ldyBTcihlLmtleSwgaSkpLCB0aGlzLkp0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUocik7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLl9zKGUpKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSB0aGlzLmdzKG4pLCBpID0gcyA8IDAgPyAwIDogcztcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5Bbi5sZW5ndGggPiBpID8gdGhpcy5BbltpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSgwID09PSB0aGlzLkFuLmxlbmd0aCA/IC0xIDogdGhpcy5kcyAtIDEpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLkFuLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU3IoZSwgMCksIHMgPSBuZXcgU3IoZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX3ModC5mcyk7XG4gICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgIH0pKSwgR3MucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgVG4oaXQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgU3IodCwgMCksIHMgPSBuZXcgU3IodCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMud3MuZm9yRWFjaEluUmFuZ2UoWyBlLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQodC5mcyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgR3MucmVzb2x2ZSh0aGlzLnlzKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBTdC5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgU3IobmV3IFN0KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBUbihpdCk7XG4gICAgICAgIHJldHVybiB0aGlzLndzLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZihlKSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgZS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZCh0LmZzKSksICEwKTtcbiAgICAgICAgfSksIHIpLCBHcy5yZXNvbHZlKHRoaXMueXMobykpO1xuICAgIH1cbiAgICB5cyh0KSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9zKHQpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIEIoMCA9PT0gdGhpcy5wcyhlLmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMuQW4uc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLndzO1xuICAgICAgICByZXR1cm4gR3MuZm9yRWFjaChlLm11dGF0aW9ucywgKHMgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBTcihzLmtleSwgZS5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgcy5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53cyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZWUodCkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTcihlLCAwKSwgcyA9IHRoaXMud3MuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKGUuaXNFcXVhbChzICYmIHMua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW4ubGVuZ3RoLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICBwcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdzKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBncyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkFuLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgLSB0aGlzLkFuWzBdLmJhdGNoSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXG4gICAgICovICAgIF9zKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ3ModCk7XG4gICAgICAgIGlmIChlIDwgMCB8fCBlID49IHRoaXMuQW4ubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW5bZV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIENyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSnQgPSB0LCB0aGlzLlRzID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmtleSwgaSA9IHRoaXMuZG9jcy5nZXQocyksIHIgPSBpID8gaS5zaXplIDogMCwgbyA9IHRoaXMuVHMoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KHMsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBlLmNsb25lKCksXG4gICAgICAgICAgICBzaXplOiBvLFxuICAgICAgICAgICAgcmVhZFRpbWU6IG5cbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBvIC0gciwgdGhpcy5KdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBzLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgZSAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZSh0KSwgdGhpcy5zaXplIC09IGUuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKG4gPyBuLmRvY3VtZW50LmNsb25lKCkgOiBXdC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBBbigpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGUgPyBlLmRvY3VtZW50LmNsb25lKCkgOiBXdC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgICAgICB9KSksIEdzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IEFuKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBTdChlLnBhdGguY2hpbGQoXCJcIikpLCByID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShpKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogdCwgdmFsdWU6IHtkb2N1bWVudDogaSwgcmVhZFRpbWU6IG99fSA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFlLnBhdGguaXNQcmVmaXhPZih0LnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIG8uY29tcGFyZVRvKG4pIDw9IDAgfHwgU2UoZSwgaSkgJiYgKHMgPSBzLmluc2VydChpLmtleSwgaS5jbG9uZSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUocyk7XG4gICAgfVxuICAgIEVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLmZvckVhY2godGhpcy5kb2NzLCAodCA9PiBlKHQpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IE5yKHRoaXMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBBIGNsYXNzIHRoYXQgbWFuYWdlcyBjb2xsZWN0aW9uIGdyb3VwIGluZGljZXMuXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgTnIgZXh0ZW5kcyB6aSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkRlID0gdDtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpID8gZS5wdXNoKHRoaXMuRGUuYWRkRW50cnkodCwgcy5kb2N1bWVudCwgdGhpcy5nZXRSZWFkVGltZShuKSkpIDogdGhpcy5EZS5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCBHcy53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5EZS5nZXRFbnRyeSh0LCBlKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRGUuZ2V0RW50cmllcyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGtyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuSXMgPSBuZXcgR2koKHQgPT4gSHQodCkpLCBZdCksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gY3QubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLkFzID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlJzID0gbmV3IFZyLCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5QcyA9ICRpLmllKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jcy5mb3JFYWNoKCgodCwgbikgPT4gZShuKSkpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLkFzKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuUHMubmV4dCgpLCBHcy5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCBlID4gdGhpcy5BcyAmJiAodGhpcy5BcyA9IGUpLCBcbiAgICAgICAgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBjZSh0KSB7XG4gICAgICAgIHRoaXMuSXMuc2V0KHQudGFyZ2V0LCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgIGUgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5QcyA9IG5ldyAkaShlKSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBlKSwgdC5zZXF1ZW5jZU51bWJlciA+IHRoaXMuQXMgJiYgKHRoaXMuQXMgPSB0LnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKGUpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKGUpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jcy5kZWxldGUoZS50YXJnZXQpLCB0aGlzLlJzLnVzKGUudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSXMuZm9yRWFjaCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy5Jcy5kZWxldGUociksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICBzKyspO1xuICAgICAgICB9KSksIEdzLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuSXMuZ2V0KGUpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Scy5ycyhlLCBuKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICB0aGlzLlJzLmNzKGUsIG4pO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcyAmJiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpO1xuICAgICAgICB9KSksIEdzLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUnMudXMoZSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Scy5scyhlKTtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5Scy5jb250YWluc0tleShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIHhyIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5icyA9IHt9LCB0aGlzLkJlID0gbmV3IGV0KDApLCB0aGlzLlVlID0gITEsIHRoaXMuVWUgPSAhMCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQodGhpcyksIFxuICAgICAgICB0aGlzLkhlID0gbmV3IGtyKHRoaXMpO1xuICAgICAgICB0aGlzLkp0ID0gbmV3IElpLCB0aGlzLkplID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDcih0LCBlKTtcbiAgICAgICAgfSh0aGlzLkp0LCAodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnZzKHQpKSksIHRoaXMuayA9IG5ldyBjaShlKSwgdGhpcy5ZZSA9IG5ldyB2cih0aGlzLmspO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5VZSA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVlO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KdDtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5ic1t0LnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBEcih0aGlzLkp0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSwgdGhpcy5ic1t0LnRvS2V5KCldID0gZSksIFxuICAgICAgICBlO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGU7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWWU7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgJChcIk1lbW9yeVBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gbmV3ICRyKHRoaXMuQmUubmV4dCgpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuVnMoKSwgbihzKS5uZXh0KCh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuU3MocykubmV4dCgoKCkgPT4gdCkpKSkudG9Qcm9taXNlKCkudGhlbigodCA9PiAocy5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIERzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLm9yKE9iamVjdC52YWx1ZXModGhpcy5icykubWFwKChuID0+ICgpID0+IG4uY29udGFpbnNLZXkodCwgZSkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1lbW9yeSBwZXJzaXN0ZW5jZSBpcyBub3QgYWN0dWFsbHkgdHJhbnNhY3Rpb25hbCwgYnV0IGZ1dHVyZSBpbXBsZW1lbnRhdGlvbnNcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cbiAqLyBjbGFzcyAkciBleHRlbmRzIFdzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIEZyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyBhbGwgZG9jdW1lbnRzIHRoYXQgYXJlIGFjdGl2ZSBpbiBRdWVyeSB2aWV3cy4gKi9cbiAgICAgICAgdGhpcy5DcyA9IG5ldyBWciwgXG4gICAgICAgIC8qKiBUaGUgbGlzdCBvZiBkb2N1bWVudHMgdGhhdCBhcmUgcG90ZW50aWFsbHkgR0NlZCBhZnRlciBlYWNoIHRyYW5zYWN0aW9uLiAqL1xuICAgICAgICB0aGlzLk5zID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGtzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGcih0KTtcbiAgICB9XG4gICAgZ2V0IHhzKCkge1xuICAgICAgICBpZiAodGhpcy5OcykgcmV0dXJuIHRoaXMuTnM7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ3MuYWRkUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnhzLmRlbGV0ZShuLnRvU3RyaW5nKCkpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkNzLnJlbW92ZVJlZmVyZW5jZShuLCBlKSwgdGhpcy54cy5hZGQobi50b1N0cmluZygpKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnhzLmFkZChlLnRvU3RyaW5nKCkpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuQ3MudXMoZS50YXJnZXRJZCkuZm9yRWFjaCgodCA9PiB0aGlzLnhzLmFkZCh0LnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCk7XG4gICAgICAgIHJldHVybiBuLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMueHMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4ucmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSkpO1xuICAgIH1cbiAgICBWcygpIHtcbiAgICAgICAgdGhpcy5OcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIFNzKHQpIHtcbiAgICAgICAgLy8gUmVtb3ZlIG5ld2x5IG9ycGhhbmVkIGRvY3VtZW50cy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gR3MuZm9yRWFjaCh0aGlzLnhzLCAobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gU3QuZnJvbVBhdGgobik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcyh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0IHx8IGUucmVtb3ZlRW50cnkocyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAodGhpcy5OcyA9IG51bGwsIGUuYXBwbHkodCkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy4kcyh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQgPyB0aGlzLnhzLmRlbGV0ZShlLnRvU3RyaW5nKCkpIDogdGhpcy54cy5hZGQoZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2cyh0KSB7XG4gICAgICAgIC8vIEZvciBlYWdlciBHQywgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgZG9jdW1lbnQgc2l6ZSwgdGhlcmUgYXJlIG5vIHNpemUgdGhyZXNob2xkcy5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgICRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLm9yKFsgKCkgPT4gR3MucmVzb2x2ZSh0aGlzLkNzLmNvbnRhaW5zS2V5KGUpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHQsIGUpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLkRzKHQsIGUpIF0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGNsaWVudCBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfY2xpZW50c188cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBPcih0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfY2xpZW50c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+XG4vLyAgICAgKGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMpXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cblxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcbi8vIGNvbnRhaW4uXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgbXV0YXRpb24gYmF0Y2ggaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gTXIodCwgZSwgbikge1xuICAgIGxldCBzID0gYGZpcmVzdG9yZV9tdXRhdGlvbnNfJHt0fV8ke259YDtcbiAgICByZXR1cm4gZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiAocyArPSBgXyR7ZS51aWR9YCksIHM7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIGEgcXVlcnkgdGFyZ2V0J3MgbWV0YWRhdGEgaXM6XG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBxdWVyeSBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBMcih0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfdGFyZ2V0c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcbi8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuLy8gICAgIGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfPHBlcnNpc3RlbmNlX3ByZWZpeD5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgbXV0YXRpb24gYmF0Y2gsIGluY2x1ZGluZyBpdHMgdXNlciBJRCwgYmF0Y2ggSUQgYW5kXG4gKiB3aGV0aGVyIHRoZSBiYXRjaCBpcyAncGVuZGluZycsICdhY2tub3dsZWRnZWQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIEJyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMuc3RhdGUgPSBuLCB0aGlzLmVycm9yID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgTXV0YXRpb25NZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEZzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEpTT04ucGFyc2Uobik7XG4gICAgICAgIGxldCBpLCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgcyAmJiAtMSAhPT0gWyBcInBlbmRpbmdcIiwgXCJhY2tub3dsZWRnZWRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihzLnN0YXRlKSAmJiAodm9pZCAwID09PSBzLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMuZXJyb3IpO1xuICAgICAgICByZXR1cm4gciAmJiBzLmVycm9yICYmIChyID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IuY29kZSwgXG4gICAgICAgIHIgJiYgKGkgPSBuZXcgaihzLmVycm9yLmNvZGUsIHMuZXJyb3IubWVzc2FnZSkpKSwgciA/IG5ldyBCcih0LCBlLCBzLnN0YXRlLCBpKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBtdXRhdGlvbiBzdGF0ZSBmb3IgSUQgJyR7ZX0nOiAke259YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgT3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIHF1ZXJ5IHRhcmdldCwgaW5jbHVkaW5nIGl0cyB0YXJnZXQgSUQgYW5kIHdoZXRoZXIgdGhlXG4gKiB0YXJnZXQgaXMgJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIFVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnN0YXRlID0gZSwgdGhpcy5lcnJvciA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBGcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcywgaSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgLTEgIT09IFsgXCJub3QtY3VycmVudFwiLCBcImN1cnJlbnRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihuLnN0YXRlKSAmJiAodm9pZCAwID09PSBuLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4uZXJyb3IpO1xuICAgICAgICByZXR1cm4gaSAmJiBuLmVycm9yICYmIChpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IuY29kZSwgXG4gICAgICAgIGkgJiYgKHMgPSBuZXcgaihuLmVycm9yLmNvZGUsIG4uZXJyb3IubWVzc2FnZSkpKSwgaSA/IG5ldyBVcih0LCBuLnN0YXRlLCBzKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIE9zKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXG4gKiBXZWJTdG9yYWdlLCBjb250YWluaW5nIHRoZSBsaXN0IG9mIGFjdGl2ZSBxdWVyeSB0YXJnZXRzLlxuICovIGNsYXNzIHFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFJlbW90ZUNsaWVudFN0YXRlIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgRnModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIG4uYWN0aXZlVGFyZ2V0SWRzIGluc3RhbmNlb2YgQXJyYXksIGkgPSBDbigpO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgcyAmJiB0IDwgbi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK3QpIHMgPSBWdChuLmFjdGl2ZVRhcmdldElkc1t0XSksIFxuICAgICAgICBpID0gaS5hZGQobi5hY3RpdmVUYXJnZXRJZHNbdF0pO1xuICAgICAgICByZXR1cm4gcyA/IG5ldyBxcih0LCBpKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cbiAqIG11bHRpLXRhYi4gVGhlIG9ubGluZSBzdGF0ZSBpcyBvbmx5IHdyaXR0ZW4gdG8gYnkgdGhlIHByaW1hcnkgY2xpZW50LCBhbmRcbiAqIHVzZWQgaW4gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzLlxuICovIGNsYXNzIEtyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLm9ubGluZVN0YXRlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBGcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiAtMSAhPT0gWyBcIlVua25vd25cIiwgXCJPbmxpbmVcIiwgXCJPZmZsaW5lXCIgXS5pbmRleE9mKGUub25saW5lU3RhdGUpICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuY2xpZW50SWQgPyBuZXcgS3IoZS5jbGllbnRJZCwgZS5vbmxpbmVTdGF0ZSkgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke3R9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MganIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IENuKCk7XG4gICAgfVxuICAgIE1zKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5hZGQodCk7XG4gICAgfVxuICAgIExzKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5kZWxldGUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgZW50cnkgaW50byBhIEpTT04tZW5jb2RlZCBmb3JtYXQgd2UgY2FuIHVzZSBmb3IgV2ViU3RvcmFnZS5cbiAgICAgKiBEb2VzIG5vdCBlbmNvZGUgYGNsaWVudElkYCBhcyBpdCBpcyBwYXJ0IG9mIHRoZSBrZXkgaW4gV2ViU3RvcmFnZS5cbiAgICAgKi8gICAgT3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHM6IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIHVzZXMgV2ViU3RvcmFnZSAod2luZG93LmxvY2FsU3RvcmFnZSkgYXMgdGhlXG4gKiBiYWNraW5nIHN0b3JlIGZvciB0aGUgU2hhcmVkQ2xpZW50U3RhdGUuIEl0IGtlZXBzIHRyYWNrIG9mIGFsbCBhY3RpdmVcbiAqIGNsaWVudHMgYW5kIHN1cHBvcnRzIG1vZGlmaWNhdGlvbnMgb2YgdGhlIGxvY2FsIGNsaWVudCdzIGRhdGEuXG4gKi8gY2xhc3MgUXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB0LCB0aGlzLk9lID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuQnMgPSBzLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuVXMgPSB0aGlzLnFzLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLktzID0gbmV3IGduKGl0KSwgdGhpcy5zdGFydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FwdHVyZXMgV2ViU3RvcmFnZSBldmVudHMgdGhhdCBvY2N1ciBiZWZvcmUgYHN0YXJ0KClgIGlzIGNhbGxlZC4gVGhlc2VcbiAgICAgICAgICogZXZlbnRzIGFyZSByZXBsYXllZCBvbmNlIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIGlzIHN0YXJ0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmpzID0gW107XG4gICAgICAgIC8vIEVzY2FwZSB0aGUgc3BlY2lhbCBjaGFyYWN0ZXJzIG1lbnRpb25lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnNcbiAgICAgICAgY29uc3QgciA9IG4ucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UsIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLlFzID0gT3IodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5CcyksIFxuICAgICAgICB0aGlzLldzID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIGN1cnJlbnQgc2VxdWVuY2UgbnVtYmVyLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLktzID0gdGhpcy5Lcy5pbnNlcnQodGhpcy5CcywgbmV3IGpyKSwgdGhpcy5HcyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfY2xpZW50c18ke3J9XyhbXl9dKikkYCksIFxuICAgICAgICB0aGlzLnpzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9tdXRhdGlvbnNfJHtyfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIHRoaXMuSHMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX3RhcmdldHNfJHtyfV8oXFxcXGQrKSRgKSwgXG4gICAgICAgIHRoaXMuSnMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfb25saW5lX3N0YXRlXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHBsYXlzIGFzIGEgZXZlbnQgdG8gaW5kaWNhdGUgdGhlIHJlbW90ZSBkb2N1bWVudHNcbiAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkIGR1ZSB0byBzb21lIHNlY29uZGFyeSB0YWJzIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICAgIC8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuICAgICAgICAvLyAgICAgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfPHBlcnNpc3RlbmNlS2V5PlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuWXMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIGtleSBwcmVmaXggZm9yIHRoZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGFsbG9jYXRlZC4gVGhlIGtleVxuICAgICAgICAvLyBsb29rcyBsaWtlICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Jy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCBcbiAgICAgICAgLy8gUmF0aGVyIHRoYW4gYWRkaW5nIHRoZSBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBzdGFydCgpLCB3ZSBhZGQgdGhlXG4gICAgICAgIC8vIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBjb2xsZWN0XG4gICAgICAgIC8vIGV2ZW50cyBiZWZvcmUgb3RoZXIgY29tcG9uZW50cyBwb3B1bGF0ZSB0aGVpciBpbml0aWFsIHN0YXRlIChkdXJpbmcgdGhlaXJcbiAgICAgICAgLy8gcmVzcGVjdGl2ZSBzdGFydCgpIGNhbGxzKS4gT3RoZXJ3aXNlLCB3ZSBtaWdodCBmb3IgZXhhbXBsZSBtaXNzIGFcbiAgICAgICAgLy8gbXV0YXRpb24gdGhhdCBpcyBhZGRlZCBhZnRlciBMb2NhbFN0b3JlJ3Mgc3RhcnQoKSBwcm9jZXNzZWQgdGhlIGV4aXN0aW5nXG4gICAgICAgIC8vIG11dGF0aW9ucyBidXQgYmVmb3JlIHdlIG9ic2VydmUgV2ViU3RvcmFnZSBldmVudHMuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuVXMpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgV2ViU3RvcmFnZSBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBidCh0KSB7XG4gICAgICAgIHJldHVybiAhKCF0IHx8ICF0LmxvY2FsU3RvcmFnZSk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjbGllbnRzIHRvIGJhY2tmaWxsIHRoZSBkYXRhIGluXG4gICAgICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zeW5jRW5naW5lLlRuKCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGhpcy5CcykgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRJdGVtKE9yKHRoaXMucGVyc2lzdGVuY2VLZXksIGUpKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHFyLkZzKGUsIHQpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMuS3MgPSB0aGlzLktzLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5YcygpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMuSnMpO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWnMoZSk7XG4gICAgICAgICAgICB0ICYmIHRoaXMudGkodCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuanMpIHRoaXMucXModCk7XG4gICAgICAgIHRoaXMuanMgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5XcywgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVpKHRoaXMuS3MpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuS3MuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KSAmJiAoZSA9ICEwKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICB0aGlzLm5pKHQsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMubmkodCwgZSwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLnNpKHQpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oTHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gVXIuRnModCwgbik7XG4gICAgICAgICAgICAgICAgcyAmJiAoZSA9IHMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmlpLk1zKHQpLCB0aGlzLlhzKCksIGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLmlpLkxzKHQpLCB0aGlzLlhzKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShMcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLnJpKHQsIGUsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2kodCk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IHQsIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMub2kodCk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCgpIHtcbiAgICAgICAgdGhpcy5haSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLlVzKSwgdGhpcy5yZW1vdmVJdGVtKHRoaXMuUXMpLCBcbiAgICAgICAgdGhpcy5zdGFydGVkID0gITEpO1xuICAgIH1cbiAgICBnZXRJdGVtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHQpO1xuICAgICAgICByZXR1cm4gJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVBRFwiLCB0LCBlKSwgZTtcbiAgICB9XG4gICAgc2V0SXRlbSh0LCBlKSB7XG4gICAgICAgICQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlNFVFwiLCB0LCBlKSwgdGhpcy5zdG9yYWdlLnNldEl0ZW0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0odCkge1xuICAgICAgICAkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRU1PVkVcIiwgdCksIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHQpO1xuICAgIH1cbiAgICBxcyh0KSB7XG4gICAgICAgIC8vIE5vdGU6IFRoZSBmdW5jdGlvbiBpcyB0eXBlZCB0byB0YWtlIEV2ZW50IHRvIGJlIGludGVyZmFjZS1jb21wYXRpYmxlIHdpdGhcbiAgICAgICAgLy8gYFdpbmRvdy5hZGRFdmVudExpc3RlbmVyYC5cbiAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgIGlmIChlLnN0b3JhZ2VBcmVhID09PSB0aGlzLnN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGlmICgkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJFVkVOVFwiLCBlLmtleSwgZS5uZXdWYWx1ZSksIGUua2V5ID09PSB0aGlzLlFzKSByZXR1cm4gdm9pZCBGKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLk9lLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLmtleSkgaWYgKHRoaXMuR3MudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5jaShlLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudWkodCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy51aSh0LmNsaWVudElkLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnpzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmxpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuZmkodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5Icy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5kaShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLndpKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLkpzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlpzKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy50aSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5Xcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IGV0Lkk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEIoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIGUgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZVwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAqIGBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZWAgaXMgYSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgU2hhcmVkQ2xpZW50U3RhdGUgZm9yXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxuICogaXNvbGF0ZWQgYW5kIG5vIHN5bmNocm9uaXphdGlvbiBpcyBwZXJmb3JtZWQuXG4gKi8gKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdCAhPT0gZXQuSSAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcih0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5ZcykgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5faSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmpzLnB1c2goZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGlpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Lcy5nZXQodGhpcy5Ccyk7XG4gICAgfVxuICAgIFhzKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5RcywgdGhpcy5paS5PcygpKTtcbiAgICB9XG4gICAgbmkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IEJyKHRoaXMuY3VycmVudFVzZXIsIHQsIGUsIG4pLCBpID0gTXIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCBzLk9zKCkpO1xuICAgIH1cbiAgICBzaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBNcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICBvaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5CcyxcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiB0XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuSnMsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgcmkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gTHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCksIGkgPSBuZXcgVXIodCwgZSwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShzLCBpLk9zKCkpO1xuICAgIH1cbiAgICBhaSgpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuWXMsIFwidmFsdWUtbm90LXVzZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgY2kodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Hcy5leGVjKHQpO1xuICAgICAgICByZXR1cm4gZSA/IGVbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgaGkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaSh0KTtcbiAgICAgICAgcmV0dXJuIHFyLkZzKG4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBsaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnpzLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIEJyLkZzKG5ldyBEKGkpLCBzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgZGkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Icy5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gVXIuRnMocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBacyh0KSB7XG4gICAgICAgIHJldHVybiBLci5Gcyh0KTtcbiAgICB9XG4gICAgYXN5bmMgZmkodCkge1xuICAgICAgICBpZiAodC51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUubWkodC5iYXRjaElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICAgICAgJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7dC51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgd2kodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmdpKHQudGFyZ2V0SWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgIH1cbiAgICB1aSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gdGhpcy5Lcy5pbnNlcnQodCwgZSkgOiB0aGlzLktzLnJlbW92ZSh0KSwgcyA9IHRoaXMuZWkodGhpcy5LcyksIGkgPSB0aGlzLmVpKG4pLCByID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBzLmhhcyh0KSB8fCByLnB1c2godCk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkuaGFzKHQpIHx8IG8ucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUueWkociwgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5LcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGkodCkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLktzLmdldCh0LmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0Lm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgZWkodCkge1xuICAgICAgICBsZXQgZSA9IENuKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBXciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGkgPSBuZXcganIsIHRoaXMuVGkgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waS5Ncyh0KSwgdGhpcy5UaVt0XSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLlRpW3RdID0gZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMucGkuTHModCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLlRpW3RdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waSA9IG5ldyBqciwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgR3Ige1xuICAgIEVpKHQpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIHpyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5JaSA9ICgpID0+IHRoaXMuQWkoKSwgdGhpcy5SaSA9ICgpID0+IHRoaXMuUGkoKSwgdGhpcy5iaSA9IFtdLCB0aGlzLnZpKCk7XG4gICAgfVxuICAgIEVpKHQpIHtcbiAgICAgICAgdGhpcy5iaS5wdXNoKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5JaSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLlJpKTtcbiAgICB9XG4gICAgdmkoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuSWkpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5SaSk7XG4gICAgfVxuICAgIEFpKCkge1xuICAgICAgICAkKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuYmkpIHQoMCAvKiBBVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBQaSgpIHtcbiAgICAgICAgJChcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuYmkpIHQoMSAvKiBVTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBidCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBIciA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIEpyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuVmkgPSB0LlZpLCB0aGlzLlNpID0gdC5TaTtcbiAgICB9XG4gICAgRGkodCkge1xuICAgICAgICB0aGlzLkNpID0gdDtcbiAgICB9XG4gICAgTmkodCkge1xuICAgICAgICB0aGlzLmtpID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy54aSA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLlNpKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLlZpKHQpO1xuICAgIH1cbiAgICAkaSgpIHtcbiAgICAgICAgdGhpcy5DaSgpO1xuICAgIH1cbiAgICBGaSh0KSB7XG4gICAgICAgIHRoaXMua2kodCk7XG4gICAgfVxuICAgIE9pKHQpIHtcbiAgICAgICAgdGhpcy54aSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFlyIGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gdC5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBlID0gdC5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICAgICAgdGhpcy5NaSA9IGUgKyBcIjovL1wiICsgdC5ob3N0LCB0aGlzLkxpID0gXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIi9kb2N1bWVudHNcIjtcbiAgICB9XG4gICAgQmkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gdGhpcy5VaSh0LCBlKTtcbiAgICAgICAgJChcIlJlc3RDb25uZWN0aW9uXCIsIFwiU2VuZGluZzogXCIsIHIsIG4pO1xuICAgICAgICBjb25zdCBvID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLnFpKG8sIHMsIGkpLCB0aGlzLktpKHQsIHIsIG8sIG4pLnRoZW4oKHQgPT4gKCQoXCJSZXN0Q29ubmVjdGlvblwiLCBcIlJlY2VpdmVkOiBcIiwgdCksIFxuICAgICAgICB0KSksIChlID0+IHtcbiAgICAgICAgICAgIHRocm93IE8oXCJSZXN0Q29ubmVjdGlvblwiLCBgJHt0fSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgZSwgXCJ1cmw6IFwiLCByLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgamkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5CaSh0LCBlLCBuLCBzLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIHFpKHQsIGUsIG4pIHtcbiAgICAgICAgdFtcIlgtR29vZy1BcGktQ2xpZW50XCJdID0gXCJnbC1qcy8gZmlyZS9cIiArIEMsIFxuICAgICAgICAvLyBDb250ZW50LVR5cGU6IHRleHQvcGxhaW4gd2lsbCBhdm9pZCBwcmVmbGlnaHQgcmVxdWVzdHMgd2hpY2ggbWlnaHRcbiAgICAgICAgLy8gbWVzcyB3aXRoIENPUlMgYW5kIHJlZGlyZWN0cyBieSBwcm94aWVzLiBJZiB3ZSBhZGQgY3VzdG9tIGhlYWRlcnNcbiAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIGNvZGUgdG8gcG90ZW50aWFsbHkgdXNlIHRoZSAkaHR0cE92ZXJ3cml0ZVxuICAgICAgICAvLyBwYXJhbWV0ZXIgc3VwcG9ydGVkIGJ5IEVTRiB0byBhdm9pZCB0cmlnZ2VyaW5nIHByZWZsaWdodCByZXF1ZXN0cy5cbiAgICAgICAgdFtcIkNvbnRlbnQtVHlwZVwiXSA9IFwidGV4dC9wbGFpblwiLCB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCAmJiAodFtcIlgtRmlyZWJhc2UtR01QSURcIl0gPSB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCksIFxuICAgICAgICBlICYmIGUuaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKSwgbiAmJiBuLmhlYWRlcnMuZm9yRWFjaCgoKGUsIG4pID0+IHRbbl0gPSBlKSk7XG4gICAgfVxuICAgIFVpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEhyW3RdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5NaX0vdjEvJHtlfToke259YDtcbiAgICB9XG59IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSB0LmZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gdC5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbiAgICBLaSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKGksIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBuZXcgWGhySW87XG4gICAgICAgICAgICBvLmxpc3Rlbk9uY2UoRXZlbnRUeXBlLkNPTVBMRVRFLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoby5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIkNvbm5lY3Rpb25cIiwgXCJYSFIgcmVjZWl2ZWQ6XCIsIEpTT04uc3RyaW5naWZ5KGUpKSwgaShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuVElNRU9VVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiB0aW1lZCBvdXQnKSwgcihuZXcgaihLLkRFQURMSU5FX0VYQ0VFREVELCBcIlJlcXVlc3QgdGltZSBvdXRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5IVFRQX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG8uZ2V0U3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIGZhaWxlZCB3aXRoIHN0YXR1czonLCBuLCBcInJlc3BvbnNlIHRleHQ6XCIsIG8uZ2V0UmVzcG9uc2VUZXh0KCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uZ2V0UmVzcG9uc2VKc29uKCkuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdC5zdGF0dXMgJiYgdC5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgXCItXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoSykuaW5kZXhPZihlKSA+PSAwID8gZSA6IEsuVU5LTk9XTjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0LnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIobmV3IGooZSwgdC5tZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHIobmV3IGooSy5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyBvLmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgaihLLlVOQVZBSUxBQkxFLCBcIkNvbm5lY3Rpb24gZmFpbGVkLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBMKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgY29tcGxldGVkLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBKU09OLnN0cmluZ2lmeShzKTtcbiAgICAgICAgICAgIG8uc2VuZChlLCBcIlBPU1RcIiwgYSwgbiwgMTUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFFpKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFsgdGhpcy5NaSwgXCIvXCIsIFwiZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmVcIiwgXCIvXCIsIHQsIFwiL2NoYW5uZWxcIiBdLCBpID0gY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCgpLCByID0gZ2V0U3RhdEV2ZW50VGFyZ2V0KCksIG8gPSB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlci5cbiAgICAgICAgICAgIGh0dHBTZXNzaW9uSWRQYXJhbTogXCJnc2Vzc2lvbmlkXCIsXG4gICAgICAgICAgICBpbml0TWVzc2FnZUhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgcGFyYW0gaXMgdXNlZCB0byBpbXByb3ZlIHJvdXRpbmcgYW5kIHByb2plY3QgaXNvbGF0aW9uIGJ5IHRoZVxuICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQgYW5kIG11c3QgYmUgaW5jbHVkZWQgaW4gZXZlcnkgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogYHByb2plY3RzLyR7dGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlfWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZW5kUmF3SnNvbjogITAsXG4gICAgICAgICAgICBzdXBwb3J0c0Nyb3NzRG9tYWluWGhyOiAhMCxcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRpbWVvdXQgKHJhbmRvbWl6ZWQgYmV0d2VlbiAxMC0yMCBzZWNvbmRzKSBzaW5jZVxuICAgICAgICAgICAgICAgIC8vIGEgbGFyZ2Ugd3JpdGUgYmF0Y2ggb24gYSBzbG93IGludGVybmV0IGNvbm5lY3Rpb24gbWF5IHRha2UgYSBsb25nXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcbiAgICAgICAgICAgICAgICAvLyB0aWdodCB0aW1lb3V0IHdoaWNoIGNvdWxkIGxlYWQgdG8gaW5maW5pdGUgdGltZW91dHMgYW5kIHJldHJpZXMsIHdlXG4gICAgICAgICAgICAgICAgLy8gc2V0IGl0IHZlcnkgbGFyZ2UgKDUtMTAgbWludXRlcykgYW5kIHJlbHkgb24gdGhlIGJyb3dzZXIncyBidWlsdGluXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgICAgIGZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNczogNmU1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9yY2VMb25nUG9sbGluZzogdGhpcy5mb3JjZUxvbmdQb2xsaW5nLFxuICAgICAgICAgICAgZGV0ZWN0QnVmZmVyaW5nUHJveHk6IHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmIChvLnhtbEh0dHBGYWN0b3J5ID0gbmV3IEZldGNoWG1sSHR0cEZhY3Rvcnkoe30pKSwgdGhpcy5xaShvLmluaXRNZXNzYWdlSGVhZGVycywgZSwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGludG8gYSBzcGVjaWFsIFwiJGh0dHBIZWFkZXJzXCIgcXVlcnlcbiAgICAgICAgLy8gcGFyYW1ldGVyLCB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuIFRoaXMgaXNcbiAgICAgICAgLy8gZm9ybWFsbHkgZGVmaW5lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL2IwZTE4MTViMTNmYjkyYTQ2ZDdjOWIzYzMwZGU1ZDZhMzk2YTMyNDUvY2xvc3VyZS9nb29nL25ldC9ycGMvaHR0cGNvcnMuanMjTDMyXG4gICAgICAgIC8vIFRPRE8oYi8xNDU2MjQ3NTYpOiBUaGVyZSBpcyBhIGJhY2tlbmQgYnVnIHdoZXJlICRodHRwSGVhZGVycyBpc24ndCByZXNwZWN0ZWQgaWYgdGhlIHJlcXVlc3RcbiAgICAgICAgLy8gZG9lc24ndCBoYXZlIGFuIE9yaWdpbiBoZWFkZXIuIFNvIHdlIGhhdmUgdG8gZXhjbHVkZSBhIGZldyBicm93c2VyIGVudmlyb25tZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyBrbm93biB0byAoc29tZXRpbWVzKSBub3QgaW5jbHVkZSBhbiBPcmlnaW4uIFNlZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8xNDkxLlxuICAgICAgICBpc01vYmlsZUNvcmRvdmEoKSB8fCBpc1JlYWN0TmF0aXZlKCkgfHwgaXNFbGVjdHJvbigpIHx8IGlzSUUoKSB8fCBpc1VXUCgpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8IChvLmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gPSBcIiRodHRwSGVhZGVyc1wiKTtcbiAgICAgICAgY29uc3QgYSA9IHMuam9pbihcIlwiKTtcbiAgICAgICAgJChcIkNvbm5lY3Rpb25cIiwgXCJDcmVhdGluZyBXZWJDaGFubmVsOiBcIiArIGEsIG8pO1xuICAgICAgICBjb25zdCBjID0gaS5jcmVhdGVXZWJDaGFubmVsKGEsIG8pO1xuICAgICAgICAvLyBXZWJDaGFubmVsIHN1cHBvcnRzIHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgaGFuZHNoYWtlIC0gc2F2aW5nXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXG4gICAgICAgIC8vIEpTIGV2ZW50IGxvb3AgYXMgb3Blbi4gSW4gb3JkZXIgdG8gZW5mb3JjZSB0aGlzLCB3ZSBkZWxheSBhY3R1YWxseVxuICAgICAgICAvLyBvcGVuaW5nIHRoZSBXZWJDaGFubmVsIHVudGlsIHNlbmQgaXMgY2FsbGVkLiBXaGV0aGVyIHdlIGhhdmUgY2FsbGVkXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgICAgICAgbGV0IHUgPSAhMSwgaCA9ICExO1xuICAgICAgICAvLyBBIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0cmVhbSB3YXMgY2xvc2VkIChieSB1cyBvciB0aHJvdWdoIGFuXG4gICAgICAgIC8vIGVycm9yL2Nsb3NlIGV2ZW50KSB0byBhdm9pZCBkZWxpdmVyaW5nIG11bHRpcGxlIGNsb3NlIGV2ZW50cyBvciBzZW5kaW5nXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IGcgPSBuZXcgSnIoe1xuICAgICAgICAgICAgVmk6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGggPyAkKFwiQ29ubmVjdGlvblwiLCBcIk5vdCBzZW5kaW5nIGJlY2F1c2UgV2ViQ2hhbm5lbCBpcyBjbG9zZWQ6XCIsIHQpIDogKHUgfHwgKCQoXCJDb25uZWN0aW9uXCIsIFwiT3BlbmluZyBXZWJDaGFubmVsIHRyYW5zcG9ydC5cIiksIFxuICAgICAgICAgICAgICAgIGMub3BlbigpLCB1ID0gITApLCAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgc2VuZGluZzpcIiwgdCksIGMuc2VuZCh0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgU2k6ICgpID0+IGMuY2xvc2UoKVxuICAgICAgICB9KSwgeSA9ICh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IGNsb3N1cmUgdHlwaW5nIHNlZW1zIGJyb2tlbiBiZWNhdXNlIFdlYkNoYW5uZWwgZG9lc1xuICAgICAgICAgICAgLy8gbm90IGltcGxlbWVudCBnb29nLmV2ZW50cy5MaXN0ZW5hYmxlXG4gICAgICAgICAgICB0Lmxpc3RlbihlLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbih0KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENsb3N1cmUgZXZlbnRzIGFyZSBndWFyZGVkIGFuZCBleGNlcHRpb25zIGFyZSBzd2FsbG93ZWQsIHNvIGNhdGNoIGFueVxuICAgICAgICAvLyBleGNlcHRpb24gYW5kIHJldGhyb3cgdXNpbmcgYSBzZXRUaW1lb3V0IHNvIHRoZXkgYmVjb21lIHZpc2libGUgYWdhaW4uXG4gICAgICAgIC8vIE5vdGUgdGhhdCBldmVudHVhbGx5IHRoaXMgZnVuY3Rpb24gY291bGQgZ28gYXdheSBpZiB3ZSBhcmUgY29uZmlkZW50XG4gICAgICAgIC8vIGVub3VnaCB0aGUgY29kZSBpcyBleGNlcHRpb24gZnJlZS5cbiAgICAgICAgICAgICAgICByZXR1cm4geShjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5PUEVOLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IG9wZW5lZC5cIik7XG4gICAgICAgIH0pKSwgeShjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgKCgpID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgJChcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBjbG9zZWRcIiksIGcuRmkoKSk7XG4gICAgICAgIH0pKSwgeShjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKHQgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGVycm9yZWQ6XCIsIHQpLCBnLkZpKG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkXCIpKSk7XG4gICAgICAgIH0pKSwgeShjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5NRVNTQUdFLCAodCA9PiB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmRhdGFbMF07XG4gICAgICAgICAgICAgICAgQighIW4pO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNTE0Mzg5MSk6IFRoZXJlIGlzIGEgYnVnIGluIE9uZSBQbGF0Zm9ybSB0aGF0IGNhdXNlZCBlcnJvcnNcbiAgICAgICAgICAgICAgICAvLyAoYW5kIG9ubHkgZXJyb3JzKSB0byBiZSB3cmFwcGVkIGluIGFuIGV4dHJhIGFycmF5LiBUbyBiZSBmb3J3YXJkXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBidWcgd2UgbmVlZCB0byBjaGVjayBlaXRoZXIgY29uZGl0aW9uLiBUaGUgbGF0dGVyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgZml4IGhhcyBiZWVuIHJvbGxlZCBvdXQuXG4gICAgICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIG1zZ0RhdGEuZXJyb3IgaXMgbm90IHR5cGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLCBpID0gcy5lcnJvciB8fCAobnVsbCA9PT0gKGUgPSBzWzBdKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmVycm9yKTtcbiAgICAgICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgcmVjZWl2ZWQgZXJyb3I6XCIsIGkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBpLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxuICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZG5bdF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSByZXR1cm4gbW4oZSk7XG4gICAgICAgICAgICAgICAgICAgIH0odCksIG4gPSBpLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IEsuSU5URVJOQUwsIG4gPSBcIlVua25vd24gZXJyb3Igc3RhdHVzOiBcIiArIHQgKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBpLm1lc3NhZ2UpLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgICAgICAgICAgaCA9ICEwLCBnLkZpKG5ldyBqKGUsIG4pKSwgYy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgcmVjZWl2ZWQ6XCIsIG4pLCBnLk9pKG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHkociwgRXZlbnQuU1RBVF9FVkVOVCwgKHQgPT4ge1xuICAgICAgICAgICAgdC5zdGF0ID09PSBTdGF0LlBST1hZID8gJChcIkNvbm5lY3Rpb25cIiwgXCJEZXRlY3RlZCBidWZmZXJpbmcgcHJveHlcIikgOiB0LnN0YXQgPT09IFN0YXQuTk9QUk9YWSAmJiAkKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIG5vIGJ1ZmZlcmluZyBwcm94eVwiKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIGcuJGkoKTtcbiAgICAgICAgfSksIDApLCBnO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBYcigpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gWnIoKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiB0byh0KSB7XG4gICAgcmV0dXJuIG5ldyBLbih0LCAvKiB1c2VQcm90bzNKc29uPSAqLyAhMCk7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHRFbmNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgZW8ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgcyA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLk9lID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy5XaSA9IG4sIHRoaXMuR2kgPSBzLCB0aGlzLnppID0gaSwgdGhpcy5IaSA9IDAsIFxuICAgICAgICB0aGlzLkppID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy5ZaSA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuSGkgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgWGkoKSB7XG4gICAgICAgIHRoaXMuSGkgPSB0aGlzLnppO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgIFppKHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHRoaXMuSGkgKyB0aGlzLnRyKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMuWWkpLCBzID0gTWF0aC5tYXgoMCwgZSAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBzID4gMCAmJiAkKFwiRXhwb25lbnRpYWxCYWNrb2ZmXCIsIGBCYWNraW5nIG9mZiBmb3IgJHtzfSBtcyAoYmFzZSBkZWxheTogJHt0aGlzLkhpfSBtcywgZGVsYXkgd2l0aCBqaXR0ZXI6ICR7ZX0gbXMsIGxhc3QgYXR0ZW1wdDogJHtufSBtcyBhZ28pYCksIFxuICAgICAgICB0aGlzLkppID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHMsICgoKSA9PiAodGhpcy5ZaSA9IERhdGUubm93KCksIFxuICAgICAgICB0KCkpKSksIFxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxuICAgICAgICAvLyBib3VuZHMuXG4gICAgICAgIHRoaXMuSGkgKj0gdGhpcy5HaSwgdGhpcy5IaSA8IHRoaXMuV2kgJiYgKHRoaXMuSGkgPSB0aGlzLldpKSwgdGhpcy5IaSA+IHRoaXMuemkgJiYgKHRoaXMuSGkgPSB0aGlzLnppKTtcbiAgICB9XG4gICAgZXIoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuSmkgJiYgKHRoaXMuSmkuc2tpcERlbGF5KCksIHRoaXMuSmkgPSBudWxsKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkppICYmICh0aGlzLkppLmNhbmNlbCgpLCB0aGlzLkppID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqLyAgICB0cigpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gLjUpICogdGhpcy5IaTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxuICpcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICpcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXG4gKiBzdHJlYW1pbmcgUlBDLlxuICpcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xuICpcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxuICpcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXG4gKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXG4gKlxuICogR2VuZXJpYyB0eXBlczpcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcbiAqL1xuY2xhc3Mgbm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpIHtcbiAgICAgICAgdGhpcy5PZSA9IHQsIHRoaXMubnIgPSBuLCB0aGlzLnNyID0gcywgdGhpcy5pciA9IGksIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgPSByLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIgPSBvLCB0aGlzLmxpc3RlbmVyID0gYSwgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbG9zZSBjb3VudCB0aGF0J3MgaW5jcmVtZW50ZWQgZXZlcnkgdGltZSB0aGUgc3RyZWFtIGlzIGNsb3NlZDsgdXNlZCBieVxuICAgICAgICAgKiBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKCkgdG8gaW52YWxpZGF0ZSBjYWxsYmFja3MgdGhhdCBoYXBwZW4gYWZ0ZXJcbiAgICAgICAgICogY2xvc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJyID0gMCwgdGhpcy5hciA9IG51bGwsIHRoaXMuY3IgPSBudWxsLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMudXIgPSBuZXcgZW8odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIGhyKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBTdGFydGluZyAqLyA9PT0gdGhpcy5zdGF0ZSB8fCA1IC8qIEJhY2tvZmYgKi8gPT09IHRoaXMuc3RhdGUgfHwgdGhpcy5scigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHVuZGVybHlpbmcgUlBDIGlzIG9wZW4gKHRoZSBvbk9wZW4oKSBsaXN0ZW5lciBoYXMgYmVlblxuICAgICAqIGNhbGxlZCkgYW5kIHRoZSBzdHJlYW0gaXMgcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBscigpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIEhlYWx0aHkgKi8gPT09IHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgNCAvKiBFcnJvciAqLyAhPT0gdGhpcy5zdGF0ZSA/IHRoaXMuYXV0aCgpIDogdGhpcy5kcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXG4gICAgICovICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuaHIoKSAmJiBhd2FpdCB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgd3IoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIEluaXRpYWwgKi8gLCB0aGlzLnVyLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXG4gICAgICpcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxuICAgICAqLyAgICBfcigpIHtcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cbiAgICAgICAgdGhpcy5scigpICYmIG51bGwgPT09IHRoaXMuYXIgJiYgKHRoaXMuYXIgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMubnIsIDZlNCwgKCgpID0+IHRoaXMubXIoKSkpKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovICAgIGdyKHQpIHtcbiAgICAgICAgdGhpcy55cigpLCB0aGlzLnN0cmVhbS5zZW5kKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovICAgIGFzeW5jIG1yKCkge1xuICAgICAgICBpZiAodGhpcy5scigpKSBcbiAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cbiAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgwIC8qIEluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovICAgIHlyKCkge1xuICAgICAgICB0aGlzLmFyICYmICh0aGlzLmFyLmNhbmNlbCgpLCB0aGlzLmFyID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBDYW5jZWxzIHRoZSBoZWFsdGggY2hlY2sgZGVsYXllZCBvcGVyYXRpb24uICovICAgIHByKCkge1xuICAgICAgICB0aGlzLmNyICYmICh0aGlzLmNyLmNhbmNlbCgpLCB0aGlzLmNyID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxuICAgICAqXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxuICAgICAqXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgLSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXG4gICAgICovICAgIGFzeW5jIGNsb3NlKHQsIGUpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXG4gICAgICAgIHRoaXMueXIoKSwgdGhpcy5wcigpLCB0aGlzLnVyLmNhbmNlbCgpLCBcbiAgICAgICAgLy8gSW52YWxpZGF0ZXMgYW55IHN0cmVhbS1yZWxhdGVkIGNhbGxiYWNrcyAoZS5nLiBmcm9tIGF1dGggb3IgdGhlXG4gICAgICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtKSwgZ3VhcmFudGVlaW5nIHRoZXkgd29uJ3QgZXhlY3V0ZS5cbiAgICAgICAgdGhpcy5ycisrLCA0IC8qIEVycm9yICovICE9PSB0ID8gXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAgICAgICAgdGhpcy51ci5yZXNldCgpIDogZSAmJiBlLmNvZGUgPT09IEsuUkVTT1VSQ0VfRVhIQVVTVEVEID8gKFxuICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxuICAgICAgICBGKGUudG9TdHJpbmcoKSksIEYoXCJVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC5cIiksIFxuICAgICAgICB0aGlzLnVyLlhpKCkpIDogZSAmJiBlLmNvZGUgPT09IEsuVU5BVVRIRU5USUNBVEVEICYmIDMgLyogSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLlRyKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIuTmkoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICBUcigpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogU3RhcnRpbmcgKi87XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkVyKHRoaXMucnIpLCBlID0gdGhpcy5ycjtcbiAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBKdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkLCBidXQgc2VlIFRPRE8gYmVsb3cuXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCkgXSkudGhlbigoKFt0LCBuXSkgPT4ge1xuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXG4gICAgICAgICAgICB0aGlzLnJyID09PSBlICYmIFxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXG4gICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXG4gICAgICAgICAgICB0aGlzLklyKHQsIG4pO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaihLLlVOS05PV04sIFwiRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6IFwiICsgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Bcih0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBJcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkVyKHRoaXMucnIpO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuUnIodCwgZSksIHRoaXMuc3RyZWFtLkRpKCgoKSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogT3BlbiAqLyAsIHRoaXMuY3IgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMuc3IsIDFlNCwgKCgpID0+ICh0aGlzLmxyKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIEhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLkRpKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uTmkoKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5Bcih0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRyKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBCYWNrb2ZmICovICwgdGhpcy51ci5aaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIEFyKHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiAkKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBFcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBFcih0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5yciA9PT0gdCA/IGUoKSA6ICgkKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3Mgc28gZXh0ZW5kcyBubyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIExpc3RlblN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLmsgPSBpO1xuICAgIH1cbiAgICBScih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlyLlFpKFwiTGlzdGVuXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMudXIucmVzZXQoKTtcbiAgICAgICAgY29uc3QgZSA9IHJzKHRoaXMuaywgdCksIG4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIHQpKSByZXR1cm4gY3QubWluKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRJZHMgJiYgZS50YXJnZXRJZHMubGVuZ3RoID8gY3QubWluKCkgOiBlLnJlYWRUaW1lID8gR24oZS5yZWFkVGltZSkgOiBjdC5taW4oKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuUHIoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIGJyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gdHModGhpcy5rKSwgZS5hZGRUYXJnZXQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBuID0gWHQocykgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiB1cyh0LCBzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogaHModCwgcylcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSBlLnRhcmdldElkLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgPyBuLnJlc3VtZVRva2VuID0gUW4odCwgZS5yZXN1bWVUb2tlbikgOiBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oY3QubWluKCkpID4gMCAmJiAoXG4gICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgbWFueSB0ZXN0cyBkZXBlbmQgb24gdGhpcyBiZWhhdmlvdXIgdGhvdWdoIChsZWF2aW5nIG1pbigpIG91dFxuICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICBuLnJlYWRUaW1lID0gam4odCwgZS5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSkpLCBuO1xuICAgICAgICB9KHRoaXMuaywgdCk7XG4gICAgICAgIGNvbnN0IG4gPSBmcyh0aGlzLmssIHQpO1xuICAgICAgICBuICYmIChlLmxhYmVscyA9IG4pLCB0aGlzLmdyKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgdnIodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSB0cyh0aGlzLmspLCBlLnJlbW92ZVRhcmdldCA9IHQsIHRoaXMuZ3IoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxuICpcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxuICogcmVxdWVzdC5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXG4gKlxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXG4gKi8gY2xhc3MgaW8gZXh0ZW5kcyBubyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcIndyaXRlX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBXcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFdyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBzLCByKSwgXG4gICAgICAgIHRoaXMuayA9IGksIHRoaXMuVnIgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXG4gICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxuICAgICAqLyAgICBnZXQgU3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZyO1xuICAgIH1cbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuVnIgPSAhMSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB2b2lkIDAsIHN1cGVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIFRyKCkge1xuICAgICAgICB0aGlzLlZyICYmIHRoaXMuRHIoW10pO1xuICAgIH1cbiAgICBScih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlyLlFpKFwiV3JpdGVcIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBCKCEhdC5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdC5zdHJlYW1Ub2tlbiwgdGhpcy5Wcikge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMudXIucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBjcyh0LndyaXRlUmVzdWx0cywgdC5jb21taXRUaW1lKSwgbiA9IEduKHQuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5DcihuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIEIoIXQud3JpdGVSZXN1bHRzIHx8IDAgPT09IHQud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMuVnIgPSAhMCwgdGhpcy5saXN0ZW5lci5OcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBrcigpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IHRzKHRoaXMuayksIHRoaXMuZ3IodCk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIERyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKHQgPT4gb3ModGhpcy5rLCB0KSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ3IoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3Mgcm8gZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuaXIgPSBuLCB0aGlzLmsgPSBzLCBcbiAgICAgICAgdGhpcy4kciA9ICExO1xuICAgIH1cbiAgICBGcigpIHtcbiAgICAgICAgaWYgKHRoaXMuJHIpIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIEJpKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3MsIGldKSA9PiB0aGlzLmlyLkJpKHQsIGUsIG4sIHMsIGkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/ICh0LmNvZGUgPT09IEsuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCB0KSA6IG5ldyBqKEsuVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogSW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggc3RyZWFtZWQgcmVzdWx0cyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgamkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5GcigpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuaXIuamkodCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IGooSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy4kciA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIG9vIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5PciA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5MciA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgQnIoKSB7XG4gICAgICAgIDAgPT09IHRoaXMuT3IgJiYgKHRoaXMuVXIoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIHRoaXMuTXIgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIE9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLk1yID0gbnVsbCwgXG4gICAgICAgIHRoaXMucXIoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy5VcihcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIEtyKHQpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLlVyKFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pIDogKHRoaXMuT3IrKywgXG4gICAgICAgIHRoaXMuT3IgPj0gMSAmJiAodGhpcy5qcigpLCB0aGlzLnFyKGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHt0LnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLlVyKFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldCh0KSB7XG4gICAgICAgIHRoaXMuanIoKSwgdGhpcy5PciA9IDAsIFwiT25saW5lXCIgLyogT25saW5lICovID09PSB0ICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMuTHIgPSAhMSksIHRoaXMuVXIodCk7XG4gICAgfVxuICAgIFVyKHQpIHtcbiAgICAgICAgdCAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQpKTtcbiAgICB9XG4gICAgcXIodCkge1xuICAgICAgICBjb25zdCBlID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHt0fVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5MciA/IChGKGUpLCB0aGlzLkxyID0gITEpIDogJChcIk9ubGluZVN0YXRlVHJhY2tlclwiLCBlKTtcbiAgICB9XG4gICAganIoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuTXIgJiYgKHRoaXMuTXIuY2FuY2VsKCksIHRoaXMuTXIgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGFvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUXIgPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLldyID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuR3IgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpyID0gW10sIHRoaXMuSHIgPSBpLCB0aGlzLkhyLkVpKCh0ID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICBnbyh0aGlzKSAmJiAoJChcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgICAgICAgICBlLkdyLmFkZCg0IC8qIENvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IHVvKGUpLCBlLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGUuR3IuZGVsZXRlKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgY28oZSk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5KciA9IG5ldyBvbyhuLCBzKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNvKHQpIHtcbiAgICBpZiAoZ28odCkpIGZvciAoY29uc3QgZSBvZiB0LnpyKSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICEwKTtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcbiAqIGVuYWJsZU5ldHdvcmsoKS5cbiAqLyBhc3luYyBmdW5jdGlvbiB1byh0KSB7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuenIpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITEpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcbiAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cbiAqL1xuZnVuY3Rpb24gaG8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIG4uV3IuaGFzKGUudGFyZ2V0SWQpIHx8IChcbiAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXG4gICAgbi5Xci5zZXQoZS50YXJnZXRJZCwgZSksIG1vKG4pID8gXG4gICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cbiAgICBfbyhuKSA6IHhvKG4pLmxyKCkgJiYgZm8obiwgZSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gbG8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0geG8obik7XG4gICAgbi5Xci5kZWxldGUoZSksIHMubHIoKSAmJiB3byhuLCBlKSwgMCA9PT0gbi5Xci5zaXplICYmIChzLmxyKCkgPyBzLl9yKCkgOiBnbyhuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIGZvKHQsIGUpIHtcbiAgICB0LllyLlgoZS50YXJnZXRJZCksIHhvKHQpLmJyKGUpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIHdvKHQsIGUpIHtcbiAgICB0LllyLlgoZSksIHhvKHQpLnZyKGUpO1xufVxuXG5mdW5jdGlvbiBfbyh0KSB7XG4gICAgdC5ZciA9IG5ldyBNbih7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IGUgPT4gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKSxcbiAgICAgICAgRXQ6IGUgPT4gdC5Xci5nZXQoZSkgfHwgbnVsbFxuICAgIH0pLCB4byh0KS5zdGFydCgpLCB0LkpyLkJyKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBtbyh0KSB7XG4gICAgcmV0dXJuIGdvKHQpICYmICF4byh0KS5ocigpICYmIHQuV3Iuc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIGdvKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gcSh0KS5Hci5zaXplO1xufVxuXG5mdW5jdGlvbiB5byh0KSB7XG4gICAgdC5ZciA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcG8odCkge1xuICAgIHQuV3IuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgZm8odCwgZSk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBUbyh0LCBlKSB7XG4gICAgeW8odCksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgbW8odCkgPyAodC5Kci5LcihlKSwgX28odCkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgdC5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEVvKHQsIGUsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIHQuSnIuc2V0KFwiT25saW5lXCIgLyogT25saW5lICovKSwgZSBpbnN0YW5jZW9mIEZuICYmIDIgLyogUmVtb3ZlZCAqLyA9PT0gZS5zdGF0ZSAmJiBlLmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlLnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICB0LldyLmhhcyhzKSAmJiAoYXdhaXQgdC5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHMsIG4pLCB0LldyLmRlbGV0ZShzKSwgdC5Zci5yZW1vdmVUYXJnZXQocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKHQsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgJChcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgZS50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgSW8odCwgbik7XG4gICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgeG4gPyB0LllyLm90KGUpIDogZSBpbnN0YW5jZW9mICRuID8gdC5Zci5kdChlKSA6IHQuWXIudXQoZSksIFxuICAgICFuLmlzRXF1YWwoY3QubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX3IodC5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8oZSkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuWXIuZ3QoZSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuV3IuZ2V0KHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiB0LldyLnNldChzLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LldyLmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW4pIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LldyLnNldChlLCBuLndpdGhSZXN1bWVUb2tlbih5dC5FTVBUWV9CWVRFX1NUUklORywgbi5zbmFwc2hvdFZlcnNpb24pKSwgXG4gICAgICAgICAgICAgICAgLy8gQ2F1c2UgYSBoYXJkIHJlc2V0IGJ5IHVud2F0Y2hpbmcgYW5kIHJld2F0Y2hpbmcgaW1tZWRpYXRlbHksIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGRlbGliZXJhdGVseSBkb24ndCBzZW5kIGEgcmVzdW1lIHRva2VuIHNvIHRoYXQgd2UgZ2V0IGEgZnVsbCB1cGRhdGUuXG4gICAgICAgICAgICAgICAgd28odCwgZSk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IGFpKG4udGFyZ2V0LCBlLCAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovICwgbi5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgZm8odCwgcyk7XG4gICAgICAgICAgICB9KSksIHQucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0odCwgbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIGUpLCBhd2FpdCBJbyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gSW8odCwgZSwgbikge1xuICAgIGlmICghWHMoZSkpIHRocm93IGU7XG4gICAgdC5Hci5hZGQoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAvLyBEaXNhYmxlIG5ldHdvcmsgYW5kIHJhaXNlIG9mZmxpbmUgc25hcHNob3RzXG4gICAgYXdhaXQgdW8odCksIHQuSnIuc2V0KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBuIHx8IChcbiAgICAvLyBVc2UgYSBzaW1wbGUgcmVhZCBvcGVyYXRpb24gdG8gZGV0ZXJtaW5lIGlmIEluZGV4ZWREQiByZWNvdmVyZWQuXG4gICAgLy8gSWRlYWxseSwgd2Ugd291bGQgZXhwb3NlIGEgaGVhbHRoIGNoZWNrIGRpcmVjdGx5IG9uIFNpbXBsZURiLCBidXRcbiAgICAvLyBSZW1vdGVTdG9yZSBvbmx5IGhhcyBhY2Nlc3MgdG8gcGVyc2lzdGVuY2UgdGhyb3VnaCBMb2NhbFN0b3JlLlxuICAgIG4gPSAoKSA9PiBfcih0LmxvY2FsU3RvcmUpKSwgXG4gICAgLy8gUHJvYmUgSW5kZXhlZERCIHBlcmlvZGljYWxseSBhbmQgcmUtZW5hYmxlIG5ldHdvcmtcbiAgICB0LmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLCBhd2FpdCBuKCksIHQuR3IuZGVsZXRlKDEgLyogSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IGNvKHQpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIEFvKHQsIGUpIHtcbiAgICByZXR1cm4gZSgpLmNhdGNoKChuID0+IElvKHQsIG4sIGUpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFJvKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KSwgbiA9ICRvKGUpO1xuICAgIGxldCBzID0gZS5Rci5sZW5ndGggPiAwID8gZS5RcltlLlFyLmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDtQbyhlKTsgKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgeXIoZS5sb2NhbFN0b3JlLCBzKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIDAgPT09IGUuUXIubGVuZ3RoICYmIG4uX3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0LmJhdGNoSWQsIGJvKGUsIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgSW8oZSwgdCk7XG4gICAgfVxuICAgIHZvKGUpICYmIFZvKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBQbyh0KSB7XG4gICAgcmV0dXJuIGdvKHQpICYmIHQuUXIubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIGJvKHQsIGUpIHtcbiAgICB0LlFyLnB1c2goZSk7XG4gICAgY29uc3QgbiA9ICRvKHQpO1xuICAgIG4ubHIoKSAmJiBuLlNyICYmIG4uRHIoZS5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiB2byh0KSB7XG4gICAgcmV0dXJuIGdvKHQpICYmICEkbyh0KS5ocigpICYmIHQuUXIubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gVm8odCkge1xuICAgICRvKHQpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFNvKHQpIHtcbiAgICAkbyh0KS5rcigpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBEbyh0KSB7XG4gICAgY29uc3QgZSA9ICRvKHQpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LlFyKSBlLkRyKG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gQ28odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LlFyLnNoaWZ0KCksIGkgPSBvaS5mcm9tKHMsIGUsIG4pO1xuICAgIGF3YWl0IEFvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBSbyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gTm8odCwgZSkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgZSAmJiAkbyh0KS5TciAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAobiA9IGUuY29kZSwgX24obikgJiYgbiAhPT0gSy5BQk9SVEVEKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5Rci5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgICRvKHQpLndyKCksIGF3YWl0IEFvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIGUpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IFJvKHQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuO1xuICAgIH0odCwgZSksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgdm8odCkgJiYgVm8odCk7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGtvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBlID8gKG4uR3IuZGVsZXRlKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCBjbyhuKSkgOiBlIHx8IChuLkdyLmFkZCgyIC8qIElzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgdW8obiksIG4uSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIHhvKHQpIHtcbiAgICByZXR1cm4gdC5YciB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuWHIgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgICAgICByZXR1cm4gcy5GcigpLCBuZXcgc28oZSwgcy5pciwgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5rLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgRGk6IHBvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIE5pOiBUby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBQcjogRW8uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LnpyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWHIud3IoKSwgbW8odCkgPyBfbyh0KSA6IHQuSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKSA6IChhd2FpdCB0LlhyLnN0b3AoKSwgXG4gICAgICAgIHlvKHQpKTtcbiAgICB9KSkpLCB0LlhyO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gJG8odCkge1xuICAgIHJldHVybiB0LlpyIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5aciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHEodCk7XG4gICAgICAgIHJldHVybiBzLkZyKCksIG5ldyBpbyhlLCBzLmlyLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLmssIG4pO1xuICAgIH0odC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICBEaTogU28uYmluZChudWxsLCB0KSxcbiAgICAgICAgTmk6IE5vLmJpbmQobnVsbCwgdCksXG4gICAgICAgIE5yOiBEby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBDcjogQ28uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LnpyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWnIud3IoKSwgXG4gICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgYXdhaXQgUm8odCkpIDogKGF3YWl0IHQuWnIuc3RvcCgpLCB0LlFyLmxlbmd0aCA+IDAgJiYgKCQoXCJSZW1vdGVTdG9yZVwiLCBgU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggJHt0LlFyLmxlbmd0aH0gcGVuZGluZyB3cml0ZXNgKSwgXG4gICAgICAgIHQuUXIgPSBbXSkpO1xuICAgIH0pKSksIHQuWnI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxuICpcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAqXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cbiAqXG4gKiBOb3RlOiBXZSBpbXBsZW1lbnQgYFByb21pc2VMaWtlYCBpbnN0ZWFkIG9mIGBQcm9taXNlYCwgYXMgdGhlIGBQcm9taXNlYCB0eXBlXG4gKiBpbiBuZXdlciB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IGRlZmluZXMgYGZpbmFsbHlgLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluXG4gKiBJRS5cbiAqL1xuY2xhc3MgRm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy50YXJnZXRUaW1lTXMgPSBuLCB0aGlzLm9wID0gcywgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSBpLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBRLCB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksIFxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goKHQgPT4ge30pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcbiAgICAgKiBleGVjdXRlZCBvbiB0aGUgcHJvdmlkZWQgYXN5bmNRdWV1ZSBhZnRlciB0aGUgcHJvdmlkZWQgZGVsYXlNcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIC0gVGhlIHF1ZXVlIHRvIHNjaGVkdWxlIHRoZSBvcGVyYXRpb24gb24uXG4gICAgICogQHBhcmFtIGlkIC0gQSBUaW1lciBJRCBpZGVudGlmeWluZyB0aGUgdHlwZSBvZiBvcGVyYXRpb24gdGhpcyBpcy5cbiAgICAgKiBAcGFyYW0gZGVsYXlNcyAtIFRoZSBkZWxheSAobXMpIGJlZm9yZSB0aGUgb3BlcmF0aW9uIHNob3VsZCBiZSBzY2hlZHVsZWQuXG4gICAgICogQHBhcmFtIG9wIC0gVGhlIG9wZXJhdGlvbiB0byBydW4uXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgb25jZSB0aGVcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxuICAgICAqICAgZnJvbSBpdHMgZGVsYXllZE9wZXJhdGlvbnMgbGlzdC5cbiAgICAgKiAgIFBPUlRJTkcgTk9URTogVGhpcyBleGlzdHMgdG8gcHJldmVudCBtYWtpbmcgcmVtb3ZlRGVsYXllZE9wZXJhdGlvbigpIGFuZFxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlQW5kU2NoZWR1bGUodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gRGF0ZS5ub3coKSArIG4sIG8gPSBuZXcgRm8odCwgZSwgciwgcywgaSk7XG4gICAgICAgIHJldHVybiBvLnN0YXJ0KG4pLCBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxuICAgICAqLyAgICBzdGFydCh0KSB7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KCgoKSA9PiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpKSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcbiAgICAgKiBjYW5jZWxlZCkuXG4gICAgICovICAgIHNraXBEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxuICAgICAqLyAgICBjYW5jZWwodCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgaihLLkNBTkNFTExFRCwgXCJPcGVyYXRpb24gY2FuY2VsbGVkXCIgKyAodCA/IFwiOiBcIiArIHQgOiBcIlwiKSkpKTtcbiAgICB9XG4gICAgaGFuZGxlRGVsYXlFbGFwc2VkKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSA/ICh0aGlzLmNsZWFyVGltZW91dCgpLCBcbiAgICAgICAgdGhpcy5vcCgpLnRoZW4oKHQgPT4gdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpKSkpIDogUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLnJlbW92YWxDYWxsYmFjayh0aGlzKSwgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJIYW5kbGUpLCBcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmlyZXN0b3JlRXJyb3IgdGhhdCBjYW4gYmUgc3VyZmFjZWQgdG8gdGhlIHVzZXIgaWYgdGhlIHByb3ZpZGVkXG4gKiBlcnJvciBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiBSZS10aHJvd3MgdGhlIGVycm9yIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBPbyh0LCBlKSB7XG4gICAgaWYgKEYoXCJBc3luY1F1ZXVlXCIsIGAke2V9OiAke3R9YCksIFhzKHQpKSByZXR1cm4gbmV3IGooSy5VTkFWQUlMQUJMRSwgYCR7ZX06ICR7dH1gKTtcbiAgICB0aHJvdyB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cbiAqIHRoZSBrZXkuXG4gKi8gY2xhc3MgTW8ge1xuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCA/IChlLCBuKSA9PiB0KGUsIG4pIHx8IFN0LmNvbXBhcmF0b3IoZS5rZXksIG4ua2V5KSA6ICh0LCBlKSA9PiBTdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSksIFxuICAgICAgICB0aGlzLmtleWVkTWFwID0gUG4oKSwgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgZ24odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjb3B5IG9mIHRoZSBleGlzdGluZyBEb2N1bWVudFNldCwgdXNpbmcgdGhlIHNhbWVcbiAgICAgKiBjb21wYXJhdG9yLlxuICAgICAqLyAgICBzdGF0aWMgZW1wdHlTZXQodCkge1xuICAgICAgICByZXR1cm4gbmV3IE1vKHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIHByb3ZpZGVkIGtleSBpbiB0aGUgZG9jdW1lbnQgc2V0LCBvciAtMSBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcbiAgICAgKi8gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLnNvcnRlZFNldC5pbmRleE9mKGUpIDogLTE7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuc2l6ZTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLnNvcnRlZFNldC5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRlbGV0ZSh0LmtleSk7XG4gICAgICAgIHJldHVybiBlLmNvcHkoZS5rZXllZE1hcC5pbnNlcnQodC5rZXksIHQpLCBlLnNvcnRlZFNldC5pbnNlcnQodCwgbnVsbCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhIGRvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZSh0KSwgdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKGUpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgTW8pKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCAwID09PSB0Lmxlbmd0aCA/IFwiRG9jdW1lbnRTZXQgKClcIiA6IFwiRG9jdW1lbnRTZXQgKFxcbiAgXCIgKyB0LmpvaW4oXCIgIFxcblwiKSArIFwiXFxuKVwiO1xuICAgIH1cbiAgICBjb3B5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBNbztcbiAgICAgICAgcmV0dXJuIG4uY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvciwgbi5rZXllZE1hcCA9IHQsIG4uc29ydGVkU2V0ID0gZSwgbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50Q2hhbmdlU2V0IGtlZXBzIHRyYWNrIG9mIGEgc2V0IG9mIGNoYW5nZXMgdG8gZG9jcyBpbiBhIHF1ZXJ5LCBtZXJnaW5nXG4gKiBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBkb2MuXG4gKi8gY2xhc3MgTG8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmVvID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICB0cmFjayh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRvYy5rZXksIG4gPSB0aGlzLmVvLmdldChlKTtcbiAgICAgICAgbiA/IFxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXG4gICAgICAgIDAgLyogQWRkZWQgKi8gIT09IHQudHlwZSAmJiAzIC8qIE1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwgdCkgOiAzIC8qIE1ldGFkYXRhICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIEFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5yZW1vdmUoZSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgIGRvYzogbi5kb2NcbiAgICAgICAgfSkgOiAwIC8qIEFkZGVkICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogXG4gICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XG4gICAgICAgIC8vIEFkZGVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXG4gICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxuICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcbiAgICAgICAgTCgpIDogdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHQpO1xuICAgIH1cbiAgICBubygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5lby5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxufVxuXG5jbGFzcyBCbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgYSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5kb2NzID0gZSwgdGhpcy5vbGREb2NzID0gbiwgdGhpcy5kb2NDaGFuZ2VzID0gcywgdGhpcy5tdXRhdGVkS2V5cyA9IGksIFxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IHIsIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IG8sIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSBhO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBuZXcgQm8odCwgZSwgTW8uZW1wdHlTZXQoZSksIGksIG4sIHMsIFxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyAhMCwgXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSk7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlICYmIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9PT0gdC5zeW5jU3RhdGVDaGFuZ2VkICYmIHRoaXMubXV0YXRlZEtleXMuaXNFcXVhbCh0Lm11dGF0ZWRLZXlzKSAmJiBiZSh0aGlzLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiB0aGlzLmRvY3MuaXNFcXVhbCh0LmRvY3MpICYmIHRoaXMub2xkRG9jcy5pc0VxdWFsKHQub2xkRG9jcykpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY0NoYW5nZXMsIG4gPSB0LmRvY0NoYW5nZXM7XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSBpZiAoZVt0XS50eXBlICE9PSBuW3RdLnR5cGUgfHwgIWVbdF0uZG9jLmlzRXF1YWwoblt0XS5kb2MpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXG4gKi8gY2xhc3MgVW8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNvID0gdm9pZCAwLCB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgcW8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgR2koKHQgPT4gdmUodCkpLCBiZSksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIHRoaXMuaW8gPSBuZXcgU2V0O1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gS28odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExLCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAociB8fCAoaSA9ICEwLCByID0gbmV3IFVvKSwgaSkgdHJ5IHtcbiAgICAgICAgci5zbyA9IGF3YWl0IG4ub25MaXN0ZW4ocyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0gT28odCwgYEluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICcke1ZlKGUucXVlcnkpfScgZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiB2b2lkIGUub25FcnJvcihuKTtcbiAgICB9XG4gICAgaWYgKG4ucXVlcmllcy5zZXQocywgciksIHIubGlzdGVuZXJzLnB1c2goZSksIFxuICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgIGUucm8obi5vbmxpbmVTdGF0ZSksIHIuc28pIHtcbiAgICAgICAgZS5vbyhyLnNvKSAmJiBHbyhuKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGpvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAocikge1xuICAgICAgICBjb25zdCB0ID0gci5saXN0ZW5lcnMuaW5kZXhPZihlKTtcbiAgICAgICAgdCA+PSAwICYmIChyLmxpc3RlbmVycy5zcGxpY2UodCwgMSksIGkgPSAwID09PSByLmxpc3RlbmVycy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaSkgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUocyksIG4ub25Vbmxpc3RlbihzKTtcbn1cblxuZnVuY3Rpb24gUW8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGxldCBzID0gITE7XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IHQucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KGUpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGkubGlzdGVuZXJzKSBlLm9vKHQpICYmIChzID0gITApO1xuICAgICAgICAgICAgaS5zbyA9IHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcyAmJiBHbyhuKTtcbn1cblxuZnVuY3Rpb24gV28odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gcy5xdWVyaWVzLmdldChlKTtcbiAgICBpZiAoaSkgZm9yIChjb25zdCB0IG9mIGkubGlzdGVuZXJzKSB0Lm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgcy5xdWVyaWVzLmRlbGV0ZShlKTtcbn1cblxuLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXG5mdW5jdGlvbiBHbyh0KSB7XG4gICAgdC5pby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxuICpcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxuICovIGNsYXNzIHpvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLmFvID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsIHNuYXBzaG90cyAoZS5nLiBmcm9tIGNhY2hlKSBtYXkgbm90IGJlIHByb3BhZ2F0ZWQgdG8gdGhlIHdyYXBwZWRcbiAgICAgICAgICogb2JzZXJ2ZXIuIFRoaXMgZmxhZyBpcyBzZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIGFjdHVhbGx5IHJhaXNlZCBhbiBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY28gPSAhMSwgdGhpcy51byA9IG51bGwsIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgb28odCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmRvY0NoYW5nZXMpIDMgLyogTWV0YWRhdGEgKi8gIT09IG4udHlwZSAmJiBlLnB1c2gobik7XG4gICAgICAgICAgICB0ID0gbmV3IEJvKHQucXVlcnksIHQuZG9jcywgdC5vbGREb2NzLCBlLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSwgdC5zeW5jU3RhdGVDaGFuZ2VkLCBcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY28gPyB0aGlzLmhvKHQpICYmICh0aGlzLmFvLm5leHQodCksIGUgPSAhMCkgOiB0aGlzLmxvKHQsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLmZvKHQpLCBcbiAgICAgICAgZSA9ICEwKSwgdGhpcy51byA9IHQsIGU7XG4gICAgfVxuICAgIG9uRXJyb3IodCkge1xuICAgICAgICB0aGlzLmFvLmVycm9yKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAgcm8odCkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMudW8gJiYgIXRoaXMuY28gJiYgdGhpcy5sbyh0aGlzLnVvLCB0KSAmJiAodGhpcy5mbyh0aGlzLnVvKSwgZSA9ICEwKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGxvKHQsIGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSBlO1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLndvIHx8ICFuKSAmJiAoIXQuZG9jcy5pc0VtcHR5KCkgfHwgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gZSk7XG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMgb3Igd2UgYXJlIG9mZmxpbmVcbiAgICAgICAgfVxuICAgIGhvKHQpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cbiAgICAgICAgaWYgKHQuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnVvICYmIHRoaXMudW8uaGFzUGVuZGluZ1dyaXRlcyAhPT0gdC5oYXNQZW5kaW5nV3JpdGVzO1xuICAgICAgICByZXR1cm4gISghdC5zeW5jU3RhdGVDaGFuZ2VkICYmICFlKSAmJiAhMCA9PT0gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cbiAgICAgICAgfVxuICAgIGZvKHQpIHtcbiAgICAgICAgdCA9IEJvLmZyb21Jbml0aWFsRG9jdW1lbnRzKHQucXVlcnksIHQuZG9jcywgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUpLCB0aGlzLmNvID0gITAsIFxuICAgICAgICB0aGlzLmFvLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIEhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZCA9IHQsIHRoaXMuYnl0ZUxlbmd0aCA9IGU7XG4gICAgfVxuICAgIF9vKCkge1xuICAgICAgICByZXR1cm4gXCJtZXRhZGF0YVwiIGluIHRoaXMucGF5bG9hZDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBKbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmsgPSB0O1xuICAgIH1cbiAgICBIbih0KSB7XG4gICAgICAgIHJldHVybiBZbih0aGlzLmssIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICBKbih0KSB7XG4gICAgICAgIHJldHVybiB0Lm1ldGFkYXRhLmV4aXN0cyA/IHNzKHRoaXMuaywgdC5kb2N1bWVudCwgITEpIDogV3QubmV3Tm9Eb2N1bWVudCh0aGlzLkhuKHQubWV0YWRhdGEubmFtZSksIHRoaXMuWW4odC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBZbih0KSB7XG4gICAgICAgIHJldHVybiBHbih0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyBZbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm1vID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5rID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCB0aGlzLnByb2dyZXNzID0gWG8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIHlvKHQpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSB0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCBlID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIHJldHVybiB0LnBheWxvYWQubmFtZWRRdWVyeSA/IHRoaXMucXVlcmllcy5wdXNoKHQucGF5bG9hZC5uYW1lZFF1ZXJ5KSA6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhID8gKHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgbWV0YWRhdGE6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhXG4gICAgICAgIH0pLCB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKytlKSA6IHQucGF5bG9hZC5kb2N1bWVudCAmJiAodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoIC0gMV0uZG9jdW1lbnQgPSB0LnBheWxvYWQuZG9jdW1lbnQsIFxuICAgICAgICArK2UpLCBlICE9PSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA/ICh0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA9IGUsIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSkgOiBudWxsO1xuICAgIH1cbiAgICBwbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwLCBuID0gbmV3IEpvKHRoaXMuayk7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSBpZiAocy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi5IbihzLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoZS5nZXQobikgfHwgU24oKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IFByKHRoaXMubG9jYWxTdG9yZSwgbmV3IEpvKHRoaXMuayksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLm1vLmlkKSwgZSA9IHRoaXMucG8odGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCBicih0aGlzLmxvY2FsU3RvcmUsIHQsIGUuZ2V0KHQubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwgbmV3IGFyKE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gWG8odCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgWm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgdGEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIGVhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5UbyA9IGUsIHRoaXMuRW8gPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB3aGV0aGVyIHRoZSB2aWV3IGlzIGN1cnJlbnQgd2l0aCB0aGUgYmFja2VuZC4gQSB2aWV3IGlzIGNvbnNpZGVyZWRcbiAgICAgICAgICogY3VycmVudCBhZnRlciBpdCBoYXMgc2VlbiB0aGUgY3VycmVudCBmbGFnIGZyb20gdGhlIGJhY2tlbmQgYW5kIGRpZCBub3RcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxuICAgICAgICAgKiBmaWx0ZXIgbWlzbWF0Y2gpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIFxuICAgICAgICAvKiogRG9jdW1lbnRzIGluIHRoZSB2aWV3IGJ1dCBub3QgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICAgICAgdGhpcy5JbyA9IFNuKCksIFxuICAgICAgICAvKiogRG9jdW1lbnQgS2V5cyB0aGF0IGhhdmUgbG9jYWwgY2hhbmdlcyAqL1xuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gU24oKSwgdGhpcy5BbyA9IERlKHQpLCB0aGlzLlJvID0gbmV3IE1vKHRoaXMuQW8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIHJlbW90ZSBkb2N1bWVudHMgdGhhdCB0aGUgc2VydmVyIGhhcyB0b2xkIHVzIGJlbG9uZ3MgdG8gdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKiB0aGlzIHZpZXcuXG4gICAgICovICAgIGdldCBQbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzZXQgb2YgZG9jIGNoYW5nZXMsIGFwcGxpZXMgdGhlIHF1ZXJ5IGxpbWl0LCBhbmQgY29tcHV0ZXNcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XG4gICAgICogbmVlZCB0byBnbyBiYWNrIHRvIHRoZSBsb2NhbCBjYWNoZSBmb3IgbW9yZSByZXN1bHRzLiBEb2VzIG5vdCBtYWtlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgZG9jIGNoYW5nZXMgdG8gYXBwbHkgdG8gdGhpcyB2aWV3LlxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgLSBJZiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB3aXRoIGEgcmVmaWxsLCB0aGVuIHN0YXJ0XG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAgICogQHJldHVybnMgYSBuZXcgc2V0IG9mIGRvY3MsIGNoYW5nZXMsIGFuZCByZWZpbGwgZmxhZy5cbiAgICAgKi8gICAgYm8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSA/IGUudm8gOiBuZXcgTG8sIHMgPSBlID8gZS5SbyA6IHRoaXMuUm87XG4gICAgICAgIGxldCBpID0gZSA/IGUubXV0YXRlZEtleXMgOiB0aGlzLm11dGF0ZWRLZXlzLCByID0gcywgbyA9ICExO1xuICAgICAgICAvLyBUcmFjayB0aGUgbGFzdCBkb2MgaW4gYSAoZnVsbCkgbGltaXQuIFRoaXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIHNvbWVcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XG4gICAgICAgIC8vIG1lYW4gdGhlcmUgaXMgc29tZSBvdGhlciBkb2N1bWVudCBpbiB0aGUgbG9jYWwgY2FjaGUgdGhhdCBlaXRoZXIgc2hvdWxkXG4gICAgICAgIC8vIGNvbWUgKDEpIGJldHdlZW4gdGhlIG9sZCBsYXN0IGxpbWl0IGRvYyBhbmQgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGVcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxuICAgICAgICAvLyBkZWxldGVzLiBTbyB3ZSBrZWVwIHRoaXMgZG9jIGF0IHRoZSBvbGQgbGltaXQgdG8gY29tcGFyZSB0aGUgdXBkYXRlcyB0by5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xuICAgICAgICAvLyBzZXQpLCBiZWNhdXNlIHRoZXJlIHdpbGwgb25seSBiZSBhZGRzIC0tIG5vIGRlbGV0ZXMgb3IgdXBkYXRlcy5cbiAgICAgICAgY29uc3QgYSA9IHllKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMubGFzdCgpIDogbnVsbCwgYyA9IHBlKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMuZmlyc3QoKSA6IG51bGw7XG4gICAgICAgIC8vIERyb3AgZG9jdW1lbnRzIG91dCB0byBtZWV0IGxpbWl0L2xpbWl0VG9MYXN0IHJlcXVpcmVtZW50LlxuICAgICAgICBpZiAodC5pbm9yZGVyVHJhdmVyc2FsKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IHMuZ2V0KHQpLCBoID0gU2UodGhpcy5xdWVyeSwgZSkgPyBlIDogbnVsbCwgbCA9ICEhdSAmJiB0aGlzLm11dGF0ZWRLZXlzLmhhcyh1LmtleSksIGYgPSAhIWggJiYgKGguaGFzTG9jYWxNdXRhdGlvbnMgfHwgXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNvbnNpZGVyIGNvbW1pdHRlZCBtdXRhdGlvbnMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmVcbiAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cbiAgICAgICAgICAgIHRoaXMubXV0YXRlZEtleXMuaGFzKGgua2V5KSAmJiBoLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgICAgICAgICBsZXQgZCA9ICExO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgJiYgaCkge1xuICAgICAgICAgICAgICAgIHUuZGF0YS5pc0VxdWFsKGguZGF0YSkgPyBsICE9PSBmICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMyAvKiBNZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITApIDogdGhpcy5Wbyh1LCBoKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwLCAoYSAmJiB0aGlzLkFvKGgsIGEpID4gMCB8fCBjICYmIHRoaXMuQW8oaCwgYykgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIXUgJiYgaCA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgIH0pLCBkID0gITApIDogdSAmJiAhaCAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHVcbiAgICAgICAgICAgIH0pLCBkID0gITAsIChhIHx8IGMpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgZCAmJiAoaCA/IChyID0gci5hZGQoaCksIGkgPSBmID8gaS5hZGQodCkgOiBpLmRlbGV0ZSh0KSkgOiAociA9IHIuZGVsZXRlKHQpLCBpID0gaS5kZWxldGUodCkpKTtcbiAgICAgICAgfSkpLCB5ZSh0aGlzLnF1ZXJ5KSB8fCBwZSh0aGlzLnF1ZXJ5KSkgZm9yICg7ci5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0geWUodGhpcy5xdWVyeSkgPyByLmxhc3QoKSA6IHIuZmlyc3QoKTtcbiAgICAgICAgICAgIHIgPSByLmRlbGV0ZSh0LmtleSksIGkgPSBpLmRlbGV0ZSh0LmtleSksIG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgUm86IHIsXG4gICAgICAgICAgICB2bzogbixcbiAgICAgICAgICAgIEJuOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgVm8odCwgZSkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiB0Lmhhc0xvY2FsTXV0YXRpb25zICYmIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICFlLmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gdXBkYXRlTGltYm9Eb2N1bWVudHMgLSBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb25cbiAgICAgKiAgICAgICAgdGhpcyBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSAtIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgVmlld0NoYW5nZSB3aXRoIHRoZSBnaXZlbiBkb2NzLCBjaGFuZ2VzLCBhbmQgc3luYyBzdGF0ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXG4gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuUm87XG4gICAgICAgIHRoaXMuUm8gPSB0LlJvLCB0aGlzLm11dGF0ZWRLZXlzID0gdC5tdXRhdGVkS2V5cztcbiAgICAgICAgLy8gU29ydCBjaGFuZ2VzIGJhc2VkIG9uIHR5cGUgYW5kIHF1ZXJ5IGNvbXBhcmF0b3JcbiAgICAgICAgY29uc3QgaSA9IHQudm8ubm8oKTtcbiAgICAgICAgaS5zb3J0KCgodCwgZSkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICAgICAgICAgICAgICBjYXNlIDMgLyogTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG4odCkgLSBuKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LnR5cGUsIGUudHlwZSkgfHwgdGhpcy5Bbyh0LmRvYywgZS5kb2MpKSksIHRoaXMuU28obik7XG4gICAgICAgIGNvbnN0IHIgPSBlID8gdGhpcy5EbygpIDogW10sIG8gPSAwID09PSB0aGlzLklvLnNpemUgJiYgdGhpcy5jdXJyZW50ID8gMSAvKiBTeW5jZWQgKi8gOiAwIC8qIExvY2FsICovICwgYSA9IG8gIT09IHRoaXMuRW87XG4gICAgICAgIGlmICh0aGlzLkVvID0gbywgMCAhPT0gaS5sZW5ndGggfHwgYSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogbmV3IEJvKHRoaXMucXVlcnksIHQuUm8sIHMsIGksIHQubXV0YXRlZEtleXMsIDAgLyogTG9jYWwgKi8gPT09IG8sIGEsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSksXG4gICAgICAgICAgICAgICAgQ286IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQ286IHJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgcm8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gPT09IHQgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBSbzogdGhpcy5SbyxcbiAgICAgICAgICAgIHZvOiBuZXcgTG8sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIEJuOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKSkgOiB7XG4gICAgICAgICAgICBDbzogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBObyh0KSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMuVG8uaGFzKHQpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuUm8uaGFzKHQpICYmICF0aGlzLlJvLmdldCh0KS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgU28odCkge1xuICAgICAgICB0ICYmICh0LmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5UbyA9IHRoaXMuVG8uYWRkKHQpKSksIHQubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB7fSkpLCBcbiAgICAgICAgdC5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5UbyA9IHRoaXMuVG8uZGVsZXRlKHQpKSksIHRoaXMuY3VycmVudCA9IHQuY3VycmVudCk7XG4gICAgfVxuICAgIERvKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5JbztcbiAgICAgICAgdGhpcy5JbyA9IFNuKCksIHRoaXMuUm8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLk5vKHQua2V5KSAmJiAodGhpcy5JbyA9IHRoaXMuSW8uYWRkKHQua2V5KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLklvLmhhcyh0KSB8fCBlLnB1c2gobmV3IHRhKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLklvLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5oYXMobikgfHwgZS5wdXNoKG5ldyBabyhuKSk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cbiAgICAgKiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAga28odCkge1xuICAgICAgICB0aGlzLlRvID0gdC56biwgdGhpcy5JbyA9IFNuKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJvKHQuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGUsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIHhvKCkge1xuICAgICAgICByZXR1cm4gQm8uZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5SbywgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBMb2NhbCAqLyA9PT0gdGhpcy5Fbyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi9cbmNsYXNzIG5hIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIHNhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRvID0gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBTeW5jRW5naW5lYCBjb29yZGluYXRpbmcgd2l0aCBvdGhlciBwYXJ0cyBvZiBTREsuXG4gKlxuICogVGhlIHBhcnRzIG9mIFN5bmNFbmdpbmUgdGhhdCBhY3QgYXMgYSBjYWxsYmFjayB0byBSZW1vdGVTdG9yZSBuZWVkIHRvIGJlXG4gKiByZWdpc3RlcmVkIGluZGl2aWR1YWxseS4gVGhpcyBpcyBkb25lIGluIGBzeW5jRW5naW5lV3JpdGUoKWAgYW5kXG4gKiBgc3luY0VuZ2luZUxpc3RlbigpYCAoYXMgd2VsbCBhcyBgYXBwbHlQcmltYXJ5U3RhdGUoKWApIGFzIHRoZXNlIG1ldGhvZHNcbiAqIHNlcnZlIGFzIGVudHJ5IHBvaW50cyB0byBSZW1vdGVTdG9yZSdzIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi8gY2xhc3MgaWEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMucmVtb3RlU3RvcmUgPSBlLCB0aGlzLmV2ZW50TWFuYWdlciA9IG4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzLCBcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMgPSByLCB0aGlzLkZvID0ge30sIHRoaXMuT28gPSBuZXcgR2koKHQgPT4gdmUodCkpLCBiZSksIFxuICAgICAgICB0aGlzLk1vID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUga2V5cyBvZiBkb2N1bWVudHMgdGhhdCBhcmUgaW4gbGltYm8gZm9yIHdoaWNoIHdlIGhhdmVuJ3QgeWV0IHN0YXJ0ZWQgYVxuICAgICAgICAgKiBsaW1ibyByZXNvbHV0aW9uIHF1ZXJ5LiBUaGUgc3RyaW5ncyBpbiB0aGlzIHNldCBhcmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgICAqIGBrZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKWAgd2hlcmUgYGtleWAgaXMgYSBgRG9jdW1lbnRLZXlgIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBTZXRgIHR5cGUgd2FzIGNob3NlbiBiZWNhdXNlIGl0IHByb3ZpZGVzIGVmZmljaWVudCBsb29rdXAgYW5kIHJlbW92YWxcbiAgICAgICAgICogb2YgYXJiaXRyYXJ5IGVsZW1lbnRzIGFuZCBpdCBhbHNvIG1haW50YWlucyBpbnNlcnRpb24gb3JkZXIsIHByb3ZpZGluZyB0aGVcbiAgICAgICAgICogZGVzaXJlZCBxdWV1ZS1saWtlIEZJRk8gc2VtYW50aWNzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5MbyA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIHRhcmdldCBJRCBmb3IgZWFjaCBkb2N1bWVudCB0aGF0IGlzIGluIGxpbWJvIHdpdGggYW5cbiAgICAgICAgICogYWN0aXZlIHRhcmdldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQm8gPSBuZXcgZ24oU3QuY29tcGFyYXRvciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIGFjdGl2ZSBsaW1ibyByZXNvbHV0aW9uIGZvciBlYWNoXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQgSUQgdGhhdCB3YXMgc3RhcnRlZCBmb3IgdGhlIHB1cnBvc2Ugb2YgbGltYm8gcmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuVW8gPSBuZXcgTWFwLCB0aGlzLnFvID0gbmV3IFZyLCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cbiAgICAgICAgdGhpcy5LbyA9IHt9LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xuICAgICAgICB0aGlzLmpvID0gbmV3IE1hcCwgdGhpcy5RbyA9ICRpLnJlKCksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxuICAgICAgICB0aGlzLldvID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gITAgPT09IHRoaXMuV287XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcbiAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcbiAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIGluaXRpYWwgc25hcHNob3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJhKHQsIGUpIHtcbiAgICBjb25zdCBuID0geGEodCk7XG4gICAgbGV0IHMsIGk7XG4gICAgY29uc3QgciA9IG4uT28uZ2V0KGUpO1xuICAgIGlmIChyKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICBzID0gci50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMpLCBpID0gci52aWV3LnhvKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgcHIobi5sb2NhbFN0b3JlLCBSZShlKSksIHIgPSBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHMgPSB0LnRhcmdldElkLCBpID0gYXdhaXQgb2EobiwgZSwgcywgXCJjdXJyZW50XCIgPT09IHIpLCBuLmlzUHJpbWFyeUNsaWVudCAmJiBobyhuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdmlldyBmb3IgYSBwcmV2aW91c2x5IHVua25vd24gcXVlcnkgYW5kIGNvbXB1dGVzIGl0cyBpbml0aWFsXG4gKiBzbmFwc2hvdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBvYSh0LCBlLCBuLCBzKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICB0LkdvID0gKGUsIG4sIHMpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBlLnZpZXcuYm8obik7XG4gICAgICAgIGkuQm4gJiYgKFxuICAgICAgICAvLyBUaGUgcXVlcnkgaGFzIGEgbGltaXQgYW5kIHNvbWUgZG9jcyB3ZXJlIHJlbW92ZWQsIHNvIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmUtcnVuIHRoZSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSB0byBtYWtlIHN1cmUgd2VcbiAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxuICAgICAgICBpID0gYXdhaXQgRXIodC5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMSkudGhlbigoKHtkb2N1bWVudHM6IHR9KSA9PiBlLnZpZXcuYm8odCwgaSkpKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzICYmIHMudGFyZ2V0Q2hhbmdlcy5nZXQoZS50YXJnZXRJZCksIG8gPSBlLnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIHIpO1xuICAgICAgICByZXR1cm4gcGEodCwgZS50YXJnZXRJZCwgby5DbyksIG8uc25hcHNob3Q7XG4gICAgfSh0LCBlLCBuLCBzKTtcbiAgICBjb25zdCBpID0gYXdhaXQgRXIodC5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgciA9IG5ldyBlYShlLCBpLnpuKSwgbyA9IHIuYm8oaS5kb2N1bWVudHMpLCBhID0ga24uY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHMgJiYgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyAhPT0gdC5vbmxpbmVTdGF0ZSksIGMgPSByLmFwcGx5Q2hhbmdlcyhvLCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIGEpO1xuICAgIHBhKHQsIG4sIGMuQ28pO1xuICAgIGNvbnN0IHUgPSBuZXcgbmEoZSwgbiwgcik7XG4gICAgcmV0dXJuIHQuT28uc2V0KGUsIHUpLCB0Lk1vLmhhcyhuKSA/IHQuTW8uZ2V0KG4pLnB1c2goZSkgOiB0Lk1vLnNldChuLCBbIGUgXSksIGMuc25hcHNob3Q7XG59XG5cbi8qKiBTdG9wcyBsaXN0ZW5pbmcgdG8gdGhlIHF1ZXJ5LiAqLyBhc3luYyBmdW5jdGlvbiBhYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBuLk9vLmdldChlKSwgaSA9IG4uTW8uZ2V0KHMudGFyZ2V0SWQpO1xuICAgIGlmIChpLmxlbmd0aCA+IDEpIHJldHVybiBuLk1vLnNldChzLnRhcmdldElkLCBpLmZpbHRlcigodCA9PiAhYmUodCwgZSkpKSksIHZvaWQgbi5Pby5kZWxldGUoZSk7XG4gICAgLy8gTm8gb3RoZXIgcXVlcmllcyBhcmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQsIGNsZWFuIHVwIHRoZSBxdWVyeSBhbmQgdGhlIHRhcmdldC5cbiAgICAgICAgaWYgKG4uaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBsb2NhbCBxdWVyeSB0YXJnZXQgZmlyc3QgdG8gYWxsb3cgdXMgdG8gdmVyaWZ5XG4gICAgICAgIC8vIHdoZXRoZXIgYW55IG90aGVyIGNsaWVudCBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0LlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQocy50YXJnZXRJZCk7XG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChzLnRhcmdldElkKSB8fCBhd2FpdCBUcihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShzLnRhcmdldElkKSwgbG8obi5yZW1vdGVTdG9yZSwgcy50YXJnZXRJZCksIFxuICAgICAgICAgICAgZ2Eobiwgcy50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaChCaSk7XG4gICAgfSBlbHNlIGdhKG4sIHMudGFyZ2V0SWQpLCBhd2FpdCBUcihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBjYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9ICRhKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IGF0Lm5vdygpLCBpID0gZS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBTbigpKTtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLlduLnZuKHQsIGkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgIHIgPSBpO1xuICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgIC8vIGxhdGVyIHVzZWQgdG8gZ3VhcmFudGVlIGNvbnNpc3RlbnQgdmFsdWVzIGFuZCBwcmV2ZW50cyBmbGlja2VyXG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGVuKHQsIHIuZ2V0KHQua2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT0gZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhlIGJhc2Ugc3RhdGUgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiB0aGVyZSdzIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IG9uKHQua2V5LCBlLCBRdChlLnZhbHVlLm1hcFZhbHVlKSwgSmUuZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbi5Bbi5hZGRNdXRhdGlvbkJhdGNoKHQsIHMsIG8sIGUpO1xuICAgICAgICAgICAgfSkpKSkudGhlbigodCA9PiAodC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChyKSwge1xuICAgICAgICAgICAgICAgIGJhdGNoSWQ6IHQuYmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiByXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHQuYmF0Y2hJZCksIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGxldCBzID0gdC5Lb1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgcyB8fCAocyA9IG5ldyBnbihpdCkpO1xuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIG4pLCB0LktvW3QuY3VycmVudFVzZXIudG9LZXkoKV0gPSBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAocywgdC5iYXRjaElkLCBuKSwgYXdhaXQgSWEocywgdC5jaGFuZ2VzKSwgYXdhaXQgUm8ocy5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCBlID0gT28odCwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIHVhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgbXIobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Vby5nZXQoZSk7XG4gICAgICAgICAgICBzICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIEIodC5hZGRlZERvY3VtZW50cy5zaXplICsgdC5tb2RpZmllZERvY3VtZW50cy5zaXplICsgdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgdC5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHMuJG8gPSAhMCA6IHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBCKHMuJG8pIDogdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwICYmIChCKHMuJG8pLCBcbiAgICAgICAgICAgIHMuJG8gPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IElhKG4sIHQsIGUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgQmkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIGhhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChzLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIFJlbW90ZVN0b3JlICovID09PSBuIHx8ICFzLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcy5Pby5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHMudmlldy5ybyhlKTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgdC5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4ubGlzdGVuZXJzKSBcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0LnJvKGUpICYmIChzID0gITApO1xuICAgICAgICAgICAgfSkpLCBzICYmIEdvKG4pO1xuICAgICAgICB9KHMuZXZlbnRNYW5hZ2VyLCBlKSwgdC5sZW5ndGggJiYgcy5Gby5Qcih0KSwgcy5vbmxpbmVTdGF0ZSA9IGUsIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlamVjdHMgdGhlIGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldElELiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlXG4gKiBiYWNrZW5kIGZvciBhbnkgYWN0aXZlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXRJRCBjb3JyZXNwb25kcyB0byBvbmUgcHJldmlvdXNseSBpbml0aWF0ZWQgYnkgdGhlXG4gKiB1c2VyIGFzIHBhcnQgb2YgVGFyZ2V0RGF0YSBwYXNzZWQgdG8gbGlzdGVuKCkgb24gUmVtb3RlU3RvcmUuXG4gKiBAcGFyYW0gZXJyIC0gQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29uZGl0aW9uIHRoYXQgaGFzIGZvcmNlZCB0aGUgcmVqZWN0aW9uLlxuICogTmVhcmx5IGFsd2F5cyB0aGlzIHdpbGwgYmUgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSB1c2VyIGlzIG5vIGxvbmdlclxuICogYXV0aG9yaXplZCB0byBzZWUgdGhlIGRhdGEgbWF0Y2hpbmcgdGhlIHRhcmdldC5cbiAqLyBhc3luYyBmdW5jdGlvbiBsYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbik7XG4gICAgY29uc3QgaSA9IHMuVW8uZ2V0KGUpLCByID0gaSAmJiBpLmtleTtcbiAgICBpZiAocikge1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogV2UgcmVhbGx5IG9ubHkgc2hvdWxkIGRvIHRoZSBmb2xsb3dpbmcgb24gcGVybWlzc2lvblxuICAgICAgICAvLyBkZW5pZWQgZXJyb3JzLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGUgY2F1c2UgY29kZSBoZXJlLlxuICAgICAgICAvLyBJdCdzIGEgbGltYm8gZG9jLiBDcmVhdGUgYSBzeW50aGV0aWMgZXZlbnQgc2F5aW5nIGl0IHdhcyBkZWxldGVkLlxuICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiBJZGVhbGx5LCB3ZSB3b3VsZCBoYXZlIGEgbWV0aG9kIGluIHRoZSBsb2NhbFxuICAgICAgICAvLyBzdG9yZSB0byBwdXJnZSBhIGRvY3VtZW50LiBIb3dldmVyLCBpdCB3b3VsZCBiZSB0cmlja3kgdG8ga2VlcCBhbGwgb2ZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHN0b3JlJ3MgaW52YXJpYW50cyB3aXRoIGFub3RoZXIgbWV0aG9kLlxuICAgICAgICBsZXQgdCA9IG5ldyBnbihTdC5jb21wYXJhdG9yKTtcbiAgICAgICAgdCA9IHQuaW5zZXJ0KHIsIFd0Lm5ld05vRG9jdW1lbnQociwgY3QubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IFNuKCkuYWRkKHIpLCBpID0gbmV3IE5uKGN0Lm1pbigpLCBcbiAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8gbmV3IE1hcCwgXG4gICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBUbihpdCksIHQsIG4pO1xuICAgICAgICBhd2FpdCB1YShzLCBpKSwgXG4gICAgICAgIC8vIFNpbmNlIHRoaXMgcXVlcnkgZmFpbGVkLCB3ZSB3b24ndCB3YW50IHRvIG1hbnVhbGx5IHVubGlzdGVuIHRvIGl0LlxuICAgICAgICAvLyBXZSBvbmx5IHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nIGFmdGVyIHdlIHN1Y2Nlc3NmdWxseSBhcHBsaWVkIHRoZVxuICAgICAgICAvLyBSZW1vdGVFdmVudC4gSWYgYGFwcGx5UmVtb3RlRXZlbnQoKWAgdGhyb3dzLCB3ZSB3YW50IHRvIHJlLWxpc3RlbiB0b1xuICAgICAgICAvLyB0aGlzIHF1ZXJ5IHdoZW4gdGhlIFJlbW90ZVN0b3JlIHJlc3RhcnRzIHRoZSBXYXRjaCBzdHJlYW0sIHdoaWNoIHNob3VsZFxuICAgICAgICAvLyByZS10cmlnZ2VyIHRoZSB0YXJnZXQgZmFpbHVyZS5cbiAgICAgICAgcy5CbyA9IHMuQm8ucmVtb3ZlKHIpLCBzLlVvLmRlbGV0ZShlKSwgRWEocyk7XG4gICAgfSBlbHNlIGF3YWl0IFRyKHMubG9jYWxTdG9yZSwgZSwgXG4gICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IGdhKHMsIGUsIG4pKSkuY2F0Y2goQmkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBlLmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHdyKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XG4gICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cbiAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgbWEobiwgcywgLyplcnJvcj0qLyBudWxsKSwgX2EobiwgcyksIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShzLCBcImFja25vd2xlZGdlZFwiKSwgXG4gICAgICAgIGF3YWl0IElhKG4sIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgQmkodCk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBkYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uQW4ubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KChlID0+IChCKG51bGwgIT09IGUpLCBzID0gZS5rZXlzKCksIG4uQW4ucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSkpKS5uZXh0KCgoKSA9PiBuLkFuLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5Xbi52bih0LCBzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBtYShzLCBlLCBuKSwgX2EocywgZSksIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pLCBcbiAgICAgICAgYXdhaXQgSWEocywgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCBCaShuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gd2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGdvKG4ucmVtb3RlU3RvcmUpIHx8ICQoXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuQW4uZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSkpO1xuICAgICAgICB9KG4ubG9jYWxTdG9yZSk7XG4gICAgICAgIGlmICgtMSA9PT0gdCkgXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkgaWYgdGhlcmUgaXMgbm8gcGVuZGluZyB3cml0ZXMgYXQgdGhlIG1vbWVudC5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBuLmpvLmdldCh0KSB8fCBbXTtcbiAgICAgICAgcy5wdXNoKGUpLCBuLmpvLnNldCh0LCBzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBPbyh0LCBcIkluaXRpYWxpemF0aW9uIG9mIHdhaXRGb3JQZW5kaW5nV3JpdGVzKCkgb3BlcmF0aW9uIGZhaWxlZFwiKTtcbiAgICAgICAgZS5yZWplY3Qobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcbiAqIGlmIHRoZXJlIGFyZSBhbnkuXG4gKi8gZnVuY3Rpb24gX2EodCwgZSkge1xuICAgICh0LmpvLmdldChlKSB8fCBbXSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQucmVzb2x2ZSgpO1xuICAgIH0pKSwgdC5qby5kZWxldGUoZSk7XG59XG5cbi8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gbWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIGxldCBpID0gcy5Lb1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXG4gICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLmdldChlKTtcbiAgICAgICAgdCAmJiAobiA/IHQucmVqZWN0KG4pIDogdC5yZXNvbHZlKCksIGkgPSBpLnJlbW92ZShlKSksIHMuS29bcy5jdXJyZW50VXNlci50b0tleSgpXSA9IGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnYSh0LCBlLCBuID0gbnVsbCkge1xuICAgIHQuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChlKTtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5Nby5nZXQoZSkpIHQuT28uZGVsZXRlKHMpLCBuICYmIHQuRm8uem8ocywgbik7XG4gICAgaWYgKHQuTW8uZGVsZXRlKGUpLCB0LmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICB0LnFvLnVzKGUpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5xby5jb250YWluc0tleShlKSB8fCBcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgeWEodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHlhKHQsIGUpIHtcbiAgICB0LkxvLmRlbGV0ZShlLnBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXG4gICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cbiAgICBjb25zdCBuID0gdC5Cby5nZXQoZSk7XG4gICAgbnVsbCAhPT0gbiAmJiAobG8odC5yZW1vdGVTdG9yZSwgbiksIHQuQm8gPSB0LkJvLnJlbW92ZShlKSwgdC5Vby5kZWxldGUobiksIEVhKHQpKTtcbn1cblxuZnVuY3Rpb24gcGEodCwgZSwgbikge1xuICAgIGZvciAoY29uc3QgcyBvZiBuKSBpZiAocyBpbnN0YW5jZW9mIFpvKSB0LnFvLmFkZFJlZmVyZW5jZShzLmtleSwgZSksIFRhKHQsIHMpOyBlbHNlIGlmIChzIGluc3RhbmNlb2YgdGEpIHtcbiAgICAgICAgJChcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgcy5rZXkpLCB0LnFvLnJlbW92ZVJlZmVyZW5jZShzLmtleSwgZSk7XG4gICAgICAgIHQucW8uY29udGFpbnNLZXkocy5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgeWEodCwgcy5rZXkpO1xuICAgIH0gZWxzZSBMKCk7XG59XG5cbmZ1bmN0aW9uIFRhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSBuLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgdC5Cby5nZXQobikgfHwgdC5Mby5oYXMocykgfHwgKCQoXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCB0LkxvLmFkZChzKSwgXG4gICAgRWEodCkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24gRWEodCkge1xuICAgIGZvciAoO3QuTG8uc2l6ZSA+IDAgJiYgdC5Cby5zaXplIDwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LkxvLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgdC5Mby5kZWxldGUoZSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU3QoZHQuZnJvbVN0cmluZyhlKSksIHMgPSB0LlFvLm5leHQoKTtcbiAgICAgICAgdC5Vby5zZXQocywgbmV3IHNhKG4pKSwgdC5CbyA9IHQuQm8uaW5zZXJ0KG4sIHMpLCBobyh0LnJlbW90ZVN0b3JlLCBuZXcgYWkoUmUoZ2Uobi5wYXRoKSksIHMsIDIgLyogTGltYm9SZXNvbHV0aW9uICovICwgZXQuSSkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gSWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gW10sIHIgPSBbXSwgbyA9IFtdO1xuICAgIHMuT28uaXNFbXB0eSgpIHx8IChzLk9vLmZvckVhY2goKCh0LCBhKSA9PiB7XG4gICAgICAgIG8ucHVzaChzLkdvKGEsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoYS50YXJnZXRJZCwgdC5mcm9tQ2FjaGUgPyBcIm5vdC1jdXJyZW50XCIgOiBcImN1cnJlbnRcIiksIFxuICAgICAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdXIuJG4oYS50YXJnZXRJZCwgdCk7XG4gICAgICAgICAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHMuRm8uUHIoaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHEodCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBHcy5mb3JFYWNoKGUsIChlID0+IEdzLmZvckVhY2goZS5rbiwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKS5uZXh0KCgoKSA9PiBHcy5mb3JFYWNoKGUueG4sIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkpKSkpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghWHModCkpIHRocm93IHQ7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICAkKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4ucW4uZ2V0KGUpLCBzID0gdC5zbmFwc2hvdFZlcnNpb24sIGkgPSB0LndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHMpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucW4gPSBuLnFuLmluc2VydChlLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0ocy5sb2NhbFN0b3JlLCByKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEFhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbChlKSkge1xuICAgICAgICAkKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgZS50b0tleSgpKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGRyKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSBlLCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHQuam8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5yZWplY3QobmV3IGooSy5DQU5DRUxMRUQsIGUpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIHQuam8uY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UoZSwgdC5yZW1vdmVkQmF0Y2hJZHMsIHQuYWRkZWRCYXRjaElkcyksIGF3YWl0IElhKG4sIHQuR24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUmEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gbi5Vby5nZXQoZSk7XG4gICAgaWYgKHMgJiYgcy4kbykgcmV0dXJuIFNuKCkuYWRkKHMua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCB0ID0gU24oKTtcbiAgICAgICAgY29uc3QgcyA9IG4uTW8uZ2V0KGUpO1xuICAgICAgICBpZiAoIXMpIHJldHVybiB0O1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uT28uZ2V0KGUpO1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKHMudmlldy5Qbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxuICogZnJvbSBwZXJzaXN0ZW5jZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBQYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBhd2FpdCBFcihuLmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gZS52aWV3LmtvKHMpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBwYShuLCBlLnRhcmdldElkLCBpLkNvKSwgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGJhKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gQXIoZS5sb2NhbFN0b3JlKS50aGVuKCh0ID0+IElhKGUsIHQpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIHZhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gcSh0KSwgciA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHEodCksIHMgPSBxKG4uQW4pO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvb2t1cCBtdXRhdGlvbiBkb2N1bWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBzLlp0KHQsIGUpLm5leHQoKGUgPT4gZSA/IG4uV24udm4odCwgZSkgOiBHcy5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKTtcbiAgICBudWxsICE9PSByID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgUm8oaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgbWEoaSwgZSwgcyB8fCBudWxsKSwgX2EoaSwgZSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcShxKHQpLkFuKS5lZShlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKSkgOiBMKCksIGF3YWl0IElhKGksIHIpKSA6IFxuICAgIC8vIEEgdGhyb3R0bGVkIHRhYiBtYXkgbm90IGhhdmUgc2VlbiB0aGUgbXV0YXRpb24gYmVmb3JlIGl0IHdhcyBjb21wbGV0ZWRcbiAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxuICAgIC8vIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMuIEluIHRoaXMgY2FzZSB3ZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgLy8gc2luY2UgdGhhdCBtZWFucyB3ZSBkaWRuJ3QgYXBwbHkgdGhlIG11dGF0aW9uIGxvY2FsbHkgYXQgYWxsIChpZiB3ZVxuICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcbiAgICAvLyBzZWUgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzIHZpYSBub3JtYWwgcmVtb3RlIGRvY3VtZW50IHVwZGF0ZXNcbiAgICAvLyBhcyBhcHBsaWNhYmxlLlxuICAgICQoXCJTeW5jRW5naW5lXCIsIFwiQ2Fubm90IGFwcGx5IG11dGF0aW9uIGJhdGNoIHdpdGggaWQ6IFwiICsgZSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBWYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgaWYgKHhhKG4pLCAkYShuKSwgITAgPT09IGUgJiYgITAgIT09IG4uV28pIHtcbiAgICAgICAgLy8gU2Vjb25kYXJ5IHRhYnMgb25seSBtYWludGFpbiBWaWV3cyBmb3IgdGhlaXIgbG9jYWwgbGlzdGVuZXJzIGFuZCB0aGVcbiAgICAgICAgLy8gVmlld3MgaW50ZXJuYWwgc3RhdGUgbWF5IG5vdCBiZSAxMDAlIHBvcHVsYXRlZCAoaW4gcGFydGljdWxhclxuICAgICAgICAvLyBzZWNvbmRhcnkgdGFicyBkb24ndCB0cmFjayBzeW5jZWREb2N1bWVudHMsIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgY29uc2lkZXJzIHRvIGJlIGluIHRoZSB0YXJnZXQpLiBTbyB3aGVuIGEgc2Vjb25kYXJ5IGJlY29tZXNcbiAgICAgICAgLy8gcHJpbWFyeSwgd2UgbmVlZCB0byBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCB2aWV3cyBmb3IgYWxsIHRhcmdldHNcbiAgICAgICAgLy8gbWF0Y2ggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICAgIGNvbnN0IHQgPSBuLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLCBlID0gYXdhaXQgU2EobiwgdC50b0FycmF5KCkpO1xuICAgICAgICBuLldvID0gITAsIGF3YWl0IGtvKG4ucmVtb3RlU3RvcmUsICEwKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGhvKG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH0gZWxzZSBpZiAoITEgPT09IGUgJiYgITEgIT09IG4uV28pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBuLk1vLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldChpKSA/IHQucHVzaChpKSA6IGUgPSBlLnRoZW4oKCgpID0+IChnYShuLCBpKSwgXG4gICAgICAgICAgICBUcihuLmxvY2FsU3RvcmUsIGksIFxuICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCkpKSksIGxvKG4ucmVtb3RlU3RvcmUsIGkpO1xuICAgICAgICB9KSksIGF3YWl0IGUsIGF3YWl0IFNhKG4sIHQpLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHEodCk7XG4gICAgICAgICAgICBlLlVvLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgbG8oZS5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgICAgICB9KSksIGUucW8uaHMoKSwgZS5VbyA9IG5ldyBNYXAsIGUuQm8gPSBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZWNvbmNpbGUgdGhlIHF1ZXJ5IHZpZXdzIG9mIHRoZSBwcm92aWRlZCBxdWVyeSB0YXJnZXRzIHdpdGggdGhlIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLiBSYWlzZXMgc25hcHNob3RzIGZvciBhbnkgY2hhbmdlcyB0aGF0IGFmZmVjdCB0aGUgbG9jYWxcbiAqIGNsaWVudCBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBvZiBhbGwgdGFyZ2V0J3MgcXVlcnkgZGF0YS5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHRhcmdldHMgLSB0aGUgbGlzdCBvZiB0YXJnZXRzIHdpdGggdmlld3MgdGhhdCBuZWVkIHRvIGJlIHJlY29tcHV0ZWRcbiAqIEBwYXJhbSB0cmFuc2l0aW9uVG9QcmltYXJ5IC0gYHRydWVgIGlmZiB0aGUgdGFiIHRyYW5zaXRpb25zIGZyb20gYSBzZWNvbmRhcnlcbiAqIHRhYiB0byBhIHByaW1hcnkgdGFiXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4pLCBuLldvID0gITEsIGF3YWl0IGtvKG4ucmVtb3RlU3RvcmUsICExKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFNhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KSwgaSA9IFtdLCByID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGNvbnN0IG4gPSBzLk1vLmdldCh0KTtcbiAgICAgICAgaWYgKG4gJiYgMCAhPT0gbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIGZldGNoIHRoZWlyIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIC8vIGZyb20gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcbiAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cbiAgICAgICAgICAgIGUgPSBhd2FpdCBwcihzLmxvY2FsU3RvcmUsIFJlKG5bMF0pKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHMuT28uZ2V0KHQpLCBuID0gYXdhaXQgUGEocywgZSk7XG4gICAgICAgICAgICAgICAgbi5zbmFwc2hvdCAmJiByLnB1c2gobi5zbmFwc2hvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IG5ldmVyIGV4ZWN1dGVkIG9uIHRoaXMgY2xpZW50LCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBhbGxvY2F0ZSB0aGUgdGFyZ2V0IGluIExvY2FsU3RvcmUgYW5kIGluaXRpYWxpemUgYSBuZXcgVmlldy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBhd2FpdCBJcihzLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAgICAgZSA9IGF3YWl0IHByKHMubG9jYWxTdG9yZSwgbiksIGF3YWl0IG9hKHMsIERhKG4pLCB0LCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSk7XG4gICAgICAgIH1cbiAgICAgICAgaS5wdXNoKGUpO1xuICAgIH1cbiAgICByZXR1cm4gcy5Gby5QcihyKSwgaTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cbiAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcbiAqIG9iamVjdC5cbiAqXG4gKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcbiAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcbiAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxuICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBEYSh0KSB7XG4gICAgcmV0dXJuIG1lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQub3JkZXJCeSwgdC5maWx0ZXJzLCB0LmxpbWl0LCBcIkZcIiAvKiBGaXJzdCAqLyAsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBDYSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIHEocShlLmxvY2FsU3RvcmUpLnBlcnNpc3RlbmNlKS5UbigpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gTmEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBxKHQpO1xuICAgIGlmIChpLldvKSBcbiAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXG4gICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAkKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTsgZWxzZSBpZiAoaS5Nby5oYXMoZSkpIHN3aXRjaCAobikge1xuICAgICAgY2FzZSBcImN1cnJlbnRcIjpcbiAgICAgIGNhc2UgXCJub3QtY3VycmVudFwiOlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgQXIoaS5sb2NhbFN0b3JlKSwgcyA9IE5uLmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIFwiY3VycmVudFwiID09PSBuKTtcbiAgICAgICAgICAgIGF3YWl0IElhKGksIHQsIHMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgIGF3YWl0IFRyKGkubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgZ2EoaSwgZSwgcyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBMKCk7XG4gICAgfVxufVxuXG4vKiogQWRkcyBvciByZW1vdmVzIFdhdGNoIHRhcmdldHMgZm9yIHF1ZXJpZXMgZnJvbSBkaWZmZXJlbnQgdGFicy4gKi8gYXN5bmMgZnVuY3Rpb24ga2EodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB4YSh0KTtcbiAgICBpZiAocy5Xbykge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHMuTW8uaGFzKHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgICQoXCJTeW5jRW5naW5lXCIsIFwiQWRkaW5nIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IElyKHMubG9jYWxTdG9yZSwgdCksIG4gPSBhd2FpdCBwcihzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAgICAgYXdhaXQgb2EocywgRGEoZSksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKSwgaG8ocy5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIFxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXG4gICAgICAgIHMuTW8uaGFzKHQpICYmIFxuICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxuICAgICAgICBhd2FpdCBUcihzLmxvY2FsU3RvcmUsIHQsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgbG8ocy5yZW1vdGVTdG9yZSwgdCksIGdhKHMsIHQpO1xuICAgICAgICB9KSkuY2F0Y2goQmkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geGEodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50ID0gdWEuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IFJhLmJpbmQobnVsbCwgZSksIFxuICAgIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbiA9IGxhLmJpbmQobnVsbCwgZSksIGUuRm8uUHIgPSBRby5iaW5kKG51bGwsIGUuZXZlbnRNYW5hZ2VyKSwgXG4gICAgZS5Gby56byA9IFdvLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBlO1xufVxuXG5mdW5jdGlvbiAkYSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gZmEuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUgPSBkYS5iaW5kKG51bGwsIGUpLCBcbiAgICBlO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBGYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAoYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGUuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHEodCksIHMgPSBHbihlLmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlllLmdldEJ1bmRsZU1ldGFkYXRhKHQsIGUuaWQpKSkudGhlbigodCA9PiAhIXQgJiYgdC5jcmVhdGVUaW1lLmNvbXBhcmVUbyhzKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovICh0LmxvY2FsU3RvcmUsIHMpKSByZXR1cm4gYXdhaXQgZS5jbG9zZSgpLCB2b2lkIG4uX2NvbXBsZXRlV2l0aChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXRlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBieXRlc0xvYWRlZDogdC50b3RhbEJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0ocykpO1xuICAgICAgICAgICAgbi5fdXBkYXRlUHJvZ3Jlc3MoWG8ocykpO1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBZbyhzLCB0LmxvY2FsU3RvcmUsIGUuayk7XG4gICAgICAgICAgICBsZXQgciA9IGF3YWl0IGUuSG8oKTtcbiAgICAgICAgICAgIGZvciAoO3I7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBpLnlvKHIpO1xuICAgICAgICAgICAgICAgIHQgJiYgbi5fdXBkYXRlUHJvZ3Jlc3ModCksIHIgPSBhd2FpdCBlLkhvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgLy8gVE9ETyhiLzE2MDg3NjQ0Myk6IFRoaXMgY3VycmVudGx5IHJhaXNlcyBzbmFwc2hvdHMgd2l0aFxuICAgICAgICAgICAgLy8gYGZyb21DYWNoZT1mYWxzZWAgaWYgdXNlcnMgYWxyZWFkeSBsaXN0ZW4gdG8gc29tZSBxdWVyaWVzIGFuZCBidW5kbGVzXG4gICAgICAgICAgICAvLyBoYXMgbmV3ZXIgdmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IElhKHQsIG8uSW4sIFxuICAgICAgICAgICAgLyogcmVtb3RlRXZlbnQgKi8gdm9pZCAwKSwgXG4gICAgICAgICAgICAvLyBTYXZlIG1ldGFkYXRhLCBzbyBsb2FkaW5nIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHNraXAuXG4gICAgICAgICAgICBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHEodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLlllLnNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBPKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHt0fWApLCBuLl9mYWlsV2l0aCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gKiBVc2VzIEVhZ2VyR0MgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovKShzLCBlLCBuKS50aGVuKCgoKSA9PiB7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUubm90aWZ5QnVuZGxlTG9hZGVkKCk7XG4gICAgfSkpO1xufVxuXG5jbGFzcyBPYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLmsgPSB0byh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHRoaXMuSm8odCksIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLllvKHQpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zdGFydCgpLCB0aGlzLmdjU2NoZWR1bGVyID0gdGhpcy5Ybyh0KSwgdGhpcy5sb2NhbFN0b3JlID0gdGhpcy5abyh0KTtcbiAgICB9XG4gICAgWG8odCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgWm8odCkge1xuICAgICAgICByZXR1cm4gZnIodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGhyLCB0LmluaXRpYWxVc2VyLCB0aGlzLmspO1xuICAgIH1cbiAgICBZbyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgeHIoRnIua3MsIHRoaXMuayk7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXcjtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIE1hIGV4dGVuZHMgT2Ege1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50YSA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCksIGF3YWl0IFJyKHRoaXMubG9jYWxTdG9yZSksIGF3YWl0IHRoaXMudGEuaW5pdGlhbGl6ZSh0aGlzLCB0KSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0ICRhKHRoaXMudGEuc3luY0VuZ2luZSksIGF3YWl0IFJvKHRoaXMudGEucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zbigoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICB9XG4gICAgWm8odCkge1xuICAgICAgICByZXR1cm4gZnIodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGhyLCB0LmluaXRpYWxVc2VyLCB0aGlzLmspO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgS2koZSwgdC5hc3luY1F1ZXVlKTtcbiAgICB9XG4gICAgWW8odCkge1xuICAgICAgICBjb25zdCBlID0gb3IodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gdmkud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IHZpLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgc3IodGhpcy5zeW5jaHJvbml6ZVRhYnMsIGUsIHQuY2xpZW50SWQsIG4sIHQuYXN5bmNRdWV1ZSwgWHIoKSwgWnIoKSwgdGhpcy5rLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBKbyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgV3I7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyBMYSBleHRlbmRzIE1hIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMudGEgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRhLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBRciAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAgbWk6IHZhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBnaTogTmEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIHlpOiBrYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgVG46IENhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBfaTogYmEuYmluZChudWxsLCBlKVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zbigoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBhd2FpdCBWYSh0aGlzLnRhLnN5bmNFbmdpbmUsIHQpLCB0aGlzLmdjU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSkgOiB0IHx8IHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBKbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBYcigpO1xuICAgICAgICBpZiAoIVFyLmJ0KGUpKSB0aHJvdyBuZXcgaihLLlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IG9yKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBRcihlLCB0LmFzeW5jUXVldWUsIG4sIHQuY2xpZW50SWQsIHQuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBCYSB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gdC5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdC5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUoZSksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKGUpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcihlKSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKGUsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhdC5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IHQgPT4gaGEodGhpcy5zeW5jRW5naW5lLCB0LCAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBBYS5iaW5kKG51bGwsIHRoaXMuc3luY0VuZ2luZSksIFxuICAgICAgICBhd2FpdCBrbyh0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnN5bmNFbmdpbmUuaXNQcmltYXJ5Q2xpZW50KSk7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcW87XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0byh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IChzID0gdC5kYXRhYmFzZUluZm8sIG5ldyBZcihzKSk7XG4gICAgICAgIHZhciBzO1xuICAgICAgICAvKiogUmV0dXJuIHRoZSBQbGF0Zm9ybS1zcGVjaWZpYyBjb25uZWN0aXZpdHkgbW9uaXRvci4gKi8gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHJvKHQsIGUsIG4sIHMpO1xuICAgICAgICB9KHQuYXV0aENyZWRlbnRpYWxzLCB0LmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIGUpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZSh0KSB7XG4gICAgICAgIHJldHVybiBlID0gdGhpcy5sb2NhbFN0b3JlLCBuID0gdGhpcy5kYXRhc3RvcmUsIHMgPSB0LmFzeW5jUXVldWUsIGkgPSB0ID0+IGhhKHRoaXMuc3luY0VuZ2luZSwgdCwgMCAvKiBSZW1vdGVTdG9yZSAqLyksIFxuICAgICAgICByID0genIuYnQoKSA/IG5ldyB6ciA6IG5ldyBHciwgbmV3IGFvKGUsIG4sIHMsIGksIHIpO1xuICAgICAgICB2YXIgZSwgbiwgcywgaSwgcjtcbiAgICAgICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovICAgIH1cbiAgICBjcmVhdGVTeW5jRW5naW5lKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgICAgIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBuZXcgaWEodCwgZSwgbiwgcywgaSwgcik7XG4gICAgICAgICAgICByZXR1cm4gbyAmJiAoYS5XbyA9ICEwKSwgYTtcbiAgICAgICAgfSh0aGlzLmxvY2FsU3RvcmUsIHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuZXZlbnRNYW5hZ2VyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCB0LmluaXRpYWxVc2VyLCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zLCBlKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHEodCk7XG4gICAgICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLlwiKSwgZS5Hci5hZGQoNSAvKiBTaHV0ZG93biAqLyksIGF3YWl0IHVvKGUpLCBcbiAgICAgICAgICAgIGUuSHIuc2h1dGRvd24oKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gKHJhdGhlciB0aGFuIE9mZmxpbmUpIHRvIGF2b2lkIHBvdGVudGlhbGx5XG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXG4gICAgICAgICAgICBlLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKTtcbiAgICAgICAgfSh0aGlzLnJlbW90ZVN0b3JlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvdyBtYW55IGJ5dGVzIHRvIHJlYWQgZWFjaCB0aW1lIHdoZW4gYFJlYWRhYmxlU3RyZWFtUmVhZGVyLnJlYWQoKWAgaXNcbiAqIGNhbGxlZC4gT25seSBhcHBsaWNhYmxlIGZvciBieXRlIHN0cmVhbXMgdGhhdCB3ZSBjb250cm9sIChlLmcuIHRob3NlIGJhY2tlZFxuICogYnkgYW4gVUludDhBcnJheSkuXG4gKi9cbi8qKlxuICogQnVpbGRzIGEgYEJ5dGVTdHJlYW1SZWFkZXJgIGZyb20gYSBVSW50OEFycmF5LlxuICogQHBhcmFtIHNvdXJjZSAtIFRoZSBkYXRhIHNvdXJjZSB0byB1c2UuXG4gKiBAcGFyYW0gYnl0ZXNQZXJSZWFkIC0gSG93IG1hbnkgYnl0ZXMgZWFjaCBgcmVhZCgpYCBmcm9tIHRoZSByZXR1cm5lZCByZWFkZXJcbiAqICAgICAgICB3aWxsIHJlYWQuXG4gKi9cbmZ1bmN0aW9uIFVhKHQsIGUgPSAxMDI0MCkge1xuICAgIGxldCBuID0gMDtcbiAgICAvLyBUaGUgVHlwZVNjcmlwdCBkZWZpbml0aW9uIGZvciBSZWFkYWJsZVN0cmVhbVJlYWRlciBjaGFuZ2VkLiBXZSB1c2VcbiAgICAvLyBgYW55YCBoZXJlIHRvIGFsbG93IHRoaXMgY29kZSB0byBjb21waWxlIHdpdGggZGlmZmVyZW50IHZlcnNpb25zLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQyOTcwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXN5bmMgcmVhZCgpIHtcbiAgICAgICAgICAgIGlmIChuIDwgdC5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQuc2xpY2UobiwgbiArIGUpLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gKz0gZSwgcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNhbmNlbCgpIHt9LFxuICAgICAgICByZWxlYXNlTG9jaygpIHt9LFxuICAgICAgICBjbG9zZWQ6IFByb21pc2UucmVqZWN0KFwidW5pbXBsZW1lbnRlZFwiKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIHFhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dCh0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLmVhKHRoaXMub2JzZXJ2ZXIubmV4dCwgdCk7XG4gICAgfVxuICAgIGVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMuZWEodGhpcy5vYnNlcnZlci5lcnJvciwgdCkgOiBjb25zb2xlLmVycm9yKFwiVW5jYXVnaHQgRXJyb3IgaW4gc25hcHNob3QgbGlzdGVuZXI6XCIsIHQpO1xuICAgIH1cbiAgICBuYSgpIHtcbiAgICAgICAgdGhpcy5tdXRlZCA9ICEwO1xuICAgIH1cbiAgICBlYSh0LCBlKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXRlZCB8fCB0KGUpO1xuICAgICAgICB9KSwgMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGJ1bmRsZS5cbiAqXG4gKiBUYWtlcyBhIGJ1bmRsZSBzdHJlYW0gb3IgYnVmZmVyLCBhbmQgcHJlc2VudHMgYWJzdHJhY3Rpb25zIHRvIHJlYWQgYnVuZGxlZFxuICogZWxlbWVudHMgb3V0IG9mIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQuXG4gKi8gY2xhc3MgS2Ege1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmVhZGVyIHRvIHJlYWQgZnJvbSB1bmRlcmx5aW5nIGJpbmFyeSBidW5kbGUgZGF0YSBzb3VyY2UuICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLnNhID0gdCwgdGhpcy5rID0gZSwgXG4gICAgICAgIC8qKiBDYWNoZWQgYnVuZGxlIG1ldGFkYXRhLiAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IFEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMuaWEgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMucmEoKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHQgJiYgdC5fbygpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKHQucGF5bG9hZC5tZXRhZGF0YSkgOiB0aGlzLm1ldGFkYXRhLnJlamVjdChuZXcgRXJyb3IoYFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBidW5kbGUgaXMgbm90IGEgbWV0YWRhdGEsIGl0IGlzXFxuICAgICAgICAgICAgICR7SlNPTi5zdHJpbmdpZnkobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5wYXlsb2FkKX1gKSk7XG4gICAgICAgIH0pLCAodCA9PiB0aGlzLm1ldGFkYXRhLnJlamVjdCh0KSkpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2EuY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5wcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBIbygpIHtcbiAgICAgICAgLy8gTWFrZXMgc3VyZSBtZXRhZGF0YSBpcyByZWFkIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRNZXRhZGF0YSgpLCB0aGlzLnJhKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGhlYWQgb2YgaW50ZXJuYWwgYnVmZmVyLCBhbmQgcHVsbGluZyBtb3JlIGRhdGEgZnJvbVxuICAgICAqIHVuZGVybHlpbmcgc3RyZWFtIGlmIGEgY29tcGxldGUgZWxlbWVudCBjYW5ub3QgYmUgZm91bmQsIHVudGlsIGFuXG4gICAgICogZWxlbWVudChpbmNsdWRpbmcgdGhlIHByZWZpeGVkIGxlbmd0aCBhbmQgdGhlIEpTT04gc3RyaW5nKSBpcyBmb3VuZC5cbiAgICAgKlxuICAgICAqIE9uY2UgYSBjb21wbGV0ZSBlbGVtZW50IGlzIHJlYWQsIGl0IGlzIGRyb3BwZWQgZnJvbSBpbnRlcm5hbCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGVpdGhlciB0aGUgYnVuZGxlZCBlbGVtZW50LCBvciBudWxsIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mXG4gICAgICogdGhlIHN0cmVhbS5cbiAgICAgKi8gICAgYXN5bmMgcmEoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLm9hKCk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaWEuZGVjb2RlKHQpLCBuID0gTnVtYmVyKGUpO1xuICAgICAgICBpc05hTihuKSAmJiB0aGlzLmFhKGBsZW5ndGggc3RyaW5nICgke2V9KSBpcyBub3QgdmFsaWQgbnVtYmVyYCk7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLmNhKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEhvKEpTT04ucGFyc2UocyksIHQubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIHVhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KCh0ID0+IHQgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBvYSgpIHtcbiAgICAgICAgZm9yICg7dGhpcy51YSgpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5oYSgpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy51YSgpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgdCA8IDAgJiYgdGhpcy5hYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgY2EodCkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCB0OyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGEoKSAmJiB0aGlzLmFhKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmlhLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIGFhKHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLnNhLmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHt0fWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIGhhKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zYS5yZWFkKCk7XG4gICAgICAgIGlmICghdC5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgdC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZS5zZXQodGhpcy5idWZmZXIpLCBlLnNldCh0LnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXG4gKi9cbmNsYXNzIGphIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdCwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAodCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuXCIpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHEodCksIHMgPSB0cyhuLmspICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBlLm1hcCgodCA9PiBKbihuLmssIHQpKSlcbiAgICAgICAgICAgIH0sIHIgPSBhd2FpdCBuLmppKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgcywgaSksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gaXMobi5rLCB0KTtcbiAgICAgICAgICAgICAgICBvLnNldChlLmtleS50b1N0cmluZygpLCBlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIEIoISFlKSwgYS5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpLCBhO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB0aGlzLnJlY29yZFZlcnNpb24odCkpKSwgZTtcbiAgICB9XG4gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IGhuKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5kZWxldGUoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBTdC5mcm9tUGF0aChlKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IGxuKG4sIHRoaXMucHJlY29uZGl0aW9uKG4pKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHEodCksIHMgPSB0cyhuLmspICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgodCA9PiBvcyhuLmssIHQpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLkJpKFwiQ29tbWl0XCIsIHMsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIGUgPSB0LnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0LmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBMKCk7XG4gICAgICAgICAgICAvLyBGb3IgZGVsZXRlZCBkb2NzLCB3ZSBtdXN0IHVzZSBiYXNlVmVyc2lvbiAwIHdoZW4gd2Ugb3ZlcndyaXRlIHRoZW0uXG4gICAgICAgICAgICBlID0gY3QubWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LmtleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKG4pKSBcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5BQk9SVEVELCBcIkRvY3VtZW50IHZlcnNpb24gY2hhbmdlZCBiZXR3ZWVuIHR3byByZWFkcy5cIik7XG4gICAgICAgIH0gZWxzZSB0aGlzLnJlYWRWZXJzaW9ucy5zZXQodC5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBkb2N1bWVudCB3aGVuIGl0IHdhcyByZWFkIGluIHRoaXMgdHJhbnNhY3Rpb24sXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXG4gICAgICovICAgIHByZWNvbmRpdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUgPyBKZS51cGRhdGVUaW1lKGUpIDogSmUubm9uZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjb25kaXRpb24gZm9yIGEgZG9jdW1lbnQgaWYgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUuXG4gICAgICovICAgIHByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxuICAgICAgICAvLyByZWFkIHRpbWUgYW5kIGV4aXN0ZW5jZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlKSB7XG4gICAgICAgICAgICBpZiAoZS5pc0VxdWFsKGN0Lm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKZS51cGRhdGVUaW1lKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvY3VtZW50IHdhcyBub3QgcmVhZCwgc28gd2UganVzdCB1c2UgdGhlIHByZWNvbmRpdGlvbnMgZm9yIGEgYmxpbmRcbiAgICAgICAgLy8gdXBkYXRlLlxuICAgICAgICByZXR1cm4gSmUuZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUodCkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKHQpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovXG5jbGFzcyBRYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLmRhdGFzdG9yZSA9IGUsIHRoaXMudXBkYXRlRnVuY3Rpb24gPSBuLCB0aGlzLmRlZmVycmVkID0gcywgXG4gICAgICAgIHRoaXMubGEgPSA1LCB0aGlzLnVyID0gbmV3IGVvKHRoaXMuYXN5bmNRdWV1ZSwgXCJ0cmFuc2FjdGlvbl9yZXRyeVwiIC8qIFRyYW5zYWN0aW9uUmV0cnkgKi8pO1xuICAgIH1cbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi8gICAgcnVuKCkge1xuICAgICAgICB0aGlzLmxhIC09IDEsIHRoaXMuZmEoKTtcbiAgICB9XG4gICAgZmEoKSB7XG4gICAgICAgIHRoaXMudXIuWmkoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgamEodGhpcy5kYXRhc3RvcmUpLCBlID0gdGhpcy5kYSh0KTtcbiAgICAgICAgICAgIGUgJiYgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdC5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhKHQpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndhKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRhKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKHQpO1xuICAgICAgICAgICAgcmV0dXJuICFidChlKSAmJiBlLmNhdGNoICYmIGUudGhlbiA/IGUgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdhKHQpIHtcbiAgICAgICAgdGhpcy5sYSA+IDAgJiYgdGhpcy5fYSh0KSA/ICh0aGlzLmxhIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5mYSgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QodCk7XG4gICAgfVxuICAgIF9hKHQpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IGUgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IGUgfHwgIV9uKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEZpcmVzdG9yZUNsaWVudCBpcyBhIHRvcC1sZXZlbCBjbGFzcyB0aGF0IGNvbnN0cnVjdHMgYW5kIG93bnMgYWxsIG9mIHRoZVxuICogcGllY2VzIG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZVxuICogYXN5bmMgcXVldWUgdGhhdCBpcyBzaGFyZWQgYnkgYWxsIG9mIHRoZSBvdGhlciBjb21wb25lbnRzIGluIHRoZSBzeXN0ZW0uXG4gKi9cbmNsYXNzIFdhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBcbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXG4gICAgICovXG4gICAgbiwgcykge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMuZGF0YWJhc2VJbmZvID0gcywgXG4gICAgICAgIHRoaXMudXNlciA9IEQuVU5BVVRIRU5USUNBVEVELCB0aGlzLmNsaWVudElkID0gc3QuQSgpLCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnN0YXJ0KG4sIChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgICQoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCB1c2VyPVwiLCB0LnVpZCksIGF3YWl0IHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lcih0KSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSB0O1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBSZWdpc3RlciBhbiBlbXB0eSBjcmVkZW50aWFscyBjaGFuZ2UgbGlzdGVuZXIgdG8gYWN0aXZhdGUgdG9rZW4gcmVmcmVzaC5cbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnN0YXJ0KG4sICgoKSA9PiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRDb25maWd1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmNRdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxuICAgICAgICAgICAgZGF0YWJhc2VJbmZvOiB0aGlzLmRhdGFiYXNlSW5mbyxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aENyZWRlbnRpYWxzOiB0aGlzLmF1dGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGFwcENoZWNrQ3JlZGVudGlhbHM6IHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGF0IHRoZSBjbGllbnQgaGFzIG5vdCBiZWVuIHRlcm1pbmF0ZWQuIEVuc3VyZXMgdGhhdCBvdGhlciBtZXRob2RzIG9uXG4gICAgICogdGhpcyBjbGFzcyBjYW5ub3QgYmUgY2FsbGVkIGFmdGVyIHRoZSBjbGllbnQgaXMgdGVybWluYXRlZC5cbiAgICAgKi8gICAgdmVyaWZ5Tm90VGVybWluYXRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXN5bmNRdWV1ZS5pc1NodXR0aW5nRG93bikgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW50ZXJSZXN0cmljdGVkTW9kZSgpO1xuICAgICAgICBjb25zdCB0ID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5vZmZsaW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLm9mZmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCBcbiAgICAgICAgICAgICAgICAvLyBUaGUgY3JlZGVudGlhbHMgcHJvdmlkZXIgbXVzdCBiZSB0ZXJtaW5hdGVkIGFmdGVyIHNodXR0aW5nIGRvd24gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmcgYXV0aFxuICAgICAgICAgICAgICAgIC8vIHRva2Vucy5cbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IE9vKGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEdhKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCAkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgZHIoZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQub2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiB6YSh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgSGEodCk7XG4gICAgJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCAkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgICAgIGNvbnN0IHMgPSBnbyhuKTtcbiAgICAgICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgICAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAgICAgLy8gbmV3IG11dGF0aW9ucyBmcm9tIHRoZSBMb2NhbFN0b3JlIChzaW5jZSBtdXRhdGlvbnMgYXJlIHBlci11c2VyKS5cbiAgICAgICAgICAgICAgICBuLkdyLmFkZCgzIC8qIENyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCB1byhuKSwgcyAmJiBcbiAgICAgICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICBuLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgYXdhaXQgbi5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZShlKSwgXG4gICAgICAgIG4uR3IuZGVsZXRlKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IGNvKG4pO1xuICAgIH0oZS5yZW1vdGVTdG9yZSwgdCkpKSwgdC5vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gSGEodCkge1xuICAgIHJldHVybiB0Lm9mZmxpbmVDb21wb25lbnRzIHx8ICgkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IEdhKHQsIG5ldyBPYSkpLCB0Lm9mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBKYSh0KSB7XG4gICAgcmV0dXJuIHQub25saW5lQ29tcG9uZW50cyB8fCAoJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IHphKHQsIG5ldyBCYSkpLCB0Lm9ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIFlhKHQpIHtcbiAgICByZXR1cm4gSGEodCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIFhhKHQpIHtcbiAgICByZXR1cm4gSGEodCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gWmEodCkge1xuICAgIHJldHVybiBKYSh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gdGModCkge1xuICAgIHJldHVybiBKYSh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBlYyh0KSB7XG4gICAgY29uc3QgZSA9IGF3YWl0IEphKHQpLCBuID0gZS5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSByYS5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IGFhLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gbmModCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgWWEodCksIG4gPSBhd2FpdCBaYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITApLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLkdyLmRlbGV0ZSgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIGNvKGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gc2ModCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgWWEodCksIG4gPSBhd2FpdCBaYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIGUuR3IuYWRkKDAgLyogVXNlckRpc2FibGVkICovKSwgYXdhaXQgdW8oZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5Kci5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiBpYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlduLlJuKHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0gT28odCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IFhhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHJjKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBxYSh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IGpvKHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIWEgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogYSAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IGooSy5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyB6byhnZShuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIHdvOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEtvKHQsIG8pO1xuICAgIH0oYXdhaXQgZWModCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBvYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IEVyKHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgZWEoZSwgcy56biksIHIgPSBpLmJvKHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IE9vKHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgWGEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gYWModCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IHFhKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gam8odCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IHpvKG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgd286ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gS28odCwgbyk7XG4gICAgfShhd2FpdCBlYyh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGNjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IHFhKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBxKHQpLmlvLmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IGVjKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4ubmEoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHEodCkuaW8uZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IGVjKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiB1Yyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIEphKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgbmV3IFFhKHQuYXN5bmNRdWV1ZSwgcywgZSwgbikucnVuKCk7XG4gICAgfSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGhjKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyAobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBLYSh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBVYSh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBVYShuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCB0byhlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgRmEoYXdhaXQgdGModCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gbGModCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlllLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IFhhKHQpLCBlKSkpO1xufVxuXG5jbGFzcyBmYyB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gYXBwSWQgLSBUaGUgRmlyZWJhc2UgQXBwIElkLlxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxuICAgICAqIEBwYXJhbSBob3N0IC0gVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0gc3NsIC0gV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGF1dG9EZXRlY3RMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBkZXRlY3RCdWZmZXJpbmdQcm94eVxuICAgICAqIG9wdGlvbiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBhKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuYXBwSWQgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gcywgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gciwgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGE7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIGRjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gdCwgdGhpcy5kYXRhYmFzZSA9IGUgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZGMgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB3YyA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gX2ModCwgZSwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke2V9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIG1jKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoITAgPT09IGUgJiYgITAgPT09IHMpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYCR7dH0gYW5kICR7bn0gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGRvY3VtZW50IChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXQgY29udGFpbnNcbiAqIGFuIGV2ZW4gbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gZ2ModCkge1xuICAgIGlmICghU3QuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIHljKHQpIHtcbiAgICBpZiAoU3QuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cbiAqL1xuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cbmZ1bmN0aW9uIHBjKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIFwibnVsbFwiO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdC5sZW5ndGggPiAyMCAmJiAodCA9IGAke3Quc3Vic3RyaW5nKDAsIDIwKX0uLi5gKSwgXG4gICAgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiBcIlwiICsgdDtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gXCJhbiBhcnJheVwiO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKiogdHJ5IHRvIGdldCB0aGUgY29uc3RydWN0b3IgbmFtZSBmb3IgYW4gb2JqZWN0LiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICh0LmNvbnN0cnVjdG9yKSByZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAsIG9wdGlvbmFsbHkgdW53cmFwcGluZyBDb21wYXQgdHlwZXMgdG8gZXhwb3NlIHRoZVxuICogdW5kZXJseWluZyBpbnN0YW5jZS4gVGhyb3dzIGlmICBgb2JqYCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYFRgLlxuICpcbiAqIFRoaXMgY2FzdCBpcyB1c2VkIGluIHRoZSBMaXRlIGFuZCBGdWxsIFNESyB0byB2ZXJpZnkgaW5zdGFuY2UgdHlwZXMgZm9yXG4gKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBwdWJsaWMgQVBJLlxuICogQGludGVybmFsXG4gKi8gKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUgPyBgYSBjdXN0b20gJHtlfSBvYmplY3RgIDogXCJhbiBvYmplY3RcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ID8gXCJhIGZ1bmN0aW9uXCIgOiBMKCk7XG59XG5cbmZ1bmN0aW9uIFRjKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICBpZiAoXCJfZGVsZWdhdGVcIiBpbiB0ICYmIChcbiAgICAvLyBVbndyYXAgQ29tcGF0IHR5cGVzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0ID0gdC5fZGVsZWdhdGUpLCAhKHQgaW5zdGFuY2VvZiBlKSkge1xuICAgICAgICBpZiAoZS5uYW1lID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBwYyh0KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7ZS5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gRWModCwgZSkge1xuICAgIGlmIChlIDw9IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG4vKipcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcbiAqIHVzZXItc3VwcGxpZWQgYEZpcmVzdG9yZVNldHRpbmdzYCBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cbiAqL1xuY2xhc3MgSWMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5zc2wpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IHQuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAoZSA9IHQuc3NsKSB8fCB2b2lkIDAgPT09IGUgfHwgZTtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSB0LmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHZvaWQgMCA9PT0gdC5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0LmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXMsIG1jKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IHQuaG9zdCAmJiB0aGlzLnNzbCA9PT0gdC5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gdC5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqLyBjbGFzcyBBYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuX2FwcENoZWNrQ3JlZGVudGlhbHMgPSBuLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIEZpcmVzdG9yZSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlLWxpdGVcIiwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIihsaXRlKVwiLCB0aGlzLl9zZXR0aW5ncyA9IG5ldyBJYyh7fSksIFxuICAgICAgICB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICExLCB0IGluc3RhbmNlb2YgZGMgPyB0aGlzLl9kYXRhYmFzZUlkID0gdCA6ICh0aGlzLl9hcHAgPSB0LCBcbiAgICAgICAgdGhpcy5fZGF0YWJhc2VJZCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5hcHBseSh0Lm9wdGlvbnMsIFsgXCJwcm9qZWN0SWRcIiBdKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCAnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZGModC5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyAodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGBGaXJlc3RvcmVgIHNlcnZpY2VcbiAgICAgKiBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGFwcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hcHApIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwO1xuICAgIH1cbiAgICBnZXQgX2luaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW47XG4gICAgfVxuICAgIGdldCBfdGVybWluYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgX3NldFNldHRpbmdzKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzRnJvemVuKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IG1vZGlmeSBzZXR0aW5ncyBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBJYyh0KSwgdm9pZCAwICE9PSB0LmNyZWRlbnRpYWxzICYmICh0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBuZXcgRztcbiAgICAgICAgICAgIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJnYXBpXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY2xpZW50O1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHJlYWxseSBpcyBhIEdhcGkgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQighKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSB8fCAhZS5hdXRoIHx8ICFlLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSkpLCBcbiAgICAgICAgICAgICAgICBuZXcgWShlLCB0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odC5jcmVkZW50aWFscykpO1xuICAgIH1cbiAgICBfZ2V0U2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2ZyZWV6ZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMCwgdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hdGVUYXNrIHx8ICh0aGlzLl90ZXJtaW5hdGVUYXNrID0gdGhpcy5fdGVybWluYXRlKCkpLCB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYEZpcmVzdG9yZWAgaW5zdGFuY2UuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwcDogdGhpcy5fYXBwLFxuICAgICAgICAgICAgZGF0YWJhc2VJZDogdGhpcy5fZGF0YWJhc2VJZCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLl9zZXR0aW5nc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGVzIGFsbCBjb21wb25lbnRzIHVzZWQgYnkgdGhpcyBjbGllbnQuIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBtZXRob2QgdG8gY2xlYW4gdXAgdGhlaXIgb3duIGRlcGVuZGVuY2llcywgYnV0IG11c3QgYWxzbyBjYWxsIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBPbmx5IGV2ZXIgY2FsbGVkIG9uY2UuXG4gICAgICovICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGluc3RhbmNlLiBNdXN0IGJlIGNhbGxlZFxuICogd2hlbiB0aGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgdGVybWluYXRlZC5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHdjLmdldCh0KTtcbiAgICAgICAgICAgIGUgJiYgKCQoXCJDb21wb25lbnRQcm92aWRlclwiLCBcIlJlbW92aW5nIERhdGFzdG9yZVwiKSwgd2MuZGVsZXRlKHQpLCBlLnRlcm1pbmF0ZSgpKTtcbiAgICAgICAgfSh0aGlzKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBSYyh0LCBlLCBuLCBzID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCByID0gKHQgPSBUYyh0LCBBYykpLl9nZXRTZXR0aW5ncygpO1xuICAgIGlmIChcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiICE9PSByLmhvc3QgJiYgci5ob3N0ICE9PSBlICYmIE8oXCJIb3N0IGhhcyBiZWVuIHNldCBpbiBib3RoIHNldHRpbmdzKCkgYW5kIHVzZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkXCIpLCBcbiAgICB0Ll9zZXRTZXR0aW5ncyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHIpLCB7XG4gICAgICAgIGhvc3Q6IGAke2V9OiR7bn1gLFxuICAgICAgICBzc2w6ICExXG4gICAgfSkpLCBzLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgbGV0IGUsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBzLm1vY2tVc2VyVG9rZW4pIGUgPSBzLm1vY2tVc2VyVG9rZW4sIG4gPSBELk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICBlID0gY3JlYXRlTW9ja1VzZXJUb2tlbihzLm1vY2tVc2VyVG9rZW4sIG51bGwgPT09IChpID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzLm1vY2tVc2VyVG9rZW4uc3ViIHx8IHMubW9ja1VzZXJUb2tlbi51c2VyX2lkO1xuICAgICAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgRChyKTtcbiAgICAgICAgfVxuICAgICAgICB0Ll9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgeihuZXcgVyhlLCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBQYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2Yyh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IFBjKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeWAgcmVmZXJzIHRvIGEgcXVlcnkgd2hpY2ggeW91IGNhbiByZWFkIG9yIGxpc3RlbiB0by4gWW91IGNhbiBhbHNvXG4gKiBjb25zdHJ1Y3QgcmVmaW5lZCBgUXVlcnlgIG9iamVjdHMgYnkgYWRkaW5nIGZpbHRlcnMgYW5kIG9yZGVyaW5nLlxuICovIGNsYXNzIGJjIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBsaXRlIHZlcnNpb24gb2YgdGhlIFF1ZXJ5IGNsYXNzIGluIHRoZSBtYWluIFNESy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fcXVlcnkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJxdWVyeVwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGJjKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9xdWVyeSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayBxdWVyeX0pLlxuICovIGNsYXNzIHZjIGV4dGVuZHMgYmMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCBnZShuKSksIHRoaXMuX3BhdGggPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJjb2xsZWN0aW9uXCI7XG4gICAgfVxuICAgIC8qKiBUaGUgY29sbGVjdGlvbidzIGlkZW50aWZpZXIuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24gKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmluZyBgRG9jdW1lbnRSZWZlcmVuY2VgIGlmIHRoaXMgaXMgYVxuICAgICAqIHN1YmNvbGxlY3Rpb24uIElmIHRoaXMgaXNuJ3QgYSBzdWJjb2xsZWN0aW9uLCB0aGUgcmVmZXJlbmNlIGlzIG51bGwuXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9wYXRoLnBvcExhc3QoKTtcbiAgICAgICAgcmV0dXJuIHQuaXNFbXB0eSgpID8gbnVsbCA6IG5ldyBQYyh0aGlzLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IFN0KHQpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdmModGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX3BhdGgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVmModCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBfYyhcImNvbGxlY3Rpb25cIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgQWMpIHtcbiAgICAgICAgY29uc3QgcyA9IGR0LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiB5YyhzKSwgbmV3IHZjKHQsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcyk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIFBjIHx8IHQgaW5zdGFuY2VvZiB2YykpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZChkdC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIHljKHMpLCBuZXcgdmModC5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVsaXRlKTogQ29uc2lkZXIgdXNpbmcgRXJyb3JGYWN0b3J5IC1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi8wMTMxZTFmL3BhY2thZ2VzL3V0aWwvc3JjL2Vycm9ycy50cyNMMTA2XG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYFF1ZXJ5YCBpbnN0YW5jZSB0aGF0IGluY2x1ZGVzIGFsbCBkb2N1bWVudHMgaW4gdGhlXG4gKiBkYXRhYmFzZSB0aGF0IGFyZSBjb250YWluZWQgaW4gYSBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGVcbiAqIGdpdmVuIGBjb2xsZWN0aW9uSWRgLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBgRmlyZXN0b3JlYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjb2xsZWN0aW9uSWQgLSBJZGVudGlmaWVzIHRoZSBjb2xsZWN0aW9ucyB0byBxdWVyeSBvdmVyLiBFdmVyeVxuICogY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhpcyBJRCBhcyB0aGUgbGFzdCBzZWdtZW50IG9mIGl0cyBwYXRoXG4gKiB3aWxsIGJlIGluY2x1ZGVkLiBDYW5ub3QgY29udGFpbiBhIHNsYXNoLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYFF1ZXJ5YC5cbiAqLyBmdW5jdGlvbiBTYyh0LCBlKSB7XG4gICAgaWYgKHQgPSBUYyh0LCBBYyksIF9jKFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiY29sbGVjdGlvbiBpZFwiLCBlKSwgZS5pbmRleE9mKFwiL1wiKSA+PSAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJyR7ZX0nIHBhc3NlZCB0byBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuYCk7XG4gICAgcmV0dXJuIG5ldyBiYyh0LCBcbiAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIFxuICAgIC8qKlxuICogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzXG4gKiB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuXG4gKi9cbiAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX2UoZHQuZW1wdHlQYXRoKCksIHQpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBEYyh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIFxuICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcbiAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxuICAgIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgKGUgPSBzdC5BKCkpLCBfYyhcImRvY1wiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBBYykge1xuICAgICAgICBjb25zdCBzID0gZHQuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIGdjKHMpLCBuZXcgUGModCwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IFN0KHMpKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgUGMgfHwgdCBpbnN0YW5jZW9mIHZjKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKGR0LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4gZ2MocyksIG5ldyBQYyh0LmZpcmVzdG9yZSwgdCBpbnN0YW5jZW9mIHZjID8gdC5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgU3QocykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gQ2ModCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCAodCBpbnN0YW5jZW9mIFBjIHx8IHQgaW5zdGFuY2VvZiB2YykgJiYgKGUgaW5zdGFuY2VvZiBQYyB8fCBlIGluc3RhbmNlb2YgdmMpICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgdC5wYXRoID09PSBlLnBhdGggJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBOYyh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgaW5zdGFuY2VvZiBiYyAmJiBlIGluc3RhbmNlb2YgYmMgJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiBiZSh0Ll9xdWVyeSwgZS5fcXVlcnkpICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGtjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXG4gICAgICAgIHRoaXMubWEgPSBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIC8vIEEgbGlzdCBvZiByZXRyeWFibGUgb3BlcmF0aW9ucy4gUmV0cnlhYmxlIG9wZXJhdGlvbnMgYXJlIHJ1biBpbiBvcmRlciBhbmRcbiAgICAgICAgLy8gcmV0cmllZCB3aXRoIGJhY2tvZmYuXG4gICAgICAgIHRoaXMuZ2EgPSBbXSwgXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXG4gICAgICAgIHRoaXMueWEgPSAhMSwgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxuICAgICAgICB0aGlzLnBhID0gW10sIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIHRoaXMuVGEgPSBudWxsLCBcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXG4gICAgICAgIHRoaXMuRWEgPSAhMSwgXG4gICAgICAgIC8vIEVuYWJsZWQgZHVyaW5nIHNodXRkb3duIG9uIFNhZmFyaSB0byBwcmV2ZW50IGZ1dHVyZSBhY2Nlc3MgdG8gSW5kZXhlZERCLlxuICAgICAgICB0aGlzLklhID0gITEsIFxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxuICAgICAgICB0aGlzLkFhID0gW10sIFxuICAgICAgICAvLyBCYWNrb2ZmIHRpbWVyIHVzZWQgdG8gc2NoZWR1bGUgcmV0cmllcyBmb3IgcmV0cnlhYmxlIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy51ciA9IG5ldyBlbyh0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogQXN5bmNRdWV1ZVJldHJ5ICovKSwgXG4gICAgICAgIC8vIFZpc2liaWxpdHkgaGFuZGxlciB0aGF0IHRyaWdnZXJzIGFuIGltbWVkaWF0ZSByZXRyeSBvZiBhbGwgcmV0cnlhYmxlXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIE1lYW50IHRvIHNwZWVkIHVwIHJlY292ZXJ5IHdoZW4gd2UgcmVnYWluIGZpbGUgc3lzdGVtIGFjY2Vzc1xuICAgICAgICAvLyBhZnRlciBwYWdlIGNvbWVzIGludG8gZm9yZWdyb3VuZC5cbiAgICAgICAgdGhpcy5SYSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBacigpO1xuICAgICAgICAgICAgdCAmJiAkKFwiQXN5bmNRdWV1ZVwiLCBcIlZpc2liaWxpdHkgc3RhdGUgY2hhbmdlZCB0byBcIiArIHQudmlzaWJpbGl0eVN0YXRlKSwgdGhpcy51ci5lcigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0ID0gWnIoKTtcbiAgICAgICAgdCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lciAmJiB0LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuUmEpO1xuICAgIH1cbiAgICBnZXQgaXNTaHV0dGluZ0Rvd24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxuICAgICAqIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxuICAgICAqLyAgICBlbnF1ZXVlQW5kRm9yZ2V0KHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmVucXVldWUodCk7XG4gICAgfVxuICAgIGVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKHQpIHtcbiAgICAgICAgdGhpcy5QYSgpLCBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmJhKHQpO1xuICAgIH1cbiAgICBlbnRlclJlc3RyaWN0ZWRNb2RlKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnlhKSB7XG4gICAgICAgICAgICB0aGlzLnlhID0gITAsIHRoaXMuSWEgPSB0IHx8ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IFpyKCk7XG4gICAgICAgICAgICBlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5yZW1vdmVFdmVudExpc3RlbmVyICYmIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5SYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5xdWV1ZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLlBhKCksIHRoaXMueWEpIFxuICAgICAgICAvLyBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIG5ldmVyIHJlc29sdmVzLlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCgpID0+IHt9KSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRlZmVycmVkIFByb21pc2UgdGhhdCB3ZSBjYW4gcmV0dXJuIHRvIHRoZSBjYWxsZWUuIFRoaXNcbiAgICAgICAgLy8gYWxsb3dzIHVzIHRvIHJldHVybiBhIFwiaGFuZ2luZyBQcm9taXNlXCIgb25seSB0byB0aGUgY2FsbGVlIGFuZCBzdGlsbFxuICAgICAgICAvLyBhZHZhbmNlIHRoZSBxdWV1ZSBldmVuIHdoZW4gdGhlIG9wZXJhdGlvbiBpcyBub3QgcnVuLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmEoKCgpID0+IHRoaXMueWEgJiYgdGhpcy5JYSA/IFByb21pc2UucmVzb2x2ZSgpIDogKHQoKS50aGVuKGUucmVzb2x2ZSwgZS5yZWplY3QpLCBcbiAgICAgICAgZS5wcm9taXNlKSkpLnRoZW4oKCgpID0+IGUucHJvbWlzZSkpO1xuICAgIH1cbiAgICBlbnF1ZXVlUmV0cnlhYmxlKHQpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5nYS5wdXNoKHQpLCB0aGlzLnZhKCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIG5leHQgb3BlcmF0aW9uIGZyb20gdGhlIHJldHJ5YWJsZSBxdWV1ZS4gSWYgdGhlIG9wZXJhdGlvbiBmYWlscyxcbiAgICAgKiByZXNjaGVkdWxlcyB3aXRoIGJhY2tvZmYuXG4gICAgICovICAgIGFzeW5jIHZhKCkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5nYS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nYVswXSgpLCB0aGlzLmdhLnNoaWZ0KCksIHRoaXMudXIucmVzZXQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIVhzKHQpKSB0aHJvdyB0O1xuIC8vIEZhaWx1cmUgd2lsbCBiZSBoYW5kbGVkIGJ5IEFzeW5jUXVldWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIkFzeW5jUXVldWVcIiwgXCJPcGVyYXRpb24gZmFpbGVkIHdpdGggcmV0cnlhYmxlIGVycm9yOiBcIiArIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nYS5sZW5ndGggPiAwICYmIFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgb3BlcmF0aW9ucywgd2UgcmUtc2NoZWR1bGUgYHJldHJ5TmV4dE9wKClgLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcnVuIHJldHJ5YWJsZSBvcGVyYXRpb25zIHRoYXQgZmFpbGVkIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlaXIgaW5pdGlhbCBhdHRlbXB0IHNpbmNlIHdlIGRvbid0IGtub3cgd2hldGhlciB0aGV5IGFyZSBhbHJlYWR5XG4gICAgICAgICAgICAvLyBlbnF1ZXVlZC4gSWYsIGZvciBleGFtcGxlLCBgb3AxYCwgYG9wMmAsIGBvcDNgIGFyZSBlbnF1ZXVlZCBhbmQgYG9wMWBcbiAgICAgICAgICAgIC8vIG5lZWRzIHRvICBiZSByZS1ydW4sIHdlIHdpbGwgcnVuIGBvcDFgLCBgb3AxYCwgYG9wMmAgdXNpbmcgdGhlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGVucXVldWVkIGNhbGxzIHRvIGByZXRyeU5leHRPcCgpYC4gYG9wMygpYCB3aWxsIHRoZW4gcnVuIGluIHRoZVxuICAgICAgICAgICAgLy8gY2FsbCBzY2hlZHVsZWQgaGVyZS5cbiAgICAgICAgICAgIC8vIFNpbmNlIGBiYWNrb2ZmQW5kUnVuKClgIGNhbmNlbHMgYW4gZXhpc3RpbmcgYmFja29mZiBhbmQgc2NoZWR1bGVzIGFcbiAgICAgICAgICAgIC8vIG5ldyBiYWNrb2ZmIG9uIGV2ZXJ5IGNhbGwsIHRoZXJlIGlzIG9ubHkgZXZlciBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gICAgICAgICAgICAvLyBvcGVyYXRpb24gaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgdGhpcy51ci5aaSgoKCkgPT4gdGhpcy52YSgpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmEodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYS50aGVuKCgoKSA9PiAodGhpcy5FYSA9ICEwLCB0KCkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5UYSA9IHQsIHRoaXMuRWEgPSAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKlxuICogQ2hyb21lIGluY2x1ZGVzIEVycm9yLm1lc3NhZ2UgaW4gRXJyb3Iuc3RhY2suIE90aGVyIGJyb3dzZXJzIGRvIG5vdC5cbiAqIFRoaXMgcmV0dXJucyBleHBlY3RlZCBvdXRwdXQgb2YgbWVzc2FnZSArIHN0YWNrIHdoZW4gYXZhaWxhYmxlLlxuICogQHBhcmFtIGVycm9yIC0gRXJyb3Igb3IgRmlyZXN0b3JlRXJyb3JcbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gdC5tZXNzYWdlIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgdC5zdGFjayAmJiAoZSA9IHQuc3RhY2suaW5jbHVkZXModC5tZXNzYWdlKSA/IHQuc3RhY2sgOiB0Lm1lc3NhZ2UgKyBcIlxcblwiICsgdC5zdGFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3Igc28gdGhhdCB0aGlzLnRhaWwgYmVjb21lcyBhIHJlamVjdGVkIFByb21pc2UgYW5kXG4gICAgICAgICAgICAvLyBhbGwgZnVydGhlciBhdHRlbXB0cyB0byBjaGFpbiAodmlhIC50aGVuKSB3aWxsIGp1c3Qgc2hvcnQtY2lyY3VpdFxuICAgICAgICAgICAgLy8gYW5kIHJldHVybiB0aGUgcmVqZWN0ZWQgUHJvbWlzZS5cbiAgICAgICAgICAgIHRocm93IEYoXCJJTlRFUk5BTCBVTkhBTkRMRUQgRVJST1I6IFwiLCBlKSwgdDtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4gKHRoaXMuRWEgPSAhMSwgdCkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWEgPSBlLCBlO1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuUGEoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cbiAgICAgICAgdGhpcy5BYS5pbmRleE9mKHQpID4gLTEgJiYgKGUgPSAwKTtcbiAgICAgICAgY29uc3QgcyA9IEZvLmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsIHQsIGUsIG4sICh0ID0+IHRoaXMuVmEodCkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGEucHVzaChzKSwgcztcbiAgICB9XG4gICAgUGEoKSB7XG4gICAgICAgIHRoaXMuVGEgJiYgTCgpO1xuICAgIH1cbiAgICB2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCkge31cbiAgICAvKipcbiAgICAgKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHF1ZXVlZCB0YXNrcyBhcmUgZmluaXNoZWQgZXhlY3V0aW5nLiBEZWxheWVkXG4gICAgICogb3BlcmF0aW9ucyBhcmUgbm90IHJ1bi5cbiAgICAgKi8gICAgYXN5bmMgU2EoKSB7XG4gICAgICAgIC8vIE9wZXJhdGlvbnMgaW4gdGhlIHF1ZXVlIHByaW9yIHRvIGRyYWluaW5nIG1heSBoYXZlIGVucXVldWVkIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gS2VlcCBkcmFpbmluZyB0aGUgcXVldWUgdW50aWwgdGhlIHRhaWwgaXMgbm8gbG9uZ2VyIGFkdmFuY2VkLFxuICAgICAgICAvLyB3aGljaCBpbmRpY2F0ZXMgdGhhdCBubyBtb3JlIG5ldyBvcGVyYXRpb25zIHdlcmUgZW5xdWV1ZWQgYW5kIHRoYXQgYWxsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMgd2VyZSBleGVjdXRlZC5cbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHQgPSB0aGlzLm1hLCBhd2FpdCB0O1xuICAgICAgICB9IHdoaWxlICh0ICE9PSB0aGlzLm1hKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBEZXRlcm1pbmUgaWYgYSBkZWxheWVkIG9wZXJhdGlvbiB3aXRoIGEgcGFydGljdWxhciBUaW1lcklkXG4gICAgICogZXhpc3RzLlxuICAgICAqLyAgICBEYSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnBhKSBpZiAoZS50aW1lcklkID09PSB0KSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBSdW5zIHNvbWUgb3IgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucyBlYXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsYXN0VGltZXJJZCAtIERlbGF5ZWQgb3BlcmF0aW9ucyB1cCB0byBhbmQgaW5jbHVkaW5nIHRoaXMgVGltZXJJZFxuICAgICAqIHdpbGwgYmUgZHJhaW5lZC4gUGFzcyBUaW1lcklkLkFsbCB0byBydW4gYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBvcGVyYXRpb25zIGhhdmUgYmVlbiBydW4uXG4gICAgICovICAgIENhKHQpIHtcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRyYWluaW5nIG1heSBnZW5lcmF0ZSBtb3JlIGRlbGF5ZWQgb3BzLCBzbyB3ZSBkbyB0aGF0IGZpcnN0LlxuICAgICAgICByZXR1cm4gdGhpcy5TYSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFJ1biBvcHMgaW4gdGhlIHNhbWUgb3JkZXIgdGhleSdkIHJ1biBpZiB0aGV5IHJhbiBuYXR1cmFsbHkuXG4gICAgICAgICAgICB0aGlzLnBhLnNvcnQoKCh0LCBlKSA9PiB0LnRhcmdldFRpbWVNcyAtIGUudGFyZ2V0VGltZU1zKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5wYSkgaWYgKGUuc2tpcERlbGF5KCksIFwiYWxsXCIgLyogQWxsICovICE9PSB0ICYmIGUudGltZXJJZCA9PT0gdCkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5TYSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXG4gICAgICovICAgIE5hKHQpIHtcbiAgICAgICAgdGhpcy5BYS5wdXNoKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi8gICAgVmEodCkge1xuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGEuaW5kZXhPZih0KTtcbiAgICAgICAgdGhpcy5wYS5zcGxpY2UoZSwgMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB4Yyh0KSB7XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGFuIG9iamVjdCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVjaWZpZWRcbiAqIG1ldGhvZHMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSB0O1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgaWYgKHQgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bdF0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAodCwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzICRjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IFEsIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiB0LFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2godCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKHQpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcih0KSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHQsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIERPTUV4Y2VwdGlvbiBlcnJvciBjb2RlIGNvbnN0YW50cy4gKi8gY29uc3QgRmMgPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqL1xuY2xhc3MgT2MgZXh0ZW5kcyBBYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcga2MsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCJuYW1lXCIgaW4gdCA/IHQubmFtZSA6IFwiW0RFRkFVTFRdXCI7XG4gICAgfVxuICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQgfHwgXG4gICAgICAgIC8vIFRoZSBjbGllbnQgbXVzdCBiZSBpbml0aWFsaXplZCB0byBlbnN1cmUgdGhhdCBhbGwgc3Vic2VxdWVudCBBUElcbiAgICAgICAgLy8gdXNhZ2UgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgVWModGhpcyksIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC50ZXJtaW5hdGUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2Yge0BsaW5rIEZpcmVzdG9yZX0gd2l0aCB0aGUgcHJvdmlkZWQgc2V0dGluZ3MuXG4gKiBDYW4gb25seSBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbiwgaW5jbHVkaW5nXG4gKiB7QGxpbmsgZ2V0RmlyZXN0b3JlfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEByZXR1cm5zIEEgbmV3bHkgaW5pdGlhbGl6ZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gZnVuY3Rpb24gTWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBfZ2V0UHJvdmlkZXIodCwgXCJmaXJlc3RvcmVcIik7XG4gICAgaWYgKG4uaXNJbml0aWFsaXplZCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuLmdldEltbWVkaWF0ZSgpLCBzID0gbi5nZXRPcHRpb25zKCk7XG4gICAgICAgIGlmIChkZWVwRXF1YWwocywgZSkpIHJldHVybiB0O1xuICAgICAgICB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIHdpdGggdGhlIHNhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRGaXJlc3RvcmUoKSB0byByZXR1cm4gdGhlIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuXCIpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIC0xICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIGUuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgIHJldHVybiBuLmluaXRpYWxpemUoe1xuICAgICAgICBvcHRpb25zOiBlXG4gICAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZXhpc3Rpbmcge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdGhhdCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlXG4gKiBwcm92aWRlZCB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0uIElmIG5vIGluc3RhbmNlIGV4aXN0cywgaW5pdGlhbGl6ZXMgYSBuZXdcbiAqIGluc3RhbmNlIHdpdGggZGVmYXVsdCBzZXR0aW5ncy5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZSB0aGF0IHRoZSByZXR1cm5lZCB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQHJldHVybnMgVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIG9mIHRoZSBwcm92aWRlZCBhcHAuXG4gKi8gZnVuY3Rpb24gTGMoZSA9IGdldEFwcCgpKSB7XG4gICAgcmV0dXJuIF9nZXRQcm92aWRlcihlLCBcImZpcmVzdG9yZVwiKS5nZXRJbW1lZGlhdGUoKTtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBCYyh0KSB7XG4gICAgcmV0dXJuIHQuX2ZpcmVzdG9yZUNsaWVudCB8fCBVYyh0KSwgdC5fZmlyZXN0b3JlQ2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKSwgdC5fZmlyZXN0b3JlQ2xpZW50O1xufVxuXG5mdW5jdGlvbiBVYyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgZmModCwgZSwgbiwgcy5ob3N0LCBzLnNzbCwgcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgcy51c2VGZXRjaFN0cmVhbXMpO1xuICAgIH0odC5fZGF0YWJhc2VJZCwgKG51bGwgPT09IChlID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9wdGlvbnMuYXBwSWQpIHx8IFwiXCIsIHQuX3BlcnNpc3RlbmNlS2V5LCBuKTtcbiAgICB0Ll9maXJlc3RvcmVDbGllbnQgPSBuZXcgV2EodC5fYXV0aENyZWRlbnRpYWxzLCB0Ll9hcHBDaGVja0NyZWRlbnRpYWxzLCB0Ll9xdWV1ZSwgcyk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIGdldEZpcmVzdG9yZX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBxYyh0LCBlKSB7XG4gICAgWGModCA9IFRjKHQsIE9jKSk7XG4gICAgY29uc3QgbiA9IEJjKHQpLCBzID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBCYTtcbiAgICByZXR1cm4gamMobiwgaSwgbmV3IE1hKGksIHMuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gS2ModCkge1xuICAgIFhjKHQgPSBUYyh0LCBPYykpO1xuICAgIGNvbnN0IGUgPSBCYyh0KSwgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgQmE7XG4gICAgcmV0dXJuIGpjKGUsIHMsIG5ldyBMYShzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gamModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IEdhKHQsIG4pLCBhd2FpdCB6YSh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghXG4gICAgICAgICAgICAvKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkgcmV0dXJuIHQuY29kZSA9PT0gSy5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gSy5VTklNUExFTUVOVEVEO1xuICAgICAgICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGEgZmV3IGtub3duIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2UgY2FuIG9wZW4gSW5kZXhlZERiIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxuICAgICAgICAgICAgICAgIC8vIHdlbGwtdW5kZXJzdG9vZCBjYXNlcywgd2UgYXR0ZW1wdCB0byBkZXRlY3QgdGhlc2UgYW5kIHRoZW4gZ3JhY2VmdWxseVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIGZhbGwgYmFjaywgd2l0aCB0aGUgcmlzayB0aGF0IHdlIG1pZ2h0IGFjY2lkZW50YWxseSBoaWRlIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBhY3R1YWwgU0RLIGJ1Z3MuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgICAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAgICAgICAgICAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgICAgICAgICAgICAgMTEgPT09IHQuY29kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayBnZXRGaXJlc3RvcmV9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gRmFsbGluZyBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHMucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG5mdW5jdGlvbiBRYyh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkICYmICF0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgZSA9IG5ldyBRO1xuICAgIHJldHVybiB0Ll9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICghSHMuYnQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgSHMuZGVsZXRlKGUpO1xuICAgICAgICAgICAgfShvcih0Ll9kYXRhYmFzZUlkLCB0Ll9wZXJzaXN0ZW5jZUtleSkpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgZS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSksIGUucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIFdjKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gd2EoYXdhaXQgdGModCksIGUpKSksIGUucHJvbWlzZTtcbiAgICB9KEJjKHQgPSBUYyh0LCBPYykpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24gR2ModCkge1xuICAgIHJldHVybiBuYyhCYyh0ID0gVGModCwgT2MpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIHpjKHQpIHtcbiAgICByZXR1cm4gc2MoQmModCA9IFRjKHQsIE9jKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gSGModCkge1xuICAgIHJldHVybiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKHQuYXBwLCBcImZpcmVzdG9yZVwiKSwgdC5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvciBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkIG9iamVjdHMgYXJlXG4gKiAgIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnNcbiAqICAgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uXG4gKiAgIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gSmModCwgZSkge1xuICAgIGNvbnN0IG4gPSBCYyh0ID0gVGModCwgT2MpKSwgcyA9IG5ldyAkYztcbiAgICByZXR1cm4gaGMobiwgdC5fZGF0YWJhc2VJZCwgZSwgcyksIHM7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlbiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlIGluIGxvY2FsXG4gKiBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKi8gZnVuY3Rpb24gWWModCwgZSkge1xuICAgIHJldHVybiBsYyhCYyh0ID0gVGModCwgT2MpKSwgZSkudGhlbigoZSA9PiBlID8gbmV3IGJjKHQsIG51bGwsIGUucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiBYYyh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkIHx8IHQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqL1xuY2xhc3MgWmMge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSBpZiAoMCA9PT0gdFtlXS5sZW5ndGgpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IF90KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbCh0Ll9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIHR1KCkge1xuICAgIHJldHVybiBuZXcgWmMoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgZXUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGV1KHl0LmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZXUoeXQuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgbnUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3Mgc3Uge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTkwIHx8IHQgPiA5MCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtMTgwIHx8IGUgPiAxODApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgdGhpcy5fbGF0ID0gdCwgdGhpcy5fbG9uZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IHQuX2xhdCAmJiB0aGlzLl9sb25nID09PSB0Ll9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBpdCh0aGlzLl9sYXQsIHQuX2xhdCkgfHwgaXQodGhpcy5fbG9uZywgdC5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBpdSA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBydSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBvbih0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgcm4odCwgdGhpcy5kYXRhLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3Mgb3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IG9uKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGF1KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIEFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBjdSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmsgPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBzLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLmthKCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSByIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IHhhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy54YTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgICRhKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjdShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCB0KSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLmssIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgRmEodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy4kYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgT2E6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5NYSh0KSwgcztcbiAgICB9XG4gICAgTGEodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy4kYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgT2E6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5rYSgpLCBzO1xuICAgIH1cbiAgICBCYSh0KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy4kYSh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICBPYTogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFVhKHQpIHtcbiAgICAgICAgcmV0dXJuIFZ1KHQsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5xYSB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLkthKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZSkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUuZmllbGQpKSk7XG4gICAgfVxuICAgIGthKCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnBhdGgubGVuZ3RoOyB0KyspIHRoaXMuTWEodGhpcy5wYXRoLmdldCh0KSk7XG4gICAgfVxuICAgIE1hKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyB0aGlzLlVhKFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoYXUodGhpcy54YSkgJiYgaXUudGVzdCh0KSkgdGhyb3cgdGhpcy5VYSgnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3MgdXUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gZSwgdGhpcy5rID0gbiB8fCB0byh0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIGphKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IGN1KHtcbiAgICAgICAgICAgIHhhOiB0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogZSxcbiAgICAgICAgICAgIEthOiBuLFxuICAgICAgICAgICAgcGF0aDogX3QuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICBPYTogITEsXG4gICAgICAgICAgICBxYTogc1xuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuaywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGh1KHQpIHtcbiAgICBjb25zdCBlID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IHRvKHQuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgdXUodC5fZGF0YWJhc2VJZCwgISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gbHUodCwgZSwgbiwgcywgaSwgciA9IHt9KSB7XG4gICAgY29uc3QgbyA9IHQuamEoci5tZXJnZSB8fCByLm1lcmdlRmllbGRzID8gMiAvKiBNZXJnZVNldCAqLyA6IDAgLyogU2V0ICovICwgZSwgbiwgaSk7XG4gICAgUnUoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCBzKTtcbiAgICBjb25zdCBhID0gSXUocywgbyk7XG4gICAgbGV0IGMsIHU7XG4gICAgaWYgKHIubWVyZ2UpIGMgPSBuZXcgbXQoby5maWVsZE1hc2spLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygci5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IFB1KGUsIHMsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIFN1KHQsIGkpIHx8IHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBjID0gbmV3IG10KHQpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKCh0ID0+IGMuY292ZXJzKHQuZmllbGQpKSk7XG4gICAgfSBlbHNlIGMgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBydShuZXcganQoYSksIGMsIHUpO1xufVxuXG5jbGFzcyBmdSBleHRlbmRzIG51IHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICgyIC8qIE1lcmdlU2V0ICovICE9PSB0LnhhKSB0aHJvdyAxIC8qIFVwZGF0ZSAqLyA9PT0gdC54YSA/IHQuVWEoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiB0LlVhKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGZ1O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gZHUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgY3Uoe1xuICAgICAgICB4YTogMyAvKiBBcmd1bWVudCAqLyAsXG4gICAgICAgIEthOiBlLnNldHRpbmdzLkthLFxuICAgICAgICBtZXRob2ROYW1lOiB0Ll9tZXRob2ROYW1lLFxuICAgICAgICBPYTogblxuICAgIH0sIGUuZGF0YWJhc2VJZCwgZS5rLCBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyB3dSBleHRlbmRzIG51IHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR2UodC5wYXRoLCBuZXcgTGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiB3dTtcbiAgICB9XG59XG5cbmNsYXNzIF91IGV4dGVuZHMgbnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuUWEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBkdSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlFhLm1hcCgodCA9PiBFdSh0LCBlKSkpLCBzID0gbmV3IEJlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEdlKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIG11IGV4dGVuZHMgbnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuUWEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBkdSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlFhLm1hcCgodCA9PiBFdSh0LCBlKSkpLCBzID0gbmV3IHFlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEdlKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGd1IGV4dGVuZHMgbnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuV2EgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgamUodC5rLCB4ZSh0LmssIHRoaXMuV2EpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBHZSh0LnBhdGgsIGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiB5dSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHQuamEoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKTtcbiAgICBSdShcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHMpO1xuICAgIGNvbnN0IHIgPSBbXSwgbyA9IGp0LmVtcHR5KCk7XG4gICAgaHQocywgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGEgPSB2dShlLCB0LCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHMgPSBnZXRNb2R1bGFySW5zdGFuY2Uocyk7XG4gICAgICAgIGNvbnN0IGMgPSBpLkxhKGEpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIGZ1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHIucHVzaChhKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gRXUocywgYyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHIucHVzaChhKSwgby5zZXQoYSwgdCkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IGEgPSBuZXcgbXQocik7XG4gICAgcmV0dXJuIG5ldyBvdShvLCBhLCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIHB1KHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICBjb25zdCBvID0gdC5qYSgxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pLCBhID0gWyBQdShlLCBzLCBuKSBdLCBjID0gWyBpIF07XG4gICAgaWYgKHIubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0ICs9IDIpIGEucHVzaChQdShlLCByW3RdKSksIGMucHVzaChyW3QgKyAxXSk7XG4gICAgY29uc3QgdSA9IFtdLCBoID0ganQuZW1wdHkoKTtcbiAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcGljayB0aGUgbGFzdCB2YWx1ZSBmb3IgYSBmaWVsZCBpZiB0aGVcbiAgICAvLyB1c2VyIHNwZWNpZmllZCB0aGUgZmllbGQgbXVsdGlwbGUgdGltZXMuXG4gICAgZm9yIChsZXQgdCA9IGEubGVuZ3RoIC0gMTsgdCA+PSAwOyAtLXQpIGlmICghU3UodSwgYVt0XSkpIHtcbiAgICAgICAgY29uc3QgZSA9IGFbdF07XG4gICAgICAgIGxldCBuID0gY1t0XTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHMgPSBvLkxhKGUpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIGZ1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHUucHVzaChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gRXUobiwgcyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHUucHVzaChlKSwgaC5zZXQoZSwgdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgbXQodSk7XG4gICAgcmV0dXJuIG5ldyBvdShoLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIFR1KHQsIGUsIG4sIHMgPSAhMSkge1xuICAgIHJldHVybiBFdShuLCB0LmphKHMgPyA0IC8qIEFycmF5QXJndW1lbnQgKi8gOiAzIC8qIEFyZ3VtZW50ICovICwgZSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiBFdSh0LCBlKSB7XG4gICAgaWYgKEF1KFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiBSdShcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCBlLCB0KSwgSXUodCwgZSk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBudSkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBGaWVsZFZhbHVlLmRlbGV0ZSgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghYXUoZS54YSkpIHRocm93IGUuVWEoYCR7dC5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghZS5wYXRoKSB0aHJvdyBlLlVhKGAke3QuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gdC5fdG9GaWVsZFRyYW5zZm9ybShlKTtcbiAgICAgICAgbiAmJiBlLmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKHQsIGUpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IHQgJiYgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgZS5wYXRoICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKGUuc2V0dGluZ3MuT2EgJiYgNCAvKiBBcnJheUFyZ3VtZW50ICovICE9PSBlLnhhKSB0aHJvdyBlLlVhKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBFdShpLCBlLkJhKHMpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IHQgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaCh0KSwgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0KSByZXR1cm4geGUoZS5rLCB0KTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gYXQuZnJvbURhdGUodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBqbihlLmssIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgYXQpIHtcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGF0KHQuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcih0Lm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBqbihlLmssIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2Ygc3UpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHQubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB0LmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGV1KSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogUW4oZS5rLCB0Ll9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFBjKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5kYXRhYmFzZUlkLCBzID0gdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXMuaXNFcXVhbChuKSkgdGhyb3cgZS5VYShgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IHpuKHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IGUuZGF0YWJhc2VJZCwgdC5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGUuVWEoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke3BjKHQpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIEl1KHQsIGUpIHtcbiAgICBjb25zdCBuID0ge307XG4gICAgcmV0dXJuIGx0KHQpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIGUucGF0aCAmJiBlLnBhdGgubGVuZ3RoID4gMCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCkgOiBodCh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IEV1KHMsIGUuRmEodCkpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG5bdF0gPSBpKTtcbiAgICB9KSksIHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gQXUodCkge1xuICAgIHJldHVybiAhKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCB0IGluc3RhbmNlb2YgQXJyYXkgfHwgdCBpbnN0YW5jZW9mIERhdGUgfHwgdCBpbnN0YW5jZW9mIGF0IHx8IHQgaW5zdGFuY2VvZiBzdSB8fCB0IGluc3RhbmNlb2YgZXUgfHwgdCBpbnN0YW5jZW9mIFBjIHx8IHQgaW5zdGFuY2VvZiBudSk7XG59XG5cbmZ1bmN0aW9uIFJ1KHQsIGUsIG4pIHtcbiAgICBpZiAoIUF1KG4pIHx8ICFmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBudWxsID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO1xuICAgIH0obikpIHtcbiAgICAgICAgY29uc3QgcyA9IHBjKG4pO1xuICAgICAgICB0aHJvdyBcImFuIG9iamVjdFwiID09PSBzID8gZS5VYSh0ICsgXCIgYSBjdXN0b20gb2JqZWN0XCIpIDogZS5VYSh0ICsgXCIgXCIgKyBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIFB1KHQsIGUsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSBpbnN0YW5jZW9mIFpjKSByZXR1cm4gZS5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gdnUodCwgZSk7XG4gICAgdGhyb3cgVnUoXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIEZpZWxkUGF0aC5cIiwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXG4gKi8gY29uc3QgYnUgPSBuZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtcblxuLyoqXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcbiAqIHdhcyB0aHJvd24uXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlXG4gKiBzcGxpdCBvbiBkb3RzLlxuICogQHBhcmFtIHRhcmdldERvYyAtIFRoZSBkb2N1bWVudCBhZ2FpbnN0IHdoaWNoIHRoZSBmaWVsZCBwYXRoIHdpbGwgYmVcbiAqIGV2YWx1YXRlZC5cbiAqLyBmdW5jdGlvbiB2dSh0LCBlLCBuKSB7XG4gICAgaWYgKGUuc2VhcmNoKGJ1KSA+PSAwKSB0aHJvdyBWdShgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ2AsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBaYyguLi5lLnNwbGl0KFwiLlwiKSkuX2ludGVybmFsUGF0aDtcbiAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgIHRocm93IFZ1KGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCwgdCwgXG4gICAgICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgICAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVnUodCwgZSwgbiwgcywgaSkge1xuICAgIGNvbnN0IHIgPSBzICYmICFzLmlzRW1wdHkoKSwgbyA9IHZvaWQgMCAhPT0gaTtcbiAgICBsZXQgYSA9IGBGdW5jdGlvbiAke2V9KCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhYDtcbiAgICBuICYmIChhICs9IFwiICh2aWEgYHRvRmlyZXN0b3JlKClgKVwiKSwgYSArPSBcIi4gXCI7XG4gICAgbGV0IGMgPSBcIlwiO1xuICAgIHJldHVybiAociB8fCBvKSAmJiAoYyArPSBcIiAoZm91bmRcIiwgciAmJiAoYyArPSBgIGluIGZpZWxkICR7c31gKSwgbyAmJiAoYyArPSBgIGluIGRvY3VtZW50ICR7aX1gKSwgXG4gICAgYyArPSBcIilcIiksIG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYSArIHQgKyBjKTtcbn1cblxuLyoqIENoZWNrcyBgaGF5c3RhY2tgIGlmIEZpZWxkUGF0aCBgbmVlZGxlYCBpcyBwcmVzZW50LiBSdW5zIGluIE8obikuICovIGZ1bmN0aW9uIFN1KHQsIGUpIHtcbiAgICByZXR1cm4gdC5zb21lKCh0ID0+IHQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIER1IHtcbiAgICAvLyBOb3RlOiBUaGlzIGNsYXNzIGlzIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiB0aGUgRG9jdW1lbnRTbmFwc2hvdCBpblxuICAgIC8vIHRoZSBsZWdhY3kgU0RLLiBUaGUgY2hhbmdlcyBhcmU6XG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE1ldGFkYXRhLlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RPcHRpb25zLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCB0aGlzLl9kb2N1bWVudCA9IHMsIFxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBpO1xuICAgIH1cbiAgICAvKiogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHByb3ZpZGVzIHRoZSBkb2N1bWVudCdzIElELiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCBmb3IgdGhlIGRvY3VtZW50IGluY2x1ZGVkIGluIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAuXG4gICAgICovICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGModGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIsIHRoaXMuX2tleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRvY3VtZW50IGF0IHRoZSBzbmFwc2hvdCdzIGxvY2F0aW9uIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBDdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKE51KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUpIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUoZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBDdSBleHRlbmRzIER1IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKClgIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIE51KHQsIGUpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IHZ1KHQsIGUpIDogZSBpbnN0YW5jZW9mIFpjID8gZS5faW50ZXJuYWxQYXRoIDogZS5fZGVsZWdhdGUuX2ludGVybmFsUGF0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTWV0YWRhdGEgYWJvdXQgYSBzbmFwc2hvdCwgZGVzY3JpYmluZyB0aGUgc3RhdGUgb2YgdGhlIHNuYXBzaG90LlxuICovIGNsYXNzIGt1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nV3JpdGVzID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgU25hcHNob3RNZXRhZGF0YWAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IHQuaGFzUGVuZGluZ1dyaXRlcyAmJiB0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgeHUgZXh0ZW5kcyBEdSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBlLCBuLCBzLCByKSwgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fZmlyZXN0b3JlSW1wbCA9IHQsIHRoaXMubWV0YWRhdGEgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgc2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YVxuICAgICAqIGV4aXN0cy4gVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGlzdHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgJHUodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYEZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClgIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzZXQgdG9cbiAgICAgKiBpdHMgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBieVxuICAgICAqIHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyB0aGUgZmllbGQgaXMgcmV0cmlldmVkXG4gICAgICogZnJvbSB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wc1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0LCBlID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChOdShcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyAkdSBleHRlbmRzIHh1IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U25hcHNob3RgIGNvbnRhaW5zIHplcm8gb3IgbW9yZSBgRG9jdW1lbnRTbmFwc2hvdGAgb2JqZWN0c1xuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFjY2Vzc2VkIGFzIGFuXG4gKiBhcnJheSB2aWEgdGhlIGBkb2NzYCBwcm9wZXJ0eSBvciBlbnVtZXJhdGVkIHVzaW5nIHRoZSBgZm9yRWFjaGAgbWV0aG9kLiBUaGVcbiAqIG51bWJlciBvZiBkb2N1bWVudHMgY2FuIGJlIGRldGVybWluZWQgdmlhIHRoZSBgZW1wdHlgIGFuZCBgc2l6ZWBcbiAqIHByb3BlcnRpZXMuXG4gKi8gY2xhc3MgRnUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX3NuYXBzaG90ID0gcywgdGhpcy5tZXRhZGF0YSA9IG5ldyBrdShzLmhhc1BlbmRpbmdXcml0ZXMsIHMuZnJvbUNhY2hlKSwgXG4gICAgICAgIHRoaXMucXVlcnkgPSBuO1xuICAgIH1cbiAgICAvKiogQW4gYXJyYXkgb2YgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGRvY3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgdDtcbiAgICB9XG4gICAgLyoqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5zaXplO1xuICAgIH1cbiAgICAvKiogVHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW51bWVyYXRlcyBhbGwgb2YgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2l0aCBhIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGZvclxuICAgICAqIGVhY2ggZG9jdW1lbnQgaW4gdGhlIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSB0aGlzQXJnIC0gVGhlIGB0aGlzYCBiaW5kaW5nIGZvciB0aGUgY2FsbGJhY2suXG4gICAgICovICAgIGZvckVhY2godCwgZSkge1xuICAgICAgICB0aGlzLl9zbmFwc2hvdC5kb2NzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5jYWxsKGUsIG5ldyAkdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBuLmtleSwgbiwgbmV3IGt1KHRoaXMuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmtleSksIHRoaXMuX3NuYXBzaG90LmZyb21DYWNoZSksIHRoaXMucXVlcnkuY29udmVydGVyKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZG9jdW1lbnRzIGNoYW5nZXMgc2luY2UgdGhlIGxhc3Qgc25hcHNob3QuIElmIHRoaXNcbiAgICAgKiBpcyB0aGUgZmlyc3Qgc25hcHNob3QsIGFsbCBkb2N1bWVudHMgd2lsbCBiZSBpbiB0aGUgbGlzdCBhcyAnYWRkZWQnXG4gICAgICogY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYFNuYXBzaG90TGlzdGVuT3B0aW9uc2AgdGhhdCBjb250cm9sIHdoZXRoZXIgbWV0YWRhdGEtb25seVxuICAgICAqIGNoYW5nZXMgKGkuZS4gb25seSBgRG9jdW1lbnRTbmFwc2hvdC5tZXRhZGF0YWAgY2hhbmdlZCkgc2hvdWxkIHRyaWdnZXJcbiAgICAgKiBzbmFwc2hvdCBldmVudHMuXG4gICAgICovICAgIGRvY0NoYW5nZXModCA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhIXQuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgaWYgKGUgJiYgdGhpcy5fc25hcHNob3QuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzICYmIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSBlIHx8ICh0aGlzLl9jYWNoZWRDaGFuZ2VzID0gXG4gICAgICAgIC8qKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBgRG9jdW1lbnRDaGFuZ2VgcyBmb3IgYSBnaXZlbiBgVmlld1NuYXBzaG90YC4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQuX3NuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9zbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcCgobiA9PiAoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFkZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogbmV3ICR1KHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIG4uZG9jLmtleSwgbi5kb2MsIG5ldyBrdSh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpLFxuICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiBlKytcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEEgYERvY3VtZW50U2V0YCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IHQuX3NuYXBzaG90Lm9sZERvY3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKCh0ID0+IGUgfHwgMyAvKiBNZXRhZGF0YSAqLyAhPT0gdC50eXBlKSkubWFwKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyAkdSh0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBlLmRvYy5rZXksIGUuZG9jLCBuZXcga3UodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGUuZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMSwgciA9IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBBZGRlZCAqLyAhPT0gZS50eXBlICYmIChpID0gbi5pbmRleE9mKGUuZG9jLmtleSksIG4gPSBuLmRlbGV0ZShlLmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIDEgLyogUmVtb3ZlZCAqLyAhPT0gZS50eXBlICYmIChuID0gbi5hZGQoZS5kb2MpLCByID0gbi5pbmRleE9mKGUuZG9jLmtleSkpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBPdShlLnR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogclxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0aGlzLCBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlcztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE91KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgIHJldHVybiBcImFkZGVkXCI7XG5cbiAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICBjYXNlIDMgLyogTWV0YWRhdGEgKi8gOlxuICAgICAgICByZXR1cm4gXCJtb2RpZmllZFwiO1xuXG4gICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgIHJldHVybiBcInJlbW92ZWRcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlZXhwKTogQWRkIHRlc3RzIGZvciBzbmFwc2hvdEVxdWFsIHdpdGggZGlmZmVyZW50IHNuYXBzaG90XG4vLyBtZXRhZGF0YVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICovIGZ1bmN0aW9uIE11KHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHh1ICYmIGUgaW5zdGFuY2VvZiB4dSA/IHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIHQuX2tleS5pc0VxdWFsKGUuX2tleSkgJiYgKG51bGwgPT09IHQuX2RvY3VtZW50ID8gbnVsbCA9PT0gZS5fZG9jdW1lbnQgOiB0Ll9kb2N1bWVudC5pc0VxdWFsKGUuX2RvY3VtZW50KSkgJiYgdC5fY29udmVydGVyID09PSBlLl9jb252ZXJ0ZXIgOiB0IGluc3RhbmNlb2YgRnUgJiYgZSBpbnN0YW5jZW9mIEZ1ICYmICh0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiBOYyh0LnF1ZXJ5LCBlLnF1ZXJ5KSAmJiB0Lm1ldGFkYXRhLmlzRXF1YWwoZS5tZXRhZGF0YSkgJiYgdC5fc25hcHNob3QuaXNFcXVhbChlLl9zbmFwc2hvdCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBMdSh0KSB7XG4gICAgaWYgKHBlKHQpICYmIDAgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCkgdGhyb3cgbmV3IGooSy5VTklNUExFTUVOVEVELCBcImxpbWl0VG9MYXN0KCkgcXVlcmllcyByZXF1aXJlIHNwZWNpZnlpbmcgYXQgbGVhc3Qgb25lIG9yZGVyQnkoKSBjbGF1c2VcIik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9LFxuICoge0BsaW5rIG9yZGVyQnl9LCB7QGxpbmsgKHN0YXJ0QXQ6MSl9LCB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9LCB7QGxpbmtcbiAqIGVuZEJlZm9yZToxfSwge0BsaW5rIChlbmRBdDoxKX0sIHtAbGluayBsaW1pdH0gb3Ige0BsaW5rIGxpbWl0VG9MYXN0fSBhbmRcbiAqIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgcXVlcnl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0XG4gKiBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgQnUge31cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGltbXV0YWJsZSBpbnN0YW5jZSBvZiB7QGxpbmsgUXVlcnl9IHRoYXQgaXMgZXh0ZW5kZWQgdG8gYWxzbyBpbmNsdWRlXG4gKiBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSB7QGxpbmsgUXVlcnl9IGluc3RhbmNlIHRvIHVzZSBhcyBhIGJhc2UgZm9yIHRoZSBuZXcgY29uc3RyYWludHMuXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIFRoZSBsaXN0IG9mIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9cyB0byBhcHBseS5cbiAqIEB0aHJvd3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBxdWVyeSBjb25zdHJhaW50cyBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCB0aGVcbiAqIGV4aXN0aW5nIG9yIG5ldyBjb25zdHJhaW50cy5cbiAqLyBmdW5jdGlvbiBVdSh0LCAuLi5lKSB7XG4gICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSBuLl9hcHBseSh0KTtcbiAgICByZXR1cm4gdDtcbn1cblxuY2xhc3MgcXUgZXh0ZW5kcyBCdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkdhID0gdCwgdGhpcy56YSA9IGUsIHRoaXMuSGEgPSBuLCB0aGlzLnR5cGUgPSBcIndoZXJlXCI7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBodSh0LmZpcmVzdG9yZSksIG4gPSBmdW5jdGlvbih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgICAgICBsZXQgYTtcbiAgICAgICAgICAgIGlmIChpLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gPT09IHIgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICcke3J9JyBxdWVyaWVzIG9uIEZpZWxkUGF0aC5kb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBJTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICBzaChvLCByKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgZS5wdXNoKG5oKHMsIHQsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgYSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgYSA9IG5oKHMsIHQsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBJTiAqLyAhPT0gciAmJiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAhPT0gciAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gciB8fCBzaChvLCByKSwgXG4gICAgICAgICAgICBhID0gVHUobiwgZSwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIElOICovID09PSByIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSByKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBadC5jcmVhdGUoaSwgciwgYSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLlYoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gRWUodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuICYmICFuLmlzRXF1YWwoZS5maWVsZCkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICcke24udG9TdHJpbmcoKX0nIGFuZCAnJHtlLmZpZWxkLnRvU3RyaW5nKCl9J2ApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gVGUodCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgaWgodCwgZS5maWVsZCwgcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmIChlLmluZGV4T2Yobi5vcCkgPj0gMCkgcmV0dXJuIG4ub3A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH0odCwgXG4gICAgICAgICAgICAgICAgLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogT3BlcmF0b3JzIGluIGEgcXVlcnkgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBzZXQgb2YgcnVsZXM6XG4gKiAxLiBPbmx5IG9uZSBhcnJheSBvcGVyYXRvciBpcyBhbGxvd2VkLlxuICogMi4gT25seSBvbmUgZGlzanVuY3RpdmUgb3BlcmF0b3IgaXMgYWxsb3dlZC5cbiAqIDMuIGBOT1RfRVFVQUxgIGNhbm5vdCBiZSB1c2VkIHdpdGggYW5vdGhlciBgTk9UX0VRVUFMYCBvcGVyYXRvci5cbiAqIDQuIGBOT1RfSU5gIGNhbm5vdCBiZSB1c2VkIHdpdGggYXJyYXksIGRpc2p1bmN0aXZlLCBvciBgTk9UX0VRVUFMYCBvcGVyYXRvcnMuXG4gKlxuICogQXJyYXkgb3BlcmF0b3JzOiBgQVJSQVlfQ09OVEFJTlNgLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYFxuICogRGlzanVuY3RpdmUgb3BlcmF0b3JzOiBgSU5gLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYCwgYE5PVF9JTmBcbiAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfShlLm9wKSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIFxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICB0aHJvdyBuID09PSBlLm9wID8gbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXIuYCkgOiBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHdpdGggJyR7bi50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICAgICAgICAgIH0odCwgYyksIGM7XG4gICAgICAgIH0odC5fcXVlcnksIFwid2hlcmVcIiwgZSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuR2EsIHRoaXMuemEsIHRoaXMuSGEpO1xuICAgICAgICByZXR1cm4gbmV3IGJjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50cyBtdXN0IGNvbnRhaW4gdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZSByZWxhdGlvbiBjb25zdHJhaW50XG4gKiBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gS3UodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBlLCBpID0gTnUoXCJ3aGVyZVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IHF1KGksIHMsIG4pO1xufVxuXG5jbGFzcyBqdSBleHRlbmRzIEJ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuR2EgPSB0LCB0aGlzLkphID0gZSwgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5zdGFydEF0KSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgc3RhcnRBdCgpIG9yIHN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuZW5kQXQpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IGxlKGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gVGUodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3Qgb3JkZXIgYnkuIEl0IG11c3QgbWF0Y2ggYW55IGluZXF1YWxpdHkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBFZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBpaCh0LCBuLCBlLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KHQsIHMpLCBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlIGEgYEJvdW5kYCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBgQm91bmRgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcbiAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXG4gKiBwb3NpdGlvbi5cbiAqXG4gKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XG4gKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxuICogc2VydmVyIHRpbWVzdGFtcC5cbiAqLyAodC5fcXVlcnksIHRoaXMuR2EsIHRoaXMuSmEpO1xuICAgICAgICByZXR1cm4gbmV3IGJjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0ZSB0aGF0IG9yZGVyQnkgZG9lcyBub3QgbGlzdCB0aGUgc2FtZSBrZXkgdHdpY2UuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5leHBsaWNpdE9yZGVyQnkuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgbiwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IHNvcnRzIHRoZSBxdWVyeSByZXN1bHQgYnkgdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mIGFzY2VuZGluZy5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIGZpZWxkIHRvIHNvcnQgYnkuXG4gKiBAcGFyYW0gZGlyZWN0aW9uU3RyIC0gT3B0aW9uYWwgZGlyZWN0aW9uIHRvIHNvcnQgYnkgKCdhc2MnIG9yICdkZXNjJykuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gUXUodCwgZSA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gZSwgcyA9IE51KFwib3JkZXJCeVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IGp1KHMsIG4pO1xufVxuXG5jbGFzcyBXdSBleHRlbmRzIEJ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuWWEgPSBlLCB0aGlzLlhhID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBiYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIFBlKHQuX3F1ZXJ5LCB0aGlzLllhLCB0aGlzLlhhKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmcgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIEd1KHQpIHtcbiAgICByZXR1cm4gRWMoXCJsaW1pdFwiLCB0KSwgbmV3IFd1KFwibGltaXRcIiwgdCwgXCJGXCIgLyogRmlyc3QgKi8pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgYG9yZGVyQnlgIGNsYXVzZSBmb3IgYGxpbWl0VG9MYXN0YCBxdWVyaWVzLFxuICogb3RoZXJ3aXNlIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biBkdXJpbmcgZXhlY3V0aW9uLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIHp1KHQpIHtcbiAgICByZXR1cm4gRWMoXCJsaW1pdFRvTGFzdFwiLCB0KSwgbmV3IFd1KFwibGltaXRUb0xhc3RcIiwgdCwgXCJMXCIgLyogTGFzdCAqLyk7XG59XG5cbmNsYXNzIEh1IGV4dGVuZHMgQnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5aYSA9IGUsIHRoaXMudGMgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gZWgodCwgdGhpcy50eXBlLCB0aGlzLlphLCB0aGlzLnRjKTtcbiAgICAgICAgcmV0dXJuIG5ldyBiYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCBlLCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSnUoLi4udCkge1xuICAgIHJldHVybiBuZXcgSHUoXCJzdGFydEF0XCIsIHQsIC8qYmVmb3JlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gWXUoLi4udCkge1xuICAgIHJldHVybiBuZXcgSHUoXCJzdGFydEFmdGVyXCIsIHQsIFxuICAgIC8qYmVmb3JlPSovICExKTtcbn1cblxuY2xhc3MgWHUgZXh0ZW5kcyBCdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLlphID0gZSwgdGhpcy50YyA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBlaCh0LCB0aGlzLnR5cGUsIHRoaXMuWmEsIHRoaXMudGMpO1xuICAgICAgICByZXR1cm4gbmV3IGJjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgZSk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFp1KC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IFh1KFwiZW5kQmVmb3JlXCIsIHQsIC8qYmVmb3JlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gdGgoLi4udCkge1xuICAgIHJldHVybiBuZXcgWHUoXCJlbmRBdFwiLCB0LCAvKmJlZm9yZT0qLyAhMSk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBlaCh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiBEdSkgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgaihLLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgQWUodCkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgci5wdXNoKE90KGUsIHMua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChBdCh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHt0fScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdWUociwgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBlLCBuWzBdLl9kb2N1bWVudCwgcyk7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gaHUodC5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtzfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCBhID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gaVtyXTtcbiAgICAgICAgICAgICAgICBpZiAob1tyXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGMpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3N9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBjfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUllKHQpICYmIC0xICE9PSBjLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7Y30nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGguY2hpbGQoZHQuZnJvbVN0cmluZyhjKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghU3QuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtzfSgpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke259JyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IFN0KG4pO1xuICAgICAgICAgICAgICAgICAgICBhLnB1c2goT3QoZSwgaSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBUdShuLCBzLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgdWUoYSwgcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBkb2N1bWVudElkVmFsdWVgIGludG8gYSBgUmVmZXJlbmNlVmFsdWVgLCB0aHJvd2luZ1xuICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgYERvY3VtZW50UmVmZXJlbmNlYFxuICogb3IgYHN0cmluZ2AsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGksIGUsIG4sIHMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbmgodCwgZSwgbikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKSkpIHtcbiAgICAgICAgaWYgKFwiXCIgPT09IG4pIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghSWUoZSkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHMgPSBlLnBhdGguY2hpbGQoZHQuZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICghU3QuaXNEb2N1bWVudEtleShzKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHByb3ZpZGVkIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke3N9JyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoJHtzLmxlbmd0aH0pLmApO1xuICAgICAgICByZXR1cm4gT3QodCwgbmV3IFN0KHMpKTtcbiAgICB9XG4gICAgaWYgKG4gaW5zdGFuY2VvZiBQYykgcmV0dXJuIE90KHQsIG4uX2tleSk7XG4gICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHtwYyhuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiBzaCh0LCBlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHQpIHx8IDAgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7ZS50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICBpZiAodC5sZW5ndGggPiAxMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gJyR7ZS50b1N0cmluZygpfScgZmlsdGVycyBzdXBwb3J0IGEgbWF4aW11bSBvZiAxMCBlbGVtZW50cyBpbiB0aGUgdmFsdWUgYXJyYXkuYCk7XG59XG5cbmZ1bmN0aW9uIGloKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4uaXNFcXVhbChlKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGhhdmUgYSB3aGVyZSBmaWx0ZXIgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG9uIGZpZWxkICcke2UudG9TdHJpbmcoKX0nIGFuZCBzbyB5b3UgbXVzdCBhbHNvIHVzZSAnJHtlLnRvU3RyaW5nKCl9JyBhcyB5b3VyIGZpcnN0IGFyZ3VtZW50IHRvIG9yZGVyQnkoKSwgYnV0IHlvdXIgZmlyc3Qgb3JkZXJCeSgpIGlzIG9uIGZpZWxkICcke24udG9TdHJpbmcoKX0nIGluc3RlYWQuYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIEZpcmVzdG9yZSdzIGludGVybmFsIHR5cGVzIHRvIHRoZSBKYXZhU2NyaXB0IHR5cGVzIHRoYXQgd2UgZXhwb3NlXG4gKiB0byB0aGUgdXNlci5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyByaCB7XG4gICAgY29udmVydFZhbHVlKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKER0KHQpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBFdCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSk7XG5cbiAgICAgICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRCeXRlcyhJdCh0LmJ5dGVzVmFsdWUpKTtcblxuICAgICAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVmZXJlbmNlKHQucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkodC5hcnJheVZhbHVlLCBlKTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdCh0Lm1hcFZhbHVlLCBlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydE9iamVjdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGh0KHQuZmllbGRzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG5bdF0gPSB0aGlzLmNvbnZlcnRWYWx1ZShzLCBlKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBjb252ZXJ0R2VvUG9pbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IHN1KEV0KHQubGF0aXR1ZGUpLCBFdCh0LmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gKHQudmFsdWVzIHx8IFtdKS5tYXAoKHQgPT4gdGhpcy5jb252ZXJ0VmFsdWUodCwgZSkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IFJ0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCBlKTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChQdCh0KSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBUdCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZHQuZnJvbVN0cmluZyh0KTtcbiAgICAgICAgQihBcyhuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgZGMobi5nZXQoMSksIG4uZ2V0KDMpKSwgaSA9IG5ldyBTdChuLnBvcEZpcnN0KDUpKTtcbiAgICAgICAgcmV0dXJuIHMuaXNFcXVhbChlKSB8fCBcbiAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cbiAgICAgICAgRihgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHtlLnByb2plY3RJZH0vJHtlLmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gb2godCwgZSwgbikge1xuICAgIGxldCBzO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiBzID0gdCA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyB0LnRvRmlyZXN0b3JlKGUsIG4pIDogdC50b0ZpcmVzdG9yZShlKSA6IGUsIFxuICAgIHM7XG59XG5cbmNsYXNzIGFoIGV4dGVuZHMgcmgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IGV1KHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQYyh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqLyBjbGFzcyBjaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSBlLCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gaHUodCk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBzID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IG9oKHMuY29udmVydGVyLCBlLCBuKSwgciA9IGx1KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24ocy5fa2V5LCBKZS5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGkgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBaYyA/IHB1KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IHl1KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihpLl9rZXksIEplLmV4aXN0cyghMCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBXcml0ZUJhdGNoYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgZSA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBobihlLl9rZXksIEplLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSB3cml0ZSBiYXRjaCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXIgY29tbWl0KCkgaGFzIGJlZW4gY2FsbGVkLlwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVoKHQsIGUpIHtcbiAgICBpZiAoKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpLmZpcmVzdG9yZSAhPT0gZSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovXG5mdW5jdGlvbiBoaCh0KSB7XG4gICAgdCA9IFRjKHQsIFBjKTtcbiAgICBjb25zdCBlID0gVGModC5maXJlc3RvcmUsIE9jKTtcbiAgICByZXR1cm4gcmMoQmMoZSksIHQuX2tleSkudGhlbigobiA9PiBSaChlLCB0LCBuKSkpO1xufVxuXG5jbGFzcyBsaCBleHRlbmRzIHJoIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBldSh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgUGModGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZmgodCkge1xuICAgIHQgPSBUYyh0LCBQYyk7XG4gICAgY29uc3QgZSA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIG4gPSBCYyhlKSwgcyA9IG5ldyBsaChlKTtcbiAgICByZXR1cm4gaWMobiwgdC5fa2V5KS50aGVuKChuID0+IG5ldyB4dShlLCBzLCB0Ll9rZXksIG4sIG5ldyBrdShudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCB0LmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGRoKHQpIHtcbiAgICB0ID0gVGModCwgUGMpO1xuICAgIGNvbnN0IGUgPSBUYyh0LmZpcmVzdG9yZSwgT2MpO1xuICAgIHJldHVybiByYyhCYyhlKSwgdC5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gUmgoZSwgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiB3aCh0KSB7XG4gICAgdCA9IFRjKHQsIGJjKTtcbiAgICBjb25zdCBlID0gVGModC5maXJlc3RvcmUsIE9jKSwgbiA9IEJjKGUpLCBzID0gbmV3IGxoKGUpO1xuICAgIHJldHVybiBMdSh0Ll9xdWVyeSksIGFjKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBGdShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIF9oKHQpIHtcbiAgICB0ID0gVGModCwgYmMpO1xuICAgIGNvbnN0IGUgPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCBuID0gQmMoZSksIHMgPSBuZXcgbGgoZSk7XG4gICAgcmV0dXJuIG9jKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBGdShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIG1oKHQpIHtcbiAgICB0ID0gVGModCwgYmMpO1xuICAgIGNvbnN0IGUgPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCBuID0gQmMoZSksIHMgPSBuZXcgbGgoZSk7XG4gICAgcmV0dXJuIGFjKG4sIHQuX3F1ZXJ5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbmV3IEZ1KGUsIHMsIHQsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIGdoKHQsIGUsIG4pIHtcbiAgICB0ID0gVGModCwgUGMpO1xuICAgIGNvbnN0IHMgPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCBpID0gb2godC5jb252ZXJ0ZXIsIGUsIG4pO1xuICAgIHJldHVybiBBaChzLCBbIGx1KGh1KHMpLCBcInNldERvY1wiLCB0Ll9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCBuKS50b011dGF0aW9uKHQuX2tleSwgSmUubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24geWgodCwgZSwgbiwgLi4ucykge1xuICAgIHQgPSBUYyh0LCBQYyk7XG4gICAgY29uc3QgaSA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIHIgPSBodShpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBaYyA/IHB1KHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSwgbiwgcykgOiB5dShyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUpO1xuICAgIHJldHVybiBBaChpLCBbIG8udG9NdXRhdGlvbih0Ll9rZXksIEplLmV4aXN0cyghMCkpIF0pO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBzcGVjaWZpZWQgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGRlbGV0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIGRlbGV0ZWQgZnJvbSB0aGUgYmFja2VuZCAobm90ZSB0aGF0IGl0IHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIHBoKHQpIHtcbiAgICByZXR1cm4gQWgoVGModC5maXJlc3RvcmUsIE9jKSwgWyBuZXcgaG4odC5fa2V5LCBKZS5ub25lKCkpIF0pO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBkb2N1bWVudCB0byBzcGVjaWZpZWQgYENvbGxlY3Rpb25SZWZlcmVuY2VgIHdpdGggdGhlIGdpdmVuIGRhdGEsXG4gKiBhc3NpZ25pbmcgaXQgYSBkb2N1bWVudCBJRCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvbiB0byBhZGQgdGhpcyBkb2N1bWVudCB0by5cbiAqIEBwYXJhbSBkYXRhIC0gQW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoZSBuZXcgZG9jdW1lbnQuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50UmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgYmFja2VuZCAoTm90ZSB0aGF0IGl0XG4gKiB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBUaCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIHMgPSBEYyh0KSwgaSA9IG9oKHQuY29udmVydGVyLCBlKTtcbiAgICByZXR1cm4gQWgobiwgWyBsdShodSh0LmZpcmVzdG9yZSksIFwiYWRkRG9jXCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIHt9KS50b011dGF0aW9uKHMuX2tleSwgSmUuZXhpc3RzKCExKSkgXSkudGhlbigoKCkgPT4gcykpO1xufVxuXG5mdW5jdGlvbiBFaCh0LCAuLi5lKSB7XG4gICAgdmFyIG4sIHMsIGk7XG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KTtcbiAgICBsZXQgciA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITFcbiAgICB9LCBvID0gMDtcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiBlW29dIHx8IHhjKGVbb10pIHx8IChyID0gZVtvXSwgbysrKTtcbiAgICBjb25zdCBhID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiByLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXNcbiAgICB9O1xuICAgIGlmICh4YyhlW29dKSkge1xuICAgICAgICBjb25zdCB0ID0gZVtvXTtcbiAgICAgICAgZVtvXSA9IG51bGwgPT09IChuID0gdC5uZXh0KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmJpbmQodCksIGVbbyArIDFdID0gbnVsbCA9PT0gKHMgPSB0LmVycm9yKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmJpbmQodCksIFxuICAgICAgICBlW28gKyAyXSA9IG51bGwgPT09IChpID0gdC5jb21wbGV0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaW5kKHQpO1xuICAgIH1cbiAgICBsZXQgYywgdSwgaDtcbiAgICBpZiAodCBpbnN0YW5jZW9mIFBjKSB1ID0gVGModC5maXJlc3RvcmUsIE9jKSwgaCA9IGdlKHQuX2tleS5wYXRoKSwgYyA9IHtcbiAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICBlW29dICYmIGVbb10oUmgodSwgdCwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gVGModCwgYmMpO1xuICAgICAgICB1ID0gVGMobi5maXJlc3RvcmUsIE9jKSwgaCA9IG4uX3F1ZXJ5O1xuICAgICAgICBjb25zdCBzID0gbmV3IGxoKHUpO1xuICAgICAgICBjID0ge1xuICAgICAgICAgICAgbmV4dDogdCA9PiB7XG4gICAgICAgICAgICAgICAgZVtvXSAmJiBlW29dKG5ldyBGdSh1LCBzLCBuLCB0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgICAgIH0sIEx1KHQuX3F1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBxYShzKSwgciA9IG5ldyB6byhlLCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBLbyhhd2FpdCBlYyh0KSwgcikpKSwgKCkgPT4ge1xuICAgICAgICAgICAgaS5uYSgpLCB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gam8oYXdhaXQgZWModCksIHIpKSk7XG4gICAgICAgIH07XG4gICAgfShCYyh1KSwgaCwgYSwgYyk7XG59XG5cbmZ1bmN0aW9uIEloKHQsIGUpIHtcbiAgICByZXR1cm4gY2MoQmModCA9IFRjKHQsIE9jKSksIHhjKGUpID8gZSA6IHtcbiAgICAgICAgbmV4dDogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIExvY2FsbHkgd3JpdGVzIGBtdXRhdGlvbnNgIG9uIHRoZSBhc3luYyBxdWV1ZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIEFoKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gY2EoYXdhaXQgdGModCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbiAgICB9KEJjKHQpLCBlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHtAbGluayBWaWV3U25hcHNob3R9IHRoYXQgY29udGFpbnMgdGhlIHNpbmdsZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHJlZmBcbiAqIHRvIGEge0BsaW5rIERvY3VtZW50U25hcHNob3R9LlxuICovIGZ1bmN0aW9uIFJoKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbi5kb2NzLmdldChlLl9rZXkpLCBpID0gbmV3IGxoKHQpO1xuICAgIHJldHVybiBuZXcgeHUodCwgaSwgZS5fa2V5LCBzLCBuZXcga3Uobi5oYXNQZW5kaW5nV3JpdGVzLCBuLmZyb21DYWNoZSksIGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovIGNsYXNzIFBoIGV4dGVuZHMgY2xhc3Mge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl90cmFuc2FjdGlvbiA9IGUsIHRoaXMuX2RhdGFSZWFkZXIgPSBodSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IGFoKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoWyBlLl9rZXkgXSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQgfHwgMSAhPT0gdC5sZW5ndGgpIHJldHVybiBMKCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdFswXTtcbiAgICAgICAgICAgIGlmIChzLmlzRm91bmREb2N1bWVudCgpKSByZXR1cm4gbmV3IER1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgcy5rZXksIHMsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChzLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IER1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCBudWxsLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBvaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBsdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChzLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICBjb25zdCBpID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgWmMgPyBwdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogeXUodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShlLl9rZXkpLCB0aGlzO1xuICAgIH1cbn0ge1xuICAgIC8vIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgVHJhbnNhY3Rpb24gQVBJIGluIHRoZSBMaXRlIFNES1xuICAgIC8vIGJ1dCBpcyBzdWJjbGFzc2VkIGluIG9yZGVyIHRvIHJldHVybiBpdHMgb3duIERvY3VtZW50U25hcHNob3QgdHlwZXMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLl9maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgbGgodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldCh0KS50aGVuKCh0ID0+IG5ldyB4dSh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgdC5fZG9jdW1lbnQsIG5ldyBrdShcbiAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gITEsIFxuICAgICAgICAvKiBmcm9tQ2FjaGU9ICovICExKSwgZS5jb252ZXJ0ZXIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBgdXBkYXRlRnVuY3Rpb25gIGFuZCB0aGVuIGF0dGVtcHRzIHRvIGNvbW1pdCB0aGUgY2hhbmdlc1xuICogYXBwbGllZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uLiBJZiBhbnkgZG9jdW1lbnQgcmVhZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBoYXMgY2hhbmdlZCwgQ2xvdWQgRmlyZXN0b3JlIHJldHJpZXMgdGhlIGB1cGRhdGVGdW5jdGlvbmAuIElmIGl0IGZhaWxzIHRvXG4gKiBjb21taXQgYWZ0ZXIgNSBhdHRlbXB0cywgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLlxuICpcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBpcyA1MDAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgZGF0YWJhc2UgdG8gcnVuIHRoaXNcbiAqIHRyYW5zYWN0aW9uIGFnYWluc3QuXG4gKiBAcGFyYW0gdXBkYXRlRnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBjb250ZXh0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBiaCh0LCBlKSB7XG4gICAgcmV0dXJuIHVjKEJjKHQgPSBUYyh0LCBPYykpLCAobiA9PiBlKG5ldyBQaCh0LCBuKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gdmgoKSB7XG4gICAgcmV0dXJuIG5ldyBmdShcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBWaCgpIHtcbiAgICByZXR1cm4gbmV3IHd1KFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBTaCguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IF91KFwiYXJyYXlVbmlvblwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gRGgoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBtdShcImFycmF5UmVtb3ZlXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gQ2godCkge1xuICAgIHJldHVybiBuZXcgZ3UoXCJpbmNyZW1lbnRcIiwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiBOaCh0KSB7XG4gICAgcmV0dXJuIEJjKHQgPSBUYyh0LCBPYykpLCBuZXcgY2godCwgKGUgPT4gQWgodCwgZSkpKTtcbn1cblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyAhZnVuY3Rpb24odCwgZSA9ICEwKSB7XG4gICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgQyA9IHQ7XG4gICAgfShTREtfVkVSU0lPTiksIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiZmlyZXN0b3JlXCIsICgodCwge29wdGlvbnM6IG59KSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLCBpID0gbmV3IE9jKHMsIG5ldyBIKHQuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpKSwgbmV3IFoodC5nZXRQcm92aWRlcihcImFwcC1jaGVjay1pbnRlcm5hbFwiKSkpO1xuICAgICAgICByZXR1cm4gbiA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdXNlRmV0Y2hTdHJlYW1zOiBlXG4gICAgICAgIH0sIG4pLCBpLl9zZXRTZXR0aW5ncyhuKSwgaTtcbiAgICB9KSwgXCJQVUJMSUNcIikpLCByZWdpc3RlclZlcnNpb24oUywgXCIzLjQuMVwiLCB0KSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oUywgXCIzLjQuMVwiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IHJoIGFzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIGV1IGFzIEJ5dGVzLCBGYyBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgdmMgYXMgQ29sbGVjdGlvblJlZmVyZW5jZSwgUGMgYXMgRG9jdW1lbnRSZWZlcmVuY2UsIHh1IGFzIERvY3VtZW50U25hcHNob3QsIFpjIGFzIEZpZWxkUGF0aCwgbnUgYXMgRmllbGRWYWx1ZSwgT2MgYXMgRmlyZXN0b3JlLCBqIGFzIEZpcmVzdG9yZUVycm9yLCBzdSBhcyBHZW9Qb2ludCwgJGMgYXMgTG9hZEJ1bmRsZVRhc2ssIGJjIGFzIFF1ZXJ5LCBCdSBhcyBRdWVyeUNvbnN0cmFpbnQsICR1IGFzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgRnUgYXMgUXVlcnlTbmFwc2hvdCwga3UgYXMgU25hcHNob3RNZXRhZGF0YSwgYXQgYXMgVGltZXN0YW1wLCBQaCBhcyBUcmFuc2FjdGlvbiwgY2ggYXMgV3JpdGVCYXRjaCwgZGMgYXMgX0RhdGFiYXNlSWQsIFN0IGFzIF9Eb2N1bWVudEtleSwgdHQgYXMgX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyLCBHIGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBfdCBhcyBfRmllbGRQYXRoLCBUYyBhcyBfY2FzdCwgVSBhcyBfZGVidWdBc3NlcnQsIGd0IGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgTyBhcyBfbG9nV2FybiwgbWMgYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIFRoIGFzIGFkZERvYywgRGggYXMgYXJyYXlSZW1vdmUsIFNoIGFzIGFycmF5VW5pb24sIFFjIGFzIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIFZjIGFzIGNvbGxlY3Rpb24sIFNjIGFzIGNvbGxlY3Rpb25Hcm91cCwgUmMgYXMgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBwaCBhcyBkZWxldGVEb2MsIHZoIGFzIGRlbGV0ZUZpZWxkLCB6YyBhcyBkaXNhYmxlTmV0d29yaywgRGMgYXMgZG9jLCB0dSBhcyBkb2N1bWVudElkLCBxYyBhcyBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgS2MgYXMgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgR2MgYXMgZW5hYmxlTmV0d29yaywgdGggYXMgZW5kQXQsIFp1IGFzIGVuZEJlZm9yZSwgQmMgYXMgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgQWggYXMgZXhlY3V0ZVdyaXRlLCBoaCBhcyBnZXREb2MsIGZoIGFzIGdldERvY0Zyb21DYWNoZSwgZGggYXMgZ2V0RG9jRnJvbVNlcnZlciwgd2ggYXMgZ2V0RG9jcywgX2ggYXMgZ2V0RG9jc0Zyb21DYWNoZSwgbWggYXMgZ2V0RG9jc0Zyb21TZXJ2ZXIsIExjIGFzIGdldEZpcmVzdG9yZSwgQ2ggYXMgaW5jcmVtZW50LCBNYyBhcyBpbml0aWFsaXplRmlyZXN0b3JlLCBHdSBhcyBsaW1pdCwgenUgYXMgbGltaXRUb0xhc3QsIEpjIGFzIGxvYWRCdW5kbGUsIFljIGFzIG5hbWVkUXVlcnksIEVoIGFzIG9uU25hcHNob3QsIEloIGFzIG9uU25hcHNob3RzSW5TeW5jLCBRdSBhcyBvcmRlckJ5LCBVdSBhcyBxdWVyeSwgTmMgYXMgcXVlcnlFcXVhbCwgQ2MgYXMgcmVmRXF1YWwsIGJoIGFzIHJ1blRyYW5zYWN0aW9uLCBWaCBhcyBzZXJ2ZXJUaW1lc3RhbXAsIGdoIGFzIHNldERvYywgeCBhcyBzZXRMb2dMZXZlbCwgTXUgYXMgc25hcHNob3RFcXVhbCwgWXUgYXMgc3RhcnRBZnRlciwgSnUgYXMgc3RhcnRBdCwgSGMgYXMgdGVybWluYXRlLCB5aCBhcyB1cGRhdGVEb2MsIFdjIGFzIHdhaXRGb3JQZW5kaW5nV3JpdGVzLCBLdSBhcyB3aGVyZSwgTmggYXMgd3JpdGVCYXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IHJlbmRlclRvZG8gfSBmcm9tIFwiLi9yZW5kZXJUb2RvLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MgfSBmcm9tIFwiLi9jcmVhdGVFbGVtZW50LmpzXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcblxyXG5mdW5jdGlvbiByZW5kZXJQcm9qZWN0SGVhZGVyKHByb2plY3RJZCkge1xyXG4gICAgY2xlYXJQcm9qZWN0c1VJKCk7XHJcbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiaDJcIiwgXCJwcm9qZWN0X190aXRsZVwiKTtcclxuICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RJZDtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG4gICAgY29uc3QgdG9kb3MgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwic2VjdGlvblwiLCBcInRvZG9zXCIpO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RUaXRsZSk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodG9kb3MpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyUHJvamVjdFVJKHByb2plY3RzKSB7XHJcbiAgICBwcm9qZWN0cy5tYXAocHJvamVjdCA9PiB7XHJcbiAgICAgICAgY29uc3QgdG9kb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zXCIpO1xyXG4gICAgICAgIHRvZG9zLmFwcGVuZENoaWxkKFxyXG5cdFx0XHRcdFx0cmVuZGVyVG9kbyhcclxuXHRcdFx0XHRcdFx0cHJvamVjdC50aXRsZSxcclxuXHRcdFx0XHRcdFx0cHJvamVjdC5kZXNjcmlwdGlvbixcclxuXHRcdFx0XHRcdFx0cHJvamVjdC5kdWVEYXRlLFxyXG5cdFx0XHRcdFx0XHRwcm9qZWN0LnByaW9yaXR5LFxyXG5cdFx0XHRcdFx0XHRwcm9qZWN0LnByb2plY3QsXHJcblx0XHRcdFx0XHRcdHByb2plY3QuaWRcclxuXHRcdFx0XHRcdClcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2Rvcyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJQcm9qZWN0c1VJKCkge1xyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBbLi4uY29udGFpbmVyLmNoaWxkcmVuXTtcclxuICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgIGNoaWxkLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHJlbmRlclByb2plY3RVSSwgcmVuZGVyUHJvamVjdEhlYWRlciB9OyIsImltcG9ydCB7IHJlbmRlclRvZG8gfSBmcm9tIFwiLi9yZW5kZXJUb2RvLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MgfSBmcm9tIFwiLi9jcmVhdGVFbGVtZW50LmpzXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlclRhc2tzSGVhZGVyKHRhc2tJZCkge1xyXG4gIGNsZWFyVGFza3NVSSgpO1xyXG4gIGNvbnN0IHRhc2tUaXRsZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJoMlwiLCBcInRhc2tfX3RpdGxlXCIpO1xyXG4gIHRhc2tJZCA9PT0gXCJ0b2RheVwiID8gdGFza1RpdGxlLnRleHRDb250ZW50ID0gXCJEdWUgVG9kYXlcIiA6IHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRhc2tJZDtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuICBjb25zdCB0b2RvcyA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJzZWN0aW9uXCIsIFwidG9kb3NcIik7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tUaXRsZSk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyVGFza3NVSSh0YXNrcykge1xyXG4gIHRhc2tzLm1hcCgodGFzaykgPT4ge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0LCBpZCB9ID0gdGFzaztcclxuICAgIGNvbnN0IHRvZG9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2Rvc1wiKTtcclxuICAgIHRvZG9zLmFwcGVuZENoaWxkKFxyXG4gICAgICByZW5kZXJUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QsIGlkKVxyXG4gICAgKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2Rvcyk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVGFza3NVSSgpIHtcclxuICBjb25zdCBjaGlsZHJlbiA9IFsuLi5jb250YWluZXIuY2hpbGRyZW5dO1xyXG4gIGNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICBjaGlsZC5yZW1vdmUoKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IHsgcmVuZGVyVGFza3NVSSwgcmVuZGVyVGFza3NIZWFkZXIgfTtcclxuIiwiaW1wb3J0IHtcclxuICBjcmVhdGVFbGVtZW50V2l0aENsYXNzLFxyXG4gIGNyZWF0ZUlucHV0RWxlbWVudCxcclxuICAgIGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzLFxyXG4gIGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlXHJcbn0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBnZXRUb2RheXNEYXRlIH0gZnJvbSBcIi4vbW9kYWxcIjtcclxuaW1wb3J0IHsgZGVsZXRlSW5ib3hNZXNzYWdlLCBnZXRJbmJveCwgdXBkYXRlRG9jdW1lbnQgfSBmcm9tIFwiLi90b2RvXCI7XHJcblxyXG5sZXQgY291bnQgPSAwO1xyXG5cclxuZnVuY3Rpb24gc2hvd0luYm94KHRvZG9zKSB7XHJcbiAgY2xlYXJJbmJveFVJKCk7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgICBjb25zdCB0aXRsZSA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFwiaDJcIiwgXCJpbmJveF9fdGl0bGVcIiwgXCJJbmJveFwiKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgaWYgKHRvZG9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgY29uc3Qgc3RhdHVzID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICAgIFwicFwiLFxyXG4gICAgICBcImluYm94X19zdGF0dXNcIixcclxuICAgICAgXCJZb3VyIGluYm94IGlzIGVtcHR5XCJcclxuICAgICk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzKTtcclxuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICB9IGVsc2Uge1xyXG4gICAgdG9kb3MubWFwKCh0b2RvKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5ib3ggPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwiaW5ib3hcIik7XHJcbiAgICAgIGluYm94LnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIiwgdG9kby5pZCk7XHJcbiAgICAgIGNvbnN0IHN1YmplY3QgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwicFwiLCBcImluYm94X19zdWJqZWN0XCIpO1xyXG4gICAgICBpZiAodG9kby5kdWVEYXRlID09PSBnZXRUb2RheXNEYXRlKCkpIHtcclxuICAgICAgICBzdWJqZWN0LnRleHRDb250ZW50ID0gXCJZb3UgaGF2ZSBhIHRhc2sgdGhhdCdzIGR1ZSB0b2RheVwiO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHRvZG8uZHVlRGF0ZSA8IGdldFRvZGF5c0RhdGUoKSkge1xyXG4gICAgICAgIHN1YmplY3QudGV4dENvbnRlbnQgPSBcIllvdSBoYXZlIGEgdGFzayB0aGF0J3Mgb3ZlcmR1ZSFcIjtcclxuICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRyYXNoQnRuID0gY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcImJ1dHRvblwiLFxyXG4gICAgICAgICAgXCJ0b2RvX19kZWxldGVcIixcclxuICAgICAgICAgIFwiaWRcIixcclxuICAgICAgICAgIFwiZGVsZXRlXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IHRyYXNoSWNvbiA9IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoXCJpXCIsIFwiZmFzXCIpO1xyXG4gICAgICAgIHRyYXNoSWNvbi5jbGFzc0xpc3QuYWRkKFwiZmEtdHJhc2gtYWx0XCIpO1xyXG4gICAgICB0cmFzaEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZGVsZXRlTWVzc2FnZSh0b2RvLmlkLCBlLmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHJhc2hCdG4uYXBwZW5kQ2hpbGQodHJhc2hJY29uKTtcclxuICAgICAgICBpZiAodG9kby5zdGF0dXMgPT09IFwidW5yZWFkXCIpIHtcclxuICAgICAgICAgICAgc3ViamVjdC5jbGFzc0xpc3QuYWRkKFwiYm9sZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRvZG8uc3RhdHVzID09PSBcInJlYWRcIikge1xyXG4gICAgICAgICAgICBzdWJqZWN0LmNsYXNzTGlzdC5yZW1vdmUoXCJib2xkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgY29uc3QgY2hlY2tib3ggPSBjcmVhdGVJbnB1dEVsZW1lbnQoXHJcbiAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgIFwiY2hlY2tib3hcIixcclxuICAgICAgICBcImNoZWNrYm94XCIsXHJcbiAgICAgICAgXCJjaGVja2JveFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QuYWRkKFwiY2hlY2tib3hcIik7XHJcbiAgICAgICAgXHJcbiAgICAgIHN1YmplY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzaG93TWVzc2FnZSh0b2RvLCBzdWJqZWN0LnRleHRDb250ZW50LCB0b2Rvcyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpbmJveC5hcHBlbmRDaGlsZChjaGVja2JveCk7XHJcbiAgICAgICAgaW5ib3guYXBwZW5kQ2hpbGQoc3ViamVjdCk7XHJcbiAgICAgICAgaW5ib3guYXBwZW5kQ2hpbGQodHJhc2hCdG4pO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5ib3gpO1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWxldGVBbGwgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgICAgXCJidXR0b25cIixcclxuICAgICAgXCJpbmJveF9fYnV0dG9uXCIsXHJcbiAgICAgIFwiRGVsZXRlIFNlbGVjdGVkXCJcclxuICAgICk7XHJcbiAgICBkZWxldGVBbGwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgZGVsZXRlU2VsZWN0ZWQodG9kb3MpO1xyXG4gICAgfSk7XHJcbmNvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVBbGwpO1xyXG5cclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVTZWxlY3RlZCh0b2Rvcykge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgICBjb25zdCBraWRzID0gY29udGFpbmVyLmNoaWxkcmVuO1xyXG4gICAgY29uc3QgY29udGFpbmVyQ2hpbGRyZW4gPSBBcnJheS5mcm9tKGtpZHMpO1xyXG4gICAgY29udGFpbmVyQ2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuWzBdKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlblswXS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGVNZXNzYWdlKGNoaWxkLmRhdGFzZXQuaWQsIGNoaWxkKTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlblsxXS5jbGFzc0xpc3QuY29udGFpbnMoXCJib2xkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSW5ib3hDb3VudChcInN1YnRyYWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEluYm94KCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlTWVzc2FnZShpZCwgdG9kbykge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmJveFwiKTtcclxuICB0b2RvLnJlbW92ZSgpO1xyXG4gIGRlbGV0ZUluYm94TWVzc2FnZShpZCk7XHJcbiAgZ2V0SW5ib3goKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd01lc3NhZ2UodG9kbywgc3ViamVjdCwgdG9kb3MpIHtcclxuICBjbGVhckluYm94VUkoKTtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuICBjb25zdCBtZXNzYWdlID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcIm1lc3NhZ2VfX2NvbnRhaW5lclwiKTtcclxuICBjb25zdCBtZXNzYWdlU3ViamVjdCA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFxyXG4gICAgXCJoM1wiLFxyXG4gICAgXCJtZXNzYWdlX19zdWJqZWN0XCIsXHJcbiAgICBzdWJqZWN0XHJcbiAgKTtcclxuICBjb25zdCBtZXNzYWdlVGl0bGUgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgIFwicFwiLFxyXG4gICAgXCJtZXNzYWdlX190aXRsZVwiLFxyXG4gICAgdG9kby50aXRsZVxyXG4gICk7XHJcbiAgY29uc3QgbWVzc2FnZVByaW9yaXR5ID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICBcInBcIixcclxuICAgIFwibWVzc2FnZV9fcHJpb3JpdHlcIixcclxuICAgIHRvZG8ucHJpb3JpdHlcclxuICApO1xyXG4gIGNvbnN0IG1lc3NhZ2VEdWVEYXRlID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICBcInBcIixcclxuICAgIFwibWVzc2FnZV9fZGF0ZVwiLFxyXG4gICAgdG9kby5kdWVEYXRlXHJcbiAgKTtcclxuICBjb25zdCBtZXNzYWdlRGVzY3JpcHRpb24gPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgIFwicFwiLFxyXG4gICAgXCJtZXNzYWdlX19kZXNjcmlwdGlvblwiLFxyXG4gICAgdG9kby5kZXNjcmlwdGlvblxyXG4gICk7XHJcbiAgY29uc3QgYmFja1RvSW5ib3ggPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcclxuICAgIFwiYnV0dG9uXCIsXHJcbiAgICBcImluYm94X19idXR0b25cIixcclxuICAgIFwiQmFjayBUbyBJbmJveFwiXHJcbiAgICApO1xyXG4gICAgYmFja1RvSW5ib3guY2xhc3NMaXN0LmFkZChcImJ1dHRvblwiKTtcclxuICAgIGJhY2tUb0luYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZ2V0SW5ib3goKTtcclxuICAgIH0pO1xyXG4gIG1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZVN1YmplY3QpO1xyXG4gIG1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZVRpdGxlKTtcclxuICBtZXNzYWdlLmFwcGVuZENoaWxkKG1lc3NhZ2VQcmlvcml0eSk7XHJcbiAgbWVzc2FnZS5hcHBlbmRDaGlsZChtZXNzYWdlRHVlRGF0ZSk7XHJcbiAgbWVzc2FnZS5hcHBlbmRDaGlsZChtZXNzYWdlRGVzY3JpcHRpb24pO1xyXG4gIG1lc3NhZ2UuYXBwZW5kQ2hpbGQoYmFja1RvSW5ib3gpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlKTtcclxuICAgIHVwZGF0ZUluYm94Q291bnQoXCJzdWJ0cmFjdFwiKTtcclxuICB0b2RvLnN0YXR1cyA9IFwicmVhZFwiO1xyXG4gIHVwZGF0ZURvY3VtZW50KHRvZG8udGl0bGUsIHRvZG8uZGVzY3JpcHRpb24sIHRvZG8uZHVlRGF0ZSwgdG9kby5wcmlvcml0eSwgdG9kby5wcm9qZWN0LCBTdHJpbmcodG9kby5pZCksIHRvZG8uc3RhdHVzKTtcclxuICBjb25zb2xlLmxvZyh0b2RvKTtcclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhckluYm94VUkoKSB7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXJcIik7XHJcbiAgY29uc3QgY2hpbGRyZW4gPSBbLi4uY29udGFpbmVyLmNoaWxkcmVuXTtcclxuICBjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgY2hpbGQucmVtb3ZlKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUluYm94Q291bnQoc3RhdHVzKSB7XHJcbiAgY29uc3QgYmFja2dyb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibnVtYmVyXCIpO1xyXG4gIGNvbnN0IGNvdW50VUkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdW50XCIpO1xyXG4gIGlmIChzdGF0dXMgPT09IFwiYWRkXCIpIHtcclxuICAgIGNvdW50Kys7XHJcbiAgICBjb3VudFVJLnRleHRDb250ZW50ID0gY291bnQ7XHJcbiAgICBiYWNrZ3JvdW5kLmNsYXNzTGlzdC5hZGQoXCJudW1iZXJcIik7XHJcbiAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFwic3VidHJhY3RcIikge1xyXG4gICAgY291bnQtLTtcclxuICAgIGlmIChjb3VudCA8IDEpIHtcclxuICAgICAgY291bnQgPT09IDA7XHJcbiAgICAgIGNvdW50VUkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICBiYWNrZ3JvdW5kLmNsYXNzTGlzdC5yZW1vdmUoXCJudW1iZXJcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudFVJLnRleHRDb250ZW50ID0gY291bnQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBzaG93SW5ib3gsIHVwZGF0ZUluYm94Q291bnQgfTtcclxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cclxuICovXHJcbmNvbnN0IENPTlNUQU5UUyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXHJcbiAgICAgKi9cclxuICAgIFNES19WRVJTSU9OOiAnJHtKU0NPUkVfVkVSU0lPTn0nXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHByb3ZpZGVkIGFzc2VydGlvbiBpcyBmYWxzeVxyXG4gKi9cclxuY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cclxuICovXHJcbmNvbnN0IGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHBvcyA9IDAsIGMgPSAwO1xyXG4gICAgd2hpbGUgKHBvcyA8IGJ5dGVzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDIzOSAmJiBjMSA8IDM2NSkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGM0ID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cclxuICAgICAgICAgICAgICAgIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQuam9pbignJyk7XHJcbn07XHJcbi8vIFdlIGRlZmluZSBpdCBhcyBhbiBvYmplY3QgbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY2xhc3MgYmVjYXVzZSBhIGNsYXNzIGNvbXBpbGVkIGRvd24gdG8gZXM1IGNhbid0XHJcbi8vIGJlIHRyZWVzaGFrZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy8xNjkxXHJcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXHJcbmNvbnN0IGJhc2U2NCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byBjaGFyYWN0ZXJzLlxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cclxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcclxuICAgICAqL1xyXG4gICAgRU5DT0RFRF9WQUxTX0JBU0U6ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXHJcbiAgICAgKiBzdGFydGVkIGF0IE1vemlsbGEgYnV0IGlzIG5vdyBpbXBsZW1lbnRlZCBieSBtYW55IGJyb3dzZXJzLiBXZSB1c2UgdGhlXHJcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcclxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxyXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gaW5wdXRbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgKyAyIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGU0ID0gYnl0ZTMgJiAweDNmO1xyXG4gICAgICAgICAgICBpZiAoIWhhdmVCeXRlMykge1xyXG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcclxuICAgICAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChieXRlVG9DaGFyTWFwW291dEJ5dGUxXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLCBieXRlVG9DaGFyTWFwW291dEJ5dGU0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbignJyk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBJZiB0cnVlLCB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkkMShpbnB1dCksIHdlYlNhZmUpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxyXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxyXG4gICAgICogYmUgYSBtdWx0aXBsZSBvZiA0LlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcclxuICAgICAqIHBhZGRpbmcgd2lsbCBiZSBpbmZlcnJlZC4gIElmIHRoZSBncm91cCBoYXMgb25lIG9yIHR3byBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzXHJcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgY2hhclRvQnl0ZU1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXHJcbiAqL1xyXG5jb25zdCBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheSQxKHN0cik7XHJcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nICh3aXRob3V0IFwiLlwiIHBhZGRpbmcgaW4gdGhlIGVuZCkuXHJcbiAqIGUuZy4gVXNlZCBpbiBKU09OIFdlYiBUb2tlbiAoSldUKSBwYXJ0cy5cclxuICovXHJcbmNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVXNlIGJhc2U2NHVybCBlbmNvZGluZyBhbmQgcmVtb3ZlIHBhZGRpbmcgaW4gdGhlIGVuZCAoZG90IGNoYXJhY3RlcnMpLlxyXG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShzdHIpLnJlcGxhY2UoL1xcLi9nLCAnJyk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbmNvbnN0IGJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XHJcbn1cclxuLyoqXHJcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cclxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxyXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXHJcbiAqIChhbmQgcmV0dXJuZWQpLlxyXG4gKlxyXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cclxuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXHJcbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXHJcbiAqXHJcbiAqIE5vdGU6IHdlIGRvbid0IG1lcmdlIF9fcHJvdG9fXyB0byBwcmV2ZW50IHByb3RvdHlwZSBwb2xsdXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlID0gc291cmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgY2FzZSBPYmplY3Q6XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBBcnJheTpcclxuICAgICAgICAgICAgLy8gQWx3YXlzIGNvcHkgdGhlIGFycmF5IHNvdXJjZSBhbmQgb3ZlcndyaXRlIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgICAgIHRhcmdldCA9IFtdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcclxuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcclxuICAgICAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSB8fCAhaXNWYWxpZEtleShwcm9wKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XHJcbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XHJcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XHJcbiAqIGlmIGVycm9ycyBvY2N1ciBkdXJpbmcgdGhlIGRhdGFiYXNlIG9wZW4gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XHJcbiAqIHByaXZhdGUgYnJvd3NpbmcpXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBEQl9DSEVDS19OQU1FID0gJ3ZhbGlkYXRlLWJyb3dzZXItY29udGV4dC1mb3ItaW5kZXhlZGRiLWFuYWx5dGljcy1tb2R1bGUnO1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRhdGFiYXNlIG9ubHkgd2hlbiBpdCBkb2Vzbid0IHByZS1leGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3QuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlKSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3Mgd2hldGhlciBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqL1xyXG5mdW5jdGlvbiBhcmVDb29raWVzRW5hYmxlZCgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHRoZSBgZ2xvYmFsVGhpc2Agb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKGUuY29kZSA9PT0gJ3NlcnZpY2UvZmlsZS1ub3QtZm91bmQnKSB7XHJcbiAqICAgICAgIGNvbnNvbGUubG9nKFwiQ291bGQgbm90IHJlYWQgZmlsZTogXCIgKyBlWydmaWxlJ10pO1xyXG4gKiAgICAgfVxyXG4gKiAgIH1cclxuICovXHJcbmNvbnN0IEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjQ3VzdG9tX0Vycm9yX1R5cGVzXHJcbmNsYXNzIEZpcmViYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb2RlLCBtZXNzYWdlLCBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHZhbGlkYXRlQXJnQ291bnQsIHZhbGlkYXRlQ2FsbGJhY2ssIHZhbGlkYXRlQ29udGV4dE9iamVjdCwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgdmFsaWRhdGVOYW1lc3BhY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxyXG4gICAgICogQHBhcmFtIHR5cGUgd2hldGhlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUZhY3RvcnkgPSBpbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBMQVpZICovO1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFudGlhdGlvbk1vZGUobW9kZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0TXVsdGlwbGVJbnN0YW5jZXMobXVsdGlwbGVJbnN0YW5jZXMpIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRTZXJ2aWNlUHJvcHMocHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG5jbGFzcyBQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWxpdHBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXHJcbiAgICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxyXG4gICAgICovXHJcbiAgICBnZXQoaWRlbnRpZmllcikge1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZGVmZXJyZWQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBzZXJ2aWNlIGlmIGl0IGNhbiBiZSBhdXRvLWluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBnZXRJbW1lZGlhdGUob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbmFsID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9wdGlvbmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaXMgbm90IGluaXRpYWxpemVkIGFuZCBzaG91bGQvY2FuIG5vdCBiZSBhdXRvLWluaXRpYWxpemVkIGF0IHRoZSBtb21lbnQsIHJldHVybiBudWxsIGlmIHRoZSBvcHRpb25hbCBmbGFnIGlzIHNldCwgb3IgdGhyb3dcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBTZXJ2aWNlICR7dGhpcy5uYW1lfSBpcyBub3QgYXZhaWxhYmxlYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRDb21wb25lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0Q29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNtYXRjaGluZyBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZm9yIFByb3ZpZGVyICR7dGhpcy5uYW1lfS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgZm9yICR7dGhpcy5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXHJcbiAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xlYXJJbnN0YW5jZShpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcclxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xyXG4gICAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdJTlRFUk5BTCcgaW4gc2VydmljZSkgLy8gbGVnYWN5IHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCkpLFxyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdfZGVsZXRlJyBpbiBzZXJ2aWNlKSAvLyBtb2R1bGFyaXplZCBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLl9kZWxldGUoKSlcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIGlzQ29tcG9uZW50U2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaXNJbml0aWFsaXplZChpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmhhcyhpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIGdldE9wdGlvbnMoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc09wdGlvbnMuZ2V0KGlkZW50aWZpZXIpIHx8IHt9O1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShvcHRzID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSB7fSB9ID0gb3B0cztcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdHMuaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgJHt0aGlzLm5hbWV9KCR7bm9ybWFsaXplZElkZW50aWZpZXJ9KSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgJHt0aGlzLm5hbWV9IGhhcyBub3QgYmVlbiByZWdpc3RlcmVkIHlldGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXIsXHJcbiAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZElkZW50aWZpZXIgPT09IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCAgYWZ0ZXIgdGhlIHByb3ZpZGVyIGhhcyBiZWVuIGluaXRpYWxpemVkIGJ5IGNhbGxpbmcgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpLlxyXG4gICAgICogVGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgU1lOQ0hST05PVVNMWSwgc28gaXQgc2hvdWxkIG5vdCBleGVjdXRlIGFueSBsb25ncnVubmluZyB0YXNrcyBpbiBvcmRlciB0byBub3QgYmxvY2sgdGhlIHByb2dyYW0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gb3B0aW9uYWwgaW5zdGFuY2UgaWRlbnRpZmllclxyXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBvbkluaXQoY2FsbGJhY2ssIGlkZW50aWZpZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0NhbGxiYWNrcyA9IChfYSA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTZXQoKTtcclxuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZXhpc3RpbmdDYWxsYmFja3MpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGV4aXN0aW5nSW5zdGFuY2UsIG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXHJcbiAgICAgKi9cclxuICAgIGludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaWRlbnRpZmllcikge1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluaXQgY2FsbGJhY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMgPSB7fSB9KSB7XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuY29tcG9uZW50Lmluc3RhbmNlRmFjdG9yeSh0aGlzLmNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICogTm90ZSB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCBpcyBkaWZmZXJlbnQsIHdoaWNoIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCBjcmVhdG9yLFxyXG4gICAgICAgICAgICAgKiB3aGlsZSBvbkluaXQgbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkIGJ5IGNvbnN1bWVycyBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxyXG4gICAgICAgICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxyXG4gICAgICAgICAgICAgKiBtYWtlcyBgaXNJbml0aWFsaXplZCgpYCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluc3RhbmNlQ3JlYXRlZENhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG91bGRBdXRvSW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICByZXR1cm4gKCEhdGhpcy5jb21wb25lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgIT09IFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLyk7XHJcbiAgICB9XHJcbn1cclxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xyXG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XHJcbn1cclxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBFQUdFUiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50Q29udGFpbmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggJHt0aGlzLm5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIGV4aXN0aW5nIHByb3ZpZGVyIGZyb20gdGhlIGNvbnRhaW5lciwgc28gd2UgY2FuIHJlZ2lzdGVyIHRoZSBuZXcgY29tcG9uZW50XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJzLmRlbGV0ZShjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFByb3ZpZGVyKG5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVycy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9XHJcbiAgICBnZXRQcm92aWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XHJcbiAgICAnZGVidWcnOiBMb2dMZXZlbC5ERUJVRyxcclxuICAgICd2ZXJib3NlJzogTG9nTGV2ZWwuVkVSQk9TRSxcclxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcclxuICAgICd3YXJuJzogTG9nTGV2ZWwuV0FSTixcclxuICAgICdlcnJvcic6IExvZ0xldmVsLkVSUk9SLFxyXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gKi9cclxuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcclxuICAgIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLlZFUkJPU0VdOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxyXG4gICAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXHJcbiAgICBbTG9nTGV2ZWwuRVJST1JdOiAnZXJyb3InXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSBDb25zb2xlTWV0aG9kW2xvZ1R5cGVdO1xyXG4gICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICAgIGNvbnNvbGVbbWV0aG9kXShgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogJHtsb2dUeXBlfSlgKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3B0aW9uYWwsIGFkZGl0aW9uYWwsIHVzZXItZGVmaW5lZCBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0xldmVsO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIGlmICghKHZhbCBpbiBMb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cclxuICAgIHNldExvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlckxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IHVzZXJMb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgZGVidWcoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGxvZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGluZm8oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICB3YXJuKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XHJcbiAgICAgICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICBsZXQgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGV2ZWwpIHtcclxuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGFyZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+PSAoY3VzdG9tTG9nTGV2ZWwgIT09IG51bGwgJiYgY3VzdG9tTG9nTGV2ZWwgIT09IHZvaWQgMCA/IGN1c3RvbUxvZ0xldmVsIDogaW5zdGFuY2UubG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZGVlcEVxdWFsIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuNy4xMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjYuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwO1xyXG59XHJcbi8qKlxyXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXHJcbiAqIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGRlbGV0ZUFwcChhcHApXHJcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICogICB9KVxyXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcclxuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcclxuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcclxuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xyXG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cclxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcclxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxyXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGAke2xpYnJhcnl9LXZlcnNpb25gLCAoKSA9PiAoeyBsaWJyYXJ5LCB2ZXJzaW9uIH0pLCBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHModmFyaWFudCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCB2YXJpYW50KTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsICdlc20yMDE3Jyk7XHJcbiAgICAvLyBSZWdpc3RlciBwbGF0Zm9ybSBTREsgaWRlbnRpZmllciAobm8gdmVyc2lvbikuXHJcbiAgICByZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XHJcbn1cblxuLyoqXHJcbiAqIEZpcmViYXNlIEFwcFxyXG4gKlxyXG4gKiBAcmVtYXJrcyBUaGlzIHBhY2thZ2UgY29vcmRpbmF0ZXMgdGhlIGNvbW11bmljYXRpb24gYmV0d2VlbiB0aGUgZGlmZmVyZW50IEZpcmViYXNlIGNvbXBvbmVudHNcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5yZWdpc3RlckNvcmVDb21wb25lbnRzKCcnKTtcblxuZXhwb3J0IHsgU0RLX1ZFUlNJT04sIERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FLCBfYWRkQ29tcG9uZW50LCBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQsIF9hcHBzLCBfY2xlYXJDb21wb25lbnRzLCBfY29tcG9uZW50cywgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIGRlbGV0ZUFwcCwgZ2V0QXBwLCBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBvbkxvZywgcmVnaXN0ZXJWZXJzaW9uLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuIiwiaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBkZWVwRXF1YWwsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNNb2JpbGVDb3Jkb3ZhLCBpc1JlYWN0TmF0aXZlLCBGaXJlYmFzZUVycm9yLCBxdWVyeXN0cmluZywgZ2V0TW9kdWxhckluc3RhbmNlLCBiYXNlNjREZWNvZGUsIGdldFVBLCBpc0lFLCBjcmVhdGVTdWJzY3JpYmUsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBleHRyYWN0UXVlcnlzdHJpbmcsIGlzRW1wdHkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBTREtfVkVSU0lPTiwgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgZ2V0QXBwIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBfX3Jlc3QgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGVudW0gb2YgZmFjdG9ycyB0aGF0IG1heSBiZSB1c2VkIGZvciBtdWx0aWZhY3RvciBhdXRoZW50aWNhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgRmFjdG9ySWQgPSB7XHJcbiAgICAvKiogUGhvbmUgYXMgc2Vjb25kIGZhY3RvciAqL1xyXG4gICAgUEhPTkU6ICdwaG9uZSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBwcm92aWRlcnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFByb3ZpZGVySWQgPSB7XHJcbiAgICAvKiogRmFjZWJvb2sgcHJvdmlkZXIgSUQgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgcHJvdmlkZXIgSUQgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBwcm92aWRlciBJRCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGFzc3dvcmQgcHJvdmlkZXIgKi9cclxuICAgIFBBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIFBob25lIHByb3ZpZGVyICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHByb3ZpZGVyIElEICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgc2lnbi1pbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTaWduSW5NZXRob2QgPSB7XHJcbiAgICAvKiogRW1haWwgbGluayBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfTElOSzogJ2VtYWlsTGluaycsXHJcbiAgICAvKiogRW1haWwvcGFzc3dvcmQgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEVNQUlMX1BBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIEZhY2Vib29rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBGQUNFQk9PSzogJ2ZhY2Vib29rLmNvbScsXHJcbiAgICAvKiogR2l0SHViIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBHSVRIVUI6ICdnaXRodWIuY29tJyxcclxuICAgIC8qKiBHb29nbGUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdPT0dMRTogJ2dvb2dsZS5jb20nLFxyXG4gICAgLyoqIFBob25lIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgb3BlcmF0aW9uIHR5cGVzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBPcGVyYXRpb25UeXBlID0ge1xyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgbGlua2luZyBhbiBhZGRpdGlvbmFsIHByb3ZpZGVyIHRvIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBMSU5LOiAnbGluaycsXHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyB1c2luZyBhIHByb3ZpZGVyIHRvIHJlYXV0aGVudGljYXRlIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBSRUFVVEhFTlRJQ0FURTogJ3JlYXV0aGVudGljYXRlJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHNpZ25pbmcgaW4gYSB1c2VyLiAqL1xyXG4gICAgU0lHTl9JTjogJ3NpZ25JbidcclxufTtcclxuLyoqXHJcbiAqIEFuIGVudW1lcmF0aW9uIG9mIHRoZSBwb3NzaWJsZSBlbWFpbCBhY3Rpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEFjdGlvbkNvZGVPcGVyYXRpb24gPSB7XHJcbiAgICAvKiogVGhlIGVtYWlsIGxpbmsgc2lnbi1pbiBhY3Rpb24uICovXHJcbiAgICBFTUFJTF9TSUdOSU46ICdFTUFJTF9TSUdOSU4nLFxyXG4gICAgLyoqIFRoZSBwYXNzd29yZCByZXNldCBhY3Rpb24uICovXHJcbiAgICBQQVNTV09SRF9SRVNFVDogJ1BBU1NXT1JEX1JFU0VUJyxcclxuICAgIC8qKiBUaGUgZW1haWwgcmV2b2NhdGlvbiBhY3Rpb24uICovXHJcbiAgICBSRUNPVkVSX0VNQUlMOiAnUkVDT1ZFUl9FTUFJTCcsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiAnUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04nLFxyXG4gICAgLyoqIFRoZSByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvbiBlbWFpbCBhY3Rpb24uICovXHJcbiAgICBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTDogJ1ZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgZW1haWwgdmVyaWZpY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9FTUFJTDogJ1ZFUklGWV9FTUFJTCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2RlYnVnRXJyb3JNYXAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgcmVzdHJpY3RlZCB0byBhZG1pbmlzdHJhdG9ycyBvbmx5LicsXHJcbiAgICAgICAgW1wiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqL106ICcnLFxyXG4gICAgICAgIFtcImFwcC1ub3QtYXV0aG9yaXplZFwiIC8qIEFQUF9OT1RfQVVUSE9SSVpFRCAqL106IFwiVGhpcyBhcHAsIGlkZW50aWZpZWQgYnkgdGhlIGRvbWFpbiB3aGVyZSBpdCdzIGhvc3RlZCwgaXMgbm90IFwiICtcclxuICAgICAgICAgICAgJ2F1dGhvcml6ZWQgdG8gdXNlIEZpcmViYXNlIEF1dGhlbnRpY2F0aW9uIHdpdGggdGhlIHByb3ZpZGVkIEFQSSBrZXkuICcgK1xyXG4gICAgICAgICAgICAnUmV2aWV3IHlvdXIga2V5IGNvbmZpZ3VyYXRpb24gaW4gdGhlIEdvb2dsZSBBUEkgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImFwcC1ub3QtaW5zdGFsbGVkXCIgLyogQVBQX05PVF9JTlNUQUxMRUQgKi9dOiAnVGhlIHJlcXVlc3RlZCBtb2JpbGUgYXBwbGljYXRpb24gY29ycmVzcG9uZGluZyB0byB0aGUgaWRlbnRpZmllciAoJyArXHJcbiAgICAgICAgICAgICdBbmRyb2lkIHBhY2thZ2UgbmFtZSBvciBpT1MgYnVuZGxlIElEKSBwcm92aWRlZCBpcyBub3QgaW5zdGFsbGVkIG9uICcgK1xyXG4gICAgICAgICAgICAndGhpcyBkZXZpY2UuJyxcclxuICAgICAgICBbXCJjYXB0Y2hhLWNoZWNrLWZhaWxlZFwiIC8qIENBUFRDSEFfQ0hFQ0tfRkFJTEVEICovXTogJ1RoZSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQsIGV4cGlyZWQsICcgK1xyXG4gICAgICAgICAgICAnYWxyZWFkeSB1c2VkIG9yIHRoZSBkb21haW4gYXNzb2NpYXRlZCB3aXRoIGl0IGRvZXMgbm90IG1hdGNoIHRoZSBsaXN0ICcgK1xyXG4gICAgICAgICAgICAnb2Ygd2hpdGVsaXN0ZWQgZG9tYWlucy4nLFxyXG4gICAgICAgIFtcImNvZGUtZXhwaXJlZFwiIC8qIENPREVfRVhQSVJFRCAqL106ICdUaGUgU01TIGNvZGUgaGFzIGV4cGlyZWQuIFBsZWFzZSByZS1zZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB0cnkgJyArXHJcbiAgICAgICAgICAgICdhZ2Fpbi4nLFxyXG4gICAgICAgIFtcImNvcmRvdmEtbm90LXJlYWR5XCIgLyogQ09SRE9WQV9OT1RfUkVBRFkgKi9dOiAnQ29yZG92YSBmcmFtZXdvcmsgaXMgbm90IHJlYWR5LicsXHJcbiAgICAgICAgW1wiY29ycy11bnN1cHBvcnRlZFwiIC8qIENPUlNfVU5TVVBQT1JURUQgKi9dOiAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuJyxcclxuICAgICAgICBbXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqL106ICdUaGlzIGNyZWRlbnRpYWwgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYSBkaWZmZXJlbnQgdXNlciBhY2NvdW50LicsXHJcbiAgICAgICAgW1wiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106ICdUaGUgY3VzdG9tIHRva2VuIGNvcnJlc3BvbmRzIHRvIGEgZGlmZmVyZW50IGF1ZGllbmNlLicsXHJcbiAgICAgICAgW1wicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIHNlbnNpdGl2ZSBhbmQgcmVxdWlyZXMgcmVjZW50IGF1dGhlbnRpY2F0aW9uLiBMb2cgaW4gJyArXHJcbiAgICAgICAgICAgICdhZ2FpbiBiZWZvcmUgcmV0cnlpbmcgdGhpcyByZXF1ZXN0LicsXHJcbiAgICAgICAgW1wiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqL106ICdBbm90aGVyIEZpcmViYXNlIFNESyB3YXMgaW5pdGlhbGl6ZWQgYW5kIGlzIHRyeWluZyB0byB1c2UgQXV0aCBiZWZvcmUgQXV0aCBpcyAnICtcclxuICAgICAgICAgICAgJ2luaXRpYWxpemVkLiBQbGVhc2UgYmUgc3VyZSB0byBjYWxsIGBpbml0aWFsaXplQXV0aGAgb3IgYGdldEF1dGhgIGJlZm9yZSAnICtcclxuICAgICAgICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJyxcclxuICAgICAgICBbXCJkeW5hbWljLWxpbmstbm90LWFjdGl2YXRlZFwiIC8qIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEICovXTogJ1BsZWFzZSBhY3RpdmF0ZSBEeW5hbWljIExpbmtzIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlIGFuZCBhZ3JlZSB0byB0aGUgdGVybXMgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29uZGl0aW9ucy4nLFxyXG4gICAgICAgIFtcImVtYWlsLWNoYW5nZS1uZWVkcy12ZXJpZmljYXRpb25cIiAvKiBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OICovXTogJ011bHRpLWZhY3RvciB1c2VycyBtdXN0IGFsd2F5cyBoYXZlIGEgdmVyaWZpZWQgZW1haWwuJyxcclxuICAgICAgICBbXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogRU1VTEFUT1JfQ09ORklHX0ZBSUxFRCAqL106ICdBdXRoIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBtYWtlIGEgbmV0d29yayBjYWxsLiBBdXRoIGNhbiAnICtcclxuICAgICAgICAgICAgJ25vIGxvbmdlciBiZSBjb25maWd1cmVkIHRvIHVzZSB0aGUgZW11bGF0b3IuIFRyeSBjYWxsaW5nICcgK1xyXG4gICAgICAgICAgICAnXCJjb25uZWN0QXV0aEVtdWxhdG9yKClcIiBzb29uZXIuJyxcclxuICAgICAgICBbXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqL106ICdUaGUgYWN0aW9uIGNvZGUgaGFzIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEVYUElSRURfUE9QVVBfUkVRVUVTVCAqL106ICdUaGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgZHVlIHRvIGFub3RoZXIgY29uZmxpY3RpbmcgcG9wdXAgYmVpbmcgb3BlbmVkLicsXHJcbiAgICAgICAgW1wiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfQVBQX0NSRURFTlRJQUwgKi9dOiAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGNvbnRhaW5zIGFuIGludmFsaWQgYXBwbGljYXRpb24gdmVyaWZpZXIuJyArXHJcbiAgICAgICAgICAgICcgVGhlIHJlQ0FQVENIQSB0b2tlbiByZXNwb25zZSBpcyBlaXRoZXIgaW52YWxpZCBvciBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtaWRcIiAvKiBJTlZBTElEX0FQUF9JRCAqL106ICdUaGUgbW9iaWxlIGFwcCBpZGVudGlmaWVyIGlzIG5vdCByZWdpc3RlZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqL106IFwiVGhpcyB1c2VyJ3MgY3JlZGVudGlhbCBpc24ndCB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0LiBUaGlzIGNhbiBoYXBwZW4gXCIgK1xyXG4gICAgICAgICAgICBcImlmIHRoZSB1c2VyJ3MgdG9rZW4gaGFzIGJlZW4gdGFtcGVyZWQgd2l0aCwgb3IgaWYgdGhlIHVzZXIgaXNuJ3QgZm9yIFwiICtcclxuICAgICAgICAgICAgJ3RoZSBwcm9qZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWF1dGgtZXZlbnRcIiAvKiBJTlZBTElEX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBJTlZBTElEX0NPREUgKi9dOiAnVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzICcgK1xyXG4gICAgICAgICAgICAnaW52YWxpZC4gUGxlYXNlIHJlc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc21zIGFuZCBiZSBzdXJlIHRvIHVzZSB0aGUgJyArXHJcbiAgICAgICAgICAgICd2ZXJpZmljYXRpb24gY29kZSBwcm92aWRlZCBieSB0aGUgdXNlci4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY29udGludWUtdXJpXCIgLyogSU5WQUxJRF9DT05USU5VRV9VUkkgKi9dOiAnVGhlIGNvbnRpbnVlIFVSTCBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqL106ICdUaGUgZm9sbG93aW5nIENvcmRvdmEgcGx1Z2lucyBtdXN0IGJlIGluc3RhbGxlZCB0byBlbmFibGUgT0F1dGggc2lnbi1pbjogJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm8sIGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiwgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiLCBjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXIgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tY3VzdG9tdXJsc2NoZW1lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jdXN0b20tdG9rZW5cIiAvKiBJTlZBTElEX0NVU1RPTV9UT0tFTiAqL106ICdUaGUgY3VzdG9tIHRva2VuIGZvcm1hdCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBjaGVjayB0aGUgZG9jdW1lbnRhdGlvbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqL106ICdUaGUgcHJvdmlkZWQgZHluYW1pYyBsaW5rIGRvbWFpbiBpcyBub3QgY29uZmlndXJlZCBvciBhdXRob3JpemVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbWFpbFwiIC8qIElOVkFMSURfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGFkZHJlc3MgaXMgYmFkbHkgZm9ybWF0dGVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqL106ICdFbXVsYXRvciBVUkwgbXVzdCBzdGFydCB3aXRoIGEgdmFsaWQgc2NoZW1lIChodHRwOi8vIG9yIGh0dHBzOi8vKS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqL106ICdZb3VyIEFQSSBrZXkgaXMgaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdSBoYXZlIGNvcGllZCBpdCBjb3JyZWN0bHkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNlcnQtaGFzaFwiIC8qIElOVkFMSURfQ0VSVF9IQVNIICovXTogJ1RoZSBTSEEtMSBjZXJ0aWZpY2F0ZSBoYXNoIHByb3ZpZGVkIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqL106ICdUaGUgc3VwcGxpZWQgYXV0aCBjcmVkZW50aWFsIGlzIG1hbGZvcm1lZCBvciBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCIgLyogSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIGluIGl0cyBtZXNzYWdlLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogSU5WQUxJRF9NRkFfU0VTU0lPTiAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIiAvKiBJTlZBTElEX09BVVRIX1BST1ZJREVSICovXTogJ0VtYWlsQXV0aFByb3ZpZGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgb3BlcmF0aW9uLiBUaGlzIG9wZXJhdGlvbiAnICtcclxuICAgICAgICAgICAgJ29ubHkgc3VwcG9ydHMgT0F1dGggcHJvdmlkZXJzLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqL106ICdUaGUgT0F1dGggY2xpZW50IElEIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkIG9yIGRvZXMgbm90IG1hdGNoIHRoZSAnICtcclxuICAgICAgICAgICAgJ3NwZWNpZmllZCBBUEkga2V5LicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWRvbWFpblwiIC8qIElOVkFMSURfT1JJR0lOICovXTogJ1RoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlICcgK1xyXG4gICAgICAgICAgICAncHJvamVjdC4gRWRpdCB0aGUgbGlzdCBvZiBhdXRob3JpemVkIGRvbWFpbnMgZnJvbSB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBpcyBpbnZhbGlkLiBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIGNvZGUgaXMgbWFsZm9ybWVkLCAnICtcclxuICAgICAgICAgICAgJ2V4cGlyZWQsIG9yIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC4nLFxyXG4gICAgICAgIFtcIndyb25nLXBhc3N3b3JkXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgaXMgaW52YWxpZCBvciB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgcGFzc3dvcmQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBJTlZBTElEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZSBpcyBpbnZhbGlkLiBJdCBjYW4gb25seSBiZSBsb2NhbCwgc2Vzc2lvbiBvciBub25lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1waG9uZS1udW1iZXJcIiAvKiBJTlZBTElEX1BIT05FX05VTUJFUiAqL106ICdUaGUgZm9ybWF0IG9mIHRoZSBwaG9uZSBudW1iZXIgcHJvdmlkZWQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgZW50ZXIgdGhlICcgK1xyXG4gICAgICAgICAgICAncGhvbmUgbnVtYmVyIGluIGEgZm9ybWF0IHRoYXQgY2FuIGJlIHBhcnNlZCBpbnRvIEUuMTY0IGZvcm1hdC4gRS4xNjQgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXJzIGFyZSB3cml0dGVuIGluIHRoZSBmb3JtYXQgWytdW2NvdW50cnkgY29kZV1bc3Vic2NyaWJlciAnICtcclxuICAgICAgICAgICAgJ251bWJlciBpbmNsdWRpbmcgYXJlYSBjb2RlXS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcHJvdmlkZXItaWRcIiAvKiBJTlZBTElEX1BST1ZJREVSX0lEICovXTogJ1RoZSBzcGVjaWZpZWQgcHJvdmlkZXIgSUQgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcmVjaXBpZW50LWVtYWlsXCIgLyogSU5WQUxJRF9SRUNJUElFTlRfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gZmFpbGVkIHRvIHNlbmQgYXMgdGhlIHByb3ZpZGVkICcgK1xyXG4gICAgICAgICAgICAncmVjaXBpZW50IGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtc2VuZGVyXCIgLyogSU5WQUxJRF9TRU5ERVIgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgYW4gaW52YWxpZCBzZW5kZXIgZW1haWwgb3IgbmFtZS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgZml4IGJ5IGdvaW5nIHRvIHRoZSBBdXRoIGVtYWlsIHRlbXBsYXRlcyBzZWN0aW9uIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106ICdUaGUgdmVyaWZpY2F0aW9uIElEIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdGVuYW50LWlkXCIgLyogSU5WQUxJRF9URU5BTlRfSUQgKi9dOiBcIlRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEIGlzIGludmFsaWQuXCIsXHJcbiAgICAgICAgW1wibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106ICdBbiBBbmRyb2lkIFBhY2thZ2UgTmFtZSBtdXN0IGJlIHByb3ZpZGVkIGlmIHRoZSBBbmRyb2lkIEFwcCBpcyByZXF1aXJlZCB0byBiZSBpbnN0YWxsZWQuJyxcclxuICAgICAgICBbXCJhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWRcIiAvKiBNSVNTSU5HX0FVVEhfRE9NQUlOICovXTogJ0JlIHN1cmUgdG8gaW5jbHVkZSBhdXRoRG9tYWluIHdoZW4gY2FsbGluZyBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCksICcgK1xyXG4gICAgICAgICAgICAnYnkgZm9sbG93aW5nIHRoZSBpbnN0cnVjdGlvbnMgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWFwcC1jcmVkZW50aWFsXCIgLyogTUlTU0lOR19BUFBfQ1JFREVOVElBTCAqL106ICdUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgaXMgbWlzc2luZyBhbiBhcHBsaWNhdGlvbiB2ZXJpZmllciAnICtcclxuICAgICAgICAgICAgJ2Fzc2VydGlvbi4gQSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gbmVlZHMgdG8gYmUgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogTUlTU0lOR19DT0RFICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWNvbnRpbnVlLXVyaVwiIC8qIE1JU1NJTkdfQ09OVElOVUVfVVJJICovXTogJ0EgY29udGludWUgVVJMIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlmcmFtZS1zdGFydFwiIC8qIE1JU1NJTkdfSUZSQU1FX1NUQVJUICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIiAvKiBNSVNTSU5HX0lPU19CVU5ETEVfSUQgKi9dOiAnQW4gaU9TIEJ1bmRsZSBJRCBtdXN0IGJlIHByb3ZpZGVkIGlmIGFuIEFwcCBTdG9yZSBJRCBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3Npbmctb3ItaW52YWxpZC1ub25jZVwiIC8qIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRSAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgbm9uY2UuIFRoaXMgY2FuIG9jY3VyIGlmIHRoZSAnICtcclxuICAgICAgICAgICAgJ1NIQS0yNTYgaGFzaCBvZiB0aGUgcHJvdmlkZWQgcmF3IG5vbmNlIGRvZXMgbm90IG1hdGNoIHRoZSBoYXNoZWQgbm9uY2UgJyArXHJcbiAgICAgICAgICAgICdpbiB0aGUgSUQgdG9rZW4gcGF5bG9hZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovXTogJ05vIHNlY29uZCBmYWN0b3IgaWRlbnRpZmllciBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGlzIG1pc3NpbmcgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcGhvbmUtbnVtYmVyXCIgLyogTUlTU0lOR19QSE9ORV9OVU1CRVIgKi9dOiAnVG8gc2VuZCB2ZXJpZmljYXRpb24gY29kZXMsIHByb3ZpZGUgYSBwaG9uZSBudW1iZXIgZm9yIHRoZSByZWNpcGllbnQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSB2ZXJpZmljYXRpb24gSUQuJyxcclxuICAgICAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIE1PRFVMRV9ERVNUUk9ZRUQgKi9dOiAnVGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZUFwcCBoYXMgYmVlbiBkZWxldGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCIgLyogTUZBX0lORk9fTk9UX0ZPVU5EICovXTogJ1RoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBzZWNvbmQgZmFjdG9yIG1hdGNoaW5nIHRoZSBpZGVudGlmaWVyIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBNRkFfUkVRVUlSRUQgKi9dOiAnUHJvb2Ygb2Ygb3duZXJzaGlwIG9mIGEgc2Vjb25kIGZhY3RvciBpcyByZXF1aXJlZCB0byBjb21wbGV0ZSBzaWduLWluLicsXHJcbiAgICAgICAgW1wiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovXTogJ0FuIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzIGJ1dCBkaWZmZXJlbnQgJyArXHJcbiAgICAgICAgICAgICdzaWduLWluIGNyZWRlbnRpYWxzLiBTaWduIGluIHVzaW5nIGEgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgJyArXHJcbiAgICAgICAgICAgICdlbWFpbCBhZGRyZXNzLicsXHJcbiAgICAgICAgW1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi9dOiAnQSBuZXR3b3JrIEF1dGhFcnJvciAoc3VjaCBhcyB0aW1lb3V0LCBpbnRlcnJ1cHRlZCBjb25uZWN0aW9uIG9yIHVucmVhY2hhYmxlIGhvc3QpIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogTk9fU1VDSF9QUk9WSURFUiAqL106ICdVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJudWxsLXVzZXJcIiAvKiBOVUxMX1VTRVIgKi9dOiAnQSBudWxsIHVzZXIgb2JqZWN0IHdhcyBwcm92aWRlZCBhcyB0aGUgYXJndW1lbnQgZm9yIGFuIG9wZXJhdGlvbiB3aGljaCAnICtcclxuICAgICAgICAgICAgJ3JlcXVpcmVzIGEgbm9uLW51bGwgdXNlciBvYmplY3QuJyxcclxuICAgICAgICBbXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi9dOiAnVGhlIGdpdmVuIHNpZ24taW4gcHJvdmlkZXIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgRmlyZWJhc2UgcHJvamVjdC4gJyArXHJcbiAgICAgICAgICAgICdFbmFibGUgaXQgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUsIHVuZGVyIHRoZSBzaWduLWluIG1ldGhvZCB0YWIgb2YgdGhlICcgK1xyXG4gICAgICAgICAgICAnQXV0aCBzZWN0aW9uLicsXHJcbiAgICAgICAgW1wib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IHRoaXMgYXBwbGljYXRpb24gaXMgJyArXHJcbiAgICAgICAgICAgICdydW5uaW5nIG9uLiBcImxvY2F0aW9uLnByb3RvY29sXCIgbXVzdCBiZSBodHRwLCBodHRwcyBvciBjaHJvbWUtZXh0ZW5zaW9uJyArXHJcbiAgICAgICAgICAgICcgYW5kIHdlYiBzdG9yYWdlIG11c3QgYmUgZW5hYmxlZC4nLFxyXG4gICAgICAgIFtcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovXTogJ1VuYWJsZSB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHdpdGggdGhlIHBvcHVwLiBJdCBtYXkgaGF2ZSBiZWVuIGJsb2NrZWQgYnkgdGhlIGJyb3dzZXIuJyxcclxuICAgICAgICBbXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiIC8qIFBPUFVQX0NMT1NFRF9CWV9VU0VSICovXTogJ1RoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi4nLFxyXG4gICAgICAgIFtcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9dOiAnVXNlciBjYW4gb25seSBiZSBsaW5rZWQgdG8gb25lIGlkZW50aXR5IGZvciB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJxdW90YS1leGNlZWRlZFwiIC8qIFFVT1RBX0VYQ0VFREVEICovXTogXCJUaGUgcHJvamVjdCdzIHF1b3RhIGZvciB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBleGNlZWRlZC5cIixcclxuICAgICAgICBbXCJyZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlclwiIC8qIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovXTogJ1RoZSByZWRpcmVjdCBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nLicsXHJcbiAgICAgICAgW1wicmVkaXJlY3Qtb3BlcmF0aW9uLXBlbmRpbmdcIiAvKiBSRURJUkVDVF9PUEVSQVRJT05fUEVORElORyAqL106ICdBIHJlZGlyZWN0IHNpZ24taW4gb3BlcmF0aW9uIGlzIGFscmVhZHkgcGVuZGluZy4nLFxyXG4gICAgICAgIFtcInJlamVjdGVkLWNyZWRlbnRpYWxcIiAvKiBSRUpFQ1RFRF9DUkVERU5USUFMICovXTogJ1RoZSByZXF1ZXN0IGNvbnRhaW5zIG1hbGZvcm1lZCBvciBtaXNtYXRjaGluZyBjcmVkZW50aWFscy4nLFxyXG4gICAgICAgIFtcInNlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2VcIiAvKiBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQgKi9dOiAnVGhlIHNlY29uZCBmYWN0b3IgaXMgYWxyZWFkeSBlbnJvbGxlZCBvbiB0aGlzIGFjY291bnQuJyxcclxuICAgICAgICBbXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogJ1RoZSBtYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHNlY29uZCBmYWN0b3JzIG9uIGEgdXNlciBoYXMgYmVlbiBleGNlZWRlZC4nLFxyXG4gICAgICAgIFtcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqL106IFwiVGhlIHByb3ZpZGVkIHRlbmFudCBJRCBkb2VzIG5vdCBtYXRjaCB0aGUgQXV0aCBpbnN0YW5jZSdzIHRlbmFudCBJRFwiLFxyXG4gICAgICAgIFtcInRpbWVvdXRcIiAvKiBUSU1FT1VUICovXTogJ1RoZSBvcGVyYXRpb24gaGFzIHRpbWVkIG91dC4nLFxyXG4gICAgICAgIFtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi9dOiBcIlRoZSB1c2VyJ3MgY3JlZGVudGlhbCBpcyBubyBsb25nZXIgdmFsaWQuIFRoZSB1c2VyIG11c3Qgc2lnbiBpbiBhZ2Fpbi5cIixcclxuICAgICAgICBbXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106ICdXZSBoYXZlIGJsb2NrZWQgYWxsIHJlcXVlc3RzIGZyb20gdGhpcyBkZXZpY2UgZHVlIHRvIHVudXN1YWwgYWN0aXZpdHkuICcgK1xyXG4gICAgICAgICAgICAnVHJ5IGFnYWluIGxhdGVyLicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi9dOiAnVGhlIGRvbWFpbiBvZiB0aGUgY29udGludWUgVVJMIGlzIG5vdCB3aGl0ZWxpc3RlZC4gIFBsZWFzZSB3aGl0ZWxpc3QgJyArXHJcbiAgICAgICAgICAgICd0aGUgZG9tYWluIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yXCIgLyogVU5TVVBQT1JURURfRklSU1RfRkFDVE9SICovXTogJ0Vucm9sbGluZyBhIHNlY29uZCBmYWN0b3Igb3Igc2lnbmluZyBpbiB3aXRoIGEgbXVsdGktZmFjdG9yIGFjY291bnQgcmVxdWlyZXMgc2lnbi1pbiB3aXRoIGEgc3VwcG9ydGVkIGZpcnN0IGZhY3Rvci4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqL106ICdUaGUgY3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZS4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb25cIiAvKiBVTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBtdWx0aS10ZW5hbnQgY29udGV4dC4nLFxyXG4gICAgICAgIFtcInVudmVyaWZpZWQtZW1haWxcIiAvKiBVTlZFUklGSUVEX0VNQUlMICovXTogJ1RoZSBvcGVyYXRpb24gcmVxdWlyZXMgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcInVzZXItY2FuY2VsbGVkXCIgLyogVVNFUl9DQU5DRUxMRUQgKi9dOiAnVGhlIHVzZXIgZGlkIG5vdCBncmFudCB5b3VyIGFwcGxpY2F0aW9uIHRoZSBwZXJtaXNzaW9ucyBpdCByZXF1ZXN0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL106ICdUaGVyZSBpcyBubyB1c2VyIHJlY29yZCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgaWRlbnRpZmllci4gVGhlIHVzZXIgbWF5ICcgK1xyXG4gICAgICAgICAgICAnaGF2ZSBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLWRpc2FibGVkXCIgLyogVVNFUl9ESVNBQkxFRCAqL106ICdUaGUgdXNlciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkIGJ5IGFuIGFkbWluaXN0cmF0b3IuJyxcclxuICAgICAgICBbXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqL106ICdUaGUgc3VwcGxpZWQgY3JlZGVudGlhbHMgZG8gbm90IGNvcnJlc3BvbmQgdG8gdGhlIHByZXZpb3VzbHkgc2lnbmVkIGluIHVzZXIuJyxcclxuICAgICAgICBbXCJ1c2VyLXNpZ25lZC1vdXRcIiAvKiBVU0VSX1NJR05FRF9PVVQgKi9dOiAnJyxcclxuICAgICAgICBbXCJ3ZWFrLXBhc3N3b3JkXCIgLyogV0VBS19QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgbXVzdCBiZSA2IGNoYXJhY3RlcnMgbG9uZyBvciBtb3JlLicsXHJcbiAgICAgICAgW1wid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqL106ICdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZCBvciAzcmQgcGFydHkgY29va2llcyBhbmQgZGF0YSBtYXkgYmUgZGlzYWJsZWQuJyxcclxuICAgICAgICBbXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqL106ICdpbml0aWFsaXplQXV0aCgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgICdkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplQXV0aCgpIHdpdGggdGhlICcgK1xyXG4gICAgICAgICAgICAnc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEF1dGgoKSB0byByZXR1cm4gdGhlJyArXHJcbiAgICAgICAgICAgICcgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS4nXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIF9wcm9kRXJyb3JNYXAoKSB7XHJcbiAgICAvLyBXZSB3aWxsIGluY2x1ZGUgdGhpcyBvbmUgbWVzc2FnZSBpbiB0aGUgcHJvZCBlcnJvciBtYXAgc2luY2UgYnkgdGhlIHZlcnlcclxuICAgIC8vIG5hdHVyZSBvZiB0aGlzIGVycm9yLCBkZXZlbG9wZXJzIHdpbGwgbmV2ZXIgYmUgYWJsZSB0byBzZWUgdGhlIG1lc3NhZ2VcclxuICAgIC8vIHVzaW5nIHRoZSBkZWJ1Z0Vycm9yTWFwICh3aGljaCBpcyBpbnN0YWxsZWQgZHVyaW5nIGF1dGggaW5pdGlhbGl6YXRpb24pLlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBBIHZlcmJvc2UgZXJyb3IgbWFwIHdpdGggZGV0YWlsZWQgZGVzY3JpcHRpb25zIGZvciBtb3N0IGVycm9yIGNvZGVzLlxyXG4gKlxyXG4gKiBTZWUgZGlzY3Vzc2lvbiBhdCB7QGxpbmsgQXV0aEVycm9yTWFwfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBkZWJ1Z0Vycm9yTWFwID0gX2RlYnVnRXJyb3JNYXA7XHJcbi8qKlxyXG4gKiBBIG1pbmltYWwgZXJyb3IgbWFwIHdpdGggYWxsIHZlcmJvc2UgZXJyb3IgbWVzc2FnZXMgc3RyaXBwZWQuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IHByb2RFcnJvck1hcCA9IF9wcm9kRXJyb3JNYXA7XHJcbmNvbnN0IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBfcHJvZEVycm9yTWFwKCkpO1xyXG4vKipcclxuICogQSBtYXAgb2YgcG90ZW50aWFsIGBBdXRoYCBlcnJvciBjb2RlcywgZm9yIGVhc2llciBjb21wYXJpc29uIHdpdGggZXJyb3JzXHJcbiAqIHRocm93biBieSB0aGUgU0RLLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBOb3RlIHRoYXQgeW91IGNhbid0IHRyZWUtc2hha2UgaW5kaXZpZHVhbCBrZXlzXHJcbiAqIGluIHRoZSBtYXAsIHNvIGJ5IHVzaW5nIHRoZSBtYXAgeW91IG1pZ2h0IHN1YnN0YW50aWFsbHkgaW5jcmVhc2UgeW91clxyXG4gKiBidW5kbGUgc2l6ZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZID0ge1xyXG4gICAgQURNSU5fT05MWV9PUEVSQVRJT046ICdhdXRoL2FkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uJyxcclxuICAgIEFSR1VNRU5UX0VSUk9SOiAnYXV0aC9hcmd1bWVudC1lcnJvcicsXHJcbiAgICBBUFBfTk9UX0FVVEhPUklaRUQ6ICdhdXRoL2FwcC1ub3QtYXV0aG9yaXplZCcsXHJcbiAgICBBUFBfTk9UX0lOU1RBTExFRDogJ2F1dGgvYXBwLW5vdC1pbnN0YWxsZWQnLFxyXG4gICAgQ0FQVENIQV9DSEVDS19GQUlMRUQ6ICdhdXRoL2NhcHRjaGEtY2hlY2stZmFpbGVkJyxcclxuICAgIENPREVfRVhQSVJFRDogJ2F1dGgvY29kZS1leHBpcmVkJyxcclxuICAgIENPUkRPVkFfTk9UX1JFQURZOiAnYXV0aC9jb3Jkb3ZhLW5vdC1yZWFkeScsXHJcbiAgICBDT1JTX1VOU1VQUE9SVEVEOiAnYXV0aC9jb3JzLXVuc3VwcG9ydGVkJyxcclxuICAgIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0U6ICdhdXRoL2NyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgQ1JFREVOVElBTF9NSVNNQVRDSDogJ2F1dGgvY3VzdG9tLXRva2VuLW1pc21hdGNoJyxcclxuICAgIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTjogJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJyxcclxuICAgIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSDogJ2F1dGgvZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aCcsXHJcbiAgICBEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRDogJ2F1dGgvZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWQnLFxyXG4gICAgRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTjogJ2F1dGgvZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvbicsXHJcbiAgICBFTUFJTF9FWElTVFM6ICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJyxcclxuICAgIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQ6ICdhdXRoL2VtdWxhdG9yLWNvbmZpZy1mYWlsZWQnLFxyXG4gICAgRVhQSVJFRF9PT0JfQ09ERTogJ2F1dGgvZXhwaXJlZC1hY3Rpb24tY29kZScsXHJcbiAgICBFWFBJUkVEX1BPUFVQX1JFUVVFU1Q6ICdhdXRoL2NhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0JyxcclxuICAgIElOVEVSTkFMX0VSUk9SOiAnYXV0aC9pbnRlcm5hbC1lcnJvcicsXHJcbiAgICBJTlZBTElEX0FQSV9LRVk6ICdhdXRoL2ludmFsaWQtYXBpLWtleScsXHJcbiAgICBJTlZBTElEX0FQUF9DUkVERU5USUFMOiAnYXV0aC9pbnZhbGlkLWFwcC1jcmVkZW50aWFsJyxcclxuICAgIElOVkFMSURfQVBQX0lEOiAnYXV0aC9pbnZhbGlkLWFwcC1pZCcsXHJcbiAgICBJTlZBTElEX0FVVEg6ICdhdXRoL2ludmFsaWQtdXNlci10b2tlbicsXHJcbiAgICBJTlZBTElEX0FVVEhfRVZFTlQ6ICdhdXRoL2ludmFsaWQtYXV0aC1ldmVudCcsXHJcbiAgICBJTlZBTElEX0NFUlRfSEFTSDogJ2F1dGgvaW52YWxpZC1jZXJ0LWhhc2gnLFxyXG4gICAgSU5WQUxJRF9DT0RFOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfQ09OVElOVUVfVVJJOiAnYXV0aC9pbnZhbGlkLWNvbnRpbnVlLXVyaScsXHJcbiAgICBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTjogJ2F1dGgvaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb24nLFxyXG4gICAgSU5WQUxJRF9DVVNUT01fVE9LRU46ICdhdXRoL2ludmFsaWQtY3VzdG9tLXRva2VuJyxcclxuICAgIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTjogJ2F1dGgvaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluJyxcclxuICAgIElOVkFMSURfRU1BSUw6ICdhdXRoL2ludmFsaWQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUU6ICdhdXRoL2ludmFsaWQtZW11bGF0b3Itc2NoZW1lJyxcclxuICAgIElOVkFMSURfSURQX1JFU1BPTlNFOiAnYXV0aC9pbnZhbGlkLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQ6ICdhdXRoL2ludmFsaWQtbWVzc2FnZS1wYXlsb2FkJyxcclxuICAgIElOVkFMSURfTUZBX1NFU1NJT046ICdhdXRoL2ludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb24nLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQ6ICdhdXRoL2ludmFsaWQtb2F1dGgtY2xpZW50LWlkJyxcclxuICAgIElOVkFMSURfT0FVVEhfUFJPVklERVI6ICdhdXRoL2ludmFsaWQtb2F1dGgtcHJvdmlkZXInLFxyXG4gICAgSU5WQUxJRF9PT0JfQ09ERTogJ2F1dGgvaW52YWxpZC1hY3Rpb24tY29kZScsXHJcbiAgICBJTlZBTElEX09SSUdJTjogJ2F1dGgvdW5hdXRob3JpemVkLWRvbWFpbicsXHJcbiAgICBJTlZBTElEX1BBU1NXT1JEOiAnYXV0aC93cm9uZy1wYXNzd29yZCcsXHJcbiAgICBJTlZBTElEX1BFUlNJU1RFTkNFOiAnYXV0aC9pbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgSU5WQUxJRF9QSE9ORV9OVU1CRVI6ICdhdXRoL2ludmFsaWQtcGhvbmUtbnVtYmVyJyxcclxuICAgIElOVkFMSURfUFJPVklERVJfSUQ6ICdhdXRoL2ludmFsaWQtcHJvdmlkZXItaWQnLFxyXG4gICAgSU5WQUxJRF9SRUNJUElFTlRfRU1BSUw6ICdhdXRoL2ludmFsaWQtcmVjaXBpZW50LWVtYWlsJyxcclxuICAgIElOVkFMSURfU0VOREVSOiAnYXV0aC9pbnZhbGlkLXNlbmRlcicsXHJcbiAgICBJTlZBTElEX1NFU1NJT05fSU5GTzogJ2F1dGgvaW52YWxpZC12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgSU5WQUxJRF9URU5BTlRfSUQ6ICdhdXRoL2ludmFsaWQtdGVuYW50LWlkJyxcclxuICAgIE1GQV9JTkZPX05PVF9GT1VORDogJ2F1dGgvbXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kJyxcclxuICAgIE1GQV9SRVFVSVJFRDogJ2F1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRTogJ2F1dGgvbWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lJyxcclxuICAgIE1JU1NJTkdfQVBQX0NSRURFTlRJQUw6ICdhdXRoL21pc3NpbmctYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgTUlTU0lOR19BVVRIX0RPTUFJTjogJ2F1dGgvYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkJyxcclxuICAgIE1JU1NJTkdfQ09ERTogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24tY29kZScsXHJcbiAgICBNSVNTSU5HX0NPTlRJTlVFX1VSSTogJ2F1dGgvbWlzc2luZy1jb250aW51ZS11cmknLFxyXG4gICAgTUlTU0lOR19JRlJBTUVfU1RBUlQ6ICdhdXRoL21pc3NpbmctaWZyYW1lLXN0YXJ0JyxcclxuICAgIE1JU1NJTkdfSU9TX0JVTkRMRV9JRDogJ2F1dGgvbWlzc2luZy1pb3MtYnVuZGxlLWlkJyxcclxuICAgIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRTogJ2F1dGgvbWlzc2luZy1vci1pbnZhbGlkLW5vbmNlJyxcclxuICAgIE1JU1NJTkdfTUZBX0lORk86ICdhdXRoL21pc3NpbmctbXVsdGktZmFjdG9yLWluZm8nLFxyXG4gICAgTUlTU0lOR19NRkFfU0VTU0lPTjogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBNSVNTSU5HX1BIT05FX05VTUJFUjogJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInLFxyXG4gICAgTUlTU0lOR19TRVNTSU9OX0lORk86ICdhdXRoL21pc3NpbmctdmVyaWZpY2F0aW9uLWlkJyxcclxuICAgIE1PRFVMRV9ERVNUUk9ZRUQ6ICdhdXRoL2FwcC1kZWxldGVkJyxcclxuICAgIE5FRURfQ09ORklSTUFUSU9OOiAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJyxcclxuICAgIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQ6ICdhdXRoL25ldHdvcmstcmVxdWVzdC1mYWlsZWQnLFxyXG4gICAgTlVMTF9VU0VSOiAnYXV0aC9udWxsLXVzZXInLFxyXG4gICAgTk9fQVVUSF9FVkVOVDogJ2F1dGgvbm8tYXV0aC1ldmVudCcsXHJcbiAgICBOT19TVUNIX1BST1ZJREVSOiAnYXV0aC9uby1zdWNoLXByb3ZpZGVyJyxcclxuICAgIE9QRVJBVElPTl9OT1RfQUxMT1dFRDogJ2F1dGgvb3BlcmF0aW9uLW5vdC1hbGxvd2VkJyxcclxuICAgIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEOiAnYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50JyxcclxuICAgIFBPUFVQX0JMT0NLRUQ6ICdhdXRoL3BvcHVwLWJsb2NrZWQnLFxyXG4gICAgUE9QVVBfQ0xPU0VEX0JZX1VTRVI6ICdhdXRoL3BvcHVwLWNsb3NlZC1ieS11c2VyJyxcclxuICAgIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEOiAnYXV0aC9wcm92aWRlci1hbHJlYWR5LWxpbmtlZCcsXHJcbiAgICBRVU9UQV9FWENFRURFRDogJ2F1dGgvcXVvdGEtZXhjZWVkZWQnLFxyXG4gICAgUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVI6ICdhdXRoL3JlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyJyxcclxuICAgIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HOiAnYXV0aC9yZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZycsXHJcbiAgICBSRUpFQ1RFRF9DUkVERU5USUFMOiAnYXV0aC9yZWplY3RlZC1jcmVkZW50aWFsJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRDogJ2F1dGgvc2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEOiAnYXV0aC9tYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWQnLFxyXG4gICAgVEVOQU5UX0lEX01JU01BVENIOiAnYXV0aC90ZW5hbnQtaWQtbWlzbWF0Y2gnLFxyXG4gICAgVElNRU9VVDogJ2F1dGgvdGltZW91dCcsXHJcbiAgICBUT0tFTl9FWFBJUkVEOiAnYXV0aC91c2VyLXRva2VuLWV4cGlyZWQnLFxyXG4gICAgVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSOiAnYXV0aC90b28tbWFueS1yZXF1ZXN0cycsXHJcbiAgICBVTkFVVEhPUklaRURfRE9NQUlOOiAnYXV0aC91bmF1dGhvcml6ZWQtY29udGludWUtdXJpJyxcclxuICAgIFVOU1VQUE9SVEVEX0ZJUlNUX0ZBQ1RPUjogJ2F1dGgvdW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yJyxcclxuICAgIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFOiAnYXV0aC91bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlJyxcclxuICAgIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT046ICdhdXRoL3Vuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb24nLFxyXG4gICAgVU5WRVJJRklFRF9FTUFJTDogJ2F1dGgvdW52ZXJpZmllZC1lbWFpbCcsXHJcbiAgICBVU0VSX0NBTkNFTExFRDogJ2F1dGgvdXNlci1jYW5jZWxsZWQnLFxyXG4gICAgVVNFUl9ERUxFVEVEOiAnYXV0aC91c2VyLW5vdC1mb3VuZCcsXHJcbiAgICBVU0VSX0RJU0FCTEVEOiAnYXV0aC91c2VyLWRpc2FibGVkJyxcclxuICAgIFVTRVJfTUlTTUFUQ0g6ICdhdXRoL3VzZXItbWlzbWF0Y2gnLFxyXG4gICAgVVNFUl9TSUdORURfT1VUOiAnYXV0aC91c2VyLXNpZ25lZC1vdXQnLFxyXG4gICAgV0VBS19QQVNTV09SRDogJ2F1dGgvd2Vhay1wYXNzd29yZCcsXHJcbiAgICBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRDogJ2F1dGgvd2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQUxSRUFEWV9JTklUSUFMSVpFRDogJ2F1dGgvYWxyZWFkeS1pbml0aWFsaXplZCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nQ2xpZW50ID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2F1dGgnKTtcclxuZnVuY3Rpb24gX2xvZ0Vycm9yKG1zZywgLi4uYXJncykge1xyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xyXG4gICAgICAgIGxvZ0NsaWVudC5lcnJvcihgQXV0aCAoJHtTREtfVkVSU0lPTn0pOiAke21zZ31gLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZmFpbChhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVFcnJvcihhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcHJvZEVycm9yTWFwKCkpLCB7IFtjb2RlXTogbWVzc2FnZSB9KTtcclxuICAgIGNvbnN0IGZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXApO1xyXG4gICAgcmV0dXJuIGZhY3RvcnkuY3JlYXRlKGNvZGUsIHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBvYmplY3QsIGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBjb25zdHJ1Y3Rvckluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICBpZiAoIShvYmplY3QgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvckluc3RhbmNlKSkge1xyXG4gICAgICAgIGlmIChjb25zdHJ1Y3Rvckluc3RhbmNlLm5hbWUgIT09IG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgYFR5cGUgb2YgJHtvYmplY3QuY29uc3RydWN0b3IubmFtZX0gZG9lcyBub3QgbWF0Y2ggZXhwZWN0ZWQgaW5zdGFuY2UuYCArXHJcbiAgICAgICAgICAgIGBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBBdXRoIFNESz9gKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIGlmICh0eXBlb2YgYXV0aE9yQ29kZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBjb25zdCBjb2RlID0gcmVzdFswXTtcclxuICAgICAgICBjb25zdCBmdWxsUGFyYW1zID0gWy4uLnJlc3Quc2xpY2UoMSldO1xyXG4gICAgICAgIGlmIChmdWxsUGFyYW1zWzBdKSB7XHJcbiAgICAgICAgICAgIGZ1bGxQYXJhbXNbMF0uYXBwTmFtZSA9IGF1dGhPckNvZGUubmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF1dGhPckNvZGUuX2Vycm9yRmFjdG9yeS5jcmVhdGUoY29kZSwgLi4uZnVsbFBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZLmNyZWF0ZShhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0KGFzc2VydGlvbiwgYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIGludGVybmFsIGVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBmYWlsdXJlIHR5cGUgb2YgZmFpbHVyZSBlbmNvdW50ZXJlZFxyXG4gKiBAdGhyb3dzIEVycm9yXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0ZhaWwoZmFpbHVyZSkge1xyXG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxyXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIGZhaWx1cmU7XHJcbiAgICBfbG9nRXJyb3IobWVzc2FnZSk7XHJcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZWJhc2VFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXHJcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcclxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxufVxyXG4vKipcclxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXHJcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXNzZXJ0aW9uXHJcbiAqIEBwYXJhbSBtZXNzYWdlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0Fzc2VydChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgZGVidWdGYWlsKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGluc3RhbmNlQ2FjaGUgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIF9nZXRJbnN0YW5jZShjbHMpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNscyBpbnN0YW5jZW9mIEZ1bmN0aW9uLCAnRXhwZWN0ZWQgYSBjbGFzcyBkZWZpbml0aW9uJyk7XHJcbiAgICBsZXQgaW5zdGFuY2UgPSBpbnN0YW5jZUNhY2hlLmdldChjbHMpO1xyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoaW5zdGFuY2UgaW5zdGFuY2VvZiBjbHMsICdJbnN0YW5jZSBzdG9yZWQgaW4gY2FjaGUgbWlzbWF0Y2hlZCB3aXRoIGNsYXNzJyk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaW5zdGFuY2UgPSBuZXcgY2xzKCk7XHJcbiAgICBpbnN0YW5jZUNhY2hlLnNldChjbHMsIGluc3RhbmNlKTtcclxuICAgIHJldHVybiBpbnN0YW5jZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgYW4ge0BsaW5rIEF1dGh9IGluc3RhbmNlIHdpdGggZmluZS1ncmFpbmVkIGNvbnRyb2wgb3ZlclxyXG4gKiB7QGxpbmsgRGVwZW5kZW5jaWVzfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgbW9yZSBjb250cm9sIG92ZXIgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0aGFuXHJcbiAqIHtAbGluayBnZXRBdXRofS4gYGdldEF1dGhgIHVzZXMgcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdHMgdG8gc3VwcGx5XHJcbiAqIHRoZSB7QGxpbmsgRGVwZW5kZW5jaWVzfS4gSW4gZ2VuZXJhbCwgYGdldEF1dGhgIGlzIHRoZSBlYXNpZXN0IHdheSB0b1xyXG4gKiBpbml0aWFsaXplIEF1dGggYW5kIHdvcmtzIGZvciBtb3N0IHVzZSBjYXNlcy4gVXNlIGBpbml0aWFsaXplQXV0aGAgaWYgeW91XHJcbiAqIG5lZWQgY29udHJvbCBvdmVyIHdoaWNoIHBlcnNpc3RlbmNlIGxheWVyIGlzIHVzZWQsIG9yIHRvIG1pbmltaXplIGJ1bmRsZVxyXG4gKiBzaXplIGlmIHlvdSdyZSBub3QgdXNpbmcgZWl0aGVyIGBzaWduSW5XaXRoUG9wdXBgIG9yIGBzaWduSW5XaXRoUmVkaXJlY3RgLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSwgaWYgeW91ciBhcHAgb25seSB1c2VzIGFub255bW91cyBhY2NvdW50cyBhbmQgeW91IG9ubHkgd2FudFxyXG4gKiBhY2NvdW50cyBzYXZlZCBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbiwgaW5pdGlhbGl6ZSBgQXV0aGAgd2l0aDpcclxuICpcclxuICogYGBganNcclxuICogY29uc3QgYXV0aCA9IGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gKiAgIHBlcnNpc3RlbmNlOiBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLFxyXG4gKiAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogdW5kZWZpbmVkLFxyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBdXRoKGFwcCwgZGVwcykge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBpbml0aWFsT3B0aW9ucyA9IHByb3ZpZGVyLmdldE9wdGlvbnMoKTtcclxuICAgICAgICBpZiAoZGVlcEVxdWFsKGluaXRpYWxPcHRpb25zLCBkZXBzICE9PSBudWxsICYmIGRlcHMgIT09IHZvaWQgMCA/IGRlcHMgOiB7fSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdXRoID0gcHJvdmlkZXIuaW5pdGlhbGl6ZSh7IG9wdGlvbnM6IGRlcHMgfSk7XHJcbiAgICByZXR1cm4gYXV0aDtcclxufVxyXG5mdW5jdGlvbiBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMucGVyc2lzdGVuY2UpIHx8IFtdO1xyXG4gICAgY29uc3QgaGllcmFyY2h5ID0gKEFycmF5LmlzQXJyYXkocGVyc2lzdGVuY2UpID8gcGVyc2lzdGVuY2UgOiBbcGVyc2lzdGVuY2VdKS5tYXAoX2dldEluc3RhbmNlKTtcclxuICAgIGlmIChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMuZXJyb3JNYXApIHtcclxuICAgICAgICBhdXRoLl91cGRhdGVFcnJvck1hcChkZXBzLmVycm9yTWFwKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgcHJvbWlzZSBpcyBpbnRlbmRlZCB0byBmbG9hdDsgYXV0aCBpbml0aWFsaXphdGlvbiBoYXBwZW5zIGluIHRoZVxyXG4gICAgLy8gYmFja2dyb3VuZCwgbWVhbndoaWxlIHRoZSBhdXRoIG9iamVjdCBtYXkgYmUgdXNlZCBieSB0aGUgYXBwLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgYXV0aC5faW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZShoaWVyYXJjaHksIGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5wb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50VXJsKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ocmVmKSkgfHwgJyc7XHJcbn1cclxuZnVuY3Rpb24gX2lzSHR0cE9ySHR0cHMoKSB7XHJcbiAgICByZXR1cm4gX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHA6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cHM6JztcclxufVxyXG5mdW5jdGlvbiBfZ2V0Q3VycmVudFNjaGVtZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICgoX2EgPSBzZWxmLmxvY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvdG9jb2wpKSB8fCBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgYnJvd3NlciBpcyB3b3JraW5nIG9ubGluZVxyXG4gKi9cclxuZnVuY3Rpb24gX2lzT25saW5lKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgbmF2aWdhdG9yICYmXHJcbiAgICAgICAgJ29uTGluZScgaW4gbmF2aWdhdG9yICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5vbkxpbmUgPT09ICdib29sZWFuJyAmJlxyXG4gICAgICAgIC8vIEFwcGx5IG9ubHkgZm9yIHRyYWRpdGlvbmFsIHdlYiBhcHBzIGFuZCBDaHJvbWUgZXh0ZW5zaW9ucy5cclxuICAgICAgICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgdHJ1ZSBmb3IgQ29yZG92YSBhcHBzIHdoaWNoIGhhdmUgdW5yZWxpYWJsZVxyXG4gICAgICAgIC8vIG5hdmlnYXRvci5vbkxpbmUgYmVoYXZpb3IgdW5sZXNzIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24gaXNcclxuICAgICAgICAvLyBpbnN0YWxsZWQgd2hpY2ggb3ZlcndyaXRlcyB0aGUgbmF0aXZlIG5hdmlnYXRvci5vbkxpbmUgdmFsdWUgYW5kXHJcbiAgICAgICAgLy8gZGVmaW5lcyBuYXZpZ2F0b3IuY29ubmVjdGlvbi5cclxuICAgICAgICAoX2lzSHR0cE9ySHR0cHMoKSB8fCBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fCAnY29ubmVjdGlvbicgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iub25MaW5lO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgd2UgY2FuJ3QgZGV0ZXJtaW5lIHRoZSBzdGF0ZSwgYXNzdW1lIGl0IGlzIG9ubGluZS5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRVc2VyTGFuZ3VhZ2UoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IG5hdmlnYXRvckxhbmd1YWdlID0gbmF2aWdhdG9yO1xyXG4gICAgcmV0dXJuIChcclxuICAgIC8vIE1vc3QgcmVsaWFibGUsIGJ1dCBvbmx5IHN1cHBvcnRlZCBpbiBDaHJvbWUvRmlyZWZveC5cclxuICAgIChuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXMgJiYgbmF2aWdhdG9yTGFuZ3VhZ2UubGFuZ3VhZ2VzWzBdKSB8fFxyXG4gICAgICAgIC8vIFN1cHBvcnRlZCBpbiBtb3N0IGJyb3dzZXJzLCBidXQgcmV0dXJucyB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIGJyb3dzZXJcclxuICAgICAgICAvLyBVSSwgbm90IHRoZSBsYW5ndWFnZSBzZXQgaW4gYnJvd3NlciBzZXR0aW5ncy5cclxuICAgICAgICBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZSB8fFxyXG4gICAgICAgIC8vIENvdWxkbid0IGRldGVybWluZSBsYW5ndWFnZS5cclxuICAgICAgICBudWxsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBzdHJ1Y3R1cmUgdG8gaGVscCBwaWNrIGJldHdlZW4gYSByYW5nZSBvZiBsb25nIGFuZCBzaG9ydCBkZWxheSBkdXJhdGlvbnNcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiBJbiBnZW5lcmFsLCB0aGUgbG9uZyBkZWxheSBpcyB1c2VkIGZvclxyXG4gKiBtb2JpbGUgZW52aXJvbm1lbnRzIHdoZXJlYXMgc2hvcnQgZGVsYXlzIGFyZSB1c2VkIGZvciBkZXNrdG9wIGVudmlyb25tZW50cy5cclxuICovXHJcbmNsYXNzIERlbGF5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNob3J0RGVsYXksIGxvbmdEZWxheSkge1xyXG4gICAgICAgIHRoaXMuc2hvcnREZWxheSA9IHNob3J0RGVsYXk7XHJcbiAgICAgICAgdGhpcy5sb25nRGVsYXkgPSBsb25nRGVsYXk7XHJcbiAgICAgICAgLy8gSW50ZXJuYWwgZXJyb3Igd2hlbiBpbXByb3Blcmx5IGluaXRpYWxpemVkLlxyXG4gICAgICAgIGRlYnVnQXNzZXJ0KGxvbmdEZWxheSA+IHNob3J0RGVsYXksICdTaG9ydCBkZWxheSBzaG91bGQgYmUgbGVzcyB0aGFuIGxvbmcgZGVsYXkhJyk7XHJcbiAgICAgICAgdGhpcy5pc01vYmlsZSA9IGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKTtcclxuICAgIH1cclxuICAgIGdldCgpIHtcclxuICAgICAgICBpZiAoIV9pc09ubGluZSgpKSB7XHJcbiAgICAgICAgICAgIC8vIFBpY2sgdGhlIHNob3J0ZXIgdGltZW91dC5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKDUwMDAgLyogT0ZGTElORSAqLywgdGhpcy5zaG9ydERlbGF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgcnVubmluZyBpbiBhIG1vYmlsZSBlbnZpcm9ubWVudCwgcmV0dXJuIHRoZSBsb25nIGRlbGF5LCBvdGhlcndpc2VcclxuICAgICAgICAvLyByZXR1cm4gdGhlIHNob3J0IGRlbGF5LlxyXG4gICAgICAgIC8vIFRoaXMgY291bGQgYmUgaW1wcm92ZWQgaW4gdGhlIGZ1dHVyZSB0byBkeW5hbWljYWxseSBjaGFuZ2UgYmFzZWQgb24gb3RoZXJcclxuICAgICAgICAvLyB2YXJpYWJsZXMgaW5zdGVhZCBvZiBqdXN0IHJlYWRpbmcgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB0aGlzLmxvbmdEZWxheSA6IHRoaXMuc2hvcnREZWxheTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZW11bGF0b3JVcmwoY29uZmlnLCBwYXRoKSB7XHJcbiAgICBkZWJ1Z0Fzc2VydChjb25maWcuZW11bGF0b3IsICdFbXVsYXRvciBzaG91bGQgYWx3YXlzIGJlIHNldCBoZXJlJyk7XHJcbiAgICBjb25zdCB7IHVybCB9ID0gY29uZmlnLmVtdWxhdG9yO1xyXG4gICAgaWYgKCFwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHt1cmx9JHtwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRofWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmV0Y2hQcm92aWRlciB7XHJcbiAgICBzdGF0aWMgaW5pdGlhbGl6ZShmZXRjaEltcGwsIGhlYWRlcnNJbXBsLCByZXNwb25zZUltcGwpIHtcclxuICAgICAgICB0aGlzLmZldGNoSW1wbCA9IGZldGNoSW1wbDtcclxuICAgICAgICBpZiAoaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzSW1wbCA9IGhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2VJbXBsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VJbXBsID0gcmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBmZXRjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5mZXRjaEltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdmZXRjaCcgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mZXRjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBmZXRjaCBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBoZWFkZXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNJbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdIZWFkZXJzJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLkhlYWRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgSGVhZGVycyBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyByZXNwb25zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdSZXNwb25zZScgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5SZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBSZXNwb25zZSBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwIGZyb20gZXJyb3JzIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgdG8gZXJyb3JzIHRvIGRldmVsb3BlciB2aXNpYmxlIGVycm9yc1xyXG4gKi9cclxuY29uc3QgU0VSVkVSX0VSUk9SX01BUCA9IHtcclxuICAgIC8vIEN1c3RvbSB0b2tlbiBlcnJvcnMuXHJcbiAgICBbXCJDUkVERU5USUFMX01JU01BVENIXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106IFwiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ1VTVE9NX1RPS0VOXCIgLyogTUlTU0lOR19DVVNUT01fVE9LRU4gKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBDcmVhdGUgQXV0aCBVUkkgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9JREVOVElGSUVSXCIgLyogSU5WQUxJRF9JREVOVElGSUVSICovXTogXCJpbnZhbGlkLWVtYWlsXCIgLyogSU5WQUxJRF9FTUFJTCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ09OVElOVUVfVVJJXCIgLyogTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycyAoc29tZSBhcHBseSB0byBzaWduIHVwIHRvbykuXHJcbiAgICBbXCJJTlZBTElEX1BBU1NXT1JEXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106IFwid3JvbmctcGFzc3dvcmRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19QQVNTV09SRFwiIC8qIE1JU1NJTkdfUEFTU1dPUkQgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIHVwIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycy5cclxuICAgIFtcIkVNQUlMX0VYSVNUU1wiIC8qIEVNQUlMX0VYSVNUUyAqL106IFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBFTUFJTF9FWElTVFMgKi8sXHJcbiAgICBbXCJQQVNTV09SRF9MT0dJTl9ESVNBQkxFRFwiIC8qIFBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEICovXTogXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi8sXHJcbiAgICAvLyBWZXJpZnkgYXNzZXJ0aW9uIGZvciBzaWduIGluIHdpdGggY3JlZGVudGlhbCBlcnJvcnM6XHJcbiAgICBbXCJJTlZBTElEX0lEUF9SRVNQT05TRVwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIklOVkFMSURfUEVORElOR19UT0tFTlwiIC8qIElOVkFMSURfUEVORElOR19UT0tFTiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIEZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovXTogXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfUkVRX1RZUEVcIiAvKiBNSVNTSU5HX1JFUV9UWVBFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2VuZCBQYXNzd29yZCByZXNldCBlbWFpbCBlcnJvcnM6XHJcbiAgICBbXCJFTUFJTF9OT1RfRk9VTkRcIiAvKiBFTUFJTF9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovLFxyXG4gICAgW1wiUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUXCIgLyogUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIFtcIkVYUElSRURfT09CX0NPREVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovXTogXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqLyxcclxuICAgIFtcIklOVkFMSURfT09CX0NPREVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9PT0JfQ09ERSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfT09CX0NPREVcIiAvKiBNSVNTSU5HX09PQl9DT0RFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gT3BlcmF0aW9ucyB0aGF0IHJlcXVpcmUgSUQgdG9rZW4gaW4gcmVxdWVzdDpcclxuICAgIFtcIkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTlwiIC8qIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqL106IFwicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovLFxyXG4gICAgW1wiSU5WQUxJRF9JRF9UT0tFTlwiIC8qIElOVkFMSURfSURfVE9LRU4gKi9dOiBcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqLyxcclxuICAgIFtcIlRPS0VOX0VYUElSRURcIiAvKiBUT0tFTl9FWFBJUkVEICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovLFxyXG4gICAgW1wiVVNFUl9OT1RfRk9VTkRcIiAvKiBVU0VSX05PVF9GT1VORCAqL106IFwidXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqLyxcclxuICAgIC8vIE90aGVyIGVycm9ycy5cclxuICAgIFtcIlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUlwiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106IFwidG9vLW1hbnktcmVxdWVzdHNcIiAvKiBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi8sXHJcbiAgICAvLyBQaG9uZSBBdXRoIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9DT0RFXCIgLyogSU5WQUxJRF9DT0RFICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9DT0RFICovLFxyXG4gICAgW1wiSU5WQUxJRF9TRVNTSU9OX0lORk9cIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106IFwiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIklOVkFMSURfVEVNUE9SQVJZX1BST09GXCIgLyogSU5WQUxJRF9URU1QT1JBUllfUFJPT0YgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiTUlTU0lOR19TRVNTSU9OX0lORk9cIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqL106IFwibWlzc2luZy12ZXJpZmljYXRpb24taWRcIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIlNFU1NJT05fRVhQSVJFRFwiIC8qIFNFU1NJT05fRVhQSVJFRCAqL106IFwiY29kZS1leHBpcmVkXCIgLyogQ09ERV9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgYWN0aW9uIGNvZGUgZXJyb3JzIHdoZW4gYWRkaXRpb25hbCBzZXR0aW5ncyBwYXNzZWQuXHJcbiAgICAvLyBNSVNTSU5HX0NPTlRJTlVFX1VSSSBpcyBnZXR0aW5nIG1hcHBlZCB0byBJTlRFUk5BTF9FUlJPUiBhYm92ZS5cclxuICAgIC8vIFRoaXMgaXMgT0sgYXMgdGhpcyBlcnJvciB3aWxsIGJlIGNhdWdodCBieSBjbGllbnQgc2lkZSB2YWxpZGF0aW9uLlxyXG4gICAgW1wiTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi9dOiBcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi8sXHJcbiAgICBbXCJVTkFVVEhPUklaRURfRE9NQUlOXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqL106IFwidW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi8sXHJcbiAgICAvLyBnZXRQcm9qZWN0Q29uZmlnIGVycm9ycyB3aGVuIGNsaWVudElkIGlzIHBhc3NlZC5cclxuICAgIFtcIklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi9dOiBcImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi8sXHJcbiAgICAvLyBVc2VyIGFjdGlvbnMgKHNpZ24tdXAgb3IgZGVsZXRpb24pIGRpc2FibGVkIGVycm9ycy5cclxuICAgIFtcIkFETUlOX09OTFlfT1BFUkFUSU9OXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiBcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi8sXHJcbiAgICAvLyBNdWx0aSBmYWN0b3IgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBJTlZBTElEX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EXCIgLyogTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EICovXTogXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBNRkFfSU5GT19OT1RfRk9VTkQgKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEXCIgLyogTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9FWElTVFNcIiAvKiBTRUNPTkRfRkFDVE9SX0VYSVNUUyAqL106IFwic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqLyxcclxuICAgIFtcIlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERURcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovLFxyXG4gICAgLy8gQmxvY2tpbmcgZnVuY3Rpb25zIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0VcIiAvKiBCTE9DS0lOR19GVU5DVElPTl9FUlJPUl9SRVNQT05TRSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9BUElfVElNRU9VVF9NUyA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5mdW5jdGlvbiBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgaWYgKGF1dGgudGVuYW50SWQgJiYgIXJlcXVlc3QudGVuYW50SWQpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsZXQgYm9keSA9IHt9O1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiIC8qIEdFVCAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcmVxdWVzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSBxdWVyeXN0cmluZyhPYmplY3QuYXNzaWduKHsga2V5OiBhdXRoLmNvbmZpZy5hcGlLZXkgfSwgcGFyYW1zKSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGF1dGguX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiIC8qIENPTlRFTlRfVFlQRSAqL10gPSAnYXBwbGljYXRpb24vanNvbic7XHJcbiAgICAgICAgaWYgKGF1dGgubGFuZ3VhZ2VDb2RlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbXCJYLUZpcmViYXNlLUxvY2FsZVwiIC8qIFhfRklSRUJBU0VfTE9DQUxFICovXSA9IGF1dGgubGFuZ3VhZ2VDb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKF9nZXRGaW5hbFRhcmdldChhdXRoLCBhdXRoLmNvbmZpZy5hcGlIb3N0LCBwYXRoLCBxdWVyeSksIE9iamVjdC5hc3NpZ24oeyBtZXRob2QsXHJcbiAgICAgICAgICAgIGhlYWRlcnMsIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInIH0sIGJvZHkpKTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCBjdXN0b21FcnJvck1hcCwgZmV0Y2hGbikge1xyXG4gICAgYXV0aC5fY2FuSW5pdEVtdWxhdG9yID0gZmFsc2U7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgU0VSVkVSX0VSUk9SX01BUCksIGN1c3RvbUVycm9yTWFwKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBuZXcgTmV0d29ya1RpbWVvdXQoYXV0aCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICAgICAgICBmZXRjaEZuKCksXHJcbiAgICAgICAgICAgIG5ldHdvcmtUaW1lb3V0LnByb21pc2VcclxuICAgICAgICBdKTtcclxuICAgICAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIHRoaXMgcG9pbnQsIHRoZSBmZXRjaCBzdWNjZWVkZWQgYW5kIHRoZSBuZXR3b3JrVGltZW91dFxyXG4gICAgICAgIC8vIGRpZG4ndCB0aHJvdzsgY2xlYXIgdGhlIG5ldHdvcmsgdGltZW91dCBkZWxheSBzbyB0aGF0IE5vZGUgd29uJ3QgaGFuZ1xyXG4gICAgICAgIG5ldHdvcmtUaW1lb3V0LmNsZWFyTmV0d29ya1RpbWVvdXQoKTtcclxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGlmICgnbmVlZENvbmZpcm1hdGlvbicgaW4ganNvbikge1xyXG4gICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovLCBqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rICYmICEoJ2Vycm9yTWVzc2FnZScgaW4ganNvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5vayA/IGpzb24uZXJyb3JNZXNzYWdlIDoganNvbi5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb25zdCBbc2VydmVyRXJyb3JDb2RlLCBzZXJ2ZXJFcnJvck1lc3NhZ2VdID0gZXJyb3JNZXNzYWdlLnNwbGl0KCcgOiAnKTtcclxuICAgICAgICAgICAgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIEZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiIC8qIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0UgKi8sIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJFTUFJTF9FWElTVFNcIiAvKiBFTUFJTF9FWElTVFMgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3JNYXBbc2VydmVyRXJyb3JDb2RlXSB8fFxyXG4gICAgICAgICAgICAgICAgc2VydmVyRXJyb3JDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW19cXHNdKy9nLCAnLScpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBhdXRoRXJyb3IsIHNlcnZlckVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBhdXRoRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLyk7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXAgPSB7fSkge1xyXG4gICAgY29uc3Qgc2VydmVyUmVzcG9uc2UgPSAoYXdhaXQgX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXApKTtcclxuICAgIGlmICgnbWZhUGVuZGluZ0NyZWRlbnRpYWwnIGluIHNlcnZlclJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqLywge1xyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IHNlcnZlclJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VydmVyUmVzcG9uc2U7XHJcbn1cclxuZnVuY3Rpb24gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGhvc3QsIHBhdGgsIHF1ZXJ5KSB7XHJcbiAgICBjb25zdCBiYXNlID0gYCR7aG9zdH0ke3BhdGh9PyR7cXVlcnl9YDtcclxuICAgIGlmICghYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm4gYCR7YXV0aC5jb25maWcuYXBpU2NoZW1lfTovLyR7YmFzZX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9lbXVsYXRvclVybChhdXRoLmNvbmZpZywgYmFzZSk7XHJcbn1cclxuY2xhc3MgTmV0d29ya1RpbWVvdXQge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIGFyZSBmdW5kYW1lbnRhbGx5IGluY29tcGF0aWJsZSwgYnV0IHdlXHJcbiAgICAgICAgLy8gZG9uJ3QgY2FyZSBhYm91dCB0aGUgdmFsdWUgaGVyZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy50aW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwidGltZW91dFwiIC8qIFRJTUVPVVQgKi8pKTtcclxuICAgICAgICAgICAgfSwgREVGQVVMVF9BUElfVElNRU9VVF9NUy5nZXQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhck5ldHdvcmtUaW1lb3V0KCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIGNvZGUsIHJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBlcnJvclBhcmFtcyA9IHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWVcclxuICAgIH07XHJcbiAgICBpZiAocmVzcG9uc2UuZW1haWwpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5lbWFpbCA9IHJlc3BvbnNlLmVtYWlsO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3BvbnNlLnBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgZXJyb3JQYXJhbXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZU51bWJlcjtcclxuICAgIH1cclxuICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIGNvZGUsIGVycm9yUGFyYW1zKTtcclxuICAgIC8vIFdlIGtub3cgY3VzdG9tRGF0YSBpcyBkZWZpbmVkIG9uIGVycm9yIGJlY2F1c2UgZXJyb3JQYXJhbXMgaXMgZGVmaW5lZFxyXG4gICAgZXJyb3IuY3VzdG9tRGF0YS5fdG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlO1xyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFjY291bnQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpkZWxldGVcIiAvKiBERUxFVEVfQUNDT1VOVCAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlTGlua2VkQWNjb3VudHMoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SW5mbyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmxvb2t1cFwiIC8qIEdFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyh1dGNUaW1lc3RhbXApIHtcclxuICAgIGlmICghdXRjVGltZXN0YW1wKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB0byBkYXRlIG9iamVjdC5cclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoTnVtYmVyKHV0Y1RpbWVzdGFtcCkpO1xyXG4gICAgICAgIC8vIFRlc3QgZGF0ZSBpcyB2YWxpZC5cclxuICAgICAgICBpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRvIFVUQyBkYXRlIHN0cmluZy5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9VVENTdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcuIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHVzZXIgdG8gYSBGaXJlYmFzZSBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRva2VuIGlmIGl0IGhhcyBub3QgZXhwaXJlZCBvciBpZiBpdCB3aWxsIG5vdCBleHBpcmUgaW4gdGhlIG5leHQgZml2ZVxyXG4gKiBtaW51dGVzLiBPdGhlcndpc2UsIHRoaXMgd2lsbCByZWZyZXNoIHRoZSB0b2tlbiBhbmQgcmV0dXJuIGEgbmV3IG9uZS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJZFRva2VuKHVzZXIsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIGRlc2VyaWFsaXplZCBKU09OIFdlYiBUb2tlbiAoSldUKSB1c2VkIHRvIGlkZW50aXRmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldElkVG9rZW5SZXN1bHQodXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgIGNvbnN0IGNsYWltcyA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQoY2xhaW1zICYmIGNsYWltcy5leHAgJiYgY2xhaW1zLmF1dGhfdGltZSAmJiBjbGFpbXMuaWF0LCB1c2VySW50ZXJuYWwuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGZpcmViYXNlID0gdHlwZW9mIGNsYWltcy5maXJlYmFzZSA9PT0gJ29iamVjdCcgPyBjbGFpbXMuZmlyZWJhc2UgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgYXV0aFRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmF1dGhfdGltZSkpLFxyXG4gICAgICAgIGlzc3VlZEF0VGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuaWF0KSksXHJcbiAgICAgICAgZXhwaXJhdGlvblRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmV4cCkpLFxyXG4gICAgICAgIHNpZ25JblByb3ZpZGVyOiBzaWduSW5Qcm92aWRlciB8fCBudWxsLFxyXG4gICAgICAgIHNpZ25JblNlY29uZEZhY3RvcjogKGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9zZWNvbmRfZmFjdG9yJ10pIHx8IG51bGxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKHNlY29uZHMpIHtcclxuICAgIHJldHVybiBOdW1iZXIoc2Vjb25kcykgKiAxMDAwO1xyXG59XHJcbmZ1bmN0aW9uIF9wYXJzZVRva2VuKHRva2VuKSB7XHJcbiAgICBjb25zdCBbYWxnb3JpdGhtLCBwYXlsb2FkLCBzaWduYXR1cmVdID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgIGlmIChhbGdvcml0aG0gPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHBheWxvYWQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHNpZ25hdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgX2xvZ0Vycm9yKCdKV1QgbWFsZm9ybWVkLCBjb250YWluZWQgZmV3ZXIgdGhhbiAzIHNlY3Rpb25zJyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBiYXNlNjREZWNvZGUocGF5bG9hZCk7XHJcbiAgICAgICAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICAgICAgICAgIF9sb2dFcnJvcignRmFpbGVkIHRvIGRlY29kZSBiYXNlNjQgSldUIHBheWxvYWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlY29kZWQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0NhdWdodCBlcnJvciBwYXJzaW5nIEpXVCBwYXlsb2FkIGFzIEpTT04nLCBlKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdCBleHBpcmVzSW4gVFRMIGZyb20gYSB0b2tlbiBieSBzdWJ0cmFjdGluZyB0aGUgZXhwaXJhdGlvbiBmcm9tIHRoZSBpc3N1YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIF90b2tlbkV4cGlyZXNJbih0b2tlbikge1xyXG4gICAgY29uc3QgcGFyc2VkVG9rZW4gPSBfcGFyc2VUb2tlbih0b2tlbik7XHJcbiAgICBfYXNzZXJ0KHBhcnNlZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uZXhwICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIHBhcnNlZFRva2VuLmlhdCAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTnVtYmVyKHBhcnNlZFRva2VuLmV4cCkgLSBOdW1iZXIocGFyc2VkVG9rZW4uaWF0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBwcm9taXNlLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgaWYgKGJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmIGlzVXNlckludmFsaWRhdGVkKGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyLmF1dGguY3VycmVudFVzZXIgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVzZXIuYXV0aC5zaWduT3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1VzZXJJbnZhbGlkYXRlZCh7IGNvZGUgfSkge1xyXG4gICAgcmV0dXJuIChjb2RlID09PSBgYXV0aC8ke1widXNlci1kaXNhYmxlZFwiIC8qIFVTRVJfRElTQUJMRUQgKi99YCB8fFxyXG4gICAgICAgIGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovfWApO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFByb2FjdGl2ZVJlZnJlc2gge1xyXG4gICAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICB9XHJcbiAgICBfc3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxuICAgIF9zdG9wKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0SW50ZXJ2YWwod2FzRXJyb3IpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHdhc0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5lcnJvckJhY2tvZmY7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gTWF0aC5taW4odGhpcy5lcnJvckJhY2tvZmYgKiAyLCA5NjAwMDAgLyogUkVUUllfQkFDS09GRl9NQVggKi8pO1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZXJyb3IgYmFja29mZlxyXG4gICAgICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IDMwMDAwIC8qIFJFVFJZX0JBQ0tPRkZfTUlOICovO1xyXG4gICAgICAgICAgICBjb25zdCBleHBUaW1lID0gKF9hID0gdGhpcy51c2VyLnN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBleHBUaW1lIC0gRGF0ZS5ub3coKSAtIDMwMDAwMCAvKiBPRkZTRVQgKi87XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBpbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2NoZWR1bGUod2FzRXJyb3IgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgLy8gSnVzdCBpbiBjYXNlLi4uXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKHdhc0Vycm9yKTtcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVyYXRpb24oKTtcclxuICAgICAgICB9LCBpbnRlcnZhbCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpdGVyYXRpb24oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4odHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgcmV0cnkgb24gbmV0d29yayBlcnJvcnNcclxuICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoLyogd2FzRXJyb3IgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlck1ldGFkYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWF0ZWRBdCwgbGFzdExvZ2luQXQpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplVGltZSgpIHtcclxuICAgICAgICB0aGlzLmxhc3RTaWduSW5UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMubGFzdExvZ2luQXQpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRpb25UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMuY3JlYXRlZEF0KTtcclxuICAgIH1cclxuICAgIF9jb3B5KG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgdGhpcy5sYXN0TG9naW5BdCA9IG1ldGFkYXRhLmxhc3RMb2dpbkF0O1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVUaW1lKCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbGFzdExvZ2luQXQ6IHRoaXMubGFzdExvZ2luQXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGggPSB1c2VyLmF1dGg7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGdldEFjY291bnRJbmZvKGF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICBfYXNzZXJ0KHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS51c2Vycy5sZW5ndGgsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBjb25zdCBjb3JlQWNjb3VudCA9IHJlc3BvbnNlLnVzZXJzWzBdO1xyXG4gICAgdXNlci5fbm90aWZ5UmVsb2FkTGlzdGVuZXIoY29yZUFjY291bnQpO1xyXG4gICAgY29uc3QgbmV3UHJvdmlkZXJEYXRhID0gKChfYSA9IGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpXHJcbiAgICAgICAgPyBleHRyYWN0UHJvdmlkZXJEYXRhKGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pXHJcbiAgICAgICAgOiBbXTtcclxuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IG1lcmdlUHJvdmlkZXJEYXRhKHVzZXIucHJvdmlkZXJEYXRhLCBuZXdQcm92aWRlckRhdGEpO1xyXG4gICAgLy8gUHJlc2VydmVzIHRoZSBub24tbm9ueW1vdXMgc3RhdHVzIG9mIHRoZSBzdG9yZWQgdXNlciwgZXZlbiBpZiBubyBtb3JlXHJcbiAgICAvLyBjcmVkZW50aWFscyAoZmVkZXJhdGVkIG9yIGVtYWlsL3Bhc3N3b3JkKSBhcmUgbGlua2VkIHRvIHRoZSB1c2VyLiBJZlxyXG4gICAgLy8gdGhlIHVzZXIgd2FzIHByZXZpb3VzbHkgYW5vbnltb3VzLCB0aGVuIHVzZSBwcm92aWRlciBkYXRhIHRvIHVwZGF0ZS5cclxuICAgIC8vIE9uIHRoZSBvdGhlciBoYW5kLCBpZiBpdCB3YXMgbm90IGFub255bW91cyBiZWZvcmUsIGl0IHNob3VsZCBuZXZlciBiZVxyXG4gICAgLy8gY29uc2lkZXJlZCBhbm9ueW1vdXMgbm93LlxyXG4gICAgY29uc3Qgb2xkSXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgbmV3SXNBbm9ueW1vdXMgPSAhKHVzZXIuZW1haWwgJiYgY29yZUFjY291bnQucGFzc3dvcmRIYXNoKSAmJiAhKHByb3ZpZGVyRGF0YSA9PT0gbnVsbCB8fCBwcm92aWRlckRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3ZpZGVyRGF0YS5sZW5ndGgpO1xyXG4gICAgY29uc3QgaXNBbm9ueW1vdXMgPSAhb2xkSXNBbm9ueW1vdXMgPyBmYWxzZSA6IG5ld0lzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgdXBkYXRlcyA9IHtcclxuICAgICAgICB1aWQ6IGNvcmVBY2NvdW50LmxvY2FsSWQsXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IGNvcmVBY2NvdW50LmRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgICAgcGhvdG9VUkw6IGNvcmVBY2NvdW50LnBob3RvVXJsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWw6IGNvcmVBY2NvdW50LmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWxWZXJpZmllZDogY29yZUFjY291bnQuZW1haWxWZXJpZmllZCB8fCBmYWxzZSxcclxuICAgICAgICBwaG9uZU51bWJlcjogY29yZUFjY291bnQucGhvbmVOdW1iZXIgfHwgbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogY29yZUFjY291bnQudGVuYW50SWQgfHwgbnVsbCxcclxuICAgICAgICBwcm92aWRlckRhdGEsXHJcbiAgICAgICAgbWV0YWRhdGE6IG5ldyBVc2VyTWV0YWRhdGEoY29yZUFjY291bnQuY3JlYXRlZEF0LCBjb3JlQWNjb3VudC5sYXN0TG9naW5BdCksXHJcbiAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgIH07XHJcbiAgICBPYmplY3QuYXNzaWduKHVzZXIsIHVwZGF0ZXMpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWxvYWRzIHVzZXIgYWNjb3VudCBkYXRhLCBpZiBzaWduZWQgaW4uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbG9hZCh1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VySW50ZXJuYWwpO1xyXG4gICAgLy8gRXZlbiB0aG91Z2ggdGhlIGN1cnJlbnQgdXNlciBoYXNuJ3QgY2hhbmdlZCwgdXBkYXRlXHJcbiAgICAvLyBjdXJyZW50IHVzZXIgd2lsbCB0cmlnZ2VyIGEgcGVyc2lzdGVuY2UgdXBkYXRlIHcvIHRoZVxyXG4gICAgLy8gbmV3IGluZm8uXHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxuICAgIHVzZXJJbnRlcm5hbC5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZVByb3ZpZGVyRGF0YShvcmlnaW5hbCwgbmV3RGF0YSkge1xyXG4gICAgY29uc3QgZGVkdXBlZCA9IG9yaWdpbmFsLmZpbHRlcihvID0+ICFuZXdEYXRhLnNvbWUobiA9PiBuLnByb3ZpZGVySWQgPT09IG8ucHJvdmlkZXJJZCkpO1xyXG4gICAgcmV0dXJuIFsuLi5kZWR1cGVkLCAuLi5uZXdEYXRhXTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0UHJvdmlkZXJEYXRhKHByb3ZpZGVycykge1xyXG4gICAgcmV0dXJuIHByb3ZpZGVycy5tYXAoKF9hKSA9PiB7XHJcbiAgICAgICAgdmFyIHsgcHJvdmlkZXJJZCB9ID0gX2EsIHByb3ZpZGVyID0gX19yZXN0KF9hLCBbXCJwcm92aWRlcklkXCJdKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICB1aWQ6IHByb3ZpZGVyLnJhd0lkIHx8ICcnLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcHJvdmlkZXIuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICAgICAgZW1haWw6IHByb3ZpZGVyLmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyOiBwcm92aWRlci5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgICAgICBwaG90b1VSTDogcHJvdmlkZXIucGhvdG9VcmwgfHwgbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgcmVmcmVzaFRva2VuKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCB7fSwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICdncmFudF90eXBlJzogJ3JlZnJlc2hfdG9rZW4nLFxyXG4gICAgICAgICAgICAncmVmcmVzaF90b2tlbic6IHJlZnJlc2hUb2tlblxyXG4gICAgICAgIH0pLnNsaWNlKDEpO1xyXG4gICAgICAgIGNvbnN0IHsgdG9rZW5BcGlIb3N0LCBhcGlLZXkgfSA9IGF1dGguY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRGaW5hbFRhcmdldChhdXRoLCB0b2tlbkFwaUhvc3QsIFwiL3YxL3Rva2VuXCIgLyogVE9LRU4gKi8sIGBrZXk9JHthcGlLZXl9YCk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGF1dGguX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiIC8qIENPTlRFTlRfVFlQRSAqL10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiIC8qIFBPU1QgKi8sXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHlcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gVGhlIHJlc3BvbnNlIGNvbWVzIGJhY2sgaW4gc25ha2VfY2FzZS4gQ29udmVydCB0byBjYW1lbDpcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWNjZXNzVG9rZW46IHJlc3BvbnNlLmFjY2Vzc190b2tlbixcclxuICAgICAgICBleHBpcmVzSW46IHJlc3BvbnNlLmV4cGlyZXNfaW4sXHJcbiAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZS5yZWZyZXNoX3Rva2VuXHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBXZSBuZWVkIHRvIG1hcmsgdGhpcyBjbGFzcyBhcyBpbnRlcm5hbCBleHBsaWNpdGx5IHRvIGV4Y2x1ZGUgaXQgaW4gdGhlIHB1YmxpYyB0eXBpbmdzLCBiZWNhdXNlXHJcbiAqIGl0IHJlZmVyZW5jZXMgQXV0aEludGVybmFsIHdoaWNoIGhhcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBVc2VySW50ZXJuYWwuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgU3RzVG9rZW5NYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gbnVsbDtcclxuICAgIH1cclxuICAgIGdldCBpc0V4cGlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5leHBpcmF0aW9uVGltZSB8fFxyXG4gICAgICAgICAgICBEYXRlLm5vdygpID4gdGhpcy5leHBpcmF0aW9uVGltZSAtIDMwMDAwIC8qIFRPS0VOX1JFRlJFU0ggKi8pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLmlkVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgZXhwaXJlc0luID0gJ2V4cGlyZXNJbicgaW4gcmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLmV4cGlyZXNJbiAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgPyBOdW1iZXIocmVzcG9uc2UuZXhwaXJlc0luKVxyXG4gICAgICAgICAgICA6IF90b2tlbkV4cGlyZXNJbihyZXNwb25zZS5pZFRva2VuKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24ocmVzcG9uc2UuaWRUb2tlbiwgcmVzcG9uc2UucmVmcmVzaFRva2VuLCBleHBpcmVzSW4pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oYXV0aCwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLmFjY2Vzc1Rva2VuIHx8IHRoaXMucmVmcmVzaFRva2VuLCBhdXRoLCBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8pO1xyXG4gICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIHRoaXMuYWNjZXNzVG9rZW4gJiYgIXRoaXMuaXNFeHBpcmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKGF1dGgsIHRoaXMucmVmcmVzaFRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xlYXJSZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVmcmVzaChhdXRoLCBvbGRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luIH0gPSBhd2FpdCByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgb2xkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBOdW1iZXIoZXhwaXJlc0luKSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJblNlYykge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IERhdGUubm93KCkgKyBleHBpcmVzSW5TZWMgKiAxMDAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKGFwcE5hbWUsIG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuLCBhY2Nlc3NUb2tlbiwgZXhwaXJhdGlvblRpbWUgfSA9IG9iamVjdDtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVmcmVzaFRva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIGFjY2Vzc1Rva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChleHBpcmF0aW9uVGltZSkge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBleHBpcmF0aW9uVGltZSA9PT0gJ251bWJlcicsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5leHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHRoaXMucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHRoaXMuZXhwaXJhdGlvblRpbWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbihzdHNUb2tlbk1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gc3RzVG9rZW5NYW5hZ2VyLnJlZnJlc2hUb2tlbjtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lO1xyXG4gICAgfVxyXG4gICAgX2Nsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBTdHNUb2tlbk1hbmFnZXIoKSwgdGhpcy50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICBfcGVyZm9ybVJlZnJlc2goKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoYXNzZXJ0aW9uLCBhcHBOYW1lKSB7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhc3NlcnRpb24gPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBhc3NlcnRpb24gPT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHsgYXBwTmFtZSB9KTtcclxufVxyXG5jbGFzcyBVc2VySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihfYSkge1xyXG4gICAgICAgIHZhciB7IHVpZCwgYXV0aCwgc3RzVG9rZW5NYW5hZ2VyIH0gPSBfYSwgb3B0ID0gX19yZXN0KF9hLCBbXCJ1aWRcIiwgXCJhdXRoXCIsIFwic3RzVG9rZW5NYW5hZ2VyXCJdKTtcclxuICAgICAgICAvLyBGb3IgdGhlIHVzZXIgb2JqZWN0LCBwcm92aWRlciBpcyBhbHdheXMgRmlyZWJhc2UuXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gXCJmaXJlYmFzZVwiIC8qIEZJUkVCQVNFICovO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaCA9IG5ldyBQcm9hY3RpdmVSZWZyZXNoKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudWlkID0gdWlkO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIgPSBzdHNUb2tlbk1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gb3B0LmRpc3BsYXlOYW1lIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IG9wdC5lbWFpbCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IG9wdC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSBvcHQucGhvbmVOdW1iZXIgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gb3B0LnBob3RvVVJMIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IG9wdC5pc0Fub255bW91cyB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gb3B0LnRlbmFudElkIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBVc2VyTWV0YWRhdGEob3B0LmNyZWF0ZWRBdCB8fCB1bmRlZmluZWQsIG9wdC5sYXN0TG9naW5BdCB8fCB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmdldFRva2VuKHRoaXMuYXV0aCwgZm9yY2VSZWZyZXNoKSk7XHJcbiAgICAgICAgX2Fzc2VydChhY2Nlc3NUb2tlbiwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICE9PSBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiBnZXRJZFRva2VuUmVzdWx0KHRoaXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbG9hZCh0aGlzKTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24odXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnVpZCA9PT0gdXNlci51aWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gdXNlci5waG90b1VSTDtcclxuICAgICAgICB0aGlzLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSB1c2VyLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHVzZXIucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IHVzZXIudGVuYW50SWQ7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSB1c2VyLnByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEuX2NvcHkodXNlci5tZXRhZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Fzc2lnbih1c2VyLnN0c1Rva2VuTWFuYWdlcik7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckltcGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzKSwgeyBhdXRoLCBzdHNUb2tlbk1hbmFnZXI6IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9jbG9uZSgpIH0pKTtcclxuICAgIH1cclxuICAgIF9vblJlbG9hZChjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIGxpc3RlbmVyLCBhbmQgdGhhdCBpcyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBNdWx0aUZhY3RvclVzZXJcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLnJlbG9hZExpc3RlbmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IGNhbGxiYWNrO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZFVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlbG9hZExpc3RlbmVyKHRoaXMucmVsb2FkVXNlckluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfbm90aWZ5UmVsb2FkTGlzdGVuZXIodXNlckluZm8pIHtcclxuICAgICAgICBpZiAodGhpcy5yZWxvYWRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyKHVzZXJJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGxpc3RlbmVyIGlzIHN1YnNjcmliZWQgeWV0LCBzYXZlIHRoZSByZXN1bHQgc28gaXQncyBhdmFpbGFibGUgd2hlbiB0aGV5IGRvIHN1YnNjcmliZVxyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gdXNlckluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoLl9zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIHJlbG9hZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHRva2Vuc1JlZnJlc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5pZFRva2VuICYmXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmlkVG9rZW4gIT09IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHRva2Vuc1JlZnJlc2hlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWxvYWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgaWYgKHRva2Vuc1JlZnJlc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIGRlbGV0ZUFjY291bnQodGhpcy5hdXRoLCB7IGlkVG9rZW4gfSkpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmNsZWFyUmVmcmVzaFRva2VuKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRGV0ZXJtaW5lIGlmIGNhbmNlbGxhYmxlLXByb21pc2VzIGFyZSBuZWNlc3NhcnkgdG8gdXNlIGluIHRoaXMgY2xhc3Mgc28gdGhhdCBkZWxldGUoKVxyXG4gICAgICAgIC8vICAgICAgIGNhbmNlbHMgcGVuZGluZyBhY3Rpb25zLi4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5zaWduT3V0KCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IHVpZDogdGhpcy51aWQsIGVtYWlsOiB0aGlzLmVtYWlsIHx8IHVuZGVmaW5lZCwgZW1haWxWZXJpZmllZDogdGhpcy5lbWFpbFZlcmlmaWVkLCBkaXNwbGF5TmFtZTogdGhpcy5kaXNwbGF5TmFtZSB8fCB1bmRlZmluZWQsIGlzQW5vbnltb3VzOiB0aGlzLmlzQW5vbnltb3VzLCBwaG90b1VSTDogdGhpcy5waG90b1VSTCB8fCB1bmRlZmluZWQsIHBob25lTnVtYmVyOiB0aGlzLnBob25lTnVtYmVyIHx8IHVuZGVmaW5lZCwgdGVuYW50SWQ6IHRoaXMudGVuYW50SWQgfHwgdW5kZWZpbmVkLCBwcm92aWRlckRhdGE6IHRoaXMucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSksIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIudG9KU09OKCksIFxyXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBldmVudCBJRCBtdXN0IGJlIG1haW50YWluZWQgaW4gY2FzZSB0aGVyZSBpcyBhIHBlbmRpbmdcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgICAgIF9yZWRpcmVjdEV2ZW50SWQ6IHRoaXMuX3JlZGlyZWN0RXZlbnRJZCB9LCB0aGlzLm1ldGFkYXRhLnRvSlNPTigpKSwgeyBcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgbGVnYWN5IFNESyAoZ28vZmlyZWJhc2UtYXV0aC1zZGstcGVyc2lzdGVuY2UtcGFyc2luZyk6XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hdXRoLmNvbmZpZy5hcGlLZXksIGFwcE5hbWU6IHRoaXMuYXV0aC5uYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSlNPTihhdXRoLCBvYmplY3QpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKF9hID0gb2JqZWN0LmRpc3BsYXlOYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSAoX2IgPSBvYmplY3QuZW1haWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwaG9uZU51bWJlciA9IChfYyA9IG9iamVjdC5waG9uZU51bWJlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob3RvVVJMID0gKF9kID0gb2JqZWN0LnBob3RvVVJMKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSAoX2UgPSBvYmplY3QudGVuYW50SWQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBfcmVkaXJlY3RFdmVudElkID0gKF9mID0gb2JqZWN0Ll9yZWRpcmVjdEV2ZW50SWQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBjcmVhdGVkQXQgPSAoX2cgPSBvYmplY3QuY3JlYXRlZEF0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgbGFzdExvZ2luQXQgPSAoX2ggPSBvYmplY3QubGFzdExvZ2luQXQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB7IHVpZCwgZW1haWxWZXJpZmllZCwgaXNBbm9ueW1vdXMsIHByb3ZpZGVyRGF0YSwgc3RzVG9rZW5NYW5hZ2VyOiBwbGFpbk9iamVjdFRva2VuTWFuYWdlciB9ID0gb2JqZWN0O1xyXG4gICAgICAgIF9hc3NlcnQodWlkICYmIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IFN0c1Rva2VuTWFuYWdlci5mcm9tSlNPTih0aGlzLm5hbWUsIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiB1aWQgPT09ICdzdHJpbmcnLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGRpc3BsYXlOYW1lLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGVtYWlsLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGVtYWlsVmVyaWZpZWQgPT09ICdib29sZWFuJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBpc0Fub255bW91cyA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob25lTnVtYmVyLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob3RvVVJMLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHRlbmFudElkLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKF9yZWRpcmVjdEV2ZW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoY3JlYXRlZEF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGxhc3RMb2dpbkF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlckltcGwoe1xyXG4gICAgICAgICAgICB1aWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXMsXHJcbiAgICAgICAgICAgIHBob3RvVVJMLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVuYW50SWQsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChwcm92aWRlckRhdGEgJiYgQXJyYXkuaXNBcnJheShwcm92aWRlckRhdGEpKSB7XHJcbiAgICAgICAgICAgIHVzZXIucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9IF9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGEgVXNlciBmcm9tIGFuIGlkVG9rZW4gc2VydmVyIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gYXV0aFxyXG4gICAgICogQHBhcmFtIGlkVG9rZW5SZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIHN0c1Rva2VuTWFuYWdlci51cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBGaXJlYmFzZSBBdXRoIHVzZXIuXHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZDogaWRUb2tlblJlc3BvbnNlLmxvY2FsSWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBVcGRhdGVzIHRoZSB1c2VyIGluZm8gYW5kIGRhdGEgYW5kIHJlc29sdmVzIHdpdGggYSB1c2VyIGluc3RhbmNlLlxyXG4gICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEluTWVtb3J5UGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJOT05FXCIgLyogTk9ORSAqLztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB7fTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVtrZXldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Jbk1lbW9yeVBlcnNpc3RlbmNlLnR5cGUgPSAnTk9ORSc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgJ05PTkUnLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbk1lbW9yeVBlcnNpc3RlbmNlID0gSW5NZW1vcnlQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3BlcnNpc3RlbmNlS2V5TmFtZShrZXksIGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke1wiZmlyZWJhc2VcIiAvKiBQRVJTSVNURU5DRSAqL306JHtrZXl9OiR7YXBpS2V5fToke2FwcE5hbWV9YDtcclxufVxyXG5jbGFzcyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy51c2VyS2V5ID0gdXNlcktleTtcclxuICAgICAgICBjb25zdCB7IGNvbmZpZywgbmFtZSB9ID0gdGhpcy5hdXRoO1xyXG4gICAgICAgIHRoaXMuZnVsbFVzZXJLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHRoaXMudXNlcktleSwgY29uZmlnLmFwaUtleSwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5mdWxsUGVyc2lzdGVuY2VLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKFwicGVyc2lzdGVuY2VcIiAvKiBQRVJTSVNURU5DRV9VU0VSICovLCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gYXV0aC5fb25TdG9yYWdlRXZlbnQuYmluZChhdXRoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9hZGRMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFVzZXJLZXksIHVzZXIudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuX2dldCh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgICAgICByZXR1cm4gYmxvYiA/IFVzZXJJbXBsLl9mcm9tSlNPTih0aGlzLmF1dGgsIGJsb2IpIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZUN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmUodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICB9XHJcbiAgICBzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5LCB0aGlzLnBlcnNpc3RlbmNlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2V0UGVyc2lzdGVuY2UobmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSA9PT0gbmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IG5ld1BlcnNpc3RlbmNlO1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VXNlcihjdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZUxpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShhdXRoLCBwZXJzaXN0ZW5jZUhpZXJhcmNoeSwgdXNlcktleSA9IFwiYXV0aFVzZXJcIiAvKiBBVVRIX1VTRVIgKi8pIHtcclxuICAgICAgICBpZiAoIXBlcnNpc3RlbmNlSGllcmFyY2h5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxpbWluYXRlIGFueSBwZXJzaXN0ZW5jZXMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVBlcnNpc3RlbmNlcyA9IChhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSkpKS5maWx0ZXIocGVyc2lzdGVuY2UgPT4gcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgZmlyc3QgcGVyc2lzdGVuY2UgbGlzdGVkLCBvciBpbiBtZW1vcnkgaWYgbm9uZSBhdmFpbGFibGVcclxuICAgICAgICBsZXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlc1swXSB8fFxyXG4gICAgICAgICAgICBfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh1c2VyS2V5LCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbiAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGV4aXN0aW5nIHVzZXIsIHNldHRpbmcgdGhlIGNob3NlbiBwZXJzaXN0ZW5jZSB0byB0aGF0XHJcbiAgICAgICAgLy8gcGVyc2lzdGVuY2UgaWYgdGhlIHVzZXIgZXhpc3RzLlxyXG4gICAgICAgIGxldCB1c2VyVG9NaWdyYXRlID0gbnVsbDtcclxuICAgICAgICAvLyBOb3RlLCBoZXJlIHdlIGNoZWNrIGZvciBhIHVzZXIgaW4gX2FsbF8gcGVyc2lzdGVuY2VzLCBub3QganVzdCB0aGVcclxuICAgICAgICAvLyBvbmVzIGRlZW1lZCBhdmFpbGFibGUuIElmIHdlIGNhbiBtaWdyYXRlIGEgdXNlciBvdXQgb2YgYSBicm9rZW5cclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSwgd2Ugd2lsbCAoYnV0IG9ubHkgaWYgdGhhdCBwZXJzaXN0ZW5jZSBzdXBwb3J0cyBtaWdyYXRpb24pLlxyXG4gICAgICAgIGZvciAoY29uc3QgcGVyc2lzdGVuY2Ugb2YgcGVyc2lzdGVuY2VIaWVyYXJjaHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBVc2VySW1wbC5fZnJvbUpTT04oYXV0aCwgYmxvYik7IC8vIHRocm93cyBmb3IgdW5wYXJzYWJsZSBibG9iICh3cm9uZyBmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJUb01pZ3JhdGUgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGUgdXNlciBpbiBhIHBlcnNpc3RlbmNlIHRoYXQgZG9lcyBzdXBwb3J0IG1pZ3JhdGlvbiwgdXNlXHJcbiAgICAgICAgLy8gdGhhdCBtaWdyYXRpb24gcGF0aCAob2Ygb25seSBwZXJzaXN0ZW5jZXMgdGhhdCBzdXBwb3J0IG1pZ3JhdGlvbilcclxuICAgICAgICBjb25zdCBtaWdyYXRpb25IaWVyYXJjaHkgPSBhdmFpbGFibGVQZXJzaXN0ZW5jZXMuZmlsdGVyKHAgPT4gcC5fc2hvdWxkQWxsb3dNaWdyYXRpb24pO1xyXG4gICAgICAgIC8vIElmIHRoZSBwZXJzaXN0ZW5jZSBkb2VzIF9ub3RfIGFsbG93IG1pZ3JhdGlvbiwganVzdCBmaW5pc2ggb2ZmIGhlcmVcclxuICAgICAgICBpZiAoIXNlbGVjdGVkUGVyc2lzdGVuY2UuX3Nob3VsZEFsbG93TWlncmF0aW9uIHx8XHJcbiAgICAgICAgICAgICFtaWdyYXRpb25IaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IG1pZ3JhdGlvbkhpZXJhcmNoeVswXTtcclxuICAgICAgICBpZiAodXNlclRvTWlncmF0ZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG5vcm1hbGx5IHNob3VsZG4ndCB0aHJvdyBzaW5jZSBjaG9zZW5QZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpIGlzIHRydWUsIGJ1dCBpZiBpdCBkb2VzXHJcbiAgICAgICAgICAgIC8vIHdlJ2xsIGp1c3QgbGV0IGl0IGJ1YmJsZSB0byBzdXJmYWNlIHRoZSBlcnJvci5cclxuICAgICAgICAgICAgYXdhaXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2V0KGtleSwgdXNlclRvTWlncmF0ZS50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gY2xlYXIgdGhlIGtleSBpbiBvdGhlciBwZXJzaXN0ZW5jZXMgYnV0IGlnbm9yZSBlcnJvcnMuIFRoaXMgaGVscHMgcHJldmVudCBpc3N1ZXNcclxuICAgICAgICAvLyBzdWNoIGFzIHVzZXJzIGdldHRpbmcgc3R1Y2sgd2l0aCBhIHByZXZpb3VzIGFjY291bnQgYWZ0ZXIgc2lnbmluZyBvdXQgYW5kIHJlZnJlc2hpbmcgdGhlIHRhYi5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGV0ZXJtaW5lIHRoZSBicm93c2VyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVwb3J0aW5nIHVzYWdlIHRvIHRoZSBBUElcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRCcm93c2VyTmFtZSh1c2VyQWdlbnQpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAodWEuaW5jbHVkZXMoJ29wZXJhLycpIHx8IHVhLmluY2x1ZGVzKCdvcHIvJykgfHwgdWEuaW5jbHVkZXMoJ29waW9zLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiT3BlcmFcIiAvKiBPUEVSQSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0lFTW9iaWxlKHVhKSkge1xyXG4gICAgICAgIC8vIFdpbmRvd3MgcGhvbmUgSUVNb2JpbGUgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJJRU1vYmlsZVwiIC8qIElFTU9CSUxFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ21zaWUnKSB8fCB1YS5pbmNsdWRlcygndHJpZGVudC8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIklFXCIgLyogSUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIkVkZ2VcIiAvKiBFREdFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzRmlyZWZveCh1YSkpIHtcclxuICAgICAgICByZXR1cm4gXCJGaXJlZm94XCIgLyogRklSRUZPWCAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdzaWxrLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2lsa1wiIC8qIFNJTEsgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNCbGFja0JlcnJ5KHVhKSkge1xyXG4gICAgICAgIC8vIEJsYWNrYmVycnkgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJCbGFja2JlcnJ5XCIgLyogQkxBQ0tCRVJSWSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc1dlYk9TKHVhKSkge1xyXG4gICAgICAgIC8vIFdlYk9TIGRlZmF1bHQgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJXZWJvc1wiIC8qIFdFQk9TICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzU2FmYXJpKHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIlNhZmFyaVwiIC8qIFNBRkFSSSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCh1YS5pbmNsdWRlcygnY2hyb21lLycpIHx8IF9pc0Nocm9tZUlPUyh1YSkpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hyb21lXCIgLyogQ0hST01FICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCh1YSkpIHtcclxuICAgICAgICAvLyBBbmRyb2lkIHN0b2NrIGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiIC8qIEFORFJPSUQgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBNb3N0IG1vZGVybiBicm93c2VycyBoYXZlIG5hbWUvdmVyc2lvbiBhdCBlbmQgb2YgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAgICAgICAgY29uc3QgcmUgPSAvKFthLXpBLVpcXGRcXC5dKylcXC9bYS16QS1aXFxkXFwuXSokLztcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXNlckFnZW50Lm1hdGNoKHJlKTtcclxuICAgICAgICBpZiAoKG1hdGNoZXMgPT09IG51bGwgfHwgbWF0Y2hlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hlcy5sZW5ndGgpID09PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIk90aGVyXCIgLyogT1RIRVIgKi87XHJcbn1cclxuZnVuY3Rpb24gX2lzRmlyZWZveCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvZmlyZWZveFxcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1NhZmFyaSh1c2VyQWdlbnQgPSBnZXRVQSgpKSB7XHJcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuICh1YS5pbmNsdWRlcygnc2FmYXJpLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdjaHJvbWUvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2NyaW9zLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdhbmRyb2lkJykpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0Nocm9tZUlPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvY3Jpb3NcXC8vaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRU1vYmlsZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaWVtb2JpbGUvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNBbmRyb2lkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9hbmRyb2lkL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQmxhY2tCZXJyeSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1dlYk9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC93ZWJvcy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUzdPcjgodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDdfXFxkL2kudGVzdCh1YSkgfHxcclxuICAgICAgICAvKGlQYWR8aVBob25lfGlQb2QpLipPUyA4X1xcZC9pLnRlc3QodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1NTdGFuZGFsb25lKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuIF9pc0lPUyh1YSkgJiYgISEoKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YW5kYWxvbmUpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFMTAoKSB7XHJcbiAgICByZXR1cm4gaXNJRSgpICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gMTA7XHJcbn1cclxuZnVuY3Rpb24gX2lzTW9iaWxlQnJvd3Nlcih1YSA9IGdldFVBKCkpIHtcclxuICAgIC8vIFRPRE86IGltcGxlbWVudCBnZXRCcm93c2VyTmFtZSBlcXVpdmFsZW50IGZvciBPUy5cclxuICAgIHJldHVybiAoX2lzSU9TKHVhKSB8fFxyXG4gICAgICAgIF9pc0FuZHJvaWQodWEpIHx8XHJcbiAgICAgICAgX2lzV2ViT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQmxhY2tCZXJyeSh1YSkgfHxcclxuICAgICAgICAvd2luZG93cyBwaG9uZS9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgX2lzSUVNb2JpbGUodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJZnJhbWUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGN1cnJlbnQgd2luZG93IGlzIG5vdCB0aGUgdG9wIHdpbmRvdy5cclxuICAgICAgICAvLyBJZiBzbywgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgcmV0dXJuICEhKHdpbmRvdyAmJiB3aW5kb3cgIT09IHdpbmRvdy50b3ApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLypcclxuICogRGV0ZXJtaW5lIHRoZSBTREsgdmVyc2lvbiBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtLCBmcmFtZXdvcmtzID0gW10pIHtcclxuICAgIGxldCByZXBvcnRlZFBsYXRmb3JtO1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLzpcclxuICAgICAgICAgICAgLy8gSW4gYSBicm93c2VyIGVudmlyb25tZW50LCByZXBvcnQgdGhlIGJyb3dzZXIgbmFtZS5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IF9nZXRCcm93c2VyTmFtZShnZXRVQSgpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgYSB3b3JrZXIgcnVucyBmcm9tIGEgYnJvd3NlciBidXQgd2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGFcclxuICAgICAgICAgICAgLy8gd29ya2VyIGZyb20gYSBicm93c2VyLlxyXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogQ2hyb21lLVdvcmtlci9Kc0NvcmUvNC45LjEvRmlyZWJhc2VDb3JlLXdlYi5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGAke19nZXRCcm93c2VyTmFtZShnZXRVQSgpKX0tJHtjbGllbnRQbGF0Zm9ybX1gO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gY2xpZW50UGxhdGZvcm07XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXBvcnRlZEZyYW1ld29ya3MgPSBmcmFtZXdvcmtzLmxlbmd0aFxyXG4gICAgICAgID8gZnJhbWV3b3Jrcy5qb2luKCcsJylcclxuICAgICAgICA6ICdGaXJlYmFzZUNvcmUtd2ViJzsgLyogZGVmYXVsdCB2YWx1ZSBpZiBubyBvdGhlciBmcmFtZXdvcmsgaXMgdXNlZCAqL1xyXG4gICAgcmV0dXJuIGAke3JlcG9ydGVkUGxhdGZvcm19LyR7XCJKc0NvcmVcIiAvKiBDT1JFICovfS8ke1NES19WRVJTSU9OfS8ke3JlcG9ydGVkRnJhbWV3b3Jrc31gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbXVsYXRvckNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFueSBuZXR3b3JrIGNhbGxzIHdpbGwgc2V0IHRoaXMgdG8gdHJ1ZSBhbmQgcHJldmVudCBzdWJzZXF1ZW50IGVtdWxhdG9yXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgICAgICB0aGlzLl9jYW5Jbml0RW11bGF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRmFjdG9yeSA9IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWTtcclxuICAgICAgICAvLyBUcmFja3MgdGhlIGxhc3Qgbm90aWZpZWQgVUlEIGZvciBzdGF0ZSBjaGFuZ2UgbGlzdGVuZXJzIHRvIHByZXZlbnRcclxuICAgICAgICAvLyByZXBlYXRlZCBjYWxscyB0byB0aGUgY2FsbGJhY2tzLiBVbmRlZmluZWQgbWVhbnMgaXQncyBuZXZlciBiZWVuXHJcbiAgICAgICAgLy8gY2FsbGVkLCB3aGVyZWFzIG51bGwgbWVhbnMgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGEgc2lnbmVkIG91dCB1c2VyXHJcbiAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IGFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZzogZmFsc2UgfTtcclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MgPSBbXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBhcHAubmFtZTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBjb25maWcuc2RrQ2xpZW50VmVyc2lvbjtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlSGllcmFyY2h5LCBwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBIYXZlIHRvIGNoZWNrIGZvciBhcHAgZGVsZXRpb24gdGhyb3VnaG91dCBpbml0aWFsaXphdGlvbiAoYWZ0ZXIgZWFjaFxyXG4gICAgICAgIC8vIHByb21pc2UgcmVzb2x1dGlvbilcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIHBlcnNpc3RlbmNlSGllcmFyY2h5KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSByZXNvbHZlciBlYXJseSBpZiBuZWNlc3NhcnkgKG9ubHkgYXBwbGljYWJsZSB0byB3ZWI6XHJcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBjYXVzZSB0aGUgaWZyYW1lIHRvIGxvYWQgaW1tZWRpYXRlbHkgaW4gY2VydGFpbiBjYXNlcylcclxuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9zaG91bGRJbml0UHJvYWN0aXZlbHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMsIGRvbid0IGhhbHQgYXV0aCBsb2FkaW5nXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IC8qIElnbm9yZSB0aGUgZXJyb3IgKi8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gKChfYiA9IHRoaXMuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51aWQpIHx8IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIHBlcnNpc3RlbmNlIGlzIGNoYW5nZWQgaW4gYW5vdGhlciB3aW5kb3csIHRoZSB1c2VyIG1hbmFnZXIgd2lsbCBsZXQgdXMga25vd1xyXG4gICAgICovXHJcbiAgICBhc3luYyBfb25TdG9yYWdlRXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyICYmICF1c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIGNoYW5nZSwgZG8gbm90aGluZyAod2FzIHNpZ25lZCBvdXQgYW5kIHJlbWFpbmVkIHNpZ25lZCBvdXQpLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzYW1lIHVzZXIgaXMgdG8gYmUgc3luY2hyb25pemVkLlxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci51aWQgPT09IHVzZXIudWlkKSB7XHJcbiAgICAgICAgICAgIC8vIERhdGEgdXBkYXRlLCBzaW1wbHkgY29weSBkYXRhIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9hc3NpZ24odXNlcik7XHJcbiAgICAgICAgICAgIC8vIElmIHRva2VucyBjaGFuZ2VkIGZyb20gcHJldmlvdXMgdXNlciB0b2tlbnMsIHRoaXMgd2lsbCB0cmlnZ2VyXHJcbiAgICAgICAgICAgIC8vIG5vdGlmeUF1dGhMaXN0ZW5lcnNfLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBBdXRoIHN0YXRlLiBFaXRoZXIgYSBuZXcgbG9naW4gb3IgbG9nb3V0LlxyXG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBGaXJzdCBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHBlbmRpbmcgcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgbGV0IHN0b3JlZFVzZXIgPSAoYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCkpO1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIgJiYgdGhpcy5jb25maWcuYXV0aERvbWFpbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0VXNlckV2ZW50SWQgPSAoX2EgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFVzZXJFdmVudElkID0gc3RvcmVkVXNlciA9PT0gbnVsbCB8fCBzdG9yZWRVc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudHJ5UmVkaXJlY3RTaWduSW4ocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHN0b3JlZCB1c2VyIChpLmUuIHRoZSBvbGQgXCJjdXJyZW50VXNlclwiKSBoYXMgYSByZWRpcmVjdElkIHRoYXRcclxuICAgICAgICAgICAgLy8gbWF0Y2hlcyB0aGUgcmVkaXJlY3QgdXNlciwgdGhlbiB3ZSB3YW50IHRvIGluaXRpYWxseSBzaWduIGluIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIG5ldyB1c2VyIG9iamVjdCBmcm9tIHJlc3VsdC5cclxuICAgICAgICAgICAgLy8gVE9ETyhzYW1naG8pOiBNb3JlIHRob3JvdWdobHkgdGVzdCBhbGwgb2YgdGhpc1xyXG4gICAgICAgICAgICBpZiAoKCFyZWRpcmVjdFVzZXJFdmVudElkIHx8IHJlZGlyZWN0VXNlckV2ZW50SWQgPT09IHN0b3JlZFVzZXJFdmVudElkKSAmJlxyXG4gICAgICAgICAgICAgICAgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC51c2VyKSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmVkVXNlciA9IHJlc3VsdC51c2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIG5vIHVzZXIgaW4gcGVyc2lzdGVuY2UsIHRoZXJlIGlzIG5vIGN1cnJlbnQgdXNlci4gU2V0IHRvIG51bGwuXHJcbiAgICAgICAgaWYgKCFzdG9yZWRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXNuJ3QgYSByZWRpcmVjdCB1c2VyLCB3ZSBjYW4gcmVsb2FkIGFuZCBiYWlsXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbHNvIGNhdGNoIHRoZSByZWRpcmVjdGVkIHVzZXIsIGlmIGF2YWlsYWJsZSwgYXMgdGhhdCBtZXRob2RcclxuICAgICAgICAgICAgLy8gc3RyaXBzIHRoZSBfcmVkaXJlY3RFdmVudElkXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIsIHRoaXMsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcigpO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB1c2VyJ3MgZXZlbnQgSUQgbWF0Y2hlcyB0aGUgY3VycmVudCB1c2VyJ3MgZXZlbnQgSUQsXHJcbiAgICAgICAgLy8gRE8gTk9UIHJlbG9hZCB0aGUgY3VycmVudCB1c2VyLCBvdGhlcndpc2UgdGhleSdsbCBiZSBjbGVhcmVkIGZyb20gc3RvcmFnZS5cclxuICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBmb3IgdGhlIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KCkgZmxvdy5cclxuICAgICAgICBpZiAodGhpcy5yZWRpcmVjdFVzZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9PT0gc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIoc3RvcmVkVXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHRyeVJlZGlyZWN0U2lnbkluKHJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAvLyBUaGUgcmVkaXJlY3QgdXNlciBuZWVkcyB0byBiZSBjaGVja2VkIChhbmQgc2lnbmVkIGluIGlmIGF2YWlsYWJsZSlcclxuICAgICAgICAvLyBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbi4gQWxsIG9mIHRoZSBub3JtYWwgc2lnbiBpbiBhbmQgbGluay9yZWF1dGhcclxuICAgICAgICAvLyBmbG93cyBjYWxsIGJhY2sgaW50byBhdXRoIGFuZCBwdXNoIHRoaW5ncyBvbnRvIHRoZSBwcm9taXNlIHF1ZXVlLiBXZVxyXG4gICAgICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVkaXJlY3Qgc2lnbiBpbiAqaW5zaWRlIHRoZSBwcm9taXNlXHJcbiAgICAgICAgLy8gcXVldWUqLiBUaGlzIHByZXNlbnRzIGEgcHJvYmxlbTogd2UgcnVuIGludG8gZGVhZGxvY2suIFNlZTpcclxuICAgICAgICAvLyAgICDilIw+IFtJbml0aWFsaXphdGlvbl0g4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICAgICAgLy8gICAg4pSMPiBbPG90aGVyIHF1ZXVlIHRhc2tzPl0g4pSCXHJcbiAgICAgICAgLy8gICAg4pSU4pSAIFtnZXRSZWRpcmVjdFJlc3VsdF0gPOKUgOKUmFxyXG4gICAgICAgIC8vICAgIHdoZXJlIFtdIGFyZSB0YXNrcyBvbiB0aGUgcXVldWUgYW5kIGFycm93cyBkZW5vdGUgYXdhaXRzXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24gd2lsbCBuZXZlciBjb21wbGV0ZSBiZWNhdXNlIGl0J3Mgd2FpdGluZyBvbiBzb21ldGhpbmdcclxuICAgICAgICAvLyB0aGF0J3Mgd2FpdGluZyBmb3IgaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUhXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJbnN0ZWFkLCB0aGlzIG1ldGhvZCBjYWxscyBnZXRSZWRpcmVjdFJlc3VsdCgpIChzdG9yZWQgaW5cclxuICAgICAgICAvLyBfY29tcGxldGVSZWRpcmVjdEZuKSB3aXRoIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyBhbGwgb2ZcclxuICAgICAgICAvLyB0aGUgdW5kZXJseWluZyBhdXRoIG9wZXJhdGlvbnMgdG8gc2tpcCBhbnl0aGluZyB0aGF0IG11dGF0ZXMgYXV0aCBzdGF0ZS5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBXZSBrbm93IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciBpcyBzZXQgc2luY2UgcmVkaXJlY3RSZXNvbHZlclxyXG4gICAgICAgICAgICAvLyBpcyBwYXNzZWQgaW4uIFRoZSBfY29tcGxldGVSZWRpcmVjdEZuIGV4cGVjdHMgdGhlIHVud3JhcHBlZCBleHRlcm4uXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5fY29tcGxldGVSZWRpcmVjdEZuKHRoaXMsIHJlZGlyZWN0UmVzb2x2ZXIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBTd2FsbG93IGFueSBlcnJvcnMgaGVyZTsgdGhlIGNvZGUgY2FuIHJldHJpZXZlIHRoZW0gaW5cclxuICAgICAgICAgICAgLy8gZ2V0UmVkaXJlY3RSZXN1bHQoKS5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHVzZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZydzIHdyb25nIHdpdGggdGhlIHVzZXIncyB0b2tlbi4gTG9nIHRoZW0gb3V0IGFuZCByZW1vdmVcclxuICAgICAgICAgICAgICAgIC8vIHRoZW0gZnJvbSBzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICB1c2VEZXZpY2VMYW5ndWFnZSgpIHtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IF9nZXRVc2VyTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9kZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1cGRhdGVDdXJyZW50VXNlcih1c2VyRXh0ZXJuKSB7XHJcbiAgICAgICAgLy8gVGhlIHB1YmxpYyB1cGRhdGVDdXJyZW50VXNlciBtZXRob2QgbmVlZHMgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIHVzZXIsXHJcbiAgICAgICAgLy8gYW5kIGFsc28gY2hlY2sgdGhhdCB0aGUgcHJvamVjdCBtYXRjaGVzXHJcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJFeHRlcm5cclxuICAgICAgICAgICAgPyBnZXRNb2R1bGFySW5zdGFuY2UodXNlckV4dGVybilcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodXNlci5hdXRoLmNvbmZpZy5hcGlLZXkgPT09IHRoaXMuY29uZmlnLmFwaUtleSwgdGhpcywgXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBJTlZBTElEX0FVVEggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlciAmJiB1c2VyLl9jbG9uZSh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlQ3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0aGlzLnRlbmFudElkID09PSB1c2VyLnRlbmFudElkLCB0aGlzLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHJlZGlyZWN0IHVzZXIgd2hlbiBzaWduT3V0IGlzIGNhbGxlZFxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIHx8IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcihudWxsKTtcclxuICAgIH1cclxuICAgIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0UGVyc2lzdGVuY2UoX2dldEluc3RhbmNlKHBlcnNpc3RlbmNlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0UGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5wZXJzaXN0ZW5jZS50eXBlO1xyXG4gICAgfVxyXG4gICAgX3VwZGF0ZUVycm9yTWFwKGVycm9yTWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIGVycm9yTWFwKCkpO1xyXG4gICAgfVxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuY29uZmlnLmFwaUtleSxcclxuICAgICAgICAgICAgYXV0aERvbWFpbjogdGhpcy5jb25maWcuYXV0aERvbWFpbixcclxuICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0pTT04oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0UmVkaXJlY3RVc2VyKHVzZXIsIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGNvbnN0IHJlZGlyZWN0TWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICByZXR1cm4gdXNlciA9PT0gbnVsbFxyXG4gICAgICAgICAgICA/IHJlZGlyZWN0TWFuYWdlci5yZW1vdmVDdXJyZW50VXNlcigpXHJcbiAgICAgICAgICAgIDogcmVkaXJlY3RNYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiBfZ2V0SW5zdGFuY2UocG9wdXBSZWRpcmVjdFJlc29sdmVyKSkgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIFtfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpXSwgXCJyZWRpcmVjdFVzZXJcIiAvKiBSRURJUkVDVF9VU0VSICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlci5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcjtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZWRpcmVjdFVzZXJGb3JJZChpZCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3ZlIGNsZWFyZWQgYW55IHBlbmRpbmcgcGVyc2lzdGVuY2UgYWN0aW9ucyBpZiB3ZSdyZSBub3QgaW5cclxuICAgICAgICAvLyB0aGUgaW5pdGlhbGl6ZXJcclxuICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fcmVkaXJlY3RFdmVudElkKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRVc2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYiA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuX3JlZGlyZWN0RXZlbnRJZCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0VXNlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIE5vdGlmaWVzIGxpc3RlbmVycyBvbmx5IGlmIHRoZSB1c2VyIGlzIGN1cnJlbnQgKi9cclxuICAgIF9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9rZXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlnLmF1dGhEb21haW59OiR7dGhpcy5jb25maWcuYXBpS2V5fToke3RoaXMubmFtZX1gO1xyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdGhlIGN1cnJlbnQgdXNlciBjYXN0IGFzIHRoZSBpbnRlcm5hbCB0eXBlICovXHJcbiAgICBnZXQgX2N1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5QXV0aExpc3RlbmVycygpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbi5uZXh0KHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVaWQgPSAoX2IgPSAoX2EgPSB0aGlzLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3ROb3RpZmllZFVpZCAhPT0gY3VycmVudFVpZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IGN1cnJlbnRVaWQ7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4geyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYiA9IHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICA/IG5leHRPck9ic2VydmVyXHJcbiAgICAgICAgICAgIDogbmV4dE9yT2JzZXJ2ZXIubmV4dC5iaW5kKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5faXNJbml0aWFsaXplZFxyXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIDogdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIF9hc3NlcnQocHJvbWlzZSwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBUaGUgY2FsbGJhY2sgbmVlZHMgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IHBlciB0aGUgc3BlYy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IGNiKHRoaXMuY3VycmVudFVzZXIpKTtcclxuICAgICAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnByb3RlY3RlZCAoZnJvbSByYWNlIGNvbmRpdGlvbnMpIG1ldGhvZCB0byBzZXQgdGhlIGN1cnJlbnQgdXNlci4gVGhpc1xyXG4gICAgICogc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgcXVldWVkIGNhbGxiYWNrLiBUaGlzIGlzIG5lY2Vzc2FyeVxyXG4gICAgICogYmVjYXVzZSB0aGUgcXVldWUgc2hvdWxkbid0IHJlbHkgb24gYW5vdGhlciBxdWV1ZWQgY2FsbGJhY2suXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIgIT09IHVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyICYmIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVldWUoYWN0aW9uKSB7XHJcbiAgICAgICAgLy8gSW4gY2FzZSBzb21ldGhpbmcgZXJyb3JzLCB0aGUgY2FsbGJhY2sgc3RpbGwgc2hvdWxkIGJlIGNhbGxlZCBpbiBvcmRlclxyXG4gICAgICAgIC8vIHRvIGtlZXAgdGhlIHByb21pc2UgY2hhaW4gYWxpdmVcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSB0aGlzLm9wZXJhdGlvbnMudGhlbihhY3Rpb24sIGFjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBhc3NlcnRlZFBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXIsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2xvZ0ZyYW1ld29yayhmcmFtZXdvcmspIHtcclxuICAgICAgICBpZiAoIWZyYW1ld29yayB8fCB0aGlzLmZyYW1ld29ya3MuaW5jbHVkZXMoZnJhbWV3b3JrKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5wdXNoKGZyYW1ld29yayk7XHJcbiAgICAgICAgLy8gU29ydCBhbHBoYWJldGljYWxseSBzbyB0aGF0IFwiRmlyZWJhc2VDb3JlLXdlYixGaXJlYmFzZVVJLXdlYlwiIGFuZFxyXG4gICAgICAgIC8vIFwiRmlyZWJhc2VVSS13ZWIsRmlyZWJhc2VDb3JlLXdlYlwiIGFyZW4ndCB2aWV3ZWQgYXMgZGlmZmVyZW50LlxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5zb3J0KCk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRWZXJzaW9uID0gX2dldENsaWVudFZlcnNpb24odGhpcy5jb25maWcuY2xpZW50UGxhdGZvcm0sIHRoaXMuX2dldEZyYW1ld29ya3MoKSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0RnJhbWV3b3JrcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZXdvcmtzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldEFkZGl0aW9uYWxIZWFkZXJzKCkge1xyXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgaGVhZGVycyBvbiBldmVyeSByZXF1ZXN0XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgW1wiWC1DbGllbnQtVmVyc2lvblwiIC8qIFhfQ0xJRU5UX1ZFUlNJT04gKi9dOiB0aGlzLmNsaWVudFZlcnNpb24sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5hcHAub3B0aW9ucy5hcHBJZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1nbXBpZFwiIC8qIFhfRklSRUJBU0VfR01QSUQgKi9dID0gdGhpcy5hcHAub3B0aW9ucy5hcHBJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcnM7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1ldGhvZCB0byBiZSB1c2VkIHRvIGNhc3QgZG93biB0byBvdXIgcHJpdmF0ZSBpbXBsbWVudGF0aW9uIG9mIEF1dGguXHJcbiAqIEl0IHdpbGwgYWxzbyBoYW5kbGUgdW53cmFwcGluZyBmcm9tIHRoZSBjb21wYXQgdHlwZSBpZiBuZWNlc3NhcnlcclxuICpcclxuICogQHBhcmFtIGF1dGggQXV0aCBvYmplY3QgcGFzc2VkIGluIGZyb20gZGV2ZWxvcGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2FzdEF1dGgoYXV0aCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxufVxyXG4vKiogSGVscGVyIGNsYXNzIHRvIHdyYXAgc3Vic2NyaWJlciBsb2dpYyAqL1xyXG5jbGFzcyBTdWJzY3JpcHRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hZGRPYnNlcnZlciA9IGNyZWF0ZVN1YnNjcmliZShvYnNlcnZlciA9PiAodGhpcy5vYnNlcnZlciA9IG9ic2VydmVyKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgbmV4dCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMub2JzZXJ2ZXIsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlci5uZXh0LmJpbmQodGhpcy5vYnNlcnZlcik7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBGaXJlYmFzZSBBdXRoIEVtdWxhdG9yLCBpbnN0ZWFkIG9mIHByb2R1Y3Rpb25cclxuICogRmlyZWJhc2UgQXV0aCBzZXJ2aWNlcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtdXN0IGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IGltbWVkaWF0ZWx5IGZvbGxvd2luZyB0aGUgZmlyc3QgY2FsbCB0b1xyXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9LiAgRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMgYXMgZW11bGF0b3JcclxuICogdHJhZmZpYyBpcyBub3QgZW5jcnlwdGVkLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgJ2h0dHA6Ly8xMjcuMC4wLjE6OTA5OScsIHsgZGlzYWJsZVdhcm5pbmdzOiB0cnVlIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBhdCB3aGljaCB0aGUgZW11bGF0b3IgaXMgcnVubmluZyAoZWcsICdodHRwOi8vbG9jYWxob3N0OjkwOTknKS5cclxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbC4gYG9wdGlvbnMuZGlzYWJsZVdhcm5pbmdzYCBkZWZhdWx0cyB0byBgZmFsc2VgLiBTZXQgaXQgdG9cclxuICogYHRydWVgIHRvIGRpc2FibGUgdGhlIHdhcm5pbmcgYmFubmVyIGF0dGFjaGVkIHRvIHRoZSBET00uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgdXJsLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0KGF1dGhJbnRlcm5hbC5fY2FuSW5pdEVtdWxhdG9yLCBhdXRoSW50ZXJuYWwsIFwiZW11bGF0b3ItY29uZmlnLWZhaWxlZFwiIC8qIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQgKi8pO1xyXG4gICAgX2Fzc2VydCgvXmh0dHBzPzpcXC9cXC8vLnRlc3QodXJsKSwgYXV0aEludGVybmFsLCBcImludmFsaWQtZW11bGF0b3Itc2NoZW1lXCIgLyogSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUUgKi8pO1xyXG4gICAgY29uc3QgZGlzYWJsZVdhcm5pbmdzID0gISEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRpc2FibGVXYXJuaW5ncyk7XHJcbiAgICBjb25zdCBwcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbCh1cmwpO1xyXG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSBleHRyYWN0SG9zdEFuZFBvcnQodXJsKTtcclxuICAgIGNvbnN0IHBvcnRTdHIgPSBwb3J0ID09PSBudWxsID8gJycgOiBgOiR7cG9ydH1gO1xyXG4gICAgLy8gQWx3YXlzIHJlcGxhY2UgcGF0aCB3aXRoIFwiL1wiIChldmVuIGlmIGlucHV0IHVybCBoYWQgbm8gcGF0aCBhdCBhbGwsIG9yIGhhZCBhIGRpZmZlcmVudCBvbmUpLlxyXG4gICAgYXV0aEludGVybmFsLmNvbmZpZy5lbXVsYXRvciA9IHsgdXJsOiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BvcnRTdHJ9L2AgfTtcclxuICAgIGF1dGhJbnRlcm5hbC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmcgPSB0cnVlO1xyXG4gICAgYXV0aEludGVybmFsLmVtdWxhdG9yQ29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBwb3J0LFxyXG4gICAgICAgIHByb3RvY29sOiBwcm90b2NvbC5yZXBsYWNlKCc6JywgJycpLFxyXG4gICAgICAgIG9wdGlvbnM6IE9iamVjdC5mcmVlemUoeyBkaXNhYmxlV2FybmluZ3MgfSlcclxuICAgIH0pO1xyXG4gICAgaWYgKCFkaXNhYmxlV2FybmluZ3MpIHtcclxuICAgICAgICBlbWl0RW11bGF0b3JXYXJuaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xyXG4gICAgcmV0dXJuIHByb3RvY29sRW5kIDwgMCA/ICcnIDogdXJsLnN1YnN0cigwLCBwcm90b2NvbEVuZCArIDEpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCBhdXRob3JpdHkgPSAvKFxcL1xcLyk/KFtePyMvXSspLy5leGVjKHVybC5zdWJzdHIocHJvdG9jb2wubGVuZ3RoKSk7IC8vIEJldHdlZW4gLy8gYW5kIC8sID8gb3IgIy5cclxuICAgIGlmICghYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdDogJycsIHBvcnQ6IG51bGwgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhvc3RBbmRQb3J0ID0gYXV0aG9yaXR5WzJdLnNwbGl0KCdAJykucG9wKCkgfHwgJyc7IC8vIFN0cmlwIG91dCBcInVzZXJuYW1lOnBhc3N3b3JkQFwiLlxyXG4gICAgY29uc3QgYnJhY2tldGVkSVB2NiA9IC9eKFxcW1teXFxdXStcXF0pKDp8JCkvLmV4ZWMoaG9zdEFuZFBvcnQpO1xyXG4gICAgaWYgKGJyYWNrZXRlZElQdjYpIHtcclxuICAgICAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbaG9zdCwgcG9ydF0gPSBob3N0QW5kUG9ydC5zcGxpdCgnOicpO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChwb3J0KSB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlUG9ydChwb3J0U3RyKSB7XHJcbiAgICBpZiAoIXBvcnRTdHIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XHJcbiAgICBpZiAoaXNOYU4ocG9ydCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3J0O1xyXG59XHJcbmZ1bmN0aW9uIGVtaXRFbXVsYXRvcldhcm5pbmcoKSB7XHJcbiAgICBmdW5jdGlvbiBhdHRhY2hCYW5uZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgY29uc3Qgc3R5ID0gZWwuc3R5bGU7XHJcbiAgICAgICAgZWwuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgJ1J1bm5pbmcgaW4gZW11bGF0b3IgbW9kZS4gRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJztcclxuICAgICAgICBzdHkucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgIHN0eS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBzdHkuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIHN0eS5ib3JkZXIgPSAnLjFlbSBzb2xpZCAjMDAwMDAwJztcclxuICAgICAgICBzdHkuY29sb3IgPSAnI2I1MDAwMCc7XHJcbiAgICAgICAgc3R5LmJvdHRvbSA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5sZWZ0ID0gJzBweCc7XHJcbiAgICAgICAgc3R5Lm1hcmdpbiA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS56SW5kZXggPSAnMTAwMDAnO1xyXG4gICAgICAgIHN0eS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmaXJlYmFzZS1lbXVsYXRvci13YXJuaW5nJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmluZm8gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsJyArXHJcbiAgICAgICAgICAgICcgd2hpY2ggaXMgaW50ZW5kZWQgZm9yIGxvY2FsIHRlc3Rpbmcgb25seS4gIERvIG5vdCB1c2Ugd2l0aCcgK1xyXG4gICAgICAgICAgICAnIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGF0dGFjaEJhbm5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdHRhY2hCYW5uZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IGFuIHtAbGluayBBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBwcm92aWRlciBJRCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCAnZmFjZWJvb2suY29tJywgb3IgJ2dvb2dsZS5jb20nLlxyXG4gICAgICovXHJcbiAgICBwcm92aWRlcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHNpZ24gaW4gbWV0aG9kIGZvciB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGV4YW1wbGUsIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELCBvclxyXG4gICAgICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgc2lnbi1pbiBtZXRob2RcclxuICAgICAqIGlkZW50aWZpZXIgYXMgcmV0dXJuZWQgaW4ge0BsaW5rIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsfS5cclxuICAgICAqL1xyXG4gICAgc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnNpZ25Jbk1ldGhvZCA9IHNpZ25Jbk1ldGhvZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKF9hdXRoLCBfaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihfYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpyZXNldFBhc3N3b3JkXCIgLyogUkVTRVRfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmRcIiAvKiBTSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzZW5kT29iQ29kZVwiIC8qIFNFTkRfT09CX0NPREUgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUFuZENoYW5nZUVtYWlsKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yXHJcbiAqIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRFxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDb3ZlcnMgYm90aCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2VtYWlsLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9wYXNzd29yZCwgc2lnbkluTWV0aG9kLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF90ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8sIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgdGhpcy5fZW1haWwgPSBfZW1haWw7XHJcbiAgICAgICAgdGhpcy5fcGFzc3dvcmQgPSBfcGFzc3dvcmQ7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50SWQgPSBfdGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQsIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIG9vYkNvZGUsIHRlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgb29iQ29kZSwgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovLCB0ZW5hbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMuX3RlbmFudElkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBFaXRoZXIgYG9iamVjdGAgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuIFdoZW4gc3RyaW5nIGlzXHJcbiAgICAgKiBwcm92aWRlZCwgYEpTT04ucGFyc2VgIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBpZiAoKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5lbWFpbCkgJiYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5wYXNzd29yZCkpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tRW1haWxBbmRDb2RlKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkLCBvYmoudGVuYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhJZHBcIiAvKiBTSUdOX0lOX1dJVEhfSURQICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSQxID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgT0F1dGggY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21QYXJhbXMocGFyYW1zKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocGFyYW1zLnByb3ZpZGVySWQsIHBhcmFtcy5zaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGlmIChwYXJhbXMuaWRUb2tlbiB8fCBwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMiBhbmQgZWl0aGVyIElEIHRva2VuIG9yIGFjY2VzcyB0b2tlbi5cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmlkVG9rZW4gPSBwYXJhbXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFkZCBub25jZSBpZiBhdmFpbGFibGUgYW5kIG5vIHBlbmRpbmdUb2tlbiBpcyBwcmVzZW50LlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLm5vbmNlICYmICFwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLm5vbmNlID0gcGFyYW1zLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHBhcmFtcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFyYW1zLm9hdXRoVG9rZW4gJiYgcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMSBhbmQgT0F1dGggdG9rZW4gd2l0aCB0b2tlbiBzZWNyZXRcclxuICAgICAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHBhcmFtcy5vYXV0aFRva2VuO1xyXG4gICAgICAgICAgICBjcmVkLnNlY3JldCA9IHBhcmFtcy5vYXV0aFRva2VuU2VjcmV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX2ZhaWwoXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWRUb2tlbjogdGhpcy5pZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgc2VjcmV0OiB0aGlzLnNlY3JldCxcclxuICAgICAgICAgICAgbm9uY2U6IHRoaXMubm9uY2UsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCB9ID0gb2JqLCByZXN0ID0gX19yZXN0KG9iaiwgW1wicHJvdmlkZXJJZFwiLCBcInNpZ25Jbk1ldGhvZFwiXSk7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8ICFzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNyZWQgPSBuZXcgT0F1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgY3JlZC5pZFRva2VuID0gcmVzdC5pZFRva2VuIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcmVzdC5hY2Nlc3NUb2tlbiB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgY3JlZC5zZWNyZXQgPSByZXN0LnNlY3JldDtcclxuICAgICAgICBjcmVkLm5vbmNlID0gcmVzdC5ub25jZTtcclxuICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHJlc3QucGVuZGluZ1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICBidWlsZFJlcXVlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogSURQX1JFUVVFU1RfVVJJJDEsXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5wZW5kaW5nVG9rZW4gPSB0aGlzLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3RCb2R5ID0ge307XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydpZF90b2tlbiddID0gdGhpcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnYWNjZXNzX3Rva2VuJ10gPSB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlY3JldCkge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ29hdXRoX3Rva2VuX3NlY3JldCddID0gdGhpcy5zZWNyZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9zdEJvZHlbJ3Byb3ZpZGVySWQnXSA9IHRoaXMucHJvdmlkZXJJZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9uY2UgJiYgIXRoaXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnbm9uY2UnXSA9IHRoaXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVxdWVzdC5wb3N0Qm9keSA9IHF1ZXJ5c3RyaW5nKHBvc3RCb2R5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRWZXJpZmljYXRpb25Db2RlXCIgLyogU0VORF9WRVJJRklDQVRJT05fQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlciQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2UudGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuY29uc3QgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyA9IHtcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovXHJcbn07XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgYXBpUmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgb3BlcmF0aW9uOiAnUkVBVVRIJyB9KTtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIGFwaVJlcXVlc3QpLCBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLywgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmtXaXRoUGhvbmVOdW1iZXIkMShhdXRoLCBPYmplY3QuYXNzaWduKHsgaWRUb2tlbiB9LCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zdCB7IHRlbXBvcmFyeVByb29mLCBwaG9uZU51bWJlciwgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgIGlmICh0ZW1wb3JhcnlQcm9vZiAmJiBwaG9uZU51bWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2Vzc2lvbkluZm86IHZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgICAgICBjb2RlOiB2ZXJpZmljYXRpb25Db2RlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgb2JqLnBob25lTnVtYmVyID0gdGhpcy5wYXJhbXMucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICBvYmoudGVtcG9yYXJ5UHJvb2YgPSB0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbkNvZGUgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbklkID0gdGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICAvKiogR2VuZXJhdGVzIGEgcGhvbmUgY3JlZGVudGlhbCBiYXNlZCBvbiBhIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nLiAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGpzb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlLCBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IGpzb247XHJcbiAgICAgICAgaWYgKCF2ZXJpZmljYXRpb25Db2RlICYmXHJcbiAgICAgICAgICAgICF2ZXJpZmljYXRpb25JZCAmJlxyXG4gICAgICAgICAgICAhcGhvbmVOdW1iZXIgJiZcclxuICAgICAgICAgICAgIXRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25JZCxcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIHRlbXBvcmFyeVByb29mXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcHMgdGhlIG1vZGUgc3RyaW5nIGluIGFjdGlvbiBjb2RlIFVSTCB0byBBY3Rpb24gQ29kZSBJbmZvIG9wZXJhdGlvbi5cclxuICpcclxuICogQHBhcmFtIG1vZGVcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlTW9kZShtb2RlKSB7XHJcbiAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgICBjYXNlICdyZWNvdmVyRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRUNPVkVSX0VNQUlMXCIgLyogUkVDT1ZFUl9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICdyZXNldFBhc3N3b3JkJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBQQVNTV09SRF9SRVNFVCAqLztcclxuICAgICAgICBjYXNlICdzaWduSW4nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5RW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfRU1BSUxcIiAvKiBWRVJJRllfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5QW5kQ2hhbmdlRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3JldmVydFNlY29uZEZhY3RvckFkZGl0aW9uJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT05cIiAvKiBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTiAqLztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIHBhcnNlIEZETCBsaW5rc1xyXG4gKlxyXG4gKiBAcGFyYW0gdXJsXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZURlZXBMaW5rKHVybCkge1xyXG4gICAgY29uc3QgbGluayA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpKVsnbGluayddO1xyXG4gICAgLy8gRG91YmxlIGxpbmsgY2FzZSAoYXV0b21hdGljIHJlZGlyZWN0KS5cclxuICAgIGNvbnN0IGRvdWJsZURlZXBMaW5rID0gbGlua1xyXG4gICAgICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGxpbmspKVsnZGVlcF9saW5rX2lkJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cclxuICAgIGNvbnN0IGlPU0RlZXBMaW5rID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkpWydkZWVwX2xpbmtfaWQnXTtcclxuICAgIGNvbnN0IGlPU0RvdWJsZURlZXBMaW5rID0gaU9TRGVlcExpbmtcclxuICAgICAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhpT1NEZWVwTGluaykpWydsaW5rJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICByZXR1cm4gaU9TRG91YmxlRGVlcExpbmsgfHwgaU9TRGVlcExpbmsgfHwgZG91YmxlRGVlcExpbmsgfHwgbGluayB8fCB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyB0byBwYXJzZSBlbWFpbCBhY3Rpb24gVVJMcyBzdWNoIGFzIHBhc3N3b3JkIHJlc2V0LCBlbWFpbCB2ZXJpZmljYXRpb24sXHJcbiAqIGVtYWlsIGxpbmsgc2lnbiBpbiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBBY3Rpb25Db2RlVVJMIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFjdGlvbkxpbmsgLSBUaGUgbGluayBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIFVSTC5cclxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFjdGlvbkxpbmspIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcclxuICAgICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoYWN0aW9uTGluaykpO1xyXG4gICAgICAgIGNvbnN0IGFwaUtleSA9IChfYSA9IHNlYXJjaFBhcmFtc1tcImFwaUtleVwiIC8qIEFQSV9LRVkgKi9dKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSBzZWFyY2hQYXJhbXNbXCJvb2JDb2RlXCIgLyogQ09ERSAqL10pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gcGFyc2VNb2RlKChfYyA9IHNlYXJjaFBhcmFtc1tcIm1vZGVcIiAvKiBNT0RFICovXSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbCk7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgQVBJIGtleSwgY29kZSBhbmQgbW9kZS5cclxuICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiBjb2RlICYmIG9wZXJhdGlvbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY29udGludWVVcmwgPSAoX2QgPSBzZWFyY2hQYXJhbXNbXCJjb250aW51ZVVybFwiIC8qIENPTlRJTlVFX1VSTCAqL10pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSAoX2UgPSBzZWFyY2hQYXJhbXNbXCJsYW5ndWFnZUNvZGVcIiAvKiBMQU5HVUFHRV9DT0RFICovXSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogbnVsbDtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gKF9mID0gc2VhcmNoUGFyYW1zW1widGVuYW50SWRcIiAvKiBURU5BTlRfSUQgKi9dKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWYgdGhlIGxpbmsgaXMgdmFsaWQsXHJcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsaW5rICAtIFRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlTGluayhsaW5rKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uTGluayA9IHBhcnNlRGVlcExpbmsobGluayk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25Db2RlVVJMKGFjdGlvbkxpbmspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWZcclxuICogdGhlIGxpbmsgaXMgdmFsaWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlQWN0aW9uQ29kZVVSTChsaW5rKSB7XHJcbiAgICByZXR1cm4gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsobGluayk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIHtAbGluayBFbWFpbEF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCAtIFVzZXIgYWNjb3VudCBwYXNzd29yZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIGFuIGVtYWlsIGxpbmsgYWZ0ZXIgYSBzaWduIGluIHdpdGhcclxuICAgICAqIGVtYWlsIGxpbmsgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCk7XHJcbiAgICAgKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB1c2VkIHRvIHZlcmlmeSB0aGUgbGluay5cclxuICAgICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gZW1haWxMaW5rIC0gU2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gICAgICogQHJldHVybnMgLSBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVVcmwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIGFjdGlvbkNvZGVVcmwuY29kZSwgYWN0aW9uQ29kZVVybC50ZW5hbnRJZCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JELCBldmVuIGZvciBlbWFpbCBsaW5rLlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuRU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0QgPSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5FTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EID0gXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBGZWRlcmF0ZWQgcHJvdmlkZXJzIChPQXV0aCAoaW5jbHVkaW5nIE9JREMpLCBTQU1MKS5cclxuICpcclxuICogVGhpcyBjbGFzcyBpcyBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBQcm92aWRlciBmb3Igd2hpY2ggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGdlbmVyYXRlZC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGxhbmd1YWdlIGdvZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlQ29kZSAtIGxhbmd1YWdlIGNvZGVcclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgT0F1dGggY3VzdG9tIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiBhbiBPQXV0aCByZXF1ZXN0IGZvciBwb3B1cCBhbmQgcmVkaXJlY3Qgc2lnbi1pblxyXG4gICAgICogb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGEgZGV0YWlsZWQgbGlzdCwgY2hlY2sgdGhlIHJlc2VydmVkIHJlcXVpcmVkIE9BdXRoIDIuMCBwYXJhbWV0ZXJzIHN1Y2ggYXMgYGNsaWVudF9pZGAsXHJcbiAgICAgKiBgcmVkaXJlY3RfdXJpYCwgYHNjb3BlYCwgYHJlc3BvbnNlX3R5cGVgLCBhbmQgYHN0YXRlYCBhcmUgbm90IGFsbG93ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIC0gVGhlIGN1c3RvbSBPQXV0aCBwYXJhbWV0ZXJzIHRvIHBhc3MgaW4gdGhlIE9BdXRoIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBDdXN0b21QYXJhbWV0ZXJzfS5cclxuICAgICAqL1xyXG4gICAgZ2V0Q3VzdG9tUGFyYW1ldGVycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21QYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21tb24gY29kZSB0byBhbGwgT0F1dGggcHJvdmlkZXJzLiBUaGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlXHJcbiAqIHtAbGluayBPQXV0aFByb3ZpZGVyfSBzbyB0aGF0IGNoaWxkIHByb3ZpZGVycyAobGlrZVxyXG4gKiB7QGxpbmsgR29vZ2xlQXV0aFByb3ZpZGVyfSkgZG9uJ3QgaW5oZXJpdCB0aGUgYGNyZWRlbnRpYWxgIGluc3RhbmNlIG1ldGhvZC5cclxuICogSW5zdGVhZCwgdGhleSByZWx5IG9uIGEgc3RhdGljIGBjcmVkZW50aWFsYCBtZXRob2QuXHJcbiAqL1xyXG5jbGFzcyBCYXNlT0F1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLnNjb3BlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gT0F1dGggc2NvcGUgdG8gdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjb3BlIC0gUHJvdmlkZXIgT0F1dGggc2NvcGUgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBhZGRTY29wZShzY29wZSkge1xyXG4gICAgICAgIC8vIElmIG5vdCBhbHJlYWR5IGFkZGVkLCBhZGQgc2NvcGUgdG8gbGlzdC5cclxuICAgICAgICBpZiAoIXRoaXMuc2NvcGVzLmluY2x1ZGVzKHNjb3BlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3Blcy5wdXNoKHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2YgT0F1dGggc2NvcGVzLlxyXG4gICAgICovXHJcbiAgICBnZXRTY29wZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLnNjb3Blc107XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGdlbmVyaWMge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgX2Fzc2VydCgncHJvdmlkZXJJZCcgaW4gb2JqICYmICdzaWduSW5NZXRob2QnIGluIG9iaiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKG9iaik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcidzIGFjY2VzcyB0b2tlbiBvciBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhlIHJhdyBub25jZSBpcyByZXF1aXJlZCB3aGVuIGFuIElEIHRva2VuIHdpdGggYSBub25jZSBmaWVsZCBpcyBwcm92aWRlZC4gVGhlIFNIQS0yNTYgaGFzaCBvZlxyXG4gICAgICogdGhlIHJhdyBub25jZSBtdXN0IG1hdGNoIHRoZSBub25jZSBmaWVsZCBpbiB0aGUgSUQgdG9rZW4uXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIGBnb29nbGVVc2VyYCBmcm9tIHRoZSBvbnN1Y2Nlc3MgR29vZ2xlIFNpZ24gSW4gY2FsbGJhY2suXHJcbiAgICAgKiAvLyBJbml0aWFsaXplIGEgZ2VuZXJhdGUgT0F1dGggcHJvdmlkZXIgd2l0aCBhIGBnb29nbGUuY29tYCBwcm92aWRlcklkLlxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcignZ29vZ2xlLmNvbScpO1xyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWwoe1xyXG4gICAgICogICBpZFRva2VuOiBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuLFxyXG4gICAgICogfSk7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbXMgLSBFaXRoZXIgdGhlIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIElEIHRva2VuLCBhY2Nlc3MgdG9rZW4gYW5kIHJhdyBub25jZVxyXG4gICAgICogb3IgdGhlIElEIHRva2VuIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlZGVudGlhbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgbm9uY2U6IHBhcmFtcy5yYXdOb25jZSB9KSk7XHJcbiAgICB9XHJcbiAgICAvKiogQW4gaW50ZXJuYWwgY3JlZGVudGlhbCBtZXRob2QgdGhhdCBhY2NlcHRzIG1vcmUgcGVybWlzc2l2ZSBvcHRpb25zICovXHJcbiAgICBfY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICBfYXNzZXJ0KHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAvLyBGb3IgT0F1dGhDcmVkZW50aWFsLCBzaWduIGluIG1ldGhvZCBpcyBzYW1lIGFzIHByb3ZpZGVySWQuXHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLCBzaWduSW5NZXRob2Q6IHRoaXMucHJvdmlkZXJJZCB9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgb2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0LCBwZW5kaW5nVG9rZW4sIG5vbmNlLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxyXG4gICAgICAgICAgICAhb2F1dGhJZFRva2VuICYmXHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLl9jcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvYXV0aEFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgbm9uY2UsXHJcbiAgICAgICAgICAgICAgICBwZW5kaW5nVG9rZW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEZhY2Vib29rQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBGYWNlYm9vay5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGV2ZW50YCBmcm9tIHRoZSBGYWNlYm9vayBhdXRoLmF1dGhSZXNwb25zZUNoYW5nZSBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKGV2ZW50LmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEZhY2Vib29rIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EID0gXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkZBQ0VCT09LLiAqL1xyXG5GYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR29vZ2xlQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovKTtcclxuICAgICAgICB0aGlzLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBHb29nbGUuIEF0IGxlYXN0IG9uZSBvZiBJRCB0b2tlbiBhbmQgYWNjZXNzIHRva2VuIGlzIHJlcXVpcmVkLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiAvLyBcXGBnb29nbGVVc2VyXFxgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuKTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkVG9rZW4gLSBHb29nbGUgSUQgdG9rZW4uXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHb29nbGUgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChpZFRva2VuLCBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBHb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogR29vZ2xlQXV0aFByb3ZpZGVyLkdPT0dMRV9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhJZFRva2VuICYmICFvYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgY291bGQgYmUgYW4gb2F1dGggMSBjcmVkZW50aWFsIG9yIGEgcGhvbmUgY3JlZGVudGlhbFxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9EID0gXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi5cclxuICpcclxuICogQHJlbWFya3NcclxuICogR2l0SHViIHJlcXVpcmVzIGFuIE9BdXRoIDIuMCByZWRpcmVjdCwgc28geW91IGNhbiBlaXRoZXIgaGFuZGxlIHRoZSByZWRpcmVjdCBkaXJlY3RseSwgb3IgdXNlXHJcbiAqIHRoZSB7QGxpbmsgc2lnbkluV2l0aFBvcHVwfSBoYW5kbGVyOlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR2l0aHViQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3JlcG8nKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR2l0aHViQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdpdGh1Yi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHaXRodWIgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBHaXRodWJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogR2l0aHViQXV0aFByb3ZpZGVyLkdJVEhVQl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UgfHwgISgnb2F1dGhBY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QgPSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCwgcHJvdmlkZXJJZCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVG9rZW4gPSBwZW5kaW5nVG9rZW47XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW5cclxuICAgICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gSW5wdXQgY2FuIGJlIGVpdGhlciBPYmplY3Qgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuXHJcbiAgICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kLCBwZW5kaW5nVG9rZW4gfSA9IG9iajtcclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQgfHxcclxuICAgICAgICAgICAgIXNpZ25Jbk1ldGhvZCB8fFxyXG4gICAgICAgICAgICAhcGVuZGluZ1Rva2VuIHx8XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQgIT09IHNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHN0YXRpYyBtZXRob2QgdG8gYXZvaWQgZXhwb3NpbmcgdGhlIGNvbnN0cnVjdG9yIHRvIGVuZCB1c2Vycy5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIGJ1aWxkUmVxdWVzdCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkksXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBTQU1MX1BST1ZJREVSX1BSRUZJWCA9ICdzYW1sLic7XHJcbi8qKlxyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBmb3IgU0FNTC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yLiBUaGUgcHJvdmlkZXJJZCBtdXN0IHN0YXJ0IHdpdGggXCJzYW1sLlwiXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFNBTUwgcHJvdmlkZXIgSUQuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBfYXNzZXJ0KHByb3ZpZGVySWQuc3RhcnRzV2l0aChTQU1MX1BST1ZJREVSX1BSRUZJWCksIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGFmdGVyIGFcclxuICAgICAqIHN1Y2Nlc3NmdWwgU0FNTCBmbG93IGNvbXBsZXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlLCB0byBnZXQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgeW91IGNvdWxkIHdyaXRlIHRoZVxyXG4gICAgICogZm9sbG93aW5nIGNvZGU6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHNhbWxQcm92aWRlcik7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIEpTT04gc3RyaW5nIG9yIGEgcGxhaW4gb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aENyZWRlbnRpYWwuZnJvbUpTT04oanNvbik7XHJcbiAgICAgICAgX2Fzc2VydChjcmVkZW50aWFsLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGVuZGluZ1Rva2VuLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghcGVuZGluZ1Rva2VuIHx8ICFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gU0FNTEF1dGhDcmVkZW50aWFsLl9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIFR3aXR0ZXIgQWNjZXNzIFRva2VuIGFuZCBTZWNyZXQuXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqICAgY29uc3Qgc2VjcmV0ID0gY3JlZGVudGlhbC5zZWNyZXQ7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFR3aXR0ZXJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBUd2l0dGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFR3aXR0ZXIgYWNjZXNzIHRva2VuLlxyXG4gICAgICogQHBhcmFtIHNlY3JldCAtIFR3aXR0ZXIgc2VjcmV0LlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbCh0b2tlbiwgc2VjcmV0KSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IFR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogVHdpdHRlckF1dGhQcm92aWRlci5UV0lUVEVSX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBvYXV0aFRva2VuOiB0b2tlbixcclxuICAgICAgICAgICAgb2F1dGhUb2tlblNlY3JldDogc2VjcmV0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoQWNjZXNzVG9rZW4gfHwgIW9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uVFdJVFRFUi4gKi9cclxuVHdpdHRlckF1dGhQcm92aWRlci5UV0lUVEVSX1NJR05fSU5fTUVUSE9EID0gXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5UV0lUVEVSLiAqL1xyXG5Ud2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25VcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25VcFwiIC8qIFNJR05fVVAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlckNyZWRlbnRpYWxJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHBhcmFtcy51c2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHBhcmFtcy5wcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMuX3Rva2VuUmVzcG9uc2UgPSBwYXJhbXMuX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gcGFyYW1zLm9wZXJhdGlvblR5cGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICBjb25zdCB1c2VyQ3JlZCA9IG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogaWRUb2tlblJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJDcmVkO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIF9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpIHtcclxuICAgICAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgX3Rva2VuUmVzcG9uc2U6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcHJvdmlkZXJJZEZvclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICBpZiAocmVzcG9uc2UucHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5wcm92aWRlcklkO1xyXG4gICAgfVxyXG4gICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gXCJwaG9uZVwiIC8qIFBIT05FICovO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIGFzIGFuIGFub255bW91cyB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGFub255bW91cyB1c2VyIHNpZ25lZCBpbiwgdGhhdCB1c2VyIHdpbGwgYmUgcmV0dXJuZWQ7IG90aGVyd2lzZSwgYVxyXG4gKiBuZXcgYW5vbnltb3VzIHVzZXIgaWRlbnRpdHkgd2lsbCBiZSBjcmVhdGVkIGFuZCByZXR1cm5lZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5Bbm9ueW1vdXNseShhdXRoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIGlmICgoX2EgPSBhdXRoSW50ZXJuYWwuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0Fub255bW91cykge1xyXG4gICAgICAgIC8vIElmIGFuIGFub255bW91cyB1c2VyIGlzIGFscmVhZHkgc2lnbmVkIGluLCBubyBuZWVkIHRvIHNpZ24gdGhlbSBpbiBhZ2Fpbi5cclxuICAgICAgICByZXR1cm4gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXI6IGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZTogXCJzaWduSW5cIiAvKiBTSUdOX0lOICovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcChhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UsIHRydWUpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvckVycm9yIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBzdXBlcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBvcGVyYXRpb25UeXBlO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTXVsdGlGYWN0b3JFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogKF9hID0gYXV0aC50ZW5hbnRJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IGVycm9yLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21FcnJvckFuZE9wZXJhdGlvbihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JFcnJvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwsIHVzZXIpIHtcclxuICAgIGNvbnN0IGlkVG9rZW5Qcm92aWRlciA9IG9wZXJhdGlvblR5cGUgPT09IFwicmVhdXRoZW50aWNhdGVcIiAvKiBSRUFVVEhFTlRJQ0FURSAqL1xyXG4gICAgICAgID8gY3JlZGVudGlhbC5fZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpXHJcbiAgICAgICAgOiBjcmVkZW50aWFsLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICByZXR1cm4gaWRUb2tlblByb3ZpZGVyLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovfWApIHtcclxuICAgICAgICAgICAgdGhyb3cgTXVsdGlGYWN0b3JFcnJvci5fZnJvbUVycm9yQW5kT3BlcmF0aW9uKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGFrZXMgYSBzZXQgb2YgVXNlckluZm8gcHJvdmlkZXIgZGF0YSBhbmQgY29udmVydHMgaXQgdG8gYSBzZXQgb2YgbmFtZXNcclxuICovXHJcbmZ1bmN0aW9uIHByb3ZpZGVyRGF0YUFzTmFtZXMocHJvdmlkZXJEYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IFNldChwcm92aWRlckRhdGFcclxuICAgICAgICAubWFwKCh7IHByb3ZpZGVySWQgfSkgPT4gcHJvdmlkZXJJZClcclxuICAgICAgICAuZmlsdGVyKHBpZCA9PiAhIXBpZCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVbmxpbmtzIGEgcHJvdmlkZXIgZnJvbSBhIHVzZXIgYWNjb3VudC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVySWQgLSBUaGUgcHJvdmlkZXIgdG8gdW5saW5rLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1bmxpbmsodXNlciwgcHJvdmlkZXJJZCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyh0cnVlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVySWQpO1xyXG4gICAgY29uc3QgeyBwcm92aWRlclVzZXJJbmZvIH0gPSBhd2FpdCBkZWxldGVMaW5rZWRBY2NvdW50cyh1c2VySW50ZXJuYWwuYXV0aCwge1xyXG4gICAgICAgIGlkVG9rZW46IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKCksXHJcbiAgICAgICAgZGVsZXRlUHJvdmlkZXI6IFtwcm92aWRlcklkXVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBwcm92aWRlcnNMZWZ0ID0gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlclVzZXJJbmZvIHx8IFtdKTtcclxuICAgIHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbHRlcihwZCA9PiBwcm92aWRlcnNMZWZ0LmhhcyhwZC5wcm92aWRlcklkKSk7XHJcbiAgICBpZiAoIXByb3ZpZGVyc0xlZnQuaGFzKFwicGhvbmVcIiAvKiBQSE9ORSAqLykpIHtcclxuICAgICAgICB1c2VySW50ZXJuYWwucGhvbmVOdW1iZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gdXNlckludGVybmFsO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rJDEodXNlciwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgY3JlZGVudGlhbC5fbGlua1RvSWRUb2tlbih1c2VyLmF1dGgsIGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpKSwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbih1c2VyLCBcImxpbmtcIiAvKiBMSU5LICovLCByZXNwb25zZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2Fzc2VydExpbmtlZFN0YXR1cyhleHBlY3RlZCwgdXNlciwgcHJvdmlkZXIpIHtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgY29uc3QgcHJvdmlkZXJJZHMgPSBwcm92aWRlckRhdGFBc05hbWVzKHVzZXIucHJvdmlkZXJEYXRhKTtcclxuICAgIGNvbnN0IGNvZGUgPSBleHBlY3RlZCA9PT0gZmFsc2VcclxuICAgICAgICA/IFwicHJvdmlkZXItYWxyZWFkeS1saW5rZWRcIiAvKiBQUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL1xyXG4gICAgICAgIDogXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogTk9fU1VDSF9QUk9WSURFUiAqLztcclxuICAgIF9hc3NlcnQocHJvdmlkZXJJZHMuaGFzKHByb3ZpZGVyKSA9PT0gZXhwZWN0ZWQsIHVzZXIuYXV0aCwgY29kZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3JlYXV0aGVudGljYXRlKHVzZXIsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XHJcbiAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsLCB1c2VyKSwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmlkVG9rZW4sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gX3BhcnNlVG9rZW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgX2Fzc2VydChwYXJzZWQsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgeyBzdWI6IGxvY2FsSWQgfSA9IHBhcnNlZDtcclxuICAgICAgICBfYXNzZXJ0KHVzZXIudWlkID09PSBsb2NhbElkLCBhdXRoLCBcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovKTtcclxuICAgICAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBDb252ZXJ0IHVzZXIgZGVsZXRlZCBlcnJvciBpbnRvIHVzZXIgbWlzbWF0Y2hcclxuICAgICAgICBpZiAoKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5jb2RlKSA9PT0gYGF1dGgvJHtcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovfWApIHtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gXCJzaWduSW5cIiAvKiBTSUdOX0lOICovO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSk7XHJcbiAgICBpZiAoIWJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKF9jYXN0QXV0aChhdXRoKSwgY3JlZGVudGlhbCk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB1c2VyIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIFRoZSBhdXRoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIGNyZWRlbnRpYWwucHJvdmlkZXJJZCk7XHJcbiAgICByZXR1cm4gX2xpbmskMSh1c2VySW50ZXJuYWwsIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBSZS1hdXRoZW50aWNhdGVzIGEgdXNlciB1c2luZyBhIGZyZXNoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFVzZSBiZWZvcmUgb3BlcmF0aW9ucyBzdWNoIGFzIHtAbGluayB1cGRhdGVQYXNzd29yZH0gdGhhdCByZXF1aXJlIHRva2VucyBmcm9tIHJlY2VudCBzaWduLWluXHJcbiAqIGF0dGVtcHRzLiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byByZWNvdmVyIGZyb20gYSBgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOYCBlcnJvci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHVzZXIsIGNyZWRlbnRpYWwpIHtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGUoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhDdXN0b21Ub2tlblwiIC8qIFNJR05fSU5fV0lUSF9DVVNUT01fVE9LRU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgY3VzdG9tIHRva2VuLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDdXN0b20gdG9rZW5zIGFyZSB1c2VkIHRvIGludGVncmF0ZSBGaXJlYmFzZSBBdXRoIHdpdGggZXhpc3RpbmcgYXV0aCBzeXN0ZW1zLCBhbmQgbXVzdFxyXG4gKiBiZSBnZW5lcmF0ZWQgYnkgYW4gYXV0aCBiYWNrZW5kIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvcmVmZXJlbmNlL2FkbWluL25vZGUvYWRtaW4uYXV0aC5BdXRoI2NyZWF0ZWN1c3RvbXRva2VuIHwgY3JlYXRlQ3VzdG9tVG9rZW59XHJcbiAqIG1ldGhvZCBpbiB0aGUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2F1dGgvYWRtaW4gfCBBZG1pbiBTREt9IC5cclxuICpcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdG9rZW4gaXMgaW52YWxpZCwgZXhwaXJlZCwgb3Igbm90IGFjY2VwdGVkIGJ5IHRoZSBGaXJlYmFzZSBBdXRoIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGN1c3RvbVRva2VuIC0gVGhlIGN1c3RvbSB0b2tlbiB0byBzaWduIGluIHdpdGguXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbihhdXRoLCBjdXN0b21Ub2tlbikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMShhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICB0b2tlbjogY3VzdG9tVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgY3JlZCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcihjcmVkLnVzZXIpO1xyXG4gICAgcmV0dXJuIGNyZWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3JJZCwgcmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcklkID0gZmFjdG9ySWQ7XHJcbiAgICAgICAgdGhpcy51aWQgPSByZXNwb25zZS5tZmFFbnJvbGxtZW50SWQ7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxtZW50VGltZSA9IG5ldyBEYXRlKHJlc3BvbnNlLmVucm9sbGVkQXQpLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHJlc3BvbnNlLmRpc3BsYXlOYW1lO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCkge1xyXG4gICAgICAgIGlmICgncGhvbmVJbmZvJyBpbiBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaG9uZU11bHRpRmFjdG9ySW5mby5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9ySW5mbyBleHRlbmRzIE11bHRpRmFjdG9ySW5mb0ltcGwge1xyXG4gICAgY29uc3RydWN0b3IocmVzcG9uc2UpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogUEhPTkUgKi8sIHJlc3BvbnNlKTtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVJbmZvO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tU2VydmVyUmVzcG9uc2UoX2F1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lTXVsdGlGYWN0b3JJbmZvKGVucm9sbG1lbnQpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBfYXNzZXJ0KCgoX2EgPSBhY3Rpb25Db2RlU2V0dGluZ3MudXJsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSA+IDAsIGF1dGgsIFwiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBJTlZBTElEX0NPTlRJTlVFX1VSSSAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW4gPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluLmxlbmd0aCA+IDAsIGF1dGgsIFwiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOICovKTtcclxuICAgIHJlcXVlc3QuY29udGludWVVcmwgPSBhY3Rpb25Db2RlU2V0dGluZ3MudXJsO1xyXG4gICAgcmVxdWVzdC5keW5hbWljTGlua0RvbWFpbiA9IGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbjtcclxuICAgIHJlcXVlc3QuY2FuSGFuZGxlQ29kZUluQXBwID0gYWN0aW9uQ29kZVNldHRpbmdzLmhhbmRsZUNvZGVJbkFwcDtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuaU9TKSB7XHJcbiAgICAgICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuaU9TLmJ1bmRsZUlkLmxlbmd0aCA+IDAsIGF1dGgsIFwibWlzc2luZy1pb3MtYnVuZGxlLWlkXCIgLyogTUlTU0lOR19JT1NfQlVORExFX0lEICovKTtcclxuICAgICAgICByZXF1ZXN0LmlPU0J1bmRsZUlkID0gYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZDtcclxuICAgIH1cclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZCkge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWUubGVuZ3RoID4gMCwgYXV0aCwgXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovKTtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRJbnN0YWxsQXBwID0gYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQuaW5zdGFsbEFwcDtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRNaW5pbXVtVmVyc2lvbkNvZGUgPVxyXG4gICAgICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5taW5pbXVtVmVyc2lvbjtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZW5kcyBhIHBhc3N3b3JkIHJlc2V0IGVtYWlsIHRvIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBjb21wbGV0ZSB0aGUgcGFzc3dvcmQgcmVzZXQsIGNhbGwge0BsaW5rIGNvbmZpcm1QYXNzd29yZFJlc2V0fSB3aXRoIHRoZSBjb2RlIHN1cHBsaWVkIGluXHJcbiAqIHRoZSBlbWFpbCBzZW50IHRvIHRoZSB1c2VyLCBhbG9uZyB3aXRoIHRoZSBuZXcgcGFzc3dvcmQgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdXNlci5cclxuICogYXdhaXQgY29uZmlybVBhc3N3b3JkUmVzZXQoJ3VzZXJAZXhhbXBsZS5jb20nLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGF1dGgsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJQQVNTV09SRF9SRVNFVFwiIC8qIFBBU1NXT1JEX1JFU0VUICovLFxyXG4gICAgICAgIGVtYWlsXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aE1vZHVsYXIsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEoYXV0aE1vZHVsYXIsIHJlcXVlc3QpO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wbGV0ZXMgdGhlIHBhc3N3b3JkIHJlc2V0IHByb2Nlc3MsIGdpdmVuIGEgY29uZmlybWF0aW9uIGNvZGUgYW5kIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgY29uZmlybWF0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVBhc3N3b3JkUmVzZXQoYXV0aCwgb29iQ29kZSwgbmV3UGFzc3dvcmQpIHtcclxuICAgIGF3YWl0IHJlc2V0UGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7XHJcbiAgICAgICAgb29iQ29kZSxcclxuICAgICAgICBuZXdQYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICAvLyBEbyBub3QgcmV0dXJuIHRoZSBlbWFpbC5cclxufVxyXG4vKipcclxuICogQXBwbGllcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhcHBseUFjdGlvbkNvZGUoYXV0aCwgb29iQ29kZSkge1xyXG4gICAgYXdhaXQgYXBwbHlBY3Rpb25Db2RlJDEoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7IG9vYkNvZGUgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBtZXRhZGF0YSBhYm91dCB0aGUgY29kZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tBY3Rpb25Db2RlKGF1dGgsIG9vYkNvZGUpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXNldFBhc3N3b3JkKGF1dGhNb2R1bGFyLCB7IG9vYkNvZGUgfSk7XHJcbiAgICAvLyBFbWFpbCBjb3VsZCBiZSBlbXB0eSBvbmx5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXMgRU1BSUxfU0lHTklOIG9yXHJcbiAgICAvLyBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTC5cclxuICAgIC8vIE5ldyBlbWFpbCBzaG91bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLlxyXG4gICAgLy8gTXVsdGktZmFjdG9yIGluZm8gY291bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OLlxyXG4gICAgY29uc3Qgb3BlcmF0aW9uID0gcmVzcG9uc2UucmVxdWVzdFR5cGU7XHJcbiAgICBfYXNzZXJ0KG9wZXJhdGlvbiwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xyXG4gICAgICAgIGNhc2UgXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi86XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm5ld0VtYWlsLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OXCIgLyogUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04gKi86XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UubWZhSW5mbywgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5lbWFpbCwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGUgbXVsdGktZmFjdG9yIGluZm8gZm9yIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uXHJcbiAgICBsZXQgbXVsdGlGYWN0b3JJbmZvID0gbnVsbDtcclxuICAgIGlmIChyZXNwb25zZS5tZmFJbmZvKSB7XHJcbiAgICAgICAgbXVsdGlGYWN0b3JJbmZvID0gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKF9jYXN0QXV0aChhdXRoTW9kdWxhciksIHJlc3BvbnNlLm1mYUluZm8pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGVtYWlsOiAocmVzcG9uc2UucmVxdWVzdFR5cGUgPT09IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqL1xyXG4gICAgICAgICAgICAgICAgPyByZXNwb25zZS5uZXdFbWFpbFxyXG4gICAgICAgICAgICAgICAgOiByZXNwb25zZS5lbWFpbCkgfHwgbnVsbCxcclxuICAgICAgICAgICAgcHJldmlvdXNFbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UuZW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UubmV3RW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIG11bHRpRmFjdG9ySW5mb1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3BlcmF0aW9uXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgYSBwYXNzd29yZCByZXNldCBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MgaWYgdmFsaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKGF1dGgsIGNvZGUpIHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2hlY2tBY3Rpb25Db2RlKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgY29kZSk7XHJcbiAgICAvLyBFbWFpbCBzaG91bGQgYWx3YXlzIGJlIHByZXNlbnQgc2luY2UgYSBjb2RlIHdhcyBzZW50IHRvIGl0XHJcbiAgICByZXR1cm4gZGF0YS5lbWFpbDtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyB1c2VyIGFjY291bnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE9uIHN1Y2Nlc3NmdWwgY3JlYXRpb24gb2YgdGhlIHVzZXIgYWNjb3VudCwgdGhpcyB1c2VyIHdpbGwgYWxzbyBiZSBzaWduZWQgaW4gdG8geW91ciBhcHBsaWNhdGlvbi5cclxuICpcclxuICogVXNlciBhY2NvdW50IGNyZWF0aW9uIGNhbiBmYWlsIGlmIHRoZSBhY2NvdW50IGFscmVhZHkgZXhpc3RzIG9yIHRoZSBwYXNzd29yZCBpcyBpbnZhbGlkLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgZW1haWwgYWRkcmVzcyBhY3RzIGFzIGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyIGFuZCBlbmFibGVzIGFuIGVtYWlsLWJhc2VkXHJcbiAqIHBhc3N3b3JkIHJlc2V0LiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgc2V0IHRoZSBpbml0aWFsIHVzZXIgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgLSBUaGUgdXNlcidzIGNob3NlbiBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduVXAoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGFuIGVtYWlsIGFuZCBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQgZG8gbm90IG1hdGNoLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgdXNlcidzIHBhc3N3b3JkIGlzIE5PVCB0aGUgcGFzc3dvcmQgdXNlZCB0byBhY2Nlc3MgdGhlIHVzZXIncyBlbWFpbCBhY2NvdW50LiBUaGVcclxuICogZW1haWwgYWRkcmVzcyBzZXJ2ZXMgYXMgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIsIGFuZCB0aGUgcGFzc3dvcmQgaXMgdXNlZCB0byBhY2Nlc3NcclxuICogdGhlIHVzZXIncyBhY2NvdW50IGluIHlvdXIgRmlyZWJhc2UgcHJvamVjdC4gU2VlIGFsc286IHtAbGluayBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VycyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgLSBUaGUgdXNlcnMgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2VuZHMgYSBzaWduLWluIGVtYWlsIGxpbmsgdG8gdGhlIHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgc2lnbi1pbiBvcGVyYXRpb24gaGFzIHRvIGFsd2F5cyBiZSBjb21wbGV0ZWQgaW4gdGhlIGFwcCB1bmxpa2Ugb3RoZXIgb3V0IG9mIGJhbmQgZW1haWxcclxuICogYWN0aW9ucyAocGFzc3dvcmQgcmVzZXQgYW5kIGVtYWlsIHZlcmlmaWNhdGlvbnMpLiBUaGlzIGlzIGJlY2F1c2UsIGF0IHRoZSBlbmQgb2YgdGhlIGZsb3csXHJcbiAqIHRoZSB1c2VyIGlzIGV4cGVjdGVkIHRvIGJlIHNpZ25lZCBpbiBhbmQgdGhlaXIgQXV0aCBzdGF0ZSBwZXJzaXN0ZWQgd2l0aGluIHRoZSBhcHAuXHJcbiAqXHJcbiAqIFRvIGNvbXBsZXRlIHNpZ24gaW4gd2l0aCB0aGUgZW1haWwgbGluaywgY2FsbCB7QGxpbmsgc2lnbkluV2l0aEVtYWlsTGlua30gd2l0aCB0aGUgZW1haWxcclxuICogYWRkcmVzcyBhbmQgdGhlIGVtYWlsIGxpbmsgc3VwcGxpZWQgaW4gdGhlIGVtYWlsIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluaygndXNlckBleGFtcGxlLmNvbScsICd1c2VyQGV4YW1wbGUuY29tJywgZW1haWxMaW5rKTtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGhJbnRlcm5hbCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi8sXHJcbiAgICAgICAgZW1haWxcclxuICAgIH07XHJcbiAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5oYW5kbGVDb2RlSW5BcHAsIGF1dGhNb2R1bGFyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aE1vZHVsYXIsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwkMShhdXRoTW9kdWxhciwgcmVxdWVzdCk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhbiBpbmNvbWluZyBsaW5rIGlzIGEgc2lnbi1pbiB3aXRoIGVtYWlsIGxpbmsgc3VpdGFibGUgZm9yIHtAbGluayBzaWduSW5XaXRoRW1haWxMaW5rfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWxMaW5rIC0gVGhlIGxpbmsgc2VudCB0byB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspIHtcclxuICAgIGNvbnN0IGFjdGlvbkNvZGVVcmwgPSBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhlbWFpbExpbmspO1xyXG4gICAgcmV0dXJuIChhY3Rpb25Db2RlVXJsID09PSBudWxsIHx8IGFjdGlvbkNvZGVVcmwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFjdGlvbkNvZGVVcmwub3BlcmF0aW9uKSA9PT0gXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi87XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGFuIGVtYWlsIGFuZCBzaWduLWluIGVtYWlsIGxpbmsuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIG5vIGxpbmsgaXMgcGFzc2VkLCB0aGUgbGluayBpcyBpbmZlcnJlZCBmcm9tIHRoZSBjdXJyZW50IFVSTC5cclxuICpcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgZW1haWwgYWRkcmVzcyBpcyBpbnZhbGlkIG9yIE9UUCBpbiBlbWFpbCBsaW5rIGV4cGlyZXMuXHJcbiAqXHJcbiAqIE5vdGU6IENvbmZpcm0gdGhlIGxpbmsgaXMgYSBzaWduLWluIGVtYWlsIGxpbmsgYmVmb3JlIGNhbGxpbmcgdGhpcyBtZXRob2QgZmlyZWJhc2UuYXV0aC5BdXRoLmlzU2lnbkluV2l0aEVtYWlsTGluay5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB0aGUgdXNlci5cclxuICogaWYoaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykpIHtcclxuICogICBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKCd1c2VyQGV4YW1wbGUuY29tJywgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgY3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhlbWFpbCwgZW1haWxMaW5rIHx8IF9nZXRDdXJyZW50VXJsKCkpO1xyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHRlbmFudCBJRCBpbiB0aGUgZW1haWwgbGluayBtYXRjaGVzIHRoZSB0ZW5hbnQgSUQgb24gQXV0aFxyXG4gICAgLy8gaW5zdGFuY2UuXHJcbiAgICBfYXNzZXJ0KGNyZWRlbnRpYWwuX3RlbmFudElkID09PSAoYXV0aE1vZHVsYXIudGVuYW50SWQgfHwgbnVsbCksIGF1dGhNb2R1bGFyLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqLyk7XHJcbiAgICByZXR1cm4gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aE1vZHVsYXIsIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF1dGhVcmkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpjcmVhdGVBdXRoVXJpXCIgLyogQ1JFQVRFX0FVVEhfVVJJICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBsaXN0IG9mIHBvc3NpYmxlIHNpZ24gaW4gbWV0aG9kcyBmb3IgdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGRpZmZlcmVudGlhdGUgbWV0aG9kcyBvZiBzaWduLWluIGZvciB0aGUgc2FtZSBwcm92aWRlciwgZWcuXHJcbiAqIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2hpY2ggaGFzIDIgbWV0aG9kcyBvZiBzaWduLWluLFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKGF1dGgsIGVtYWlsKSB7XHJcbiAgICAvLyBjcmVhdGVBdXRoVXJpIHJldHVybnMgYW4gZXJyb3IgaWYgY29udGludWUgVVJJIGlzIG5vdCBodHRwIG9yIGh0dHBzLlxyXG4gICAgLy8gRm9yIGVudmlyb25tZW50cyBsaWtlIENvcmRvdmEsIENocm9tZSBleHRlbnNpb25zLCBuYXRpdmUgZnJhbWV3b3JrcywgZmlsZVxyXG4gICAgLy8gc3lzdGVtcywgZXRjLCB1c2UgaHR0cDovL2xvY2FsaG9zdCBhcyBjb250aW51ZSBVUkwuXHJcbiAgICBjb25zdCBjb250aW51ZVVyaSA9IF9pc0h0dHBPckh0dHBzKCkgPyBfZ2V0Q3VycmVudFVybCgpIDogJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZGVudGlmaWVyOiBlbWFpbCxcclxuICAgICAgICBjb250aW51ZVVyaVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHsgc2lnbmluTWV0aG9kcyB9ID0gYXdhaXQgY3JlYXRlQXV0aFVyaShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHJlcXVlc3QpO1xyXG4gICAgcmV0dXJuIHNpZ25pbk1ldGhvZHMgfHwgW107XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGlzIGNvbXBsZXRlZCBieSBjYWxsaW5nIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0VNQUlMXCIgLyogVkVSSUZZX0VNQUlMICovLFxyXG4gICAgICAgIGlkVG9rZW5cclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbiQxKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcclxuICAgIGlmIChlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgIGF3YWl0IHVzZXIucmVsb2FkKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgbmV3IGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSB1c2VyJ3MgZW1haWwgd2lsbCBiZSB1cGRhdGVkIHRvIHRoZSBuZXcgb25lIGFmdGVyIGJlaW5nIHZlcmlmaWVkLlxyXG4gKlxyXG4gKiBJZiB5b3UgaGF2ZSBhIGN1c3RvbSBlbWFpbCBhY3Rpb24gaGFuZGxlciwgeW91IGNhbiBjb21wbGV0ZSB0aGUgdmVyaWZpY2F0aW9uIHByb2Nlc3MgYnkgY2FsbGluZ1xyXG4gKiB7QGxpbmsgYXBwbHlBY3Rpb25Db2RlfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsICduZXdlbWFpbEBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcyB0byBiZSB2ZXJpZmllZCBiZWZvcmUgdXBkYXRlLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCh1c2VyLCBuZXdFbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICBuZXdFbWFpbFxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgdmVyaWZ5QW5kQ2hhbmdlRW1haWwodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGxvY2FsIGNvcHkgb2YgdGhlIGVtYWlsIG9uIHVzZXIgaXMgb3V0ZGF0ZWQsIHJlbG9hZCB0aGVcclxuICAgICAgICAvLyB1c2VyLlxyXG4gICAgICAgIGF3YWl0IHVzZXIucmVsb2FkKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYSB1c2VyJ3MgcHJvZmlsZSBkYXRhLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvZmlsZSAtIFRoZSBwcm9maWxlJ3MgYGRpc3BsYXlOYW1lYCBhbmQgYHBob3RvVVJMYCB0byB1cGRhdGUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUodXNlciwgeyBkaXNwbGF5TmFtZSwgcGhvdG9VUkw6IHBob3RvVXJsIH0pIHtcclxuICAgIGlmIChkaXNwbGF5TmFtZSA9PT0gdW5kZWZpbmVkICYmIHBob3RvVXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHByb2ZpbGVSZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgcGhvdG9VcmwsXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXJJbnRlcm5hbCwgdXBkYXRlUHJvZmlsZSQxKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm9maWxlUmVxdWVzdCkpO1xyXG4gICAgdXNlckludGVybmFsLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWUgfHwgbnVsbDtcclxuICAgIHVzZXJJbnRlcm5hbC5waG90b1VSTCA9IHJlc3BvbnNlLnBob3RvVXJsIHx8IG51bGw7XHJcbiAgICAvLyBVcGRhdGUgdGhlIHBhc3N3b3JkIHByb3ZpZGVyIGFzIHdlbGxcclxuICAgIGNvbnN0IHBhc3N3b3JkUHJvdmlkZXIgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbmQoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkID09PSBcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8pO1xyXG4gICAgaWYgKHBhc3N3b3JkUHJvdmlkZXIpIHtcclxuICAgICAgICBwYXNzd29yZFByb3ZpZGVyLmRpc3BsYXlOYW1lID0gdXNlckludGVybmFsLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIucGhvdG9VUkwgPSB1c2VySW50ZXJuYWwucGhvdG9VUkw7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIGVtYWlsIHdpbGwgYmUgc2VudCB0byB0aGUgb3JpZ2luYWwgZW1haWwgYWRkcmVzcyAoaWYgaXQgd2FzIHNldCkgdGhhdCBhbGxvd3MgdG8gcmV2b2tlIHRoZVxyXG4gKiBlbWFpbCBhZGRyZXNzIGNoYW5nZSwgaW4gb3JkZXIgdG8gcHJvdGVjdCB0aGVtIGZyb20gYWNjb3VudCBoaWphY2tpbmcuXHJcbiAqXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5IHNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5IHNpZ25lZFxyXG4gKiBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlRW1haWwodXNlciwgbmV3RW1haWwpIHtcclxuICAgIHJldHVybiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBuZXdFbWFpbCwgbnVsbCk7XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUGFzc3dvcmQodXNlciwgbmV3UGFzc3dvcmQpIHtcclxuICAgIHJldHVybiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBudWxsLCBuZXdQYXNzd29yZCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxPclBhc3N3b3JkKHVzZXIsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9O1xyXG4gICAgaWYgKGVtYWlsKSB7XHJcbiAgICAgICAgcmVxdWVzdC5lbWFpbCA9IGVtYWlsO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmVxdWVzdC5wYXNzd29yZCA9IHBhc3N3b3JkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCB1cGRhdGVFbWFpbFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpKTtcclxuICAgIGF3YWl0IHVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlLCAvKiByZWxvYWQgKi8gdHJ1ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBhcnNlIHRoZSBgQWRkaXRpb25hbFVzZXJJbmZvYCBmcm9tIHRoZSBJRCB0b2tlbiByZXNwb25zZS5cclxuICpcclxuICovXHJcbmZ1bmN0aW9uIF9mcm9tSWRUb2tlblJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGlmICghaWRUb2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IHByb3ZpZGVySWQgfSA9IGlkVG9rZW5SZXNwb25zZTtcclxuICAgIGNvbnN0IHByb2ZpbGUgPSBpZFRva2VuUmVzcG9uc2UucmF3VXNlckluZm9cclxuICAgICAgICA/IEpTT04ucGFyc2UoaWRUb2tlblJlc3BvbnNlLnJhd1VzZXJJbmZvKVxyXG4gICAgICAgIDoge307XHJcbiAgICBjb25zdCBpc05ld1VzZXIgPSBpZFRva2VuUmVzcG9uc2UuaXNOZXdVc2VyIHx8XHJcbiAgICAgICAgaWRUb2tlblJlc3BvbnNlLmtpbmQgPT09IFwiaWRlbnRpdHl0b29sa2l0I1NpZ251cE5ld1VzZXJSZXNwb25zZVwiIC8qIFNpZ251cE5ld1VzZXIgKi87XHJcbiAgICBpZiAoIXByb3ZpZGVySWQgJiYgKGlkVG9rZW5SZXNwb25zZSA9PT0gbnVsbCB8fCBpZFRva2VuUmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlkVG9rZW5SZXNwb25zZS5pZFRva2VuKSkge1xyXG4gICAgICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gKF9iID0gKF9hID0gX3BhcnNlVG9rZW4oaWRUb2tlblJlc3BvbnNlLmlkVG9rZW4pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlyZWJhc2UpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYlsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgICAgIGlmIChzaWduSW5Qcm92aWRlcikge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFByb3ZpZGVySWQgPSBzaWduSW5Qcm92aWRlciAhPT0gXCJhbm9ueW1vdXNcIiAvKiBBTk9OWU1PVVMgKi8gJiZcclxuICAgICAgICAgICAgICAgIHNpZ25JblByb3ZpZGVyICE9PSBcImN1c3RvbVwiIC8qIENVU1RPTSAqL1xyXG4gICAgICAgICAgICAgICAgPyBzaWduSW5Qcm92aWRlclxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICAvLyBVc2VzIGdlbmVyaWMgY2xhc3MgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBsZWdhY3kgU0RLLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBmaWx0ZXJlZFByb3ZpZGVySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChwcm92aWRlcklkKSB7XHJcbiAgICAgICAgY2FzZSBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUd2l0dGVyQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSwgaWRUb2tlblJlc3BvbnNlLnNjcmVlbk5hbWUgfHwgbnVsbCk7XHJcbiAgICAgICAgY2FzZSBcImN1c3RvbVwiIC8qIENVU1RPTSAqLzpcclxuICAgICAgICBjYXNlIFwiYW5vbnltb3VzXCIgLyogQU5PTllNT1VTICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBudWxsKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5pc05ld1VzZXIgPSBpc05ld1VzZXI7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnByb2ZpbGUgPSBwcm9maWxlO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlLCB1c2VybmFtZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSk7XHJcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi8sIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdpdGh1YkFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLywgcHJvZmlsZSwgdHlwZW9mIChwcm9maWxlID09PSBudWxsIHx8IHByb2ZpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2ZpbGUubG9naW4pID09PSAnc3RyaW5nJyA/IHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbiA6IG51bGwpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi8sIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlLCBzY3JlZW5OYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLywgcHJvZmlsZSwgc2NyZWVuTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3RzIHByb3ZpZGVyIHNwZWNpZmljIHtAbGluayBBZGRpdGlvbmFsVXNlckluZm99IGZvciB0aGUgZ2l2ZW4gY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QWRkaXRpb25hbFVzZXJJbmZvKHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICBjb25zdCB7IHVzZXIsIF90b2tlblJlc3BvbnNlIH0gPSB1c2VyQ3JlZGVudGlhbDtcclxuICAgIGlmICh1c2VyLmlzQW5vbnltb3VzICYmICFfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgc3BlY2lhbCBjYXNlIHdoZXJlIHNpZ25JbkFub255bW91c2x5KCkgZ2V0cyBjYWxsZWQgdHdpY2UuXHJcbiAgICAgICAgLy8gTm8gbmV0d29yayBjYWxsIGlzIG1hZGUgc28gdGhlcmUncyBub3RoaW5nIHRvIGFjdHVhbGx5IGZpbGwgdGhpcyBpblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGlzTmV3VXNlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9mcm9tSWRUb2tlblJlc3BvbnNlKF90b2tlblJlc3BvbnNlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBOb24tb3B0aW9uYWwgYXV0aCBtZXRob2RzLlxyXG4vKipcclxuICogQ2hhbmdlcyB0aGUgdHlwZSBvZiBwZXJzaXN0ZW5jZSBvbiB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIGZvciB0aGUgY3VycmVudGx5IHNhdmVkXHJcbiAqIGBBdXRoYCBzZXNzaW9uIGFuZCBhcHBsaWVzIHRoaXMgdHlwZSBvZiBwZXJzaXN0ZW5jZSBmb3IgZnV0dXJlIHNpZ24taW4gcmVxdWVzdHMsIGluY2x1ZGluZ1xyXG4gKiBzaWduLWluIHdpdGggcmVkaXJlY3QgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWFrZXMgaXQgZWFzeSBmb3IgYSB1c2VyIHNpZ25pbmcgaW4gdG8gc3BlY2lmeSB3aGV0aGVyIHRoZWlyIHNlc3Npb24gc2hvdWxkIGJlXHJcbiAqIHJlbWVtYmVyZWQgb3Igbm90LiBJdCBhbHNvIG1ha2VzIGl0IGVhc2llciB0byBuZXZlciBwZXJzaXN0IHRoZSBgQXV0aGAgc3RhdGUgZm9yIGFwcGxpY2F0aW9uc1xyXG4gKiB0aGF0IGFyZSBzaGFyZWQgYnkgb3RoZXIgdXNlcnMgb3IgaGF2ZSBzZW5zaXRpdmUgZGF0YS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHBlcnNpc3RlbmNlIC0gVGhlIHtAbGluayBQZXJzaXN0ZW5jZX0gdG8gdXNlLlxyXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIHBlcnNpc3RlbmNlIGNoYW5nZSBoYXMgY29tcGxldGVkXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldFBlcnNpc3RlbmNlKGF1dGgsIHBlcnNpc3RlbmNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKTtcclxufVxyXG4vKipcclxuICogQWRkcyBhbiBvYnNlcnZlciBmb3IgY2hhbmdlcyB0byB0aGUgc2lnbmVkLWluIHVzZXIncyBJRCB0b2tlbiwgd2hpY2ggaW5jbHVkZXMgc2lnbi1pbixcclxuICogc2lnbi1vdXQsIGFuZCB0b2tlbiByZWZyZXNoIGV2ZW50cy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gY2hhbmdlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gZXJyb3IuXHJcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbklkVG9rZW5DaGFuZ2VkKGF1dGgsIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLm9uSWRUb2tlbkNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSB1c2VyJ3Mgc2lnbi1pbiBzdGF0ZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8ga2VlcCB0aGUgb2xkIGJlaGF2aW9yLCBzZWUge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBlcnJvci5cclxuICogQHBhcmFtIGNvbXBsZXRlZCAtIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBjdXJyZW50IGxhbmd1YWdlIHRvIHRoZSBkZWZhdWx0IGRldmljZS9icm93c2VyIHByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXNlRGV2aWNlTGFuZ3VhZ2UoYXV0aCkge1xyXG4gICAgZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVzZURldmljZUxhbmd1YWdlKCk7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNldHMgdGhlIHByb3ZpZGVkIHVzZXIgYXMge0BsaW5rIEF1dGguY3VycmVudFVzZXJ9IG9uIHRoZVxyXG4gKiB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEEgbmV3IGluc3RhbmNlIGNvcHkgb2YgdGhlIHVzZXIgcHJvdmlkZWQgd2lsbCBiZSBtYWRlIGFuZCBzZXQgYXMgY3VycmVudFVzZXIuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCB0cmlnZ2VyIHtAbGluayBvbkF1dGhTdGF0ZUNoYW5nZWR9IGFuZCB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0gbGlzdGVuZXJzXHJcbiAqIGxpa2Ugb3RoZXIgc2lnbiBpbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBUaGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHVzZXIgdG8gYmUgdXBkYXRlZCBiZWxvbmdzIHRvIGEgZGlmZmVyZW50IEZpcmViYXNlXHJcbiAqIHByb2plY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHVzZXIgLSBUaGUgbmV3IHtAbGluayBVc2VyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIoYXV0aCwgdXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51cGRhdGVDdXJyZW50VXNlcih1c2VyKTtcclxufVxyXG4vKipcclxuICogU2lnbnMgb3V0IHRoZSBjdXJyZW50IHVzZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbk91dChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNpZ25PdXQoKTtcclxufVxyXG4vKipcclxuICogRGVsZXRlcyBhbmQgc2lnbnMgb3V0IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eS1zZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseVxyXG4gKiBzaWduZWQgaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKHVzZXIpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZGVsZXRlKCk7XHJcbn1cblxuY2xhc3MgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSWR0b2tlbihpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclNlc3Npb25JbXBsKFwiZW5yb2xsXCIgLyogRU5ST0xMICovLCBpZFRva2VuKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKG1mYVBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclNlc3Npb25JbXBsKFwic2lnbmluXCIgLyogU0lHTl9JTiAqLywgbWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMudHlwZSA9PT0gXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi9cclxuICAgICAgICAgICAgPyAnaWRUb2tlbidcclxuICAgICAgICAgICAgOiAncGVuZGluZ0NyZWRlbnRpYWwnO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG11bHRpRmFjdG9yU2Vzc2lvbjoge1xyXG4gICAgICAgICAgICAgICAgW2tleV06IHRoaXMuY3JlZGVudGlhbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tSlNPTihvYmopIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIGlmICgoX2EgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwob2JqLm11bHRpRmFjdG9yU2Vzc2lvbi5wZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoKF9iID0gb2JqLm11bHRpRmFjdG9yU2Vzc2lvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tSWR0b2tlbihvYmoubXVsdGlGYWN0b3JTZXNzaW9uLmlkVG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlc3Npb24sIGhpbnRzLCBzaWduSW5SZXNvbHZlcikge1xyXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICAgICAgdGhpcy5oaW50cyA9IGhpbnRzO1xyXG4gICAgICAgIHRoaXMuc2lnbkluUmVzb2x2ZXIgPSBzaWduSW5SZXNvbHZlcjtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVycm9yKGF1dGhFeHRlcm4sIGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IGVycm9yLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlO1xyXG4gICAgICAgIGNvbnN0IGhpbnRzID0gKHNlcnZlclJlc3BvbnNlLm1mYUluZm8gfHwgW10pLm1hcChlbnJvbGxtZW50ID0+IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KSk7XHJcbiAgICAgICAgX2Fzc2VydChzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsKHNlc3Npb24sIGhpbnRzLCBhc3luYyAoYXNzZXJ0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1mYVJlc3BvbnNlID0gYXdhaXQgYXNzZXJ0aW9uLl9wcm9jZXNzKGF1dGgsIHNlc3Npb24pO1xyXG4gICAgICAgICAgICAvLyBDbGVhciBvdXQgdGhlIHVubmVlZGVkIGZpZWxkcyBmcm9tIHRoZSBvbGQgbG9naW4gcmVzcG9uc2VcclxuICAgICAgICAgICAgZGVsZXRlIHNlcnZlclJlc3BvbnNlLm1mYUluZm87XHJcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgLy8gVXNlIGluIHRoZSBuZXcgdG9rZW4gJiByZWZyZXNoIHRva2VuIGluIHRoZSBvbGQgcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3QgaWRUb2tlblJlc3BvbnNlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzZXJ2ZXJSZXNwb25zZSksIHsgaWRUb2tlbjogbWZhUmVzcG9uc2UuaWRUb2tlbiwgcmVmcmVzaFRva2VuOiBtZmFSZXNwb25zZS5yZWZyZXNoVG9rZW4gfSk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHdlIHNob3VsZCBjb2xsYXBzZSB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQgaW50byBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbiBhbmQgaGF2ZSBpdCBzdXBwb3J0IHRoZSBTSUdOX0lOIGNhc2VcclxuICAgICAgICAgICAgc3dpdGNoIChlcnJvci5vcGVyYXRpb25UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NlcnQoZXJyb3IudXNlciwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24oZXJyb3IudXNlciwgZXJyb3Iub3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVzb2x2ZVNpZ25Jbihhc3NlcnRpb25FeHRlcm4pIHtcclxuICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhc3NlcnRpb25FeHRlcm47XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluUmVzb2x2ZXIoYXNzZXJ0aW9uKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXMgYSB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGNvbXBsZXRpb24gb2YgYVxyXG4gKiBtdWx0aS1mYWN0b3IgZmxvdy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBUaGUge0BsaW5rIE11bHRpRmFjdG9yRXJyb3J9IHJhaXNlZCBkdXJpbmcgYSBzaWduLWluLCBvclxyXG4gKiByZWF1dGhlbnRpY2F0aW9uIG9wZXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlcnJvcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBlcnJvckludGVybmFsID0gZXJyb3I7XHJcbiAgICBfYXNzZXJ0KGVycm9yLmN1c3RvbURhdGEub3BlcmF0aW9uVHlwZSwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KChfYSA9IGVycm9ySW50ZXJuYWwuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZmFQZW5kaW5nQ3JlZGVudGlhbCwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTXVsdGlGYWN0b3JSZXNvbHZlckltcGwuX2Zyb21FcnJvcihhdXRoTW9kdWxhciwgZXJyb3JJbnRlcm5hbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfRU5ST0xMTUVOVCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDpmaW5hbGl6ZVwiIC8qIEZJTkFMSVpFX1BIT05FX01GQV9FTlJPTExNRU5UICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIHdpdGhkcmF3TWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDp3aXRoZHJhd1wiIC8qIFdJVEhEUkFXX01GQSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG5jbGFzcyBNdWx0aUZhY3RvclVzZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gW107XHJcbiAgICAgICAgdXNlci5fb25SZWxvYWQodXNlckluZm8gPT4ge1xyXG4gICAgICAgICAgICBpZiAodXNlckluZm8ubWZhSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB1c2VySW5mby5tZmFJbmZvLm1hcChlbnJvbGxtZW50ID0+IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZSh1c2VyLmF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tVXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclVzZXJJbXBsKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbUlkdG9rZW4oYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBlbnJvbGwoYXNzZXJ0aW9uRXh0ZXJuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gKGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigpKTtcclxuICAgICAgICBjb25zdCBmaW5hbGl6ZU1mYVJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcy51c2VyLCBhc3NlcnRpb24uX3Byb2Nlc3ModGhpcy51c2VyLmF1dGgsIHNlc3Npb24sIGRpc3BsYXlOYW1lKSk7XHJcbiAgICAgICAgLy8gTmV3IHRva2VucyB3aWxsIGJlIGlzc3VlZCBhZnRlciBlbnJvbGxtZW50IG9mIHRoZSBuZXcgc2Vjb25kIGZhY3RvcnMuXHJcbiAgICAgICAgLy8gVGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQgb24gdGhlIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShmaW5hbGl6ZU1mYVJlc3BvbnNlKTtcclxuICAgICAgICAvLyBUaGUgdXNlciBuZWVkcyB0byBiZSByZWxvYWRlZCB0byBnZXQgdGhlIG5ldyBtdWx0aS1mYWN0b3IgaW5mb3JtYXRpb25cclxuICAgICAgICAvLyBmcm9tIHNlcnZlci4gVVNFUl9SRUxPQURFRCBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCBhbmQgYGVucm9sbGVkRmFjdG9yc2BcclxuICAgICAgICAvLyB3aWxsIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVuZW5yb2xsKGluZm9PclVpZCkge1xyXG4gICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9IHR5cGVvZiBpbmZvT3JVaWQgPT09ICdzdHJpbmcnID8gaW5mb09yVWlkIDogaW5mb09yVWlkLnVpZDtcclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIHdpdGhkcmF3TWZhKHRoaXMudXNlci5hdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNlY29uZCBmYWN0b3IgZnJvbSB0aGUgdXNlcidzIGxpc3QuXHJcbiAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB0aGlzLmVucm9sbGVkRmFjdG9ycy5maWx0ZXIoKHsgdWlkIH0pID0+IHVpZCAhPT0gbWZhRW5yb2xsbWVudElkKTtcclxuICAgICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYmFja2VuZCBkZWNpZGVkIHRvIHJldm9rZSB0aGUgdXNlcidzIHNlc3Npb24sXHJcbiAgICAgICAgLy8gdGhlIHRva2VuUmVzcG9uc2UgbWF5IGJlIGVtcHR5LiBJZiB0aGUgdG9rZW5zIHdlcmUgbm90IHVwZGF0ZWQgKGFuZCB0aGV5XHJcbiAgICAgICAgLy8gYXJlIG5vdyBpbnZhbGlkKSwgcmVsb2FkaW5nIHRoZSB1c2VyIHdpbGwgZGlzY292ZXIgdGhpcyBhbmQgaW52YWxpZGF0ZVxyXG4gICAgICAgIC8vIHRoZSB1c2VyJ3Mgc3RhdGUgYWNjb3JkaW5nbHkuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jb25zdCBtdWx0aUZhY3RvclVzZXJDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbi8qKlxyXG4gKiBUaGUge0BsaW5rIE11bHRpRmFjdG9yVXNlcn0gY29ycmVzcG9uZGluZyB0byB0aGUgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VkIHRvIGFjY2VzcyBhbGwgbXVsdGktZmFjdG9yIHByb3BlcnRpZXMgYW5kIG9wZXJhdGlvbnMgcmVsYXRlZCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbXVsdGlGYWN0b3IodXNlcikge1xyXG4gICAgY29uc3QgdXNlck1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBpZiAoIW11bHRpRmFjdG9yVXNlckNhY2hlLmhhcyh1c2VyTW9kdWxhcikpIHtcclxuICAgICAgICBtdWx0aUZhY3RvclVzZXJDYWNoZS5zZXQodXNlck1vZHVsYXIsIE11bHRpRmFjdG9yVXNlckltcGwuX2Zyb21Vc2VyKHVzZXJNb2R1bGFyKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbXVsdGlGYWN0b3JVc2VyQ2FjaGUuZ2V0KHVzZXJNb2R1bGFyKTtcclxufVxuXG5jb25zdCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkgPSAnX19zYWsnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGVyZSBhcmUgdHdvIGRpZmZlcmVudCBicm93c2VyIHBlcnNpc3RlbmNlIHR5cGVzOiBsb2NhbCBhbmQgc2Vzc2lvbi5cclxuLy8gQm90aCBoYXZlIHRoZSBzYW1lIGltcGxlbWVudGF0aW9uIGJ1dCB1c2UgYSBkaWZmZXJlbnQgdW5kZXJseWluZyBzdG9yYWdlXHJcbi8vIG9iamVjdC5cclxuY2xhc3MgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3Ioc3RvcmFnZVJldHJpZXZlciwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVJldHJpZXZlciA9IHN0b3JhZ2VSZXRyaWV2ZXI7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuICAgIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqc29uID8gSlNPTi5wYXJzZShqc29uKSA6IG51bGwpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGdldCBzdG9yYWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VSZXRyaWV2ZXIoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gX2lzU2FmYXJpKHVhKSB8fCBfaXNJT1ModWEpO1xyXG59XHJcbi8vIFRoZSBwb2xsaW5nIHBlcmlvZCBpbiBjYXNlIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZFxyXG5jb25zdCBfUE9MTElOR19JTlRFUlZBTF9NUyQxID0gMTAwMDtcclxuLy8gVGhlIElFIDEwIGxvY2FsU3RvcmFnZSBjcm9zcyB0YWIgc3luY2hyb25pemF0aW9uIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG5jb25zdCBJRTEwX0xPQ0FMX1NUT1JBR0VfU1lOQ19ERUxBWSA9IDEwO1xyXG5jbGFzcyBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5sb2NhbFN0b3JhZ2UsIFwiTE9DQUxcIiAvKiBMT0NBTCAqLyk7XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IChldmVudCwgcG9sbCkgPT4gdGhpcy5vblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIFNhZmFyaSBvciBpT1MgYnJvd3NlciBhbmQgZW1iZWRkZWQgaW4gYW4gaWZyYW1lLlxyXG4gICAgICAgIHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkID0gX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlKCkgJiYgX2lzSWZyYW1lKCk7XHJcbiAgICAgICAgLy8gV2hldGhlciB0byB1c2UgcG9sbGluZyBpbnN0ZWFkIG9mIGRlcGVuZGluZyBvbiB3aW5kb3cgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5mYWxsYmFja1RvUG9sbGluZyA9IF9pc01vYmlsZUJyb3dzZXIoKTtcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBmb3JBbGxDaGFuZ2VkS2V5cyhjYikge1xyXG4gICAgICAgIC8vIENoZWNrIGFsbCBrZXlzIHdpdGggbGlzdGVuZXJzIG9uIHRoZW0uXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB2YWx1ZSBmcm9tIGxvY2FsU3RvcmFnZS5cclxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICAvLyBJZiBsb2NhbCBtYXAgdmFsdWUgZG9lcyBub3QgbWF0Y2gsIHRyaWdnZXIgbGlzdGVuZXIgd2l0aCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBEaWZmZXJlbnRpYXRlIHRoaXMgc2ltdWxhdGVkIGV2ZW50IGZyb20gdGhlIHJlYWwgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY2Ioa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25TdG9yYWdlRXZlbnQoZXZlbnQsIHBvbGwgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIEtleSB3b3VsZCBiZSBudWxsIGluIHNvbWUgc2l0dWF0aW9ucywgbGlrZSB3aGVuIGxvY2FsU3RvcmFnZSBpcyBjbGVhcmVkXHJcbiAgICAgICAgaWYgKCFldmVudC5rZXkpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5ID0gZXZlbnQua2V5O1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBtZWNoYW5pc20gaG93IHRoaXMgZXZlbnQgd2FzIGRldGVjdGVkLlxyXG4gICAgICAgIC8vIFRoZSBmaXJzdCBldmVudCB3aWxsIGRpY3RhdGUgdGhlIG1lY2hhbmlzbSB0byBiZSB1c2VkLlxyXG4gICAgICAgIGlmIChwb2xsKSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBwb2xsaW5nLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgc3RvcmFnZSBldmVudCBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLmRldGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBFbnZpcm9ubWVudCBkZXRlY3RzIHN0b3JhZ2UgY2hhbmdlcyB2aWEgc3RvcmFnZSBldmVudCBsaXN0ZW5lci5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHBvbGxpbmcgbGlzdGVuZXIgdG8gcHJldmVudCBwb3NzaWJsZSBldmVudCBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTYWZhcmkgZW1iZWRkZWQgaWZyYW1lLiBTdG9yYWdlIGV2ZW50IHdpbGwgdHJpZ2dlciB3aXRoIHRoZSBkZWx0YVxyXG4gICAgICAgIC8vIGNoYW5nZXMgYnV0IG5vIGNoYW5nZXMgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBpZnJhbWUgbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgIGlmICh0aGlzLnNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCkge1xyXG4gICAgICAgICAgICAvLyBHZXQgY3VycmVudCBpZnJhbWUgcGFnZSB2YWx1ZS5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICAvLyBWYWx1ZSBub3Qgc3luY2hyb25pemVkLCBzeW5jaHJvbml6ZSBtYW51YWxseS5cclxuICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBzdG9yZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWUgY2hhbmdlZCBmcm9tIGN1cnJlbnQgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDdXJyZW50IHZhbHVlIGRlbGV0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gZXZlbnQubmV3VmFsdWUgJiYgIXBvbGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgZGV0ZWN0ZWQgYW5kIHByb2Nlc3NlZCwgZG8gbm90IHRyaWdnZXIgbGlzdGVuZXJzIGFnYWluLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRyaWdnZXJMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEtlZXAgbG9jYWwgbWFwIHVwIHRvIGRhdGUgaW4gY2FzZSBzdG9yYWdlIGV2ZW50IGlzIHRyaWdnZXJlZCBiZWZvcmVcclxuICAgICAgICAgICAgLy8gcG9sbC5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIXBvbGwgJiYgdGhpcy5sb2NhbENhY2hlW2tleV0gPT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWFsIHN0b3JhZ2UgZXZlbnQgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBkZXRlY3RlZCwgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgdG8gdHJpZ2dlciBpbiBzb21lIElFIGJyb3dzZXJzIGZvciBzb21lIHJlYXNvbi5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIHN0b3JlZFZhbHVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICBpZiAoX2lzSUUxMCgpICYmXHJcbiAgICAgICAgICAgIHN0b3JlZFZhbHVlICE9PSBldmVudC5uZXdWYWx1ZSAmJlxyXG4gICAgICAgICAgICBldmVudC5uZXdWYWx1ZSAhPT0gZXZlbnQub2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gSUUgMTAgaGFzIHRoaXMgd2VpcmQgYnVnIHdoZXJlIGEgc3RvcmFnZSBldmVudCB3b3VsZCB0cmlnZ2VyIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIGNvcnJlY3Qga2V5LCBvbGRWYWx1ZSBhbmQgbmV3VmFsdWUgYnV0IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgZG9lc1xyXG4gICAgICAgICAgICAvLyBub3QgeWllbGQgdGhlIHVwZGF0ZWQgdmFsdWUgdW50aWwgYSBmZXcgbWlsbGlzZWNvbmRzLiBUaGlzIGVuc3VyZXNcclxuICAgICAgICAgICAgLy8gdGhpcyByZWNvdmVycyBmcm9tIHRoYXQgc2l0dWF0aW9uLlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRyaWdnZXJMaXN0ZW5lcnMsIElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgQXJyYXkuZnJvbShsaXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcih2YWx1ZSA/IEpTT04ucGFyc2UodmFsdWUpIDogdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdG9yYWdlRXZlbnQobmV3IFN0b3JhZ2VFdmVudCgnc3RvcmFnZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcclxuICAgICAgICAgICAgICAgIH0pLCBcclxuICAgICAgICAgICAgICAgIC8qIHBvbGwgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIF9QT0xMSU5HX0lOVEVSVkFMX01TJDEpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXR0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGRldGFjaExpc3RlbmVyKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgYnJvd3NlciBjYW4gZGV0ZWN0IHN0b3JhZ2UgZXZlbnQgd2hlbiBpdCBoYWQgYWxyZWFkeSBiZWVuIHB1c2hlZCB0byB0aGUgYmFja2dyb3VuZC5cclxuICAgICAgICAgICAgLy8gVGhpcyBtYXkgaGFwcGVuIGluIHNvbWUgbW9iaWxlIGJyb3dzZXJzLiBBIGxvY2FsU3RvcmFnZSBjaGFuZ2UgaW4gdGhlIGZvcmVncm91bmQgd2luZG93XHJcbiAgICAgICAgICAgIC8vIHdpbGwgbm90IGJlIGRldGVjdGVkIGluIHRoZSBiYWNrZ3JvdW5kIHdpbmRvdyB2aWEgdGhlIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGRldGVjdGVkIGluIGlPUyA3LnggbW9iaWxlIGJyb3dzZXJzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhbGxiYWNrVG9Qb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgY2FjaGUgdG8gYXZvaWQgc3B1cmlvdXNseSB0cmlnZ2VyaW5nIG9uIGZpcnN0IHBvbGwuXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5hZGQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFVwZGF0ZSBsb2NhbCBjYWNoZSBvbiBiYXNlIG9wZXJhdGlvbnM6XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5fc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHN1cGVyLl9nZXQoa2V5KTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9yZW1vdmUoa2V5KTtcclxuICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgbG9jYWxTdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgPSBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5zZXNzaW9uU3RvcmFnZSwgXCJTRVNTSU9OXCIgLyogU0VTU0lPTiAqLyk7XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBzZXNzaW9uIHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93c1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59XHJcbkJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UudHlwZSA9ICdTRVNTSU9OJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgYFNFU1NJT05gIHVzaW5nIGBzZXNzaW9uU3RvcmFnZWBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgPSBCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2hpbSBmb3IgUHJvbWlzZS5hbGxTZXR0bGVkLCBub3RlIHRoZSBzbGlnaHRseSBkaWZmZXJlbnQgZm9ybWF0IG9mIGBmdWxmaWxsZWRgIHZzIGBzdGF0dXNgLlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvbWlzZXMgLSBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IG9uLlxyXG4gKi9cclxuZnVuY3Rpb24gX2FsbFNldHRsZWQocHJvbWlzZXMpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAoYXN5bmMgKHByb21pc2UpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHByb21pc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgY2xhc3MgZm9yIHJlY2VpdmluZyBtZXNzYWdlcy5cclxuICpcclxuICovXHJcbmNsYXNzIFJlY2VpdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXAgPSB7fTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gdGhpcy5oYW5kbGVFdmVudC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW4gYW4gaW5zdGFuY2Ugb2YgYSBSZWNlaXZlciBmb3IgYSBnaXZlbiBldmVudCB0YXJnZXQsIGlmIG5vbmUgZXhpc3RzIGl0IHdpbGwgYmUgY3JlYXRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUYXJnZXQgLSBBbiBldmVudCB0YXJnZXQgKHN1Y2ggYXMgd2luZG93IG9yIHNlbGYpIHRocm91Z2ggd2hpY2ggdGhlIHVuZGVybHlpbmdcclxuICAgICAqIG1lc3NhZ2VzIHdpbGwgYmUgcmVjZWl2ZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfZ2V0SW5zdGFuY2UoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICAvLyBUaGUgcmVzdWx0cyBhcmUgc3RvcmVkIGluIGFuIGFycmF5IHNpbmNlIG9iamVjdHMgY2FuJ3QgYmUga2V5cyBmb3Igb3RoZXJcclxuICAgICAgICAvLyBvYmplY3RzLiBJbiBhZGRpdGlvbiwgc2V0dGluZyBhIHVuaXF1ZSBwcm9wZXJ0eSBvbiBhbiBldmVudCB0YXJnZXQgYXMgYVxyXG4gICAgICAgIC8vIGhhc2ggbWFwIGtleSBtYXkgbm90IGJlIGFsbG93ZWQgZHVlIHRvIENPUlMgcmVzdHJpY3Rpb25zLlxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLnJlY2VpdmVycy5maW5kKHJlY2VpdmVyID0+IHJlY2VpdmVyLmlzTGlzdGVuaW5ndG8oZXZlbnRUYXJnZXQpKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3SW5zdGFuY2UgPSBuZXcgUmVjZWl2ZXIoZXZlbnRUYXJnZXQpO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXJzLnB1c2gobmV3SW5zdGFuY2UpO1xyXG4gICAgICAgIHJldHVybiBuZXdJbnN0YW5jZTtcclxuICAgIH1cclxuICAgIGlzTGlzdGVuaW5ndG8oZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmVudFRhcmdldCA9PT0gZXZlbnRUYXJnZXQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEZhbnMgb3V0IGEgTWVzc2FnZUV2ZW50IHRvIHRoZSBhcHByb3ByaWF0ZSBsaXN0ZW5lcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFNlbmRzIGFuIHtAbGluayBTdGF0dXMuQUNLfSB1cG9uIHJlY2VpcHQgYW5kIGEge0BsaW5rIFN0YXR1cy5ET05FfSBvbmNlIGFsbCBoYW5kbGVycyBoYXZlXHJcbiAgICAgKiBmaW5pc2hlZCBwcm9jZXNzaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBNZXNzYWdlRXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBhc3luYyBoYW5kbGVFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgZXZlbnRJZCwgZXZlbnRUeXBlLCBkYXRhIH0gPSBtZXNzYWdlRXZlbnQuZGF0YTtcclxuICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcclxuICAgICAgICBpZiAoIShoYW5kbGVycyA9PT0gbnVsbCB8fCBoYW5kbGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaGFuZGxlcnMuc2l6ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlRXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiYWNrXCIgLyogQUNLICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oaGFuZGxlcnMpLm1hcChhc3luYyAoaGFuZGxlcikgPT4gaGFuZGxlcihtZXNzYWdlRXZlbnQub3JpZ2luLCBkYXRhKSk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfYWxsU2V0dGxlZChwcm9taXNlcyk7XHJcbiAgICAgICAgbWVzc2FnZUV2ZW50LnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcImRvbmVcIiAvKiBET05FICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBhbiBldmVudCBoYW5kbGVyIGZvciBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIFRoZSBldmVudCBoYW5kbGVyIHdoaWNoIHNob3VsZCByZWNlaXZlIHRoZSBldmVudHMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBfc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdID0gbmV3IFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uYWRkKGV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZnJvbSBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gdW5zdWJzY3JpYmUgZnJvbS5cclxuICAgICAqIEBwYXJhbSBldmVudEhhbmRsZXIgLSBPcHRpbm9hbCBldmVudCBoYW5kbGVyLCBpZiBub25lIHByb3ZpZGVkLCB1bnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgb24gdGhpcyBldmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF91bnN1YnNjcmliZShldmVudFR5cGUsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gJiYgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5kZWxldGUoZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFldmVudEhhbmRsZXIgfHwgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuUmVjZWl2ZXIucmVjZWl2ZXJzID0gW107XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZUV2ZW50SWQocHJlZml4ID0gJycsIGRpZ2l0cyA9IDEwKSB7XHJcbiAgICBsZXQgcmFuZG9tID0gJyc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZ2l0czsgaSsrKSB7XHJcbiAgICAgICAgcmFuZG9tICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVmaXggKyByYW5kb207XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3Igc2VuZGluZyBtZXNzYWdlcyBhbmQgd2FpdGluZyBmb3IgYSBjb21wbGV0aW9uIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgU2VuZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBuZXcgU2V0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIHRoZSBoYW5kbGVyIGFuZCByZW1vdmUgaXQgZnJvbSBvdXIgdHJhY2tpbmcgU2V0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gdW5zdWJzY3JpYmUuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZU1lc3NhZ2VIYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoaGFuZGxlci5tZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICBoYW5kbGVyLm1lc3NhZ2VDaGFubmVsLnBvcnQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5kZWxldGUoaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWNlaXZlciBsb2NhdGVkIGF0IHtAbGluayB0YXJnZXR9LlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBXZSdsbCBmaXJzdCB3YWl0IGEgYml0IGZvciBhbiBBQ0sgLCBpZiB3ZSBnZXQgb25lIHdlIHdpbGwgd2FpdCBzaWduaWZpY2FudGx5IGxvbmdlciB1bnRpbCB0aGVcclxuICAgICAqIHJlY2VpdmVyIGhhcyBoYWQgYSBjaGFuY2UgdG8gZnVsbHkgcHJvY2VzcyB0aGUgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIFR5cGUgb2YgZXZlbnQgdG8gc2VuZC5cclxuICAgICAqIEBwYXJhbSBkYXRhIC0gVGhlIHBheWxvYWQgb2YgdGhlIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIHRpbWVvdXQgLSBUaW1lb3V0IGZvciB3YWl0aW5nIG9uIGFuIEFDSyBmcm9tIHRoZSByZWNlaXZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzZXR0bGVkIHByb21pc2VzIGZyb20gYWxsIHRoZSBoYW5kbGVycyB0aGF0IHdlcmUgbGlzdGVuaW5nIG9uIHRoZSByZWNlaXZlci5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgX3NlbmQoZXZlbnRUeXBlLCBkYXRhLCB0aW1lb3V0ID0gNTAgLyogQUNLICovKSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUNoYW5uZWwgPSB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnID8gbmV3IE1lc3NhZ2VDaGFubmVsKCkgOiBudWxsO1xyXG4gICAgICAgIGlmICghbWVzc2FnZUNoYW5uZWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY29ubmVjdGlvbl91bmF2YWlsYWJsZVwiIC8qIENPTk5FQ1RJT05fVU5BVkFJTEFCTEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBsZXQgY29tcGxldGlvblRpbWVyO1xyXG4gICAgICAgIGxldCBoYW5kbGVyO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKCcnLCAyMCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFja1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidW5zdXBwb3J0ZWRfZXZlbnRcIiAvKiBVTlNVUFBPUlRFRF9FVkVOVCAqLykpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgaGFuZGxlciA9IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLFxyXG4gICAgICAgICAgICAgICAgb25NZXNzYWdlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VFdmVudC5kYXRhLmV2ZW50SWQgIT09IGV2ZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2VFdmVudC5kYXRhLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWNrXCIgLyogQUNLICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlY2VpdmVyIHNob3VsZCBBQ0sgZmlyc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvblRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcInRpbWVvdXRcIiAvKiBUSU1FT1VUICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwIC8qIENPTVBMRVRJT04gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkb25lXCIgLyogRE9ORSAqLzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uY2UgdGhlIHJlY2VpdmVyJ3MgaGFuZGxlcnMgYXJlIGZpbmlzaGVkIHdlIHdpbGwgZ2V0IHRoZSByZXN1bHRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2VFdmVudC5kYXRhLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFja1RpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb21wbGV0aW9uVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImludmFsaWRfcmVzcG9uc2VcIiAvKiBJTlZBTElEX1JFU1BPTlNFICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYWRkKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlci5vbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICAgICAgZGF0YVxyXG4gICAgICAgICAgICB9LCBbbWVzc2FnZUNoYW5uZWwucG9ydDJdKTtcclxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTGF6eSBhY2Nlc3NvciBmb3Igd2luZG93LCBzaW5jZSB0aGUgY29tcGF0IGxheWVyIHdvbid0IHRyZWUgc2hha2UgdGhpcyBvdXQsXHJcbiAqIHdlIG5lZWQgdG8gbWFrZSBzdXJlIG5vdCB0byBtZXNzIHdpdGggd2luZG93IHVubGVzcyB3ZSBoYXZlIHRvXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxyXG5mdW5jdGlvbiBfc2V0V2luZG93TG9jYXRpb24odXJsKSB7XHJcbiAgICBfd2luZG93KCkubG9jYXRpb24uaHJlZiA9IHVybDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzV29ya2VyKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgX3dpbmRvdygpWydXb3JrZXJHbG9iYWxTY29wZSddICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBfd2luZG93KClbJ2ltcG9ydFNjcmlwdHMnXSA9PT0gJ2Z1bmN0aW9uJyk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKSB7XHJcbiAgICBpZiAoIShuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHk7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5hY3RpdmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfZ2V0U2VydmljZVdvcmtlckNvbnRyb2xsZXIoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKChfYSA9IG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udHJvbGxlcikgfHwgbnVsbDtcclxufVxyXG5mdW5jdGlvbiBfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSB7XHJcbiAgICByZXR1cm4gX2lzV29ya2VyKCkgPyBzZWxmIDogbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlRGInO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgREJfT0JKRUNUU1RPUkVfTkFNRSA9ICdmaXJlYmFzZUxvY2FsU3RvcmFnZSc7XHJcbmNvbnN0IERCX0RBVEFfS0VZUEFUSCA9ICdmYmFzZV9rZXknO1xyXG4vKipcclxuICogUHJvbWlzZSB3cmFwcGVyIGZvciBJREJSZXF1ZXN0XHJcbiAqXHJcbiAqIFVuZm9ydHVuYXRlbHkgd2UgY2FuJ3QgY2xlYW5seSBleHRlbmQgUHJvbWlzZTxUPiBzaW5jZSBwcm9taXNlcyBhcmUgbm90IGNhbGxhYmxlIGluIEVTNlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgREJQcm9taXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3QpIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgfVxyXG4gICAgdG9Qcm9taXNlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLnJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRPYmplY3RTdG9yZShkYiwgaXNSZWFkV3JpdGUpIHtcclxuICAgIHJldHVybiBkYlxyXG4gICAgICAgIC50cmFuc2FjdGlvbihbREJfT0JKRUNUU1RPUkVfTkFNRV0sIGlzUmVhZFdyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKVxyXG4gICAgICAgIC5vYmplY3RTdG9yZShEQl9PQkpFQ1RTVE9SRV9OQU1FKTtcclxufVxyXG5mdW5jdGlvbiBfZGVsZXRlRGF0YWJhc2UoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX05BTUUpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuZnVuY3Rpb24gX29wZW5EYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihEQl9OQU1FLCBEQl9WRVJTSU9OKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUsIHsga2V5UGF0aDogREJfREFUQV9LRVlQQVRIIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vIFN0cmFuZ2UgYnVnIHRoYXQgb2NjdXJzIGluIEZpcmVmb3ggd2hlbiBtdWx0aXBsZSB0YWJzIGFyZSBvcGVuZWQgYXQgdGhlXHJcbiAgICAgICAgICAgIC8vIHNhbWUgdGltZS4gVGhlIG9ubHkgd2F5IHRvIHJlY292ZXIgc2VlbXMgdG8gYmUgZGVsZXRpbmcgdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgICAgIC8vIGFuZCByZS1pbml0aWFsaXppbmcgaXQuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzYzNFxyXG4gICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoREJfT0JKRUNUU1RPUkVfTkFNRSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gY2xvc2UgdGhlIGRhdGFiYXNlIG9yIGVsc2UgeW91IGdldCBhIGBibG9ja2VkYCBldmVudFxyXG4gICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IF9kZWxldGVEYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhd2FpdCBfb3BlbkRhdGFiYXNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wdXRPYmplY3QoZGIsIGtleSwgdmFsdWUpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgdHJ1ZSkucHV0KHtcclxuICAgICAgICBbREJfREFUQV9LRVlQQVRIXToga2V5LFxyXG4gICAgICAgIHZhbHVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldE9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIGZhbHNlKS5nZXQoa2V5KTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgcmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBkYXRhLnZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVPYmplY3QoZGIsIGtleSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5kZWxldGUoa2V5KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TID0gODAwO1xyXG5jb25zdCBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQgPSAzO1xyXG5jbGFzcyBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFwiTE9DQUxcIiAvKiBMT0NBTCAqLztcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZW5kZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gbnVsbDtcclxuICAgICAgICAvLyBGaXJlICYgZm9yZ2V0IHRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gYXMgaXQgbWF5IG5ldmVyIHJlc29sdmVcclxuICAgICAgICB0aGlzLl93b3JrZXJJbml0aWFsaXphdGlvblByb21pc2UgPVxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nKCkudGhlbigoKSA9PiB7IH0sICgpID0+IHsgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlbkRiKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3dpdGhSZXRyaWVzKG9wKSB7XHJcbiAgICAgICAgbGV0IG51bUF0dGVtcHRzID0gMDtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLl9vcGVuRGIoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBvcChkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudW1BdHRlbXB0cysrID4gX1RSQU5TQUNUSU9OX1JFVFJZX0NPVU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjb25zaWRlciBhZGRpbmcgZXhwb25lbnRpYWwgYmFja29mZlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRleGVkREIgZXZlbnRzIGRvIG5vdCBwcm9wYWdhdGUgZnJvbSB0aGUgbWFpbiB3aW5kb3cgdG8gdGhlIHdvcmtlciBjb250ZXh0LiAgV2UgcmVseSBvbiBhXHJcbiAgICAgKiBwb3N0TWVzc2FnZSBpbnRlcmZhY2UgdG8gc2VuZCB0aGVzZSBldmVudHMgdG8gdGhlIHdvcmtlciBvdXJzZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBfaXNXb3JrZXIoKSA/IHRoaXMuaW5pdGlhbGl6ZVJlY2VpdmVyKCkgOiB0aGlzLmluaXRpYWxpemVTZW5kZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIHdvcmtlciB3ZSBzaG91bGQgbGlzdGVuIHRvIGV2ZW50cyBmcm9tIHRoZSBtYWluIHdpbmRvdy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVJlY2VpdmVyKCkge1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBSZWNlaXZlci5fZ2V0SW5zdGFuY2UoX2dldFdvcmtlckdsb2JhbFNjb3BlKCkpO1xyXG4gICAgICAgIC8vIFJlZnJlc2ggZnJvbSBwZXJzaXN0ZW5jZSBpZiB3ZSByZWNlaXZlIGEgS2V5Q2hhbmdlZCBtZXNzYWdlLlxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuX3N1YnNjcmliZShcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLywgYXN5bmMgKF9vcmlnaW4sIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5cyA9IGF3YWl0IHRoaXMuX3BvbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGtleVByb2Nlc3NlZDoga2V5cy5pbmNsdWRlcyhkYXRhLmtleSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMZXQgdGhlIHNlbmRlciBrbm93IHRoYXQgd2UgYXJlIGxpc3RlbmluZyBzbyB0aGV5IGdpdmUgdXMgbW9yZSB0aW1lb3V0LlxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuX3N1YnNjcmliZShcInBpbmdcIiAvKiBQSU5HICovLCBhc3luYyAoX29yaWdpbiwgX2RhdGEpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFtcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqL107XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFzIHRoZSBtYWluIHdpbmRvdywgd2Ugc2hvdWxkIGxldCB0aGUgd29ya2VyIGtub3cgd2hlbiBrZXlzIGNoYW5nZSAoc2V0IGFuZCByZW1vdmUpLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZpY2VXb3JrZXJDb250YWluZXIvcmVhZHkgfCBTZXJ2aWNlV29ya2VyQ29udGFpbmVyLnJlYWR5fVxyXG4gICAgICogbWF5IG5vdCByZXNvbHZlLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplU2VuZGVyKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZXJlJ3MgYW4gYWN0aXZlIHNlcnZpY2Ugd29ya2VyLlxyXG4gICAgICAgIHRoaXMuYWN0aXZlU2VydmljZVdvcmtlciA9IGF3YWl0IF9nZXRBY3RpdmVTZXJ2aWNlV29ya2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbmRlciA9IG5ldyBTZW5kZXIodGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyKTtcclxuICAgICAgICAvLyBQaW5nIHRoZSBzZXJ2aWNlIHdvcmtlciB0byBjaGVjayB3aGF0IGV2ZW50cyB0aGV5IGNhbiBoYW5kbGUuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwicGluZ1wiIC8qIFBJTkcgKi8sIHt9LCA4MDAgLyogTE9OR19BQ0sgKi8pO1xyXG4gICAgICAgIGlmICghcmVzdWx0cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZ1bGZpbGxlZCkgJiZcclxuICAgICAgICAgICAgKChfYiA9IHJlc3VsdHNbMF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi52YWx1ZS5pbmNsdWRlcyhcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLykpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIExldCB0aGUgd29ya2VyIGtub3cgYWJvdXQgYSBjaGFuZ2VkIGtleSwgdGhlIGV4YWN0IGtleSBkb2Vzbid0IHRlY2huaWNhbGx5IG1hdHRlciBzaW5jZSB0aGVcclxuICAgICAqIHdvcmtlciB3aWxsIGp1c3QgdHJpZ2dlciBhIGZ1bGwgc3luYyBhbnl3YXkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBub3csIHdlIG9ubHkgc3VwcG9ydCBvbmUgc2VydmljZSB3b3JrZXIgcGVyIHBhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGtleSAtIFN0b3JhZ2Uga2V5IHdoaWNoIGNoYW5nZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIG5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbmRlciB8fFxyXG4gICAgICAgICAgICAhdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyIHx8XHJcbiAgICAgICAgICAgIF9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlcigpICE9PSB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRlci5fc2VuZChcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLywgeyBrZXkgfSwgXHJcbiAgICAgICAgICAgIC8vIFVzZSBsb25nIHRpbWVvdXQgaWYgcmVjZWl2ZXIgaGFzIHByZXZpb3VzbHkgcmVzcG9uZGVkIHRvIGEgcGluZyBmcm9tIHVzLlxyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgPyA4MDAgLyogTE9OR19BQ0sgKi9cclxuICAgICAgICAgICAgICAgIDogNTAgLyogQUNLICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBiZXN0IGVmZm9ydCBhcHByb2FjaC4gSWdub3JlIGVycm9ycy5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaXNBdmFpbGFibGUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCFpbmRleGVkREIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IF9vcGVuRGF0YWJhc2UoKTtcclxuICAgICAgICAgICAgYXdhaXQgX3B1dE9iamVjdChkYiwgU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICBhd2FpdCBfZGVsZXRlT2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFBlbmRpbmdXcml0ZSh3cml0ZSkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcysrO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXMtLTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fd2l0aFBlbmRpbmdXcml0ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gX3B1dE9iamVjdChkYiwga2V5LCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnlTZXJ2aWNlV29ya2VyKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IChhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IGdldE9iamVjdChkYiwga2V5KSkpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gb2JqO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfZGVsZXRlT2JqZWN0KGRiLCBrZXkpKTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnlTZXJ2aWNlV29ya2VyKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcG9sbCgpIHtcclxuICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiB3ZSBuZWVkIHRvIGZhbGxiYWNrIGlmIGdldEFsbCBpcyBub3Qgc3VwcG9ydGVkXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdldEFsbFJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgZmFsc2UpLmdldEFsbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERCUHJvbWlzZShnZXRBbGxSZXF1ZXN0KS50b1Byb21pc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgcGVuZGluZyB3cml0ZXMgaW4gcHJvZ3Jlc3MgYWJvcnQsIHdlJ2xsIGdldCBwaWNrZWQgdXAgb24gdGhlIG5leHQgcG9sbFxyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdXcml0ZXMgIT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXlzID0gW107XHJcbiAgICAgICAgY29uc3Qga2V5c0luUmVzdWx0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgeyBmYmFzZV9rZXk6IGtleSwgdmFsdWUgfSBvZiByZXN1bHQpIHtcclxuICAgICAgICAgICAga2V5c0luUmVzdWx0LmFkZChrZXkpO1xyXG4gICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5sb2NhbENhY2hlW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBsb2NhbEtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxvY2FsQ2FjaGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsQ2FjaGVbbG9jYWxLZXldICYmICFrZXlzSW5SZXN1bHQuaGFzKGxvY2FsS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMobG9jYWxLZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGxvY2FsS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBuZXdWYWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0UG9sbGluZygpIHtcclxuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB0aGlzLl9wb2xsKCksIF9QT0xMSU5HX0lOVEVSVkFMX01TKTtcclxuICAgIH1cclxuICAgIHN0b3BQb2xsaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvbGxUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucG9sbFRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9nZXQoa2V5KTsgLy8gVGhpcyBjYW4gaGFwcGVuIGluIHRoZSBiYWNrZ3JvdW5kIGFzeW5jIGFuZCB3ZSBjYW4gcmV0dXJuIGltbWVkaWF0ZWx5LlxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5JbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLnR5cGUgPSAnTE9DQUwnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlIGBMT0NBTGAgdXNpbmcgYGluZGV4ZWREQmBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgPSBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOnN0YXJ0XCIgLyogU1RBUlRfUEhPTkVfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVTaWduSW5QaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYVNpZ25JbjpmaW5hbGl6ZVwiIC8qIEZJTkFMSVpFX1BIT05FX01GQV9TSUdOX0lOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFJlY2FwdGNoYVBhcmFtcyhhdXRoKSB7XHJcbiAgICByZXR1cm4gKChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBHRVQgKi8sIFwiL3YxL3JlY2FwdGNoYVBhcmFtc1wiIC8qIEdFVF9SRUNBUFRDSEFfUEFSQU0gKi8pKS5yZWNhcHRjaGFTaXRlS2V5IHx8ICcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIHJldHVybiAoX2IgPSAoX2EgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRvY3VtZW50O1xyXG59XHJcbmZ1bmN0aW9uIF9sb2FkSlModXJsKSB7XHJcbiAgICAvLyBUT0RPOiBjb25zaWRlciBhZGRpbmcgdGltZW91dCBzdXBwb3J0ICYgY2FuY2VsbGF0aW9uXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgIGVsLm9ubG9hZCA9IHJlc29sdmU7XHJcbiAgICAgICAgZWwub25lcnJvciA9IGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IF9jcmVhdGVFcnJvcihcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICBlcnJvci5jdXN0b21EYXRhID0gZTtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVsLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgICBlbC5jaGFyc2V0ID0gJ1VURi04JztcclxuICAgICAgICBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKHByZWZpeCkge1xyXG4gICAgcmV0dXJuIGBfXyR7cHJlZml4fSR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCl9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfU09MVkVfVElNRV9NUyA9IDUwMDtcclxuY29uc3QgX0VYUElSQVRJT05fVElNRV9NUyA9IDYwMDAwO1xyXG5jb25zdCBfV0lER0VUX0lEX1NUQVJUID0gMTAwMDAwMDAwMDAwMDtcclxuY2xhc3MgTW9ja1JlQ2FwdGNoYSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoY29udGFpbmVyLCBwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNvdW50ZXI7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5zZXQoaWQsIG5ldyBNb2NrV2lkZ2V0KGNvbnRhaW5lciwgdGhpcy5hdXRoLm5hbWUsIHBhcmFtZXRlcnMgfHwge30pKTtcclxuICAgICAgICB0aGlzLmNvdW50ZXIrKztcclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9XHJcbiAgICByZXNldChvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVsZXRlKCkpO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMuZGVsZXRlKGlkKTtcclxuICAgIH1cclxuICAgIGdldFJlc3BvbnNlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuX3dpZGdldHMuZ2V0KGlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJlc3BvbnNlKCkpIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZShvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXhlY3V0ZSgpKTtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgTW9ja1dpZGdldCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJPcklkLCBhcHBOYW1lLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIHsgYXBwTmFtZSB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRoaXMucGFyYW1zLnNpemUgIT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFJlc3BvbnNlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZVRva2VuO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICB0aGlzLmRlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZWxldGVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcoNTApO1xyXG4gICAgICAgICAgICBjb25zdCB7IGNhbGxiYWNrLCAnZXhwaXJlZC1jYWxsYmFjayc6IGV4cGlyZWRDYWxsYmFjayB9ID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLnJlc3BvbnNlVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGlyZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZWRDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgX0VYUElSQVRJT05fVElNRV9NUyk7XHJcbiAgICAgICAgfSwgX1NPTFZFX1RJTUVfTVMpO1xyXG4gICAgfVxyXG4gICAgY2hlY2tJZkRlbGV0ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlQ0FQVENIQSBtb2NrIHdhcyBhbHJlYWR5IGRlbGV0ZWQhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tQWxwaGFOdW1lcmljU3RyaW5nKGxlbikge1xyXG4gICAgY29uc3QgY2hhcnMgPSBbXTtcclxuICAgIGNvbnN0IGFsbG93ZWRDaGFycyA9ICcxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgY2hhcnMucHVzaChhbGxvd2VkQ2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbG93ZWRDaGFycy5sZW5ndGgpKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gUmVDYXB0Y2hhIHdpbGwgbG9hZCB1c2luZyB0aGUgc2FtZSBjYWxsYmFjaywgc28gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIG5lZWRzXHJcbi8vIHRvIGJlIGtlcHQgYXJvdW5kXHJcbmNvbnN0IF9KU0xPQURfQ0FMTEJBQ0sgPSBfZ2VuZXJhdGVDYWxsYmFja05hbWUoJ3JjYicpO1xyXG5jb25zdCBORVRXT1JLX1RJTUVPVVRfREVMQVkgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuY29uc3QgUkVDQVBUQ0hBX0JBU0UgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLmpzPyc7XHJcbi8qKlxyXG4gKiBMb2FkZXIgZm9yIHRoZSBHUmVDYXB0Y2hhIGxpYnJhcnkuIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIG9mIHRoaXMuXHJcbiAqL1xyXG5jbGFzcyBSZUNhcHRjaGFMb2FkZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gJyc7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcclxuICAgICAgICB0aGlzLmxpYnJhcnlTZXBhcmF0ZWx5TG9hZGVkID0gISFfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgIH1cclxuICAgIGxvYWQoYXV0aCwgaGwgPSAnJykge1xyXG4gICAgICAgIF9hc3NlcnQoaXNIb3N0TGFuZ3VhZ2VWYWxpZChobCksIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5KGhsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKF93aW5kb3coKS5ncmVjYXB0Y2hhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgfSwgTkVUV09SS19USU1FT1VUX0RFTEFZLmdldCgpKTtcclxuICAgICAgICAgICAgX3dpbmRvdygpW19KU0xPQURfQ0FMTEJBQ0tdID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX3dpbmRvdygpW19KU0xPQURfQ0FMTEJBQ0tdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjYXB0Y2hhID0gX3dpbmRvdygpLmdyZWNhcHRjaGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlY2FwdGNoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gV3JhcCB0aGUgZ3JlcHRjaGEgcmVuZGVyIGZ1bmN0aW9uIHNvIHRoYXQgd2Uga25vdyBpZiB0aGUgZGV2ZWxvcGVyIGhhc1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVkIGl0IHNlcGFyYXRlbHlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlciA9IHJlY2FwdGNoYS5yZW5kZXI7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEucmVuZGVyID0gKGNvbnRhaW5lciwgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0SWQgPSByZW5kZXIoY29udGFpbmVyLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aWRnZXRJZDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvc3RMYW5ndWFnZSA9IGhsO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZWNhcHRjaGEpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHtSRUNBUFRDSEFfQkFTRX0/JHtxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICAgICBvbmxvYWQ6IF9KU0xPQURfQ0FMTEJBQ0ssXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6ICdleHBsaWNpdCcsXHJcbiAgICAgICAgICAgICAgICBobFxyXG4gICAgICAgICAgICB9KX1gO1xyXG4gICAgICAgICAgICBfbG9hZEpTKHVybCkuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkge1xyXG4gICAgICAgIHRoaXMuY291bnRlci0tO1xyXG4gICAgfVxyXG4gICAgc2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5KGhsKSB7XHJcbiAgICAgICAgLy8gV2UgY2FuIHJlc29sdmUgaW1tZWRpYXRlbHkgaWY6XHJcbiAgICAgICAgLy8gICDigKIgZ3JlY2FwdGNoYSBpcyBhbHJlYWR5IGRlZmluZWQgQU5EIChcclxuICAgICAgICAvLyAgICAgMS4gdGhlIHJlcXVlc3RlZCBsYW5ndWFnZSBjb2RlcyBhcmUgdGhlIHNhbWUgT1JcclxuICAgICAgICAvLyAgICAgMi4gdGhlcmUgZXhpc3RzIGFscmVhZHkgYSBSZUNhcHRjaGEgb24gdGhlIHBhZ2VcclxuICAgICAgICAvLyAgICAgMy4gdGhlIGxpYnJhcnkgd2FzIGFscmVhZHkgbG9hZGVkIGJ5IHRoZSBhcHBcclxuICAgICAgICAvLyBJbiBjYXNlcyAoMikgYW5kICgzKSwgd2UgX2Nhbid0XyByZWxvYWQgYXMgaXQgd291bGQgYnJlYWsgdGhlIHJlY2FwdGNoYXNcclxuICAgICAgICAvLyB0aGF0IGFyZSBhbHJlYWR5IGluIHRoZSBwYWdlXHJcbiAgICAgICAgcmV0dXJuICghIV93aW5kb3coKS5ncmVjYXB0Y2hhICYmXHJcbiAgICAgICAgICAgIChobCA9PT0gdGhpcy5ob3N0TGFuZ3VhZ2UgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnRlciA+IDAgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0hvc3RMYW5ndWFnZVZhbGlkKGhsKSB7XHJcbiAgICByZXR1cm4gaGwubGVuZ3RoIDw9IDYgJiYgL15cXHMqW2EtekEtWjAtOVxcLV0qXFxzKiQvLnRlc3QoaGwpO1xyXG59XHJcbmNsYXNzIE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsIHtcclxuICAgIGFzeW5jIGxvYWQoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTW9ja1JlQ2FwdGNoYShhdXRoKTtcclxuICAgIH1cclxuICAgIGNsZWFyZWRPbmVJbnN0YW5jZSgpIHsgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFID0gJ3JlY2FwdGNoYSc7XHJcbmNvbnN0IERFRkFVTFRfUEFSQU1TID0ge1xyXG4gICAgdGhlbWU6ICdsaWdodCcsXHJcbiAgICB0eXBlOiAnaW1hZ2UnXHJcbn07XHJcbi8qKlxyXG4gKiBBbiB7QGxpbmsgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvIHwgcmVDQVBUQ0hBfS1iYXNlZCBhcHBsaWNhdGlvbiB2ZXJpZmllci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUmVjYXB0Y2hhVmVyaWZpZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lck9ySWQgLSBUaGUgcmVDQVBUQ0hBIGNvbnRhaW5lciBwYXJhbWV0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFRoaXMgaGFzIGRpZmZlcmVudCBtZWFuaW5nIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSByZUNBUFRDSEEgaXMgaGlkZGVuIG9yIHZpc2libGUuIEZvciBhXHJcbiAgICAgKiB2aXNpYmxlIHJlQ0FQVENIQSB0aGUgY29udGFpbmVyIG11c3QgYmUgZW1wdHkuIElmIGEgc3RyaW5nIGlzIHVzZWQsIGl0IGhhcyB0byBjb3JyZXNwb25kIHRvXHJcbiAgICAgKiBhbiBlbGVtZW50IElELiBUaGUgY29ycmVzcG9uZGluZyBlbGVtZW50IG11c3QgYWxzbyBtdXN0IGJlIGluIHRoZSBET00gYXQgdGhlIHRpbWUgb2ZcclxuICAgICAqIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbWV0ZXJzIC0gVGhlIG9wdGlvbmFsIHJlQ0FQVENIQSBwYXJhbWV0ZXJzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBDaGVjayB0aGUgcmVDQVBUQ0hBIGRvY3MgZm9yIGEgY29tcHJlaGVuc2l2ZSBsaXN0LiBBbGwgcGFyYW1ldGVycyBhcmUgYWNjZXB0ZWQgZXhjZXB0IGZvclxyXG4gICAgICogdGhlIHNpdGVrZXkuIEZpcmViYXNlIEF1dGggYmFja2VuZCBwcm92aXNpb25zIGEgcmVDQVBUQ0hBIGZvciBlYWNoIHByb2plY3QgYW5kIHdpbGxcclxuICAgICAqIGNvbmZpZ3VyZSB0aGlzIHVwb24gcmVuZGVyaW5nLiBGb3IgYW4gaW52aXNpYmxlIHJlQ0FQVENIQSwgYSBzaXplIGtleSBtdXN0IGhhdmUgdGhlIHZhbHVlXHJcbiAgICAgKiAnaW52aXNpYmxlJy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXV0aEV4dGVybiAtIFRoZSBjb3JyZXNwb25kaW5nIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogSWYgbm9uZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGlzIHVzZWQuIEEgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlXHJcbiAgICAgKiBtdXN0IGJlIGluaXRpYWxpemVkIHdpdGggYW4gQVBJIGtleSwgb3RoZXJ3aXNlIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJPcklkLCBwYXJhbWV0ZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9QQVJBTVMpLCBhdXRoRXh0ZXJuKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYXBwbGljYXRpb24gdmVyaWZpZXIgdHlwZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZW1hcmtzXHJcbiAgICAgICAgICogRm9yIGEgcmVDQVBUQ0hBIHZlcmlmaWVyLCB0aGlzIGlzICdyZWNhcHRjaGEnLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy53aWRnZXRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhID0gbnVsbDtcclxuICAgICAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aEV4dGVybik7XHJcbiAgICAgICAgdGhpcy5pc0ludmlzaWJsZSA9IHRoaXMucGFyYW1ldGVycy5zaXplID09PSAnaW52aXNpYmxlJztcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcsIHRoaXMuYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHR5cGVvZiBjb250YWluZXJPcklkID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lck9ySWQpXHJcbiAgICAgICAgICAgIDogY29udGFpbmVyT3JJZDtcclxuICAgICAgICBfYXNzZXJ0KGNvbnRhaW5lciwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5jYWxsYmFjayA9IHRoaXMubWFrZVRva2VuQ2FsbGJhY2sodGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIgPSB0aGlzLmF1dGguc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nXHJcbiAgICAgICAgICAgID8gbmV3IE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsKClcclxuICAgICAgICAgICAgOiBuZXcgUmVDYXB0Y2hhTG9hZGVySW1wbCgpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVTdGFydGluZ1N0YXRlKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRmlndXJlIG91dCBpZiBzZGsgdmVyc2lvbiBpcyBuZWVkZWRcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogV2FpdHMgZm9yIHRoZSB1c2VyIHRvIHNvbHZlIHRoZSByZUNBUFRDSEEgYW5kIHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSByZUNBUFRDSEEgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHZlcmlmeSgpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICBjb25zdCByZWNhcHRjaGEgPSB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZWNhcHRjaGEuZ2V0UmVzcG9uc2UoaWQpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW5DaGFuZ2UgPSAodG9rZW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIElnbm9yZSB0b2tlbiBleHBpcmF0aW9ucy5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZGVsZXRlKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmFkZCh0b2tlbkNoYW5nZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEuZXhlY3V0ZShpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgcmVDQVBUQ0hBIHdpZGdldCBvbiB0aGUgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZUNBUFRDSEEgd2lkZ2V0IElELlxyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UuIFNpbmNlIGl0J3Mgbm90IGFzeW5jICh3ZSB3YW50IHRvIHJldHVybiB0aGVcclxuICAgICAgICAgICAgLy8gX3NhbWVfIHByb21pc2UgaWYgcmVuZGVyaW5nIGlzIHN0aWxsIG9jY3VycmluZyksIHRoZSBBUEkgc3VyZmFjZSBzaG91bGRcclxuICAgICAgICAgICAgLy8gcmVqZWN0IHdpdGggdGhlIGVycm9yIHJhdGhlciB0aGFuIGp1c3QgdGhyb3dcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IHRoaXMubWFrZVJlbmRlclByb21pc2UoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3Jlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud2lkZ2V0SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlc2V0KHRoaXMud2lkZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IGZyb20gdGhlIHBhZ2UgYW5kIGRlc3Ryb3lzIHRoZSBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmNsZWFyZWRPbmVJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVTdGFydGluZ1N0YXRlKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMucGFyYW1ldGVycy5zaXRla2V5LCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLmlzSW52aXNpYmxlIHx8ICF0aGlzLmNvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCksIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcsIHRoaXMuYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgbWFrZVRva2VuQ2FsbGJhY2soZXhpc3RpbmcpIHtcclxuICAgICAgICByZXR1cm4gdG9rZW4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIodG9rZW4pKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmcodG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZ1bmMgPSBfd2luZG93KClbZXhpc3RpbmddO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxGdW5jID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRnVuYyh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0Tm90RGVzdHJveWVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMuZGVzdHJveWVkLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBtYWtlUmVuZGVyUHJvbWlzZSgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXQoKTtcclxuICAgICAgICBpZiAoIXRoaXMud2lkZ2V0SWQpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJhbnRlZWRFbXB0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGd1YXJhbnRlZWRFbXB0eSk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBndWFyYW50ZWVkRW1wdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy53aWRnZXRJZCA9IHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKS5yZW5kZXIoY29udGFpbmVyLCB0aGlzLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXRJZDtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXQoKSB7XHJcbiAgICAgICAgX2Fzc2VydChfaXNIdHRwT3JIdHRwcygpICYmICFfaXNXb3JrZXIoKSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGF3YWl0IGRvbVJlYWR5KCk7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBhd2FpdCB0aGlzLl9yZWNhcHRjaGFMb2FkZXIubG9hZCh0aGlzLmF1dGgsIHRoaXMuYXV0aC5sYW5ndWFnZUNvZGUgfHwgdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBzaXRlS2V5ID0gYXdhaXQgZ2V0UmVjYXB0Y2hhUGFyYW1zKHRoaXMuYXV0aCk7XHJcbiAgICAgICAgX2Fzc2VydChzaXRlS2V5LCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXkgPSBzaXRlS2V5O1xyXG4gICAgfVxyXG4gICAgZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnJlY2FwdGNoYSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlY2FwdGNoYTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBkb21SZWFkeSgpIHtcclxuICAgIGxldCByZXNvbHZlciA9IG51bGw7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvY3VtZW50IG5vdCByZWFkeSwgd2FpdCBmb3IgbG9hZCBiZWZvcmUgcmVzb2x2aW5nLlxyXG4gICAgICAgIC8vIFNhdmUgcmVzb2x2ZXIsIHNvIHdlIGNhbiByZW1vdmUgbGlzdGVuZXIgaW4gY2FzZSBpdCB3YXMgZXh0ZXJuYWxseVxyXG4gICAgICAgIC8vIGNhbmNlbGxlZC5cclxuICAgICAgICByZXNvbHZlciA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmVyKTtcclxuICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgIGlmIChyZXNvbHZlcikge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIENvbmZpcm1hdGlvblJlc3VsdEltcGwge1xyXG4gICAgY29uc3RydWN0b3IodmVyaWZpY2F0aW9uSWQsIG9uQ29uZmlybWF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZmljYXRpb25JZCA9IHZlcmlmaWNhdGlvbklkO1xyXG4gICAgICAgIHRoaXMub25Db25maXJtYXRpb24gPSBvbkNvbmZpcm1hdGlvbjtcclxuICAgIH1cclxuICAgIGNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih0aGlzLnZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vbkNvbmZpcm1hdGlvbihhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG1ldGhvZCBzZW5kcyBhIGNvZGUgdmlhIFNNUyB0byB0aGUgZ2l2ZW5cclxuICogcGhvbmUgbnVtYmVyLCBhbmQgcmV0dXJucyBhIHtAbGluayBDb25maXJtYXRpb25SZXN1bHR9LiBBZnRlciB0aGUgdXNlclxyXG4gKiBwcm92aWRlcyB0aGUgY29kZSBzZW50IHRvIHRoZWlyIHBob25lLCBjYWxsIHtAbGluayBDb25maXJtYXRpb25SZXN1bHQuY29uZmlybX1cclxuICogd2l0aCB0aGUgY29kZSB0byBzaWduIHRoZSB1c2VyIGluLlxyXG4gKlxyXG4gKiBGb3IgYWJ1c2UgcHJldmVudGlvbiwgdGhpcyBtZXRob2QgYWxzbyByZXF1aXJlcyBhIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICogVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0uXHJcbiAqIFRoaXMgZnVuY3Rpb24gY2FuIHdvcmsgb24gb3RoZXIgcGxhdGZvcm1zIHRoYXQgZG8gbm90IHN1cHBvcnQgdGhlXHJcbiAqIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0gKGxpa2UgUmVhY3QgTmF0aXZlKSwgYnV0IHlvdSBuZWVkIHRvIHVzZSBhXHJcbiAqIHRoaXJkLXBhcnR5IHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfSBpbXBsZW1lbnRhdGlvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBmaXJlYmFzZS5hdXRoLlJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7XHJcbiAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiBhIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aEludGVybmFsLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aEludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB1c2VyIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKHVzZXJJbnRlcm5hbC5hdXRoLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gbGlua1dpdGhDcmVkZW50aWFsKHVzZXJJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZS1hdXRoZW50aWNhdGVzIGEgdXNlciB1c2luZyBhIGZyZXNoIHBob25lIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzIFVzZSBiZWZvcmUgb3BlcmF0aW9ucyBzdWNoIGFzIHtAbGluayB1cGRhdGVQYXNzd29yZH0gdGhhdCByZXF1aXJlIHRva2VucyBmcm9tIHJlY2VudCBzaWduLWluIGF0dGVtcHRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIodXNlciwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2ZXJpZmljYXRpb24gSUQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBTTVMgY29kZSB0aGF0IGlzIHNlbnQuXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aCwgb3B0aW9ucywgdmVyaWZpZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHJlY2FwdGNoYVRva2VuID0gYXdhaXQgdmVyaWZpZXIudmVyaWZ5KCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlY2FwdGNoYVRva2VuID09PSAnc3RyaW5nJywgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHZlcmlmaWVyLnR5cGUgPT09IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIGxldCBwaG9uZUluZm9PcHRpb25zO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBvcHRpb25zXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCdzZXNzaW9uJyBpbiBwaG9uZUluZm9PcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBwaG9uZUluZm9PcHRpb25zLnNlc3Npb247XHJcbiAgICAgICAgICAgIGlmICgncGhvbmVOdW1iZXInIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcImVucm9sbFwiIC8qIEVOUk9MTCAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lRW5yb2xsbWVudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVTZXNzaW9uSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcInNpZ25pblwiIC8qIFNJR05fSU4gKi8sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZmFFbnJvbGxtZW50SWQgPSAoKF9hID0gcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvckhpbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvclVpZDtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQobWZhRW5yb2xsbWVudElkLCBhdXRoLCBcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWw6IHNlc3Npb24uY3JlZGVudGlhbCxcclxuICAgICAgICAgICAgICAgICAgICBtZmFFbnJvbGxtZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVTaWduSW5JbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVSZXNwb25zZUluZm8uc2Vzc2lvbkluZm87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbkluZm8gfSA9IGF3YWl0IHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGFUb2tlblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25JbmZvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHZlcmlmaWVyLl9yZXNldCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKHVzZXIsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBhdXRoZW50aWNhdGluZyB0aGUgbmV3IHBob25lIG51bWJlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgYXdhaXQgX2xpbmskMShnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgUGhvbmVBdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGluIHdoaWNoIHNpZ24taW5zIHNob3VsZCBvY2N1ci5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogU3RhcnRzIGEgcGhvbmUgbnVtYmVyIGF1dGhlbnRpY2F0aW9uIGZsb3cgYnkgc2VuZGluZyBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRoZSBnaXZlbiBwaG9uZVxyXG4gICAgICogbnVtYmVyLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSBmbG93IGlzIHByb3ZpZGVkIHVzaW5nIHRoZSBgc2lnbkluV2l0aFBob25lTnVtYmVyYCBtZXRob2QuXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVJbmZvT3B0aW9ucyAtIFRoZSB1c2VyJ3Mge0BsaW5rIFBob25lSW5mb09wdGlvbnN9LiBUaGUgcGhvbmUgbnVtYmVyIHNob3VsZCBiZSBpblxyXG4gICAgICogRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25WZXJpZmllciAtIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGFcclxuICAgICAqIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS4gVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sXHJcbiAgICAgKiB7QGxpbmsgUmVjYXB0Y2hhVmVyaWZpZXJ9LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgYSB2ZXJpZmljYXRpb24gSUQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0gdG8gaWRlbnRpZnkgdGhpcyBmbG93Li5cclxuICAgICAqL1xyXG4gICAgdmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVPcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIF92ZXJpZnlQaG9uZU51bWJlcih0aGlzLmF1dGgsIHBob25lT3B0aW9ucywgZ2V0TW9kdWxhckluc3RhbmNlKGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBob25lIGF1dGggY3JlZGVudGlhbCwgZ2l2ZW4gdGhlIHZlcmlmaWNhdGlvbiBJRCBmcm9tXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9IGFuZCB0aGUgY29kZSB0aGF0IHdhcyBzZW50IHRvIHRoZSB1c2VyJ3NcclxuICAgICAqIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2ZXJpZmljYXRpb25JZCAtIFRoZSB2ZXJpZmljYXRpb24gSUQgcmV0dXJuZWQgZnJvbSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9LlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbkNvZGUgLSBUaGUgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlcidzIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHdoZW4gcGFzc2VkIGFuIGVycm9yLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd29ya3MgZm9yIGVycm9ycyBsaWtlXHJcbiAgICAgKiBgYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsc2AuIFRoaXMgaXMgdXNlZnVsIGZvclxyXG4gICAgICogcmVjb3ZlcmluZyB3aGVuIGF0dGVtcHRpbmcgdG8gc2V0IGEgdXNlcidzIHBob25lIG51bWJlciBidXQgdGhlIG51bWJlclxyXG4gICAgICogaW4gcXVlc3Rpb24gaXMgYWxyZWFkeSB0aWVkIHRvIGFub3RoZXIgYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmdcclxuICAgICAqIGNvZGUgdHJpZXMgdG8gdXBkYXRlIHRoZSBjdXJyZW50IHVzZXIncyBwaG9uZSBudW1iZXIsIGFuZCBpZiB0aGF0XHJcbiAgICAgKiBmYWlscywgbGlua3MgdGhlIHVzZXIgd2l0aCB0aGUgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhhdCBudW1iZXI6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihudW1iZXIsIHZlcmlmaWVyKTtcclxuICAgICAqIHRyeSB7XHJcbiAgICAgKiAgIGNvbnN0IGNvZGUgPSAnJzsgLy8gUHJvbXB0IHRoZSB1c2VyIGZvciB0aGUgdmVyaWZpY2F0aW9uIGNvZGVcclxuICAgICAqICAgYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIoXHJcbiAgICAgKiAgICAgICBhdXRoLmN1cnJlbnRVc2VyLFxyXG4gICAgICogICAgICAgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgY29kZSkpO1xyXG4gICAgICogfSBjYXRjaCAoZSkge1xyXG4gICAgICogICBpZiAoZS5jb2RlID09PSAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJykge1xyXG4gICAgICogICAgIGNvbnN0IGNyZWQgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbUVycm9yKGUpO1xyXG4gICAgICogICAgIGF3YWl0IGxpbmtXaXRoQ3JlZGVudGlhbChhdXRoLmN1cnJlbnRVc2VyLCBjcmVkKTtcclxuICAgICAqICAgfVxyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqIC8vIEF0IHRoaXMgcG9pbnQsIGF1dGguY3VycmVudFVzZXIucGhvbmVOdW1iZXIgPT09IG51bWJlci5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0byBnZW5lcmF0ZSBhIGNyZWRlbnRpYWwgZnJvbS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmIChwaG9uZU51bWJlciAmJiB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBIT05FLiAqL1xyXG5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGhvbmVcIiAvKiBQSE9ORSAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EID0gXCJwaG9uZVwiIC8qIFBIT05FICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hvb3NlcyBhIHBvcHVwL3JlZGlyZWN0IHJlc29sdmVyIHRvIHVzZS4gVGhpcyBwcmVmZXJzIHRoZSBvdmVycmlkZSAod2hpY2hcclxuICogaXMgZGlyZWN0bHkgcGFzc2VkIGluKSwgYW5kIGZhbGxzIGJhY2sgdG8gdGhlIHByb3BlcnR5IHNldCBvbiB0aGUgYXV0aFxyXG4gKiBvYmplY3QuIElmIG5laXRoZXIgYXJlIGF2YWlsYWJsZSwgdGhpcyBmdW5jdGlvbiBlcnJvcnMgdy8gYW4gYXJndW1lbnQgZXJyb3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoLCByZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICBpZiAocmVzb2x2ZXJPdmVycmlkZSkge1xyXG4gICAgICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXJPdmVycmlkZSk7XHJcbiAgICB9XHJcbiAgICBfYXNzZXJ0KGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIHJldHVybiBhdXRoLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgSWRwQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwiY3VzdG9tXCIgLyogQ1VTVE9NICovLCBcImN1c3RvbVwiIC8qIENVU1RPTSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KGlkVG9rZW4pKTtcclxuICAgIH1cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IHRoaXMucGFyYW1zLnJlcXVlc3RVcmksXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5wYXJhbXMuc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogdGhpcy5wYXJhbXMucG9zdEJvZHksXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0aGlzLnBhcmFtcy50ZW5hbnRJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBhcmFtcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICByZXR1cm5JZHBDcmVkZW50aWFsOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoaWRUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfc2lnbkluKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChwYXJhbXMuYXV0aCwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cclxuZnVuY3Rpb24gX3JlYXV0aChwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayhwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlciwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKi9cclxuY2xhc3MgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcmVzb2x2ZXIsIHVzZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZXI7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmJ5cGFzc0F1dGhTdGF0ZSA9IGJ5cGFzc0F1dGhTdGF0ZTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBBcnJheS5pc0FycmF5KGZpbHRlcikgPyBmaWx0ZXIgOiBbZmlsdGVyXTtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX2luaXRpYWxpemUodGhpcy5hdXRoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25FeGVjdXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkF1dGhFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdXJsUmVzcG9uc2UsIHNlc3Npb25JZCwgcG9zdEJvZHksIHRlbmFudElkLCBlcnJvciwgdHlwZSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGF1dGg6IHRoaXMuYXV0aCxcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdXJsUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGVuYW50SWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogcG9zdEJvZHkgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXHJcbiAgICAgICAgICAgIGJ5cGFzc0F1dGhTdGF0ZTogdGhpcy5ieXBhc3NBdXRoU3RhdGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShhd2FpdCB0aGlzLmdldElkcFRhc2sodHlwZSkocGFyYW1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICB9XHJcbiAgICBnZXRJZHBUYXNrKHR5cGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVBvcHVwXCIgLyogU0lHTl9JTl9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zaWduSW47XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rVmlhUG9wdXBcIiAvKiBMSU5LX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9saW5rO1xyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBSRUFVVEhfVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWF1dGg7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbCh0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVzb2x2ZShjcmVkKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZXNvbHZlKGNyZWQpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHJlamVjdChlcnJvcikge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMucGVuZGluZ1Byb21pc2UsICdQZW5kaW5nIHByb21pc2Ugd2FzIG5ldmVyIHNldCcpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBbmRDbGVhblVwKCk7XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIudW5yZWdpc3RlckNvbnN1bWVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsZWFuVXAoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCA9IG5ldyBEZWxheSgyMDAwLCAxMDAwMCk7XHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgcG9wdXAtYmFzZWQgT0F1dGggYXV0aGVudGljYXRpb24gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc3VjY2VlZHMsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyIGFsb25nIHdpdGggdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC4gSWYgc2lnbiBpbiB3YXNcclxuICogdW5zdWNjZXNzZnVsLCByZXR1cm5zIGFuIGVycm9yIG9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24oYXV0aEludGVybmFsLCBcInNpZ25JblZpYVBvcHVwXCIgLyogU0lHTl9JTl9WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogUmVhdXRoZW50aWNhdGVzIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHtAbGluayBPQXV0aFByb3ZpZGVyfSB1c2luZyBhIHBvcC11cCBiYXNlZFxyXG4gKiBPQXV0aCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGUgcmVhdXRoZW50aWNhdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGUgcmV0dXJuZWQgcmVzdWx0IHdpbGwgY29udGFpbiB0aGUgdXNlciBhbmQgdGhlXHJcbiAqIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFJlYXV0aGVudGljYXRlIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGF3YWl0IHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBSRUFVVEhfVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIGF1dGhlbnRpY2F0ZWQgcHJvdmlkZXIgdG8gdGhlIHVzZXIgYWNjb3VudCB1c2luZyBhIHBvcC11cCBiYXNlZCBPQXV0aCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGUgbGlua2luZyBpcyBzdWNjZXNzZnVsLCB0aGUgcmV0dXJuZWQgcmVzdWx0IHdpbGwgY29udGFpbiB0aGUgdXNlciBhbmQgdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC5cclxuICpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhQb3B1cChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwibGlua1ZpYVBvcHVwXCIgLyogTElOS19WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBQb3B1cCBldmVudCBtYW5hZ2VyLiBIYW5kbGVzIHRoZSBwb3B1cCdzIGVudGlyZSBsaWZlY3ljbGU7IGxpc3RlbnMgdG8gYXV0aFxyXG4gKiBldmVudHNcclxuICpcclxuICovXHJcbmNsYXNzIFBvcHVwT3BlcmF0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcHJvdmlkZXIsIHJlc29sdmVyLCB1c2VyKSB7XHJcbiAgICAgICAgc3VwZXIoYXV0aCwgZmlsdGVyLCByZXNvbHZlciwgdXNlcik7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIGlmIChQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24pIHtcclxuICAgICAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSB0aGlzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZU5vdE51bGwoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgX2Fzc2VydChyZXN1bHQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5maWx0ZXIubGVuZ3RoID09PSAxLCAnUG9wdXAgb3BlcmF0aW9ucyBvbmx5IGhhbmRsZSBvbmUgZXZlbnQnKTtcclxuICAgICAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX29wZW5Qb3B1cCh0aGlzLmF1dGgsIHRoaXMucHJvdmlkZXIsIHRoaXMuZmlsdGVyWzBdLCAvLyBUaGVyZSdzIGFsd2F5cyBvbmUsIHNlZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgIGV2ZW50SWQpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdy5hc3NvY2lhdGVkRXZlbnQgPSBldmVudElkO1xyXG4gICAgICAgIC8vIENoZWNrIGZvciB3ZWIgc3RvcmFnZSBzdXBwb3J0IGFuZCBvcmlnaW4gdmFsaWRhdGlvbiBfYWZ0ZXJfIHRoZSBwb3B1cCBpc1xyXG4gICAgICAgIC8vIGxvYWRlZC4gVGhlc2Ugb3BlcmF0aW9ucyBhcmUgc2xvdyAofjEgc2Vjb25kIG9yIHNvKSBSYXRoZXIgdGhhblxyXG4gICAgICAgIC8vIHdhaXRpbmcgb24gdGhlbSBiZWZvcmUgb3BlbmluZyB0aGUgd2luZG93LCBvcHRpbWlzdGljYWxseSBvcGVuIHRoZSBwb3B1cFxyXG4gICAgICAgIC8vIGFuZCBjaGVjayBmb3Igc3RvcmFnZSBzdXBwb3J0IGF0IHRoZSBzYW1lIHRpbWUuIElmIHN0b3JhZ2Ugc3VwcG9ydCBpc1xyXG4gICAgICAgIC8vIG5vdCBhdmFpbGFibGUsIHRoaXMgd2lsbCBjYXVzZSB0aGUgd2hvbGUgdGhpbmcgdG8gcmVqZWN0IHByb3Blcmx5LiBJdFxyXG4gICAgICAgIC8vIHdpbGwgYWxzbyBjbG9zZSB0aGUgcG9wdXAsIGJ1dCBzaW5jZSB0aGUgcHJvbWlzZSBoYXMgYWxyZWFkeSByZWplY3RlZCxcclxuICAgICAgICAvLyB0aGUgcG9wdXAgY2xvc2VkIGJ5IHVzZXIgcG9sbCB3aWxsIHJlamVjdCBpbnRvIHRoZSB2b2lkLlxyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIuX29yaWdpblZhbGlkYXRpb24odGhpcy5hdXRoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5faXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKHRoaXMuYXV0aCwgaXNTdXBwb3J0ZWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcIndlYi1zdG9yYWdlLXVuc3VwcG9ydGVkXCIgLyogV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQgKi8pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEhhbmRsZSB1c2VyIGNsb3N1cmUuIE5vdGljZSB0aGlzIGRvZXMgKm5vdCogdXNlIGF3YWl0XHJcbiAgICAgICAgdGhpcy5wb2xsVXNlckNhbmNlbGxhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGV2ZW50SWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXNzb2NpYXRlZEV2ZW50KSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgY2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiAvKiBFWFBJUkVEX1BPUFVQX1JFUVVFU1QgKi8pKTtcclxuICAgIH1cclxuICAgIGNsZWFuVXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aFdpbmRvdykge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbElkKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5wb2xsSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcG9sbFVzZXJDYW5jZWxsYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcG9sbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKChfYiA9IChfYSA9IHRoaXMuYXV0aFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLndpbmRvdykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlcmUgaXMgc3VmZmljaWVudCB0aW1lIGZvciB3aGF0ZXZlciBhY3Rpb24gdG9cclxuICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRlLiBUaGUgd2luZG93IGNvdWxkIGhhdmUgY2xvc2VkIGJ1dCB0aGUgc2lnbiBpbiBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsIGNvdWxkIHN0aWxsIGJlIGluIGZsaWdodC5cclxuICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sIDIwMDAgLyogQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dChwb2xsLCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwb2xsKCk7XHJcbiAgICB9XHJcbn1cclxuLy8gT25seSBvbmUgcG9wdXAgaXMgZXZlciBzaG93biBhdCBvbmNlLiBUaGUgbGlmZWN5Y2xlIG9mIHRoZSBjdXJyZW50IHBvcHVwXHJcbi8vIGNhbiBiZSBtYW5hZ2VkIC8gY2FuY2VsbGVkIGJ5IHRoZSBjb25zdHJ1Y3Rvci5cclxuUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gbnVsbDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUEVORElOR19SRURJUkVDVF9LRVkgPSAncGVuZGluZ1JlZGlyZWN0JztcclxuLy8gV2Ugb25seSBnZXQgb25lIHJlZGlyZWN0IG91dGNvbWUgZm9yIGFueSBvbmUgYXV0aCwgc28ganVzdCBzdG9yZSBpdFxyXG4vLyBpbiBoZXJlLlxyXG5jb25zdCByZWRpcmVjdE91dGNvbWVNYXAgPSBuZXcgTWFwKCk7XHJcbmNsYXNzIFJlZGlyZWN0QWN0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIHJlc29sdmVyLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGF1dGgsIFtcclxuICAgICAgICAgICAgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogUkVBVVRIX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqL1xyXG4gICAgICAgIF0sIHJlc29sdmVyLCB1bmRlZmluZWQsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5ldmVudElkID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3ZlcnJpZGUgdGhlIGV4ZWN1dGUgZnVuY3Rpb247IGlmIHdlIGFscmVhZHkgaGF2ZSBhIHJlZGlyZWN0IHJlc3VsdCwgdGhlblxyXG4gICAgICoganVzdCByZXR1cm4gaXQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgbGV0IHJlYWR5T3V0Y29tZSA9IHJlZGlyZWN0T3V0Y29tZU1hcC5nZXQodGhpcy5hdXRoLl9rZXkoKSk7XHJcbiAgICAgICAgaWYgKCFyZWFkeU91dGNvbWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1BlbmRpbmdSZWRpcmVjdCA9IGF3YWl0IF9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyh0aGlzLnJlc29sdmVyLCB0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaGFzUGVuZGluZ1JlZGlyZWN0ID8gYXdhaXQgc3VwZXIuZXhlY3V0ZSgpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWFkeU91dGNvbWUgPSAoKSA9PiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksIHJlYWR5T3V0Y29tZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlJ3JlIG5vdCBieXBhc3NpbmcgYXV0aCBzdGF0ZSwgdGhlIHJlYWR5IG91dGNvbWUgc2hvdWxkIGJlIHNldCB0b1xyXG4gICAgICAgIC8vIG51bGwuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWFkeU91dGNvbWUoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZW50aW5lbCB2YWx1ZSBpbmRpY2F0aW5nIHRoZXJlJ3Mgbm8gcGVuZGluZyByZWRpcmVjdFxyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50LmV2ZW50SWQpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuYXV0aC5fcmVkaXJlY3RVc2VyRm9ySWQoZXZlbnQuZXZlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIG9uRXhlY3V0aW9uKCkgeyB9XHJcbiAgICBjbGVhblVwKCkgeyB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICBjb25zdCBrZXkgPSBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCk7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpO1xyXG4gICAgaWYgKCEoYXdhaXQgcGVyc2lzdGVuY2UuX2lzQXZhaWxhYmxlKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gKGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQoa2V5KSkgPT09ICd0cnVlJztcclxuICAgIGF3YWl0IHBlcnNpc3RlbmNlLl9yZW1vdmUoa2V5KTtcclxuICAgIHJldHVybiBoYXNQZW5kaW5nUmVkaXJlY3Q7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlciwgYXV0aCkge1xyXG4gICAgcmV0dXJuIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpLl9zZXQocGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpLCAndHJ1ZScpO1xyXG59XHJcbmZ1bmN0aW9uIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMoKSB7XHJcbiAgICByZWRpcmVjdE91dGNvbWVNYXAuY2xlYXIoKTtcclxufVxyXG5mdW5jdGlvbiByZXNvbHZlclBlcnNpc3RlbmNlKHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2dldEluc3RhbmNlKHJlc29sdmVyLl9yZWRpcmVjdFBlcnNpc3RlbmNlKTtcclxufVxyXG5mdW5jdGlvbiBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCkge1xyXG4gICAgcmV0dXJuIF9wZXJzaXN0ZW5jZUtleU5hbWUoUEVORElOR19SRURJUkVDVF9LRVksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXV0aGVudGljYXRlcyBhIEZpcmViYXNlIGNsaWVudCB1c2luZyBhIGZ1bGwtcGFnZSByZWRpcmVjdCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBoYW5kbGUgdGhlIHJlc3VsdHMgYW5kIGVycm9ycyBmb3IgdGhpcyBvcGVyYXRpb24sIHJlZmVyIHRvIHtAbGluayBnZXRSZWRpcmVjdFJlc3VsdH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcik7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKGF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCBhdXRoSW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdChhdXRoSW50ZXJuYWwsIHByb3ZpZGVyLCBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8pO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogLy8gTGluayB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBhd2FpdCBsaW5rV2l0aFJlZGlyZWN0KHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCBhZ2FpbiB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICAvLyBBbGxvdyB0aGUgcmVzb2x2ZXIgdG8gZXJyb3IgYmVmb3JlIHBlcnNpc3RpbmcgdGhlIHJlZGlyZWN0IHVzZXJcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovLCBldmVudElkKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHtAbGluayBPQXV0aFByb3ZpZGVyfSB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBzb21lIG90aGVyIHByb3ZpZGVyLlxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGxpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2xpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIC8vIEFsbG93IHRoZSByZXNvbHZlciB0byBlcnJvciBiZWZvcmUgcGVyc2lzdGluZyB0aGUgcmVkaXJlY3QgdXNlclxyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVyLnByb3ZpZGVySWQpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfSBmcm9tIHRoZSByZWRpcmVjdC1iYXNlZCBzaWduLWluIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHNpZ24taW4gc3VjY2VlZGVkLCByZXR1cm5zIHRoZSBzaWduZWQgaW4gdXNlci4gSWYgc2lnbi1pbiB3YXMgdW5zdWNjZXNzZnVsLCBmYWlscyB3aXRoIGFuXHJcbiAqIGVycm9yLiBJZiBubyByZWRpcmVjdCBvcGVyYXRpb24gd2FzIGNhbGxlZCwgcmV0dXJucyBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH1cclxuICogd2l0aCBhIG51bGwgYHVzZXJgLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gWW91IGNhbiBhZGQgYWRkaXRpb25hbCBzY29wZXMgdG8gdGhlIHByb3ZpZGVyOlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIC8vIEFzIHRoaXMgQVBJIGNhbiBiZSB1c2VkIGZvciBzaWduLWluLCBsaW5raW5nIGFuZCByZWF1dGhlbnRpY2F0aW9uLFxyXG4gKiAvLyBjaGVjayB0aGUgb3BlcmF0aW9uVHlwZSB0byBkZXRlcm1pbmUgd2hhdCB0cmlnZ2VyZWQgdGhpcyByZWRpcmVjdFxyXG4gKiAvLyBvcGVyYXRpb24uXHJcbiAqIGNvbnN0IG9wZXJhdGlvblR5cGUgPSByZXN1bHQub3BlcmF0aW9uVHlwZTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFJlZGlyZWN0UmVzdWx0KGF1dGgsIHJlc29sdmVyKSB7XHJcbiAgICBhd2FpdCBfY2FzdEF1dGgoYXV0aCkuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHJldHVybiBfZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIsIGZhbHNlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXJFeHRlcm4sIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNvbHZlciA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFJlZGlyZWN0QWN0aW9uKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgaWYgKHJlc3VsdCAmJiAhYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgZGVsZXRlIHJlc3VsdC51c2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9wZXJzaXN0VXNlcklmQ3VycmVudChyZXN1bHQudXNlcik7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9zZXRSZWRpcmVjdFVzZXIobnVsbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXIpIHtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKGAke3VzZXIudWlkfTo6OmApO1xyXG4gICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gZXZlbnRJZDtcclxuICAgIGF3YWl0IHVzZXIuYXV0aC5fc2V0UmVkaXJlY3RVc2VyKHVzZXIpO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyKTtcclxuICAgIHJldHVybiBldmVudElkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZSBhbW91bnQgb2YgdGltZSB0byBzdG9yZSB0aGUgVUlEcyBvZiBzZWVuIGV2ZW50czsgdGhpcyBpc1xyXG4vLyBzZXQgdG8gMTAgbWluIGJ5IGRlZmF1bHRcclxuY29uc3QgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMgPSAxMCAqIDYwICogMTAwMDtcclxuY2xhc3MgQXV0aEV2ZW50TWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5hZGQoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50LCBhdXRoRXZlbnRDb25zdW1lcikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kVG9Db25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlRXZlbnRUb0NhY2hlKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdW5yZWdpc3RlckNvbnN1bWVyKGF1dGhFdmVudENvbnN1bWVyKSB7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZGVsZXRlKGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgIH1cclxuICAgIG9uRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZXZlbnQgaGFzIGFscmVhZHkgYmVlbiBoYW5kbGVkXHJcbiAgICAgICAgaWYgKHRoaXMuaGFzRXZlbnRCZWVuSGFuZGxlZChldmVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmZvckVhY2goY29uc3VtZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKGV2ZW50LCBjb25zdW1lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IHx8ICFpc1JlZGlyZWN0RXZlbnQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgc2VlbiBhIHJlZGlyZWN0IGJlZm9yZSwgb3IgdGhpcyBpcyBhIHBvcHVwIGV2ZW50LFxyXG4gICAgICAgICAgICAvLyBiYWlsIG5vd1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSB0cnVlO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB3YXNuJ3QgaGFuZGxlZCwgaGFuZyBvbiB0byBpdFxyXG4gICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgfVxyXG4gICAgc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmIChldmVudC5lcnJvciAmJiAhaXNOdWxsUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9ICgoX2EgPSBldmVudC5lcnJvci5jb2RlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3BsaXQoJ2F1dGgvJylbMV0pIHx8XHJcbiAgICAgICAgICAgICAgICBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi87XHJcbiAgICAgICAgICAgIGNvbnN1bWVyLm9uRXJyb3IoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgY29kZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3VtZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICBjb25zdCBldmVudElkTWF0Y2hlcyA9IGNvbnN1bWVyLmV2ZW50SWQgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgKCEhZXZlbnQuZXZlbnRJZCAmJiBldmVudC5ldmVudElkID09PSBjb25zdW1lci5ldmVudElkKTtcclxuICAgICAgICByZXR1cm4gY29uc3VtZXIuZmlsdGVyLmluY2x1ZGVzKGV2ZW50LnR5cGUpICYmIGV2ZW50SWRNYXRjaGVzO1xyXG4gICAgfVxyXG4gICAgaGFzRXZlbnRCZWVuSGFuZGxlZChldmVudCkge1xyXG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID49XHJcbiAgICAgICAgICAgIEVWRU5UX0RVUExJQ0FUSU9OX0NBQ0hFX0RVUkFUSU9OX01TKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlZEV2ZW50VWlkcy5oYXMoZXZlbnRVaWQoZXZlbnQpKTtcclxuICAgIH1cclxuICAgIHNhdmVFdmVudFRvQ2FjaGUoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcy5hZGQoZXZlbnRVaWQoZXZlbnQpKTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGV2ZW50VWlkKGUpIHtcclxuICAgIHJldHVybiBbZS50eXBlLCBlLmV2ZW50SWQsIGUuc2Vzc2lvbklkLCBlLnRlbmFudElkXS5maWx0ZXIodiA9PiB2KS5qb2luKCctJyk7XHJcbn1cclxuZnVuY3Rpb24gaXNOdWxsUmVkaXJlY3RFdmVudCh7IHR5cGUsIGVycm9yIH0pIHtcclxuICAgIHJldHVybiAodHlwZSA9PT0gXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLyAmJlxyXG4gICAgICAgIChlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuY29kZSkgPT09IGBhdXRoLyR7XCJuby1hdXRoLWV2ZW50XCIgLyogTk9fQVVUSF9FVkVOVCAqL31gKTtcclxufVxyXG5mdW5jdGlvbiBpc1JlZGlyZWN0RXZlbnQoZXZlbnQpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgIGNhc2UgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjYXNlIFwidW5rbm93blwiIC8qIFVOS05PV04gKi86XHJcbiAgICAgICAgICAgIHJldHVybiBpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2dldFByb2plY3RDb25maWcoYXV0aCwgcmVxdWVzdCA9IHt9KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiR0VUXCIgLyogR0VUICovLCBcIi92MS9wcm9qZWN0c1wiIC8qIEdFVF9QUk9KRUNUX0NPTkZJRyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSVBfQUREUkVTU19SRUdFWCA9IC9eXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM30kLztcclxuY29uc3QgSFRUUF9SRUdFWCA9IC9eaHR0cHM/LztcclxuYXN5bmMgZnVuY3Rpb24gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpIHtcclxuICAgIC8vIFNraXAgb3JpZ2luIHZhbGlkYXRpb24gaWYgd2UgYXJlIGluIGFuIGVtdWxhdGVkIGVudmlyb25tZW50XHJcbiAgICBpZiAoYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGF1dGhvcml6ZWREb21haW5zIH0gPSBhd2FpdCBfZ2V0UHJvamVjdENvbmZpZyhhdXRoKTtcclxuICAgIGZvciAoY29uc3QgZG9tYWluIG9mIGF1dGhvcml6ZWREb21haW5zKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoRG9tYWluKGRvbWFpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGVyZSdzIGEgVVJMIGVycm9yOyBqdXN0IGNvbnRpbnVlIHNlYXJjaGluZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEluIHRoZSBvbGQgU0RLLCB0aGlzIGVycm9yIGFsc28gcHJvdmlkZXMgaGVscGZ1bCBtZXNzYWdlcy5cclxuICAgIF9mYWlsKGF1dGgsIFwidW5hdXRob3JpemVkLWRvbWFpblwiIC8qIElOVkFMSURfT1JJR0lOICovKTtcclxufVxyXG5mdW5jdGlvbiBtYXRjaERvbWFpbihleHBlY3RlZCkge1xyXG4gICAgY29uc3QgY3VycmVudFVybCA9IF9nZXRDdXJyZW50VXJsKCk7XHJcbiAgICBjb25zdCB7IHByb3RvY29sLCBob3N0bmFtZSB9ID0gbmV3IFVSTChjdXJyZW50VXJsKTtcclxuICAgIGlmIChleHBlY3RlZC5zdGFydHNXaXRoKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJykpIHtcclxuICAgICAgICBjb25zdCBjZVVybCA9IG5ldyBVUkwoZXhwZWN0ZWQpO1xyXG4gICAgICAgIGlmIChjZVVybC5ob3N0bmFtZSA9PT0gJycgJiYgaG9zdG5hbWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiB3ZSdyZSBub3QgcGFyc2luZyBjaHJvbWUgVVJMcyBwcm9wZXJseVxyXG4gICAgICAgICAgICByZXR1cm4gKHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmXHJcbiAgICAgICAgICAgICAgICBleHBlY3RlZC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpID09PVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVcmwucmVwbGFjZSgnY2hyb21lLWV4dGVuc2lvbjovLycsICcnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JyAmJiBjZVVybC5ob3N0bmFtZSA9PT0gaG9zdG5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoIUhUVFBfUkVHRVgudGVzdChwcm90b2NvbCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoSVBfQUREUkVTU19SRUdFWC50ZXN0KGV4cGVjdGVkKSkge1xyXG4gICAgICAgIC8vIFRoZSBkb21haW4gaGFzIHRvIGJlIGV4YWN0bHkgZXF1YWwgdG8gdGhlIHBhdHRlcm4sIGFzIGFuIElQIGRvbWFpbiB3aWxsXHJcbiAgICAgICAgLy8gb25seSBjb250YWluIHRoZSBJUCwgbm8gZXh0cmEgY2hhcmFjdGVyLlxyXG4gICAgICAgIHJldHVybiBob3N0bmFtZSA9PT0gZXhwZWN0ZWQ7XHJcbiAgICB9XHJcbiAgICAvLyBEb3RzIGluIHBhdHRlcm4gc2hvdWxkIGJlIGVzY2FwZWQuXHJcbiAgICBjb25zdCBlc2NhcGVkRG9tYWluUGF0dGVybiA9IGV4cGVjdGVkLnJlcGxhY2UoL1xcLi9nLCAnXFxcXC4nKTtcclxuICAgIC8vIE5vbiBpcCBhZGRyZXNzIGRvbWFpbnMuXHJcbiAgICAvLyBkb21haW4uY29tID0gKi5kb21haW4uY29tIE9SIGRvbWFpbi5jb21cclxuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cCgnXiguK1xcXFwuJyArIGVzY2FwZWREb21haW5QYXR0ZXJuICsgJ3wnICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnKSQnLCAnaScpO1xyXG4gICAgcmV0dXJuIHJlLnRlc3QoaG9zdG5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBORVRXT1JLX1RJTUVPVVQgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuLyoqXHJcbiAqIFJlc2V0IHVubGFvZGVkIEdBcGkgbW9kdWxlcy4gSWYgZ2FwaS5sb2FkIGZhaWxzIGR1ZSB0byBhIG5ldHdvcmsgZXJyb3IsXHJcbiAqIGl0IHdpbGwgc3RvcCB3b3JraW5nIGFmdGVyIGEgcmV0cmlhbC4gVGhpcyBpcyBhIGhhY2sgdG8gZml4IHRoaXMgaXNzdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKSB7XHJcbiAgICAvLyBDbGVhciBsYXN0IGZhaWxlZCBnYXBpLmxvYWQgc3RhdGUgdG8gZm9yY2UgbmV4dCBnYXBpLmxvYWQgdG8gZmlyc3RcclxuICAgIC8vIGxvYWQgdGhlIGZhaWxlZCBnYXBpLmlmcmFtZXMgbW9kdWxlLlxyXG4gICAgLy8gR2V0IGdhcGl4LmJlYWNvbiBjb250ZXh0LlxyXG4gICAgY29uc3QgYmVhY29uID0gX3dpbmRvdygpLl9fX2pzbDtcclxuICAgIC8vIEdldCBjdXJyZW50IGhpbnQuXHJcbiAgICBpZiAoYmVhY29uID09PSBudWxsIHx8IGJlYWNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmVhY29uLkgpIHtcclxuICAgICAgICAvLyBHZXQgZ2FwaSBoaW50LlxyXG4gICAgICAgIGZvciAoY29uc3QgaGludCBvZiBPYmplY3Qua2V5cyhiZWFjb24uSCkpIHtcclxuICAgICAgICAgICAgLy8gUmVxdWVzdGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBiZWFjb24uSFtoaW50XS5yIHx8IFtdO1xyXG4gICAgICAgICAgICAvLyBMb2FkZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uTCA9IGJlYWNvbi5IW2hpbnRdLkwgfHwgW107XHJcbiAgICAgICAgICAgIC8vIFNldCByZXF1ZXN0ZWQgbW9kdWxlcyB0byBhIGNvcHkgb2YgdGhlIGxvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5yID0gWy4uLmJlYWNvbi5IW2hpbnRdLkxdO1xyXG4gICAgICAgICAgICAvLyBDbGVhciBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgaWYgKGJlYWNvbi5DUCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiZWFjb24uQ1AubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGZhaWxlZCBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgICAgICAgICBiZWFjb24uQ1BbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGxvYWRHYXBpKGF1dGgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcnVuIHdoZW4gZ2FwaS5sb2FkIGlzIHJlYWR5LlxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRHYXBpSWZyYW1lKCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgZGV2ZWxvcGVyIG1heSBoYXZlIHRyaWVkIHRvIHByZXZpb3VzbHkgcnVuIGdhcGkubG9hZCBhbmQgZmFpbGVkLlxyXG4gICAgICAgICAgICAvLyBSdW4gdGhpcyB0byBmaXggdGhhdC5cclxuICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgIGdhcGkubG9hZCgnZ2FwaS5pZnJhbWVzJywge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9udGltZW91dDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhYm92ZSByZXNldCBtYXkgYmUgc3VmZmljaWVudCwgYnV0IGhhdmluZyB0aGlzIHJlc2V0IGFmdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbHVyZSBlbnN1cmVzIHRoYXQgaWYgdGhlIGRldmVsb3BlciBjYWxscyBnYXBpLmxvYWQgYWZ0ZXIgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBpcyByZS1lc3RhYmxpc2hlZCBhbmQgYmVmb3JlIGFub3RoZXIgYXR0ZW1wdCB0byBlbWJlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpZnJhbWUsIGl0IHdvdWxkIHdvcmsgYW5kIHdvdWxkIG5vdCBiZSBicm9rZW4gYmVjYXVzZSBvZiBvdXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsZWQgYXR0ZW1wdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaW1lb3V0IHdoZW4gZ2FwaS5pZnJhbWVzLklmcmFtZSBub3QgbG9hZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IE5FVFdPUktfVElNRU9VVC5nZXQoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChfYiA9IChfYSA9IF93aW5kb3coKS5nYXBpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWZyYW1lcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLklmcmFtZSkge1xyXG4gICAgICAgICAgICAvLyBJZiBnYXBpLmlmcmFtZXMuSWZyYW1lIGF2YWlsYWJsZSwgcmVzb2x2ZS5cclxuICAgICAgICAgICAgcmVzb2x2ZShnYXBpLmlmcmFtZXMuZ2V0Q29udGV4dCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoISEoKF9jID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5sb2FkKSkge1xyXG4gICAgICAgICAgICAvLyBHYXBpIGxvYWRlciByZWFkeSwgbG9hZCBnYXBpLmlmcmFtZXMuXHJcbiAgICAgICAgICAgIGxvYWRHYXBpSWZyYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgaWZyYW1lIGNhbGxiYWNrIHdoZW4gdGhpcyBpcyBjYWxsZWQgc28gYXMgbm90IHRvIG92ZXJ3cml0ZVxyXG4gICAgICAgICAgICAvLyBhbnkgcHJldmlvdXMgZGVmaW5lZCBjYWxsYmFjay4gVGhpcyBoYXBwZW5zIGlmIHRoaXMgbWV0aG9kIGlzIGNhbGxlZFxyXG4gICAgICAgICAgICAvLyBtdWx0aXBsZSB0aW1lcyBpbiBwYXJhbGxlbCBhbmQgY291bGQgcmVzdWx0IGluIHRoZSBsYXRlciBjYWxsYmFja1xyXG4gICAgICAgICAgICAvLyBvdmVyd3JpdGluZyB0aGUgcHJldmlvdXMgb25lLiBUaGlzIHdvdWxkIGVuZCB1cCB3aXRoIGEgaWZyYW1lXHJcbiAgICAgICAgICAgIC8vIHRpbWVvdXQuXHJcbiAgICAgICAgICAgIGNvbnN0IGNiTmFtZSA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgnaWZyYW1lZmNiJyk7XHJcbiAgICAgICAgICAgIC8vIEdBcGkgbG9hZGVyIG5vdCBhdmFpbGFibGUsIGR5bmFtaWNhbGx5IGxvYWQgcGxhdGZvcm0uanMuXHJcbiAgICAgICAgICAgIF93aW5kb3coKVtjYk5hbWVdID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgc2hvdWxkIGJlIHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgaWYgKCEhZ2FwaS5sb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIGZhaWxlZCwgdGhyb3cgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIExvYWQgR0FwaSBsb2FkZXIuXHJcbiAgICAgICAgICAgIHJldHVybiBfbG9hZEpTKGBodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanM/b25sb2FkPSR7Y2JOYW1lfWApLmNhdGNoKGUgPT4gcmVqZWN0KGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgY2FjaGVkIHByb21pc2UgdG8gYWxsb3cgZm9yIHJldHJpYWwuXHJcbiAgICAgICAgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxyXG5sZXQgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbmZ1bmN0aW9uIF9sb2FkR2FwaShhdXRoKSB7XHJcbiAgICBjYWNoZWRHQXBpTG9hZGVyID0gY2FjaGVkR0FwaUxvYWRlciB8fCBsb2FkR2FwaShhdXRoKTtcclxuICAgIHJldHVybiBjYWNoZWRHQXBpTG9hZGVyO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQSU5HX1RJTUVPVVQgPSBuZXcgRGVsYXkoNTAwMCwgMTUwMDApO1xyXG5jb25zdCBJRlJBTUVfUEFUSCA9ICdfXy9hdXRoL2lmcmFtZSc7XHJcbmNvbnN0IEVNVUxBVEVEX0lGUkFNRV9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaWZyYW1lJztcclxuY29uc3QgSUZSQU1FX0FUVFJJQlVURVMgPSB7XHJcbiAgICBzdHlsZToge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgIHRvcDogJy0xMDBweCcsXHJcbiAgICAgICAgd2lkdGg6ICcxcHgnLFxyXG4gICAgICAgIGhlaWdodDogJzFweCdcclxuICAgIH0sXHJcbiAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXHJcbiAgICB0YWJpbmRleDogJy0xJ1xyXG59O1xyXG4vLyBNYXAgZnJvbSBhcGlIb3N0IHRvIGVuZHBvaW50IElEIGZvciBwYXNzaW5nIGludG8gaWZyYW1lLiBJbiBjdXJyZW50IFNESywgYXBpSG9zdCBjYW4gYmUgc2V0IHRvXHJcbi8vIGFueXRoaW5nIChub3QgZnJvbSBhIGxpc3Qgb2YgZW5kcG9pbnRzIHdpdGggSURzIGFzIGluIGxlZ2FjeSksIHNvIHRoaXMgaXMgdGhlIGNsb3Nlc3Qgd2UgY2FuIGdldC5cclxuY29uc3QgRUlEX0ZST01fQVBJSE9TVCA9IG5ldyBNYXAoW1xyXG4gICAgW1wiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogQVBJX0hPU1QgKi8sICdwJ10sXHJcbiAgICBbJ3N0YWdpbmctaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAncyddLFxyXG4gICAgWyd0ZXN0LWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tJywgJ3QnXSAvLyB0ZXN0XHJcbl0pO1xyXG5mdW5jdGlvbiBnZXRJZnJhbWVVcmwoYXV0aCkge1xyXG4gICAgY29uc3QgY29uZmlnID0gYXV0aC5jb25maWc7XHJcbiAgICBfYXNzZXJ0KGNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgY29uc3QgdXJsID0gY29uZmlnLmVtdWxhdG9yXHJcbiAgICAgICAgPyBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRFRF9JRlJBTUVfUEFUSClcclxuICAgICAgICA6IGBodHRwczovLyR7YXV0aC5jb25maWcuYXV0aERvbWFpbn0vJHtJRlJBTUVfUEFUSH1gO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT05cclxuICAgIH07XHJcbiAgICBjb25zdCBlaWQgPSBFSURfRlJPTV9BUElIT1NULmdldChhdXRoLmNvbmZpZy5hcGlIb3N0KTtcclxuICAgIGlmIChlaWQpIHtcclxuICAgICAgICBwYXJhbXMuZWlkID0gZWlkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhbWV3b3JrcyA9IGF1dGguX2dldEZyYW1ld29ya3MoKTtcclxuICAgIGlmIChmcmFtZXdvcmtzLmxlbmd0aCkge1xyXG4gICAgICAgIHBhcmFtcy5mdyA9IGZyYW1ld29ya3Muam9pbignLCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0/JHtxdWVyeXN0cmluZyhwYXJhbXMpLnNsaWNlKDEpfWA7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX29wZW5JZnJhbWUoYXV0aCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IF9sb2FkR2FwaShhdXRoKTtcclxuICAgIGNvbnN0IGdhcGkgPSBfd2luZG93KCkuZ2FwaTtcclxuICAgIF9hc3NlcnQoZ2FwaSwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBjb250ZXh0Lm9wZW4oe1xyXG4gICAgICAgIHdoZXJlOiBkb2N1bWVudC5ib2R5LFxyXG4gICAgICAgIHVybDogZ2V0SWZyYW1lVXJsKGF1dGgpLFxyXG4gICAgICAgIG1lc3NhZ2VIYW5kbGVyc0ZpbHRlcjogZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUixcclxuICAgICAgICBhdHRyaWJ1dGVzOiBJRlJBTUVfQVRUUklCVVRFUyxcclxuICAgICAgICBkb250Y2xlYXI6IHRydWVcclxuICAgIH0sIChpZnJhbWUpID0+IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBhd2FpdCBpZnJhbWUucmVzdHlsZSh7XHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgaWZyYW1lIGZyb20gY2xvc2luZyBvbiBtb3VzZSBvdXQuXHJcbiAgICAgICAgICAgIHNldEhpZGVPbkxlYXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtFcnJvciA9IF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgICAgICAvLyBDb25maXJtIGlmcmFtZSBpcyBjb3JyZWN0bHkgbG9hZGVkLlxyXG4gICAgICAgIC8vIFRvIGZhbGxiYWNrIG9uIGZhaWx1cmUsIHNldCBhIHRpbWVvdXQuXHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yVGltZXIgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0sIFBJTkdfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGltZXIgYW5kIHJlc29sdmUgcGVuZGluZyBpZnJhbWUgcmVhZHkgcHJvbWlzZS5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhclRpbWVyQW5kUmVzb2x2ZSgpIHtcclxuICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrRXJyb3JUaW1lcik7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWZyYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhpcyByZXR1cm5zIGFuIElUaGVuYWJsZS4gSG93ZXZlciB0aGUgcmVqZWN0IHBhcnQgZG9lcyBub3QgY2FsbFxyXG4gICAgICAgIC8vIHdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLlxyXG4gICAgICAgIGlmcmFtZS5waW5nKGNsZWFyVGltZXJBbmRSZXNvbHZlKS50aGVuKGNsZWFyVGltZXJBbmRSZXNvbHZlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBCQVNFX1BPUFVQX09QVElPTlMgPSB7XHJcbiAgICBsb2NhdGlvbjogJ3llcycsXHJcbiAgICByZXNpemFibGU6ICd5ZXMnLFxyXG4gICAgc3RhdHVzYmFyOiAneWVzJyxcclxuICAgIHRvb2xiYXI6ICdubydcclxufTtcclxuY29uc3QgREVGQVVMVF9XSURUSCA9IDUwMDtcclxuY29uc3QgREVGQVVMVF9IRUlHSFQgPSA2MDA7XHJcbmNvbnN0IFRBUkdFVF9CTEFOSyA9ICdfYmxhbmsnO1xyXG5jb25zdCBGSVJFRk9YX0VNUFRZX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuY2xhc3MgQXV0aFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xyXG4gICAgICAgIHRoaXMuYXNzb2NpYXRlZEV2ZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbmRvdykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9vcGVuKGF1dGgsIHVybCwgbmFtZSwgd2lkdGggPSBERUZBVUxUX1dJRFRILCBoZWlnaHQgPSBERUZBVUxUX0hFSUdIVCkge1xyXG4gICAgY29uc3QgdG9wID0gTWF0aC5tYXgoKHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgLSBoZWlnaHQpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbFdpZHRoIC0gd2lkdGgpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGxldCB0YXJnZXQgPSAnJztcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEJBU0VfUE9QVVBfT1BUSU9OUyksIHsgd2lkdGg6IHdpZHRoLnRvU3RyaW5nKCksIGhlaWdodDogaGVpZ2h0LnRvU3RyaW5nKCksIHRvcCxcclxuICAgICAgICBsZWZ0IH0pO1xyXG4gICAgLy8gQ2hyb21lIGlPUyA3IGFuZCA4IGlzIHJldHVybmluZyBhbiB1bmRlZmluZWQgcG9wdXAgd2luIHdoZW4gdGFyZ2V0IGlzXHJcbiAgICAvLyBzcGVjaWZpZWQsIGV2ZW4gdGhvdWdoIHRoZSBwb3B1cCBpcyBub3QgbmVjZXNzYXJpbHkgYmxvY2tlZC5cclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgICB0YXJnZXQgPSBfaXNDaHJvbWVJT1ModWEpID8gVEFSR0VUX0JMQU5LIDogbmFtZTtcclxuICAgIH1cclxuICAgIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIC8vIEZpcmVmb3ggY29tcGxhaW5zIHdoZW4gaW52YWxpZCBVUkxzIGFyZSBwb3BwZWQgb3V0LiBIYWNreSB3YXkgdG8gYnlwYXNzLlxyXG4gICAgICAgIHVybCA9IHVybCB8fCBGSVJFRk9YX0VNUFRZX1VSTDtcclxuICAgICAgICAvLyBGaXJlZm94IGRpc2FibGVzIGJ5IGRlZmF1bHQgc2Nyb2xsaW5nIG9uIHBvcHVwIHdpbmRvd3MsIHdoaWNoIGNhbiBjcmVhdGVcclxuICAgICAgICAvLyBpc3N1ZXMgd2hlbiB0aGUgdXNlciBoYXMgbWFueSBHb29nbGUgYWNjb3VudHMsIGZvciBpbnN0YW5jZS5cclxuICAgICAgICBvcHRpb25zLnNjcm9sbGJhcnMgPSAneWVzJztcclxuICAgIH1cclxuICAgIGNvbnN0IG9wdGlvbnNTdHJpbmcgPSBPYmplY3QuZW50cmllcyhvcHRpb25zKS5yZWR1Y2UoKGFjY3VtLCBba2V5LCB2YWx1ZV0pID0+IGAke2FjY3VtfSR7a2V5fT0ke3ZhbHVlfSxgLCAnJyk7XHJcbiAgICBpZiAoX2lzSU9TU3RhbmRhbG9uZSh1YSkgJiYgdGFyZ2V0ICE9PSAnX3NlbGYnKSB7XHJcbiAgICAgICAgb3BlbkFzTmV3V2luZG93SU9TKHVybCB8fCAnJywgdGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChudWxsKTtcclxuICAgIH1cclxuICAgIC8vIGFib3V0OmJsYW5rIGdldHRpbmcgc2FuaXRpemVkIGNhdXNpbmcgYnJvd3NlcnMgbGlrZSBJRS9FZGdlIHRvIGRpc3BsYXlcclxuICAgIC8vIGJyaWVmIGVycm9yIG1lc3NhZ2UgYmVmb3JlIHJlZGlyZWN0aW5nIHRvIGhhbmRsZXIuXHJcbiAgICBjb25zdCBuZXdXaW4gPSB3aW5kb3cub3Blbih1cmwgfHwgJycsIHRhcmdldCwgb3B0aW9uc1N0cmluZyk7XHJcbiAgICBfYXNzZXJ0KG5ld1dpbiwgYXV0aCwgXCJwb3B1cC1ibG9ja2VkXCIgLyogUE9QVVBfQkxPQ0tFRCAqLyk7XHJcbiAgICAvLyBGbGFreSBvbiBJRSBlZGdlLCBlbmNhcHN1bGF0ZSB3aXRoIGEgdHJ5IGFuZCBjYXRjaC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbmV3V2luLmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChuZXdXaW4pO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5Bc05ld1dpbmRvd0lPUyh1cmwsIHRhcmdldCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBlbC5ocmVmID0gdXJsO1xyXG4gICAgZWwudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgY29uc3QgY2xpY2sgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudCcpO1xyXG4gICAgY2xpY2suaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAxLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMSwgbnVsbCk7XHJcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGNsaWNrKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVVJMIGZvciBBdXRoZW50aWNhdGlvbiB3aWRnZXQgd2hpY2ggd2lsbCBpbml0aWF0ZSB0aGUgT0F1dGggaGFuZHNoYWtlXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgV0lER0VUX1BBVEggPSAnX18vYXV0aC9oYW5kbGVyJztcclxuLyoqXHJcbiAqIFVSTCBmb3IgZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBFTVVMQVRPUl9XSURHRVRfUEFUSCA9ICdlbXVsYXRvci9hdXRoL2hhbmRsZXInO1xyXG5mdW5jdGlvbiBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCByZWRpcmVjdFVybCwgZXZlbnRJZCwgYWRkaXRpb25hbFBhcmFtcykge1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgsIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovKTtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBhcGlLZXk6IGF1dGguY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgYXV0aFR5cGUsXHJcbiAgICAgICAgcmVkaXJlY3RVcmwsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT04sXHJcbiAgICAgICAgZXZlbnRJZFxyXG4gICAgfTtcclxuICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHByb3ZpZGVyLnNldERlZmF1bHRMYW5ndWFnZShhdXRoLmxhbmd1YWdlQ29kZSk7XHJcbiAgICAgICAgcGFyYW1zLnByb3ZpZGVySWQgPSBwcm92aWRlci5wcm92aWRlcklkIHx8ICcnO1xyXG4gICAgICAgIGlmICghaXNFbXB0eShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5jdXN0b21QYXJhbWV0ZXJzID0gSlNPTi5zdHJpbmdpZnkocHJvdmlkZXIuZ2V0Q3VzdG9tUGFyYW1ldGVycygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyBzZXQgYWRkaXRpb25hbFBhcmFtcyBmcm9tIHRoZSBwcm92aWRlciBhcyB3ZWxsP1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFkZGl0aW9uYWxQYXJhbXMgfHwge30pKSB7XHJcbiAgICAgICAgICAgIHBhcmFtc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgQmFzZU9BdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICBjb25zdCBzY29wZXMgPSBwcm92aWRlci5nZXRTY29wZXMoKS5maWx0ZXIoc2NvcGUgPT4gc2NvcGUgIT09ICcnKTtcclxuICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcGFyYW1zLnNjb3BlcyA9IHNjb3Blcy5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGF1dGgudGVuYW50SWQpIHtcclxuICAgICAgICBwYXJhbXMudGlkID0gYXV0aC50ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBlaWQgYXMgZW5kaXBvaW50SWRcclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBmdyBhcyBGcmFtZXdvcmtzLmpvaW4oXCIsXCIpXHJcbiAgICBjb25zdCBwYXJhbXNEaWN0ID0gcGFyYW1zO1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocGFyYW1zRGljdCkpIHtcclxuICAgICAgICBpZiAocGFyYW1zRGljdFtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtc0RpY3Rba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7Z2V0SGFuZGxlckJhc2UoYXV0aCl9PyR7cXVlcnlzdHJpbmcocGFyYW1zRGljdCkuc2xpY2UoMSl9YDtcclxufVxyXG5mdW5jdGlvbiBnZXRIYW5kbGVyQmFzZSh7IGNvbmZpZyB9KSB7XHJcbiAgICBpZiAoIWNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke2NvbmZpZy5hdXRoRG9tYWlufS8ke1dJREdFVF9QQVRIfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGNvbmZpZywgRU1VTEFUT1JfV0lER0VUX1BBVEgpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgc3BlY2lhbCB3ZWIgc3RvcmFnZSBldmVudFxyXG4gKlxyXG4gKi9cclxuY29uc3QgV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgPSAnd2ViU3RvcmFnZVN1cHBvcnQnO1xyXG5jbGFzcyBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lcyA9IHt9O1xyXG4gICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzID0ge307XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVSZWRpcmVjdEZuID0gX2dldFJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLy8gV3JhcHBpbmcgaW4gYXN5bmMgZXZlbiB0aG91Z2ggd2UgZG9uJ3QgYXdhaXQgYW55d2hlcmUgaW4gb3JkZXJcclxuICAgIC8vIHRvIG1ha2Ugc3VyZSBlcnJvcnMgYXJlIHJhaXNlZCBhcyBwcm9taXNlIHJlamVjdGlvbnNcclxuICAgIGFzeW5jIF9vcGVuUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KChfYSA9IHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYW5hZ2VyLCAnX2luaXRpYWxpemUoKSBub3QgY2FsbGVkIGJlZm9yZSBfb3BlblBvcHVwKCknKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKTtcclxuICAgICAgICByZXR1cm4gX29wZW4oYXV0aCwgdXJsLCBfZ2VuZXJhdGVFdmVudElkKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgICAgIF9zZXRXaW5kb3dMb2NhdGlvbihfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpID0+IHsgfSk7XHJcbiAgICB9XHJcbiAgICBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWFuYWdlciwgcHJvbWlzZSB9ID0gdGhpcy5ldmVudE1hbmFnZXJzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChtYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hbmFnZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVidWdBc3NlcnQocHJvbWlzZSwgJ0lmIG1hbmFnZXIgaXMgbm90IHNldCwgcHJvbWlzZSBzaG91bGQgYmUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldID0geyBwcm9taXNlIH07XHJcbiAgICAgICAgLy8gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQsIHRoZSBrZXkgc2hvdWxkIGJlIHJlbW92ZWQgc28gdGhhdCB0aGVcclxuICAgICAgICAvLyBvcGVyYXRpb24gY2FuIGJlIHJldHJpZWQgbGF0ZXIuXHJcbiAgICAgICAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBpZnJhbWUgPSBhd2FpdCBfb3BlbklmcmFtZShhdXRoKTtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IEF1dGhFdmVudE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgaWZyYW1lLnJlZ2lzdGVyKCdhdXRoRXZlbnQnLCAoaWZyYW1lRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgX2Fzc2VydChpZnJhbWVFdmVudCA9PT0gbnVsbCB8fCBpZnJhbWVFdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWZyYW1lRXZlbnQuYXV0aEV2ZW50LCBhdXRoLCBcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIElOVkFMSURfQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHNwbGl0dGluZyByZWRpcmVjdCBhbmQgcG9wdXAgZXZlbnRzIGVhcmxpZXIgb25cclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlZCA9IG1hbmFnZXIub25FdmVudChpZnJhbWVFdmVudC5hdXRoRXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IGhhbmRsZWQgPyBcIkFDS1wiIC8qIEFDSyAqLyA6IFwiRVJST1JcIiAvKiBFUlJPUiAqLyB9O1xyXG4gICAgICAgIH0sIGdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0gPSB7IG1hbmFnZXIgfTtcclxuICAgICAgICB0aGlzLmlmcmFtZXNbYXV0aC5fa2V5KCldID0gaWZyYW1lO1xyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYikge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV07XHJcbiAgICAgICAgaWZyYW1lLnNlbmQoV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVksIHsgdHlwZTogV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgfSwgcmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zdCBpc1N1cHBvcnRlZCA9IChfYSA9IHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdFswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1dFQl9TVE9SQUdFX1NVUFBPUlRfS0VZXTtcclxuICAgICAgICAgICAgaWYgKGlzU3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNiKCEhaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0gPSBfdmFsaWRhdGVPcmlnaW4oYXV0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgLy8gTW9iaWxlIGJyb3dzZXJzIGFuZCBTYWZhcmkgbmVlZCB0byBvcHRpbWlzdGljYWxseSBpbml0aWFsaXplXHJcbiAgICAgICAgcmV0dXJuIF9pc01vYmlsZUJyb3dzZXIoKSB8fCBfaXNTYWZhcmkoKSB8fCBfaXNJT1MoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGJyb3dzZXJcclxuICogYmFzZWQgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyID0gQnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcjtcblxuY2xhc3MgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgfVxyXG4gICAgX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHNlc3Npb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZW5yb2xsXCIgLyogRU5ST0xMICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplRW5yb2xsKGF1dGgsIHNlc3Npb24uY3JlZGVudGlhbCwgZGlzcGxheU5hbWUpO1xyXG4gICAgICAgICAgICBjYXNlIFwic2lnbmluXCIgLyogU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZVNpZ25JbihhdXRoLCBzZXNzaW9uLmNyZWRlbnRpYWwpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgndW5leHBlY3RlZCBNdWx0aUZhY3RvclNlc3Npb25UeXBlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiB7QGluaGVyaXRkb2MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwgZXh0ZW5kcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLyk7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUNyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZmluYWxpemVFbnJvbGwoYXV0aCwgaWRUb2tlbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gZmluYWxpemVFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IHRoaXMuY3JlZGVudGlhbC5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2ZpbmFsaXplU2lnbkluKGF1dGgsIG1mYVBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplU2lnbkluUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbCxcclxuICAgICAgICAgICAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiB0aGlzLmNyZWRlbnRpYWwuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gdG8gY29uZmlybSBvd25lcnNoaXAgb2YgdGhlIHBob25lIHNlY29uZCBmYWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBob25lQXV0aENyZWRlbnRpYWwgLSBBIGNyZWRlbnRpYWwgcHJvdmlkZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWx9LlxyXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxyXG4gICAgICoge0BsaW5rIE11bHRpRmFjdG9yUmVzb2x2ZXIucmVzb2x2ZVNpZ25Jbn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzc2VydGlvbihjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsLl9mcm9tQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhlIGlkZW50aWZpZXIgb2YgdGhlIHBob25lIHNlY29uZCBmYWN0b3I6IGBwaG9uZWAuXHJcbiAqL1xyXG5QaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yLkZBQ1RPUl9JRCA9ICdwaG9uZSc7XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xudmFyIHZlcnNpb24gPSBcIjAuMTkuNFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBBdXRoSW50ZXJvcCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0VWlkKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmF1dGguY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmF1dGguY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5hdXRoLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICByZXR1cm4geyBhY2Nlc3NUb2tlbiB9O1xyXG4gICAgfVxyXG4gICAgYWRkQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5hdXRoLm9uSWRUb2tlbkNoYW5nZWQodXNlciA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgbGlzdGVuZXIoKChfYSA9IHVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW4pIHx8IG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2V0KGxpc3RlbmVyLCB1bnN1YnNjcmliZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuZ2V0KGxpc3RlbmVyKTtcclxuICAgICAgICBpZiAoIXVuc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICBhc3NlcnRBdXRoQ29uZmlndXJlZCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlLCBcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi8pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbExpc3RlbmVycy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRWZXJzaW9uRm9yUGxhdGZvcm0oY2xpZW50UGxhdGZvcm0pIHtcclxuICAgIHN3aXRjaCAoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgICAgICBjYXNlIFwiTm9kZVwiIC8qIE5PREUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnbm9kZSc7XHJcbiAgICAgICAgY2FzZSBcIlJlYWN0TmF0aXZlXCIgLyogUkVBQ1RfTkFUSVZFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3JuJztcclxuICAgICAgICBjYXNlIFwiV29ya2VyXCIgLyogV09SS0VSICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3dlYndvcmtlcic7XHJcbiAgICAgICAgY2FzZSBcIkNvcmRvdmFcIiAvKiBDT1JET1ZBICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2NvcmRvdmEnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckF1dGgoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiYXV0aFwiIC8qIEFVVEggKi8sIChjb250YWluZXIsIHsgb3B0aW9uczogZGVwcyB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCB7IGFwaUtleSwgYXV0aERvbWFpbiB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuIChhcHAgPT4ge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiAhYXBpS2V5LmluY2x1ZGVzKCc6JyksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovLCB7IGFwcE5hbWU6IGFwcC5uYW1lIH0pO1xyXG4gICAgICAgICAgICAvLyBBdXRoIGRvbWFpbiBpcyBvcHRpb25hbCBpZiBJZFAgc2lnbiBpbiBpc24ndCBiZWluZyB1c2VkXHJcbiAgICAgICAgICAgIF9hc3NlcnQoIShhdXRoRG9tYWluID09PSBudWxsIHx8IGF1dGhEb21haW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF1dGhEb21haW4uaW5jbHVkZXMoJzonKSksIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIGFwaUtleSxcclxuICAgICAgICAgICAgICAgIGF1dGhEb21haW4sXHJcbiAgICAgICAgICAgICAgICBjbGllbnRQbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgIGFwaUhvc3Q6IFwiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgICAgICB0b2tlbkFwaUhvc3Q6IFwic2VjdXJldG9rZW4uZ29vZ2xlYXBpcy5jb21cIiAvKiBUT0tFTl9BUElfSE9TVCAqLyxcclxuICAgICAgICAgICAgICAgIGFwaVNjaGVtZTogXCJodHRwc1wiIC8qIEFQSV9TQ0hFTUUgKi8sXHJcbiAgICAgICAgICAgICAgICBzZGtDbGllbnRWZXJzaW9uOiBfZ2V0Q2xpZW50VmVyc2lvbihjbGllbnRQbGF0Zm9ybSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgYXV0aEluc3RhbmNlID0gbmV3IEF1dGhJbXBsKGFwcCwgY29uZmlnKTtcclxuICAgICAgICAgICAgX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoYXV0aEluc3RhbmNlLCBkZXBzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGhJbnN0YW5jZTtcclxuICAgICAgICB9KShhcHApO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXV0aCBjYW4gb25seSBiZSBpbml0aWFsaXplZCBieSBleHBsaWNpdGx5IGNhbGxpbmcgZ2V0QXV0aCgpIG9yIGluaXRpYWxpemVBdXRoKClcclxuICAgICAgICAgKiBGb3Igd2h5IHdlIGRvIHRoaXMsIFNlZSBnby9maXJlYmFzZS1uZXh0LWF1dGgtaW5pdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmVjYXVzZSBhbGwgZmlyZWJhc2UgcHJvZHVjdHMgdGhhdCBkZXBlbmQgb24gYXV0aCBkZXBlbmQgb24gYXV0aC1pbnRlcm5hbCBkaXJlY3RseSxcclxuICAgICAgICAgKiB3ZSBuZWVkIHRvIGluaXRpYWxpemUgYXV0aC1pbnRlcm5hbCBhZnRlciBhdXRoIGlzIGluaXRpYWxpemVkIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIG90aGVyIGZpcmViYXNlIHByb2R1Y3RzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC5zZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjaygoY29udGFpbmVyLCBfaW5zdGFuY2VJZGVudGlmaWVyLCBfaW5zdGFuY2UpID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoSW50ZXJuYWxQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIiAvKiBBVVRIX0lOVEVSTkFMICovKTtcclxuICAgICAgICBhdXRoSW50ZXJuYWxQcm92aWRlci5pbml0aWFsaXplKCk7XHJcbiAgICB9KSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImF1dGgtaW50ZXJuYWxcIiAvKiBBVVRIX0lOVEVSTkFMICovLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBfY2FzdEF1dGgoY29udGFpbmVyLmdldFByb3ZpZGVyKFwiYXV0aFwiIC8qIEFVVEggKi8pLmdldEltbWVkaWF0ZSgpKTtcclxuICAgICAgICByZXR1cm4gKGF1dGggPT4gbmV3IEF1dGhJbnRlcm9wKGF1dGgpKShhdXRoKTtcclxuICAgIH0sIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pLnNldEluc3RhbnRpYXRpb25Nb2RlKFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLykpO1xyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIGdldFZlcnNpb25Gb3JQbGF0Zm9ybShjbGllbnRQbGF0Zm9ybSkpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAxNycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBBdXRoIGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9LlxyXG4gKiBJZiBubyBpbnN0YW5jZSBleGlzdHMsIGluaXRpYWxpemVzIGFuIEF1dGggaW5zdGFuY2Ugd2l0aCBwbGF0Zm9ybS1zcGVjaWZpYyBkZWZhdWx0IGRlcGVuZGVuY2llcy5cclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSBGaXJlYmFzZSBBcHAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEF1dGgoYXBwID0gZ2V0QXBwKCkpIHtcclxuICAgIGNvbnN0IHByb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgJ2F1dGgnKTtcclxuICAgIGlmIChwcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5pdGlhbGl6ZUF1dGgoYXBwLCB7XHJcbiAgICAgICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyLFxyXG4gICAgICAgIHBlcnNpc3RlbmNlOiBbXHJcbiAgICAgICAgICAgIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlXHJcbiAgICAgICAgXVxyXG4gICAgfSk7XHJcbn1cclxucmVnaXN0ZXJBdXRoKFwiQnJvd3NlclwiIC8qIEJST1dTRVIgKi8pO1xuXG5leHBvcnQgeyBzZW5kUGFzc3dvcmRSZXNldEVtYWlsIGFzICQsIEFjdGlvbkNvZGVPcGVyYXRpb24gYXMgQSwgcHJvZEVycm9yTWFwIGFzIEIsIEFVVEhfRVJST1JfQ09ERVNfTUFQX0RPX05PVF9VU0VfSU5URVJOQUxMWSBhcyBDLCBpbml0aWFsaXplQXV0aCBhcyBELCBjb25uZWN0QXV0aEVtdWxhdG9yIGFzIEUsIEZhY3RvcklkIGFzIEYsIEF1dGhDcmVkZW50aWFsIGFzIEcsIEVtYWlsQXV0aENyZWRlbnRpYWwgYXMgSCwgT0F1dGhDcmVkZW50aWFsIGFzIEksIFBob25lQXV0aENyZWRlbnRpYWwgYXMgSiwgaW5NZW1vcnlQZXJzaXN0ZW5jZSBhcyBLLCBFbWFpbEF1dGhQcm92aWRlciBhcyBMLCBGYWNlYm9va0F1dGhQcm92aWRlciBhcyBNLCBHb29nbGVBdXRoUHJvdmlkZXIgYXMgTiwgT3BlcmF0aW9uVHlwZSBhcyBPLCBQaG9uZUF1dGhQcm92aWRlciBhcyBQLCBHaXRodWJBdXRoUHJvdmlkZXIgYXMgUSwgUmVjYXB0Y2hhVmVyaWZpZXIgYXMgUiwgU2lnbkluTWV0aG9kIGFzIFMsIE9BdXRoUHJvdmlkZXIgYXMgVCwgU0FNTEF1dGhQcm92aWRlciBhcyBVLCBUd2l0dGVyQXV0aFByb3ZpZGVyIGFzIFYsIHNpZ25JbkFub255bW91c2x5IGFzIFcsIHNpZ25JbldpdGhDcmVkZW50aWFsIGFzIFgsIGxpbmtXaXRoQ3JlZGVudGlhbCBhcyBZLCByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsIGFzIFosIHNpZ25JbldpdGhDdXN0b21Ub2tlbiBhcyBfLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGFzIGEsIGNvbmZpcm1QYXNzd29yZFJlc2V0IGFzIGEwLCBhcHBseUFjdGlvbkNvZGUgYXMgYTEsIGNoZWNrQWN0aW9uQ29kZSBhcyBhMiwgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUgYXMgYTMsIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCBhcyBhNCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQgYXMgYTUsIHNlbmRTaWduSW5MaW5rVG9FbWFpbCBhcyBhNiwgaXNTaWduSW5XaXRoRW1haWxMaW5rIGFzIGE3LCBzaWduSW5XaXRoRW1haWxMaW5rIGFzIGE4LCBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbCBhcyBhOSwgX2dldFJlZGlyZWN0UmVzdWx0IGFzIGFBLCBfY2xlYXJSZWRpcmVjdE91dGNvbWVzIGFzIGFCLCBfY2FzdEF1dGggYXMgYUMsIFVzZXJJbXBsIGFzIGFELCBBdXRoSW1wbCBhcyBhRSwgX2dldENsaWVudFZlcnNpb24gYXMgYUYsIF9nZW5lcmF0ZUV2ZW50SWQgYXMgYUcsIEF1dGhQb3B1cCBhcyBhSCwgRmV0Y2hQcm92aWRlciBhcyBhSSwgU0FNTEF1dGhDcmVkZW50aWFsIGFzIGFKLCBzZW5kRW1haWxWZXJpZmljYXRpb24gYXMgYWEsIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsIGFzIGFiLCBBY3Rpb25Db2RlVVJMIGFzIGFjLCBwYXJzZUFjdGlvbkNvZGVVUkwgYXMgYWQsIHVwZGF0ZVByb2ZpbGUgYXMgYWUsIHVwZGF0ZUVtYWlsIGFzIGFmLCB1cGRhdGVQYXNzd29yZCBhcyBhZywgZ2V0SWRUb2tlbiBhcyBhaCwgZ2V0SWRUb2tlblJlc3VsdCBhcyBhaSwgdW5saW5rIGFzIGFqLCBnZXRBZGRpdGlvbmFsVXNlckluZm8gYXMgYWssIHJlbG9hZCBhcyBhbCwgZ2V0TXVsdGlGYWN0b3JSZXNvbHZlciBhcyBhbSwgbXVsdGlGYWN0b3IgYXMgYW4sIF9pc0lPUzdPcjggYXMgYW8sIGRlYnVnQXNzZXJ0IGFzIGFwLCBfaXNJT1MgYXMgYXEsIF9pc0FuZHJvaWQgYXMgYXIsIF9mYWlsIGFzIGFzLCBfZ2V0UmVkaXJlY3RVcmwgYXMgYXQsIF9nZXRQcm9qZWN0Q29uZmlnIGFzIGF1LCBfY3JlYXRlRXJyb3IgYXMgYXYsIF9hc3NlcnQgYXMgYXcsIF9nZXRJbnN0YW5jZSBhcyBheCwgX3BlcnNpc3RlbmNlS2V5TmFtZSBhcyBheSwgQXV0aEV2ZW50TWFuYWdlciBhcyBheiwgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgYXMgYiwgc2lnbkluV2l0aFBvcHVwIGFzIGMsIGxpbmtXaXRoUG9wdXAgYXMgZCwgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAgYXMgZSwgc2lnbkluV2l0aFJlZGlyZWN0IGFzIGYsIGxpbmtXaXRoUmVkaXJlY3QgYXMgZywgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QgYXMgaCwgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSBhcyBpLCBnZXRSZWRpcmVjdFJlc3VsdCBhcyBqLCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIGFzIGssIGxpbmtXaXRoUGhvbmVOdW1iZXIgYXMgbCwgUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvciBhcyBtLCBnZXRBdXRoIGFzIG4sIFByb3ZpZGVySWQgYXMgbywgc2V0UGVyc2lzdGVuY2UgYXMgcCwgb25JZFRva2VuQ2hhbmdlZCBhcyBxLCByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlciBhcyByLCBzaWduSW5XaXRoUGhvbmVOdW1iZXIgYXMgcywgb25BdXRoU3RhdGVDaGFuZ2VkIGFzIHQsIHVwZGF0ZVBob25lTnVtYmVyIGFzIHUsIHVzZURldmljZUxhbmd1YWdlIGFzIHYsIHVwZGF0ZUN1cnJlbnRVc2VyIGFzIHcsIHNpZ25PdXQgYXMgeCwgZGVsZXRlVXNlciBhcyB5LCBkZWJ1Z0Vycm9yTWFwIGFzIHogfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LTgzOWRlNTEwLmpzLm1hcFxuIiwiaW1wb3J0IHByb2ZpbGUgZnJvbSBcIi4uL2Fzc2V0cy91c2VyLnBuZ1wiO1xyXG5cclxuZnVuY3Rpb24gYWRkSGVhZGVyRXZlbnRzKCkge1xyXG5cdGNvbnN0IGhhbWJ1cmdlckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGFtYnVyZ2VyXCIpO1xyXG5cdGNvbnN0IHByb2ZpbGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9faW1hZ2VcIik7XHJcbiAgICBjb25zdCB1cGxvYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltZ1VwbG9hZFwiKTtcclxuICAgIGFkZFByb2ZpbGVQbGFjZWhvbGRlcihwcm9maWxlQ29udGFpbmVyKTtcclxuXHJcblx0aGFtYnVyZ2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG5cdHVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHJlYWRVcmwpO1xyXG5cdHByb2ZpbGVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVwbG9hZFBpYyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFVzZXJOYW1lKG5hbWUpIHtcclxuXHRjb25zb2xlLmxvZyhuYW1lKTtcclxuXHRjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX191c2VybmFtZVwiKTtcclxuXHR1c2VybmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFByb2ZpbGVQbGFjZWhvbGRlcihwcm9maWxlQ29udGFpbmVyKSB7XHJcbiAgICBwcm9maWxlQ29udGFpbmVyLmNoaWxkcmVuWzBdLnNyYyA9IHByb2ZpbGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlU2lkZWJhcigpIHtcclxuXHRjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyXCIpO1xyXG5cdGlmICghc2lkZWJhci5jbGFzc0xpc3QuY29udGFpbnMoXCJoaWRlXCIpKSB7XHJcblx0XHRzaWRlYmFyLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdHNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGxvYWRQaWMoKSB7XHJcblx0Y29uc3QgaGVhZGVyVXBsb2FkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX3VwbG9hZFwiKTtcclxuXHRoZWFkZXJVcGxvYWQuY2xhc3NMaXN0LnRvZ2dsZShcInZpc2libGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRVcmwoKSB7XHJcblx0Y29uc3QgcHJvZmlsZVBpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZVwiKTtcclxuXHRjb25zdCBwcm9maWxlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2ltYWdlXCIpO1xyXG5cdGlmICh0aGlzLmZpbGVzKSB7XHJcblx0XHRjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1swXSk7XHJcblx0XHRyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG5cdFx0XHRwcm9maWxlUGljLnNyYyA9IHJlYWRlci5yZXN1bHQ7XHJcblx0XHRcdGNvbnNvbGUubG9nKHByb2ZpbGVQaWMuc3JjKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRwcm9maWxlQ29udGFpbmVyLmNsaWNrKCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGFkZEhlYWRlckV2ZW50cywgYWRkVXNlck5hbWUsIGNsb3NlU2lkZWJhciB9O1xyXG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50V2l0aENsYXNzIH0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNpZ25PdXQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBvbkF1dGhTdGF0ZUNoYW5nZWQsIHVwZGF0ZVByb2ZpbGUgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uXCI7XHJcbmltcG9ydCB7IGFkZFVzZXJOYW1lIH0gZnJvbSBcIi4vaGVhZGVyXCI7XHJcbmltcG9ydCB7IGdldEFsbERhdGEgfSBmcm9tIFwiLi90b2RvXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIHNob3dMb2dpbigpIHtcclxuICAvL2NsZWFyVUkoKTtcclxuICBhZGRMb2dpblNjcmVlbigpO1xyXG4gIGNvbnN0IGxvZ2luQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcImxvZ2luX19jb250YWluZXJcIik7XHJcbiAgXHJcbiAgbG9naW5Db250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtX19jb250YWluZXJcIj5cclxuICAgIDxmb3JtIGFjdGlvbj1cIlwiIGNsYXNzPVwiZm9ybVwiPlxyXG4gICAgPGgyIGNsYXNzPVwibG9naW5fX3RpdGxlXCI+PGkgY2xhc3M9XCJmYXMgZmEtYnVzaW5lc3MtdGltZVwiPiBQcm9kdWN0aXY8L2k+PC9oMj5cclxuICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX3dyYXBwZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fc2lnbnVwIFwiPlNpZ24gVXA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fbG9naW5cIj5Mb2dpbjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtX19jb3ZlclwiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImZvcm0yXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX3NlY3Rpb24gc2lnbnVwXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX2dyb3VwXCI+XHJcbiAgICAgICAgICA8aW5wdXQgaWQ9XCJzaWdudXBfX2VtYWlsXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm1fX2xhYmVsXCIgZm9yPVwiZW1haWxcIj5FbWFpbDwvbGFiZWw+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX2dyb3VwXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cInNpZ251cF9fcGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fbGFiZWxcIiBmb3I9XCJwYXNzd29yZFwiPlBhc3N3b3JkPC9sYWJlbD5cclxuICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm1fX2dyb3VwXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cInVzZXJuYW1lXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fbGFiZWxcIiBmb3I9XCJ1c2VybmFtZVwiPlVzZXJuYW1lPC9sYWJlbD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBpZD1cInNpZ251cFwiIGNsYXNzPVwiZm9ybV9fYnV0dG9uXCI+U2lnbi1VcDwvYnV0dG9uPlxyXG4gICAgICAgIFxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtX19zZWN0aW9uIGxvZ2luIGhpZGVcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybV9fZ3JvdXBcIj5cclxuICAgICAgICAgIDxpbnB1dCBpZD1cImxvZ2luX19lbWFpbFwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtX19pbnB1dFwiIHBsYWNlaG9sZGVyPVwiXCI+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19sYWJlbFwiIGZvcj1cImVtYWlsXCI+RW1haWw8L2xhYmVsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtX19ncm91cFwiPlxyXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCJsb2dpbl9fcGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fbGFiZWxcIiBmb3I9XCJwYXNzd29yZFwiPlBhc3N3b3JkPC9sYWJlbD5cclxuICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgaWQ9XCJsb2dpblwiIGNsYXNzPVwiZm9ybV9fYnV0dG9uXCI+TG9naW48L2J1dHRvbj5cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBpZD1cImRlbW9cIiBjbGFzcz1cImZvcm1fX2J1dHRvblwiPkxvZ2luIEFzIERlbW8gVXNlcjwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9mb3JtPlxyXG4gIDwvZGl2PlxyXG4gICAgYDtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQobG9naW5Db250YWluZXIpO1xyXG4gIGFkZEF1dGhFdmVudHMoKTtcclxuICAgIHJldHVybiBjb250YWluZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExvZ2luU2NyZWVuKCkge1xyXG4gIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJcIik7XHJcbiAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRfX2J1dHRvblwiKTtcclxuICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICBhZGRCdG4uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVMb2dpbigpIHtcclxuICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyXCIpO1xyXG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyXCIpO1xyXG4gIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkX19idXR0b25cIik7XHJcbiAgc2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgYWRkQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRBdXRoRXZlbnRzKCkge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIGNvbnN0IHNpZ251cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc2lnbnVwXCIpO1xyXG4gICAgY29uc3QgbG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2xvZ2luXCIpO1xyXG4gICAgY29uc3QgY292ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2NvdmVyXCIpO1xyXG4gICAgY29uc3Qgc2lnbnVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lnbnVwXCIpO1xyXG4gICAgY29uc3QgbG9naW5Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2dpblwiKTtcclxuICAgIGNvbnN0IGxvZ2luQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpblwiKTtcclxuICAgIGNvbnN0IHNpZ251cEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lnbnVwXCIpO1xyXG4gICAgY29uc3QgbG9nb3V0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dvdXRcIik7XHJcbiAgICBjb25zdCBsb2dpblNjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9naW5fX2NvbnRhaW5lclwiKTtcclxuICBjb25zdCBzaWRlYmFyTG9nb3V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlYmFyX19sb2dvdXRcIik7XHJcbiAgY29uc3QgZGVtbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVtb1wiKTtcclxuICAgIGxldCBsb2dnZWRJbjtcclxuXHJcbiAgICBsZXQgYWN0aXZlID0gXCJzaWdudXBcIjtcclxuXHJcbiAgICBpZiAobG9nZ2VkSW4pIHtcclxuICAgICAgICAvL2xvZ2luU2NyZWVuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEFjdGl2ZUxvZ2luKCkge1xyXG4gICAgICAvLyBsb2dpbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAvLyBzaWdudXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgY29uc29sZS5sb2coXCJsb2dpbiBjbGlja2VkXCIpO1xyXG4gICAgICBjb3Zlci5jbGFzc0xpc3QuYWRkKFwibW92ZVJpZ2h0XCIpO1xyXG4gICAgICBjb3Zlci5jbGFzc0xpc3QucmVtb3ZlKFwibW92ZUxlZnRcIik7XHJcbiAgICAgIGxvZ2luRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgc2lnbnVwRm9ybS5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgICAgYWN0aXZlID0gXCJsb2dpblwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEFjdGl2ZVNpZ251cCgpIHtcclxuICAgICAgLy8gc2lnbnVwLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgIC8vIGxvZ2luLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwic2lnbnVwIGNsaWNrZWRcIik7XHJcbiAgICAgIGNvdmVyLmNsYXNzTGlzdC5hZGQoXCJtb3ZlTGVmdFwiKTtcclxuICAgICAgY292ZXIuY2xhc3NMaXN0LnJlbW92ZShcIm1vdmVSaWdodFwiKTtcclxuICAgICAgc2lnbnVwRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgbG9naW5Gb3JtLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgICBhY3RpdmUgPSBcInNpZ251cFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvZ2luVXNlcihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vZm9ybSB2YWxpZGF0aW9uXHJcbiAgICAgICAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ2luX19lbWFpbFwiKS52YWx1ZTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW5fX3Bhc3N3b3JkXCIpLnZhbHVlO1xyXG4gICAgICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZClcclxuICAgICAgICAgICAgLnRoZW4oKGNyZWQpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgbG9nZ2VkIGluXCIsIGNyZWQudXNlci5kaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgICAgYWRkVXNlck5hbWUoY3JlZC51c2VyLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICBpZiAoY3JlZC51c2VyLnBob3RvVVJMKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9maWxlUGljID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgcHJvZmlsZVBpYy5zcmMgPSBjcmVkLnVzZXIucGhvdG9VUkw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGhpZGVMb2dpbigpO1xyXG4gICAgICAgICAgICAgIGNsZWFyVUkoKTtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbG9nb3V0VXNlcigpIHtcclxuICAgICAgICBzaWduT3V0KGF1dGgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIHNpZ25lZCBvdXRcIik7XHJcbiAgICAgICAgICBzaG93TG9naW4oKTtcclxuICAgICAgICAgIGZvcm0ucmVzZXQoKTtcclxuICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vbWFrZSBsb2dpbiBzY3JlZW4gc2hvdyBhZ2FpblxyXG4gICAgICBcclxuICB9XHJcbiAgXHJcblxyXG4gICAgZnVuY3Rpb24gc2lnbnVwVXNlcihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdDtcclxuICAgICAgICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lnbnVwX19lbWFpbFwiKS52YWx1ZTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lnbnVwX19wYXNzd29yZFwiKS52YWx1ZTtcclxuICAgICAgY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJuYW1lXCIpLnZhbHVlO1xyXG4gICAgICBjb25zb2xlLmxvZyh1c2VybmFtZSk7XHJcbiAgICAgICAgLy9mb3JtIHZhbGlkYXRpb25cclxuICAgICAgICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKVxyXG4gICAgICAgICAgLnRoZW4oKGNyZWQpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY3JlZC51c2VyKTtcclxuICAgICAgICAgICAgdXBkYXRlUHJvZmlsZShhdXRoLmN1cnJlbnRVc2VyLCB7IGRpc3BsYXlOYW1lOiB1c2VybmFtZSB9KTtcclxuICAgICAgICAgICAgYWRkVXNlck5hbWUodXNlcm5hbWUpO1xyXG4gICAgICAgICAgICBoaWRlTG9naW4oKTtcclxuICAgICAgICAgICAgLy9kb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkRGVtb0NyZWRlbnRpYWxzKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpbl9fZW1haWxcIik7XHJcbiAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW5fX3Bhc3N3b3JkXCIpO1xyXG4gICAvLyBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlcm5hbWVcIik7XHJcbiAgICBlbWFpbC52YWx1ZSA9IFwiZGVtb0BlbWFpbC5jb21cIjtcclxuICAgIHBhc3N3b3JkLnZhbHVlID0gXCJkZW1vMTIzNFwiO1xyXG4gICAgLy91c2VybmFtZS52YWx1ZSA9IFwiZGVtbzEyMzRcIjtcclxuICB9XHJcbiAgXHJcblxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsICh1c2VyKSA9PiB7XHJcbiAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICAgICAgYWRkVXNlck5hbWUodXNlci5kaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgaGlkZUxvZ2luKCk7XHJcbiAgICAgICAgY2xlYXJVSSgpO1xyXG4gICAgICAgICAgICAvL2xvZ2luU2NyZWVuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5XCIpO1xyXG4gICAgICAgICAgLy9sb2dpblNjcmVlbi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgICAgICAgIGdldEFsbERhdGEodXNlci5kaXNwbGF5TmFtZSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gZWxzZSB7XHJcbiAgICAgIC8vICAgbG9nb3V0VXNlcigpO1xyXG4gICAgICAvLyB9XHJcbiAgICB9KVxyXG5cclxuICAgIGxvZ2luLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhZGRBY3RpdmVMb2dpbik7XHJcbiAgICBzaWdudXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZEFjdGl2ZVNpZ251cCk7XHJcbiAgICBsb2dpbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbG9naW5Vc2VyKTtcclxuICAgIHNpZ251cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2lnbnVwVXNlcik7XHJcbiAgICBsb2dvdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxvZ291dFVzZXIpO1xyXG4gIHNpZGViYXJMb2dvdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxvZ291dFVzZXIpO1xyXG4gIGRlbW8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZERlbW9DcmVkZW50aWFscyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFVzZXJuYW1lKCkge1xyXG4gIGNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX3VzZXJuYW1lXCIpLnRleHRDb250ZW50O1xyXG4gIHJldHVybiB1c2VybmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJVSSgpIHtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuICBjb25zdCBjaGlsZHJlbiA9IFsuLi5jb250YWluZXIuY2hpbGRyZW5dO1xyXG4gIGNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICBjaGlsZC5yZW1vdmUoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybVZhbGlkYXRpb24oYWN0aXZlKSB7XHJcbiAgICAvL2lmIGFjdGl2ZSBpcyBsb2dpblxyXG4gICAgLy9pZiBhY3RpdmUgaXMgc2lnbnVwXHJcbn1cclxuXHJcbmV4cG9ydCB7IHNob3dMb2dpbiwgYWRkQXV0aEV2ZW50cywgZ2V0VXNlcm5hbWUgfTsiLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYSgpe31mdW5jdGlvbiBiYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZWEpJiZhW2VhXXx8KGFbZWFdPSsrZmEpfXZhciBlYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGZhPTA7ZnVuY3Rpb24gaGEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBpYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9aGE6cT1pYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBqYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiB0KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLlo9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLlZiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGthPTAsbGE9e307di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5uYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5NKCksMCE9a2EpKXt2YXIgYT1kYSh0aGlzKTtkZWxldGUgbGFbYV07fX07di5wcm90b3R5cGUuTT1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbmE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2NvbnN0IGQ9YS5sZW5ndGgsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG9hKGEpe2E6e3ZhciBiPXBhO2NvbnN0IGM9YS5sZW5ndGgsZD1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHNhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgdGE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHcoYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiB1YShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgeDthOnt2YXIgdmE9bC5uYXZpZ2F0b3I7aWYodmEpe3ZhciB3YT12YS51c2VyQWdlbnQ7aWYod2Epe3g9d2E7YnJlYWsgYX19eD1cIlwiO31mdW5jdGlvbiB4YShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHlhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHphPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIEFhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHphLmxlbmd0aDtmKyspYz16YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBDYShhKXtDYVtcIiBcIl0oYSk7cmV0dXJuIGF9Q2FbXCIgXCJdPWFhO2Z1bmN0aW9uIEZhKGEpe3ZhciBiPUdhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiw5KT9iWzldOmJbOV09YSg5KX12YXIgSGE9dyh4LFwiT3BlcmFcIikseT13KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpLElhPXcoeCxcIkVkZ2VcIiksSmE9SWF8fHksS2E9dyh4LFwiR2Vja29cIikmJiEodyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpKSYmISh3KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpKSYmIXcoeCxcIkVkZ2VcIiksTGE9dyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpO2Z1bmN0aW9uIE1hKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIE5hO1xuYTp7dmFyIE9hPVwiXCIsUGE9ZnVuY3Rpb24oKXt2YXIgYT14O2lmKEthKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoSWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKExhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKEhhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO1BhJiYoT2E9UGE/UGFbMV06XCJcIik7aWYoeSl7dmFyIFFhPU1hKCk7aWYobnVsbCE9UWEmJlFhPnBhcnNlRmxvYXQoT2EpKXtOYT1TdHJpbmcoUWEpO2JyZWFrIGF9fU5hPU9hO312YXIgR2E9e307XG5mdW5jdGlvbiBSYSgpe3JldHVybiBGYShmdW5jdGlvbigpe2xldCBhPTA7Y29uc3QgYj10YShTdHJpbmcoTmEpKS5zcGxpdChcIi5cIiksYz10YShcIjlcIikuc3BsaXQoXCIuXCIpLGQ9TWF0aC5tYXgoYi5sZW5ndGgsYy5sZW5ndGgpO2ZvcihsZXQgaD0wOzA9PWEmJmg8ZDtoKyspe3ZhciBlPWJbaF18fFwiXCIsZj1jW2hdfHxcIlwiO2Rve2U9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtmPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGYpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09ZVswXS5sZW5ndGgmJjA9PWZbMF0ubGVuZ3RoKWJyZWFrO2E9dWEoMD09ZVsxXS5sZW5ndGg/MDpwYXJzZUludChlWzFdLDEwKSwwPT1mWzFdLmxlbmd0aD8wOnBhcnNlSW50KGZbMV0sMTApKXx8dWEoMD09ZVsyXS5sZW5ndGgsMD09ZlsyXS5sZW5ndGgpfHx1YShlWzJdLGZbMl0pO2U9ZVszXTtmPWZbM107fXdoaWxlKDA9PWEpfXJldHVybiAwPD1hfSl9dmFyIFNhO1xuaWYobC5kb2N1bWVudCYmeSl7dmFyIFRhPU1hKCk7U2E9VGE/VGE6cGFyc2VJbnQoTmEsMTApfHx2b2lkIDA7fWVsc2UgU2E9dm9pZCAwO3ZhciBVYT1TYTt2YXIgVmE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB6KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO316LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307ZnVuY3Rpb24gQShhLGIpe3ouY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihLYSl7YTp7dHJ5e0NhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpXYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLlouaC5jYWxsKHRoaXMpO319dChBLHopO3ZhciBXYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS5aLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBCPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgWGE9MDtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaWE9ZTt0aGlzLmtleT0rK1hhO3RoaXMuY2E9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gWmEoYSl7YS5jYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5pYT1udWxsO31mdW5jdGlvbiAkYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9JGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPWFiKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBZYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBiYihhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9bWEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihaYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBhYihhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5jYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaWE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBjYj1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLGRiPXt9O2Z1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBnYihhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1oYihjKTtyZXR1cm4gYSYmYVtCXT9hLk4oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmliKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1qYihhKTtufHwoYVtjYl09bj1uZXcgJGEoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9a2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVZhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGxiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBrYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfXZhciBiPW1iO3JldHVybiBhfWZ1bmN0aW9uIGdiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZ2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyluYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz1oYihjKSxhJiZhW0JdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9YWIoZixjLGQsZSksLTE8YyYmKFphKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1qYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9YWIoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmb2IoYykpO31cbmZ1bmN0aW9uIG9iKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuY2Epe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pYmIoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQobGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1qYihiKSk/KGJiKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW2NiXT1udWxsKSk6WmEoYSk7fX19ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEgaW4gZGI/ZGJbYV06ZGJbYV09XCJvblwiK2F9ZnVuY3Rpb24gbWIoYSxiKXtpZihhLmNhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmlhfHxhLnNyYzthLmZhJiZvYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGpiKGEpe2E9YVtjYl07cmV0dXJuIGEgaW5zdGFuY2VvZiAkYT9hOm51bGx9dmFyIHBiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBoYihhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW3BiXXx8KGFbcGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbcGJdfWZ1bmN0aW9uIEMoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyAkYSh0aGlzKTt0aGlzLlA9dGhpczt0aGlzLkk9bnVsbDt9dChDLHYpO0MucHJvdG90eXBlW0JdPSEwO0MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7bmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gRChhLGIpe3ZhciBjLGQ9YS5JO2lmKGQpZm9yKGM9W107ZDtkPWQuSSljLnB1c2goZCk7YT1hLlA7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHooYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB6KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgeihkLGEpO0FhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1xYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1xYihoLGQsITAsYikmJmU7ZT1xYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1xYihoLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0MuWi5NLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkk9bnVsbDt9O0MucHJvdG90eXBlLk49ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qy5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIHFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguY2EmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix1PWguaWF8fGguc3JjO2guZmEmJmJiKGEuaSxoKTtlPSExIT09bi5jYWxsKHUsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgcmI9bC5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBzYigpe3ZhciBhPXRiO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgdWJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9dmIuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciB2Yj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fSgoKT0+bmV3IHdiLGE9PmEucmVzZXQoKSk7XG5jbGFzcyB3Yntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiB5YihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHpiKGEsYil7QWJ8fEJiKCk7Q2J8fChBYigpLENiPSEwKTt0Yi5hZGQoYSxiKTt9dmFyIEFiO2Z1bmN0aW9uIEJiKCl7dmFyIGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtBYj1mdW5jdGlvbigpe2EudGhlbihEYik7fTt9dmFyIENiPSExLHRiPW5ldyB1YjtmdW5jdGlvbiBEYigpe2Zvcih2YXIgYTthPXNiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7eWIoYyk7fXZhciBiPXZiO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fUNiPSExO31mdW5jdGlvbiBFYihhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLmtiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO310KEViLEMpO2s9RWIucHJvdG90eXBlO2suZGE9ITE7ay5TPW51bGw7ay5rYj1mdW5jdGlvbigpe2lmKHRoaXMuZGEpe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuUyYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSx0aGlzLlM9bnVsbCksRCh0aGlzLFwidGlja1wiKSx0aGlzLmRhJiYoRmIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZGE9ITA7dGhpcy5TfHwodGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24gRmIoYSl7YS5kYT0hMTthLlMmJihhLmcuY2xlYXJUaW1lb3V0KGEuUyksYS5TPW51bGwpO31rLk09ZnVuY3Rpb24oKXtFYi5aLk0uY2FsbCh0aGlzKTtGYih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24gR2IoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBIYihhKXthLmc9R2IoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsSGIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgSWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOkhiKHRoaXMpO31NKCl7c3VwZXIuTSgpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEUoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9dChFLHYpO3ZhciBKYj1bXTtmdW5jdGlvbiBLYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEpiWzBdPWMudG9TdHJpbmcoKSksYz1KYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWZiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gTGIoYSl7eGEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZvYihiKTt9LGEpO2EuZz17fTt9RS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0UuWi5NLmNhbGwodGhpcyk7TGIodGhpcyk7fTtFLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIE1iKCl7dGhpcy5nPSEwO31NYi5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHU9MDt1PG4ubGVuZ3RoO3UrKyl7dmFyIG09blt1XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHI9bVswXTttPW1bMV07dmFyIEc9ci5zcGxpdChcIl9cIik7aD0yPD1HLmxlbmd0aCYmXCJ0eXBlXCI9PUdbMV0/aCsocitcIj1cIittK1wiJlwiKTpoKyhyK1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIE9iKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBGKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK1BiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBRYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9TWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gUGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIHJiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgSD17fSxSYj1udWxsO2Z1bmN0aW9uIFNiKCl7cmV0dXJuIFJiPVJifHxuZXcgQ31ILk1hPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gVGIoYSl7ei5jYWxsKHRoaXMsSC5NYSxhKTt9dChUYix6KTtmdW5jdGlvbiBJKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFRiKGIsYSkpO31ILlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBVYihhLGIpe3ouY2FsbCh0aGlzLEguU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9dChVYix6KTtmdW5jdGlvbiBKKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFViKGIsYSkpO31ILk5hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBWYihhLGIpe3ouY2FsbCh0aGlzLEguTmEsYSk7dGhpcy5zaXplPWI7fXQoVmIseik7XG5mdW5jdGlvbiBLKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBXYj17Tk9fRVJST1I6MCxsYjoxLHliOjIseGI6MyxzYjo0LHdiOjUsemI6NixKYTo3LFRJTUVPVVQ6OCxDYjo5fTt2YXIgWGI9e3FiOlwiY29tcGxldGVcIixNYjpcInN1Y2Nlc3NcIixLYTpcImVycm9yXCIsSmE6XCJhYm9ydFwiLEViOlwicmVhZHlcIixGYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEFiOlwiaW5jcmVtZW50YWxkYXRhXCIsRGI6XCJwcm9ncmVzc1wiLHRiOlwiZG93bmxvYWRwcm9ncmVzc1wiLFViOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWWIoKXt9WWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBaYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiAkYigpe312YXIgTD17T1BFTjpcImFcIixwYjpcImJcIixLYTpcImNcIixCYjpcImRcIn07ZnVuY3Rpb24gYWMoKXt6LmNhbGwodGhpcyxcImRcIik7fXQoYWMseik7ZnVuY3Rpb24gYmMoKXt6LmNhbGwodGhpcyxcImNcIik7fXQoYmMseik7dmFyIGNjO2Z1bmN0aW9uIGRjKCl7fXQoZGMsWWIpO2RjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07ZGMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319O2NjPW5ldyBkYztmdW5jdGlvbiBNKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuWD1kfHwxO3RoaXMuVj1uZXcgRSh0aGlzKTt0aGlzLlA9ZWM7YT1KYT8xMjU6dm9pZCAwO3RoaXMuVz1uZXcgRWIoYSk7dGhpcy5IPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuSz10aGlzLkY9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRD1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5OPS0xO3RoaXMuST0hMTt0aGlzLk89MDt0aGlzLkw9bnVsbDt0aGlzLmFhPXRoaXMuSj10aGlzLiQ9dGhpcy5VPSExO3RoaXMuaD1uZXcgZmM7fWZ1bmN0aW9uIGZjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgZWM9NDVFMyxnYz17fSxoYz17fTtrPU0ucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuSz0xO2Eudj1qYyhOKGIpKTthLnM9YzthLlU9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkY9RGF0ZS5ub3coKTtsYyhhKTthLkE9TihhLnYpO3ZhciBjPWEuQSxkPWEuWDtBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5oLFwidFwiLGQpO2EuQz0wO2M9YS5sLkg7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5MPW5ldyBJYihxKGEuSWEsYSxhLmcpLGEuTykpO0tiKGEuVixhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5nYik7Yj1hLkg/eWEoYS5IKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5lYShhLkEsYS51LG51bGwsYikpO0koMSk7TmIoYS5qLGEudSxhLkEsYS5tLGEuWCxhLnMpO31cbmsuZ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTDtiJiYzPT1PKGEpP2IubCgpOnRoaXMuSWEoYSk7fTtcbmsuSWE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCByPU8odGhpcy5nKTt2YXIgYj10aGlzLmcuRGEoKTtjb25zdCBHPXRoaXMuZy5iYSgpO2lmKCEoMz5yKSYmKDMhPXJ8fEphfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmdhKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5JfHw0IT1yfHw3PT1ifHwoOD09Ynx8MD49Rz9JKDMpOkkoMikpO3BjKHRoaXMpO3ZhciBjPXRoaXMuZy5iYSgpO3RoaXMuTj1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09Tyh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7UCh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmdhKCk7dGhpcy5pPTIwMD09YztPYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5YLHIsYyk7aWYodGhpcy5pKXtpZih0aGlzLiQmJiF0aGlzLkope2I6e2lmKHRoaXMuZyl7dmFyIG4sdT10aGlzLmc7aWYoKG49dS5nP3UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYhc2Eobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRih0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5KPSEwLHNjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0ooMTIpO1AodGhpcyk7cmModGhpcyk7YnJlYWsgYX19dGhpcy5VPyh0Yyh0aGlzLHIsaCksSmEmJnRoaXMuaSYmMz09ciYmKEtiKHRoaXMuVix0aGlzLlcsXCJ0aWNrXCIsdGhpcy5mYiksXG50aGlzLlcuc3RhcnQoKSkpOihGKHRoaXMuaix0aGlzLm0saCxudWxsKSxzYyh0aGlzLGgpKTs0PT1yJiZQKHRoaXMpO3RoaXMuaSYmIXRoaXMuSSYmKDQ9PXI/dWModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsbGModGhpcykpKTt9ZWxzZSA0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEooMTIpKToodGhpcy5vPTAsSigxMykpLFAodGhpcykscmModGhpcyk7fX19Y2F0Y2gocil7fWZpbmFsbHl7fX07ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuSyYmYS5sLkJhOiExfVxuZnVuY3Rpb24gdGMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5JJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dmMoYSxjKSxlPT1oYyl7ND09YiYmKGEubz00LEooMTQpLGQ9ITEpO0YoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09Z2Mpe2Eubz00O0ooMTUpO0YoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBGKGEuaixhLm0sZSxudWxsKSxzYyhhLGUpO3FjKGEpJiZlIT1oYyYmZSE9Z2MmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxKKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYWEmJihhLmFhPSEwLGI9YS5sLGIuZz09YSYmYi4kJiYhYi5MJiYoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHdjKGIpLGIuTD0hMCxKKDExKSkpOihGKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksUChhKSxyYyhhKSk7fWsuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPU8odGhpcy5nKSxiPXRoaXMuZy5nYSgpO3RoaXMuQzxiLmxlbmd0aCYmKHBjKHRoaXMpLHRjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmxjKHRoaXMpKTt9fTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBoYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZ2M7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGhjO2I9Yi5zdWJzdHIoZCxjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5JPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBsYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7eGMoYSxhLlApO31cbmZ1bmN0aW9uIHhjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPUsocShhLmViLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5lYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oUWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5LJiYoSSgzKSxKKDE3KSksUCh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuR3x8YS5JfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIFAoYSl7cGMoYSk7dmFyIGI9YS5MO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubmEmJmIubmEoKTthLkw9bnVsbDtGYihhLlcpO0xiKGEuVik7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIubmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuRyYmKGMuZz09YXx8eWMoYy5pLGEpKSlpZihjLkk9YS5OLCFhLkomJnljKGMuaSxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5DYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpemMoYyksQWMoYyk7ZWxzZSBicmVhayBhO0JjKGMpO0ooMTgpO319ZWxzZSBjLnRhPWVbMV0sMDxjLnRhLWMuVSYmMzc1MDA+ZVsyXSYmYy5OJiYwPT1jLkEmJiFjLnYmJihjLnY9SyhxKGMuYWIsYyksNkUzKSk7aWYoMT49Q2MoYy5pKSYmYy5rYSl7dHJ5e2Mua2EoKTt9Y2F0Y2gobSl7fWMua2E9dm9pZCAwO319ZWxzZSBRKGMsMTEpO31lbHNlIGlmKChhLkp8fGMuZz09YSkmJnpjKGMpLCFzYShiKSlmb3IoZT1jLkNhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO1xuYy5VPW1bMF07bT1tWzFdO2lmKDI9PWMuRylpZihcImNcIj09bVswXSl7Yy5KPW1bMV07Yy5sYT1tWzJdO2NvbnN0IHI9bVszXTtudWxsIT1yJiYoYy5tYT1yLGMuaC5pbmZvKFwiVkVSPVwiK2MubWEpKTtjb25zdCBHPW1bNF07bnVsbCE9RyYmKGMuemE9RyxjLmguaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IERhPW1bNV07bnVsbCE9RGEmJlwibnVtYmVyXCI9PT10eXBlb2YgRGEmJjA8RGEmJihkPTEuNSpEYSxjLks9ZCxjLmguaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBjYT1hLmc7aWYoY2Epe2NvbnN0IEVhPWNhLmc/Y2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihFYSl7dmFyIGY9ZC5pOyFmLmcmJih3KEVhLFwic3BkeVwiKXx8dyhFYSxcInF1aWNcIil8fHcoRWEsXCJoMlwiKSkmJihmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKERjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IHhiPVxuY2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDt4YiYmKGQuc2E9eGIsUihkLkYsZC5ELHhiKSk7fX1jLkc9MztjLmomJmMuai54YSgpO2MuJCYmKGMuTz1EYXRlLm5vdygpLWEuRixjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuTytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLm9hPUVjKGQsZC5IP2QubGE6bnVsbCxkLlcpO2lmKGguSil7RmMoZC5pLGgpO3ZhciBuPWgsdT1kLks7dSYmbi5zZXRUaW1lb3V0KHUpO24uQiYmKHBjKG4pLGxjKG4pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMubC5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fFEoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/UShjLDcpOkljKGMpOlwibm9vcFwiIT1tWzBdJiZjLmomJmMuai53YShtKSxjLkE9MCk7fUkoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSmMoYSl7aWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpcmV0dXJuIGEuUigpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihiYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKW5hKGEsYix2b2lkIDApO2Vsc2Uge2lmKGEuVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5UKXZhciBjPWEuVCgpO2Vsc2UgaWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpYz12b2lkIDA7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPUpjKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmg9e307dGhpcy5nPVtdO3RoaXMuaT0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFMpZm9yKGM9YS5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31rPVMucHJvdG90eXBlO2suUj1mdW5jdGlvbigpe0xjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmcubGVuZ3RoO2IrKylhLnB1c2godGhpcy5oW3RoaXMuZ1tiXV0pO3JldHVybiBhfTtrLlQ9ZnVuY3Rpb24oKXtMYyh0aGlzKTtyZXR1cm4gdGhpcy5nLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIExjKGEpe2lmKGEuaSE9YS5nLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5nLmxlbmd0aDspe3ZhciBkPWEuZ1tiXTtUKGEuaCxkKSYmKGEuZ1tjKytdPWQpO2IrKzt9YS5nLmxlbmd0aD1jO31pZihhLmkhPWEuZy5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuZy5sZW5ndGg7KWQ9YS5nW2JdLFQoZSxkKXx8KGEuZ1tjKytdPWQsZVtkXT0xKSxiKys7YS5nLmxlbmd0aD1jO319ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLmgsYSk/dGhpcy5oW2FdOmJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7VCh0aGlzLmgsYSl8fCh0aGlzLmkrKyx0aGlzLmcucHVzaChhKSk7dGhpcy5oW2FdPWI7fTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O1xuZnVuY3Rpb24gVChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgTWM9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gVShhLGIpe3RoaXMuaT10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuZz0hMTtpZihhIGluc3RhbmNlb2YgVSl7dGhpcy5nPXZvaWQgMCE9PWI/YjphLmc7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7UGModGhpcyxhLmkpO1FjKHRoaXMsYS5tKTt0aGlzLmw9YS5sO2I9YS5oO3ZhciBjPW5ldyBSYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgUyhiLmcpLGMuaD1iLmgpO1NjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5nPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1UYyhjWzJdfHxcIlwiKSxQYyh0aGlzLGNbM118fFwiXCIsITApLFFjKHRoaXMsY1s0XSksdGhpcy5sPVRjKGNbNV18fFwiXCIsITApLFNjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5vPVRjKGNbN118fFwiXCIpKToodGhpcy5nPSEhYix0aGlzLmg9bmV3IFJjKG51bGwsdGhpcy5nKSk7fVxuVS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goVWMoYixWYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuaTtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goVWMoYixWYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuaSYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChVYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9XYzpYYywhMCkpOyhjPXRoaXMuaC50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixVYyhjLFljKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFUoYSl9XG5mdW5jdGlvbiBPYyhhLGIsYyl7YS5qPWM/VGMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIFBjKGEsYixjKXthLmk9Yz9UYyhiLCEwKTpiO31mdW5jdGlvbiBRYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFNjKGEsYixjKXtiIGluc3RhbmNlb2YgUmM/KGEuaD1iLFpjKGEuaCxhLmcpKTooY3x8KGI9VWMoYiwkYykpLGEuaD1uZXcgUmMoYixhLmcpKTt9ZnVuY3Rpb24gUihhLGIsYyl7YS5oLnNldChiLGMpO31mdW5jdGlvbiBqYyhhKXtSKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBhZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFU/TihhKTpuZXcgVShhLHZvaWQgMCl9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9bmV3IFUobnVsbCx2b2lkIDApO2EmJk9jKGUsYSk7YiYmUGMoZSxiKTtjJiZRYyhlLGMpO2QmJihlLmw9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFVjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsY2QpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIGNkKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9XG52YXIgVmM9L1sjXFwvXFw/QF0vZyxYYz0vWyNcXD86XS9nLFdjPS9bI1xcP10vZywkYz0vWyNcXD9AXS9nLFljPS8jL2c7ZnVuY3Rpb24gUmMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9ZnVuY3Rpb24gVihhKXthLmd8fChhLmc9bmV3IFMsYS5oPTAsYS5pJiZOYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1SYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O1xuZnVuY3Rpb24gZGQoYSxiKXtWKGEpO2I9VyhhLGIpO1QoYS5nLmgsYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGE9YS5nLFQoYS5oLGIpJiYoZGVsZXRlIGEuaFtiXSxhLmktLSxhLmcubGVuZ3RoPjIqYS5pJiZMYyhhKSkpO31mdW5jdGlvbiBlZChhLGIpe1YoYSk7Yj1XKGEsYik7cmV0dXJuIFQoYS5nLmgsYil9ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe25hKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2suVD1mdW5jdGlvbigpe1YodGhpcyk7Zm9yKHZhciBhPXRoaXMuZy5SKCksYj10aGlzLmcuVCgpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O1xuay5SPWZ1bmN0aW9uKGEpe1YodGhpcyk7dmFyIGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWVkKHRoaXMsYSkmJihiPXFhKGIsdGhpcy5nLmdldChXKHRoaXMsYSkpKSk7ZWxzZSB7YT10aGlzLmcuUigpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9cWEoYixhW2NdKTt9cmV0dXJuIGJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmk9bnVsbDthPVcodGhpcyxhKTtlZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5SKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBtYyhhLGIsYyl7ZGQoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChXKGEsYikscmEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuZy5UKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlIoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBXKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIFpjKGEsYil7YiYmIWEuaiYmKFYoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKGRkKHRoaXMsZCksbWModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGZkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7fX07ZnVuY3Rpb24gZ2QoYSl7dGhpcy5sPWF8fGhkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuRWEmJmwuZy5FYSgpJiZsLmcuRWEoKS5aYik7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgaGQ9MTA7ZnVuY3Rpb24gaWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBDYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geWMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBEYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEZjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31nZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWpkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gamQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIHJhKGEuaSl9ZnVuY3Rpb24ga2QoKXt9a2QucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2tkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24gbGQoKXt0aGlzLmc9bmV3IGtkO31mdW5jdGlvbiBtZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1yYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG5kKGEsYil7Y29uc3QgYz1uZXcgTWI7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG9kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIHBkKGEpe3RoaXMubD1hLiRifHxudWxsO3RoaXMuaj1hLmlifHwhMTt9dChwZCxZYik7cGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFkKHRoaXMubCx0aGlzLmopfTtwZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBxZChhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkQ9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1yZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXQocWQsQyk7dmFyIHJkPTA7az1xZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPXJkKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7c2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkR8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLlZhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHRkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9cmQ7fTtcbmsuVmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixzZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsc2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5UYS5iaW5kKHRoaXMpLHRoaXMuaGEuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7dWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlVhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHVkKGEpe2Euai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7fWsuU2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT90ZCh0aGlzKTpzZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnVkKHRoaXMpO319O1xuay5VYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEsdGQodGhpcykpO307ay5UYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEsdGQodGhpcykpO307ay5oYT1mdW5jdGlvbigpe3RoaXMuZyYmdGQodGhpcyk7fTtmdW5jdGlvbiB0ZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtzZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIHNkKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHZkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFM7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkg9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5GPXRoaXMudj10aGlzLkQ9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5KPXdkO3RoaXMuSz10aGlzLkw9ITE7fXQoWCxDKTt2YXIgd2Q9XCJcIix4ZD0vXmh0dHBzPyQvaSx5ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1YLnByb3RvdHlwZTtcbmsuZWE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSCtcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkg9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkQ9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTpjYy5nKCk7dGhpcy5DPXRoaXMudT9aYih0aGlzLnUpOlpiKGNjKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5GYSx0aGlzKTt0cnl7dGhpcy5GPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjb25zdCBlPW5ldyBTKHRoaXMuaGVhZGVycyk7ZCYmS2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1vYShlLlQoKSk7Yz1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTtcbiEoMDw9bWEoeWQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSiYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5KKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5MJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz10aGlzLkwpO3RyeXtBZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLks9QmQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy5wYSx0aGlzKSk6dGhpcy5BPUdiKHRoaXMucGEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt6ZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gQmQoYSl7cmV0dXJuIHkmJlJhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBwYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWsucGE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEQodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB6ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTtDZChhKTtEZChhKTt9ZnVuY3Rpb24gQ2QoYSl7YS5EfHwoYS5EPSEwLEQoYSxcImNvbXBsZXRlXCIpLEQoYSxcImVycm9yXCIpKTt9XG5rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsRCh0aGlzLFwiY29tcGxldGVcIiksRCh0aGlzLFwiYWJvcnRcIiksRGQodGhpcykpO307ay5NPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLERkKHRoaXMsITApKTtYLlouTS5jYWxsKHRoaXMpO307ay5GYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuRnx8dGhpcy52fHx0aGlzLmw/RWQodGhpcyk6dGhpcy5jYigpKTt9O2suY2I9ZnVuY3Rpb24oKXtFZCh0aGlzKTt9O1xuZnVuY3Rpb24gRWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPU8oYSl8fDIhPWEuYmEoKSkpaWYoYS52JiY0PT1PKGEpKUdiKGEuRmEsMCxhKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5oPSExO3RyeXtjb25zdCBuPWEuYmEoKTthOnN3aXRjaChuKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09bil7dmFyIGU9U3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdfHxudWxsO2lmKCFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbil7dmFyIGY9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2U9Zi5zdWJzdHIoMCxmLmxlbmd0aC0xKTt9ZD0heGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUQoYSxcImNvbXBsZXRlXCIpLEQoYSxcblwic3VjY2Vzc1wiKTtlbHNlIHthLm09Njt0cnl7dmFyIGg9MjxPKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKHUpe2g9XCJcIjt9YS5qPWgrXCIgW1wiK2EuYmEoKStcIl1cIjtDZChhKTt9fWZpbmFsbHl7RGQoYSk7fX19ZnVuY3Rpb24gRGQoYSxiKXtpZihhLmcpe0FkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdP2FhOm51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8RChhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIEFkKGEpe2EuZyYmYS5LJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5iYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmdhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5RYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiB2ZChiKX19O2Z1bmN0aW9uIG9jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkope2Nhc2Ugd2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fWsuRGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtcbmsuTGE9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBGZChhKXtsZXQgYj1cIlwiO3hhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBHZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1GZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpSKGEsYixjKSk7fWZ1bmN0aW9uIEhkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIElkKGEpe3RoaXMuemE9MDt0aGlzLmw9W107dGhpcy5oPW5ldyBNYjt0aGlzLmxhPXRoaXMub2E9dGhpcy5GPXRoaXMuVz10aGlzLmc9dGhpcy5zYT10aGlzLkQ9dGhpcy5hYT10aGlzLm89dGhpcy5QPXRoaXMucz1udWxsO3RoaXMuWmE9dGhpcy5WPTA7dGhpcy5YYT1IZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5OPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaj1udWxsO3RoaXMuWD0hMDt0aGlzLkk9dGhpcy50YT10aGlzLlU9LTE7dGhpcy5ZPXRoaXMuQT10aGlzLkM9MDt0aGlzLlBhPUhkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLiRhPUhkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLllhPUhkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnJhPUhkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMucWE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuQmE9YSYmYS5ZYnx8ITE7XG50aGlzLks9dm9pZCAwO3RoaXMuSD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSj1cIlwiO3RoaXMuaT1uZXcgZ2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkNhPW5ldyBsZDt0aGlzLmphPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5SYT1hJiZhLldifHwhMTthJiZhLkFhJiZ0aGlzLmguQWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLlg9ITEpO3RoaXMuJD0hdGhpcy5qYSYmdGhpcy5YJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLmthPXZvaWQgMDt0aGlzLk89MDt0aGlzLkw9ITE7dGhpcy5CPW51bGw7dGhpcy5XYT0hYXx8ITEhPT1hLlhiO31rPUlkLnByb3RvdHlwZTtrLm1hPTg7ay5HPTE7XG5mdW5jdGlvbiBJYyhhKXtKZChhKTtpZigzPT1hLkcpe3ZhciBiPWEuVisrLGM9TihhLkYpO1IoYyxcIlNJRFwiLGEuSik7UihjLFwiUklEXCIsYik7UihjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0tkKGEsYyk7Yj1uZXcgTShhLGEuaCxiLHZvaWQgMCk7Yi5LPTI7Yi52PWpjKE4oYykpO2M9ITE7bC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIikpOyFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPW5jKGIubCxudWxsKSxiLmcuZWEoYi52KSk7Yi5GPURhdGUubm93KCk7bGMoYik7fUxkKGEpO31rLmhiPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgaW52b2tlZDogXCIrYSk7fWNhdGNoKGIpe319O2Z1bmN0aW9uIEFjKGEpe2EuZyYmKHdjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gSmQoYSl7QWMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7emMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTWQoYSxiKXthLmwucHVzaChuZXcgZmQoYS5aYSsrLGIpKTszPT1hLkcmJkhjKGEpO31mdW5jdGlvbiBIYyhhKXtpZChhLmkpfHxhLm18fChhLm09ITAsemIoYS5IYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIE5kKGEsYil7aWYoQ2MoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEubD1iLkQuY29uY2F0KGEubCksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQz49KGEuWGE/MDphLllhKSlyZXR1cm4gITE7YS5tPUsocShhLkhhLGEsYiksT2QoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkcpe2lmKCFhKXt0aGlzLlY9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlYrKztjb25zdCBlPW5ldyBNKHRoaXMsdGhpcy5oLGEsdm9pZCAwKTtsZXQgZj10aGlzLnM7dGhpcy5QJiYoZj8oZj15YShmKSxBYShmLHRoaXMuUCkpOmY9dGhpcy5QKTtudWxsPT09dGhpcy5vJiYoZS5IPWYpO2lmKHRoaXMuamEpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMubC5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmxbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5nJiYoZD1kLmcuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMubC5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj0xRTM7Yj1cblBkKHRoaXMsZSxiKTtjPU4odGhpcy5GKTtSKGMsXCJSSURcIixhKTtSKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUihjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpO0tkKHRoaXMsYyk7dGhpcy5vJiZmJiZHZChjLHRoaXMubyxmKTtEYyh0aGlzLmksZSk7dGhpcy5SYSYmUihjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLmphPyhSKGMsXCIkcmVxXCIsYiksUihjLFwiU0lEXCIsXCJudWxsXCIpLGUuJD0hMCxpYyhlLGMsbnVsbCkpOmljKGUsYyxiKTt0aGlzLkc9Mjt9fWVsc2UgMz09dGhpcy5HJiYoYT9RZCh0aGlzLGEpOjA9PXRoaXMubC5sZW5ndGh8fGlkKHRoaXMuaSl8fFFkKHRoaXMpKTt9O1xuZnVuY3Rpb24gUWQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5WKys7Y29uc3QgZD1OKGEuRik7UihkLFwiU0lEXCIsYS5KKTtSKGQsXCJSSURcIixjKTtSKGQsXCJBSURcIixhLlUpO0tkKGEsZCk7YS5vJiZhLnMmJkdkKGQsYS5vLGEucyk7Yz1uZXcgTShhLGEuaCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5IPWEucyk7YiYmKGEubD1iLkQuY29uY2F0KGEubCkpO2I9UGQoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5yYSkrTWF0aC5yb3VuZCguNSphLnJhKk1hdGgucmFuZG9tKCkpKTtEYyhhLmksYyk7aWMoYyxkLGIpO31mdW5jdGlvbiBLZChhLGIpe2EuaiYmS2Moe30sZnVuY3Rpb24oYyxkKXtSKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBQZChhLGIsYyl7Yz1NYXRoLm1pbihhLmwubGVuZ3RoLGMpO3ZhciBkPWEuaj9xKGEuai5PYSxhLmosYSk6bnVsbDthOnt2YXIgZT1hLmw7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdT0wO3U8Yzt1Kyspe2xldCBtPWVbdV0uaDtjb25zdCByPWVbdV0uZzttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt1XS5oLTEwMCksbj0hMTtlbHNlIHRyeXttZChyLGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goRyl7ZCYmZChyKTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmwuc3BsaWNlKDAsYyk7Yi5EPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLlk9MSx6YihhLkdhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBCYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLlkrKzthLnU9SyhxKGEuR2EsYSksT2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5HYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO1JkKHRoaXMpO2lmKHRoaXMuJCYmISh0aGlzLkx8fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5PKSl7dmFyIGE9Mip0aGlzLk87dGhpcy5oLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPUsocSh0aGlzLmJiLHRoaXMpLGEpO319O2suYmI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLk49ITEsdGhpcy5MPSEwLEooMTApLEFjKHRoaXMpLFJkKHRoaXMpKTt9O1xuZnVuY3Rpb24gd2MoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIFJkKGEpe2EuZz1uZXcgTShhLGEuaCxcInJwY1wiLGEuWSk7bnVsbD09PWEubyYmKGEuZy5IPWEucyk7YS5nLk89MDt2YXIgYj1OKGEub2EpO1IoYixcIlJJRFwiLFwicnBjXCIpO1IoYixcIlNJRFwiLGEuSik7UihiLFwiQ0lcIixhLk4/XCIwXCI6XCIxXCIpO1IoYixcIkFJRFwiLGEuVSk7S2QoYSxiKTtSKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO2EubyYmYS5zJiZHZChiLGEubyxhLnMpO2EuSyYmYS5nLnNldFRpbWVvdXQoYS5LKTt2YXIgYz1hLmc7YT1hLmxhO2MuSz0xO2Mudj1qYyhOKGIpKTtjLnM9bnVsbDtjLlU9ITA7a2MoYyxhKTt9ay5hYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLEFjKHRoaXMpLEJjKHRoaXMpLEooMTkpKTt9O2Z1bmN0aW9uIHpjKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31cbmZ1bmN0aW9uIHVjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3pjKGEpO3djKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeWMoYS5pLGIpKWM9Yi5ELEZjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47YS5JPWIuTjtpZigwIT1hLkcpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuQztkPVNiKCk7RChkLG5ldyBWYihkLGMsYixlKSk7SGMoYSk7fWVsc2UgR2MoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGEuSXx8ISgxPT1kJiZOZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOlEoYSw1KTticmVhaztjYXNlIDQ6UShhLDEwKTticmVhaztjYXNlIDM6UShhLDYpO2JyZWFrO2RlZmF1bHQ6UShhLDIpO319XG5mdW5jdGlvbiBPZChhLGIpe2xldCBjPWEuUGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuJGEpO2Euanx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gUShhLGIpe2EuaC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaiYmKGM9bnVsbCk7dmFyIGQ9cShhLmpiLGEpO2N8fChjPW5ldyBVKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO25kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBKKDIpO2EuRz0wO2EuaiYmYS5qLnZhKGIpO0xkKGEpO0pkKGEpO31rLmpiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuaC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEooMikpOih0aGlzLmguaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksSigxKSk7fTtcbmZ1bmN0aW9uIExkKGEpe2EuRz0wO2EuST0tMTtpZihhLmope2lmKDAhPWpkKGEuaSkubGVuZ3RofHwwIT1hLmwubGVuZ3RoKWEuaS5pLmxlbmd0aD0wLHJhKGEubCksYS5sLmxlbmd0aD0wO2Euai51YSgpO319ZnVuY3Rpb24gRWMoYSxiLGMpe2xldCBkPWFkKGMpO2lmKFwiXCIhPWQuaSliJiZQYyhkLGIrXCIuXCIrZC5pKSxRYyhkLGQubSk7ZWxzZSB7Y29uc3QgZT1sLmxvY2F0aW9uO2Q9YmQoZS5wcm90b2NvbCxiP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lLCtlLnBvcnQsYyk7fWEuYWEmJnhhKGEuYWEsZnVuY3Rpb24oZSxmKXtSKGQsZixlKTt9KTtiPWEuRDtjPWEuc2E7YiYmYyYmUihkLGIsYyk7UihkLFwiVkVSXCIsYS5tYSk7S2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIG5jKGEsYixjKXtpZihiJiYhYS5IKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5CYSYmIWEucWE/bmV3IFgobmV3IHBkKHtpYjohMH0pKTpuZXcgWChhLnFhKTtiLkw9YS5IO3JldHVybiBifWZ1bmN0aW9uIFNkKCl7fWs9U2QucHJvdG90eXBlO2sueGE9ZnVuY3Rpb24oKXt9O2sud2E9ZnVuY3Rpb24oKXt9O2sudmE9ZnVuY3Rpb24oKXt9O2sudWE9ZnVuY3Rpb24oKXt9O2suT2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRkKCl7aWYoeSYmISgxMDw9TnVtYmVyKFVhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9VGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgSWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueWEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi55YTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueWF9KTt0aGlzLmcuUD1cbmE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXNhKGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXNhKGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaj10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkg9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO2EuV2EmJihhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksemIocShhLmhiLGEsYikpKTtKKDApO2EuVz1iO2EuYWE9Y3x8e307YS5OPWEuWDthLkY9RWMoYSxudWxsLGEuVyk7SGMoYSk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0ljKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7TWQodGhpcy5nLGIpO31lbHNlIHRoaXMudj8oYj17fSxiLl9fZGF0YV9fPXJiKGEpLE1kKHRoaXMuZyxiKSk6TWQodGhpcy5nLGEpO307WS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3RoaXMuZy5qPW51bGw7ZGVsZXRlIHRoaXMuajtJYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk0uY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFVkKGEpe2FjLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9dChVZCxhYyk7ZnVuY3Rpb24gVmQoKXtiYy5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXQoVmQsYmMpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fVxudChaLFNkKTtaLnByb3RvdHlwZS54YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLndhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBVZChhKSk7fTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbihhKXtEKHRoaXMuZyxuZXcgVmQoYSkpO307Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtEKHRoaXMuZyxcImJcIik7fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuVGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9VGQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS51O1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtXYi5OT19FUlJPUj0wO1diLlRJTUVPVVQ9ODtXYi5IVFRQX0VSUk9SPTY7WGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiOyRiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0MucHJvdG90eXBlLmxpc3Rlbj1DLnByb3RvdHlwZS5OO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuTztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuTGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS5EYTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuYmE7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlFhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmdhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7dmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgVGR9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFNiKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVdiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVhiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1IO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3JiOjAsdWI6MSx2YjoyLE9iOjMsVGI6NCxRYjo1LFJiOjYsUGI6NyxOYjo4LFNiOjksUFJPWFk6MTAsTk9QUk9YWToxMSxMYjoxMixIYjoxMyxJYjoxNCxHYjoxNSxKYjoxNixLYjoxNyxuYjoxOCxtYjoxOSxvYjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1wZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPSRiO1xudmFyIFhocklvID0gZXNtLlhocklvPVg7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjYuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IHtcclxuICBjcmVhdGVFbGVtZW50V2l0aENsYXNzLFxyXG4gIGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzLFxyXG59IGZyb20gXCIuL2NyZWF0ZUVsZW1lbnRcIjtcclxuaW1wb3J0IHsgY2xvc2VTaWRlYmFyIH0gZnJvbSBcIi4vaGVhZGVyXCI7XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhbGN1bGF0b3IoKSB7XHJcbiAgY2xlYXJVSSgpO1xyXG4gIGNsb3NlU2lkZWJhcigpO1xyXG4gIFxyXG4gIGNvbnN0IHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwiY2FsY19fd3JhcHBlclwiKTtcclxuICBjb25zdCBib2R5ID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXCJkaXZcIiwgXCJjYWxjX19jb250YWluZXJcIik7XHJcbiAgYm9keS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lcjJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlzcGxheS13cmFwcGVyXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPVwiZGlzcGxheSBjYWxjXCI+PC9wPlxyXG4gICAgICAgICAgICA8aDEgY2xhc3M9XCJkaXNwbGF5IGtleVByZXNzRGlzcGxheVwiPjA8L2gxPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b25zXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gY2xlYXJcIj5BQzwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJhY2tzcGFjZVwiPiYjODU5Mjs8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBuZWdhdGl2ZVwiPisvLTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGRpdmlkZVwiPi88L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBzZXZlblwiPjc8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBlaWdodFwiPjg8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBuaW5lXCI+OTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIG11bHRpcGx5XCI+eDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGZvdXJcIj40PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gZml2ZVwiPjU8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBzaXhcIj42PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gc3VidHJhY3RcIj4tPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gb25lXCI+MTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIHR3b1wiPjI8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biB0aHJlZVwiPjM8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBhZGRcIj4rPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gemVyb1wiPjA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBkZWNpbWFsXCI+LjwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGVxdWFsc1wiPj08L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB3cmFwcGVyLmFwcGVuZENoaWxkKGJvZHkpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcclxuICBjYWxjKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGMoKSB7XHJcbiAgY29uc3QgY2FsYyA9IFtdO1xyXG4gIGxldCBkaXNwbGF5U3RyaW5nID0gXCJcIjtcclxuICBsZXQgZGlzcGxheUV4cHJlc3Npb24gPSBcIlwiO1xyXG4gIGNvbnN0IGtleVByZXNzZWREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5rZXlQcmVzc0Rpc3BsYXlcIik7XHJcbiAgY29uc3QgZXhwcmVzc2lvbkRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGNcIik7XHJcblxyXG4gIC8vZGlnaXQgYnV0dG9uc1xyXG4gIGNvbnN0IGJ0bk9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub25lXCIpO1xyXG4gIGNvbnN0IGJ0blR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHdvXCIpO1xyXG4gIGNvbnN0IGJ0blRocmVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aHJlZVwiKTtcclxuICBjb25zdCBidG5Gb3VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3VyXCIpO1xyXG4gIGNvbnN0IGJ0bkZpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZpdmVcIik7XHJcbiAgY29uc3QgYnRuU2l4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXhcIik7XHJcbiAgY29uc3QgYnRuU2V2ZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldmVuXCIpO1xyXG4gIGNvbnN0IGJ0bkVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5laWdodFwiKTtcclxuICBjb25zdCBidG5OaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uaW5lXCIpO1xyXG4gIGNvbnN0IGJ0blplcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnplcm9cIik7XHJcbiAgY29uc3QgYnRuRGVjaW1hbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVjaW1hbFwiKTtcclxuXHJcbiAgLy9vcGVyYXRvciBidXR0b25zXHJcbiAgY29uc3QgYnRuQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFkZGApO1xyXG4gIGNvbnN0IGJ0blN1YnRyYWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnN1YnRyYWN0YCk7XHJcbiAgY29uc3QgYnRuTXVsdGlwbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAubXVsdGlwbHlgKTtcclxuICBjb25zdCBidG5EaXZpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGl2aWRlYCk7XHJcbiAgY29uc3QgYnRuRXF1YWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmVxdWFsc2ApO1xyXG5cclxuICAvL2FjY2Vzc29yeSBidXR0b25zXHJcbiAgY29uc3QgYnRuQ2xlYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuY2xlYXJgKTtcclxuICBjb25zdCBidG5CYWNrc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhY2tzcGFjZVwiKTtcclxuICBjb25zdCBidG5OZWdhdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmVnYXRpdmVcIik7XHJcblxyXG4gIC8vRVZFTlQgTElTVEVORVJTIC0gRElHSVRTXHJcbiAgYnRuT25lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgYnRuVHdvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMik7XHJcbiAgfSk7XHJcblxyXG4gIGJ0blRocmVlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMyk7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkZvdXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg0KTtcclxuICB9KTtcclxuXHJcbiAgYnRuRml2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KDUpO1xyXG4gIH0pO1xyXG5cclxuICBidG5TaXguYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg2KTtcclxuICB9KTtcclxuXHJcbiAgYnRuU2V2ZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg3KTtcclxuICB9KTtcclxuXHJcbiAgYnRuRWlnaHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheSg4KTtcclxuICB9KTtcclxuXHJcbiAgYnRuTmluZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KDkpO1xyXG4gIH0pO1xyXG5cclxuICBidG5aZXJvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoMCk7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkRlY2ltYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheShcIi5cIik7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEVWRU5UIExJU1RFTkVSUyAtIE9QRVJBVE9SU1xyXG4gIGJ0bkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KFwiK1wiKTtcclxuICB9KTtcclxuXHJcbiAgYnRuU3VidHJhY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheShcIi1cIik7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bk11bHRpcGx5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoXCIqXCIpO1xyXG4gIH0pO1xyXG5cclxuICBidG5EaXZpZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVsYXRlRGlzcGxheShcIi9cIik7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkVxdWFscy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdWxhdGVEaXNwbGF5KFwiPVwiKTtcclxuICB9KTtcclxuXHJcbiAgLy9FVkVOVCBMSVNURU5FUlMgLSBBQ0NFU1NPUlkgQlVUVE9OU1xyXG4gIGJ0bkNsZWFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvL3NldCBib3RoIGRpc3BsYXkgc3RyaW5ncyB0byBhbiBlbXB0eSBzdHJpbmdcclxuICAgIGRpc3BsYXlFeHByZXNzaW9uID0gXCJcIjtcclxuICAgIGRpc3BsYXlTdHJpbmcgPSBcIlwiO1xyXG4gICAgLy9jbGVhciB0aGUgdGV4dCBjb250ZW50LCBzZXQgZGlzcGxheVN0cmluZyBiYWNrIHRvIDBcclxuICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICAvLyBjbGVhciB0aGUgYXJyYXlcclxuICAgIGNhbGMubGVuZ3RoID0gMDtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gYmFja3NwYWNlKCkge1xyXG4gICAgaWYgKGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50Lmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudCA9IFwiMFwiO1xyXG4gICAgICBleHByZXNzaW9uRGlzcGxheS50ZXh0Q29udGVudCA9IGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50LnNsaWNlKFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgLTFcclxuICAgICAgKTtcclxuICAgICAgZGlzcGxheVN0cmluZyA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBtb3JlIHRoYW4gb25lIG51bWJlciBkZWxldGUgbGFzdCBudW1iZXIgYWRkZWRcclxuICAgIGVsc2UgaWYgKGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50Lmxlbmd0aCA+IDEpIHtcclxuICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudC5zbGljZShcclxuICAgICAgICAwLFxyXG4gICAgICAgIC0xXHJcbiAgICAgICk7XHJcbiAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ID0gZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQuc2xpY2UoXHJcbiAgICAgICAgMCxcclxuICAgICAgICAtMVxyXG4gICAgICApO1xyXG4gICAgICBkaXNwbGF5U3RyaW5nID0gZGlzcGxheVN0cmluZy5zbGljZSgwLCAtMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBidG5CYWNrc3BhY2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJhY2tzcGFjZSk7XHJcblxyXG4gIGJ0bk5lZ2F0aXZlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1bGF0ZURpc3BsYXkoXCIrLy1cIik7XHJcbiAgfSk7XHJcblxyXG4gIC8vYWRkXHJcbiAgZnVuY3Rpb24gYWRkKGEsIGIpIHtcclxuICAgIGxldCByZXN1bHQgPSBwYXJzZUZsb2F0KGEpICsgcGFyc2VGbG9hdChiKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvL3N1YnRyYWN0XHJcbiAgZnVuY3Rpb24gc3VidHJhY3QoYSwgYikge1xyXG4gICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQoYSkgLSBwYXJzZUZsb2F0KGIpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vbXVsdGlwbHlcclxuICBmdW5jdGlvbiBtdWx0aXBseShhLCBiKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gcGFyc2VGbG9hdChhKSAqIHBhcnNlRmxvYXQoYik7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLy9kaXZpZGVcclxuICBmdW5jdGlvbiBkaXZpZGUoYSwgYikge1xyXG4gICAgaWYgKGIgPT0gMCkge1xyXG4gICAgICByZXR1cm4gXCJFUlJPUlwiO1xyXG4gICAgfVxyXG4gICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQoYSkgLyBwYXJzZUZsb2F0KGIpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vb3BlcmF0ZVxyXG4gIGZ1bmN0aW9uIG9wZXJhdGUobnVtMSwgb3AsIG51bTIpIHtcclxuICAgIGxldCByZXN1bHQgPSAwO1xyXG4gICAgaWYgKG9wID09PSBcIitcIikge1xyXG4gICAgICByZXN1bHQgPSBhZGQobnVtMSwgbnVtMik7XHJcbiAgICB9IGVsc2UgaWYgKG9wID09PSBcIi1cIikge1xyXG4gICAgICByZXN1bHQgPSBzdWJ0cmFjdChudW0xLCBudW0yKTtcclxuICAgIH0gZWxzZSBpZiAob3AgPT09IFwiKlwiKSB7XHJcbiAgICAgIHJlc3VsdCA9IG11bHRpcGx5KG51bTEsIG51bTIpO1xyXG4gICAgfSBlbHNlIGlmIChvcCA9PT0gXCIvXCIpIHtcclxuICAgICAgcmVzdWx0ID0gZGl2aWRlKG51bTEsIG51bTIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGFycmF5IGhhcyBhIGxlbmd0aCBvZiA0IGFuZCBsYXN0IGlzIGFub3RoZXIgb3BlcmF0b3JcclxuICAgIGlmIChjYWxjLmxlbmd0aCA9PT0gNCAmJiB0eXBlb2YgY2FsY1szXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBsZXQgdXBkYXRlciA9IFwiXCI7XHJcbiAgICAgIHVwZGF0ZXIgKz0gcmVzdWx0O1xyXG4gICAgICB1cGRhdGVyICs9IGNhbGNbM107XHJcbiAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ID0gdXBkYXRlcjtcclxuICAgICAgLy8gcmVtb3ZlIG9wZXJhbmRzIGFuZCBvcGVyYXRvciBmcm9tIHByZXZpb3VzIGNhbGN1bGF0aW9uXHJcbiAgICAgIGNhbGMuc2hpZnQoKTtcclxuICAgICAgY2FsYy5zaGlmdCgpO1xyXG4gICAgICBjYWxjLnNoaWZ0KCk7XHJcbiAgICAgIC8vIGFkZCByZXN1bHQgdG8gY2FsY1xyXG4gICAgICBjYWxjLnVuc2hpZnQocmVzdWx0KTtcclxuICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSByZXN1bHQ7XHJcbiAgICAgIGRpc3BsYXlFeHByZXNzaW9uID0gXCJcIjtcclxuICAgICAgZGlzcGxheVN0cmluZyA9IFwiXCI7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBjYWxjWzNdIGlzIHRoZSBlcXVhbHMgc2lnbiwgZW5wdHkgYXJyYXkgYWRkIHJlc3VsdFxyXG4gICAgZWxzZSBpZiAoY2FsYy5sZW5ndGggPT09IDMpIHtcclxuICAgICAgY2FsYy5sZW5ndGggPSAwO1xyXG4gICAgICBjYWxjLnB1c2gocmVzdWx0KTtcclxuICAgICAgY2FsYy5zaGlmdCgpO1xyXG4gICAgICBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudCA9IHJlc3VsdDtcclxuICAgICAgZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICBkaXNwbGF5RXhwcmVzc2lvbiA9IFwiXCI7XHJcbiAgICAgIGRpc3BsYXlTdHJpbmcgPSBcIlwiO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBvcHVsYXRlRGlzcGxheShpbnB1dCkge1xyXG4gICAgbGV0IG9wID0gXCJcIjtcclxuICAgIC8vIHJlbW92ZSBkZWZhdWx0IHplcm8gZnJvbSBrZXlQcmVzc2VkRGlzcGxheVxyXG4gICAgaWYgKGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50LmNoYXJBdCgwKSA9PT0gXCIwXCIpIHtcclxuICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAoaW5wdXQpIHtcclxuICAgICAgY2FzZSBcIitcIjpcclxuICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgY2FzZSBcIipcIjpcclxuICAgICAgY2FzZSBcIi9cIjpcclxuICAgICAgICAvLyBjaGVjayBpZiB1c2VyIHRyaWVzIHRvIGVudGVyIG9wZXJhdG9yIGZpcnN0XHJcbiAgICAgICAgaWYgKGRpc3BsYXlTdHJpbmcubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWRkIGlucHV0IHRvIGV4cHJlc3Npb24gc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gKz0gaW5wdXQ7XHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gPSBcIlwiO1xyXG4gICAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ICs9IGlucHV0O1xyXG4gICAgICAgIC8vIHB1c2ggd2hhdHMgaW4gZGlzcGxheSBzdHJpbmcgc28gZmFyIHRvIGNhbGMgYXJyYXkgZm9yIGRvdWJsZSBkaWdpdCArIG51bWJlcnNcclxuICAgICAgICBjYWxjLnB1c2goZGlzcGxheVN0cmluZyk7XHJcbiAgICAgICAgLy8gb25jZSBhbiBvcGVyYXRvciBpcyBwcmVzc2VkIGNsZWFyIGRpc3BsYXkgc3RyaW5nXHJcbiAgICAgICAgZGlzcGxheVN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIC8vIHB1c2ggdGhlIG9wZXJhdG9yIHRvIGNhbGMgYXJyYXlcclxuICAgICAgICBjYWxjLnB1c2goaW5wdXQpO1xyXG4gICAgICAgIC8vIGlmIChjYWxjLmluZGV4T2YoaW5wdXQpID09PSAzKSB7XHJcbiAgICAgICAgLy8gICAgIGNhbGMuc2hpZnQoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCIrLy1cIjpcclxuICAgICAgICAvLyBtdWx0aXBseSBieSAtMVxyXG4gICAgICAgIC8vIHN0b3AgdXNlciBmcm9tIHByZXNzaW5nIHRoaXMgYnV0dG9uIGJlZm9yZSBhIG51bWJlclxyXG4gICAgICAgIGlmIChkaXNwbGF5U3RyaW5nLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc3BsYXlTdHJpbmcgPSBwYXJzZUZsb2F0KGRpc3BsYXlTdHJpbmcgKiAtMSk7XHJcbiAgICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgPSBwYXJzZUZsb2F0KFxyXG4gICAgICAgICAga2V5UHJlc3NlZERpc3BsYXkudGV4dENvbnRlbnQgKiAtMVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gPSBwYXJzZUZsb2F0KGRpc3BsYXlFeHByZXNzaW9uICogLTEpO1xyXG5cclxuICAgICAgICAvLyBpZiBudW1iZXIgeW91cmUgbmVnYXRpbmcgaXNudCB0aGUgZmlyc3QgbnVtYmVyIGluIHRoZSBvcGVyYXRpb25cclxuICAgICAgICBpZiAoY2FsYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBleHByZXNzaW9uRGlzcGxheS50ZXh0Q29udGVudCA9IGNhbGNbMF0gKyBjYWxjWzFdICsgZGlzcGxheUV4cHJlc3Npb247XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQgPSBkaXNwbGF5RXhwcmVzc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCI9XCI6XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmVzIGEgbnVtYmVyIGZvbGxvd2VkIGJ5IGFuIG9wZXJhdG9yIGluIGNhbGNcclxuICAgICAgICBpZiAoY2FsYy5sZW5ndGggPCAzICYmIHR5cGVvZiBjYWxjWzFdICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsYy5wdXNoKGRpc3BsYXlTdHJpbmcpO1xyXG4gICAgICAgIG9wZXJhdGUoY2FsY1swXSwgY2FsY1sxXSwgY2FsY1syXSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCIuXCI6XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdXNlciBhbHJlYWR5IHByZXNzZWQgYSBkZWNpbWFsXHJcbiAgICAgICAgaWYgKGRpc3BsYXlTdHJpbmcuaW5jbHVkZXMoXCIuXCIpKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzcGxheUV4cHJlc3Npb24gKz0gaW5wdXQ7XHJcbiAgICAgICAgZXhwcmVzc2lvbkRpc3BsYXkudGV4dENvbnRlbnQgKz0gaW5wdXQ7XHJcbiAgICAgICAgZGlzcGxheVN0cmluZyArPSBpbnB1dDtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIC8vIGlmIHRoZSBpbnB1dCBpcyBhIG51bWJlclxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGV4cHJlc3Npb25EaXNwbGF5LnRleHRDb250ZW50ICs9IGlucHV0O1xyXG5cclxuICAgICAgICBpZiAoY2FsYy5sZW5ndGggPT09IDMgJiYgdHlwZW9mIGNhbGNbMV0gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgIGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGNhbGMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBjYWxjWzFdID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICBrZXlQcmVzc2VkRGlzcGxheS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYWxjLmxlbmd0aCA9PT0gNCAmJiB0eXBlb2YgY2FsY1sxXSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgY2FsYy5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcGxheVN0cmluZy5sZW5ndGggPCAxMCkge1xyXG4gICAgICAgICAgZGlzcGxheVN0cmluZyArPSBpbnB1dDtcclxuICAgICAgICAgIGtleVByZXNzZWREaXNwbGF5LnRleHRDb250ZW50ID0gZGlzcGxheVN0cmluZztcclxuICAgICAgICAgIGRpc3BsYXlFeHByZXNzaW9uICs9IGlucHV0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2FsYy5sZW5ndGggPT09IDQpIHtcclxuICAgICAgY29uc3QgeCA9IG9wZXJhdGUoY2FsY1swXSwgY2FsY1sxXSwgY2FsY1syXSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhclVJKCkge1xyXG4gIGNvbnN0IGNoaWxkcmVuID0gWy4uLmNvbnRhaW5lci5jaGlsZHJlbl07XHJcbiAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgIGNoaWxkLnJlbW92ZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgeyByZW5kZXJDYWxjdWxhdG9yIH07XHJcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MsIGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzIH0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBjbG9zZVNpZGViYXIgfSBmcm9tIFwiLi9oZWFkZXJcIjtcclxuXHJcbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyXCIpO1xyXG5sZXQgc3RhcnRpbmdNaW51dGVzID0gMjU7XHJcbmxldCB0aW1lID0gc3RhcnRpbmdNaW51dGVzICogNjA7XHJcbmxldCBjb3VudCA9IDA7XHJcblxyXG5mdW5jdGlvbiBnZXRQb21vZG9ybygpIHtcclxuICBjbG9zZVNpZGViYXIoKTtcclxuICBjbGVhclVJKCk7XHJcblxyXG4gIGNvbnN0IHRpdGxlID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXCJoMlwiLCBcInBvbW9kb3JvX190aXRsZVwiLCBcIlBvbW9kb3JvXCIpO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuICAgIFxyXG4gICAgY29uc3QgcG9tb2Rvcm9Db250YWluZXIgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwicG9tb2Rvcm9fX2NvbnRhaW5lclwiKTtcclxuICAgIGNvbnN0IHBvbW9kb3JvID0gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhcImRpdlwiLCBcInBvbW9kb3JvXCIpO1xyXG4gICAgY29uc3QgdGltZXIgPSBjcmVhdGVUZXh0RWxlbWVudFdpdGhDbGFzcyhcInNwYW5cIiwgXCJwb21vZG9yb19fdGltZXJcIiwgXCIyNTowMFwiKTtcclxuICAgIHRpbWVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGltZXJcIik7XHJcbiAgICBwb21vZG9yby5hcHBlbmRDaGlsZCh0aW1lcik7XHJcbiAgICBwb21vZG9yb0NvbnRhaW5lci5hcHBlbmRDaGlsZChwb21vZG9ybyk7XHJcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjcmVhdGVFbGVtZW50V2l0aENsYXNzKFwiZGl2XCIsIFwicG9tb2Rvcm9fX2J1dHRvbnNcIik7XHJcbiAgICBjb25zdCBzdGFydEJ0biA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFwiYnV0dG9uXCIsIFwicG9tb2Rvcm9fX2J1dHRvblwiLCBcIlN0YXJ0XCIpO1xyXG4gICAgY29uc3Qgc3RvcEJ0biA9IGNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzKFxyXG4gICAgICBcImJ1dHRvblwiLFxyXG4gICAgICBcInBvbW9kb3JvX19idXR0b25cIixcclxuICAgICAgXCJTdG9wXCJcclxuICAgICk7XHJcbiAgICBzdG9wQnRuLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic3RvcFwiKTtcclxuICAgIGNvbnN0IHJlc2V0QnRuID0gY3JlYXRlVGV4dEVsZW1lbnRXaXRoQ2xhc3MoXHJcbiAgICAgIFwiYnV0dG9uXCIsXHJcbiAgICAgIFwicG9tb2Rvcm9fX2J1dHRvblwiLFxyXG4gICAgICBcIlJlc2V0XCJcclxuICAgICk7XHJcbiAgICByZXNldEJ0bi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInJlc2V0XCIpO1xyXG4gICAgc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0VGltZSk7XHJcbiAgICByZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVzZXRUaW1lKTtcclxuICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzdGFydEJ0bik7XHJcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoc3RvcEJ0bik7XHJcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocmVzZXRCdG4pO1xyXG4gICAgcG9tb2Rvcm9Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwb21vZG9yb0NvbnRhaW5lcik7XHJcbiAgICBcclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc3RhcnRUaW1lKCkge1xyXG4gICAgY29uc3QgcG9tb2Rvcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvbW9kb3JvXCIpO1xyXG4gICAgY29uc3QgdGltZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVyXCIpO1xyXG4gICAgY29uc3Qgc3RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcFwiKTtcclxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBtaW51dGVzTGVmdCA9IE1hdGguZmxvb3IodGltZSAvIDYwKTtcclxuICAgICAgICBtaW51dGVzTGVmdCA8IDEwXHJcbiAgICAgICAgICA/IChtaW51dGVzTGVmdCA9IGAwYCArIG1pbnV0ZXNMZWZ0KVxyXG4gICAgICAgICAgOiAobWludXRlc0xlZnQgPSBtaW51dGVzTGVmdCk7XHJcbiAgICAgICAgbGV0IHNlY29uZHMgPSB0aW1lICUgNjA7XHJcbiAgICAgICAgc2Vjb25kcyA8IDEwID8gKHNlY29uZHMgPSBgMGAgKyBzZWNvbmRzKSA6IChzZWNvbmRzID0gc2Vjb25kcyk7XHJcbiAgICAgICAgdGltZXIudGV4dENvbnRlbnQgPSBgJHttaW51dGVzTGVmdH06JHtzZWNvbmRzfWA7XHJcbiAgICAgICAgaWYgKG1pbnV0ZXNMZWZ0IDwgMSAmJiBzZWNvbmRzIDwgMSkge1xyXG4gICAgICAgICAgICBzdG9wVGltZXIoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgc3RhcnRpbmdNaW51dGVzID0gNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0aW5nTWludXRlcyA9IDI1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgICAgIHN0YXJ0aW5nTWludXRlcyA9PT0gNVxyXG4gICAgICAgICAgICAgID8gcG9tb2Rvcm8uY2xhc3NMaXN0LmFkZChcImVuZFwiKVxyXG4gICAgICAgICAgICAgIDogcG9tb2Rvcm8uY2xhc3NMaXN0LnJlbW92ZShcImVuZFwiKTtcclxuICAgICAgICAgICAgdGltZSA9IHN0YXJ0aW5nTWludXRlcyAqIDYwO1xyXG4gICAgICAgICAgICBsZXQgbWludXRlc0xlZnQgPSBNYXRoLmZsb29yKHRpbWUgLyA2MCk7XHJcbiAgICAgICAgICAgIGxldCBzZWNvbmRzID0gdGltZSAlIDYwO1xyXG4gICAgICAgICAgICBtaW51dGVzTGVmdCA8IDEwXHJcbiAgICAgICAgICAgICAgPyAobWludXRlc0xlZnQgPSBgMCR7bWludXRlc0xlZnR9YClcclxuICAgICAgICAgICAgICA6IChtaW51dGVzTGVmdCA9IG1pbnV0ZXNMZWZ0KTtcclxuICAgICAgICAgICAgc2Vjb25kcyA8IDEwID8gKHNlY29uZHMgPSBgMCR7c2Vjb25kc31gKSA6IChzZWNvbmRzID0gc2Vjb25kcyk7XHJcbiAgICAgICAgICAgIHRpbWVyLnRleHRDb250ZW50ID0gYCR7bWludXRlc0xlZnR9OiR7c2Vjb25kc31gO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aW1lLS07XHJcbiAgICB9LCAxMDAwKTtcclxuICAgIFxyXG4gICAgc3RvcC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHN0b3BUaW1lcihpbnRlcnZhbCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHN0b3BUaW1lcihpbnRlcnZhbCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0VGltZSgpIHtcclxuICAgIGNvbnN0IHRpbWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lclwiKTtcclxuICAgIGNvbnN0IHBvbW9kb3JvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb21vZG9yb1wiKTtcclxuICAgIHN0YXJ0aW5nTWludXRlcyA9PT0gNVxyXG4gICAgICA/IHBvbW9kb3JvLmNsYXNzTGlzdC5hZGQoXCJlbmRcIilcclxuICAgICAgOiBwb21vZG9yby5jbGFzc0xpc3QucmVtb3ZlKFwiZW5kXCIpO1xyXG4gICAgaWYgKHN0YXJ0aW5nTWludXRlcyAhPT0gNSkge1xyXG4gICAgICAgIHN0YXJ0aW5nTWludXRlcyA9IDI1O1xyXG4gICAgfVxyXG4gICAgdGltZSA9IHN0YXJ0aW5nTWludXRlcyAqIDYwO1xyXG4gICAgbGV0IG1pbnV0ZXNMZWZ0ID0gTWF0aC5mbG9vcih0aW1lIC8gNjApO1xyXG4gICAgbGV0IHNlY29uZHMgPSB0aW1lICUgNjA7XHJcbiAgICBtaW51dGVzTGVmdCA8IDEwID8gbWludXRlc0xlZnQgPSBgMCR7bWludXRlc0xlZnR9YCA6IG1pbnV0ZXNMZWZ0ID0gbWludXRlc0xlZnQ7XHJcbiAgICBzZWNvbmRzIDwgMTAgPyBzZWNvbmRzID0gYDAke3NlY29uZHN9YCA6IHNlY29uZHMgPSBzZWNvbmRzO1xyXG4gICAgdGltZXIudGV4dENvbnRlbnQgPSBgJHttaW51dGVzTGVmdH06JHtzZWNvbmRzfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVUkoKSB7XHJcbiAgY29uc3QgY2hpbGRyZW4gPSBbLi4uY29udGFpbmVyLmNoaWxkcmVuXTtcclxuICBjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgY2hpbGQucmVtb3ZlKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGdldFBvbW9kb3JvIH07XHJcbiIsImltcG9ydCB7IGF1dGggfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgdXBkYXRlUHJvZmlsZSB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCI7XHJcbmltcG9ydCB7IGdldFVzZXJuYW1lIH0gZnJvbSBcIi4vYXV0aFwiO1xyXG5cclxuXHJcbmNvbnN0IHNldHRpbmdzID0ge307XHJcblxyXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlTZXR0aW5ncygpIHtcclxuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNldHRpbmdzXCI+XHJcbiAgPGZvcm0gYWN0aW9uPVwiXCIgY2xhc3M9XCJzZXR0aW5nc19fZm9ybVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInNldHRpbmdzX193cmFwcGVyXCI+XHJcbiAgICAgIDxsYWJlbCBmb3I9XCJpbWFnZVwiIGNsYXNzPVwic2V0dGluZ3NfX2xhYmVsXCI+UHJvZmlsZSBQaWN0dXJlOjwvbGFiZWw+XHJcbiAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cImltZ1NyY1wiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCIgYWNjZXB0PVwiaW1hZ2UvcG5nLCBpbWFnZS9qcGVnXCI+XHJcbiAgICA8L2Rpdj5cclxuICAgICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NfX3dyYXBwZXJcIj5cclxuICAgICAgIDxsYWJlbCBmb3I9XCJkYXJrbW9kZVwiIGNsYXNzPVwic2V0dGluZ3NfX2xhYmVsXCI+RGFyayBNb2RlOjwvbGFiZWw+XHJcbiAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCIgbmFtZT1cImRhcmttb2RlXCIgY2hlY2tlZCB2YWx1ZT1cIk9mZlwiPlxyXG4gICAgPGxhYmVsIGZvcj1cImRhcmttb2RlXCIgY2xhc3M9XCJzZXR0aW5nc19fbGFiZWxcIj5PZmY8L2xhYmVsPlxyXG4gICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCIgbmFtZT1cImRhcmttb2RlXCIgdmFsdWU9XCJPblwiPlxyXG4gICAgPGxhYmVsIGZvcj1cImRhcmttb2RlXCIgY2xhc3M9XCJzZXR0aW5nc19fbGFiZWxcIj5PbjwvbGFiZWw+XHJcbiAgICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NfX3dyYXBwZXJcIj5cclxuICAgICAgPGxhYmVsIGZvcj1cImFjY2VudFwiIGNsYXNzPVwic2V0dGluZ3NfX2xhYmVsXCI+QWNjZW50IENvbG9yOjwvbGFiZWw+XHJcbiAgICA8aW5wdXQgdHlwZT1cImNvbG9yXCIgaWQ9XCJjb2xvclwiIHZhbHVlPVwiI2ZmMDAwMFwiIGNsYXNzPVwic2V0dGluZ3NfX2lucHV0XCI+XHJcbiAgICA8L2Rpdj5cclxuICAgIFxyXG4gICAgXHJcbiAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cInNldHRpbmdzX19idXR0b25cIj5TYXZlIENoYW5nZXM8L2J1dHRvbj5cclxuICA8L2Zvcm0+XHJcbjwvZGl2PlxyXG4gICAgYDtcclxuICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldHRpbmdzX19idXR0b25cIik7XHJcbiAgICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZXR0aW5nc0V2ZW50cyk7XHJcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltZ1NyY1wiKTtcclxuICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHJlYWRVcmwpO1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dGluZ3NFdmVudHMoZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcclxuICBjb25zdCBhY2NlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbG9yXCIpLnZhbHVlO1xyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldHRpbmdzX19mb3JtXCIpO1xyXG4gICAgY29uc3QgZGFya01vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbbmFtZT0nZGFya21vZGUnXTpjaGVja2VkXCIpLnZhbHVlO1xyXG4gICAgY29uc3QgcHJvZmlsZVBpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZVwiKTtcclxuICAgIFxyXG4gICAgLy8gaWYgKGltZykge1xyXG4gICAgLy8gICAgIHNldHRpbmdzLmltZyA9IGltZztcclxuICAgIC8vIH1cclxuICAgIGlmIChhY2NlbnQpIHtcclxuICAgICAgICBzZXR0aW5ncy5hY2NlbnQgPSBhY2NlbnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoZGFya01vZGUpIHtcclxuICAgICAgICBzZXR0aW5ncy5kYXJrTW9kZSA9IGRhcmtNb2RlO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlU2V0dGluZ3MoKTtcclxuICAgIGFkZERvY3VtZW50KGRhcmtNb2RlLCBhY2NlbnQpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBhZGREb2N1bWVudChkYXJrbW9kZSwgYWNjZW50KSB7XHJcbiAgICBjb25zdCByZWYgPSBkb2MoZGIsIGAke2dldFVzZXJuYW1lKCl9dGFza3NgLCBzZXR0aW5ncyk7XHJcbiAgICBhd2FpdCBzZXREb2MocmVmLCB7XHJcbiAgICAgIGRhcmtNb2RlOiBkYXJrbW9kZSxcclxuICAgICAgYWNjZW50OiBhY2NlbnQsXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFVybCgpe1xyXG4gICAgY29uc3QgcHJvZmlsZVBpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZVwiKTtcclxuICAgIC8vY29uc3QgcHJvZmlsZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19pbWFnZVwiKTtcclxuICAgIGlmICh0aGlzLmZpbGVzKSB7XHJcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgcHJvZmlsZVBpYy5zcmMgPSByZWFkZXIucmVzdWx0O1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgICAvL3VwZGF0ZVByb2ZpbGUoYXV0aC5jdXJyZW50VXNlciwgeyBwaG90b1VSTDogcmVhZGVyLnJlc3VsdCB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVNldHRpbmdzKCkge1xyXG4gICAgaWYgKHNldHRpbmdzLmRhcmtNb2RlID09PSBcIk9uXCIpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJkYXJrXCIpO1xyXG4gICAgICAgIC8vZm9ybXNcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2NvbnRhaW5lclwiKS5jbGFzc0xpc3QuYWRkKFwiYmxhY2tcIik7XHJcbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXIyXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmluYm94XCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lc3NhZ2VfX2NvbnRhaW5lclwiKS5jbGFzc0xpc3QuYWRkKFwiYmxhY2tcIik7XHJcbiAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlc2NyaXB0aW9uXCIpLmNsYXNzTGlzdC5hZGQoXCJibGFja1wiKTtcclxuICAgIH1cclxuICAgIFxyXG4gIC8vc2F2ZSBzZXR0aW5ncyBvYmplY3QgdG8gZmlyZWJhc2VcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcmVJbWFnZSgpIHtcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgeyBkaXNwbGF5U2V0dGluZ3MgfTsiLCJpbXBvcnQgeyBzb3J0VG9kb3NCeVByb2plY3QsIHNob3dBbGxUYXNrcywgc29ydFRvZG9zQnlUYXNrLCBnZXRJbmJveCB9IGZyb20gXCIuL3RvZG8uanNcIjtcclxuaW1wb3J0IHsgc2hvd0luYm94IH0gZnJvbSBcIi4vaW5ib3guanNcIjtcclxuaW1wb3J0IHsgcmVuZGVyQ2FsY3VsYXRvciB9IGZyb20gXCIuL2NhbGN1bGF0b3IuanNcIjtcclxuaW1wb3J0IHsgZ2V0UG9tb2Rvcm8gfSBmcm9tIFwiLi9wb21vZG9yby5qc1wiO1xyXG5pbXBvcnQgeyBkaXNwbGF5U2V0dGluZ3MgfSBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xyXG5pbXBvcnQgeyBjbG9zZVNpZGViYXIgfSBmcm9tIFwiLi9oZWFkZXIuanNcIjtcclxuXHJcblxyXG5jb25zdCBzaWRlYmFyRGl2cyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpZGViYXJfX2xpbmtcIildO1xyXG5jb25zdCB3b3JrTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid29ya1wiKTtcclxuY29uc3QgaG9tZUxpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhvbWVcIik7XHJcbmNvbnN0IG1pc2NMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtaXNjZWxsYW5lb3VzXCIpO1xyXG5cclxuZnVuY3Rpb24gYWRkU2lkZWJhckV2ZW50cygpIHtcclxuXHRjb25zdCBhbGxUYXNrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsXCIpO1xyXG5cdGNvbnN0IHRvZGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RheVwiKTtcclxuXHRjb25zdCB1cGNvbWluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXBjb21pbmdcIik7XHJcblx0Y29uc3Qgb3ZlcmR1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3ZlcmR1ZVwiKTtcclxuXHJcblx0YWxsVGFza3MuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dBbGxUYXNrcyk7XHJcblx0dG9kYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRUb2Rvc0J5VGFzayk7XHJcblx0dXBjb21pbmcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRUb2Rvc0J5VGFzayk7XHJcblx0b3ZlcmR1ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc29ydFRvZG9zQnlUYXNrKTtcclxuXHJcblx0d29ya0xpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRUb2Rvc0J5UHJvamVjdCk7XHJcblx0aG9tZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRUb2Rvc0J5UHJvamVjdCk7XHJcblx0bWlzY0xpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRUb2Rvc0J5UHJvamVjdCk7XHJcblxyXG5cdGNvbnN0IGluYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmJveFwiKTtcclxuXHRpbmJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ2V0SW5ib3gpO1xyXG5cclxuXHRjb25zdCBjYWxjdWxhdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYWxjdWxhdG9yXCIpO1xyXG5cdGNhbGN1bGF0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbmRlckNhbGN1bGF0b3IpO1xyXG5cclxuXHRjb25zdCBwb21vZG9ybyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9tb2Rvcm9cIik7XHJcblx0cG9tb2Rvcm8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGdldFBvbW9kb3JvKTtcclxuXHJcblx0Ly8gY29uc3Qgc2V0dGluZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNldHRpbmdzXCIpO1xyXG5cdC8vIHNldHRpbmdzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkaXNwbGF5U2V0dGluZ3MpO1xyXG5cclxuXHRjb25zdCBkYXNoYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhc2hib2FyZFwiKTtcclxuXHRkYXNoYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdGNsb3NlU2lkZWJhcigpO1xyXG5cdH0pXHJcblxyXG5cdHNpZGViYXJEaXZzLm1hcCgoZGl2KSA9PiB7XHJcbiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgb3BlblN1Yk1lbnUoZSk7XHJcblx0fSk7XHJcbn0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuU3ViTWVudShlKSB7XHJcbiAgICBjb25zdCBkaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2Rpc3BsYXlcIik7XHJcblx0ZGlzcGxheS50ZXh0Q29udGVudCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmlkO1xyXG5cdHJlbW92ZUFjdGl2ZUxpbmtzKGUpO1xyXG5cdGNsb3NlU3ViTWVudXMoKTtcclxuXHRpZiAoZS5jdXJyZW50VGFyZ2V0Lm5leHRFbGVtZW50U2libGluZykge1xyXG5cdFx0ZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcblx0XHRlLmN1cnJlbnRUYXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93U3ViXCIpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUFjdGl2ZUxpbmtzKCkge1xyXG5cdHNpZGViYXJEaXZzLm1hcCgoZGl2KSA9PiB7XHJcblx0XHRkaXYuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuXHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VTdWJNZW51cygpIHtcclxuXHRjb25zdCBzdWJtZW51cyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpZGViYXJfX3N1YmxpbmtzXCIpXTtcclxuXHRzdWJtZW51cy5tYXAoKG1lbnUpID0+IHtcclxuXHRcdGlmIChtZW51LmNsYXNzTGlzdC5jb250YWlucyhcInNob3dTdWJcIikpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bWVudS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1N1YlwiKTtcclxuXHRcdH1cclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IHsgYWRkU2lkZWJhckV2ZW50cyB9O1xyXG4iLCJcclxuaW1wb3J0IFwiLi9zdHlsZXMvc3R5bGUuc2Nzc1wiO1xyXG5pbXBvcnQgeyBhZGRTaWRlYmFyRXZlbnRzIH0gZnJvbSBcIi4vc2NyaXB0cy9zaWRlYmFyLmpzXCI7XHJcbmltcG9ydCB7IGFkZEhlYWRlckV2ZW50cyB9IGZyb20gXCIuL3NjcmlwdHMvaGVhZGVyLmpzXCI7XHJcbmltcG9ydCB7IHJlbmRlck1vZGFsIH0gZnJvbSBcIi4vc2NyaXB0cy9tb2RhbC5qc1wiO1xyXG5pbXBvcnQgeyBhZGRCdXR0b25FdmVudHMgfSBmcm9tIFwiLi9zY3JpcHRzL21vZGFsLmpzXCI7XHJcblxyXG5cclxuaW1wb3J0IHsgZ2V0QXV0aCwgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbmltcG9ydCB7IGFkZEF1dGhFdmVudHMsIHNob3dMb2dpbiB9IGZyb20gXCIuL3NjcmlwdHMvYXV0aFwiO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vaW5pdCBmaXJlYmFzZSBhcHBcclxuXHJcblxyXG4vL2luaXQgc2VydmljZXNcclxuY29uc3QgYXV0aCA9IGdldEF1dGgoKTtcclxuXHJcbi8vY29sbGVjdGlvbiByZWZlcmVuY2VcclxuXHJcblxyXG5cclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNob3dMb2dpbigpKTtcclxuXHJcblxyXG5cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgICAvL2FkZEF1dGhFdmVudHMoKTtcclxuICAgIGFkZFNpZGViYXJFdmVudHMoKTtcclxuICAgIGFkZEhlYWRlckV2ZW50cygpO1xyXG4gICAgLy8gY29uc3QgbW9kYWwgPSByZW5kZXJNb2RhbCgpO1xyXG4gICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XHJcbiAgICBhZGRCdXR0b25FdmVudHMoKTtcclxufSk7XHJcblxyXG4vL2FyZ3VtZW50cyBlbWFpbCBhbmQgcGFzc3dvcmRcclxuLy9wYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nXHJcbi8vZmluZCBvdXQgYWJvdXQgZmlyZWJhc2UgZGlzcGxheU5hbWVcclxuXHJcblxyXG5leHBvcnQgeyBhdXRoIH07XHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiZ2V0VG9kYXlzRGF0ZSIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwidG9nZ2xlTW9kYWwiLCJtb2RhbCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVzZXQiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwidHlwZSIsImNsYXNzTmFtZSIsImVsIiwiY3JlYXRlRWxlbWVudCIsImFkZCIsImNyZWF0ZVRleHRFbGVtZW50V2l0aENsYXNzIiwidGV4dCIsInRleHRDb250ZW50IiwiY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGUiLCJhdHRyIiwiYXR0ck5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJUb2RvIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImRhdGUiLCJwcmlvcml0eSIsInByb2plY3QiLCJpZCIsInRvZG9fX2NvbnRhaW5lciIsInRvZG8iLCJ0b2RvX19kYXRlIiwiZGF0ZTEiLCJhcHBlbmRDaGlsZCIsInRvZG9fX3Byb2plY3QiLCJ0b2RvX19jb250ZW50IiwidG9kb19fdGl0bGUiLCJ0b2RvX19wcmlvcml0eSIsInByaW9yaXR5MSIsInRvZG9fX2J1dHRvbnMiLCJ0b2RvX19tb3JlIiwibW9yZUJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaG93RGV0YWlscyIsInRvZG9fX2VkaXQiLCJlZGl0QnRuIiwiZWRpdFRvZG8iLCJ0b2RvX19kZWxldGUiLCJkZWxldGVCdG4iLCJkZWxldGVUb2RvVUkiLCJhcHBlbmQiLCJ0b2RvX19kZXRhaWxzIiwidG9kb19fZGVzY3JpcHRpb24iLCJ0b2RvX19mdWxsdGl0bGUiLCJjdXJyZW50VGFyZ2V0IiwicGFyZW50RWxlbWVudCIsIm5leHRFbGVtZW50U2libGluZyIsInRvZG9zIiwicmVtb3ZlQ2hpbGQiLCJkYXRhc2V0IiwiZm9yRWFjaCIsImluZGV4IiwiY29uc29sZSIsImxvZyIsInNwbGljZSIsImFzeW5jIiwicmVmIiwidCIsImZpcmVzdG9yZSIsIm4iLCJzIiwiYXN5bmNRdWV1ZSIsImVucXVldWVBbmRGb3JnZXQiLCJpIiwiciIsIm5leHQiLCJqbyIsImEiLCJkb2NzIiwiaGFzIiwiZnJvbUNhY2hlIiwicmVqZWN0IiwiaiIsIlVOQVZBSUxBQkxFIiwic291cmNlIiwicmVzb2x2ZSIsImVycm9yIiwiem8iLCJnZSIsInBhdGgiLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwid28iLCJLbyIsInByb21pc2UiLCJfa2V5IiwidGhlbiIsImxoIiwieHUiLCJrdSIsImhhc1BlbmRpbmdXcml0ZXMiLCJjb252ZXJ0ZXIiLCJSaCIsImV4aXN0cyIsIkFoIiwiaG4iLCJKZSIsIm5vbmUiLCJkZWxldGVEb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidG9kbzIiLCJtYXRjaCIsInB1c2giLCJnZXRUb2RvQnlJZCIsImVsZW1lbnRzIiwibmFtZWRJdGVtIiwidmFsdWUiLCJkdWVEYXRlIiwidXBkYXRlQnRuIiwicmVtb3ZlIiwiZGlzcGxheSIsInVwZGF0ZVRvZG9VSSIsIm1pc2MiLCJob21lIiwid29yayIsInVwZGF0ZVRvZG8iLCJzdGF0dXMiLCJjbGljayIsImNvbnRhaW5lciIsImNsZWFyUHJvamVjdHNVSSIsImNoaWxkcmVuIiwiY2hpbGQiLCJyZW5kZXJUYXNrc0hlYWRlciIsInRhc2tJZCIsInRhc2tUaXRsZSIsInJlbmRlclRhc2tzVUkiLCJ0YXNrcyIsIm1hcCIsInRhc2siLCJjb3VudCIsInNob3dJbmJveCIsImNsZWFySW5ib3hVSSIsImluYm94Iiwic3ViamVjdCIsInRyYXNoQnRuIiwidHJhc2hJY29uIiwiZGVsZXRlTWVzc2FnZSIsImNoZWNrYm94IiwibmFtZSIsImNyZWF0ZUlucHV0RWxlbWVudCIsIm1lc3NhZ2UiLCJtZXNzYWdlU3ViamVjdCIsIm1lc3NhZ2VUaXRsZSIsIm1lc3NhZ2VQcmlvcml0eSIsIm1lc3NhZ2VEdWVEYXRlIiwibWVzc2FnZURlc2NyaXB0aW9uIiwiYmFja1RvSW5ib3giLCJnZXRJbmJveCIsInVwZGF0ZUluYm94Q291bnQiLCJ1cGRhdGVEb2N1bWVudCIsIlN0cmluZyIsInNob3dNZXNzYWdlIiwiZGVsZXRlQWxsIiwia2lkcyIsIkFycmF5IiwiZnJvbSIsImNoZWNrZWQiLCJjb250YWlucyIsImRlbGV0ZVNlbGVjdGVkIiwiZGVsZXRlSW5ib3hNZXNzYWdlIiwiYmFja2dyb3VuZCIsImNvdW50VUkiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJpc0FycmF5IiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsInN0ciIsIm91dCIsImMiLCJjaGFyQ29kZUF0Iiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWZlcnJlZCIsImNvbnN0cnVjdG9yIiwiUHJvbWlzZSIsIndyYXBDYWxsYmFjayIsImNhbGxiYWNrIiwiY2F0Y2giLCJuYXZpZ2F0b3IiLCJpc01vYmlsZUNvcmRvdmEiLCJ0ZXN0IiwiaXNCcm93c2VyRXh0ZW5zaW9uIiwicnVudGltZSIsImNocm9tZSIsImJyb3dzZXIiLCJpc1JlYWN0TmF0aXZlIiwiaXNJRSIsInVhIiwiaW5kZXhPZiIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwiY3VzdG9tRGF0YSIsInN1cGVyIiwic2V0UHJvdG90eXBlT2YiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsImNyZWF0ZSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImIiLCJhS2V5cyIsImtleXMiLCJiS2V5cyIsImsiLCJpbmNsdWRlcyIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwicXVlcnlzdHJpbmdQYXJhbXMiLCJwYXJhbXMiLCJlbnRyaWVzIiwiYXJyYXlWYWwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJxdWVyeXN0cmluZ0RlY29kZSIsInF1ZXJ5c3RyaW5nIiwic3BsaXQiLCJ0b2tlbiIsImRlY29kZVVSSUNvbXBvbmVudCIsImV4dHJhY3RRdWVyeXN0cmluZyIsInVybCIsInF1ZXJ5U3RhcnQiLCJmcmFnbWVudFN0YXJ0Iiwic3Vic3RyaW5nIiwiT2JzZXJ2ZXJQcm94eSIsImV4ZWN1dG9yIiwib25Ob09ic2VydmVycyIsIm9ic2VydmVycyIsInVuc3Vic2NyaWJlcyIsIm9ic2VydmVyQ291bnQiLCJmaW5hbGl6ZWQiLCJmb3JFYWNoT2JzZXJ2ZXIiLCJvYnNlcnZlciIsImNsb3NlIiwiY29tcGxldGUiLCJzdWJzY3JpYmUiLCJuZXh0T3JPYnNlcnZlciIsIm1ldGhvZHMiLCJtZXRob2QiLCJpbXBsZW1lbnRzQW55TWV0aG9kcyIsIm5vb3AiLCJ1bnN1YiIsInVuc3Vic2NyaWJlT25lIiwiYmluZCIsImZpbmFsRXJyb3IiLCJmbiIsInNlbmRPbmUiLCJlcnIiLCJfZGVsZWdhdGUiLCJDb21wb25lbnQiLCJpbnN0YW5jZUZhY3RvcnkiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsImlkZW50aWZpZXIiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImRlZmVycmVkIiwic2V0IiwiaXNJbml0aWFsaXplZCIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiaW5zdGFuY2UiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9ucyIsIl9hIiwib3B0aW9uYWwiLCJnZXRDb21wb25lbnQiLCJzZXRDb21wb25lbnQiLCJpc0NvbXBvbmVudEVhZ2VyIiwiaW5zdGFuY2VEZWZlcnJlZCIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJzZXJ2aWNlcyIsInZhbHVlcyIsImFsbCIsImZpbHRlciIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwidG9JU09TdHJpbmciLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJpbmZvIiwid2FybiIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiYXNzaWduIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJTREtfVkVSU0lPTiIsImdldEFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIl9fcmVzdCIsImdldE93blByb3BlcnR5U3ltYm9scyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwicHJvZEVycm9yTWFwIiwiX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZIiwibG9nQ2xpZW50IiwiX2xvZ0Vycm9yIiwibXNnIiwiX2ZhaWwiLCJhdXRoT3JDb2RlIiwicmVzdCIsImNyZWF0ZUVycm9ySW50ZXJuYWwiLCJfY3JlYXRlRXJyb3IiLCJmdWxsUGFyYW1zIiwic2xpY2UiLCJfZXJyb3JGYWN0b3J5IiwiX2Fzc2VydCIsImFzc2VydGlvbiIsImRlYnVnRmFpbCIsImZhaWx1cmUiLCJkZWJ1Z0Fzc2VydCIsImluc3RhbmNlQ2FjaGUiLCJfZ2V0SW5zdGFuY2UiLCJjbHMiLCJfZ2V0Q3VycmVudFVybCIsInNlbGYiLCJocmVmIiwiX2dldEN1cnJlbnRTY2hlbWUiLCJwcm90b2NvbCIsIkRlbGF5Iiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiTWF0aCIsIm1pbiIsIl9lbXVsYXRvclVybCIsImVtdWxhdG9yIiwic3RhcnRzV2l0aCIsIkZldGNoUHJvdmlkZXIiLCJzdGF0aWMiLCJmZXRjaEltcGwiLCJoZWFkZXJzSW1wbCIsInJlc3BvbnNlSW1wbCIsImZldGNoIiwiSGVhZGVycyIsIlJlc3BvbnNlIiwiU0VSVkVSX0VSUk9SX01BUCIsIkRFRkFVTFRfQVBJX1RJTUVPVVRfTVMiLCJfYWRkVGlkSWZOZWNlc3NhcnkiLCJhdXRoIiwicmVxdWVzdCIsInRlbmFudElkIiwiX3BlcmZvcm1BcGlSZXF1ZXN0IiwiY3VzdG9tRXJyb3JNYXAiLCJfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmciLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInF1ZXJ5IiwiYXBpS2V5IiwiaGVhZGVycyIsIl9nZXRBZGRpdGlvbmFsSGVhZGVycyIsImxhbmd1YWdlQ29kZSIsIl9nZXRGaW5hbFRhcmdldCIsImFwaUhvc3QiLCJyZWZlcnJlclBvbGljeSIsImZldGNoRm4iLCJfY2FuSW5pdEVtdWxhdG9yIiwiZXJyb3JNYXAiLCJuZXR3b3JrVGltZW91dCIsIk5ldHdvcmtUaW1lb3V0IiwicmVzcG9uc2UiLCJyYWNlIiwiY2xlYXJOZXR3b3JrVGltZW91dCIsImpzb24iLCJfbWFrZVRhZ2dlZEVycm9yIiwib2siLCJlcnJvck1lc3NhZ2UiLCJzZXJ2ZXJFcnJvckNvZGUiLCJzZXJ2ZXJFcnJvck1lc3NhZ2UiLCJhdXRoRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsIl9lcnJvcldpdGhDdXN0b21NZXNzYWdlIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJob3N0IiwiYmFzZSIsImFwaVNjaGVtZSIsInRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsImVycm9yUGFyYW1zIiwiZW1haWwiLCJwaG9uZU51bWJlciIsIl90b2tlblJlc3BvbnNlIiwidXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nIiwidXRjVGltZXN0YW1wIiwiTnVtYmVyIiwiaXNOYU4iLCJnZXRUaW1lIiwidG9VVENTdHJpbmciLCJzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMiLCJzZWNvbmRzIiwiX3BhcnNlVG9rZW4iLCJhbGdvcml0aG0iLCJwYXlsb2FkIiwic2lnbmF0dXJlIiwiZGVjb2RlZCIsImJhc2U2NERlY29kZSIsInBhcnNlIiwiX2xvZ291dElmSW52YWxpZGF0ZWQiLCJ1c2VyIiwiYnlwYXNzQXV0aFN0YXRlIiwiaXNVc2VySW52YWxpZGF0ZWQiLCJjdXJyZW50VXNlciIsInNpZ25PdXQiLCJQcm9hY3RpdmVSZWZyZXNoIiwiaXNSdW5uaW5nIiwidGltZXJJZCIsImVycm9yQmFja29mZiIsIl9zdGFydCIsInNjaGVkdWxlIiwiX3N0b3AiLCJnZXRJbnRlcnZhbCIsIndhc0Vycm9yIiwiaW50ZXJ2YWwiLCJzdHNUb2tlbk1hbmFnZXIiLCJleHBpcmF0aW9uVGltZSIsIm1heCIsIml0ZXJhdGlvbiIsImdldElkVG9rZW4iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwiX2NvcHkiLCJtZXRhZGF0YSIsInRvSlNPTiIsIl9yZWxvYWRXaXRob3V0U2F2aW5nIiwiaWRUb2tlbiIsImdldEFjY291bnRJbmZvIiwidXNlcnMiLCJjb3JlQWNjb3VudCIsIl9ub3RpZnlSZWxvYWRMaXN0ZW5lciIsIm5ld1Byb3ZpZGVyRGF0YSIsInByb3ZpZGVyVXNlckluZm8iLCJwcm92aWRlcklkIiwidWlkIiwicmF3SWQiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicGhvdG9VcmwiLCJwcm92aWRlckRhdGEiLCJvcmlnaW5hbCIsIm5ld0RhdGEiLCJzb21lIiwib2xkSXNBbm9ueW1vdXMiLCJpc0Fub255bW91cyIsIm5ld0lzQW5vbnltb3VzIiwicGFzc3dvcmRIYXNoIiwidXBkYXRlcyIsImxvY2FsSWQiLCJlbWFpbFZlcmlmaWVkIiwiU3RzVG9rZW5NYW5hZ2VyIiwicmVmcmVzaFRva2VuIiwiYWNjZXNzVG9rZW4iLCJpc0V4cGlyZWQiLCJ1cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UiLCJleHBpcmVzSW4iLCJwYXJzZWRUb2tlbiIsImV4cCIsImlhdCIsIl90b2tlbkV4cGlyZXNJbiIsInVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24iLCJmb3JjZVJlZnJlc2giLCJyZWZyZXNoIiwiY2xlYXJSZWZyZXNoVG9rZW4iLCJvbGRUb2tlbiIsInRva2VuQXBpSG9zdCIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJyZWZyZXNoX3Rva2VuIiwicmVxdWVzdFN0c1Rva2VuIiwiZXhwaXJlc0luU2VjIiwib2JqZWN0IiwibWFuYWdlciIsIl9hc3NpZ24iLCJfY2xvbmUiLCJfcGVyZm9ybVJlZnJlc2giLCJhc3NlcnRTdHJpbmdPclVuZGVmaW5lZCIsIlVzZXJJbXBsIiwib3B0IiwicHJvYWN0aXZlUmVmcmVzaCIsInJlbG9hZFVzZXJJbmZvIiwicmVsb2FkTGlzdGVuZXIiLCJnZXRUb2tlbiIsIl9wZXJzaXN0VXNlcklmQ3VycmVudCIsIl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQiLCJnZXRJZFRva2VuUmVzdWx0IiwidXNlckludGVybmFsIiwiY2xhaW1zIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduSW5Qcm92aWRlciIsImF1dGhUaW1lIiwiaXNzdWVkQXRUaW1lIiwic2lnbkluU2Vjb25kRmFjdG9yIiwicmVsb2FkIiwidXNlckluZm8iLCJfb25SZWxvYWQiLCJfc3RhcnRQcm9hY3RpdmVSZWZyZXNoIiwiX3N0b3BQcm9hY3RpdmVSZWZyZXNoIiwidG9rZW5zUmVmcmVzaGVkIiwiZGVsZXRlQWNjb3VudCIsIl9yZWRpcmVjdEV2ZW50SWQiLCJfYiIsIl9jIiwiX2QiLCJfZSIsIl9mIiwiX2ciLCJfaCIsInBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyIiwiZnJvbUpTT04iLCJpZFRva2VuUmVzcG9uc2UiLCJJbk1lbW9yeVBlcnNpc3RlbmNlIiwic3RvcmFnZSIsIl9hZGRMaXN0ZW5lciIsIl9saXN0ZW5lciIsIl9yZW1vdmVMaXN0ZW5lciIsImluTWVtb3J5UGVyc2lzdGVuY2UiLCJfcGVyc2lzdGVuY2VLZXlOYW1lIiwiUGVyc2lzdGVuY2VVc2VyTWFuYWdlciIsInBlcnNpc3RlbmNlIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJzZXRDdXJyZW50VXNlciIsIl9zZXQiLCJibG9iIiwiX2dldCIsIl9mcm9tSlNPTiIsInJlbW92ZUN1cnJlbnRVc2VyIiwiX3JlbW92ZSIsInNhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0IiwibmV3UGVyc2lzdGVuY2UiLCJnZXRDdXJyZW50VXNlciIsInBlcnNpc3RlbmNlSGllcmFyY2h5IiwiYXZhaWxhYmxlUGVyc2lzdGVuY2VzIiwiX2lzQXZhaWxhYmxlIiwic2VsZWN0ZWRQZXJzaXN0ZW5jZSIsInVzZXJUb01pZ3JhdGUiLCJtaWdyYXRpb25IaWVyYXJjaHkiLCJfc2hvdWxkQWxsb3dNaWdyYXRpb24iLCJfZ2V0QnJvd3Nlck5hbWUiLCJ1c2VyQWdlbnQiLCJfaXNJRU1vYmlsZSIsIl9pc0ZpcmVmb3giLCJfaXNCbGFja0JlcnJ5IiwiX2lzV2ViT1MiLCJfaXNTYWZhcmkiLCJfaXNDaHJvbWVJT1MiLCJfaXNBbmRyb2lkIiwicmUiLCJtYXRjaGVzIiwiX2lzSU9TIiwiX2lzTW9iaWxlQnJvd3NlciIsIl9nZXRDbGllbnRWZXJzaW9uIiwiY2xpZW50UGxhdGZvcm0iLCJmcmFtZXdvcmtzIiwicmVwb3J0ZWRQbGF0Zm9ybSIsIkF1dGhJbXBsIiwiZW11bGF0b3JDb25maWciLCJvcGVyYXRpb25zIiwiYXV0aFN0YXRlU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwiaWRUb2tlblN1YnNjcmlwdGlvbiIsInJlZGlyZWN0VXNlciIsImlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQiLCJfaXNJbml0aWFsaXplZCIsIl9kZWxldGVkIiwiX2luaXRpYWxpemF0aW9uUHJvbWlzZSIsIl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJsYXN0Tm90aWZpZWRVaWQiLCJzZXR0aW5ncyIsImFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZyIsImNsaWVudFZlcnNpb24iLCJzZGtDbGllbnRWZXJzaW9uIiwiX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UiLCJwb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJxdWV1ZSIsInBlcnNpc3RlbmNlTWFuYWdlciIsIl9zaG91bGRJbml0UHJvYWN0aXZlbHkiLCJfaW5pdGlhbGl6ZSIsImluaXRpYWxpemVDdXJyZW50VXNlciIsImFzc2VydGVkUGVyc2lzdGVuY2UiLCJfY3VycmVudFVzZXIiLCJfdXBkYXRlQ3VycmVudFVzZXIiLCJzdG9yZWRVc2VyIiwiYXV0aERvbWFpbiIsImdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIiwicmVkaXJlY3RVc2VyRXZlbnRJZCIsInN0b3JlZFVzZXJFdmVudElkIiwicmVzdWx0IiwidHJ5UmVkaXJlY3RTaWduSW4iLCJkaXJlY3RseVNldEN1cnJlbnRVc2VyIiwicmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyIiwicmVkaXJlY3RSZXNvbHZlciIsIl9jb21wbGV0ZVJlZGlyZWN0Rm4iLCJfc2V0UmVkaXJlY3RVc2VyIiwidXNlRGV2aWNlTGFuZ3VhZ2UiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVzZXJFeHRlcm4iLCJub3RpZnlBdXRoTGlzdGVuZXJzIiwicmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJzZXRQZXJzaXN0ZW5jZSIsIl9nZXRQZXJzaXN0ZW5jZSIsIl91cGRhdGVFcnJvck1hcCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsImNvbXBsZXRlZCIsInJlZ2lzdGVyU3RhdGVMaXN0ZW5lciIsIm9uSWRUb2tlbkNoYW5nZWQiLCJyZWRpcmVjdE1hbmFnZXIiLCJyZXNvbHZlciIsIl9yZWRpcmVjdFBlcnNpc3RlbmNlIiwiY3VycmVudFVpZCIsInN1YnNjcmlwdGlvbiIsImNiIiwiYWRkT2JzZXJ2ZXIiLCJhY3Rpb24iLCJfbG9nRnJhbWV3b3JrIiwiZnJhbWV3b3JrIiwic29ydCIsIl9nZXRGcmFtZXdvcmtzIiwiYXBwSWQiLCJfY2FzdEF1dGgiLCJwcm94eSIsImNyZWF0ZVN1YnNjcmliZSIsIkF1dGhDcmVkZW50aWFsIiwic2lnbkluTWV0aG9kIiwiX2dldElkVG9rZW5SZXNwb25zZSIsIl9hdXRoIiwiX2xpbmtUb0lkVG9rZW4iLCJfaWRUb2tlbiIsIl9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIiLCJFbWFpbEF1dGhDcmVkZW50aWFsIiwiX2VtYWlsIiwiX3Bhc3N3b3JkIiwiX3RlbmFudElkIiwicGFzc3dvcmQiLCJvb2JDb2RlIiwiX2Zyb21FbWFpbEFuZFBhc3N3b3JkIiwiX2Zyb21FbWFpbEFuZENvZGUiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJyZXR1cm5TZWN1cmVUb2tlbiIsInNpZ25JbldpdGhFbWFpbExpbmskMSIsInVwZGF0ZUVtYWlsUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyIsInNpZ25JbldpdGhJZHAiLCJPQXV0aENyZWRlbnRpYWwiLCJhcmd1bWVudHMiLCJwZW5kaW5nVG9rZW4iLCJjcmVkIiwibm9uY2UiLCJvYXV0aFRva2VuIiwib2F1dGhUb2tlblNlY3JldCIsInNlY3JldCIsImJ1aWxkUmVxdWVzdCIsImF1dG9DcmVhdGUiLCJyZXF1ZXN0VXJpIiwicG9zdEJvZHkiLCJWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfIiwiUGhvbmVBdXRoQ3JlZGVudGlhbCIsInZlcmlmaWNhdGlvbklkIiwidmVyaWZpY2F0aW9uQ29kZSIsInRlbXBvcmFyeVByb29mIiwic2lnbkluV2l0aFBob25lTnVtYmVyJDEiLCJfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QiLCJsaW5rV2l0aFBob25lTnVtYmVyJDEiLCJvcGVyYXRpb24iLCJ2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nIiwic2Vzc2lvbkluZm8iLCJBY3Rpb25Db2RlVVJMIiwiYWN0aW9uTGluayIsInNlYXJjaFBhcmFtcyIsInBhcnNlTW9kZSIsImNvbnRpbnVlVXJsIiwibGluayIsImRvdWJsZURlZXBMaW5rIiwiaU9TRGVlcExpbmsiLCJwYXJzZURlZXBMaW5rIiwiRW1haWxBdXRoUHJvdmlkZXIiLCJQUk9WSURFUl9JRCIsImVtYWlsTGluayIsImFjdGlvbkNvZGVVcmwiLCJwYXJzZUxpbmsiLCJFTUFJTF9QQVNTV09SRF9TSUdOX0lOX01FVEhPRCIsIkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QiLCJGZWRlcmF0ZWRBdXRoUHJvdmlkZXIiLCJkZWZhdWx0TGFuZ3VhZ2VDb2RlIiwiY3VzdG9tUGFyYW1ldGVycyIsInNldERlZmF1bHRMYW5ndWFnZSIsInNldEN1c3RvbVBhcmFtZXRlcnMiLCJjdXN0b21PQXV0aFBhcmFtZXRlcnMiLCJnZXRDdXN0b21QYXJhbWV0ZXJzIiwiQmFzZU9BdXRoUHJvdmlkZXIiLCJzY29wZXMiLCJhZGRTY29wZSIsInNjb3BlIiwiZ2V0U2NvcGVzIiwiRmFjZWJvb2tBdXRoUHJvdmlkZXIiLCJfZnJvbVBhcmFtcyIsIkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EIiwidXNlckNyZWRlbnRpYWwiLCJjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCIsInRva2VuUmVzcG9uc2UiLCJvYXV0aEFjY2Vzc1Rva2VuIiwiY3JlZGVudGlhbCIsIkdvb2dsZUF1dGhQcm92aWRlciIsIkdPT0dMRV9TSUdOX0lOX01FVEhPRCIsIm9hdXRoSWRUb2tlbiIsIkdpdGh1YkF1dGhQcm92aWRlciIsIkdJVEhVQl9TSUdOX0lOX01FVEhPRCIsIlR3aXR0ZXJBdXRoUHJvdmlkZXIiLCJUV0lUVEVSX1NJR05fSU5fTUVUSE9EIiwiVXNlckNyZWRlbnRpYWxJbXBsIiwib3BlcmF0aW9uVHlwZSIsIl9mcm9tSWRUb2tlblJlc3BvbnNlIiwicHJvdmlkZXJJZEZvclJlc3BvbnNlIiwiX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5IiwiTXVsdGlGYWN0b3JFcnJvciIsIl9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeSIsIl9mcm9tRXJyb3JBbmRPcGVyYXRpb24iLCJfc2lnbkluV2l0aENyZWRlbnRpYWwiLCJXZWFrTWFwIiwiU1RPUkFHRV9BVkFJTEFCTEVfS0VZIiwiQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3MiLCJzdG9yYWdlUmV0cmlldmVyIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwiQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJsb2NhbFN0b3JhZ2UiLCJldmVudCIsInBvbGwiLCJvblN0b3JhZ2VFdmVudCIsImxpc3RlbmVycyIsImxvY2FsQ2FjaGUiLCJwb2xsVGltZXIiLCJzYWZhcmlMb2NhbFN0b3JhZ2VOb3RTeW5jZWQiLCJfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UiLCJ0b3AiLCJfaXNJZnJhbWUiLCJmYWxsYmFja1RvUG9sbGluZyIsImZvckFsbENoYW5nZWRLZXlzIiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsIl9vbGRWYWx1ZSIsIm5vdGlmeUxpc3RlbmVycyIsImRldGFjaExpc3RlbmVyIiwic3RvcFBvbGxpbmciLCJzdG9yZWRWYWx1ZSIsInRyaWdnZXJMaXN0ZW5lcnMiLCJkb2N1bWVudE1vZGUiLCJsaXN0ZW5lciIsInN0YXJ0UG9sbGluZyIsInNldEludGVydmFsIiwiU3RvcmFnZUV2ZW50IiwiY2xlYXJJbnRlcnZhbCIsImF0dGFjaExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNpemUiLCJicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSIsIkJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJzZXNzaW9uU3RvcmFnZSIsImJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJSZWNlaXZlciIsImV2ZW50VGFyZ2V0IiwiaGFuZGxlcnNNYXAiLCJoYW5kbGVFdmVudCIsInJlY2VpdmVycyIsImZpbmQiLCJyZWNlaXZlciIsImlzTGlzdGVuaW5ndG8iLCJuZXdJbnN0YW5jZSIsIm1lc3NhZ2VFdmVudCIsImV2ZW50SWQiLCJldmVudFR5cGUiLCJoYW5kbGVycyIsInBvcnRzIiwicG9zdE1lc3NhZ2UiLCJwcm9taXNlcyIsImhhbmRsZXIiLCJvcmlnaW4iLCJmdWxmaWxsZWQiLCJyZWFzb24iLCJfYWxsU2V0dGxlZCIsIl9zdWJzY3JpYmUiLCJldmVudEhhbmRsZXIiLCJfdW5zdWJzY3JpYmUiLCJfZ2VuZXJhdGVFdmVudElkIiwicHJlZml4IiwiZGlnaXRzIiwicmFuZG9tIiwiZmxvb3IiLCJTZW5kZXIiLCJ0YXJnZXQiLCJyZW1vdmVNZXNzYWdlSGFuZGxlciIsIm1lc3NhZ2VDaGFubmVsIiwicG9ydDEiLCJvbk1lc3NhZ2UiLCJ0aW1lb3V0IiwiTWVzc2FnZUNoYW5uZWwiLCJjb21wbGV0aW9uVGltZXIiLCJzdGFydCIsImFja1RpbWVyIiwicG9ydDIiLCJmaW5hbGx5IiwiX3dpbmRvdyIsIl9pc1dvcmtlciIsIkRCX05BTUUiLCJEQl9PQkpFQ1RTVE9SRV9OQU1FIiwiREJfREFUQV9LRVlQQVRIIiwiREJQcm9taXNlIiwidG9Qcm9taXNlIiwiZ2V0T2JqZWN0U3RvcmUiLCJkYiIsImlzUmVhZFdyaXRlIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsIl9vcGVuRGF0YWJhc2UiLCJpbmRleGVkREIiLCJvcGVuIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwib2JqZWN0U3RvcmVOYW1lcyIsImRlbGV0ZURhdGFiYXNlIiwiX2RlbGV0ZURhdGFiYXNlIiwiX3B1dE9iamVjdCIsInB1dCIsIl9kZWxldGVPYmplY3QiLCJJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwicGVuZGluZ1dyaXRlcyIsInNlbmRlciIsInNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSIsImFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJfd29ya2VySW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmciLCJvcCIsIm51bUF0dGVtcHRzIiwiX29wZW5EYiIsImluaXRpYWxpemVSZWNlaXZlciIsImluaXRpYWxpemVTZW5kZXIiLCJfb3JpZ2luIiwia2V5UHJvY2Vzc2VkIiwiX3BvbGwiLCJfZGF0YSIsInNlcnZpY2VXb3JrZXIiLCJyZWFkeSIsImFjdGl2ZSIsIl9nZXRBY3RpdmVTZXJ2aWNlV29ya2VyIiwicmVzdWx0cyIsIl9zZW5kIiwiY29udHJvbGxlciIsIl9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlciIsIndyaXRlIiwiX3dpdGhQZW5kaW5nV3JpdGUiLCJfd2l0aFJldHJpZXMiLCJub3RpZnlTZXJ2aWNlV29ya2VyIiwiZ2V0T2JqZWN0IiwiZ2V0QWxsUmVxdWVzdCIsImdldEFsbCIsImtleXNJblJlc3VsdCIsImZiYXNlX2tleSIsImxvY2FsS2V5IiwiaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSIsIl9nZW5lcmF0ZUNhbGxiYWNrTmFtZSIsIlBob25lQXV0aFByb3ZpZGVyIiwidmVyaWZ5UGhvbmVOdW1iZXIiLCJwaG9uZU9wdGlvbnMiLCJhcHBsaWNhdGlvblZlcmlmaWVyIiwidmVyaWZpZXIiLCJyZWNhcHRjaGFUb2tlbiIsInZlcmlmeSIsInBob25lSW5mb09wdGlvbnMiLCJzZXNzaW9uIiwic3RhcnRFbnJvbGxQaG9uZU1mYSIsInBob25lRW5yb2xsbWVudEluZm8iLCJwaG9uZVNlc3Npb25JbmZvIiwibWZhRW5yb2xsbWVudElkIiwibXVsdGlGYWN0b3JIaW50IiwibXVsdGlGYWN0b3JVaWQiLCJzdGFydFNpZ25JblBob25lTWZhIiwibWZhUGVuZGluZ0NyZWRlbnRpYWwiLCJwaG9uZVNpZ25JbkluZm8iLCJwaG9uZVJlc3BvbnNlSW5mbyIsInNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUiLCJfcmVzZXQiLCJfdmVyaWZ5UGhvbmVOdW1iZXIiLCJfZnJvbVZlcmlmaWNhdGlvbiIsIl9mcm9tVG9rZW5SZXNwb25zZSIsIlBIT05FX1NJR05fSU5fTUVUSE9EIiwiSWRwQ3JlZGVudGlhbCIsIl9idWlsZElkcFJlcXVlc3QiLCJzZXNzaW9uSWQiLCJyZXR1cm5JZHBDcmVkZW50aWFsIiwiX3NpZ25JbiIsIl9yZWF1dGgiLCJwYXJzZWQiLCJzdWIiLCJfZm9yT3BlcmF0aW9uIiwiX3JlYXV0aGVudGljYXRlIiwiX2xpbmsiLCJfbGluayQxIiwiQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIiwicGVuZGluZ1Byb21pc2UiLCJldmVudE1hbmFnZXIiLCJleGVjdXRlIiwib25FeGVjdXRpb24iLCJyZWdpc3RlckNvbnN1bWVyIiwidXJsUmVzcG9uc2UiLCJnZXRJZHBUYXNrIiwib25FcnJvciIsInVucmVnaXN0ZXJBbmRDbGVhblVwIiwidW5yZWdpc3RlckNvbnN1bWVyIiwiY2xlYW5VcCIsIl9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VUIiwiUG9wdXBPcGVyYXRpb24iLCJhdXRoV2luZG93IiwicG9sbElkIiwiY3VycmVudFBvcHVwQWN0aW9uIiwiY2FuY2VsIiwiX29wZW5Qb3B1cCIsImFzc29jaWF0ZWRFdmVudCIsIl9vcmlnaW5WYWxpZGF0aW9uIiwiX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZCIsImlzU3VwcG9ydGVkIiwicG9sbFVzZXJDYW5jZWxsYXRpb24iLCJjbG9zZWQiLCJyZWRpcmVjdE91dGNvbWVNYXAiLCJSZWRpcmVjdEFjdGlvbiIsInJlYWR5T3V0Y29tZSIsImhhc1BlbmRpbmdSZWRpcmVjdCIsInBlbmRpbmdSZWRpcmVjdEtleSIsInJlc29sdmVyUGVyc2lzdGVuY2UiLCJfZ2V0QW5kQ2xlYXJQZW5kaW5nUmVkaXJlY3RTdGF0dXMiLCJvbkF1dGhFdmVudCIsIl9yZWRpcmVjdFVzZXJGb3JJZCIsIl9nZXRSZWRpcmVjdFJlc3VsdCIsInJlc29sdmVyRXh0ZXJuIiwiYXV0aEludGVybmFsIiwicmVzb2x2ZXJPdmVycmlkZSIsIl93aXRoRGVmYXVsdFJlc29sdmVyIiwiQXV0aEV2ZW50TWFuYWdlciIsImNhY2hlZEV2ZW50VWlkcyIsImNvbnN1bWVycyIsInF1ZXVlZFJlZGlyZWN0RXZlbnQiLCJoYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QiLCJsYXN0UHJvY2Vzc2VkRXZlbnRUaW1lIiwiYXV0aEV2ZW50Q29uc3VtZXIiLCJpc0V2ZW50Rm9yQ29uc3VtZXIiLCJzZW5kVG9Db25zdW1lciIsInNhdmVFdmVudFRvQ2FjaGUiLCJvbkV2ZW50IiwiaGFzRXZlbnRCZWVuSGFuZGxlZCIsImhhbmRsZWQiLCJjb25zdW1lciIsImlzTnVsbFJlZGlyZWN0RXZlbnQiLCJpc1JlZGlyZWN0RXZlbnQiLCJldmVudElkTWF0Y2hlcyIsImNsZWFyIiwiZXZlbnRVaWQiLCJ2IiwiSVBfQUREUkVTU19SRUdFWCIsIkhUVFBfUkVHRVgiLCJtYXRjaERvbWFpbiIsImV4cGVjdGVkIiwiY3VycmVudFVybCIsImhvc3RuYW1lIiwiVVJMIiwiY2VVcmwiLCJlc2NhcGVkRG9tYWluUGF0dGVybiIsIlJlZ0V4cCIsIk5FVFdPUktfVElNRU9VVCIsInJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcyIsImJlYWNvbiIsIl9fX2pzbCIsIkgiLCJoaW50IiwiTCIsIkNQIiwiY2FjaGVkR0FwaUxvYWRlciIsIl9sb2FkR2FwaSIsImxvYWRHYXBpSWZyYW1lIiwiZ2FwaSIsImxvYWQiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIm9udGltZW91dCIsIklmcmFtZSIsImNiTmFtZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJjaGFyc2V0IiwiZ2V0U2NyaXB0UGFyZW50RWxlbWVudCIsImxvYWRHYXBpIiwiUElOR19USU1FT1VUIiwiSUZSQU1FX0FUVFJJQlVURVMiLCJzdHlsZSIsInBvc2l0aW9uIiwid2lkdGgiLCJoZWlnaHQiLCJ0YWJpbmRleCIsIkVJRF9GUk9NX0FQSUhPU1QiLCJnZXRJZnJhbWVVcmwiLCJlaWQiLCJmdyIsIkJBU0VfUE9QVVBfT1BUSU9OUyIsInJlc2l6YWJsZSIsInN0YXR1c2JhciIsInRvb2xiYXIiLCJBdXRoUG9wdXAiLCJfZ2V0UmVkaXJlY3RVcmwiLCJhdXRoVHlwZSIsInJlZGlyZWN0VXJsIiwiYWRkaXRpb25hbFBhcmFtcyIsImlzRW1wdHkiLCJ0aWQiLCJwYXJhbXNEaWN0IiwiZ2V0SGFuZGxlckJhc2UiLCJXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSIsImJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJldmVudE1hbmFnZXJzIiwib3JpZ2luVmFsaWRhdGlvblByb21pc2VzIiwic2NyZWVuIiwiYXZhaWxIZWlnaHQiLCJ0b1N0cmluZyIsImxlZnQiLCJhdmFpbFdpZHRoIiwic2Nyb2xsYmFycyIsIm9wdGlvbnNTdHJpbmciLCJyZWR1Y2UiLCJhY2N1bSIsInN0YW5kYWxvbmUiLCJfaXNJT1NTdGFuZGFsb25lIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJvcGVuQXNOZXdXaW5kb3dJT1MiLCJuZXdXaW4iLCJmb2N1cyIsIl9vcGVuIiwiaW5pdEFuZEdldE1hbmFnZXIiLCJpZnJhbWUiLCJjb250ZXh0Iiwid2hlcmUiLCJtZXNzYWdlSGFuZGxlcnNGaWx0ZXIiLCJDUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIiLCJhdHRyaWJ1dGVzIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJzZW5kIiwiYXV0aG9yaXplZERvbWFpbnMiLCJfZ2V0UHJvamVjdENvbmZpZyIsImRvbWFpbiIsIl92YWxpZGF0ZU9yaWdpbiIsIkF1dGhJbnRlcm9wIiwiaW50ZXJuYWxMaXN0ZW5lcnMiLCJnZXRVaWQiLCJhc3NlcnRBdXRoQ29uZmlndXJlZCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwidW5zdWJzY3JpYmUiLCJ1cGRhdGVQcm9hY3RpdmVSZWZyZXNoIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJkZXBzIiwiYXV0aEluc3RhbmNlIiwiaGllcmFyY2h5IiwiX2luaXRpYWxpemVBdXRoSW5zdGFuY2UiLCJfaW5zdGFuY2VJZGVudGlmaWVyIiwiX2luc3RhbmNlIiwiZ2V0VmVyc2lvbkZvclBsYXRmb3JtIiwiYWRkVXNlck5hbWUiLCJjbG9zZVNpZGViYXIiLCJzaWRlYmFyIiwidXBsb2FkUGljIiwicmVhZFVybCIsInByb2ZpbGVQaWMiLCJwcm9maWxlQ29udGFpbmVyIiwiZmlsZXMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzRGF0YVVSTCIsImhpZGVMb2dpbiIsImhlYWRlciIsImFkZEJ0biIsImNsZWFyVUkiLCJjb21tb25qc0dsb2JhbCIsImVzbSIsImdvb2ciLCJsIiwiYWEiLCJiYSIsImVhIiwiZmEiLCJoYSIsImFwcGx5IiwiaWEiLCJ1bnNoaWZ0IiwicSIsImphIiwiWiIsIlZiIiwiZiIsImgiLCJsYSIsIm5hIiwiTSIsImRhIiwic2hpZnQiLCJtYSIsInFhIiwiY29uY2F0IiwicmEiLCJzYSIsIngiLCJ0YSIsInRyaW0iLCJleGVjIiwidyIsInZhIiwid2EiLCJ4YSIsInlhIiwiemEiLCJBYSIsIkNhIiwiTmEiLCJIYSIsInkiLCJJYSIsIkphIiwiS2EiLCJMYSIsIk1hIiwiT2EiLCJQYSIsIlFhIiwicGFyc2VGbG9hdCIsIlNhIiwiR2EiLCJSYSIsInBhcnNlSW50IiwiVWEiLCJWYSIsInoiLCJkZWZhdWx0UHJldmVudGVkIiwiQSIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b24iLCJzY3JlZW5ZIiwic2NyZWVuWCIsImNsaWVudFkiLCJjbGllbnRYIiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsInN0YXRlIiwicG9pbnRlcklkIiwicG9pbnRlclR5cGUiLCJjaGFuZ2VkVG91Y2hlcyIsInNyY0VsZW1lbnQiLCJub2RlTmFtZSIsImZyb21FbGVtZW50IiwidG9FbGVtZW50IiwicGFnZVgiLCJwYWdlWSIsIldhIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsIkIiLCJYYSIsIllhIiwiY2FwdHVyZSIsImNhIiwiWmEiLCIkYSIsImJiIiwiYWIiLCJmYiIsIm9uY2UiLCJnYiIsImhiIiwiTiIsImliIiwiamIiLCJtYiIsImtiIiwiYXR0YWNoRXZlbnQiLCJsYiIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJPIiwibmIiLCJvYiIsImRldGFjaEV2ZW50IiwicGIiLCJDIiwiUCIsIkkiLCJEIiwicWIiLCJyYiIsInNiIiwidGIiLCJBYiIsInZiIiwid2IiLCJ5YiIsInpiIiwiRGIiLCJCYiIsIkNiIiwiRWIiLCJGYiIsIlMiLCJHYiIsIkhiIiwibSIsIkliIiwiRSIsIkpiIiwiS2IiLCJMYiIsIk1iIiwiRiIsIlBiIiwiUmIiLCJTYiIsIlRiIiwiVWIiLCJTVEFUX0VWRU5UIiwic3RhdCIsIkoiLCJLIiwiV2IiLCJOT19FUlJPUiIsInhiIiwiVElNRU9VVCIsIlhiIiwiWWIiLCJaYiIsIiRiIiwiY2MiLCJPUEVOIiwiYWMiLCJiYyIsImRjIiwiWCIsIlYiLCJlYyIsIlciLCJZIiwiJCIsIlUiLCJmYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZ2MiLCJoYyIsImljIiwiamMiLCJrYyIsImxjIiwibWMiLCJuYyIsIkciLCJOYiIsInFjIiwiQmEiLCJ0YyIsInZjIiwic2MiLCJ3YyIsInJjIiwic3Vic3RyIiwieGMiLCJlYiIsInBjIiwidWMiLCJhYm9ydCIsInljIiwiemMiLCJBYyIsIkJjIiwiQ2MiLCJrYSIsIlEiLCJEYSIsIkVhIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJEYyIsIlIiLCJvYSIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiSWMiLCJLYyIsIlQiLCJKYyIsIkxjIiwiZ2EiLCJvYyIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwic3RyZWFtIiwiT2IiLCJRYiIsIk1jIiwiT2MiLCJQYyIsIlFjIiwiUmMiLCJTYyIsIlRjIiwiZGQiLCJaYyIsIlVjIiwiJGMiLCJhYnMiLCJkZWNvZGVVUkkiLCJlbmNvZGVVUkkiLCJjZCIsIlZjIiwiV2MiLCJYYyIsIlljIiwiTmMiLCJlZCIsImdkIiwiaGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJqZCIsImtkIiwibGQiLCJtZCIsIm9kIiwib25hYm9ydCIsInBkIiwicWQiLCJyZWFkeVN0YXRlIiwicmQiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwidWQiLCJyZWFkIiwidGQiLCJzZCIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJUYSIsIlJlYWRhYmxlU3RyZWFtIiwiZ2V0UmVhZGVyIiwiVWludDhBcnJheSIsImRvbmUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwidmQiLCJ3ZCIsInhkIiwieWQiLCJwYSIsInpkIiwiQ2QiLCJEZCIsIkVkIiwiRmEiLCJBZCIsIm1velJlc3BvbnNlQXJyYXlCdWZmZXIiLCJHZCIsIkZkIiwiSGQiLCJpbnRlcm5hbENoYW5uZWxQYXJhbXMiLCJJZCIsInhtbEh0dHBGYWN0b3J5Iiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImNvbmN1cnJlbnRSZXF1ZXN0TGltaXQiLCJmYXN0SGFuZHNoYWtlIiwiZm9yY2VMb25nUG9sbGluZyIsImRldGVjdEJ1ZmZlcmluZ1Byb3h5IiwiSmQiLCJLZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkxkIiwiTWQiLCJRZCIsIlBkIiwicm91bmQiLCJPZCIsIlJkIiwiTmQiLCJuZCIsImFkIiwiYmQiLCJwb3J0IiwiU2QiLCJUZCIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJodHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtIiwic2VuZFJhd0pzb24iLCJodHRwU2Vzc2lvbklkUGFyYW0iLCJVZCIsIl9fc21fXyIsIlZkIiwidG9VcHBlckNhc2UiLCJGb3JtRGF0YSIsIndpdGhDcmVkZW50aWFscyIsIkJkIiwiX19kYXRhX18iLCJjcmVhdGVXZWJDaGFubmVsIiwiSFRUUF9FUlJPUiIsIkNPTVBMRVRFIiwiRXZlbnRUeXBlIiwiQ0xPU0UiLCJNRVNTQUdFIiwibGlzdGVuIiwibGlzdGVuT25jZSIsImdldExhc3RFcnJvciIsImdldExhc3RFcnJvckNvZGUiLCJnZXRTdGF0dXMiLCJnZXRSZXNwb25zZUpzb24iLCJnZXRSZXNwb25zZVRleHQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiZ2V0U3RhdEV2ZW50VGFyZ2V0IiwiRXJyb3JDb2RlIiwiRXZlbnQiLCJTdGF0IiwidWIiLCJQUk9YWSIsIk5PUFJPWFkiLCJGZXRjaFhtbEh0dHBGYWN0b3J5IiwiV2ViQ2hhbm5lbCIsIlhocklvIiwiaXNBdXRoZW50aWNhdGVkIiwidG9LZXkiLCJpc0VxdWFsIiwiVU5BVVRIRU5USUNBVEVEIiwiR09PR0xFX0NSRURFTlRJQUxTIiwiRklSU1RfUEFSVFkiLCJNT0NLX1VTRVIiLCJPSyIsIkNBTkNFTExFRCIsIlVOS05PV04iLCJJTlZBTElEX0FSR1VNRU5UIiwiREVBRExJTkVfRVhDRUVERUQiLCJOT1RfRk9VTkQiLCJBTFJFQURZX0VYSVNUUyIsIlBFUk1JU1NJT05fREVOSUVEIiwiUkVTT1VSQ0VfRVhIQVVTVEVEIiwiRkFJTEVEX1BSRUNPTkRJVElPTiIsIkFCT1JURUQiLCJPVVRfT0ZfUkFOR0UiLCJVTklNUExFTUVOVEVEIiwiREFUQV9MT1NTIiwiaW52YWxpZGF0ZVRva2VuIiwiZW5xdWV1ZVJldHJ5YWJsZSIsInNodXRkb3duIiwiZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSIsImFwcENoZWNrIiwiYWRkVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuTGlzdGVuZXIiLCJldCIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwibnQiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsInN0IiwiaXQiLCJydCIsImV2ZXJ5IiwiYXQiLCJuYW5vc2Vjb25kcyIsImZyb21NaWxsaXMiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIl9jb21wYXJlVG8iLCJ2YWx1ZU9mIiwicGFkU3RhcnQiLCJjdCIsInRpbWVzdGFtcCIsImNvbXBhcmVUbyIsInRvTWljcm9zZWNvbmRzIiwidG9UaW1lc3RhbXAiLCJ1dCIsImh0IiwibHQiLCJmdCIsInNlZ21lbnRzIiwib2Zmc2V0IiwibGVuIiwiY29tcGFyYXRvciIsImxpbWl0IiwiY29uc3RydWN0IiwicG9wRmlyc3QiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc1ByZWZpeE9mIiwiaXNJbW1lZGlhdGVQYXJlbnRPZiIsInRvQXJyYXkiLCJkdCIsImNhbm9uaWNhbFN0cmluZyIsInd0IiwiX3QiLCJpc1ZhbGlkSWRlbnRpZmllciIsImlzS2V5RmllbGQiLCJtdCIsImZpZWxkcyIsImNvdmVycyIsInl0IiwiYmluYXJ5U3RyaW5nIiwidG9CYXNlNjQiLCJ0b1VpbnQ4QXJyYXkiLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiRU1QVFlfQllURV9TVFJJTkciLCJwdCIsIlR0IiwibmFub3MiLCJFdCIsIkl0IiwiZnJvbUJhc2U2NFN0cmluZyIsImZyb21VaW50OEFycmF5IiwiQXQiLCJtYXBWYWx1ZSIsIl9fdHlwZV9fIiwic3RyaW5nVmFsdWUiLCJSdCIsIl9fcHJldmlvdXNfdmFsdWVfXyIsIlB0IiwiX19sb2NhbF93cml0ZV90aW1lX18iLCJ0aW1lc3RhbXBWYWx1ZSIsImJ0IiwidnQiLCJTdCIsImZyb21TdHJpbmciLCJoYXNDb2xsZWN0aW9uSWQiLCJEdCIsIkN0IiwiYm9vbGVhblZhbHVlIiwiYnl0ZXNWYWx1ZSIsInJlZmVyZW5jZVZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJhcnJheVZhbHVlIiwiTnQiLCJrdCIsInh0IiwiJHQiLCJGdCIsImZyb21OYW1lIiwiTXQiLCJMdCIsIkJ0IiwiVXQiLCJxdCIsIkt0IiwianQiLCJmaWVsZCIsImdldEZpZWxkc01hcCIsInNldEFsbCIsImVtcHR5UGF0aCIsImFwcGx5Q2hhbmdlcyIsImNsb25lIiwiUXQiLCJXdCIsImRvY3VtZW50VHlwZSIsImRvY3VtZW50U3RhdGUiLCJlbXB0eSIsImNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQiLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50Iiwic2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNMb2NhbE11dGF0aW9ucyIsImhhc0NvbW1pdHRlZE11dGF0aW9ucyIsImlzVmFsaWREb2N1bWVudCIsImlzRm91bmREb2N1bWVudCIsImlzTm9Eb2N1bWVudCIsImlzVW5rbm93bkRvY3VtZW50IiwiR3QiLCJjb2xsZWN0aW9uR3JvdXAiLCJvcmRlckJ5IiwiZmlsdGVycyIsInN0YXJ0QXQiLCJlbmRBdCIsInp0IiwiSHQiLCJ0ZSIsImRpciIsImhlIiwiWXQiLCJmZSIsIndlIiwiWHQiLCJpc0RvY3VtZW50S2V5IiwiWnQiLCJlZSIsIm9lIiwiYWUiLCJjZSIsIm5lIiwic2UiLCJpZSIsIm51bGxWYWx1ZSIsInVlIiwiYmVmb3JlIiwibGUiLCJkZSIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsInllIiwicGUiLCJBZSIsIkVlIiwiVGUiLCJrZXlGaWVsZCIsIlJlIiwiYmUiLCJ2ZSIsIlZlIiwiSnQiLCJTZSIsIkRlIiwiQ2UiLCJOZSIsImtlIiwieGUiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIlZ0IiwiJGUiLCJGZSIsIkxlIiwiQmUiLCJVZSIsInFlIiwiS2UiLCJNZSIsIlFlIiwiT2UiLCJqZSIsIldlIiwiSGUiLCJ0cmFuc2Zvcm1SZXN1bHRzIiwidXBkYXRlVGltZSIsImlzTm9uZSIsIlllIiwiWGUiLCJaZSIsInJuIiwiY24iLCJmaWVsZFRyYW5zZm9ybXMiLCJvbiIsInByZWNvbmRpdGlvbiIsImFuIiwidG4iLCJ1biIsInNuIiwiZW4iLCJ0cmFuc2Zvcm0iLCJubiIsInplIiwiZmllbGRNYXNrIiwibG4iLCJkbiIsInduIiwibW4iLCJnbiIsInJvb3QiLCJwbiIsIkVNUFRZIiwiaW5zZXJ0IiwiY29weSIsIkJMQUNLIiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwieW4iLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsInBvcCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJwb3ciLCJUbiIsImZpcnN0IiwibGFzdCIsImZvckVhY2hJblJhbmdlIiwiZm9yRWFjaFdoaWxlIiwiZmlyc3RBZnRlck9yRXF1YWwiLCJFbiIsInVuaW9uV2l0aCIsIml0ZXIiLCJJbiIsIkFuIiwiUm4iLCJQbiIsImJuIiwiVm4iLCJTbiIsIkRuIiwiQ24iLCJObiIsInNuYXBzaG90VmVyc2lvbiIsInRhcmdldENoYW5nZXMiLCJ0YXJnZXRNaXNtYXRjaGVzIiwiZG9jdW1lbnRVcGRhdGVzIiwicmVzb2x2ZWRMaW1ib0RvY3VtZW50cyIsImtuIiwiY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlIiwicmVzdW1lVG9rZW4iLCJjdXJyZW50IiwiYWRkZWREb2N1bWVudHMiLCJtb2RpZmllZERvY3VtZW50cyIsInJlbW92ZWREb2N1bWVudHMiLCJ4biIsInJlbW92ZWRUYXJnZXRJZHMiLCIkbiIsInRhcmdldElkIiwiRm4iLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIk9uIiwiQm4iLCJ0dCIsIk1uIiwiTG4iLCJvdCIsImZvckVhY2hUYXJnZXQiLCJyZW1vdmVUYXJnZXQiLCJuZXdOb0RvY3VtZW50IiwiZ3QiLCJwdXJwb3NlIiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIlVuIiwiYXNjIiwiZGVzYyIsInFuIiwiaW4iLCJLbiIsImRhdGFiYXNlSWQiLCJqbiIsIlFuIiwiV24iLCJHbiIsImZyb21UaW1lc3RhbXAiLCJ6biIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiSG4iLCJBcyIsIkpuIiwiWW4iLCJlcyIsIlhuIiwidHMiLCJucyIsInVzIiwiZG9jdW1lbnRzIiwiaHMiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJwYXJlbnQiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsInVuYXJ5RmlsdGVyIiwieXMiLCJmaWVsZEZpbHRlciIsImdzIiwiY29tcG9zaXRlRmlsdGVyIiwiZGlyZWN0aW9uIiwibXMiLCJ3cyIsImxzIiwiWm4iLCJkcyIsInBzIiwiX3MiLCJtZSIsIkVzIiwiVHMiLCJmaWVsZFBhdGgiLCJmcm9tU2VydmVyRm9ybWF0IiwiTmFOIiwiSXMiLCJmaWVsZFBhdGhzIiwiUnMiLCJicyIsIlBzIiwiU3MiLCJvd25lcklkIiwiYWxsb3dUYWJTeW5jaHJvbml6YXRpb24iLCJsZWFzZVRpbWVzdGFtcE1zIiwic3RvcmUiLCJEcyIsInVzZXJJZCIsImxhc3RBY2tub3dsZWRnZWRCYXRjaElkIiwibGFzdFN0cmVhbVRva2VuIiwiQ3MiLCJiYXRjaElkIiwibG9jYWxXcml0ZVRpbWVNcyIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJ1c2VyTXV0YXRpb25zSW5kZXgiLCJ1c2VyTXV0YXRpb25zS2V5UGF0aCIsIk5zIiwiUExBQ0VIT0xERVIiLCIkcyIsInVua25vd25Eb2N1bWVudCIsIm5vRG9jdW1lbnQiLCJyZWFkVGltZSIsInBhcmVudFBhdGgiLCJyZWFkVGltZUluZGV4IiwicmVhZFRpbWVJbmRleFBhdGgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsIkZzIiwiYnl0ZVNpemUiLCJPcyIsImNhbm9uaWNhbElkIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCJNcyIsInNlcXVlbmNlTnVtYmVyIiwiZG9jdW1lbnRUYXJnZXRzSW5kZXgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiTHMiLCJoaWdoZXN0VGFyZ2V0SWQiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q291bnQiLCJCcyIsIlVzIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsInFzIiwiYnVuZGxlSWQiLCJjcmVhdGVUaW1lIiwiS3MiLCJidW5kbGVkUXVlcnkiLCJHcyIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiWHMiLCJyaSIsImxvY2FsV3JpdGVUaW1lIiwiYXBwbHlUb1JlbW90ZURvY3VtZW50IiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0Iiwib2kiLCJiYXRjaCIsImNvbW1pdFZlcnNpb24iLCJkb2NWZXJzaW9ucyIsImFpIiwid2l0aFNlcXVlbmNlTnVtYmVyIiwid2l0aFJlc3VtZVRva2VuIiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJjaSIsInlpIiwiUGUiLCJJaSIsIkFpIiwiYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgiLCJnZXRDb2xsZWN0aW9uUGFyZW50cyIsImdldEVudHJpZXMiLCJ2aSIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiJGkiLCJCaSIsIkdpIiwibWFwS2V5Rm4iLCJlcXVhbHNGbiIsImlubmVyIiwiY3IiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsImdldEVudHJ5Iiwidm4iLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiSWUiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSIsIm5ld0ludmFsaWREb2N1bWVudCIsInVyIiwiZG9jQ2hhbmdlcyIsImRvYyIsImhyIiwibHIiLCJnZXRNdXRhdGlvblF1ZXVlIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldFRhcmdldENhY2hlIiwiZ2V0SW5kZXhNYW5hZ2VyIiwiZ2V0QnVuZGxlQ2FjaGUiLCJjb2xsZWN0R2FyYmFnZSIsInJ1blRyYW5zYWN0aW9uIiwiY29sbGVjdCIsImRyIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzIiwicmVtb3ZlZEJhdGNoSWRzIiwiYWRkZWRCYXRjaElkcyIsIl9yIiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsInlyIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJUciIsInJlZmVyZW5jZURlbGVnYXRlIiwiRXIiLCJnZXRUYXJnZXREYXRhIiwiZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJ2ciIsImdldEJ1bmRsZU1ldGFkYXRhIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiZ2V0TmFtZWRRdWVyeSIsInNhdmVOYW1lZFF1ZXJ5IiwiVnIiLCJTciIsInNzIiwiYWRkUmVmZXJlbmNlIiwicnMiLCJyZW1vdmVSZWZlcmVuY2UiLCJvcyIsImNzIiwiY29udGFpbnNLZXkiLCJmcyIsIkRyIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsIlBPU0lUSVZFX0lORklOSVRZIiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJDciIsImFkZEVudHJ5IiwicmVtb3ZlRW50cnkiLCJuZXdDaGFuZ2VCdWZmZXIiLCJOciIsImdldFNpemUiLCJjaGFuZ2VzIiwiY2hhbmdlc0FwcGxpZWQiLCJnZXRSZWFkVGltZSIsImFzc2VydE5vdEFwcGxpZWQiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJrciIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJhZGRUYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXRzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJnZXRUYXJnZXRDb3VudCIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsInhyIiwidnMiLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsIiRyIiwiVnMiLCJyYWlzZU9uQ29tbWl0dGVkRXZlbnQiLCJvciIsIm9uQ29tbWl0dGVkTGlzdGVuZXJzIiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsIkZyIiwieHMiLCJmcm9tUGF0aCIsInVwZGF0ZUxpbWJvRG9jdW1lbnQiLCJqciIsImFjdGl2ZVRhcmdldElkcyIsIldyIiwicGkiLCJUaSIsIm9ubGluZVN0YXRlSGFuZGxlciIsImFkZFBlbmRpbmdNdXRhdGlvbiIsInVwZGF0ZU11dGF0aW9uU3RhdGUiLCJhZGRMb2NhbFF1ZXJ5VGFyZ2V0IiwidXBkYXRlUXVlcnlTdGF0ZSIsInJlbW92ZUxvY2FsUXVlcnlUYXJnZXQiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJjbGVhclF1ZXJ5U3RhdGUiLCJnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMiLCJpc0FjdGl2ZVF1ZXJ5VGFyZ2V0IiwiaGFuZGxlVXNlckNoYW5nZSIsInNldE9ubGluZVN0YXRlIiwibm90aWZ5QnVuZGxlTG9hZGVkIiwiR3IiLCJFaSIsInpyIiwiUmkiLCJQaSIsImJpIiwiSHIiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiSnIiLCJWaSIsIlNpIiwiRGkiLCJDaSIsIk5pIiwia2kiLCJ4aSIsIkZpIiwiT2kiLCJZciIsImRhdGFiYXNlSW5mbyIsInNzbCIsIk1pIiwiTGkiLCJVaSIsInFpIiwiS2kiLCJqaSIsImF1dG9EZXRlY3RMb25nUG9sbGluZyIsInVzZUZldGNoU3RyZWFtcyIsIlFpIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwiWnIiLCJ0byIsImVvIiwiV2kiLCJ6aSIsIkhpIiwiSmkiLCJZaSIsIlhpIiwiWmkiLCJ0ciIsImVucXVldWVBZnRlckRlbGF5IiwiZXIiLCJza2lwRGVsYXkiLCJubyIsIm5yIiwic3IiLCJpciIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwicnIiLCJhciIsIndyIiwibXIiLCJnciIsInByIiwiSXIiLCJBciIsIlJyIiwic28iLCJ0YXJnZXRDaGFuZ2UiLCJ0YXJnZXRDaGFuZ2VUeXBlIiwiZG9jdW1lbnRDaGFuZ2UiLCJuZXdGb3VuZERvY3VtZW50IiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsIlByIiwiYnIiLCJhZGRUYXJnZXQiLCJsYWJlbHMiLCJpbyIsInN0cmVhbVRva2VuIiwid3JpdGVSZXN1bHRzIiwiY29tbWl0VGltZSIsIndyaXRlcyIsInVwZGF0ZSIsInVwZGF0ZU1hc2siLCJ1cGRhdGVUcmFuc2Zvcm1zIiwic2V0VG9TZXJ2ZXJWYWx1ZSIsImFwcGVuZE1pc3NpbmdFbGVtZW50cyIsInJlbW92ZUFsbEZyb21BcnJheSIsImluY3JlbWVudCIsImN1cnJlbnREb2N1bWVudCIsInJvIiwiYXV0aENyZWRlbnRpYWxzIiwiYXBwQ2hlY2tDcmVkZW50aWFscyIsInRlcm1pbmF0ZSIsIm9vIiwiT3IiLCJNciIsIkxyIiwiQnIiLCJVciIsInFyIiwiS3IiLCJhbyIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJRciIsImdvIiwidW8iLCJjbyIsImhvIiwibW8iLCJfbyIsInhvIiwiZm8iLCJsbyIsInlvIiwicG8iLCJUbyIsIkVvIiwicmVqZWN0TGlzdGVuIiwiSW8iLCJhcHBseVJlbW90ZUV2ZW50IiwiQW8iLCJSbyIsIiRvIiwiUG8iLCJibyIsInZvIiwiVm8iLCJTbyIsIkRvIiwiQ28iLCJhcHBseVN1Y2Nlc3NmdWxXcml0ZSIsIk5vIiwiX24iLCJyZWplY3RGYWlsZWRXcml0ZSIsIlhyIiwic3RvcCIsIkZvIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwidGltZXJIYW5kbGUiLCJoYW5kbGVEZWxheUVsYXBzZWQiLCJPbyIsIk1vIiwia2V5ZWRNYXAiLCJzb3J0ZWRTZXQiLCJMbyIsInRyYWNrIiwiQm8iLCJvbGREb2NzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJlbXB0eVNldCIsIlVvIiwicW8iLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJvbkxpc3RlbiIsIkdvIiwib25Vbmxpc3RlbiIsIlFvIiwiV28iLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsIlpvIiwic25hcHNob3QiLCJrbyIsInZpZXciLCJyZW1vdGVTdG9yZSIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJpc1ByaW1hcnlDbGllbnQiLCJ0cmFja1JlbW92YWxzIiwic3luY2hyb25pemVUYWJzIiwiSm8iLCJZbyIsImdjU2NoZWR1bGVyIiwiWG8iLCJmciIsImluaXRpYWxVc2VyIiwia3MiLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIm11dGVkIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIm9ubGluZUNvbXBvbmVudHMiLCJvZmZsaW5lQ29tcG9uZW50cyIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJnZXRDb25maWd1cmF0aW9uIiwicGVyc2lzdGVuY2VLZXkiLCJpc0RlZmF1bHREYXRhYmFzZSIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJjYWNoZVNpemVCeXRlcyIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJfYXV0aENyZWRlbnRpYWxzIiwiX2FwcENoZWNrQ3JlZGVudGlhbHMiLCJfcGVyc2lzdGVuY2VLZXkiLCJfc2V0dGluZ3MiLCJfc2V0dGluZ3NGcm96ZW4iLCJfZGF0YWJhc2VJZCIsIl9hcHAiLCJfaW5pdGlhbGl6ZWQiLCJfdGVybWluYXRlZCIsIl90ZXJtaW5hdGVUYXNrIiwiX3NldFNldHRpbmdzIiwiY2xpZW50Iiwic2Vzc2lvbkluZGV4IiwiaWFtVG9rZW4iLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwiX3BhdGgiLCJ3aXRoQ29udmVydGVyIiwiX3F1ZXJ5IiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsInN0YWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2ludGVybmFsUGF0aCIsImV1IiwiX2J5dGVTdHJpbmciLCJudSIsIl9tZXRob2ROYW1lIiwic3UiLCJpc0Zpbml0ZSIsIl9sYXQiLCJfbG9uZyIsIml1IiwicnUiLCJ0b011dGF0aW9uIiwib3UiLCJhdSIsImN1IiwiVnUiLCJtZXRob2ROYW1lIiwidXUiLCJodSIsImx1IiwibWVyZ2UiLCJtZXJnZUZpZWxkcyIsIlJ1IiwiSXUiLCJQdSIsIlN1IiwiZnUiLCJfdG9GaWVsZFRyYW5zZm9ybSIsIkV1IiwiQXUiLCJmcm9tRGF0ZSIsImdldFByb3RvdHlwZU9mIiwidnUiLCJidSIsInNlYXJjaCIsIkR1IiwiX2ZpcmVzdG9yZSIsIl91c2VyRGF0YVdyaXRlciIsIl9kb2N1bWVudCIsIl9jb252ZXJ0ZXIiLCJDdSIsImZyb21GaXJlc3RvcmUiLCJjb252ZXJ0VmFsdWUiLCJOdSIsIl9maXJlc3RvcmVJbXBsIiwiJHUiLCJzZXJ2ZXJUaW1lc3RhbXBzIiwiRnUiLCJfc25hcHNob3QiLCJfY2FjaGVkQ2hhbmdlcyIsIl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJPdSIsImNvbnZlcnRUaW1lc3RhbXAiLCJjb252ZXJ0U2VydmVyVGltZXN0YW1wIiwiY29udmVydEJ5dGVzIiwiY29udmVydFJlZmVyZW5jZSIsImNvbnZlcnRHZW9Qb2ludCIsImNvbnZlcnRBcnJheSIsImNvbnZlcnRPYmplY3QiLCJjb252ZXJ0RG9jdW1lbnRLZXkiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsImluaXRpYWxpemVBcHAiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJtZWFzdXJlbWVudElkIiwicHUiLCJ5dSIsIlRvZG9zIiwiZ2V0VGl0bGUiLCJzZXRUaXRsZSIsImdldERlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJnZXREdWVEYXRlIiwic2V0RHVlRGF0ZSIsImdldFByaW9yaXR5Iiwic2V0UHJpb3JpdHkiLCJnZXRJZCIsImdldFByb2plY3QiLCJzZXRQcm9qZWN0Iiwic2V0SWQiLCJzZXRTdGF0dXMiLCJzb3J0VG9kb3NCeVByb2plY3QiLCJzb3J0ZWRCeVByb2plY3QiLCJwcm9qZWN0VGl0bGUiLCJyZW5kZXJQcm9qZWN0SGVhZGVyIiwic29ydFRvZG9zQnlUYXNrIiwic29ydGVkVG9kb3MiLCJzaG93QWxsVGFza3MiLCJyZW5kZXJDYWxjdWxhdG9yIiwid3JhcHBlciIsImlubmVySFRNTCIsImNhbGMiLCJkaXNwbGF5U3RyaW5nIiwiZGlzcGxheUV4cHJlc3Npb24iLCJrZXlQcmVzc2VkRGlzcGxheSIsImV4cHJlc3Npb25EaXNwbGF5IiwiYnRuT25lIiwiYnRuVHdvIiwiYnRuVGhyZWUiLCJidG5Gb3VyIiwiYnRuRml2ZSIsImJ0blNpeCIsImJ0blNldmVuIiwiYnRuRWlnaHQiLCJidG5OaW5lIiwiYnRuWmVybyIsImJ0bkRlY2ltYWwiLCJidG5BZGQiLCJidG5TdWJ0cmFjdCIsImJ0bk11bHRpcGx5IiwiYnRuRGl2aWRlIiwiYnRuRXF1YWxzIiwiYnRuQ2xlYXIiLCJidG5CYWNrc3BhY2UiLCJidG5OZWdhdGl2ZSIsIm9wZXJhdGUiLCJudW0xIiwibnVtMiIsInN1YnRyYWN0IiwibXVsdGlwbHkiLCJkaXZpZGUiLCJ1cGRhdGVyIiwicG9wdWxhdGVEaXNwbGF5Iiwic3RhcnRpbmdNaW51dGVzIiwidGltZSIsImdldFBvbW9kb3JvIiwicG9tb2Rvcm9Db250YWluZXIiLCJwb21vZG9ybyIsImJ1dHRvbkNvbnRhaW5lciIsInN0YXJ0QnRuIiwic3RvcEJ0biIsInJlc2V0QnRuIiwic3RhcnRUaW1lIiwicmVzZXRUaW1lIiwibWludXRlc0xlZnQiLCJzdG9wVGltZXIiLCJzaWRlYmFyRGl2cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ3b3JrTGluayIsImhvbWVMaW5rIiwibWlzY0xpbmsiLCJpbml0aWFsaXplQXV0aCIsImdldEF1dGgiLCJzaG93TG9naW4iLCJhZGRMb2dpblNjcmVlbiIsImxvZ2luQ29udGFpbmVyIiwic2lnbnVwIiwibG9naW4iLCJjb3ZlciIsInNpZ251cEZvcm0iLCJsb2dpbkZvcm0iLCJsb2dpbkJ0biIsInNpZ251cEJ0biIsImxvZ291dEJ0biIsInNpZGViYXJMb2dvdXQiLCJkZW1vIiwibG9nb3V0VXNlciIsInVzZXJuYW1lIiwiTHUiLCJnZXRBbGxEYXRhIiwic2lnbkluV2l0aENyZWRlbnRpYWwiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25VcCIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsInByb2ZpbGVSZXF1ZXN0IiwidXBkYXRlUHJvZmlsZSQxIiwicGFzc3dvcmRQcm92aWRlciIsInVwZGF0ZVByb2ZpbGUiLCJhZGRBdXRoRXZlbnRzIiwiYWxsVGFza3MiLCJ0b2RheSIsInVwY29taW5nIiwib3ZlcmR1ZSIsImRpdiIsIm1lbnUiLCJvcGVuU3ViTWVudSIsImFkZFNpZGViYXJFdmVudHMiLCJoYW1idXJnZXJCdG4iLCJ1cGxvYWQiLCJhZGRQcm9maWxlUGxhY2Vob2xkZXIiLCJhZGRIZWFkZXJFdmVudHMiLCJjcmVhdGVCdG4iLCJjbG9zZUJ0biIsInRpdGxlRXJyb3IiLCJkYXRlRXJyb3IiLCJuZXdUb2RvIiwidG9GaXJlc3RvcmUiLCJvaCIsImFkZERvY3VtZW50Q3VzdG9tSUQiLCJwb3B1bGF0ZVRvZG8iLCJ2YWxpZGF0ZUZvcm0iLCJhZGRCdXR0b25FdmVudHMiXSwic291cmNlUm9vdCI6IiJ9